/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
if("undefined"!=typeof global&&"undefined"==typeof window){global.window=self=global,window.NodeList="undefined"!=typeof NodeList?NodeList:{prototype:{}},window.Document="undefined"!=typeof Document?Document:{prototype:{}};var shimArrayFn=function(){return[]},shimElementFn=function(){return{appendChild:shimArrayFn}};window.document="undefined"!=typeof document?document:{createTextNode:shimArrayFn,getElementsByTagName:shimArrayFn,createElement:shimElementFn,head:{appendChild:shimArrayFn}},window.Event="undefined"!=typeof Event?Event:{prototype:{}},window.Element="undefined"!=typeof Element?Element:{prototype:{}},window.screen="undefined"!=typeof screen?screen:{prototype:{}},window.navigator="undefined"!=typeof navigator?navigator:{prototype:{},userAgent:"shim",platform:{toLowerCase:shimArrayFn}},window.location="undefined"!=typeof location?location:{}}!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.core=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.player=e.bitmovin.player||{},e.bitmovin.player.core=t())}(self,(function(){return function(){var __webpack_modules__={1001:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.NalUnitTypeHevc=t.NalUnitTypeAvc=t.VisualSampleEntryTypes=void 0,t.VisualSampleEntryTypes={Avc:["avc1","avc2","avc3"],Hvc:["hvc1","hev1"]},function(e){e[e.SEI=6]="SEI"}(n||(t.NalUnitTypeAvc=n={})),function(e){e[e.SEI=39]="SEI"}(r||(t.NalUnitTypeHevc=r={}))},2079:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ViewModeHandler=void 0;var r=n(56481),i=n(3714),o=n(44468),a=n(23690),s=n(87827),u=n(93204),l=n(19274),c=n(17891),d=["","webkit","moz","ms","o"],p=["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","webkitbeginfullscreen","webkitendfullscreen"],f=function(){function e(e,t,n,r){var s=this;this.currentPlayer=e,this.container=t,this.eventDispatcher=n,this.shouldForceLegacyFullscreen=r,this.E0=!1,this.width=0,this.height=0,this.G0=function(e){return s.currentPlayer.context.store.dispatch(e)},this.H0=function(e,t){e===s.width&&t===s.height||(s.width=e,s.height=t,s.eventDispatcher(i.PlayerEvent.PlayerResized,{width:"".concat(s.width,"px"),height:"".concat(s.height,"px")}),s.currentPlayer.adController&&"function"==typeof s.currentPlayer.adController.onPlayerResize&&s.currentPlayer.adController.onPlayerResize(s.width,s.height))},this.I0=function(e,t){var n={from:t.viewMode,to:e.viewMode,legacy:s.shouldForceLegacyFullscreen()};s.N0()&&(e.viewMode===o.ViewMode.Fullscreen?(s.currentPlayer.bitdashPlayer.onFullscreenEnter(n),s.width=0,s.height=0):t.viewMode===o.ViewMode.Fullscreen&&s.currentPlayer.bitdashPlayer.onFullscreenExit()),s.eventDispatcher(i.PlayerEvent.ViewModeChanged,n)},this.S0=function(){s.G0((0,a.setPlayerViewMode)(o.ViewMode.PictureInPicture))},this.T0=function(){s.G0((0,a.setPlayerViewMode)(o.ViewMode.Inline))},this.Z0=function(e){if(s.isFullscreen()&&e.type===s.F0)return s.F0=void 0,void s.Y0();!s.E0&&!s.U0()||s.F0||(s.F0=e.type,s.X0())},this.C0=(0,c.createResizeObserver)(this.currentPlayer.container,this.H0),this.C0.observe(),this.J0(),this.L0(),this.M0()}return e.prototype.J0=function(){this.D0=(0,u.subscribe)(this.currentPlayer.context.store)((function(e){return(0,s.getPlayerState)(e)}),this.I0,(function(e,t){return e.viewMode!==t.viewMode}))},e.prototype.K0=function(){return(0,s.getPlayerState)(this.currentPlayer.context.store.getState()).viewMode},e.prototype.L0=function(){var e=this;p.forEach((function(t){return document.addEventListener(t,e.Z0)})),this.U0()&&(this.G0((0,a.setPlayerViewMode)(o.ViewMode.Fullscreen)),this.W0(!0))},e.prototype.M0=function(){this.currentPlayer.videoElement&&(this.currentPlayer.videoElement.addEventListener(l.MediaElementEvent.enterpictureinpicture,this.S0),this.currentPlayer.videoElement.addEventListener(l.MediaElementEvent.leavepictureinpicture,this.T0))},e.prototype.N0=function(){return Boolean(this.currentPlayer)&&Boolean(this.currentPlayer.bitdashPlayer)},e.prototype.O0=function(){return this.N0()&&Boolean(this.currentPlayer.videoElement)&&this.currentPlayer.videoElement.isPictureInPictureAvailable()},e.prototype.P0=function(){return this.currentPlayer.videoElement.isPictureInPicture()},e.prototype.isViewModeAvailable=function(e){return e===o.ViewMode.PictureInPicture?this.O0():[o.ViewMode.Fullscreen,o.ViewMode.Inline].includes(e)},e.prototype.Q0=function(){this.N0()&&Boolean(this.currentPlayer.videoElement)&&(this.currentPlayer.videoElement.exitPictureInPicture(),this.G0((0,a.setPlayerViewMode)(o.ViewMode.Inline)))},e.prototype.R0=function(){var e;null===(e=this.currentPlayer.videoElement)||void 0===e||e.enterPictureInPicture(),this.G0((0,a.setPlayerViewMode)(o.ViewMode.PictureInPicture))},e.prototype.U0=function(){var e=y();return e&&this.currentPlayer.videoElement.getWrappedElement()===e},e.prototype.V0=function(){return this.shouldForceLegacyFullscreen()?"data-legacy-fullscreen":"data-fullscreen"},e.prototype.W0=function(e){var t=this.V0();this.container.setAttribute(t,String(e))},e.prototype.X0=function(){this.W0(!0),this.E0=!1,this.G0((0,a.setPlayerViewMode)(o.ViewMode.Fullscreen))},e.prototype.Y0=function(){this.W0(!1),this.E0=!1,this.K0()===o.ViewMode.Fullscreen&&this.G0((0,a.setPlayerViewMode)(o.ViewMode.Inline))},e.prototype.isFullscreen=function(){return this.K0()===o.ViewMode.Fullscreen||"true"===this.container.getAttribute(this.V0())},e.prototype.k1=function(e){if(void 0===e&&(e=this.container),y())this.currentPlayer.context.logger.debug("cannot enter fullscreen, another element is already fullscreen");else if(this.shouldForceLegacyFullscreen())this.X0();else{var t=h(e,"requestFullscreen");t?this.E0=!0:!t&&this.currentPlayer.videoElement.webkitEnterFullScreen&&(this.E0=!0,this.currentPlayer.videoElement.webkitEnterFullScreen())}},e.prototype.l1=function(){if(this.shouldForceLegacyFullscreen())this.Y0();else{var e=h(window.document,"exitFullscreen");e?this.E0=!0:!e&&this.currentPlayer.videoElement.webkitExitFullscreen&&(this.E0=!0,this.currentPlayer.videoElement.webkitExitFullscreen())}},e.prototype.m1=function(){var e=this.K0();this.isFullscreen()?this.l1():(e===o.ViewMode.PictureInPicture||this.P0())&&this.Q0()},e.prototype.n1=function(e,t){e!==o.ViewMode.Fullscreen?e===o.ViewMode.PictureInPicture&&this.R0():this.k1(t.fullscreenElement)},e.prototype.setViewMode=function(e,t){void 0===t&&(t={}),e!==this.K0()&&(this.m1(),this.isViewModeAvailable(e)&&this.n1(e,t))},e.prototype.dispose=function(){var e,t,n=this;this.C0=(0,r.dispose)(this.C0),p.forEach((function(e){return document.removeEventListener(e,n.Z0)})),null===(e=this.currentPlayer.videoElement)||void 0===e||e.removeEventListener(l.MediaElementEvent.enterpictureinpicture,this.S0),null===(t=this.currentPlayer.videoElement)||void 0===t||t.removeEventListener(l.MediaElementEvent.leavepictureinpicture,this.T0),this.D0()},e}();function h(e,t){return d.some((function(n){var r=t;return""!==n&&(r="".concat(n).concat(t.substring(0,1).toUpperCase()).concat(t.substring(1))),"function"==typeof e[r]&&(e[r](),!0)}))}function y(){var e,t,n;return null!==(n=null!==(t=null!==(e=document.fullscreenElement)&&void 0!==e?e:document.mozFullScreenElement)&&void 0!==t?t:document.webkitFullscreenElement)&&void 0!==n?n:null}t.ViewModeHandler=f},2992:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rewriteMp4BoxType=function(e,t){t.split("").slice(0,r).forEach((function(t,r){return e._raw.setUint8(n+r,t.charCodeAt(0))}))};var n=4,r=4},3336:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerError=void 0;var r=n(40306),i=function(){return function(e,t,n,i){this.code=e,this.name=r.ErrorCode[e],this.sourceIdentifier=i,this.message=null!=n?n:"".concat(this.name),this.data=t,"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}}();t.PlayerError=i},3714:function(e,t){"use strict";var n,r,i,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ContentLocationChangedReason=t.LatencyMode=t.AdInteractionType=t.AdQuartile=t.MetadataType=t.PlayerEvent=void 0,function(e){e.Ready="ready",e.Play="play",e.Playing="playing",e.Paused="paused",e.Seek="seek",e.Seeked="seeked",e.TimeShift="timeshift",e.TimeShifted="timeshifted",e.VolumeChanged="volumechanged",e.Muted="muted",e.Unmuted="unmuted",e.PlayerResized="playerresized",e.PlaybackFinished="playbackfinished",e.Error="error",e.Warning="warning",e.StallStarted="stallstarted",e.StallEnded="stallended",e.AudioChanged="audiochanged",e.AudioAdded="audioadded",e.AudioRemoved="audioremoved",e.VideoQualityChanged="videoqualitychanged",e.AudioQualityChanged="audioqualitychanged",e.VideoDownloadQualityChange="videodownloadqualitychange",e.AudioDownloadQualityChange="audiodownloadqualitychange",e.VideoDownloadQualityChanged="videodownloadqualitychanged",e.AudioDownloadQualityChanged="audiodownloadqualitychanged",e.VideoPlaybackQualityChanged="videoplaybackqualitychanged",e.AudioPlaybackQualityChanged="audioplaybackqualitychanged",e.TimeChanged="timechanged",e.CueParsed="cueparsed",e.CueEnter="cueenter",e.CueUpdate="cueupdate",e.CueExit="cueexit",e.SegmentPlayback="segmentplayback",e.Metadata="metadata",e.MetadataParsed="metadataparsed",e.MetadataChanged="metadatachanged",e.VideoAdaptation="videoadaptation",e.AudioAdaptation="audioadaptation",e.DownloadFinished="downloadfinished",e.SegmentRequestFinished="segmentrequestfinished",e.AdManifestLoaded="admanifestloaded",e.AdStarted="adstarted",e.OverlayAdStarted="overlayadstarted",e.AdQuartile="adquartile",e.AdSkipped="adskipped",e.AdClicked="adclicked",e.AdInteraction="adinteraction",e.AdLinearityChanged="adlinearitychanged",e.AdBreakStarted="adbreakstarted",e.AdBreakFinished="adbreakfinished",e.RestoringContent="restoringcontent",e.AdFinished="adfinished",e.AdError="aderror",e.VRViewingDirectionChange="vrviewingdirectionchange",e.VRViewingDirectionChanged="vrviewingdirectionchanged",e.VRStereoChanged="vrstereochanged",e.CastAvailable="castavailable",e.CastStopped="caststopped",e.CastStart="caststart",e.CastStarted="caststarted",e.CastWaitingForDevice="castwaitingfordevice",e.SourceLoaded="sourceloaded",e.SourceUnloaded="sourceunloaded",e.PeriodSwitch="periodswitch",e.PeriodSwitched="periodswitched",e.DVRWindowExceeded="dvrwindowexceeded",e.SubtitleAdded="subtitleadded",e.SubtitleRemoved="subtitleremoved",e.ShowAirplayTargetPicker="showairplaytargetpicker",e.AirplayAvailable="airplayavailable",e.AirplayChanged="airplaychanged",e.Destroy="destroy",e.PlaybackSpeedChanged="playbackspeedchanged",e.DurationChanged="durationchanged",e.ViewModeChanged="viewmodechanged",e.ModuleReady="moduleready",e.SubtitleEnable="subtitleenable",e.SubtitleEnabled="subtitleenabled",e.SubtitleDisable="subtitledisable",e.SubtitleDisabled="subtitledisabled",e.VideoQualityAdded="videoqualityadded",e.VideoQualityRemoved="videoqualityremoved",e.AudioQualityAdded="audioqualityadded",e.AudioQualityRemoved="audioqualityremoved",e.TargetLatencyChanged="targetlatencychanged",e.LatencyModeChanged="latencymodechanged",e.LicenseValidated="licensevalidated",e.DrmLicenseAdded="drmlicenseadded",e.AspectRatioChanged="aspectratiochanged",e.ContentLocationChanged="contentlocationchanged"}(n||(t.PlayerEvent=n={})),function(e){e.CUETAG="CUETAG",e.DATERANGE="DATERANGE",e.EVENT_STREAM="EVENT-STREAM",e.CUSTOM="CUSTOM",e.SCTE="SCTE",e.ID3="ID3",e.EMSG="EMSG",e.CAST="CAST"}(r||(t.MetadataType=r={})),function(e){e.FIRST_QUARTILE="firstQuartile",e.MIDPOINT="midpoint",e.THIRD_QUARTILE="thirdQuartile"}(i||(t.AdQuartile=i={})),function(e){e.Vpaid="vpaid"}(o||(t.AdInteractionType=o={})),function(e){e.Idle="idle",e.Catchup="catchup",e.Fallback="fallback",e.Suspended="suspended"}(a||(t.LatencyMode=a={})),function(e){e.Failover="failover",e.ContentSteering="contentsteering"}(s||(t.ContentLocationChangedReason=s={}))},3793:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StaticActionTypes=void 0,function(e){e.Default="default"}(n||(t.StaticActionTypes=n={})),t.default=function(e,t){return function(r,i){return void 0===r&&(r=e),t[i.type]?t[i.type](r,i):t[n.Default]?t[n.Default](r,i):r}}},4081:function(e,t){"use strict";var n;function r(e){return"Math"in e&&e.Math===Math}Object.defineProperty(t,"__esModule",{value:!0});var i=null!==(n=function(){return"object"==typeof window&&window&&r(window)?window:void 0}())&&void 0!==n?n:function(){return"object"==typeof self&&self&&r(self)?self:void 0}();t.default=i},4129:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultContentLoader=void 0;var i,o=n(89927),a=n(88052),s=n(62756),u=n(3714),l=n(29669),c=n(70962),d=n(68205),p=n(21513),f=n(4527),h=n(47993),y=n(88844),v=n(58313),E=n(70850),g=n(39980),m=n(77401),S=n(57456),_=n(10647);function b(){return{requestType:l.HttpRequestType.INTERNAL,maxRetries:0}}!function(e){e.start="_download-start"}(i||(i={}));var T=function(){function e(e,t){void 0===t&&(t=b());var n=this;this.load=function(e,t,r,i,o,a,s,u){return void 0===a&&(a=!1),void 0===u&&(u=!1),n.BJ=s,n.EJ=u,t=t||l.HttpRequestMethod.GET,e=n.KJ(e),o=S.XhrHelper.mergeHeaders(n.AJ.HTTP_HEADERS,o),e?(n.CJ={method:t,url:v.URLHelper.toFullUrl(e),headers:JSON.parse(JSON.stringify(o)),responseType:r||l.HttpResponseType.TEXT,credentials:a?"include":"omit"},i&&(n.CJ.body=i),n.cK(n.CJ).then((function(e){return n.LJ(e).catch(n.gK)})).then(n.dK).then(n.aK).then((function(e){return n.FJ&&e.body instanceof n.FJ.Stream?e.body=e.body.transform((function(e){return e}),(function(){return n.fK(e)}),(function(t){return t.message===m.RequestError.Failed&&n.cancel(),e.body.abort(t.message),t.message})):n.fK(e),e}))):Promise.reject("no url given")},this.aK=function(e){return n.kK(e.status)?n.jK("Bad response from server",e):Promise.resolve(e)},this.cK=function(e){return n.bK(e,n.tJ.preprocessHttpRequest)},this.dK=function(e){return n.bK(e,n.tJ.preprocessHttpResponse)},this.eK=function(e){if("function"==typeof n.sJ.onProgress&&!n.vJ&&n.uJ){if(e.loadedBytes>=0&&void 0!==e.totalBytes&&e.loadedBytes>=e.totalBytes)return;var t=n.GJ.getElapsedTimeFrom(n.HJ.start);n.sJ.onProgress(r(r({},e),{elapsedTime:t}))}},this.gK=function(e){return n.yJ++,e.error===m.RequestError.Canceled||e.error===m.RequestError.TimedOut?n.jK(e.error,e.response):n.dK(e.response).then((function(t){var r,i=null==t?void 0:t.status,o=t?t.url:null;if(!i&&n.sJ.resetRetriesWhenOffline&&o&&function(e){return"string"==typeof e&&(0,p.getReachableDomains)().domains.includes((0,v.extractOrigin)(e))}(o)&&(n.yJ=0),n.tJ.retryHttpRequest&&"function"==typeof n.tJ.retryHttpRequest)return n.hK(e.error,t);if((null==t?void 0:t.status)&&n.kK(t.status))return n.jK("retry disabled for HTTP status code "+t.status,t);var a=null!==(r=n.sJ.maxRetries)&&void 0!==r?r:0;return n.yJ>a?n.jK("too many retries",t):n.iK().catch(n.gK)}))},this.jK=function(e,t){var r=n.yJ;return n.lK(),n.uJ=!1,n.JJ(!1,t,r),n.sJ.onFailure(t,{name:e},r-1),Promise.reject(null!=t?t:new Error(e))},this.rJ=e,this.tJ=this.rJ.config&&this.rJ.config.network||{},a.ModuleManager.has(s.ModuleName.EngineBitmovin)&&(this.FJ=a.ModuleManager.get(s.ModuleName.EngineBitmovin)),this.sJ=r(r({},b()),t),this.GJ=new g.PerformanceMonitor(this.rJ),this.mK()}return e.prototype.IJ=function(e,t,n){return Math.min(Math.exp(e*t),n)},e.prototype.JJ=function(e,t,n){t&&this.sJ.requestType&&this.zJ(u.PlayerEvent.DownloadFinished,{type:u.PlayerEvent.DownloadFinished,timestamp:Date.now(),httpStatus:t.status,success:e,url:t.url,downloadTime:(0,o.toSeconds)(E.Util.roundValue((0,o.toMilliSeconds)(t.elapsedTime),0)),size:t.length||0,attempt:n,maxAttempts:this.sJ.maxRetries+1,downloadType:this.sJ.requestType,mimeType:this.BJ,timeToFirstByte:t.timeToFirstByte})},e.prototype.isLoading=function(){return this.uJ},e.prototype.isRetrying=function(){return this.yJ>0},e.prototype.setResetRetriesWhenOffline=function(e){this.sJ.resetRetriesWhenOffline=e},e.prototype.setMaxRetries=function(e){this.sJ.maxRetries=e},e.prototype.KJ=function(e){return v.URLHelper.appendQueryParametersToUrl(e,this.AJ.QUERY_PARAMETERS)},e.prototype.LJ=function(e){var t=this;if(this.vJ)return Promise.reject({error:m.RequestError.Canceled,response:null});this.HJ&&this.GJ.clear(this.HJ);var n="request-"+E.Util.generateUniqueId();return this.HJ={start:n+i.start},this.GJ.addMarker(this.HJ.start),this.CJ=e,this.uJ=!0,this.XK(),this.wJ.getResponse().then((function(e){return null==e.elapsedTime&&(e.elapsedTime=t.GJ.getElapsedTimeFrom(t.HJ.start),e.timeToFirstByte=0),e}))},e.prototype.WK=function(){var e,t=this;this.tJ.sendHttpRequest&&"function"==typeof this.tJ.sendHttpRequest&&(e=(0,E.safeUserCallback)((function(){return t.tJ.sendHttpRequest(t.sJ.requestType,t.CJ)}),this.rJ.logger));var n=this.tJ.requestApi===l.NetworkRequestApi.Fetch||this.EJ;return n&&!(0,h.isFetchSupported)()&&(this.rJ.logger.debug("Using fetch API is configured but not supported, falling back to XHR!"),n=!1),e&&"function"==typeof e.getResponse||(e=n?this.ZK():this.YK()),e},e.prototype.XK=function(){var e=this,t=this.WK();t.setProgressListener((function(t){return e.eK(t)}));var n=f.CancelablePromise.makeCancelable(t.getResponse());this.wJ={getResponse:function(){return n},cancel:function(){t.cancel(),n.cancel({error:m.RequestError.Canceled,response:null})},setProgressListener:t.setProgressListener}},e.prototype.YK=function(){var e=(0,o.toMilliSeconds)(this.AJ.XHR_TIMEOUT);return this.sJ.disableDownloadTimeout&&(e=-1),new _.XhrRequestController(this.rJ.logger,this.CJ,e)},e.prototype.ZK=function(){return new this.FJ.FetchController(this.rJ,this.CJ,(0,o.toMilliSeconds)(this.AJ.XHR_TIMEOUT),this.EJ)},e.prototype.bK=function(e,t){var n,r=this;return t&&"function"==typeof t?Promise.resolve(null!==(n=(0,E.safeUserCallback)((function(){return t(r.sJ.requestType,e)}),this.rJ.logger))&&void 0!==n?n:e):Promise.resolve(e)},e.prototype.fK=function(e){this.uJ=!1,this.JJ(!0,e,this.yJ+1),this.sJ.onSuccess(e,e.elapsedTime,e.url),this.lK(),e.url&&(0,p.default)().dispatch((0,d.addReachableDomain)((0,v.extractOrigin)(e.url)))},e.prototype.hK=function(e,t){var n=this,r=(0,E.safeUserCallback)((function(){return n.tJ.retryHttpRequest(n.sJ.requestType,t,n.yJ)}),this.rJ.logger);return Promise.resolve(r).then((function(e){return e.request?(n.rJ.logger.debug("HttpResponse was passed on 'retryHttpRequest' instead of a HttpRequest",e),n.jK("HttpResponse was passed on 'retryHttpRequest' instead of a HttpRequest",t)):n.LJ(e).catch(n.gK)})).catch((function(){return n.jK(e,t)}))},e.prototype.iK=function(){var e=this,t=this.sJ.retryDelay,n="constant";return this.AJ.INCREASE_RETRY_DELAY&&(t=this.IJ(this.AJ.INCREASE_RETRY_DELAY_BASE_SEC,this.yJ,this.AJ.MAX_INCREASE_RETRY_DELAY_SEC),n="incremental"),this.rJ.logger.debug("Using ".concat(n," retry delay (").concat(null==t?void 0:t.toFixed(1)," seconds, retry ").concat(this.yJ,") for ").concat(this.CJ.url)),new Promise((function(n,r){var i=window.setTimeout((function(){e.LJ(e.CJ).then(n).catch(r)}),(0,o.toMilliSeconds)(t));e.DJ=function(){e.DJ=null,(0,y.clearTimeoutIfDefined)(i),r({error:m.RequestError.Canceled,response:null})}}))},e.prototype.kK=function(e){return this.sJ.requestType in this.AJ.DISABLE_RETRY_FOR_RESPONSE_STATUS&&this.AJ.DISABLE_RETRY_FOR_RESPONSE_STATUS[this.sJ.requestType].includes(e)},e.prototype.lK=function(){this.yJ=0,this.vJ=!1,this.DJ&&"function"==typeof this.DJ&&this.DJ()},e.prototype.cancel=function(){this.vJ=!0,this.uJ&&(this.uJ=!1,this.DJ&&this.DJ(),this.wJ&&this.wJ.cancel())},e.prototype.getResponse=function(){if(this.wJ&&"function"==typeof this.wJ.getResponse)return this.wJ.getResponse()},e.prototype.mK=function(){var e=["onSuccess","onFailure"];this.yJ=0;var t={};E.Util.deepCopy(t,c.DefaultSettings),this.AJ=this.rJ.settings||t;for(var n=0;n<e.length;n++)this.sJ.hasOwnProperty(e[n])&&"function"==typeof this.sJ[e[n]]||(this.sJ[e[n]]=function(){});this.rJ.eventHandler&&"function"==typeof this.rJ.eventHandler.dispatchEvent?this.zJ=this.rJ.eventHandler.dispatchEvent:this.zJ=function(){}},e.prototype.dispose=function(){this.isLoading()&&this.cancel(),this.HJ&&this.GJ.clear(this.HJ),this.wJ=null,this.zJ=null,this.AJ=null},e}();t.DefaultContentLoader=T},4131:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hasLoadedData=function(e){var t,n,r=(null!==(n=null===(t=e.responseTiming)||void 0===t?void 0:t.headersReceivedTimestamp)&&void 0!==n?n:-1)>-1,i=e.loadedBytes>0;return r&&i}},4224:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.WarningCode=void 0,function(e){e[e.GENERAL_WARNING=1e3]="GENERAL_WARNING",e[e.API_INVALID_ARGUMENT=1001]="API_INVALID_ARGUMENT",e[e.SETUP_WARNING=1100]="SETUP_WARNING",e[e.SETUP_CREATE_OBJECT_URL_MISSING=1101]="SETUP_CREATE_OBJECT_URL_MISSING",e[e.SETUP_SERVICE_WORKER_INITIALIZATION_FAILED=1103]="SETUP_SERVICE_WORKER_INITIALIZATION_FAILED",e[e.SETUP_SERVICE_WORKER_LOCATION_MISSING=1104]="SETUP_SERVICE_WORKER_LOCATION_MISSING",e[e.SOURCE_WARNING=1200]="SOURCE_WARNING",e[e.SOURCE_CODEC_OR_FILE_FORMAT_NOT_SUPPORTED=1201]="SOURCE_CODEC_OR_FILE_FORMAT_NOT_SUPPORTED",e[e.SOURCE_SMOOTH_REPRESENTATION_MISSING=1202]="SOURCE_SMOOTH_REPRESENTATION_MISSING",e[e.SOURCE_SMOOTH_INVALID_INIT_DATA=1203]="SOURCE_SMOOTH_INVALID_INIT_DATA",e[e.SOURCE_SMOOTH_UNKNOWN_STREAM_INDEX_TYPE=1204]="SOURCE_SMOOTH_UNKNOWN_STREAM_INDEX_TYPE",e[e.SOURCE_SMOOTH_EMPTY_QUALITY_LEVEL=1205]="SOURCE_SMOOTH_EMPTY_QUALITY_LEVEL",e[e.PLAYBACK_WARNING=1300]="PLAYBACK_WARNING",e[e.PLAYBACK_GAP_DETECTED=1301]="PLAYBACK_GAP_DETECTED",e[e.PLAYBACK_DECODE_RETRIES_EXCEEDED=1302]="PLAYBACK_DECODE_RETRIES_EXCEEDED",e[e.PLAYBACK_COULD_NOT_BE_STARTED=1303]="PLAYBACK_COULD_NOT_BE_STARTED",e[e.PLAYBACK_NEGATIVE_DECODING_TIMESTAMP_ENCOUNTERED=1304]="PLAYBACK_NEGATIVE_DECODING_TIMESTAMP_ENCOUNTERED",e[e.PLAYBACK_INVALID_DATA_SEGMENT_ENCOUNTERED=1305]="PLAYBACK_INVALID_DATA_SEGMENT_ENCOUNTERED",e[e.NETWORK_WARNING=1400]="NETWORK_WARNING",e[e.NETWORK_COULD_NOT_LOAD_MANIFEST=1401]="NETWORK_COULD_NOT_LOAD_MANIFEST",e[e.NETWORK_COULD_NOT_LOAD_SUBTITLE=1402]="NETWORK_COULD_NOT_LOAD_SUBTITLE",e[e.DRM_WARNING=2e3]="DRM_WARNING",e[e.DRM_SERVER_CERTIFICATE_NOT_SUPPORTED=2001]="DRM_SERVER_CERTIFICATE_NOT_SUPPORTED",e[e.DRM_COULD_NOT_DECRYPT_SEGMENT=2002]="DRM_COULD_NOT_DECRYPT_SEGMENT",e[e.DRM_LICENSE_RENEWAL_FAILED=2003]="DRM_LICENSE_RENEWAL_FAILED",e[e.DRM_FAILED_LICENSE_REQUEST=2004]="DRM_FAILED_LICENSE_REQUEST",e[e.DRM_RESTRICTED_OUTPUT=2013]="DRM_RESTRICTED_OUTPUT",e[e.VR_WARNING=2100]="VR_WARNING",e[e.VR_RENDERING_ERROR=2101]="VR_RENDERING_ERROR",e[e.MODULE_WARNING=3e3]="MODULE_WARNING",e[e.MODULE_MISSING=3001]="MODULE_MISSING",e[e.MODULE_ADVERTISING_WARNING=3100]="MODULE_ADVERTISING_WARNING",e[e.MODULE_ADVERTISING_IMA_SDK_NOT_FOUND=3101]="MODULE_ADVERTISING_IMA_SDK_NOT_FOUND",e[e.MODULE_ADVERTISING_OM_SDK_MODULE_MISSING=3102]="MODULE_ADVERTISING_OM_SDK_MODULE_MISSING",e[e.MODULE_ADVERTISING_OM_SDK_INIT_FAILURE=3103]="MODULE_ADVERTISING_OM_SDK_INIT_FAILURE",e[e.MODULE_ADVERTISING_OM_SDK_TRACKING_FAILURE=3104]="MODULE_ADVERTISING_OM_SDK_TRACKING_FAILURE"}(n||(t.WarningCode=n={}))},4524:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferRangeHelper=t.MultiRange=void 0,t.rangeFixedValue=d,t.areDisjoint=function(e,t){return d(e.end)<d(t.start)||d(e.start)>d(t.end)},t.isSurrounding=function(e,t){return d(t.start)>d(e.start)&&d(t.end)<d(e.end)},t.isOverlapping=function(e,t){return d(e.start)>=d(t.start)&&d(e.start)<=d(t.end)||d(e.end)>=d(t.start)&&d(e.end)<=d(t.end)},t.isFullyIncluded=p,t.isInTimeRanges=f,t.getBufferedRanges=function(e){var t=[],n=null==e?void 0:e.buffered;if(n)for(var r=0;r<n.length;r++)t.push({start:n.start(r),end:n.end(r)});return t},t.convertRangeToTimeMode=function(e,t,n){var r,o=(0,s.toSeconds)(null!==(r=null==t?void 0:t.getTime())&&void 0!==r?r:0);return n===i.TimeMode.RelativeTime&&(o=-o),{start:e.start+o,end:e.end+o}};var i=n(20213),o=n(44468),a=n(76399),s=n(89927),u=Math.pow(10,2),l=function(){function e(e,t,n){this.start=e,this.end=t,this.hits=n||1}return e.prototype.getHits=function(){return this.hits},e.prototype.getStart=function(){return this.start},e.prototype.getEnd=function(){return this.end},e.prototype.Cy=function(t){for(var n=[],r=0;r<t.length;r++){var i=t[r],o=i.start,a=i.end,s=i.hits,u=this.start<o&&this.end>a,l=this.start<o&&this.end>o&&this.end<a,c=this.start>o&&this.start<a&&this.end>a,d=this.start>o&&this.end<a,p=this.start===o&&this.end<a,f=this.start===o&&this.end>a,h=this.start<o&&this.end===a,y=this.start>o&&this.end===a,v=this.start===o&&this.end===a;u||f||h||v?n.push(new e(o,a,s+1)):l||p?(n.push(new e(o,this.end,s+1)),n.push(new e(this.end,a,s))):c||y?(n.push(new e(o,this.start,s)),n.push(new e(this.start,a,s+1))):d?(n.push(new e(o,this.start,s)),n.push(new e(this.start,this.end,s+1)),n.push(new e(this.end,a,s))):n.push(new e(o,a,s))}return n},e.prototype.Dy=function(t){for(var n=0;n<t.length&&!(this.end-this.start<=0);n++){var r=t[n],i=null;n+1<t.length&&(i=t[n+1]),this.start<r.start?(t.unshift(new e(this.start,Math.min(r.start,this.end))),n++,this.start=r.end):i&&i.start>this.start?(t.splice(n,0,new e(Math.max(r.end,this.start),Math.min(this.end,i.start))),this.start=i.end,n++):null===i&&this.end>r.end&&(t.push(new e(Math.max(r.end,this.start),this.end)),this.start=this.end)}return t},e.prototype.intersect=function(e){if(0===e.length)return[this];var t=this.Cy(e);return this.Dy(t)},e}();t.MultiRange=l;var c=function(){function e(){}return e.mergeRanges=function(e,t,n){if(void 0===t&&(t=0),void 0===n&&(n=!0),e.length<1)return e;e.sort((function(e,t){return e.start-t.start}));var i=[];i.push(n?r({},e[0]):e[0]);for(var o=1;o<e.length;o++){var a=i.slice(-1)[0],s=e[o];if(!p(s,a)){var u=a.end>=s.start-t,l=a.end<=s.end+t;u&&l?i[i.length-1].end=s.end:i.push(n?r({},s):s)}}return i},e.excludeTimeRange=function(e,t){return e.filter((function(e){return!p(e,t)})).reduce((function(e,n){var i=function(e,t){return e>t.start&&e<=t.end}(t.start,n),o=function(e,t){return e<t.end&&e>=t.start}(t.end,n);return i&&e.push(r(r({},n),{end:t.start})),o&&e.push(r(r({},n),{start:t.end})),i||o||e.push(r({},n)),e}),[])},e.getRangesFromQueue=function(t,n){void 0===n&&(n=0);for(var r=[],i=Array.isArray(t)?new a.ArrayIterator(t):t;i.hasNext();){var o=i.next();if(!o.isInit()){var s={start:o.getPlaybackTime()||0,end:0};s.end=s.start+o.getDuration(),r.push(s)}}return e.mergeRanges(r,n,!1)},e.getMultiRanges=function(e){var t=[],n=0;for(var r in e)if(e.hasOwnProperty(r)){n++;for(var i=e[r],o=0;o<i.length;o++)t=new l(i[o].start,i[o].end).intersect(t)}return[t,n]},e.findGapsInRanges=function(e){for(var t=[],n=0;n<e.length-1;n++)e[n+1].start-e[n].end>0&&t.push({start:e[n].end,end:e[n+1].start});return t},e.getCommonBufferedRanges=function(t){var n=[],r=e.getMultiRanges(t),i=r[0],o=r[1];for(var a in i)i.hasOwnProperty(a)&&i[a].getHits()===o&&n.push(i[a]);return n},e.getCommonBufferedTime=function(t,n,r,i){for(var o=-1,a=e.getCommonBufferedRanges(n),s=0;s<a.length;s++)if(a[s].getStart()<=r&&a[s].getEnd()>=r)return r;for(var u in n)if(n.hasOwnProperty(u)){if(n[u].length<1)return null;var l=n[u];for(s=0;s<l.length&&!(l[s].start>=o&&(o=l[s].start,l[s].start>=r));s++);}return-1===o?null:o<r&&r-o<i?r:(t.debug("common time diff [s]",r-o),o)},e.isInBufferedRange=function(e,t){var n=Object.keys(e);return!!n.length&&n.every((function(n){return f(e[n],t)}))},e.getTotalCommonBufferLength=function(e){return this.getCommonBufferedRanges(e).reduce((function(e,t){return e+t.getEnd()-t.getStart()}),0)},e.getBufferLevel=function(e,t,n){if(!e||!e.length)return 0;var r=0;return n===o.BufferType.ForwardDuration?r=e[e.length-1].end-t:n===o.BufferType.BackwardDuration&&(r=t-e[0].start),Math.max(r,0)},e}();function d(e){return void 0===e||isNaN(e)?0:Math.round(e*u)/u}function p(e,t){return d(t.start)<=d(e.start)&&d(t.end)>=d(e.end)}function f(e,t,n){void 0===n&&(n=0);for(var r=0,i=e;r<i.length;r++){var o=i[r],a=Math.min(Math.round(1e3*o.start)/1e3,o.start),s=Math.max(Math.round(1e3*o.end)/1e3,o.end);if(t>=a&&t<=s-n)return!0}return!1}t.BufferRangeHelper=c},4527:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CancelablePromise=void 0;var n=function(){function e(){}return e.makeCancelable=function(e){var t=function(e){},n=new Promise((function(n,r){t=r,e.then(n,r)}));return n.cancel=t.bind(n),n},e}();t.CancelablePromise=n},6873:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsReducer=void 0;var a=n(3793),s=n(27359),u=n(33436);function l(e,t){var n,r=t.mimeType,o=t.threshold;return i(i({},e),((n={})[r]=i(i({},e[r]),{bufferLogicActivationThreshold:o}),n))}function c(e,t){var n,r,a=t.mimeType,s=t.metricType,u=t.value,l=e[a].settings.metricHistorySize,c=e[a].data[s]||[],d=l>0&&c.length>=l;return i(i({},e),((n={})[a]=i(i({},e[a]),{data:i(i({},e[a].data),(r={},r[s]=o(o([],d?c.slice(1,c.length):c,!0),[{time:Date.now(),value:u}],!1),r))}),n))}function d(e,t){var n,r,o=t.mimeType,a=t.metricType;return i(i({},e),((n={})[o]=i(i({},e[o]),{data:i(i({},e[o].data),(r={},r[a]=[],r))}),n))}function p(e,t){var n,r,o=t.mimeType,a=t.metricType,s=t.value,u=(e[o].data[a]||[]).filter((function(e){return!(e.time===s.time&&e.value===s.value)}));return i(i({},e),((n={})[o]=i(i({},e[o]),{data:i(i({},e[o].data),(r={},r[a]=u,r))}),n))}t.MetricsReducer=(0,a.default)({},((r={})[u.MetricsActionType.InitializeMetricsForMimeType]=function(e,t){return function(e,t){var n,r=t.mimeType,o=t.settings,a=t.saveUnderName;return i(i({},e),((n={})[a]={mimeType:r,settings:{metricHistorySize:o.METRIC_HISTORY_SIZE},bufferLogicActivationThreshold:o.BUFFER_LOGIC_ACTIVATION_THRESHOLD,data:{}},n))}(e,t.payload)},r[u.MetricsActionType.RemoveMetricsForMimeType]=function(e,t){return function(e,t){var n=i({},e);return delete n[t.mimeType],n}(e,t.payload)},r[u.MetricsActionType.SetBufferLogicActivationThreshold]=function(e,t){var n=t.payload;return(0,s.containMimeTypeGuard)(l)(e,n)},r[u.MetricsActionType.AddMetricsValue]=function(e,t){var n=t.payload;return(0,s.containMimeTypeGuard)(c)(e,n)},r[u.MetricsActionType.ClearMetricsHistory]=function(e,t){var n=t.payload;return(0,s.containMimeTypeGuard)(d)(e,n)},r[u.MetricsActionType.RemoveMetricsValue]=function(e,t){var n=t.payload;return(0,s.containMimeTypeGuard)(p)(e,n)},r))},7387:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.CapabilityKey=t.CapabilityActionType=void 0,function(e){e.InitCapabilities="initcapabilities",e.SetCapability="setcapability"}(n||(t.CapabilityActionType=n={})),function(e){e.isPlayStation5="isPlayStation5",e.isPlayStation4="isPlayStation4",e.isMobile="isMobile",e.isTizen="isTizen",e.isSafari="isSafari",e.isChrome="isChrome",e.isChromium="isChromium",e.isFirefox="isFirefox",e.isFirefoxIOS="isFirefoxIOS",e.isWebOS="isWebOS",e.isVidaa="isVidaa",e.isVizio="isVizio",e.isIOS="isIOS",e.isSafariIOS="isSafariIOS",e.isEdge="isEdge",e.isLegacyEdge="isLegacyEdge",e.isEdgeChromium="isEdgeChromium",e.isReactNative="isReactNative",e.MSESafari="MSESafari",e.isLocalStorageAvailable="isLocalStorageAvailable",e.isInlinePlaybackRestricted="isInlinePlaybackRestricted",e.IOSVersion="IOSVersion",e.edgeVersion="edgeVersion",e.safariVersion="safariVersion",e.webOSChromiumVersion="webOSChromiumVersion",e.techSupportedByModules="techSupportedByModules",e.techSupportedByPlatform="techSupportedByPlatform",e.techSupportedByModulesOnPlatform="techSupportedByModulesOnPlatform"}(r||(t.CapabilityKey=r={}))},8719:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StoredCueTracker=void 0;var n=function(){function e(){this.Tcb={}}return e.prototype.add=function(e){this.Tcb[e]=void 0},e.prototype.remove=function(e){delete this.Tcb[e]},e.prototype.removeAll=function(){this.Tcb={}},e.prototype.has=function(e){return e in this.Tcb},e.prototype.dispose=function(){this.removeAll()},e}();t.StoredCueTracker=n},8973:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerReducer=void 0;var a=n(3793),s=n(23690),u=n(85648),l=(0,s.getInitialPlayerState)();t.PlayerReducer=(0,a.default)(l,((r={})[u.PlayerActionType.SetPlayerPlayback]=function(e,t){var n=t.payload;return i(i({},e),{playbackState:n})},r[u.PlayerActionType.SetPlayerSeek]=function(e,t){var n=t.payload;return i(i({},e),{seekState:n})},r[u.PlayerActionType.SetPlayerStall]=function(e,t){var n=t.payload;return i(i({},e),{isStalled:n})},r[u.PlayerActionType.SetRendererStall]=function(e,t){return i(i({},e),{isRendererStalled:t.payload})},r[u.PlayerActionType.SetPlayerTimeshift]=function(e,t){var n=t.payload;return i(i({},e),{timeShiftState:n})},r[u.PlayerActionType.SetPlayerHasBeenPlaying]=function(e,t){var n=t.payload;return i(i({},e),{hasBeenPlaying:n})},r[u.PlayerActionType.SetPlayerTargetPlaybackTime]=function(e,t){var n=t.payload;return i(i({},e),{targetPlaybackTime:n})},r[u.PlayerActionType.SetPlayerPlaybackSpeed]=function(e,t){var n=t.payload;return i(i({},e),{playbackSpeed:n})},r[u.PlayerActionType.SetPlayerViewMode]=function(e,t){var n=t.payload;return i(i({},e),{viewMode:n})},r[u.PlayerActionType.AddPlayerPendingTransition]=function(e,t){var n=t.payload;return i(i({},e),{pendingTransitions:o(o([],e.pendingTransitions,!0),[n],!1)})},r[u.PlayerActionType.FilterPlayerPendingTransition]=function(e,t){var n=t.payload;return i(i({},e),{pendingTransitions:e.pendingTransitions.filter((function(e){return e!==n}))})},r[u.PlayerActionType.RemovePlayerPendingTransition]=function(e,t){var n=t.payload;return i(i({},e),{pendingTransitions:e.pendingTransitions.filter((function(e,t){return t!==n}))})},r[u.PlayerActionType.ClearPlayerPendingTransitions]=function(e,t){return i(i({},e),{pendingTransitions:[]})},r[u.PlayerActionType.ResetPlayerState]=function(e,t){var n=t.payload.keepState,r={};return n.forEach((function(t){return r[t]=e[t]})),i(i({},l),r)},r[u.PlayerActionType.SetDestroyState]=function(e,t){var n=t.payload;return i(i({},e),{destroyState:n})},r[u.PlayerActionType.SetRemoteControlType]=function(e,t){var n=t.payload;return i(i({},e),{remoteControlState:i(i({},e.remoteControlState),{remoteControlType:n})})},r[u.PlayerActionType.SetConnectionState]=function(e,t){var n=t.payload;return i(i({},e),{remoteControlState:i(i({},e.remoteControlState),{connectionState:n})})},r[u.PlayerActionType.UpdateSeekingProcess]=function(e,t){var n=t.payload;return i(i({},e),{seekingProcess:i(i({},e.seekingProcess),n)})},r))},10647:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.XhrRequestController=void 0;var r=n(77401),i=n(96266),o=n(99313),a=function(){function e(e,t,n){var r=this;this.setProgressListener=function(e){r.X3.on(i.XhrEvent.Progress,(function(t){return e(t)}))},this.X3=new o.XhrWrapper(e,t,n)}return e.prototype.getResponse=function(){return this.Y3=this.Y3||this.X3.send(),this.Y3},e.prototype.cancel=function(){this.X3.abort(r.RequestError.Canceled)},e}();t.XhrRequestController=a},13053:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.getPerformanceShim=void 0,function(e){e.mark="mark",e.measure="measure"}(n||(n={}));var r=[],i={},o=function(e,t){r=t?r.filter((function(n){return n.name!==t&&n.entryType===e})):r.filter((function(t){return t.entryType!==e}))},a=function(e,t){return r.filter((function(n){return n[e]===t}))},s=function(e,t){i[t]=e,r.push(e)};t.getPerformanceShim=function(){return{now:function(){return Date.now()},mark:function(e){var t={name:e,entryType:n.mark,startTime:this.now(),duration:0};s(t,e)},measure:function(e,t,r){!function(e,t){var n=function(e){return"[Performance] Mark ".concat(e," does not exist.")};if(!i[t])throw new Error(n(t));if(!i[e])throw new Error(n(e))}(t,r);var o=i[t]?i[t].startTime:0,a={name:e,startTime:o,duration:(i[r]?i[r].startTime:this.now())-o,entryType:n.measure};s(a,e)},getEntriesByName:function(e){return a("name",e)},getEntriesByType:function(e){return a("entryType",e)},clearMarks:function(e){o(n.mark,e)},clearMeasures:function(e){o(n.measure,e)}}}},13531:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Logger=t.LogLevel=void 0;var i,o=n(99266),a=n(44468);!function(e){e[e.OFF=0]="OFF",e[e.INSANE=1]="INSANE",e[e.DEBUG=2]="DEBUG",e[e.LOG=3]="LOG",e[e.WARN=4]="WARN",e[e.ERROR=5]="ERROR"}(i||(t.LogLevel=i={}));var s=function(){function e(e,t){void 0===t&&(t=i.WARN),this.AH=e,this.setLogLevel(t)}return e.prototype.setConfig=function(e){this.BH=e.logs&&"function"==typeof e.logs().onLog?e.logs().onLog:void 0},e.prototype.setLogLevel=function(t){"string"==typeof t&&(t=e.parseLogLevel(t)),this.zH=t},e.prototype.getLogLevel=function(){return this.zH},e.prototype.isLevelEnabled=function(e){return!(void 0===this.BH||e===i.INSANE)||this.zH!==i.OFF&&this.zH<=e},e.prototype.setSettings=function(e){this.AH=e},e.parseLogLevel=function(e){switch(e){case o.LogLevels.DEBUG:return i.DEBUG;case o.LogLevels.LOG:return i.LOG;case o.LogLevels.WARN:return i.WARN;case o.LogLevels.ERROR:return i.ERROR;default:return i.OFF}},e.prototype.CH=function(e,t,n){var o,s,u,l=function(e){switch(e){case i.INSANE:case i.DEBUG:return a.LogLevel.DEBUG;case i.LOG:return a.LogLevel.LOG;case i.WARN:return a.LogLevel.WARN;case i.ERROR:return a.LogLevel.ERROR;default:return null}}(e),c=r([],n,!0);if(this.zH>0&&this.zH<=e&&("string"==typeof this.AH.LOG_PREFIX&&this.AH.LOG_PREFIX.length>0?(o=console[l]).call.apply(o,r([console,this.AH.LOG_PREFIX,t],c,!1)):(s=console[l]).call.apply(s,r([console,t],c,!1))),this.BH&&e!==i.INSANE)try{(u=this.BH).call.apply(u,r([null,l,t],c,!1))}catch(e){}},e.prototype.insane=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.CH(i.INSANE,e,t)},e.prototype.debug=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.CH(i.DEBUG,e,t)},e.prototype.log=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.CH(i.LOG,e,t)},e.prototype.warn=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.CH(i.WARN,e,t)},e.prototype.error=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];this.CH(i.ERROR,e,t)},e.prototype.forceLogBeautified=function(e,t,n){navigator.userAgent.indexOf("Trident/")>-1||navigator.userAgent.indexOf("Edge/")>-1?console.log(e):console.log("%c"+e,"color:"+t+";font-weight:bold;font-size:"+n+"px;")},e}();t.Logger=s},14638:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CapabilityReducer=void 0;var o=n(3793),a=n(7387);t.CapabilityReducer=(0,o.default)({},((r={})[a.CapabilityActionType.InitCapabilities]=function(e,t){return function(e){return e}(t.payload)},r[a.CapabilityActionType.SetCapability]=function(e,t){return function(e,t){var n,r=t.key,o=t.value;return i(i({},e),((n={})[r]=o,n))}(e,t.payload)},r))},15014:function(e,t){"use strict";function n(e,t){var n;return null===(n=null==e?void 0:e.Period)||void 0===n?void 0:n.find((function(e){return e._id===t}))}function r(e,t){var r,i=n(e,t.periodId);if(i)return null===(r=i.AdaptationSet)||void 0===r?void 0:r.find((function(e){return e._internalId.equals(t)}))}Object.defineProperty(t,"__esModule",{value:!0}),t.findRepresentation=void 0,t.findPeriod=n,t.findAdaptationSet=r,t.findRepresentation=function(e,t){var n,i=r(e,t);if(i)return null===(n=i.Representation)||void 0===n?void 0:n.find((function(e){return e._internalId.equals(t)}))}},15487:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isIOS=t.isMobile=t.isWebOs2022OrNewer=t.isWebOs2020=t.isWebOs2017=t.isWebOs2016=t.isWebOs2019OrOlder=t.getWebOsChromiumVersion=t.isWebOS=t.isWpeWebKit=t.isVizio=t.getVidaaVersion=t.isVidaa=t.getTizenVersion=t.isTizen2020=t.isTizen2016=t.isTizen2017=t.isTizen2018=t.isTizen2019=t.isTizen=t.getEdgeVersion=t.isEdge=t.getSafariVersion=t.isSafari=t.isFirefoxIOS=t.isFirefox=t.isChromium=t.isChrome=t.WEBOS_2022_CHROMIUM_VERSION=t.WEBOS_2021_CHROMIUM_VERSION=t.WEBOS_2020_CHROMIUM_VERSION=t.WEBOS_2018_2019_CHROMIUM_VERSION=t.WEBOS_2016_2017_CHROMIUM_VERSION=t.TIZEN_2020_MINOR_VERSION=t.TIZEN_2020_MAJOR_VERSION=t.TIZEN_2019_MINOR_VERSION=t.TIZEN_2019_MAJOR_VERSION=t.TIZEN_2018_MINOR_VERSION=t.TIZEN_2018_MAJOR_VERSION=t.TIZEN_2017_MINOR_VERSION=t.TIZEN_2017_MAJOR_VERSION=t.TIZEN_2016_MINOR_VERSION=t.TIZEN_2016_MAJOR_VERSION=t.SAFARI_17_MAJOR_VERSION=t.SAFARI_15_MAJOR_VERSION=t.IOS_17=t.IOS_15=t.IOS_10=t.IOS_9=t.EDGE_CHROMIUM_FIRST_MAJOR_VERSION=void 0,t.resetPlatformDetectorCache=t.isSafari17orIOS17=t.isSafari15orIOS15=t.getIOSVersion=t.isSafariIOS=void 0,t.isLegacyEdge=i,t.isEdgeChromium=function(){return(0,t.isEdge)()&&(0,t.getEdgeVersion)().major>=t.EDGE_CHROMIUM_FIRST_MAJOR_VERSION},t.isPlayStation5=o,t.isPlayStation4=a,t.isReactNative=function(){return"ReactNative"===window.navigator.product};var r=n(47993);function i(){return(0,t.isEdge)()&&(0,t.getEdgeVersion)().major<t.EDGE_CHROMIUM_FIRST_MAJOR_VERSION}function o(){return/PlayStation 5/i.test(navigator.userAgent)}function a(){return/PlayStation 4/i.test(navigator.userAgent)}t.EDGE_CHROMIUM_FIRST_MAJOR_VERSION=79,t.IOS_9=9,t.IOS_10=10,t.IOS_15=15,t.IOS_17=17,t.SAFARI_15_MAJOR_VERSION=15,t.SAFARI_17_MAJOR_VERSION=17,t.TIZEN_2016_MAJOR_VERSION=2,t.TIZEN_2016_MINOR_VERSION=4,t.TIZEN_2017_MAJOR_VERSION=3,t.TIZEN_2017_MINOR_VERSION=0,t.TIZEN_2018_MAJOR_VERSION=4,t.TIZEN_2018_MINOR_VERSION=0,t.TIZEN_2019_MAJOR_VERSION=5,t.TIZEN_2019_MINOR_VERSION=0,t.TIZEN_2020_MAJOR_VERSION=5,t.TIZEN_2020_MINOR_VERSION=5,t.WEBOS_2016_2017_CHROMIUM_VERSION=38,t.WEBOS_2018_2019_CHROMIUM_VERSION=53,t.WEBOS_2020_CHROMIUM_VERSION=68,t.WEBOS_2021_CHROMIUM_VERSION=79,t.WEBOS_2022_CHROMIUM_VERSION=87,t.isChrome=function(){return navigator.userAgent.includes("Chrome")&&!(0,t.isEdge)()},t.isChromium=function(){return(0,t.isChrome)()||(0,t.isEdge)()&&!i()},t.isFirefox=function(){return navigator.userAgent.includes("Firefox")},t.isFirefoxIOS=function(){return navigator.userAgent.includes("FxiOS")&&(0,t.isIOS)()},t.isSafari=function(){return navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("IEMobile")&&!navigator.userAgent.includes("Edge")&&!(0,t.isTizen)()&&!o()&&!a()&&!(0,t.isWpeWebKit)()||(0,r.isFairPlayDrmSupported)()},t.getSafariVersion=function(){var e=/Version\/(\d+)\.?(\d+)?\.?(\d+)?/.exec(navigator.userAgent)||null;if(!e)return{};var t=e[1],n=e[2],r=e[3],i=function(e){return parseInt(e)};return{major:i(t),minor:i(n),patch:i(r)}},t.isEdge=function(){return/Edge\/\d+/i.test(navigator.userAgent)||/Edg\/\d+/i.test(navigator.userAgent)},t.getEdgeVersion=function(){var e=/Edge\/(\d+)\.?(\d+)/.exec(navigator.userAgent)||/Edg\/(\d+)\.?(\d+)/.exec(navigator.userAgent);if(!e||0===e.length)return{major:0,minor:0};var t={};return e[1]&&(t.major=parseInt(e[1])),e[1]&&(t.minor=parseInt(e[2])),t};var s,u,l,c,d=function(e,n){var r=(0,t.getTizenVersion)();return r.major===e&&r.minor===n};t.isTizen=function(){return null!=s||(s=navigator.userAgent.includes("Tizen")),s},t.isTizen2019=function(){return d(t.TIZEN_2019_MAJOR_VERSION,t.TIZEN_2019_MINOR_VERSION)},t.isTizen2018=function(){return d(t.TIZEN_2018_MAJOR_VERSION,t.TIZEN_2018_MINOR_VERSION)},t.isTizen2017=function(){return d(t.TIZEN_2017_MAJOR_VERSION,t.TIZEN_2017_MINOR_VERSION)},t.isTizen2016=function(){return d(t.TIZEN_2016_MAJOR_VERSION,t.TIZEN_2016_MINOR_VERSION)},t.isTizen2020=function(){return d(t.TIZEN_2020_MAJOR_VERSION,t.TIZEN_2020_MINOR_VERSION)},t.getTizenVersion=function(){if(void 0===u){var e=/Tizen (\d).(\d)/.exec(navigator.userAgent);u=(null==e?void 0:e[1])?{major:Number(e[1]),minor:Number(e[2]||0)}:{}}return u},t.isVidaa=function(){return navigator.userAgent.includes("VIDAA")},t.getVidaaVersion=function(){var e=new RegExp(/VIDAA\/(\d+)\.?(\d+)/).exec(navigator.userAgent);return(null==e?void 0:e[1])?{major:Number(e[1]),minor:Number(e[2])}:{}},t.isVizio=function(){return navigator.userAgent.includes("VIZIO")},t.isWpeWebKit=function(){return navigator.userAgent.includes("WPE")},t.isWebOS=function(){return null!=l||(l=navigator.userAgent.includes("Web0S")||navigator.userAgent.includes("NetCast")),l},t.getWebOsChromiumVersion=function(){var e;if(void 0===c){var t=new RegExp(/Chrome\/(\d+)\.?(\d+)/).exec(navigator.userAgent);if(!(null==t?void 0:t[1]))return{};c={major:Number(t[1]),minor:Number(null!==(e=t[2])&&void 0!==e?e:0)}}return c},t.isWebOs2019OrOlder=function(){var e=(0,t.getWebOsChromiumVersion)();return(0,t.isWebOS)()&&void 0!==(null==e?void 0:e.major)&&e.major<=t.WEBOS_2018_2019_CHROMIUM_VERSION},t.isWebOs2016=function(){return(0,t.getWebOsChromiumVersion)().major===t.WEBOS_2016_2017_CHROMIUM_VERSION&&!("requestMediaKeySystemAccess"in navigator)},t.isWebOs2017=function(){return(0,t.getWebOsChromiumVersion)().major===t.WEBOS_2016_2017_CHROMIUM_VERSION&&"requestMediaKeySystemAccess"in navigator},t.isWebOs2020=function(){return(0,t.isWebOS)()&&(0,t.getWebOsChromiumVersion)().major===t.WEBOS_2020_CHROMIUM_VERSION},t.isWebOs2022OrNewer=function(){var e=(0,t.getWebOsChromiumVersion)();return(0,t.isWebOS)()&&void 0!==(null==e?void 0:e.major)&&e.major>=t.WEBOS_2022_CHROMIUM_VERSION},t.isMobile=function(){return/Android/i.test(navigator.userAgent)||/IEMobile/i.test(navigator.userAgent)||/Windows Phone 10.0/i.test(navigator.userAgent)||/Safari/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)},t.isIOS=function(){return/Safari/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)&&!/Android/i.test(navigator.userAgent)&&!/Windows Phone 10.0/i.test(navigator.userAgent)},t.isSafariIOS=function(){return/Safari/i.test(navigator.userAgent)&&/iP(hone|od|ad)/i.test(navigator.userAgent)},t.getIOSVersion=function(){var e=/OS (\d+)(_\d+)*/.exec(navigator.userAgent);return e&&e.length>0&&parseInt(e[1],10)||0},t.isSafari15orIOS15=function(){return function(){return(0,t.isSafari)()&&(0,t.getSafariVersion)().major===t.SAFARI_15_MAJOR_VERSION}()||function(){return(0,t.isIOS)()&&(0,t.getIOSVersion)()===t.IOS_15}()},t.isSafari17orIOS17=function(){return function(){return(0,t.isSafari)()&&(0,t.getSafariVersion)().major===t.SAFARI_17_MAJOR_VERSION}()||function(){return(0,t.isIOS)()&&(0,t.getIOSVersion)()===t.IOS_17}()},t.resetPlatformDetectorCache=function(){s=void 0,u=void 0,l=void 0,c=void 0}},15971:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getSourceStore=o,t.getSourceState=function(e){var t=o(e);return null==t?void 0:t.getState()};var r=n(80813),i=n(94685);function o(e){var t,n;return(0,i.isContextAvailable)(e)?null===(t=e.serviceManager)||void 0===t?void 0:t.get(r.ServiceName.SourceStoreService,null===(n=e.sourceContext)||void 0===n?void 0:n.sourceIdentifier):void 0}},17564:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BufferSettings=void 0;var r=n(44468),i=n(85434),o=function(){function e(e,t){this.logger=t,this.s9=JSON.parse(JSON.stringify(e)),this.t9={},this.v9(this.t9,this.s9),this.u9={currentDistanceToLiveEdge:1/0,minimumBufferLength:1,streamDuration:1/0}}return e.prototype.v9=function(e,t){Object.keys(t).forEach((function(t){e[t]={}}))},e.prototype.setTargetLevel=function(e,t,n){"number"==typeof t&&(this.s9[n][e]=t)},e.prototype.w9=function(e,t,n){this.t9[n][e]=t},e.prototype.setTargetBufferLevelConstraints=function(e){this.u9=e},e.prototype.setDistanceToLiveEdge=function(e){this.u9.currentDistanceToLiveEdge=e},e.prototype.getTargetLevel=function(e,t){var n,i,o,a,s=null!==(i=null===(n=this.s9[t])||void 0===n?void 0:n[e])&&void 0!==i?i:1/0,u=null!==(a=null===(o=this.t9[t])||void 0===o?void 0:o[e])&&void 0!==a?a:1/0,l=this.u9.minimumBufferLength,c=this.u9.streamDuration,d=e===r.BufferType.BackwardDuration?1/0:this.u9.currentDistanceToLiveEdge;return Math.max(Math.min(s,u,d,c),l)},e.prototype.getForwardTargetLevel=function(e){return void 0===e&&(e=r.MediaType.Video),this.getTargetLevel(r.BufferType.ForwardDuration,e)},e.prototype.getBackwardTargetLevel=function(e){return void 0===e&&(e=r.MediaType.Video),this.getTargetLevel(r.BufferType.BackwardDuration,e)},e.prototype.x9=function(e){var t,n=i.MimeTypeHelper.isAudio(e)?r.MediaType.Audio:r.MediaType.Video;return(t={})[r.BufferType.BackwardDuration]=this.getBackwardTargetLevel(n),t[r.BufferType.ForwardDuration]=this.getForwardTargetLevel(n),t},e.prototype.y9=function(e,t,n){var i,o=n/2,a=n/2,s=this.x9(e),u=s[r.BufferType.BackwardDuration],l=s[r.BufferType.ForwardDuration],c=n>=2*t,d=l/(l+u);if(!isFinite(u)&&isFinite(l)?(o=t,a=n-t):isFinite(u)&&!isFinite(l)?(o=n-t,a=t):isFinite(u)&&isFinite(l)&&(o=n*d,a=n*(1-d)),c&&o<t){var p=t-o;o+=p,a-=p}return(i={})[r.BufferType.BackwardDuration]=a,i[r.BufferType.ForwardDuration]=o,i},e.prototype.adjustMaxBufferLevels=function(e,t,n){var i=this.y9(t,e,n-e),o=i[r.BufferType.BackwardDuration],a=i[r.BufferType.ForwardDuration];this.logger.debug("Setting new target buffer levels to ".concat(a," (forward) and ").concat(o," (backward)")),this.w9(r.BufferType.ForwardDuration,a,r.MediaType.Audio),this.w9(r.BufferType.ForwardDuration,a,r.MediaType.Video),this.w9(r.BufferType.BackwardDuration,o,r.MediaType.Audio),this.w9(r.BufferType.BackwardDuration,o,r.MediaType.Video)},e}();t.BufferSettings=o},17891:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createResizeObserver=function(e,t){var n=["style","width","height","class"],r=function(){return t(e.clientWidth,e.clientHeight)},i=new MutationObserver(r);return{observe:function(){i.observe(e,{attributes:!0,attributeFilter:n,childList:!1,subtree:!0}),window.addEventListener("resize",r)},dispose:function(){i.disconnect(),window.removeEventListener("resize",r)}}}},18192:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.PlaybackActionType=t.PlaybackKind=void 0,function(e){e.MainContent="maincontent",e.Background="background"}(n||(t.PlaybackKind=n={})),function(e){e.SetMainContentPlaybackState="@instance/sources/@source/playback/setmaincontentplaybackstate",e.SetBackgroundPlaybackState="@instance/sources/@source/playback/setbackgroundplaybackstate"}(r||(t.PlaybackActionType=r={}))},19274:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MediaElementEvent=void 0,function(e){e.abort="abort",e.canplay="canplay",e.canplaythrough="canplaythrough",e.durationchange="durationchange",e.emptied="emptied",e.encrypted="encrypted",e.ended="ended",e.error="error",e.loadeddata="loadeddata",e.loadedmetadata="loadedmetadata",e.loadstart="loadstart",e.pause="pause",e.play="play",e.playing="playing",e.progress="progress",e.ratechange="ratechange",e.seeked="seeked",e.seeking="seeking",e.stalled="stalled",e.suspend="suspend",e.timeupdate="timeupdate",e.volumechange="volumechange",e.waiting="waiting",e.waitingforkey="waitingforkey",e.currenttimenotadvancing="currenttimenotadvancing",e.primestart="primestart",e.msneedkey="msneedkey",e.enterpictureinpicture="enterpictureinpicture",e.leavepictureinpicture="leavepictureinpicture",e.webkitkeymessage="webkitkeymessage",e.webkitneedkey="webkitneedkey",e.webkitkeyerror="webkitkeyerror",e.webkitkeyadded="webkitkeyadded",e.webkitplaybacktargetavailabilitychanged="webkitplaybacktargetavailabilitychanged",e.webkitpresentationmodechanged="webkitpresentationmodechanged",e.webkitcurrentplaybacktargetiswirelesschanged="webkitcurrentplaybacktargetiswirelesschanged"}(n||(t.MediaElementEvent=n={}))},19483:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayMap=void 0;var n=function(){function e(){this.U3=new Map}return e.prototype.get=function(e){return this.U3.get(e)},e.prototype.apply=function(e,t){this.U3.has(e)&&this.U3.set(e,t(this.U3.get(e)))},e.prototype.has=function(e){return this.U3.has(e)},e.prototype.delete=function(e){return this.U3.delete(e)},e.prototype.clear=function(){this.U3.clear()},Object.defineProperty(e.prototype,"size",{get:function(){return this.U3.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"length",{get:function(){var e=0;return this.U3.forEach((function(t){return e+=t.length})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"values",{get:function(){var e=[];return this.U3.forEach((function(t){e.push(t)})),e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keys",{get:function(){var e=[];return this.U3.forEach((function(t,n){e.push(n)})),e},enumerable:!1,configurable:!0}),e.prototype.add=function(e,t){return this.ensure(e),null!=t&&this.get(e).push(t),this},e.prototype.ensure=function(e){this.has(e)||this.set(e,[])},e.prototype.set=function(e,t){return this.U3.set(e,t),this},e.prototype.addAll=function(e,t){var n=this;this.ensure(e),t.forEach((function(t){return n.add(e,t)}))},e.prototype.getObject=function(){var e={};return this.U3.forEach((function(t,n){e[n]=t})),e},e.prototype.forAll=function(e){this.U3.forEach((function(t,n){return t.forEach((function(t){return e(n,t)}))}))},e.prototype.sort=function(e){this.U3.forEach((function(t){t.sort(e)}))},e.prototype.mapEach=function(t){var n=new e;return this.U3.forEach((function(e,r){return n.set(r,e.map(t))})),n},e.prototype.transform=function(e){var t=[];return this.U3.forEach((function(n){return t.push(e(n))})),t},e.prototype.mapAll=function(t){var n=new e;return this.U3.forEach((function(e,r){return n.set(r,t(e))})),n},e.prototype.getAll=function(){var e=[];return this.U3.forEach((function(t){return e.push.apply(e,t)})),e},e.prototype.deleteValue=function(e,t){if(!this.has(e))return!1;var n=this.U3.get(e),r=n.indexOf(t);return r>=0&&(n.splice(r,1),!0)},e}();t.ArrayMap=n},19541:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.compareValues=function(e,t,n){return!e&&!t||!(!e||!t)&&(n||Object.keys(e)).every((function(n){return e[n]===t[n]}))}},20213:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.util=void 0,i(n(3714),t),t.util=n(29960),i(n(62756),t),i(n(44468),t),i(n(21281),t),i(n(3336),t),i(n(40306),t),i(n(4224),t),i(n(25926),t),i(n(95880),t),i(n(22374),t),i(n(29669),t)},20649:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.kebabCaseToCamelCase=function(e){return e.split("-").map((function(e,t){return 0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join("")},t.forceReallocation=function(e){return e?(0,r.isFirefox)()?JSON.parse(JSON.stringify(e)):(" "+e).slice(1):""};var r=n(15487)},21281:function(e,t){"use strict";var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.LiveSynchronizationMethod=t.RttEstimationMethod=t.AdaptationLogicType=t.TimelineReferencePoint=void 0,function(e){e.Start="start",e.End="end",e.CurrentTime="currenttime"}(n||(t.TimelineReferencePoint=n={})),function(e){e.BUFFER="v1",e.BUFFER_FILL_RATE="v2",e.DOWNLOAD_PREDICTION="v3",e.LOW_LATENCY="low-latency-v1",e.WISH="wish"}(r||(t.AdaptationLogicType=r={})),function(e){e.WeightedAverage="weightedaverage",e.Median="median"}(i||(t.RttEstimationMethod=i={})),function(e){e.HttpHead="httphead",e.HttpXsDate="httpxsdate",e.HttpIso="httpiso"}(o||(t.LiveSynchronizationMethod=o={}))},21513:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=d,t.getCapabilities=function(){return function(e){return e.capabilities}(d().getState())},t.getReachableDomains=function(){return function(e){return e.reachableDomains}(d().getState())};var r,i=n(91829),o=n(14638),a=(n(48774),n(81683),n(60430)),s=n(39541),u=n(61674),l=new s.ReducerTree;l.set("capabilities",o.CapabilityReducer).set("reachableDomains",a.ReachableDomainsReducer);var c=function(){var e=[(0,u.addStoreServiceDecoration)(l)];return(0,i.createStore)((function(){return{}}),i.compose.apply(void 0,e))};function d(){return r||(r=c()),r}},22374:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerModuleMissingWarning=void 0;var i=n(25926),o=n(4224),a=function(e){function t(t,n){return e.call(this,o.WarningCode.MODULE_MISSING,n,{moduleName:t})||this}return r(t,e),t}(i.PlayerWarning);t.PlayerModuleMissingWarning=a},23068:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isBoolean=t.isNumber=void 0,t.isDefined=function(e){return null!=e},t.isVideoRepresentation=function(e){return null!=e._height&&null!=e._width},t.isNumber=function(e){return"number"==typeof e},t.isBoolean=function(e){return"boolean"==typeof e}},23145:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StartOffsetService=void 0;var r=n(21281),i=function(){function e(e){this.CZ=e,this.DZ=0}return e.prototype.EZ=function(e,t){var n=e.options.startOffset,i=e.options.startOffsetTimelineReference;if(i)switch(i){case r.TimelineReferencePoint.Start:return n>Math.abs(t)?0:n+t;case r.TimelineReferencePoint.End:return n}return n},e.prototype.FZ=function(e,t){var n=e.options.startOffset,i=e.options.startOffsetTimelineReference;if(i)switch(i){case r.TimelineReferencePoint.Start:return n;case r.TimelineReferencePoint.End:return t+n}return n},e.prototype.getStartOffset=function(e){if(e.options){if(void 0!==e.options.startOffset)return this.CZ.isLive()?this.EZ(e,this.CZ.getMaxTimeShift()):this.FZ(e,this.CZ.getDuration());if(void 0!==e.options.startTime)return e.options.startTime}return this.DZ},Object.defineProperty(e.prototype,"manifestStartOffset",{set:function(e){this.DZ=e},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.CZ=null},e}();t.StartOffsetService=i},23690:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialPlayerState=void 0,t.setPlayerViewMode=function(e){return(0,i.createAction)(o.PlayerActionType.SetPlayerViewMode,e)},t.setPlayerHasBeenPlaying=function(e){return(0,i.createAction)(o.PlayerActionType.SetPlayerHasBeenPlaying,e)},t.setPlayerSeek=function(e){return(0,i.createAction)(o.PlayerActionType.SetPlayerSeek,e)},t.setPlayerPlayback=function(e){return(0,i.createAction)(o.PlayerActionType.SetPlayerPlayback,e)},t.setPlayerTimeShift=function(e){return(0,i.createAction)(o.PlayerActionType.SetPlayerTimeshift,e)},t.setPlayerStall=function(e){return(0,i.createAction)(o.PlayerActionType.SetPlayerStall,e)},t.setRendererStallAction=function(e){return(0,i.createAction)(o.PlayerActionType.SetRendererStall,e)},t.setPlayerTargetPlaybackTime=function(e){return(0,i.createAction)(o.PlayerActionType.SetPlayerTargetPlaybackTime,e)},t.setPlayerPlaybackSpeed=function(e){return(0,i.createAction)(o.PlayerActionType.SetPlayerPlaybackSpeed,e)},t.setDestroyState=function(e){return(0,i.createAction)(o.PlayerActionType.SetDestroyState,e)},t.addPlayerPendingTransition=function(e){return(0,i.createAction)(o.PlayerActionType.AddPlayerPendingTransition,e)},t.filterPlayerPendingTransition=function(e){return(0,i.createAction)(o.PlayerActionType.FilterPlayerPendingTransition,e)},t.removePlayerPendingTransition=function(e){return(0,i.createAction)(o.PlayerActionType.RemovePlayerPendingTransition,e)},t.clearPlayerPendingTransitions=function(){return(0,i.createAction)(o.PlayerActionType.ClearPlayerPendingTransitions)},t.setRemoteControlType=function(e){return(0,i.createAction)(o.PlayerActionType.SetRemoteControlType,e)},t.setConnectionState=function(e){return(0,i.createAction)(o.PlayerActionType.SetConnectionState,e)},t.resetPlayerState=function(e){return void 0===e&&(e=[]),(0,i.createAction)(o.PlayerActionType.ResetPlayerState,{keepState:e})},t.updateSeekingProcess=function(e){return(0,i.createAction)(o.PlayerActionType.UpdateSeekingProcess,e)};var r=n(44468),i=n(35267),o=n(85648);t.getInitialPlayerState=function(){return{playbackState:o.PlaybackState.None,seekState:o.SeekState.None,timeShiftState:o.TimeShiftState.None,hasBeenPlaying:!1,isStalled:!1,isRendererStalled:!1,targetPlaybackTime:-1,playbackSpeed:{speed:1,multiplier:1},pendingTransitions:[],viewMode:r.ViewMode.Inline,destroyState:o.DestroyState.None,remoteControlState:{connectionState:o.ConnectionState.Disconnected,remoteControlType:o.RemoteControlType.None},seekingProcess:{targetTime:-1,seekableRange:{start:-1,end:-1},isInitial:!1,issuer:""}}}},25541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dateRangeToISOString=function(e){return new Date(Date.parse(e.startDate)+(0,r.toMilliSeconds)(e.duration)).toISOString()},t.mergeSegmentLists=i,t.updateTimeline=function(e,t){return t.forEach((function(e){return e.consumed=!1})),0===e.length?t:i(e,t)},t.populateCurrentTimelineWithPlaybackTime=function(e,t,n){var r;e[t]&&(function(){r=n;for(var i=t;i<e.length;i++)e[i].playbackTime=r,r+=e[i].duration}(),function(){r=n;for(var i=t-1;i>=0;i--)e[i].playbackTime=r-e[i].duration,r-=e[i].duration}())};var r=n(89927);function i(e,t){var n={},r=function(e){var t=e.discontinuitySequenceNumber,n=e.uri;return t?"".concat(n,"_").concat(t):n};return t.forEach((function(e){return n[r(e)]=e})),e.forEach((function(e){n[r(e)]&&(n[r(e)]=e)})),Object.values(n)}},25811:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DRMSchemeIDURIs=void 0,t.keySystemNameToSchemeUri=function(e){return Object.keys(t.DRMSchemeIDURIs).find((function(n){return t.DRMSchemeIDURIs[n]===e}))},t.DRMSchemeIDURIs={"urn:mpeg:dash:mp4protection:2011":"cenc","urn:mpeg:dash:13818:1:CA_descriptor:2011":"cenc4ts","urn:uuid:edef8ba9-79d6-4ace-a3c8-27dcd51d21ed":"widevine","urn:uuid:5e629af5-38da-4063-8977-97ffbd9902d4":"marlin_v1","urn:uuid:adb41c24-2dbf-4a6d-958b-4457c0d27b95":"tvkey","urn:uuid:a68129d3-575b-4f1a-9cba-3223846cf7c3":"nds_videoguard","urn:uuid:9a04f079-9840-4286-ab92-e65be0885f95":"playready","urn:uuid:9a27dd82-fde2-4725-8cbc-4234aa06ec09":"verimatrix_vcas","urn:uuid:f239e769-efa3-4850-9c16-a903c6932efb":"primetime","urn:uuid:1f83e1e8-6ee9-4f0d-ba2f-5ec4e3ed1a66":"securemedia","urn:uuid:644fe7b5-260f-4fad-949a-0762ffb054b4":"cmla_oma","urn:uuid:6a99532d-869f-5922-9a91-113ab7b1e2f3":"mobitv","urn:uuid:35bf197b-530e-42d7-8b65-1b4bf415070f":"divx_drm5","urn:uuid:b4413586-c58c-ffb0-94a5-d4896c1af6c3":"viaccess-orca","urn:uuid:1077efec-c0b2-4d02-ace3-3c1e52e2fb4b":"common_system-id"}},25926:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerWarning=void 0;var r=n(3714),i=n(4224),o=function(){return function(e,t,n){this.type=r.PlayerEvent.Warning,this.code=e,this.name=i.WarningCode[e],this.message=t||"".concat(this.code,"/").concat(this.name),this.data=n}}();t.PlayerWarning=o},25934:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StartOptionsActionKey=void 0,function(e){e.InitStartTimeOffset="@instance/sources/@source/startOptions/initStartTimeOffset",e.SetStartTimeOffset="@instance/sources/@source/startOptions/setStartTimeOffset"}(n||(t.StartOptionsActionKey=n={}))},26225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaElementWrapper=void 0;var r=n(56481),i=n(51072),o=n(88844),a=n(19274),s=n(96556),u=n(97583),l=function(){function e(e,t){this.element=t,this.context=e,this.mediaElementEventHandler=new s.MediaElementEventHandler(e,t),this.nativeMediaEventListener=new u.NativeMediaEventListener(e,this),this.drmHandler=null}return Object.defineProperty(e.prototype,"audioTracks",{get:function(){return this.element.audioTracks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffered",{get:function(){return this.element.buffered},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentSrc",{get:function(){return this.element.currentSrc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this.element.duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ended",{get:function(){return this.element.ended},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"error",{get:function(){return this.element.error},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mediaKeys",{get:function(){return this.element.mediaKeys},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"msKeys",{get:function(){return this.element.msKeys},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this.element.paused},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"networkState",{get:function(){return this.element.networkState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"played",{get:function(){return this.element.played},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"readyState",{get:function(){return this.element.readyState},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seekable",{get:function(){return this.element.seekable},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seeking",{get:function(){return this.element.seeking},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"style",{get:function(){return this.element&&this.element.style},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"textTracks",{get:function(){return this.element.textTracks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"videoTracks",{get:function(){return this.element.videoTracks},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"firstChild",{get:function(){return this.element.firstChild},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"autoplay",{get:function(){return this.element.autoplay},set:function(e){this.element.autoplay=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"controls",{get:function(){return this.element.controls},set:function(e){this.element.controls=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"crossOrigin",{get:function(){return this.element.crossOrigin},set:function(e){this.element.crossOrigin=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){var e,t;return null!==(t=null===(e=this.element)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},set:function(e){this.element.currentTime=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"innerHTML",{get:function(){return this.element.innerHTML},set:function(e){this.element.innerHTML=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this.context.settings.ENABLE_MUTED_BACKGROUND_PLAYBACK?this.element&&0===this.element.volume:this.element&&this.element.muted},set:function(e){if(this.context.settings.ENABLE_MUTED_BACKGROUND_PLAYBACK){if(e){var t=this.volume;this.volume=0,this.nativeMediaEventListener.lastKnownState.volume=t}else this.volume=this.nativeMediaEventListener.lastKnownState.volume;this.nativeMediaEventListener.lastKnownState.muted=e,this.element.muted=!1}else this.nativeMediaEventListener.lastKnownState.muted=e,this.element.muted=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"preload",{get:function(){return this.element.preload},set:function(e){this.element.preload=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"src",{get:function(){return this.element.src},set:function(e){this.nativeMediaEventListener.reset(),this.element.src=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"srcObject",{get:function(){return this.element.srcObject},set:function(e){this.nativeMediaEventListener.reset(),this.element.srcObject=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackRate",{get:function(){return this.element.playbackRate},set:function(e){try{this.element.playbackRate=e}catch(t){this.context.logger.log("Browser rejected to set playback rate to "+e)}},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){var e;return!0===(null===(e=this.nativeMediaEventListener)||void 0===e?void 0:e.lastKnownState.muted)&&this.context.settings.ENABLE_MUTED_BACKGROUND_PLAYBACK?this.nativeMediaEventListener.lastKnownState.volume:this.element.volume},set:function(e){this.nativeMediaEventListener.lastKnownState.volume=e,this.element.volume=e},enumerable:!1,configurable:!0}),e.prototype.addTextTrack=function(e,t,n){return this.element.addTextTrack(e,t,n)},e.prototype.canPlayType=function(e,t){return this.element.canPlayType(e,t)},e.prototype.load=function(){this.element.load()},e.prototype.pause=function(){this.element&&this.element.pause()},e.prototype.play=function(){return this.internalPlay()},e.prototype.internalPlay=function(){return this.element.play()||i.PlayPromise.new(this.context,this,this.drmHandler)},e.prototype.prime=function(){var e=this,t=function(t){e.mediaElementEventHandler&&(e.mediaElementEventHandler.isPriming=t)};return t(!0),this.mediaElementEventHandler.triggerEvent(a.MediaElementEvent.primestart),this.internalPrime().then((function(){t(!1)}))},e.prototype.internalPrime=function(){this.internalPlay().catch((function(){})),this.pause();var e=this.getWrappedElement();return new Promise((function(t){var n=window.setTimeout((function(){e.removeEventListener(a.MediaElementEvent.pause,r),t()}),100),r=function(){(0,o.clearTimeoutIfDefined)(n),e.removeEventListener(a.MediaElementEvent.pause,r),t()};e.addEventListener(a.MediaElementEvent.pause,r)}))},e.prototype.setMediaKeys=function(e){return this.element&&this.element.setMediaKeys(e)||Promise.resolve()},e.prototype.msSetMediaKeys=function(e){return this.element&&this.element.msSetMediaKeys(e)},e.prototype.msSetMediaProtectionManager=function(e){this.element.msSetMediaProtectionManager(e)},e.prototype.getAttribute=function(e){return this.element.getAttribute(e)},e.prototype.setAttribute=function(e,t){this.element.setAttribute(e,t)},e.prototype.removeAttribute=function(e){this.element.removeAttribute(e)},e.prototype.hasAttribute=function(e){return this.element.hasAttribute(e)},e.prototype.appendChild=function(e){this.element.appendChild(e)},e.prototype.removeChild=function(e){return this.element.removeChild(e)},e.prototype.getElementsByTagName=function(e){return this.element.getElementsByTagName(e)},e.prototype.addEventListener=function(e,t,n){this.mediaElementEventHandler.addEventListener(e,t,n)},e.prototype.removeEventListener=function(e,t){this.mediaElementEventHandler&&this.mediaElementEventHandler.removeEventListener(e,t)},Object.defineProperty(e.prototype,"eventHandler",{get:function(){return this.mediaElementEventHandler},enumerable:!1,configurable:!0}),e.prototype.getWrappedElement=function(){return this.element},e.prototype.dispose=function(){this.mediaElementEventHandler=(0,r.dispose)(this.mediaElementEventHandler),this.nativeMediaEventListener=(0,r.dispose)(this.nativeMediaEventListener),this.drmHandler=null,this.element=null,this.context.logger&&this.context.logger.debug("Disposed wrapped element")},e}();t.MediaElementWrapper=l},27359:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.containMimeTypeGuard=function(e){return function(t,n){return t[n.mimeType]?e(t,n):t}}},29242:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerFactory=void 0;var r=n(88052),i=n(62756),o=n(40306),a=n(3336),s=n(44468),u=n(21513),l=n(47993),c=n(43767),d=function(){function e(){this.fZ=c.FileLoader.getInstance()}return e.constructSetupError=function(t,n,r,i){return e.isSourceValid(n)?t?new a.PlayerError(o.ErrorCode.SOURCE_FORCED_TECHNOLOGY_NOT_SUPPORTED,{"player-type":t.player,"supported-tech":JSON.stringify(r)},"The selected technology is not supported by the player on this platform."):n.hasOwnProperty("vr")?new a.PlayerError(o.ErrorCode.VR_INCOMPATIBLE_PLAYER_TECHNOLOGY,void 0,"This platform does not support VR playback."):i?new a.PlayerError(o.ErrorCode.SOURCE_NO_SUPPORTED_TECHNOLOGY,void 0,"The platform does not support any of the technologies needed to play back the provided source."):new a.PlayerError(o.ErrorCode.SOURCE_NO_STREAM_FOUND_FOR_SUPPORTED_TECHNOLOGY,{"supported-tech":JSON.stringify(r)},"The platform does not support any of the technologies needed to play back the provided source."):new a.PlayerError(o.ErrorCode.SOURCE_INVALID,{source:n},"No DASH / HLS / Smooth / Progressive stream detected in the provided source.")},e.isSourceValid=function(e){var t,n,r,i;return e&&Boolean(null!==(i=null!==(r=null!==(n=null!==(t=e.dash)&&void 0!==t?t:e.hls)&&void 0!==n?n:e.progressive)&&void 0!==r?r:e.smooth)&&void 0!==i?i:e.whep)},e.prototype.getInstance=function(t){var n=Object.getOwnPropertyNames(t.source),r=(0,u.getCapabilities)().techSupportedByPlatform,i=(0,l.getBestTech)(t.config.playback().preferredTech,t.source,t.forceTech);if(n.length>0&&!e.isSourceValid(t.source))return Promise.reject(new a.PlayerError(o.ErrorCode.SOURCE_STREAM_TYPE_NOT_SUPPORTED,{streamType:JSON.stringify(n),supportedTech:JSON.stringify(r)},"The specified stream type is not supported by this platform."));if(n.length>0&&!i)return Promise.reject(e.constructSetupError(t.forceTech,t.source,r,i));if(n.length<=0&&!r.length)return Promise.reject(e.constructSetupError(t.forceTech,t.source,r));n.length<=0&&(i=r[0]);var s=t.context.videoElement.getWrappedElement();t.styleManager?t.styleManager.initializeInternalPlayer(s):!s.parentNode&&t.container&&t.container.appendChild(s),s.muted=t.playerInstance.muted,s.volume=t.playerInstance.volume/100;var c=t.config.adaptation(),d=c.bitrates.maxSelectableVideoBitrate;if((0,u.getCapabilities)().isMobile&&(c.bitrates.maxSelectableVideoBitrate=Math.min(d,1e7),c.exclude=!0),i){var p=e.createRenderer(t.context,i);t.context.setRenderer(p)}return this.hZ(t.context,i)},e.createRenderer=function(e,t){return t.player===s.PlayerType.Html5?((0,u.getCapabilities)().isTizen||e.settings.DWORD_BASE_MEDIA_DECODE_TIMESTAMPS)&&r.ModuleManager.has(i.ModuleName.Tizen)?new(r.ModuleManager.get(i.ModuleName.Tizen).getTizenMSERendererConstructor())(e):(0,u.getCapabilities)().isWebOS&&r.ModuleManager.has(i.ModuleName.Webos)?new(r.ModuleManager.get(i.ModuleName.Webos).getWebosRendererConstructor())(e):(0,u.getCapabilities)().isPlayStation5&&r.ModuleManager.has(i.ModuleName.PlayStation5)?new(r.ModuleManager.get(i.ModuleName.PlayStation5).getPlayStation5MSERendererConstructor())(e):(0,u.getCapabilities)().isPlayStation4&&r.ModuleManager.has(i.ModuleName.PlayStation4)?new(r.ModuleManager.get(i.ModuleName.PlayStation4).getPlayStation4MSERendererConstructor())(e):(0,u.getCapabilities)().isVidaa&&r.ModuleManager.has(i.ModuleName.Vidaa)?new(r.ModuleManager.get(i.ModuleName.Vidaa).getVidaaMSERendererConstructor())(e):new(0,r.ModuleManager.get(i.ModuleName.RendererMse).MSERenderer)(e):null},e.prototype.hZ=function(e,t){var n,u=this;if(!e.renderer&&t.player===s.PlayerType.Html5)return Promise.reject(new a.PlayerError(o.ErrorCode.SETUP_NO_RENDERING_ENGINE,{tech:JSON.stringify(t)},"Could not create player: no suitable rendering engine was found. Additional modules may be required."));if(!this.gZ&&r.ModuleManager.has(i.ModuleName.RemoteControl)){var l=r.ModuleManager.get(i.ModuleName.RemoteControl).RemoteControlManager;this.gZ=new l(e,this.fZ)}if(t.player===s.PlayerType.WebRtc){var c=r.ModuleManager.get(i.ModuleName.EngineWebRtc).WebRtcPlayer;n=Promise.resolve(new c(e))}else if(t.player===s.PlayerType.Native){var d=r.ModuleManager.get(i.ModuleName.EngineNative).NativePlayer;n=Promise.resolve(new d(e))}else{if(t.player!==s.PlayerType.Html5)return Promise.reject(new a.PlayerError(o.ErrorCode.SOURCE_STREAM_TYPE_NOT_SUPPORTED,{given:t.player,supported:"html5, native"},"The specified technology is not supported by the player."));n=e.renderer.ready().then((function(){return new(0,r.ModuleManager.get(i.ModuleName.EngineBitmovin).MediaPlayer)(e)}))}return n.then((function(t){return u.gZ?u.gZ.getPlayerWrapper(e,t):t})).then((function(n){return{context:e,logger:e.logger,bitdashPlayer:n,technology:t,videoElement:e.videoElement}}))},e}();t.PlayerFactory=d},29669:function(e,t){"use strict";var n,r,i,o;Object.defineProperty(t,"__esModule",{value:!0}),t.NetworkRequestApi=t.HttpRequestMethod=t.HttpResponseType=t.HttpRequestType=void 0,function(e){e.MANIFEST_DASH="manifest/dash",e.MANIFEST_HLS_MASTER="manifest/hls/master",e.MANIFEST_HLS_VARIANT="manifest/hls/variant",e.MANIFEST_SMOOTH="manifest/smooth",e.MANIFEST_ADS="manifest/ads",e.MEDIA_AUDIO="media/audio",e.MEDIA_VIDEO="media/video",e.MEDIA_SUBTITLES="media/subtitles",e.MEDIA_THUMBNAILS="media/thumbnails",e.MEDIA_SEGMENTINDEX="media/segmentindex",e.DRM_LICENSE_WIDEVINE="drm/license/widevine",e.DRM_LICENSE_PLAYREADY="drm/license/playready",e.DRM_LICENSE_FAIRPLAY="drm/license/fairplay",e.DRM_LICENSE_PRIMETIME="drm/license/primetime",e.DRM_LICENSE_CLEARKEY="drm/license/clearkey",e.DRM_LICENSE_TVKEY="drm/license/tvkey",e.DRM_CERTIFICATE_FAIRPLAY="drm/certificate/fairplay",e.HLS_INTERSTITIALS_ASSET_LIST="hls/interstitials/asset-list",e.KEY_HLS_AES="key/hls/aes",e.TIME_SYNC="time/sync",e.WEBRTC_SDP_REQUEST="webrtc/sdp/request",e.WEBRTC_SDP_ANSWER="webrtc/sdp/answer",e.WEBRTC_SDP_OFFER="webrtc/sdp/offer",e.UNKNOWN="unknown",e.INTERNAL="internal"}(n||(t.HttpRequestType=n={})),function(e){e.ARRAYBUFFER="arraybuffer",e.BLOB="blob",e.DOCUMENT="document",e.JSON="json",e.TEXT="text"}(r||(t.HttpResponseType=r={})),function(e){e.GET="GET",e.POST="POST",e.HEAD="HEAD",e.PATCH="PATCH"}(i||(t.HttpRequestMethod=i={})),function(e){e.XHR="xhr",e.Fetch="fetch"}(o||(t.NetworkRequestApi=o={}))},29682:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.DrmActionType=void 0,function(e){e.SetManifestDrm="@instance/sources/@source/drm/setManifest",e.ResetManifestDrm="@instance/sources/@source/drm/setManifest/resetManifest",e.TrackDrmKidError="@instance/sources/@source/drm/trackDrmKidError",e.ResetDrmKidErrors="@instance/sources/@source/drm/resetDrmKidErrors",e.SetUsedKeySystem="@instance/sources/@source/drm/setusedkeysystem",e.ResetUsedKeySystem="@instance/sources/@source/drm/resetusedkeysystem"}(n||(t.DrmActionType=n={}))},29691:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__runInitializers||function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},o=this&&this.__esDecorate||function(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,u=r.kind,l="getter"===u?"get":"setter"===u?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),p=!1,f=n.length-1;f>=0;f--){var h={};for(var y in r)h[y]="access"===y?{}:r[y];for(var y in r.access)h.access[y]=r.access[y];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var v=(0,n[f])("accessor"===u?{get:d.get,set:d.set}:d[l],h);if("accessor"===u){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(s=a(v.get))&&(d.get=s),(s=a(v.set))&&(d.set=s),(s=a(v.init))&&i.unshift(s)}else(s=a(v))&&("field"===u?i.unshift(s):d[l]=s)}c&&Object.defineProperty(c,r.name,d),p=!0},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.InternalPlayer=t.LOAD_CANCELLED_BY_DESTROY_MESSAGE=t.LOAD_CANCELLED_MESSAGE=void 0;var s,u,l=n(88052),c=n(62756),d=n(90571),p=n(78760),f=n(40306),h=n(3336),y=n(25926),v=n(4224),E=n(48143),g=n(80813),m=n(56481),S=n(45202),_=n(3714),b=n(51289),T=n(75375),P=n(89279),A=n(96859),O=n(13531),M=n(50172),R=n(69957),D=n(44468),I=n(72786),N=n(53031),C=n(29242),L=n(52546),w=n(70962),k=n(69251),U=n(93907),F=n(23145),V=n(91565),B=n(7387),j=n(98714),H=n(23690),Y=n(87827),x=n(85648),W=n(68925),G=n(63879),Z=n(69573),K=n(15971),J=n(30012),q=n(21513),X=n(61089),z=n(93204),Q=n(47993),$=n(34841),ee=n(85434),te=n(72537),ne=n(89927),re=n(88844),ie=n(23068),oe=n(70850),ae=n(2079);!function(e){e[e.NONE=0]="NONE",e[e.MUTED_PLAY=1]="MUTED_PLAY",e[e.UNMUTED_PLAY=2]="UNMUTED_PLAY"}(s||(s={})),function(e){e.DROPPED_VIDEO_FRAMES="droppedVideoFrames",e.TOTAL_STALLED_TIME="totalStalledTime"}(u||(u={})),t.LOAD_CANCELLED_MESSAGE="Load call was cancelled by another load or unload call",t.LOAD_CANCELLED_BY_DESTROY_MESSAGE="Load was cancelled as the player is being destroyed";var se=function(){var e,n,se,fe=[];return e=function(){function e(e,t,n){var r=this;if(this.UD=i(this,fe),this.ZD=null,this.aD=null,this.iD=Promise.resolve(),this.tD=["aHR0cHM6Ly9saWNlbnNpbmcuYml0bW92aW4uY29tL2xpY2Vuc2luZw==","aHR0cHM6Ly9zdHJlYW1pbmcubXBlZy1kYXNoLmNvbS9hY2Nlc3M=","aHR0cHM6Ly9saWNlbnNpbmcucGFuZG9yYXN0cmVhbWluZy5jb20vbGljZW5zaW5n","aHR0cHM6Ly9wbGF5ZXIuc2FtYmF0ZWNoLmNvbS5ici9saWNlbnNpbmc=","aHR0cHM6Ly9iaXRtb3Zpbi5zdGEuc2N0di5jaC9saWNlbnNpbmc="].map((function(e){return atob(e)})),this.uD=["aHR0cHM6Ly9saWNlbnNpbmcuYml0bW92aW4uY29tL2ltcHJlc3Npb24=","aHR0cHM6Ly9zdHJlYW1pbmcubXBlZy1kYXNoLmNvbS9wbGF5YmFjaw==","aHR0cHM6Ly9saWNlbnNpbmcucGFuZG9yYXN0cmVhbWluZy5jb20vaW1wcmVzc2lvbg==","aHR0cHM6Ly9wbGF5ZXIuc2FtYmF0ZWNoLmNvbS5ici9pbXByZXNzaW9u","aHR0cHM6Ly9iaXRtb3Zpbi5zdGEuc2N0di5jaC9pbXByZXNzaW9u"].map((function(e){return atob(e)})),this.vD=Promise.resolve(),this.wD=Promise.resolve(),this.iE=function(e){var t,n,i,o;if(void 0===e&&(e="api"),null===(n=null===(t=r.YD)||void 0===t?void 0:t.bitdashPlayer)||void 0===n?void 0:n.unload){var a=Promise.resolve();de(e)||(a=r.jF(),r.WF(),r.kE()),null===(o=null===(i=r.YD)||void 0===i?void 0:i.eventHandler)||void 0===o||o.clearEventsOfType(_.PlayerEvent.TimeChanged),r.yD=!1,r.manifestApi=void 0,r.YD.context&&ce(r.YD.context),r.iD=r.iD.then((function(){return a})).then((function(){var t,n;return null===(n=null===(t=r.YD)||void 0===t?void 0:t.bitdashPlayer)||void 0===n?void 0:n.unload(e).then((function(){var t;return null===(t=r.UD)||void 0===t?void 0:t.serviceManager.maybeCall(g.ServiceName.DrmService,(function(t){return t.shutdownIfNeeded(de(e))}))})).then((function(){var t,n,i;r.sD&&r.sD.removePosterImage(),(null===(n=null===(t=r.YD)||void 0===t?void 0:t.context)||void 0===n?void 0:n.sourceContext)&&(de(e)?r.YD.context.sourceContext.isAd&&r.jE():null===(i=r.UD)||void 0===i||i.serviceManager.removeNonPlayerScopeServices(),r.YD.context.sourceContext.dispose())}))}))}return r.iD},this.setAudio=function(e){var t;r.XE()&&(null===(t=r.YD.bitdashPlayer)||void 0===t||t.setAudio(e))},this.aF=function(e){return void 0===e&&(e=r.getSource()),Boolean(e)&&Boolean(e.vr)&&(0,q.getCapabilities)().isIOS},this.yF=function(e,t,n){if(void 0===n&&(n={}),e)r.fireEvent(_.PlayerEvent.LicenseValidated,{data:n});else{r.nD=!1,r.qD=r.xF(t);var i=function(){(0,re.clearTimeoutIfDefined)(o),r.off(_.PlayerEvent.SourceLoaded,i),r.off(_.PlayerEvent.SourceUnloaded,i),r.kD&&r.kD.fireError(r.qD)},o=window.setTimeout(i,500);r.on(_.PlayerEvent.SourceLoaded,i),r.on(_.PlayerEvent.SourceUnloaded,i),r.unload()}},this.AF=function(){var e,t,n;"none"!==(null===(n=null===(t=null===(e=r.YD)||void 0===e?void 0:e.videoElement)||void 0===t?void 0:t.style)||void 0===n?void 0:n.getPropertyValue("display"))||r.YD.vrHandler||r.YD.videoElement.style.setProperty("display","block","important")},this.BF=function(){r.YD&&r.YD.videoElement&&r.YD.videoElement.style&&r.YD.videoElement.style.setProperty("display","none","important")},this.NF=function(){var e=r.YD.configuration.playback().subtitleLanguage;return e?r.CF(e,r.listSubtitles(),(function(e){return r.enableSubtitle(e,!0,!1)})):Promise.resolve()},this.OF=function(){var e=r.YD.configuration.playback().audioLanguage;return e?r.CF(e,r.getAvailableAudio(),r.setAudio):Promise.resolve()},this.TF=function(){if(r.iE(),r.VD){var e=r.VD.getElementsByClassName(S.Environment.idPrefix+"poster")[0];e&&(e.style.display="block")}},this.VF=function(){if(r.eD){r.cD.tweaks().hasOwnProperty("impressionServer")&&(r.uD.indexOf(r.cD.tweaks().impressionServer)>-1?r.eD.setImpressionServerUrl(r.cD.tweaks().impressionServer):r.XD.warn("Invalid impression server",new h.PlayerError(f.ErrorCode.SETUP_INVALID_IMPRESSION_SERVER,{"impression-server":r.cD.tweaks().impressionServer})));var e=r.cD.get("network");r.eD.issue(r.getConfig().key,r.getPlayerType(),null==e?void 0:e.requestApi).then((function(){}),(function(){}))}},this.jG=function(e,t){if(r.isCastingToCAF()&&t.connectionState===x.ConnectionState.Disconnected&&r.ZE()&&r.bE().isLinearAdActive()){var n=r.bE().playerAdvertisingApi;r.kG(n)}},this.lG=function(){var e,t=pe(r.UD);(null===(e=r.bE())||void 0===e?void 0:e.isLinearAdActive())||r.UD.sourceContext.isAd?r.fireEvent(_.PlayerEvent.PlaybackFinished):r.zD||r.BD||setTimeout((function(){r.BD=Promise.resolve().then((function(){var e,t;return null!==(t=null===(e=r.bE())||void 0===e?void 0:e.playPostRollAds())&&void 0!==t?t:Promise.resolve()})).then((function(){var e;return null!==(e=null==t?void 0:t.playPostRollAds())&&void 0!==e?e:Promise.resolve()})).then((function(){r.BD=null,r.mG()}))}))},this.mG=function(){r.eD&&r.eD.reset(),r.zD=!0,r.fireEvent(_.PlayerEvent.PlaybackFinished)},this.nG=function(){!(r.ZE()&&r.getAds()&&r.getAds().isLinearAdActive())&&r.zD&&(r.zD=!1),r.pD=r.oG(r.pD)},Object.keys((0,q.getCapabilities)()).length||(0,q.default)().dispatch((0,V.initializeCapabilities)()),this.VD=e,this.id=t,this.WD=n,this.yD=!1,this.XD=new O.Logger(w.DefaultSettings),this.bD=new te.StorageHandler((0,q.getCapabilities)().isLocalStorageAvailable),this.cD=null,this.dD=NaN,this.hD=new C.PlayerFactory,this.kD=new b.EventHandler(this.XD,this.WD,this.id),this.oD=s.NONE,l.ModuleManager.has(c.ModuleName.DRM)){var o=l.ModuleManager.get(c.ModuleName.DRM).DRMDetectorService;this.lD=new o,this.drmApi=l.ModuleManager.get(c.ModuleName.DRM).createDrmApi((function(){var e;return null===(e=r.UD)||void 0===e?void 0:e.serviceManager}),this.XD)}this.DD=!1,this.UF()}return e.prototype.UE=function(){return this.UD&&this.UD.store&&(0,Y.isBeingDestroyed)(this.UD.store.getState().player)||!1},e.prototype.VE=function(){return this.UD&&this.UD.store&&(0,Y.isDestroyed)(this.UD.store.getState().player)||!1},e.prototype.WE=function(){return Boolean(this.YD&&this.YD.bitdashPlayer)&&!this.VE()},e.prototype.XE=function(){return this.YE()&&this.yD},e.prototype.YE=function(){return this.WE()&&Boolean(this.YD)&&Boolean(this.YD.bitdashPlayer)},e.prototype.ZE=function(){return Boolean(this.YD&&this.YD.adController)},e.prototype.aE=function(){l.ModuleManager.get(c.ModuleName.Advertising);var e=l.ModuleManager.get(c.ModuleName.AdvertisingCore);this.YD.adController=new e.AdvertisingController(this,this.YD.context),this.kD&&this.kD.dispatchEvent(_.PlayerEvent.ModuleReady,{name:c.ModuleName.Advertising})},e.prototype.bE=function(){return this.ZE()?this.YD.adController:null},e.prototype.cE=function(){var e;if(!this.WE()||!(null===(e=this.YD)||void 0===e?void 0:e.vrHandler))return!1;var t=this.YD.vrHandler.getState();return Boolean(t)&&"error"!==t},e.prototype.dE=function(e,t){if(!e||!t)return null;var n;if(t.streaming===D.StreamType.Dash)n=e.dash;else if(t.streaming===D.StreamType.Hls)n=e.hls;else if(t.streaming===D.StreamType.Progressive)n=e.progressive;else if(t.streaming===D.StreamType.Smooth)n=e.smooth;else{if(t.streaming!==D.StreamType.Whep)return null;n=e.whep}return n?{type:t.streaming,url:n,title:e.title,description:e.description,vr:e.vr,config:e}:null},e.prototype.eE=function(){var e=new E.ServiceManager;return new N.PlayerContext({container:this.VD,eventHandler:this.YD.eventHandler,config:this.YD.configuration.get(),storedConfig:this.bD,settings:this.YD.configuration.getSettings(),logger:this.XD,serviceManager:e,internalPlayer:this,segmentInfoService:this.OE,segmentPrefetchingService:this.PE,adRestorationOptimizationService:this.QE})},e.prototype.fE=function(e,t){var n=this;if(!this.YD)return Promise.resolve();var r=this.YD.configuration;r.logs&&r.logs().level&&this.setLogLevel(r.logs().level),this.XD.setConfig(r);var i=this.mD;this.YD.videoElement&&(null!=i||(i=this.YD.videoElement.getWrappedElement()),this.YD.videoElement.dispose()),this.UD.setVideoElement(null!=i?i:document.createElement("video"));var o={context:this.UD,playerInstance:this.YD,container:this.VD,config:r,source:e,forceTech:t,styleManager:this.sD};return this.gE(),this.hD.getInstance(o).then((function(e){var t,r,i;return n.VE()?null===(t=e.bitdashPlayer)||void 0===t?void 0:t.release().then((function(){e.videoElement&&e.videoElement.dispose(),e.bitdashPlayer=null,e.technology=null,e.videoElement=null})):(n.YD.context=e.context,n.YD.logger=e.logger,n.YD.bitdashPlayer=e.bitdashPlayer,n.YD.technology=e.technology,n.YD.videoElement=e.videoElement,n.YD.hasInitStarted=!0,n.YD.playerConfig.visibility="visible",n.hE(n.YD.context),!n.rD&&n.VD&&(n.rD=new ae.ViewModeHandler(n.YD,n.VD,null!==(i=null===(r=n.kD)||void 0===r?void 0:r.getEventFunction())&&void 0!==i?i:function(){},n.aF)),n.DF(),Promise.resolve())}))},e.prototype.gE=function(){this.SE&&this.SE(),this.TE&&this.TE(),this.SE=(0,z.subscribe)(this.UD.store)((function(e){return(0,Y.getIsStopped)((0,Y.getPlayerState)(e))}),this.lG,(function(e){return!0===e})),this.TE=(0,z.subscribe)(this.UD.store)((function(e){return(0,Y.getRemoteControlState)((0,Y.getPlayerState)(e))}),this.jG,(function(){return!0}))},e.prototype.hE=function(e){this.ZE()&&this.bE().updatePlayerContext(e),e.segmentInfoService&&e.segmentInfoService.updatePlayerContext(e),e.segmentPrefetchingService&&e.segmentPrefetchingService.updatePlayerContext(e),e.adRestorationOptimizationService&&e.adRestorationOptimizationService.updatePlayerContext(e)},e.prototype.setVideoQuality=function(e){var t;this.XE()&&(e=String(e)||"auto",null===(t=this.YD.bitdashPlayer)||void 0===t||t.setVideoQuality(e))},e.prototype.setAudioQuality=function(e){var t;this.XE()&&(e=String(e)||"auto",null===(t=this.YD.bitdashPlayer)||void 0===t||t.setAudioQuality(e))},e.prototype.jE=function(){this.YD.context.serviceManager.delete(g.ServiceName.SourceStoreService,this.YD.context.sourceContext.sourceIdentifier)},e.prototype.kE=function(){var e,t,n,r;null===(t=null===(e=this.YD.context)||void 0===e?void 0:e.adRestorationOptimizationService)||void 0===t||t.reset(),null===(r=null===(n=this.YD.context)||void 0===n?void 0:n.segmentPrefetchingService)||void 0===r||r.reset()},e.prototype.unload=function(e){var t,n,r,i,o=this;return void 0===e&&(e="api"),this.xD=null,de(e)&&(this.jD=void 0),de(e)?(this.XF(u.DROPPED_VIDEO_FRAMES,null!==(n=null===(t=this.YD.bitdashPlayer)||void 0===t?void 0:t.getDroppedVideoFrames())&&void 0!==n?n:0),this.XF(u.TOTAL_STALLED_TIME,null!==(i=null===(r=this.YD.bitdashPlayer)||void 0===r?void 0:r.getTotalStalledTime())&&void 0!==i?i:0)):(this.ZD=null,this.aD=null),this.vD.finally((function(){return o.iE(e)}))},e.prototype.isCasting=function(){var e;return!!(this.YE()&&ue(this.YD.bitdashPlayer)&&this.isCastAvailable())&&Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isCasting())},e.prototype.castVideo=function(){var e;this.YE()&&ue(this.YD.bitdashPlayer)&&this.YD.bitdashPlayer.isCastAvailable()&&(null===(e=this.YD.bitdashPlayer)||void 0===e||e.castVideo())},e.prototype.isCastAvailable=function(){return this.YE()&&ue(this.YD.bitdashPlayer)&&this.YD.bitdashPlayer.isCastAvailable()},e.prototype.seek=function(e,t){var n,r,i,o,a;if(void 0===t&&(t="api"),this.ZE()&&this.bE().isLinearAdActive()||!this.XE())return!1;if((null===(n=this.jD)||void 0===n?void 0:n.seeking)&&le(t))return null===(r=this.UD)||void 0===r||r.logger.debug("Seeking blocked by playback restrictions"),!1;var s=null===(i=this.YD.bitdashPlayer)||void 0===i?void 0:i.isLive(),u=this.getSeekableRange(),l=!(-1===u.start&&-1===u.end);return!!(!s||s&&this.YD.settings.ENABLE_SEEK_FOR_LIVE)&&(this.lE()?(this.DD=!0,Boolean(null===(o=this.YD.bitdashPlayer)||void 0===o?void 0:o.seek(e,t))):!!l&&(this.DD=!0,e=this.mE(e,u),de(t)||this.isLive()||(e=Math.min(e,u.end-this.YD.settings.SEEK_TO_END_OFFSET)),Boolean(null===(a=this.YD.bitdashPlayer)||void 0===a?void 0:a.seek(e,t))))},e.prototype.lE=function(){return this.getPlayerType().includes(D.PlayerType.Native)},e.prototype.addMetadata=function(e,t){var n;return!(!this.YE()||!ue(this.YD.bitdashPlayer))&&(null===(n=this.YD.bitdashPlayer)||void 0===n?void 0:n.addMetadata(e,t))},e.prototype.mE=function(e,t){if(e<t.start||e>t.end){var n=e;e=Math.max(e,t.start),e=Math.min(e,t.end),this.XD.debug("seek time out of seekable range ("+t.start+" to "+t.end+") correcting from "+n+" to "+e)}return e},e.prototype.isMuted=function(){var e;return this.YE()?Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isMuted()):this.YD.muted},e.prototype.getAvailableAudio=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getAvailableAudio())&&void 0!==t?t:[]},e.prototype.setAspectRatio=function(e){this.sD?this.sD.setAspectRatio(e):this.XD.debug("Unable to set aspect ratio: the style module is missing.")},e.prototype.nE=function(e){var t=this.listSubtitles().find((function(t){return t.id===e}));t&&this.fireEvent(_.PlayerEvent.SubtitleEnabled,{subtitle:r({},t)})},e.prototype.oE=function(){var e=this,t=this.listSubtitles().filter((function(e){return e.enabled})).map((function(t){return e.disableSubtitle(t.id,!1)}));return Promise.all(t)},e.prototype.enableSubtitle=function(e,t,n){var i=this;void 0===t&&(t=!0),void 0===n&&(n=!0);var o=this.listSubtitles().find((function(t){return t.id===e}));return this.XE()&&o&&!o.enabled?(n&&this.fireEvent(_.PlayerEvent.SubtitleEnable,{subtitle:r({},o)}),Promise.resolve().then((function(){return t?i.oE():Promise.all([!1])})).then((function(){var t;return Boolean(null===(t=i.YD.bitdashPlayer)||void 0===t?void 0:t.enableSubtitle(e))})).then((function(t){return t&&i.nE(e),t}))):Promise.resolve(!1)},e.prototype.disableSubtitle=function(e,t){var n=this;if(void 0===t&&(t=!0),this.XE()){var i=this.listSubtitles().find((function(t){return t.id===e}));if(i&&i.enabled)return t&&this.fireEvent(_.PlayerEvent.SubtitleDisable,{subtitle:r({},i)}),this.YD.bitdashPlayer?this.YD.bitdashPlayer.disableSubtitle(e).then((function(e){return e&&n.fireEvent(_.PlayerEvent.SubtitleDisabled,{subtitle:r(r({},i),{enabled:!1})}),e})):Promise.resolve(!1)}return Promise.resolve(!1)},e.prototype.preload=function(){var e,t;this.XE()&&!this.isLive()&&(this.DD||this.PF(this.YD.source,Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isLive())),null===(t=this.YD.bitdashPlayer)||void 0===t||t.preload())},e.prototype.mute=function(e){var t;this.YD.muted=!0,this.YE()&&(this.ZE()&&!this.isMuted()&&this.bE().onVolumeChanged(0),this.gD=this.getVolume(),null===(t=this.YD.bitdashPlayer)||void 0===t||t.mute(e))},e.prototype.unmute=function(e){var t;if(this.YD.muted=!1,this.YE()){if(this.ZE()&&this.isMuted()){var n=isNaN(this.gD)?100:this.gD;this.gD=NaN,this.bE().onVolumeChanged(n)}null===(t=this.YD.bitdashPlayer)||void 0===t||t.unmute(e)}},e.prototype.listSubtitles=function(){var e,t;if(!this.XE())return[];var n=null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.listSubtitles().map((function(e){return r({},e)})))&&void 0!==t?t:[];return a([],n,!0)},e.prototype.getDuration=function(e){var t,n;return void 0===e&&(e="api"),this.YE()?!de(e)&&this.xE()?this.bE().getDuration():this.XE()&&null!==(n=null===(t=this.YD.bitdashPlayer)||void 0===t?void 0:t.getDuration())&&void 0!==n?n:0:0},e.prototype.setVolume=function(e,t){var n;this.YD.volume=e,this.YE()&&(null===(n=this.YD.bitdashPlayer)||void 0===n||n.setVolume(e,t),this.ZE()&&this.bE().onVolumeChanged(e))},e.prototype.timeShift=function(e,t){var n,r,i;(null===(n=this.jD)||void 0===n?void 0:n.seeking)&&le(t)?null===(r=this.UD)||void 0===r||r.logger.debug("Time shift blocked by playback restrictions"):this.XE()&&(e=this.pE(e),null===(i=this.YD.bitdashPlayer)||void 0===i||i.timeShift(e,t),this.DD=!0)},e.prototype.pE=function(e){var t;if(e<=0)return e;var n=(0,ne.toSeconds)(Date.now());this.lE()||(n-=null===(t=this.bufferApi.getLevel(D.BufferType.ForwardDuration,D.MediaType.Video))||void 0===t?void 0:t.targetLevel);var r=Math.min(e-n,0);return this.XD.debug("Timeshifting to timestamp: ".concat(e,", converted relative offset is: ").concat(r)),r},e.prototype.setQueryParameters=function(e){var t;this.YE()&&(null===(t=this.YD.bitdashPlayer)||void 0===t||t.setQueryParameters(e))},e.prototype.clearQueryParameters=function(){var e;this.YE()&&(null===(e=this.YD.bitdashPlayer)||void 0===e||e.clearQueryParameters())},e.prototype.showAirplayTargetPicker=function(){var e;this.YE()&&(null===(e=this.YD.bitdashPlayer)||void 0===e||e.showAirplayTargetPicker())},e.prototype.getVolume=function(){var e,t;return this.YE()?null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getVolume())&&void 0!==t?t:0:this.YD.volume},e.prototype.getLatency=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getLatency())&&void 0!==t?t:0},e.prototype.setTargetLatency=function(e){var t;this.XE()&&("number"!=typeof e||e<0?this.zF("lowlatency.setLiveLatency","Invalid value: ".concat(e),"value","".concat(e)):null===(t=this.YD.bitdashPlayer)||void 0===t||t.setTargetLatency(e))},e.prototype.getTargetLatency=function(){var e,t;return this.XE()?null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getTargetLatency())&&void 0!==t?t:0:-1},e.prototype.setCatchupConfig=function(e){var t;this.XE()&&(null===(t=this.YD.bitdashPlayer)||void 0===t||t.setCatchupConfig(e))},e.prototype.getCatchupConfig=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getCatchupConfig())&&void 0!==t?t:null},e.prototype.setFallbackConfig=function(e){var t;this.XE()&&(null===(t=this.YD.bitdashPlayer)||void 0===t||t.setFallbackConfig(e))},e.prototype.getFallbackConfig=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getFallbackConfig())&&void 0!==t?t:null},e.prototype.getCurrentTime=function(e,t){var n,r;return void 0===e&&(e="api"),void 0===t&&(t=D.TimeMode.AbsoluteTime),this.xE()&&!de(e)?this.bE().getCurrentTime():this.XE()&&null!==(r=null===(n=this.YD.bitdashPlayer)||void 0===n?void 0:n.getCurrentTime(t))&&void 0!==r?r:0},e.prototype.setTargetBufferLevel=function(e,t,n){var r;if(this.YE()){var i=Object.keys(D.BufferType).some((function(t){return e===D.BufferType[t]})),o=Object.keys(D.MediaType).some((function(e){return n===D.MediaType[e]}));i?o?"number"!=typeof t||t<0?this.zF("buffer.setTargetLevel","Invalid value: ".concat(t),"value","".concat(t)):null===(r=this.YD.bitdashPlayer)||void 0===r||r.setTargetBufferLevel(e,t,n):this.zF("buffer.setTargetLevel","Invalid media type: ".concat(n),"media","".concat(n)):this.zF("buffer.setTargetLevel","Invalid buffer type: ".concat(e),"type","".concat(e))}},e.prototype.getBufferLevel=function(e,t){var n,r,i={level:null,targetLevel:null,type:e,media:t};return this.YE()&&this.qE(e,t)&&null!==(r=null===(n=this.YD.bitdashPlayer)||void 0===n?void 0:n.getBufferLevel(e,t))&&void 0!==r?r:i},e.prototype.qE=function(e,t){var n=Object.keys(D.BufferType).some((function(t){return e===D.BufferType[t]})),r=Object.keys(D.MediaType).some((function(e){return t===D.MediaType[e]}));return n&&r},e.prototype.getAudioBufferLength=function(){return this.XE()?this.getBufferLevel(D.BufferType.ForwardDuration,D.MediaType.Audio).level:null},e.prototype.getVideoBufferLength=function(){return this.XE()?this.getBufferLevel(D.BufferType.ForwardDuration,D.MediaType.Video).level:null},e.prototype.getMaxTimeShift=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getMaxTimeShift())&&void 0!==t?t:0},e.prototype.getTimeShift=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getTimeShift())&&void 0!==t?t:0},e.prototype.isStalled=function(){var e;return this.XE()&&Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isStalled())},e.prototype.isLive=function(){var e;return this.XE()&&Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isLive())},e.prototype.hasEnded=function(){var e;return this.XE()&&Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.hasEnded())},e.prototype.getAvailableVideoQualities=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getAvailableVideoQualities())&&void 0!==t?t:[]},e.prototype.getAvailableAudioQualities=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getAvailableAudioQualities())&&void 0!==t?t:[]},e.prototype.rE=function(){var e;return this.YE()&&Boolean(this.YD.videoElement)&&Boolean(null===(e=this.YD.videoElement)||void 0===e?void 0:e.isPictureInPicture())},e.prototype.isAirplayAvailable=function(){var e;return this.YE()&&Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isAirplayAvailable())},e.prototype.isAirplayActive=function(){var e;return this.YE()&&Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isAirplayActive())},e.prototype.getDownloadedVideoData=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getDownloadedVideoData())&&void 0!==t?t:{id:"",bitrate:0,height:0,width:0,isAuto:!0}},e.prototype.getDownloadedAudioData=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getDownloadedAudioData())&&void 0!==t?t:{id:"",bitrate:0,isAuto:!0}},e.prototype.getPlaybackVideoData=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getPlaybackVideoData())&&void 0!==t?t:{id:"",bitrate:0,height:0,width:0,uid:void 0}},e.prototype.getPlaybackAudioData=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getPlaybackAudioData())&&void 0!==t?t:{id:"",bitrate:0}},e.prototype.getAspectRatio=function(){var e,t;return null!==(t=null===(e=this.sD)||void 0===e?void 0:e.getAspectRatio())&&void 0!==t?t:0},e.prototype.getAudio=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getAudio())&&void 0!==t?t:null},e.prototype.getBufferedRanges=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getBufferedRanges())&&void 0!==t?t:[]},e.prototype.getAvailableSegments=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getAvailableSegments())&&void 0!==t?t:{}},e.prototype.getAudioQuality=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getAudioQuality())&&void 0!==t?t:{id:"auto",bitrate:null}},e.prototype.getManifest=function(){return this.aD},e.prototype.getDroppedVideoFrames=function(){var e,t;return this.iG(u.DROPPED_VIDEO_FRAMES,!(this.ZE()&&this.bE().isLinearAdActive()),this.YE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getDroppedVideoFrames())&&void 0!==t?t:0)},e.prototype.getTotalStalledTime=function(){var e,t;return this.iG(u.TOTAL_STALLED_TIME,!(this.ZE()&&this.bE().isLinearAdActive()),this.YE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getTotalStalledTime())&&void 0!==t?t:0)},e.prototype.getVideoQuality=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getVideoQuality())&&void 0!==t?t:{id:"auto",bitrate:null,width:null,height:null}},e.prototype.sE=function(e){var t=this;return new Promise((function(n){var r,i,o=!1,a=function(){t.off(_.PlayerEvent.AdBreakStarted,a),o=!0},s=function(){t.off(_.PlayerEvent.AdStarted,s),t.AD=null,n()};t.on(_.PlayerEvent.AdBreakStarted,a),t.on(_.PlayerEvent.AdStarted,s),t.YD.context.serviceManager.get(g.ServiceName.PlayerStateService).transitionToPlayState(!0,e),(null!==(i=null===(r=t.bE())||void 0===r?void 0:r.playPreRollAds())&&void 0!==i?i:Promise.resolve()).then((function(){var e,n;return null!==(n=null===(e=pe(t.UD))||void 0===e?void 0:e.playPreRollAds())&&void 0!==n?n:Promise.resolve()})).then((function(){t.AD=null,t.isContentPlaying()||o?n():n(t.play(e))}))}))},e.prototype.isCastingToCAF=function(){var e=(0,Y.getRemoteControlState)(this.UD.store.getState().player);return e.remoteControlType===x.RemoteControlType.GoogleCastV3&&e.connectionState!==x.ConnectionState.Disconnected},e.prototype.tE=function(){if(this.hasCurrentSourcePlayedOnce())return!1;var e=this.bE(),t=pe(this.UD);return!1===(null==e?void 0:e.hasAlreadyRequestedPreRollAds())||!0===(null==t?void 0:t.shouldPlayPreRollAds())},e.prototype.uE=function(){if(this.isCasting())return!1;var e=this.oD===s.NONE,t=this.oD===s.MUTED_PLAY;return e||!this.isMuted()&&t},e.prototype.vE=function(){var e=this;this.YD.vrHandler&&this.YD.vrHandler.requestDeviceOrientationPermission().then((function(){return e.XD.debug("Device orientation permission granted")})).catch((function(){return e.XD.debug("Device orientation permission denied")}))},e.prototype.play=function(e){var t=this;return void 0===e&&(e="api"),this.wE(e)?this.AD?this.AD.then((function(){return t.bE().play()})):this.bE().play():this.XE()?this.tE()&&!this.isCastingToCAF()?this.AD=this.sE(e):(!this.DD&&!this.UD.sourceContext.isAd&&this.PF(this.YD.source,this.isLive()),this.vE(),this.YD.bitdashPlayer?this.YD.bitdashPlayer.play(e).then((function(){t.oD=t.oG(t.oD),t.setPlaybackSpeed(t.YD.playbackSpeed)})).catch((function(n){var r;return t.XD.debug("playback could not be started: ",n),t.uE()&&(t.fireEvent(_.PlayerEvent.Warning,new y.PlayerWarning(v.WarningCode.PLAYBACK_COULD_NOT_BE_STARTED)),t.isCasting()||t.pause(),n instanceof Error&&"NotAllowedError"===n.name&&(null===(r=t.YD.context.serviceManager.get(g.ServiceName.PlayerStateService))||void 0===r||r.transitionToPausedState(!0,e))),Promise.reject(n)})):Promise.reject("Player is not available.")):Promise.reject(new h.PlayerError(f.ErrorCode.SOURCE_INVALID,void 0,"No source was loaded when `play()` was called. Please call `load()` first, and wait for the promise to resolve before calling `play()`."))},e.prototype.wE=function(e){if(de(e))return!1;var t=Boolean(this.AD);return this.xE()||t},e.prototype.xE=function(){return!!this.ZE()&&this.bE().isLinearAdActive()},e.prototype.pause=function(e){var t,n=this;void 0===e&&(e="api"),this.wE(e)?this.AD?this.AD.then((function(){return n.bE().pause()})):this.bE().pause():this.XE()&&(null===(t=this.YD.bitdashPlayer)||void 0===t||t.pause(e))},e.prototype.castStop=function(){var e;this.YE()&&ue(this.YD.bitdashPlayer)&&(null===(e=this.YD.bitdashPlayer)||void 0===e||e.castStop())},e.prototype.setLogLevel=function(e){this.XD.setLogLevel(e)},e.prototype.getLogger=function(){return this.XD},e.prototype.yE=function(e,t,n){var r;this.YD&&this.YD.eventHandler?r=this.YD.eventHandler:this.kD&&(r=this.kD),r.on(e,t,n)},e.prototype.onInternal=function(e,t){this.yE(e,t,!0)},e.prototype.on=function(e,t){this.yE(e,t,!1)},e.prototype.off=function(e,t){this.YD&&this.YD.eventHandler?this.YD.eventHandler.off(e,t):this.kD&&this.kD.off(e,t)},e.prototype.zE=function(e){var t;return{context:null,logger:this.XD,container:this.VD,bitdashPlayer:null,eventHandler:this.kD,videoElement:null,adController:null,vrHandler:null,hasInitStarted:!1,technology:{player:D.PlayerType.Unknown,streaming:D.StreamType.Unknown},playerConfig:null,configuration:null,settings:null,source:null,volume:null!==(t=e.playback().volume)&&void 0!==t?t:100,muted:e.playback().muted||!1,playbackSpeed:1}},e.prototype.AE=function(){try{for(var e=0;this.VD.getElementsByClassName(S.Environment.idPrefix+"error").length>0&&(this.VD.removeChild(this.VD.getElementsByClassName(S.Environment.idPrefix+"error")[0]),!(++e>10)););}catch(e){this.XD.debug("Error removing container error element")}},e.prototype.BE=function(e){if(!this.YD.playerConfig.isAdPlayer){var t,n=this.cD.licensing().delay,r=this.cD.tweaks();(n||0===n)&&!isNaN(n)&&n>=0&&(t=n);var i=this.tD[0];r.licenseServer&&(this.tD.includes(r.licenseServer)?i=r.licenseServer:this.XD.warn("Invalid license server",new h.PlayerError(f.ErrorCode.SETUP_INVALID_LICENSE_SERVER,{"license-server":r.licenseServer}))),this.fD=A.LicenseCall.getInstance(this.XD,i,e.key),this.fD.setDelay(t);var o=this.cD.get("network");this.fD.issue(this.yF,null==o?void 0:o.requestApi)}},e.prototype.CE=function(e){var t,n;this.cD=new d.PlayerConfiguration(e),this.bD.setDisabled(Boolean(null===(t=e.storage)||void 0===t?void 0:t.disableStorageApi)),this.YD=this.YD||this.zE(this.cD),this.YD.configuration=this.cD,this.YD.settings=this.cD.getSettings(),this.XD.setSettings(this.YD.settings),this.XD.setLogLevel(this.cD.get("logs").level),null===(n=this.kD)||void 0===n||n.addFromObject(this.cD.get("events")),this.XD.setConfig(this.cD);var r=this.cD.tweaks().log_level;if(r&&this.setLogLevel(r),this.YD.settings.ENABLE_PERFORMANCE_LOGS&&(0,R.setPerformanceTrackingLogger)(this.XD),l.ModuleManager.has(c.ModuleName.XML)&&l.ModuleManager.get(c.ModuleName.XML).setLogger(this.XD),this.cD.get("logs").bitmovin&&(this.XD.forceLogBeautified("Adaptive Video Streaming Service by www.bitmovin.com","blue","14"),this.XD.forceLogBeautified("Player Version "+S.Environment.VERSION_NUMBER,"black","12")),(0,p.validateAppIdConfig)(this.cD),this.YD.playerConfig={isAdPlayer:!1,prefix:"",visibility:"visible"},this.VD&&(this.VD.player=this.WD,this.AE()),this.BE(e),l.ModuleManager.has(c.ModuleName.Style)){var i=l.ModuleManager.get(c.ModuleName.Style).StyleManager;this.sD=new i(this,this.YD)}l.ModuleManager.callSetupHooks(this.WD),this.UD=this.eE()},e.prototype.postSetup=function(){this.qF(),this.RF()},e.prototype.setup=function(e){if(!S.Environment.checkDomainLock())throw new h.PlayerError(f.ErrorCode.SETUP_MISSING_DOMAIN_LICENSE_ALLOWLIST,void 0,"The player is not authorized to play content on the current domain.");return this.CE(e)},e.prototype.addSubtitle=function(e){var t,n=this,i=r(r({},e),{kind:(null==e?void 0:e.kind)||"subtitles",id:null!=(null==e?void 0:e.id)?String(null==e?void 0:e.id):void 0,label:(null==e?void 0:e.label)||(null==e?void 0:e.lang),isSideloaded:!0});if(function(e){return e&&"object"==typeof e&&("string"==typeof e.id||(0,ie.isNumber)(e.id))&&"string"==typeof e.lang&&["caption","captions","subtitle","subtitles"].includes(e.kind)}(i)){if(this.XE()&&!i.isFragmented){var o=i.enabled||!1;i.enabled=!1,null===(t=this.YD.bitdashPlayer)||void 0===t||t.addSubtitle(i).then((function(){o&&n.enableSubtitle(i.id,!1,!1)})).catch((function(){return function(){}}))}}else this.fireEvent(_.PlayerEvent.Warning,new y.PlayerWarning(v.WarningCode.API_INVALID_ARGUMENT,"Invalid subtitle track: ".concat(JSON.stringify(e)," Please check the documentation for expected properties."),{method:"subtitles.add",parameter:"subtitle",argument:e}))},e.prototype.removeSubtitle=function(e){var t;this.XE()&&(null===(t=this.YD.bitdashPlayer)||void 0===t||t.removeSubtitle(e))},e.prototype.getContainer=function(){return this.VD},e.prototype.setVRStereo=function(e){return!(!this.WE()||!this.cE()||"boolean"!=typeof e)&&this.YD.vrHandler.setStereo(e)},e.prototype.getStreamType=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.technology)||void 0===e?void 0:e.streaming)&&void 0!==t?t:D.StreamType.Unknown},e.prototype.getPlayerType=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.technology)||void 0===e?void 0:e.player)&&void 0!==t?t:D.PlayerType.Unknown},e.prototype.getSupportedTech=function(e){switch(e){case D.SupportedTechnologyMode.Platform:return a([],(0,q.getCapabilities)().techSupportedByPlatform,!0);case D.SupportedTechnologyMode.Modules:return a([],(0,q.getCapabilities)().techSupportedByModules,!0);case D.SupportedTechnologyMode.PlatformAndModules:return a([],(0,q.getCapabilities)().techSupportedByModulesOnPlatform,!0);default:return this.fireEvent(_.PlayerEvent.Warning,new y.PlayerWarning(v.WarningCode.API_INVALID_ARGUMENT,"Invalid mode '".concat(e,"'"),{method:"getSupportedTech",parameter:"mode",argument:"".concat(e)})),[]}},e.prototype.getVR=function(){return this.cE()?this.YD.vrHandler:null},e.prototype.getAds=function(){return this.WE()&&this.ZE()?this.YD.adController.playerAdvertisingApi:(null==this.getConfig().advertising||l.ModuleManager.has(c.ModuleName.Advertising)||this.XD.warn("A required player module is missing: Advertising"),null)},e.prototype.DE=function(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){this.XD.log("Could not parse JSON string given as source: "+e.message)}return e&&"object"==typeof e?e:null},e.prototype.EE=function(e){var t;void 0===e&&(e=!1),this.YD&&this.VD&&((t=this.YD.playerConfig&&this.YD.playerConfig.hasOwnProperty("prefix")?document.getElementById(S.Environment.idPrefix+""+this.YD.playerConfig.prefix+"vr-canvas"):document.getElementById(S.Environment.idPrefix+"vr-canvas"))&&t.parentNode&&t.parentNode.removeChild(t),this.VD&&e&&delete this.VD.player)},e.prototype.FE=function(e){var t=!1,n=null;e&&(e.hasOwnProperty("options")&&e.options&&e.options.hasOwnProperty("persistentPoster")&&(t=e.options.persistentPoster),n=e.poster),this.setPosterImage(n,t)},e.prototype.GE=function(e){if(e)return["dash","hls","progressive","smooth","whep","poster","drm","title","description","options","tracks","labeling","vr"].forEach((function(t){e.hasOwnProperty(t)&&!e[t]&&delete e[t]})),e},e.prototype.HE=function(e){var t,n=e.vr,r=(0,q.getCapabilities)(),i=Boolean(n),o=r[B.CapabilityKey.isIOS];if(i&&o){var a=r[B.CapabilityKey.isInlinePlaybackRestricted];n.restrictedInlinePlayback=a,(null===(t=this.rD)||void 0===t?void 0:t.isFullscreen())&&this.setViewMode(D.ViewMode.Inline),a&&(n.audioElement=oe.Util.getVRAudioElement(),this.VD.appendChild(n.audioElement.getWrappedElement()))}},e.prototype.IE=function(e,t,n,r){var i;return this.YD.source=e,this.YD.loadOptions=t,(null===(i=this.YD.technology)||void 0===i?void 0:i.player)===n.player?(this.YD.technology=n,Promise.resolve()):this.JE(e,n,r)},e.prototype.JE=function(e,t,n){var r=this,i=function(){var t;r.VE()||(null===(t=r.kD)||void 0===t||t.off(_.PlayerEvent.Error,i),r.FE(e))};return this.onInternal(_.PlayerEvent.Error,i),this.YD.vrHandler=null,this.KE(n).then((function(){return r.fE(e,t)})).then((function(){return r.HE(e)})).catch((function(e){return e&&e.hasOwnProperty("code")&&e.hasOwnProperty("message")&&r.kD?r.kD.fireError(e):e&&r.XD.error(e),Promise.reject(e)}))},e.prototype.KE=function(e){var t=this;return this.YD&&this.YD.bitdashPlayer?this.YD.bitdashPlayer.release(e).then((function(){t.YD.bitdashPlayer=null,t.EE()})).catch((function(e){return t.XD.error("There was a problem removing the current player: ".concat(e))})):Promise.resolve()},e.prototype.LE=function(e,t,n){return t===T.ADVERTISING_ISSUER_NAME&&e.canReuseEmeHandler()?e.reInitializeEmeHandler():e.isDrmConfigSet()?void 0:e.setDrmConfig(n)},e.prototype.ME=function(e,t,n){var r=this,i=this.dE(e,this.YD.technology);return this.YD.bitdashPlayer&&i?this.YD.bitdashPlayer.load(i,t.restrictions).then((function(){e.drm&&r.UD.serviceManager.maybeCall(g.ServiceName.DrmService,(function(t){return r.LE(t,n,e.drm)}))})).catch((function(e){return e&&e.code&&e.message&&r.kD?r.kD.fireError(e):e&&r.XD.debug("Failed to load source:",e),Promise.reject(e)})):Promise.reject("Could not load source from configuration.")},e.prototype.NE=function(e){return!!this.xD&&(this.xD.reject(new Error(e)),this.xD=null,!0)},e.prototype.YF=function(e){this.YD.bitdashPlayer&&e.set(g.ServiceName.StartOffsetService,new F.StartOffsetService(this.YD.bitdashPlayer)),e.set(g.ServiceName.MetadataParsedService,new M.MetadataParsedService(this.YD.context)),e.set(g.ServiceName.StallTimeTrackerService,new U.StallTimeTrackerService(this.YD.context)),e.set(g.ServiceName.ThumbnailService,function(e){if(l.ModuleManager.has(c.ModuleName.Thumbnail))return l.ModuleManager.get(c.ModuleName.Thumbnail).createThumbnailService(e)}(this.YD.context)),e.set(g.ServiceName.PlayerStateService,new L.PlayerStateService(this.YD.context))},e.prototype.load=function(e,n,r,i){var o=this;void 0===i&&(i="api");var a=i===T.ADVERTISING_ISSUER_NAME;de(i)||(this.DD=!1,this.pD=s.NONE,this.zD=!1,this.ZD=null,this.aD=null);var u=this.xD=new $.Deferred;return this.jD=r,this.vD=this.vD.then((function(){return o.ZF(e,{forceTechnology:n,restrictions:r},i)})).catch((function(e){return o.iF(u,e)})),this.wD=this.wD.then((function(){return o.vD})).then((function(){return o.SF()})).then((function(){return function(e,n){return e===n?Promise.resolve():Promise.reject(new Error(t.LOAD_CANCELLED_MESSAGE))}(u,o.xD)})).then((function(){!function(e,t,n){var r,i=oe.Util.toHash(t)+e.context.internalPlayerID,o=new k.SourceContext({source:t,isAd:n,technology:e.technology,sourceIdentifier:i,mseObjectUrl:null===(r=e.videoElement)||void 0===r?void 0:r.src}),a=e.context;a.setSourceContext(o),a.serviceManager.has(g.ServiceName.SourceStoreService,i)||function(e,t){var n=new X.StoreService(e.store,"sources",t);e.serviceManager.set(g.ServiceName.SourceStoreService,n,t),n.addReducers(Z.staticSourceReducers)}(a,i)}(o.YD,e,a),o.YF(o.YD.context.serviceManager),o.qG(i)})).then((function(){var t=o.eF(e,{forceTechnology:n,restrictions:r},i);return Promise.race([t,u.promise])})).then(u.resolve).catch((function(e){return o.iF(u,e)})),u.promise},e.prototype.ZF=function(e,t,n){var r,i=this;return null===(r=this.kD)||void 0===r||r.resetErrors(),this.iE(n).then((function(){i.kF(e);var r=function(e,t,n){var r=oe.Util.splitPlayerAndStreamingTechnology(n);return(0,Q.getBestTech)(e.playback().preferredTech,t,r)}(i.cD,e,t.forceTechnology),o=i.mF(e,r);return i.XD.debug("Using technology: ".concat(o.player,".").concat(o.streaming)),i.lF(e),i.bF(e),i.FE(e),i.IE(i.DE(e),t,o,n)}))},e.prototype.bF=function(e){e.hasOwnProperty("vr")&&(0,q.getCapabilities)().isIOS&&(0,q.getCapabilities)().isInlinePlaybackRestricted&&(e.vr.audioElement=oe.Util.getVRAudioElement(),e.vr.restrictedInlinePlayback=!0),e.hasOwnProperty("vr")&&e.vr.audioElement&&this.VD.appendChild(e.vr.audioElement.getWrappedElement())},e.prototype.cF=function(e){if(l.ModuleManager.has(c.ModuleName.DRM)&&e.drm&&!this.UD.serviceManager.has(g.ServiceName.DrmService)){var t=l.ModuleManager.get(c.ModuleName.DRM).DrmService;this.UD.serviceManager.set(g.ServiceName.DrmService,new t(this.UD))}},e.prototype.dF=function(){var e,t=this.UD.sourceContext.sourceIdentifier;this.UD.serviceManager.has(g.ServiceName.ManifestCachingService,t)&&this.isLive()&&null!==this.YD.technology&&void 0!==this.YD.technology&&this.YD.technology.streaming!==D.StreamType.Hls&&(null===(e=this.UD.serviceManager.get(g.ServiceName.ManifestCachingService,t))||void 0===e||e.clear(),this.UD.serviceManager.set(g.ServiceName.ManifestCachingService,void 0,t))},e.prototype.eF=function(e,t,n){var r=this,i=this.UD.sourceContext.sourceIdentifier;return this.UD.serviceManager.maybeCall(g.ServiceName.SourceStoreService,(function(e){return e.dispatch((0,W.resetLoadedRanges)())}),null,i),this.pG(n,i),this.gF(n,i),this.cF(e),this.lD&&this.UD.serviceManager.set(g.ServiceName.DrmDetectorService,this.lD),this.fF().then((function(){return r.ME(e,t,n)})).then((function(){return r.postSetup(),r.oF(e.subtitleTracks),function(e,t){t.maybeCall(g.ServiceName.ThumbnailService,(function(t){e&&e.thumbnailTrack&&t.addThumbnails(e.thumbnailTrack.url)}))}(e,r.YD.context.serviceManager),r.hF(e,n)})).then((function(){var e,t,n;r.dF(),null===(e=(0,K.getSourceStore)(r.UD))||void 0===e||e.dispatch((0,G.setMseObjectUrl)(null!==(n=null===(t=r.YD.videoElement)||void 0===t?void 0:t.src)&&void 0!==n?n:"")),r.fireEvent(_.PlayerEvent.SourceLoaded)}))},e.prototype.fF=function(){return this.YD.bitdashPlayer?this.YD.bitdashPlayer.prepareLoad():Promise.reject("Could not load source from configuration.")},e.prototype.gF=function(e,t){!de(e)&&this.UD&&(this.UD.serviceManager.maybeCall(g.ServiceName.SourceStoreService,(function(e){return e.dispatch((0,J.initializeStartTimeOffset)())}),null,t),this.UD.serviceManager.has(g.ServiceName.ManifestCachingService,t)||(this.UD.serviceManager.set(g.ServiceName.ManifestCachingService,this.RE,t),this.UD.serviceManager.maybeCall(g.ServiceName.ManifestCachingService,(function(e){return e.clear()}),null,t)))},e.prototype.hF=function(e,t){var n,r;return this.pF(),de(t)?(this.YD.context.serviceManager.get(g.ServiceName.PlayerStateService).transitionToPlayState(!1,t),Promise.resolve()):(this.eD&&this.eD.reset(),this.ZD=e,this.aD=null!==(r=null===(n=this.YD.bitdashPlayer)||void 0===n?void 0:n.getManifest())&&void 0!==r?r:"",this.EF())},e.prototype.iF=function(e,t){this.off(_.PlayerEvent.Error,this.TF),e.reject(t)},e.prototype.jF=function(){var e,t,n,r=this,i=pe(this.UD);if(!this.ZE()&&!i)return Promise.resolve();var o=(null===(e=this.bE())||void 0===e?void 0:e.isLinearAdActive())||Boolean(this.AD),a=!this.yD&&o;return(null!==(n=null===(t=this.bE())||void 0===t?void 0:t.reset())&&void 0!==n?n:Promise.resolve()).then((function(){var e;return null!==(e=null==i?void 0:i.reset())&&void 0!==e?e:Promise.resolve()})).then((function(){r.AD=null,a&&r.fireEvent(_.PlayerEvent.SourceUnloaded)}))},e.prototype.kF=function(e){this.VE()&&this.nF(f.ErrorCode.API_NOT_AVAILABLE,"Cannot load the source: the player has already been destroyed.");var t=this.GE(e),n=Object.values(D.StreamType).filter((function(e){return e!==D.StreamType.Unknown}));if(t&&n.some((function(e){return t.hasOwnProperty(e)}))||this.nF(f.ErrorCode.SOURCE_INVALID,"Cannot load the source: the provided source config has no usable stream.",{source:e}),!this.nD)throw this.qD},e.prototype.lF=function(e){var t,n=Boolean(null===(t=e.options)||void 0===t?void 0:t.shouldRecreateSourceBuffersOnPeriodSwitch);n!==w.DefaultSettings.DASH_CLEAR_BUFFERS_ON_PERIOD_SWITCHES&&(this.XD.debug("Overriding default setting: `DASH_CLEAR_BUFFERS_ON_PERIOD_SWITCHES = ".concat(n,"`")),w.DefaultSettings.DASH_CLEAR_BUFFERS_ON_PERIOD_SWITCHES=n,this.UD&&(this.UD.settings=this.YD.configuration.getSettings()))},e.prototype.mF=function(e,t){var n=(0,q.getCapabilities)().techSupportedByPlatform;return n.length<1&&this.nF(f.ErrorCode.SOURCE_NO_SUPPORTED_TECHNOLOGY,"The platform does not support any of the technologies needed to play back the provided source."),!t&&e.hasOwnProperty("vr")&&this.nF(f.ErrorCode.VR_INCOMPATIBLE_PLAYER_TECHNOLOGY,"This platform does not support VR playback."),t||this.nF(f.ErrorCode.SOURCE_NO_SUPPORTED_TECHNOLOGY,"This platform only supports these technologies: ".concat(JSON.stringify(n),".")),t},e.prototype.nF=function(e,t,n){var r=new h.PlayerError(e,n,t);throw this.kD&&this.kD.fireError(r),r},e.prototype.oF=function(e){var t=this;!this.subtitlesApi&&l.ModuleManager.has(c.ModuleName.Subtitles)&&(this.subtitlesApi=l.ModuleManager.get(c.ModuleName.Subtitles).PlayerSubtitlesApiFactory.build(this),this.fireEvent(_.PlayerEvent.ModuleReady,{name:c.ModuleName.Subtitles})),e&&Array.isArray(e)&&e.forEach((function(e){return t.addSubtitle(e)}))},e.prototype.pF=function(){var e,t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.createManifestApi();t&&(this.manifestApi=t)},e.prototype.qF=function(){if(this.YD.source&&this.YD.source.hasOwnProperty("vr")&&this.WE())if("function"==typeof window.requestAnimationFrame){var e=l.ModuleManager.get(c.ModuleName.VR).VRHandler;this.YD.vrHandler=new e(this.YD.context,this.id,this.YD.source.vr,oe.Util.getVRAudioElement(),this.XD,navigator,this.YD.settings),this.fireEvent(_.PlayerEvent.ModuleReady,{name:c.ModuleName.VR})}else this.XD.warn("VR unavailable","This platform does not support VR")},e.prototype.getConfig=function(e){return void 0===e&&(e=!1),this.cD?e?this.cD.get():this.cD.getUserConfig():{}},e.prototype.getSnapshot=function(e,t){var n;if(this.XE())return null===(n=this.YD.bitdashPlayer)||void 0===n?void 0:n.getSnapshot(e,t)},e.prototype.setPlaybackSpeed=function(e,t){var n,r,i;if(void 0===t&&(t="api"),e=Number(e),!isNaN(e)&&e>0){if((null===(n=this.jD)||void 0===n?void 0:n.playbackRate)&&le(t))return void(null===(r=this.UD)||void 0===r||r.logger.debug("Playback rate changes blocked by playback restrictions"));this.YD.playbackSpeed=e,this.YE()&&(null===(i=this.YD.bitdashPlayer)||void 0===i||i.setPlaybackSpeed(e))}},e.prototype.getPlaybackSpeed=function(){var e,t;return this.YE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getPlaybackSpeed())&&void 0!==t?t:1},e.prototype.rF=function(){var e=this;return new Promise((function(t,n){if(e.rD&&e.getViewMode()!==D.ViewMode.Inline){var r=function(){t(),e.off(_.PlayerEvent.ViewModeChanged,r)};e.on(_.PlayerEvent.ViewModeChanged,r),e.rD.setViewMode(D.ViewMode.Inline)}else t()}))},e.prototype.destroy=function(){var e,t=this;return this.UE()?Promise.resolve():(null===(e=this.UD)||void 0===e||e.store.dispatch((0,H.setDestroyState)(x.DestroyState.Destroying)),l.ModuleManager.callDestroyHooks(this.WD).then((function(){return t.rF()})).then((function(){return t.tF()})).then((function(){var e,n;null===(e=t.UD)||void 0===e||e.store.dispatch((0,H.setDestroyState)(x.DestroyState.Destroyed)),null===(n=t.kD)||void 0===n||n.setBeingDestroyed(),t.uF()})).then((function(){return t.wD})).then((function(){return t.iE()})).then((function(){return t.vF()})).then((function(){t.UD&&(t.sF(),t.UD.dispose(),t.UD=null)})))},e.prototype.sF=function(){this.SE&&this.SE(),this.TE&&this.TE(),this.SE=null,this.TE=null},e.prototype.tF=function(){var e=this;return new Promise((function(t){var n=function(){(0,re.clearTimeoutIfDefined)(r),e.off(_.PlayerEvent.Destroy,n),t()},r=window.setTimeout(n,250);e.on(_.PlayerEvent.Destroy,n),e.fireEvent(_.PlayerEvent.Destroy,{},!1,!1)}))},e.prototype.uF=function(){this.NE(t.LOAD_CANCELLED_BY_DESTROY_MESSAGE),(0,re.clearTimeoutIfDefined)(this.dD)},e.prototype.vF=function(){var e=this;if(!this.YD)return Promise.resolve();var t=Promise.resolve();return this.EE(!0),oe.Util.removeVRAudioElement(),this.YD.adController=(0,m.dispose)(this.YD.adController),this.YD.vrHandler=null,this.rD&&(this.rD=(0,m.dispose)(this.rD)),this.OE=(0,m.dispose)(this.OE),this.PE=(0,m.dispose)(this.PE),this.QE=(0,m.dispose)(this.QE),this.RE=(0,m.dispose)(this.RE),this.eD.dispose(),this.YD.bitdashPlayer?t=this.YD.bitdashPlayer.release().then((function(){return e.UD.serviceManager.maybeCall(g.ServiceName.DrmService,(function(e){return e.release()}))})).finally((function(){e.wF(),e.YD.bitdashPlayer=null})):this.wF(),this.YD.context&&ce(this.YD.context),this.lD=(0,m.dispose)(this.lD),this.sD=(0,m.dispose)(this.sD),this.kD=(0,m.dispose)(this.kD),this.bD=null,t},e.prototype.wF=function(){if(this.YD.videoElement){var e=this.YD.videoElement.getWrappedElement();this.YD.videoElement=(0,m.dispose)(this.YD.videoElement),this.VD&&e&&e!==this.mD&&this.VD.removeChild(e)}},e.prototype.xF=function(e){if(!e)return new h.PlayerError(f.ErrorCode.SETUP_LICENSE_ERROR,{"error-message":"No license information was returned from the server"});if(e.message&&e.message.includes("Your player is not allowed to play on the domain"))return new h.PlayerError(f.ErrorCode.SETUP_MISSING_LICENSE_ALLOWLIST,{"error-message":e.message});if(e.hasOwnProperty("validationInformation")){for(var t="",n=0;n<e.validationInformation.length;n++)t+=e.validationInformation[n].key+": ",t+=e.validationInformation[n].errorMessage,n<e.validationInformation.length-1&&(t+="</br>");return new h.PlayerError(f.ErrorCode.SETUP_LICENSE_ERROR,{"error-message":t})}return e.hasOwnProperty("message")?new h.PlayerError(f.ErrorCode.SETUP_LICENSE_ERROR,{"error-message":e.message}):void 0},e.prototype.permitControl=function(e){this.YD&&this.YD.bitdashPlayer&&oe.Util.isFunction(this.YD.bitdashPlayer.permitControl)&&this.YD.bitdashPlayer.permitControl(e)},e.prototype.zF=function(e,t,n,r){this.fireEvent(_.PlayerEvent.Warning,new y.PlayerWarning(v.WarningCode.API_INVALID_ARGUMENT,t,{method:e,parameter:n,argument:r}))},e.prototype.fireEvent=function(e,t,n,r){this.kD&&this.kD.getEventFunction()(e,t,n,r)},e.prototype.isPlaying=function(){return this.isContentPlaying()||this.isAdPlaying()},e.prototype.isContentPlaying=function(){var e;return this.XE()&&Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isPlaying())},e.prototype.isAdPlaying=function(){return this.ZE()&&this.bE().isPlaying()},e.prototype.isPaused=function(){return this.isContentPaused()||this.isAdPaused()},e.prototype.isContentPaused=function(){var e;return this.XE()&&Boolean(null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.isPaused())},e.prototype.isAdPaused=function(){return this.ZE()&&this.bE().isPaused()},e.prototype.setVideoElement=function(e){this.mD=e},e.prototype.getVideoElement=function(){return this.mD?this.mD:this.YD&&this.YD.videoElement?this.YD.videoElement.getWrappedElement():null},e.prototype.isDRMSupported=function(e){return this.lD?this.lD.isSupported(e):Promise.reject("DRM module not loaded")},e.prototype.getSupportedDRM=function(){return this.lD?this.lD.getSupported():Promise.reject("DRM module not loaded")},e.prototype.setAuthentication=function(e){this.fD.setCustomData(e)},e.prototype.setPosterImage=function(e,t){this.sD?this.sD.setPosterImage(e,t):this.XD.debug("Unable to set poster image because style module is missing")},e.prototype.getThumbnail=function(e){var t;return this.YE()?function(e,t,n){return n.maybeCall(g.ServiceName.ThumbnailService,(function(n){return n.getThumbnail(e,t)}))}(e,{width:this.getContainer().clientWidth,height:this.getContainer().clientHeight,isFullscreen:Boolean(null===(t=this.rD)||void 0===t?void 0:t.isFullscreen())},this.YD.context.serviceManager):null},e.prototype.getSeekableRange=function(){var e,t;return this.XE()&&null!==(t=null===(e=this.YD.bitdashPlayer)||void 0===e?void 0:e.getSeekableRange())&&void 0!==t?t:{start:-1,end:-1}},e.prototype.CF=function(e,t,n){var r;t=[].concat(t);for(var i=function(e){if(r=t.find((function(t){return t.lang===e})))return"break"},o=0,a=e=[].concat(e);o<a.length&&"break"!==i(a[o]);o++);return r?Promise.resolve(n(r.id)):Promise.resolve()},e.prototype.DF=function(){var e=this.YD.configuration.buffer();this.QF(e)},e.prototype.EF=function(){return this.JF().then(this.OF).then(this.NF)},e.prototype.FF=function(){if(this.YD.configuration.playback().playsInline&&void 0!==this.UD.videoElement){var e=this.UD.videoElement.getWrappedElement();e.setAttribute("webkit-playsinline",""),e.setAttribute("playsinline","")}},e.prototype.GF=function(){this.isLive()||this.tE()||this.PF(this.YD.source,!1)},e.prototype.HF=function(){var e,t;null!==(t=null===(e=this.YD.vrHandler)||void 0===e?void 0:e.deviceOrientationPermissionRequired())&&void 0!==t&&t?this.XD.debug("Autoplay disabled: user permission is required to access device orientation data for VR playback"):this.MF()},e.prototype.IF=function(){var e=this.isLive(),t=this.YD.configuration.playback(),n=this.YD.configuration.adaptation();t.autoplay?this.HF():this.KF(n,e)&&this.preload()},e.prototype.JF=function(){var e=this;return new Promise((function(t){(0,re.clearTimeoutIfDefined)(e.dD),e.YD&&e.YD.bitdashPlayer?(e.FF(),e.GF(),e.IF(),t()):e.dD=window.setTimeout((function(){t(e.EF())}),100)}))},e.prototype.KF=function(e,t){return!t&&("boolean"!=typeof e.preload||e.preload)},Object.defineProperty(e.prototype,"LF",{get:function(){return this.xD&&this.xD.promise||Promise.resolve()},enumerable:!1,configurable:!0}),e.prototype.MF=function(){var e=this;this.LF.then((function(){return e.play()})).catch((function(){return e.XD.insane("Autoplay not triggered because current load call failed")}))},e.prototype.PF=function(e,t){var n=this.YD.context.serviceManager.get(g.ServiceName.StartOffsetService).getStartOffset(e);t?this.timeShift(n,T.STARTUP_ISSUER_NAME):this.seek(n,T.STARTUP_ISSUER_NAME)},e.prototype.QF=function(e){var t=this;Object.keys(e).forEach((function(n){Object.keys(e[n]).forEach((function(r){if(t.qE(r,n)){var i=e[n][r];t.setTargetBufferLevel(r,i,n)}}))}))},e.prototype.RF=function(){this.YD&&(this.yD=!0,this.setVolume(this.YD.volume),this.setPlaybackSpeed(this.YD.playbackSpeed),this.YD.muted?this.mute():this.unmute())},e.prototype.SF=function(){if(!this.ZE()&&this.getConfig().advertising)try{this.aE()}catch(e){this.XD.warn(e)}},e.prototype.UF=function(){var e=this;this.nD=!0,this.uD&&this.uD.length>0&&(this.eD=new P.ImpressionCall(this.XD,this.uD[0])),this.onInternal(_.PlayerEvent.Error,this.TF),this.onInternal(_.PlayerEvent.Warning,(function(t){return e.XD.warn(t.message)})),this.onInternal(_.PlayerEvent.Playing,this.VF),this.onInternal(_.PlayerEvent.SourceLoaded,this.AF),this.on(_.PlayerEvent.SourceUnloaded,this.BF),this.on(_.PlayerEvent.Playing,this.nG),this.bufferApi=I.PlayerBufferApiFactory.create(this),l.ModuleManager.has(c.ModuleName.LowLatency)&&(this.lowLatencyApi=l.ModuleManager.get(c.ModuleName.LowLatency).LowLatencyApiFactory.create(this)),l.ModuleManager.has(c.ModuleName.ABR)&&(this.adaptationApi=l.ModuleManager.get(c.ModuleName.ABR).AdaptationApiFactory.create(this)),l.ModuleManager.has(c.ModuleName.EngineBitmovin)&&(this.OE=new(l.ModuleManager.get(c.ModuleName.EngineBitmovin).SegmentInfoService),this.PE=new(l.ModuleManager.get(c.ModuleName.EngineBitmovin).SegmentPrefetchingService),this.QE=new(l.ModuleManager.get(c.ModuleName.EngineBitmovin).AdRestorationOptimizationService),this.RE=new(l.ModuleManager.get(c.ModuleName.EngineBitmovin).ManifestCachingService)),this.WF()},e.prototype.WF=function(){this.CD=new Map,this.CD.set(u.DROPPED_VIDEO_FRAMES,0),this.CD.set(u.TOTAL_STALLED_TIME,0)},e.prototype.XF=function(e,t){this.CD.has(e)&&this.CD.set(e,this.CD.get(e)+t)},e.prototype.iG=function(e,t,n){return this.CD.get(e)+(t?n:0)},e.prototype.kG=function(e){var t=e.getActiveAdBreak(),n=e.list().filter((function(e){return e.scheduleTime===t.scheduleTime}));[t].concat(n).forEach((function(t){return e.discardAdBreak(t.id)}))},e.prototype.updateCallback=function(e){},e.prototype.onFullscreenEnter=function(){},e.prototype.onFullscreenExit=function(){},e.prototype.getViewMode=function(){return this.UD?(0,Y.getPlayerState)(this.UD.store.getState()).viewMode:D.ViewMode.Inline},e.prototype.isViewModeAvailable=function(e){var t;return this.XE()?Boolean(null===(t=this.rD)||void 0===t?void 0:t.isViewModeAvailable(e)):[D.ViewMode.Fullscreen,D.ViewMode.Inline].includes(e)},e.prototype.setViewMode=function(e,t){void 0===t&&(t={}),this.rD&&this.rD.setViewMode(e,t)},e.prototype.addExternalEventFilter=function(e){this.kD&&this.kD.addExternalEventFilter(e)},e.prototype.removeExternalEventFilter=function(e){this.kD&&this.kD.removeExternalEventFilter(e)},e.prototype.getSource=function(){return this.ZD},e.prototype.getLoadOptions=function(){var e;return this.XE()&&(null===(e=this.YD)||void 0===e?void 0:e.loadOptions)||null},e.prototype.hasCurrentSourcePlayedOnce=function(){return this.pD!==s.NONE},e.prototype.oG=function(e){var t=this.isMuted()?s.MUTED_PLAY:s.UNMUTED_PLAY;return t>e?t:e},e.prototype.pG=function(e,t){if(this.UD&&l.ModuleManager.has(c.ModuleName.ABR))for(var n=l.ModuleManager.get(c.ModuleName.ABR).AdaptationUtils,r=de(e)?0:n.getStartupBitrateFromConfig(this.UD),i=this.UD.serviceManager.get(g.ServiceName.SourceStoreService,t),o=0,a=Object.values(ee.MimeType);o<a.length;o++){var s=a[o];i.dispatch((0,j.setPreferredBitrateForMimeTypeAction)(s,r))}},e.prototype.qG=function(e){var t;if(!de(e)&&l.ModuleManager.has(c.ModuleName.SGAI)&&this.UD.settings.ENABLE_SGAI_HANDLING){if(!this.UD.serviceManager.has(g.ServiceName.SgaiService)){var n=l.ModuleManager.get(c.ModuleName.SGAI);this.UD.serviceManager.set(g.ServiceName.SgaiService,new n.SgaiService(this.UD))}null===(t=pe(this.UD))||void 0===t||t.initialize()}},e}(),function(){var t="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;n=[(0,R.trackPerformance)("InternalPlayer.load")],se=[(0,R.trackPerformance)("InternalPlayer.destroy")],o(e,null,n,{kind:"method",name:"load",static:!1,private:!1,access:{has:function(e){return"load"in e},get:function(e){return e.load}},metadata:t},null,fe),o(e,null,se,{kind:"method",name:"destroy",static:!1,private:!1,access:{has:function(e){return"destroy"in e},get:function(e){return e.destroy}},metadata:t},null,fe),t&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:t})}(),e}();function ue(e){return null!=e&&"isCastAvailable"in e}function le(e){return"api"===e||e===T.UI_SEEK_ISSUER_NAME}function ce(e){[g.ServiceName.MetadataParsedService,g.ServiceName.StartOffsetService,g.ServiceName.PlayerStateService,g.ServiceName.StallTimeTrackerService,g.ServiceName.ThumbnailService].forEach((function(t){return(0,E.disposeService)(e.serviceManager,t)}))}function de(e){return e===T.ADVERTISING_ISSUER_NAME||e===T.ADVERTISING_RESTORE_ISSUER_NAME}function pe(e){var t;return null===(t=null==e?void 0:e.serviceManager)||void 0===t?void 0:t.get(g.ServiceName.SgaiService)}t.InternalPlayer=se},29960:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0})},30012:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initialStartOptions=void 0,t.initializeStartTimeOffset=function(){return o(t.initialStartOptions.startTimeOffset)},t.setStartTimeOffset=o;var r=n(35267),i=n(25934);function o(e){return(0,r.createAction)(i.StartOptionsActionKey.SetStartTimeOffset,{startTimeOffset:e})}t.initialStartOptions={startTimeOffset:0}},32027:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReachableDomainsActionType=void 0,function(e){e.AddDomain="adddomain"}(n||(t.ReachableDomainsActionType=n={}))},32485:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TimeMetadataHandler=t.TimedMetadataType=void 0,t.isSegmentBoundMetadata=c;var i,o=n(3714),a=n(86897),s=n(15971),u=n(34851),l=n(80438);function c(e){return[i.InBand,i.SegmentPlayback,i.CustomTag].includes(e)}!function(e){e.InBand="inband",e.SegmentPlayback="segmentPlayback",e.Manifest="manifest",e.EventStream="eventStream",e.DateRange="dateRange",e.CustomTag="customTag"}(i||(t.TimedMetadataType=i={}));var d=function(){function e(e,t){var n=this;this.VZ=function(e){var t,r,i;if(null!=(null===(t=null==e?void 0:e.content)||void 0===t?void 0:t.eventType))return null===(i=(r=n.SZ)[e.content.eventType])||void 0===i?void 0:i.call(r,e.content)},this.QZ=e,this.SZ=t,this.TZ()}return e.prototype.TZ=function(){for(var e in this.RZ={},this.SZ)this.SZ.hasOwnProperty(e)&&(this.RZ[e]="dateRange"===e?new u.MetadataTimeline(this.QZ,{onCueEnter:this.VZ}):new l.Timeline(this.QZ,{onCueEnter:this.VZ,allowDuplicates:e===i.SegmentPlayback}),this.RZ[e].show())},e.prototype.UZ=function(e,t){var n=(0,a.getBufferState)((0,s.getSourceState)(this.QZ)),r=(0,a.getBufferStartTime)(null==n?void 0:n.bufferStateMap);e.removeMatchingCues((function(e){return e.start<=t&&e.end<=t+1&&e.end<=r}))},e.prototype.add=function(e,t,n){if(this.SZ.hasOwnProperty(e)){var a=this.RZ[e],s=t+1;e===i.SegmentPlayback&&function(e){return e.metadata&&e.metadata.event&&e.metadata.representationId}(n)&&"event"in n.metadata&&"duration"in n.metadata.event?s=t+n.metadata.event.duration:function(e){return e.metadataType===o.MetadataType.DATERANGE}(n)&&(s=!0===n.metadata.endOnNext&&void 0===n.end?1/0:n.start===n.end?n.end+1:n.end),c(e)&&this.UZ(a,t);var u=r({eventType:e},n);a.addCue(t,s,u)}},e.prototype.reset=function(e){if(e&&this.SZ.hasOwnProperty(e))this.RZ[e].removeCues();else for(var t in this.SZ)this.SZ.hasOwnProperty(t)&&this.RZ[t].removeCues()},e.prototype.removeMatchingCues=function(e,t){this.RZ[e].removeMatchingCues(t)},e.prototype.removeUntil=function(e){var t=this;Object.keys(this.RZ).forEach((function(n){t.RZ[n].removeCuesUntil(e)}))},e.prototype.dispose=function(){for(var e in this.RZ)this.RZ.hasOwnProperty(e)&&(this.RZ[e].dispose(),this.RZ[e]=null);this.RZ=null},e.prototype.getTimeline=function(e){if(this.RZ)return this.RZ[e]},e}();t.TimeMetadataHandler=d},32703:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getDateRangeEvent=i,t.nextDateRangeWithSameClass=o,t.extractDateRangeMetadata=function(e,t,n){e.forEach((function(e,r,a){var s;e.endOnNext&&e.class&&(s=o(e,r,a));var u=i(e,t,s);n(u)}))};var r=n(89927);function i(e,t,n){var i={};return i.startTime=(0,r.toSeconds)(Date.parse(e.startDate)),e.endDate?i.endTime=(0,r.toSeconds)(Date.parse(e.endDate)):void 0===e.duration||isNaN(e.duration)?e.endOnNext&&n&&(i.endTime=(0,r.toSeconds)(Date.parse(n.startDate))):i.endTime=(0,r.toSeconds)(Date.parse(e.startDate))+e.duration,t&&(i.startTime-=t),i.endTime&&t&&(i.endTime-=t),i.data=e,i}function o(e,t,n){for(var r=t+1;r<n.length;r++)if(n[r].class&&n[r].class===e.class)return n[r]}},32886:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerType=void 0,function(e){e.Html5="html5",e.Native="native",e.WebRtc="webrtc",e.Unknown="unknown"}(n||(t.PlayerType=n={}))},33436:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MetricsActionType=t.MetricType=void 0,function(e){e.DownloadTime="downloadtime",e.DecryptionTime="decryptiontime",e.TransmuxingTime="transmuxingtime",e.ProcessingTime="processingtime",e.DownloadSuccess="downloadsuccess",e.RequestedRepresentations="requestedrepresentations",e.DownloadedRepresentation="downloadedrepresentation",e.DownloadedAdaptationSet="downloadedadaptationset",e.DownloadInformation="downloadinformation",e.SegmentInformation="segmentinformation",e.ChunkedDownloadInformation="chunkeddownloadinformation",e.StalledSeconds="stalledseconds",e.StartTime="starttime",e.StartupTimeSeconds="startuptime",e.CachedInitSegments="cachedinitsegments"}(n||(t.MetricType=n={})),function(e){e.InitializeMetricsForMimeType="@instance/metrics/initializemetricsformimetype",e.RemoveMetricsForMimeType="@instance/metrics/removemetricsformimetype",e.AddMetricsValue="@instance/metrics/addmetricsvalue",e.RemoveMetricsValue="@instance/metrics/removemetricsvalue",e.ClearMetricsHistory="@instance/metrics/clearMetricsHistory",e.SetBufferLogicActivationThreshold="@instance/metrics/setbufferlogicactivationthreshold"}(r||(t.MetricsActionType=r={}))},33468:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.KeySystemMap=t.KeySystemKind=void 0,t.keySystemUidToKind=function(e){return Object.keys(t.KeySystemMap).find((function(n){return t.KeySystemMap[n].includes(e)}))},t.getRelevantKeySystemMap=function(e){var n,i=((n={})[r.FAIRPLAY]=[],n[r.PLAYREADY]=[],n[r.PRIMETIME]=[],n[r.WIDEVINE]=[],n[r.TVKEY]=[],n);return Object.keys(r).forEach((function(n){var o=r[n];e[o]&&(i[o]=t.KeySystemMap[o])})),i},function(e){e.FAIRPLAY="fairplay",e.PLAYREADY="playready",e.PRIMETIME="primetime",e.WIDEVINE="widevine",e.TVKEY="tvkey"}(r||(t.KeySystemKind=r={})),t.KeySystemMap=((n={})[r.FAIRPLAY]=["com.apple.fairplay","com.apple.fps.1_0","com.apple.fps.2_0","com.apple.fps.3_0"],n[r.PLAYREADY]=["com.youtube.playready","com.microsoft.playready","com.microsoft.playready.recommendation","com.microsoft.playready.recommendation.3000"],n[r.PRIMETIME]=["com.adobe.primetime","com.adobe.access"],n[r.WIDEVINE]=["com.widevine.alpha","com.widevine.alpha.experiment"],n[r.TVKEY]=["com.tvkey.drm"],n)},34047:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.CodecStringHelper=t.HEVC_CODEC_TAGS=t.AVC_CODEC_TAGS=void 0,t.isAVMuxedTogether=function(e){return!!e&&e.indexOf(",")>-1},t.assembleHvcCodecString=function(e,t){if(!t)return null;for(var n=r([],t.general_constraint_indicator_flags_bytes,!0);0===n[n.length-1];)n.pop();var i=n.map((function(e){return e.toString(16).toUpperCase()}));return r([e,"".concat(["","A","B","C"][t.general_profile_space]).concat(t.general_profile_idc),"".concat(t.general_profile_compatibility_flags),"".concat(0===t.general_tier_flag?"L":"H").concat(t.general_level_idc)],i,!0).join(".")},t.getMediaTypeFromCodec=function(e){return a.isVideoCodec(e)?i.MediaType.Video:a.isAudioCodec(e)?i.MediaType.Audio:a.isSubtitleCodec(e)?i.MediaType.Subtitles:void 0},t.getCodecTag=function(e){var t=e.getCodec();return(null==t?void 0:t.slice(0,3))||""};var i=n(44468),o=n(84568);t.AVC_CODEC_TAGS=["avc"],t.HEVC_CODEC_TAGS=["hev","hvc"];var a=function(){function e(){}return e.hasOldAvc1CodecFormat=function(t){return e.unsupportedCodecStringFormatRegex.test(t)},e.convertAvc1ToAvcotiCodecFormat=function(e){var t,n=e.split(".");return n.length>2?(t=n.shift()+".",t+=parseInt(n.shift()).toString(16),t+=("000"+parseInt(n.shift()).toString(16)).slice(-4)):t=e,t},e.isSupportedByRenderer=function(e,t,n){return e.isMediaTypeSupported(t,n)},e.getExtractedCodecStrings=function(t){return e.memoizedExtractCodecStrings||(e.memoizedExtractCodecStrings=(0,o.memoize)(s)),e.memoizedExtractCodecStrings(t)},e.getMimeTypeForCodecString=function(t){if(!t)return"unknown";for(var n=0,r=e.mimeTypeOrder;n<r.length;n++){var i=r[n];if(e.mimeTypeMap[i].find((function(e){return t.indexOf(e)>-1})))return i}return"unknown"},e.addCodec=function(t,n){var r;e.mimeTypeMap[t].push(n),null===(r=e.memoizedExtractCodecStrings)||void 0===r||r.invalidate()},e.canSwitchBetweenAudioCodecs=function(e,t){return e===t||[["mp4a.40.2","mp4a.40.5"],["ac-3","mp4a.a5","mp4a.A5"],["ec-3","mp4a.a6","mp4a.A6"]].some((function(n){return n.includes(e)&&n.includes(t)}))},e.extractCodec=function(e){return e?e.split(".")[0]:null},e.isVideoCodec=function(t){return"video"===e.getMimeTypeForCodecString(t)},e.isAudioCodec=function(t){return"audio"===e.getMimeTypeForCodecString(t)},e.isSubtitleCodec=function(t){return"application"===e.getMimeTypeForCodecString(t)},e.unsupportedCodecStringFormatRegex=new RegExp("^avc1.[0-9]{2,3}.[0-9]{2,3}$"),e.mimeTypeOrder=["video","audio","application"],e.mimeTypeMap={video:["avc","hvc","hev","mp4v","svc","mvc","av1","av01","vp8","vp9","dvh1","dvhe","dvav","dva1","vvc","vvi"],audio:["mp4a","mp3","opus","vorbis","speex","flac","samr","ac-3","ec-3","ac-4","ec-4"],application:["stpp","wvtt","vtt"]},e}();function s(e){return e||"string"==typeof e?e.split(",").reduce((function(e,t){return t=t.trim(),e[a.getMimeTypeForCodecString(t)]=t,e}),{}):{}}t.CodecStringHelper=a},34841:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Deferred=void 0;var n=function(){function e(){var e=this;this.yH="pending",this.vH=new Promise((function(t,n){e.wH=function(n){return e.yH="resolved",t(n)},e.xH=function(t){return e.yH="rejected",n(t)}}))}return Object.defineProperty(e.prototype,"hasSettled",{get:function(){return"pending"!==this.yH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"promise",{get:function(){return this.vH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"resolve",{get:function(){return this.wH},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"reject",{get:function(){return this.xH},enumerable:!1,configurable:!0}),e}();t.Deferred=n},34851:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataTimeline=void 0;var o=n(3714),a=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r(t,e),t.prototype.addCue=function(t,n,r){var a,s;if(!isNaN(t)&&!isNaN(n)&&r){var u=this.q9(r.metadata,this.cues);if(-1===u)e.prototype.addCue.call(this,t,n,r);else{var l=this.q9(r.metadata,this.activeCues);if(this.r9(u,l,{start:t+this.timestampOffset,end:n+this.timestampOffset,content:r,updates:i([],this.cues[u].updates,!0)}),-1!==l){var c={metadataType:r.metadataType,metadata:r.metadata,data:r.metadata,start:null!==(a=r.start)&&void 0!==a?a:t,end:null!==(s=r.end)&&void 0!==s?s:n};this.context.eventHandler.dispatchEvent(o.PlayerEvent.MetadataChanged,c)}}}},t.prototype.q9=function(e,t){return t.findIndex((function(t){return t.content.metadata.id===e.id}))},t.prototype.r9=function(e,t,n){-1!==e&&this.cues.splice(e,1,n),-1!==t&&this.activeCues.splice(t,1,n)},t}(n(80438).Timeline);t.MetadataTimeline=a},35267:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=function(e,t){return{type:e,meta:{},payload:t}}},37007:function(e){"use strict";var t,n="object"==typeof Reflect?Reflect:null,r=n&&"function"==typeof n.apply?n.apply:function(e,t,n){return Function.prototype.apply.call(e,t,n)};t=n&&"function"==typeof n.ownKeys?n.ownKeys:Object.getOwnPropertySymbols?function(e){return Object.getOwnPropertyNames(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.getOwnPropertyNames(e)};var i=Number.isNaN||function(e){return e!=e};function o(){o.init.call(this)}e.exports=o,e.exports.once=function(e,t){return new Promise((function(n,r){function i(n){e.removeListener(t,o),r(n)}function o(){"function"==typeof e.removeListener&&e.removeListener("error",i),n([].slice.call(arguments))}y(e,t,o,{once:!0}),"error"!==t&&function(e,t){"function"==typeof e.on&&y(e,"error",t,{once:!0})}(e,i)}))},o.EventEmitter=o,o.prototype._events=void 0,o.prototype._eventsCount=0,o.prototype._maxListeners=void 0;var a=10;function s(e){if("function"!=typeof e)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof e)}function u(e){return void 0===e._maxListeners?o.defaultMaxListeners:e._maxListeners}function l(e,t,n,r){var i,o,a;if(s(n),void 0===(o=e._events)?(o=e._events=Object.create(null),e._eventsCount=0):(void 0!==o.newListener&&(e.emit("newListener",t,n.listener?n.listener:n),o=e._events),a=o[t]),void 0===a)a=o[t]=n,++e._eventsCount;else if("function"==typeof a?a=o[t]=r?[n,a]:[a,n]:r?a.unshift(n):a.push(n),(i=u(e))>0&&a.length>i&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(t)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=e,l.type=t,l.count=a.length,function(e){console&&console.warn&&console.warn(e)}(l)}return e}function c(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function d(e,t,n){var r={fired:!1,wrapFn:void 0,target:e,type:t,listener:n},i=c.bind(r);return i.listener=n,r.wrapFn=i,i}function p(e,t,n){var r=e._events;if(void 0===r)return[];var i=r[t];return void 0===i?[]:"function"==typeof i?n?[i.listener||i]:[i]:n?function(e){for(var t=new Array(e.length),n=0;n<t.length;++n)t[n]=e[n].listener||e[n];return t}(i):h(i,i.length)}function f(e){var t=this._events;if(void 0!==t){var n=t[e];if("function"==typeof n)return 1;if(void 0!==n)return n.length}return 0}function h(e,t){for(var n=new Array(t),r=0;r<t;++r)n[r]=e[r];return n}function y(e,t,n,r){if("function"==typeof e.on)r.once?e.once(t,n):e.on(t,n);else{if("function"!=typeof e.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof e);e.addEventListener(t,(function i(o){r.once&&e.removeEventListener(t,i),n(o)}))}}Object.defineProperty(o,"defaultMaxListeners",{enumerable:!0,get:function(){return a},set:function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+e+".");a=e}}),o.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},o.prototype.setMaxListeners=function(e){if("number"!=typeof e||e<0||i(e))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+e+".");return this._maxListeners=e,this},o.prototype.getMaxListeners=function(){return u(this)},o.prototype.emit=function(e){for(var t=[],n=1;n<arguments.length;n++)t.push(arguments[n]);var i="error"===e,o=this._events;if(void 0!==o)i=i&&void 0===o.error;else if(!i)return!1;if(i){var a;if(t.length>0&&(a=t[0]),a instanceof Error)throw a;var s=new Error("Unhandled error."+(a?" ("+a.message+")":""));throw s.context=a,s}var u=o[e];if(void 0===u)return!1;if("function"==typeof u)r(u,this,t);else{var l=u.length,c=h(u,l);for(n=0;n<l;++n)r(c[n],this,t)}return!0},o.prototype.addListener=function(e,t){return l(this,e,t,!1)},o.prototype.on=o.prototype.addListener,o.prototype.prependListener=function(e,t){return l(this,e,t,!0)},o.prototype.once=function(e,t){return s(t),this.on(e,d(this,e,t)),this},o.prototype.prependOnceListener=function(e,t){return s(t),this.prependListener(e,d(this,e,t)),this},o.prototype.removeListener=function(e,t){var n,r,i,o,a;if(s(t),void 0===(r=this._events))return this;if(void 0===(n=r[e]))return this;if(n===t||n.listener===t)0==--this._eventsCount?this._events=Object.create(null):(delete r[e],r.removeListener&&this.emit("removeListener",e,n.listener||t));else if("function"!=typeof n){for(i=-1,o=n.length-1;o>=0;o--)if(n[o]===t||n[o].listener===t){a=n[o].listener,i=o;break}if(i<0)return this;0===i?n.shift():function(e,t){for(;t+1<e.length;t++)e[t]=e[t+1];e.pop()}(n,i),1===n.length&&(r[e]=n[0]),void 0!==r.removeListener&&this.emit("removeListener",e,a||t)}return this},o.prototype.off=o.prototype.removeListener,o.prototype.removeAllListeners=function(e){var t,n,r;if(void 0===(n=this._events))return this;if(void 0===n.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==n[e]&&(0==--this._eventsCount?this._events=Object.create(null):delete n[e]),this;if(0===arguments.length){var i,o=Object.keys(n);for(r=0;r<o.length;++r)"removeListener"!==(i=o[r])&&this.removeAllListeners(i);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(t=n[e]))this.removeListener(e,t);else if(void 0!==t)for(r=t.length-1;r>=0;r--)this.removeListener(e,t[r]);return this},o.prototype.listeners=function(e){return p(this,e,!0)},o.prototype.rawListeners=function(e){return p(this,e,!1)},o.listenerCount=function(e,t){return"function"==typeof e.listenerCount?e.listenerCount(t):f.call(e,t)},o.prototype.listenerCount=f,o.prototype.eventNames=function(){return this._eventsCount>0?t(this._events):[]}},39541:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ReducerTree=void 0,t.isReducer=o,t.isReducerTree=function(e){return Boolean(e)&&e instanceof i};var r=n(91829),i=function(){function e(){this.o5={}}return e.prototype.has=function(e){return Boolean(this.o5[e])},e.prototype.set=function(e,t){return this.o5[e]=t,this},e.prototype.get=function(e){return this.o5[e]},e.prototype.delete=function(e){delete this.o5[e]},e.prototype.keys=function(){return Object.keys(this.o5)},e.prototype.p5=function(e){var t=this,n={};return this.keys().forEach((function(r){var i=t.get(r),a=e.concat(String(r));n[r]=o(i)?i:i.p5(a)})),0===Object.keys(n).length?function(e){return{}}:(0,r.combineReducers)(n)},e.prototype.buildReducer=function(){return this.p5([])},e}();function o(e){return Boolean(e)&&"function"==typeof e}t.ReducerTree=i},39564:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RendererActionType=void 0,function(e){e.SetMseObjectUrl="@instance/source/renderer/setmseobjecturl"}(n||(t.RendererActionType=n={}))},39980:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PerformanceMonitor=void 0;var r=n(89927),i=n(50025),o=function(){function e(e){this.context=e}return e.prototype.V3=function(e){return 0===e.length?(this.context.logger.warn("[PERFORMANCE] Mark was not found"),[{startTime:0,duration:0}]):e},e.prototype.W3=function(e){return this.V3(i.performanceWrapper.getEntriesByName(e))},e.prototype.addMarker=function(e){i.performanceWrapper.mark(e)},e.prototype.getElapsedTimeFrom=function(e){var t=this.W3(e);return(0,r.toSeconds)(i.performanceWrapper.now()-t[0].startTime)},e.prototype.clear=function(e){(function(){return Array.isArray(e)?e:Object.values(e)})().forEach((function(e){i.performanceWrapper.clearMarks(e)}))},e}();t.PerformanceMonitor=o},40306:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0,function(e){e[e.UNKNOWN=1e3]="UNKNOWN",e[e.API_NOT_AVAILABLE=1001]="API_NOT_AVAILABLE",e[e.SETUP_ERROR=1100]="SETUP_ERROR",e[e.SETUP_NO_HTML_ELEMENT=1101]="SETUP_NO_HTML_ELEMENT",e[e.SETUP_MISSING_CONFIGURATION=1102]="SETUP_MISSING_CONFIGURATION",e[e.SETUP_LICENSE_ERROR=1103]="SETUP_LICENSE_ERROR",e[e.SETUP_MISSING_DOMAIN_LICENSE_WHITELIST=1104]="SETUP_MISSING_DOMAIN_LICENSE_WHITELIST",e[e.SETUP_MISSING_DOMAIN_LICENSE_ALLOWLIST=1104]="SETUP_MISSING_DOMAIN_LICENSE_ALLOWLIST",e[e.SETUP_MISSING_LICENSE_WHITELIST=1105]="SETUP_MISSING_LICENSE_WHITELIST",e[e.SETUP_MISSING_LICENSE_ALLOWLIST=1105]="SETUP_MISSING_LICENSE_ALLOWLIST",e[e.SETUP_INVALID_LICENSE_SERVER=1106]="SETUP_INVALID_LICENSE_SERVER",e[e.SETUP_INVALID_IMPRESSION_SERVER=1107]="SETUP_INVALID_IMPRESSION_SERVER",e[e.SETUP_NO_RENDERING_ENGINE=1108]="SETUP_NO_RENDERING_ENGINE",e[e.SETUP_UNSUPPORTED_PROTOCOL=1113]="SETUP_UNSUPPORTED_PROTOCOL",e[e.SOURCE_ERROR=1200]="SOURCE_ERROR",e[e.SOURCE_INVALID=1201]="SOURCE_INVALID",e[e.SOURCE_MANIFEST_INVALID=1202]="SOURCE_MANIFEST_INVALID",e[e.SOURCE_NO_SUPPORTED_TECHNOLOGY=1203]="SOURCE_NO_SUPPORTED_TECHNOLOGY",e[e.SOURCE_STREAM_TYPE_NOT_SUPPORTED=1204]="SOURCE_STREAM_TYPE_NOT_SUPPORTED",e[e.SOURCE_FORCED_TECHNOLOGY_NOT_SUPPORTED=1205]="SOURCE_FORCED_TECHNOLOGY_NOT_SUPPORTED",e[e.SOURCE_NO_STREAM_FOUND_FOR_SUPPORTED_TECHNOLOGY=1206]="SOURCE_NO_STREAM_FOUND_FOR_SUPPORTED_TECHNOLOGY",e[e.SOURCE_EMPTY_SEGMENT=1207]="SOURCE_EMPTY_SEGMENT",e[e.SOURCE_COULD_NOT_LOAD_MANIFEST=1208]="SOURCE_COULD_NOT_LOAD_MANIFEST",e[e.SOURCE_PROGRESSIVE_STREAM_ERROR=1209]="SOURCE_PROGRESSIVE_STREAM_ERROR",e[e.SOURCE_HLS_STREAM_ERROR=1210]="SOURCE_HLS_STREAM_ERROR",e[e.SOURCE_ENCRYPTION_METHOD_NOT_SUPPORTED=1211]="SOURCE_ENCRYPTION_METHOD_NOT_SUPPORTED",e[e.SOURCE_INVALID_H264_CODEC=7043]="SOURCE_INVALID_H264_CODEC",e[e.PLAYBACK_ERROR=1300]="PLAYBACK_ERROR",e[e.PLAYBACK_VIDEO_DECODING_ERROR=1301]="PLAYBACK_VIDEO_DECODING_ERROR",e[e.PLAYBACK_HLS_COULD_NOT_LOAD_TRANSMUXER=1304]="PLAYBACK_HLS_COULD_NOT_LOAD_TRANSMUXER",e[e.NETWORK_ERROR=1400]="NETWORK_ERROR",e[e.NETWORK_MANIFEST_DOWNLOAD_TIMEOUT=1401]="NETWORK_MANIFEST_DOWNLOAD_TIMEOUT",e[e.NETWORK_SEGMENT_DOWNLOAD_TIMEOUT=1402]="NETWORK_SEGMENT_DOWNLOAD_TIMEOUT",e[e.NETWORK_PROGRESSIVE_STREAM_DOWNLOAD_TIMEOUT=1403]="NETWORK_PROGRESSIVE_STREAM_DOWNLOAD_TIMEOUT",e[e.NETWORK_FAILED_CERTIFICATE_REQUEST=1404]="NETWORK_FAILED_CERTIFICATE_REQUEST",e[e.DRM_ERROR=2e3]="DRM_ERROR",e[e.DRM_MISSING_CONFIGURATION=2001]="DRM_MISSING_CONFIGURATION",e[e.DRM_NO_LICENSE_SERVER_URL_PROVIDED=2002]="DRM_NO_LICENSE_SERVER_URL_PROVIDED",e[e.DRM_FAILED_LICENSE_REQUEST=2003]="DRM_FAILED_LICENSE_REQUEST",e[e.DRM_KEY_SIZE_NOT_SUPPORTED=2005]="DRM_KEY_SIZE_NOT_SUPPORTED",e[e.DRM_NO_KEY_SYSTEM=2006]="DRM_NO_KEY_SYSTEM",e[e.DRM_KEY_SESSION_INITIALIZATION_FAILED=2007]="DRM_KEY_SESSION_INITIALIZATION_FAILED",e[e.DRM_MEDIA_KEY_INITIALIZATION_FAILED=2008]="DRM_MEDIA_KEY_INITIALIZATION_FAILED",e[e.DRM_KEY_ERROR=2009]="DRM_KEY_ERROR",e[e.DRM_KEY_SYSTEM_NOT_SUPPORTED=2010]="DRM_KEY_SYSTEM_NOT_SUPPORTED",e[e.DRM_CERTIFICATE_ERROR=2011]="DRM_CERTIFICATE_ERROR",e[e.DRM_PLAYREADY_INVALID_HEADER_KEY_VALUE_PAIR=2012]="DRM_PLAYREADY_INVALID_HEADER_KEY_VALUE_PAIR",e[e.DRM_RESTRICTED_OUTPUT=2013]="DRM_RESTRICTED_OUTPUT",e[e.DRM_INIT_DATA_MISSING=2015]="DRM_INIT_DATA_MISSING",e[e.VR_ERROR=2100]="VR_ERROR",e[e.VR_INCOMPATIBLE_PLAYER_TECHNOLOGY=2101]="VR_INCOMPATIBLE_PLAYER_TECHNOLOGY",e[e.MODULE_ERROR=3e3]="MODULE_ERROR",e[e.MODULE_INVALID_DEFINITION=3001]="MODULE_INVALID_DEFINITION",e[e.MODULE_INVALID_DEFINITION_DEPENDENCY=3002]="MODULE_INVALID_DEFINITION_DEPENDENCY",e[e.MODULE_MISSING=3003]="MODULE_MISSING",e[e.MODULE_DEPENDENCY_MISSING=3004]="MODULE_DEPENDENCY_MISSING",e[e.MODULE_REMOVED=3005]="MODULE_REMOVED",e[e.MODULE_ADVERTISING_ERROR=3100]="MODULE_ADVERTISING_ERROR",e[e.SEGMENT_PSSH_DATA_MISSING=4e3]="SEGMENT_PSSH_DATA_MISSING"}(n||(t.ErrorCode=n={}))},41138:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoElementUtil=void 0;var n=function(){function e(){}return e.removeSource=function(e){for(e.setAttribute("src",""),e.removeAttribute("src");e.firstChild;)e.removeChild(e.firstChild)},e}();t.VideoElementUtil=n},43446:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TimingUtil=void 0;var r=n(89927),i=function(){function e(){}return e.getHiResTimestamp=function(){return window.performance&&"function"==typeof window.performance.now?(0,r.toSeconds)(window.performance.now()):(0,r.toSeconds)(Date.now())},e}();t.TimingUtil=i},43662:function(e,t,n){"use strict";var r=this&&this.__runInitializers||function(e,t,n){for(var r=arguments.length>2,i=0;i<t.length;i++)n=r?t[i].call(e,n):t[i].call(e);return r?n:void 0},i=this&&this.__esDecorate||function(e,t,n,r,i,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,u=r.kind,l="getter"===u?"get":"setter"===u?"set":"value",c=!t&&e?r.static?e:e.prototype:null,d=t||(c?Object.getOwnPropertyDescriptor(c,r.name):{}),p=!1,f=n.length-1;f>=0;f--){var h={};for(var y in r)h[y]="access"===y?{}:r[y];for(var y in r.access)h.access[y]=r.access[y];h.addInitializer=function(e){if(p)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var v=(0,n[f])("accessor"===u?{get:d.get,set:d.set}:d[l],h);if("accessor"===u){if(void 0===v)continue;if(null===v||"object"!=typeof v)throw new TypeError("Object expected");(s=a(v.get))&&(d.get=s),(s=a(v.set))&&(d.set=s),(s=a(v.init))&&i.unshift(s)}else(s=a(v))&&("field"===u?i.unshift(s):d[l]=s)}c&&Object.defineProperty(c,r.name,d),p=!0};Object.defineProperty(t,"__esModule",{value:!0}),t.Player=void 0;var o,a=n(88052),s=n(40306),u=n(3336),l=n(45202),c=n(20213),d=n(88210),p=n(29691),f=n(69957),h=n(44468),y=n(70850),v=0;function E(){o||(o=new WeakMap)}function g(e,t){E();var n=o.get(e);if(!n)throw new h.PlayerAPINotAvailableError(t);return n}var m=function(){var e,t,n,m,S,_,b,T,P,A,O,M,R,D=[];return e=function(){function e(e,t){r(this,D),this.Nb(e,t)}return e.prototype.Nb=function(e,t){if(!(e instanceof HTMLElement))throw new u.PlayerError(s.ErrorCode.SETUP_NO_HTML_ELEMENT,void 0,"The player container must be an HTMLElement.");E();var n=new p.InternalPlayer(e,y.Util.generateUniqueId(),this);o.set(this,n),v++,n.setup(t)},Object.defineProperty(e.prototype,"version",{get:function(){return l.Environment.VERSION_NUMBER},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"vr",{get:function(){return g(this,"vr").getVR()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"buffer",{get:function(){return g(this,"buffer").bufferApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"lowlatency",{get:function(){return g(this,"lowlatency").lowLatencyApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"adaptation",{get:function(){return g(this,"adaptation").adaptationApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"subtitles",{get:function(){return g(this,"subtitles").subtitlesApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"manifest",{get:function(){return g(this,"manifest").manifestApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"drm",{get:function(){return g(this,"drm").drmApi},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"ads",{get:function(){return g(this,"ads")?o.get(this).getAds():null},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"analytics",{get:function(){return g(this,"analytics").analyticsApi},set:function(e){g(this,"analytics").analyticsApi=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exports",{get:function(){return c},enumerable:!1,configurable:!0}),e.prototype.on=function(e,t){g(this,"on").on(e,t)},e.prototype.addMetadata=function(e,t){return g(this,"addMetadata").addMetadata(e,t)},e.prototype.castStop=function(){g(this,"cast").castStop()},e.prototype.castVideo=function(){g(this,"castVideo").castVideo()},e.prototype.clearQueryParameters=function(){g(this,"clearQueryParameters").clearQueryParameters()},e.prototype.destroy=function(){var e=g(this,"destroy").destroy();return o.delete(this),v--,e},e.prototype.getAspectRatio=function(){return g(this,"getAspectRatio").getAspectRatio()},e.prototype.getAudio=function(){return g(this,"getAudio").getAudio()},e.prototype.getAudioBufferLength=function(){return g(this,"getAudioBufferLength").getAudioBufferLength()},e.prototype.getAudioQuality=function(){return g(this,"getAudioQuality").getAudioQuality()},e.prototype.getAvailableAudio=function(){return g(this,"getAvailableAudio").getAvailableAudio()},e.prototype.getAvailableAudioQualities=function(){return g(this,"getAvailableAudioQualities").getAvailableAudioQualities()},e.prototype.getAvailableSegments=function(){return g(this,"getAvailableSegments").getAvailableSegments()},e.prototype.getAvailableVideoQualities=function(){return g(this,"getAvailableVideoQualities").getAvailableVideoQualities()},e.prototype.getConfig=function(e){return g(this,"getConfig").getConfig(e)},e.prototype.getContainer=function(){return g(this,"getContainer").getContainer()},e.prototype.getCurrentTime=function(e){return void 0===e&&(e=h.TimeMode.AbsoluteTime),g(this,"getCurrentTime").getCurrentTime("api",e)},e.prototype.getDownloadedAudioData=function(){return g(this,"getDownloadedAudioData").getDownloadedAudioData()},e.prototype.getDownloadedVideoData=function(){return g(this,"getDownloadedVideoData").getDownloadedVideoData()},e.prototype.getDroppedVideoFrames=function(){return g(this,"getDroppedVideoFrames").getDroppedVideoFrames()},e.prototype.getDuration=function(){return g(this,"getDuration").getDuration()},e.prototype.getManifest=function(){return g(this,"getManifest").getManifest()},e.prototype.getMaxTimeShift=function(){return g(this,"getMaxTimeShift").getMaxTimeShift()},e.prototype.getPlaybackAudioData=function(){return g(this,"getPlaybackAudioData").getPlaybackAudioData()},e.prototype.getPlaybackSpeed=function(){return g(this,"getPlaybackSpeed").getPlaybackSpeed()},e.prototype.getPlaybackVideoData=function(){return g(this,"getPlaybackVideoData").getPlaybackVideoData()},e.prototype.getPlayerType=function(){return g(this,"getPlayerType").getPlayerType()},e.prototype.getSnapshot=function(e,t){return g(this,"getSnapshot").getSnapshot(e,t)},e.prototype.getStreamType=function(){return g(this,"getStreamType").getStreamType()},e.prototype.getSupportedDRM=function(){return g(this,"getSupportedDRM").getSupportedDRM()},e.prototype.getSupportedTech=function(e){return void 0===e&&(e=h.SupportedTechnologyMode.Platform),g(this,"getSupportedTech").getSupportedTech(e)},e.prototype.getThumbnail=function(e){return g(this,"getThumbnail").getThumbnail(e)},e.prototype.getTimeShift=function(){return g(this,"getTimeShift").getTimeShift()},e.prototype.getTotalStalledTime=function(){return g(this,"getTotalStalledTime").getTotalStalledTime()},e.prototype.getVideoBufferLength=function(){return g(this,"getVideoBufferLength").getVideoBufferLength()},e.prototype.getVideoQuality=function(){return g(this,"getVideoQuality").getVideoQuality()},e.prototype.getVolume=function(){return g(this,"getVolume").getVolume()},e.prototype.hasEnded=function(){return g(this,"hasEnded").hasEnded()},e.prototype.isCastAvailable=function(){return g(this,"isCastAvailable").isCastAvailable()},e.prototype.isCasting=function(){return g(this,"isCasting").isCasting()},e.prototype.isDRMSupported=function(e){return g(this,"isDRMSupported").isDRMSupported(e)},e.prototype.isLive=function(){return g(this,"isLive").isLive()},e.prototype.isMuted=function(){return g(this,"isMuted").isMuted()},e.prototype.isPaused=function(){return g(this,"isPaused").isPaused()},e.prototype.isPlaying=function(){return g(this,"isPlaying").isPlaying()},e.prototype.isStalled=function(){return g(this,"isStalled").isStalled()},e.prototype.load=function(e,t,n){return g(this,"load").load(e,t,{seeking:n})},e.prototype.mute=function(e){g(this,"mute").mute(e)},e.prototype.pause=function(e){g(this,"pause").pause(e)},e.prototype.play=function(e){return g(this,"play").play(e)},e.prototype.off=function(e,t){g(this,"off").off(e,t)},e.prototype.getSeekableRange=function(){return g(this,"getSeekableRange").getSeekableRange()},e.prototype.seek=function(e,t){return g(this,"seek").seek(e,t)},e.prototype.setAspectRatio=function(e){return g(this,"setAspectRatio").setAspectRatio(e)},e.prototype.setAudio=function(e){g(this,"setAudio").setAudio(e)},e.prototype.setAudioQuality=function(e){g(this,"setAudioQuality").setAudioQuality(e)},e.prototype.setAuthentication=function(e){g(this,"getPlayerInstance").setAuthentication(e)},e.prototype.setPlaybackSpeed=function(e){g(this,"setPlaybackSpeed").setPlaybackSpeed(e)},e.prototype.setPosterImage=function(e,t){g(this,"setPosterImage").setPosterImage(e,t)},e.prototype.setQueryParameters=function(e){g(this,"setQueryParameters").setQueryParameters(e)},e.prototype.setVideoElement=function(e){g(this,"setVideoElement").setVideoElement(e)},e.prototype.setVideoQuality=function(e){g(this,"setVideoQuality").setVideoQuality(e)},e.prototype.setVolume=function(e,t){g(this,"setVolume").setVolume(e,t)},e.prototype.setVRStereo=function(e){return g(this,"setVRStereo").setVRStereo(e)},e.prototype.timeShift=function(e,t){g(this,"timeShift").timeShift(e,t)},e.prototype.unload=function(){return g(this,"unload").unload()},e.prototype.unmute=function(e){g(this,"unmute").unmute(e)},e.prototype.isAirplayAvailable=function(){return g(this,"isAirplayAvailable").isAirplayAvailable()},e.prototype.isAirplayActive=function(){return g(this,"isAirplayActive").isAirplayActive()},e.prototype.showAirplayTargetPicker=function(){g(this,"showAirplayTargetPicker").showAirplayTargetPicker()},e.prototype.getBufferedRanges=function(){return g(this,"getBufferedRanges").getBufferedRanges()},e.prototype.preload=function(){g(this,"preload").preload()},e.prototype.setLogLevel=function(e){g(this,"setLogLevel").setLogLevel(e)},e.prototype.getVideoElement=function(){return g(this,"getVideoElement").getVideoElement()},e.prototype.getViewMode=function(){return g(this,"getViewMode").getViewMode()},e.prototype.isViewModeAvailable=function(e){return g(this,"isViewModeAvailable").isViewModeAvailable(e)},e.prototype.setViewMode=function(e,t){g(this,"setViewMode").setViewMode(e,t)},e.prototype.getSource=function(){return g(this,"getSource").getSource()},Object.defineProperty(e,"version",{get:function(){return l.Environment.VERSION_NUMBER},enumerable:!1,configurable:!0}),e.addModule=function(e){a.ModuleManager.add(e)},e.removeModule=function(e){if(v>0)throw new u.PlayerError(s.ErrorCode.MODULE_REMOVED,void 0,"Cannot remove module while player instances are active");a.ModuleManager.remove(e)},e.getModules=function(){return a.ModuleManager.getModuleNames()},e}(),function(){var r="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;t=[(0,f.trackPerformance)("Player.init")],n=[d.EnumerableValue],m=[d.EnumerableValue],S=[d.EnumerableValue],_=[d.EnumerableValue],b=[d.EnumerableValue],T=[d.EnumerableValue],P=[d.EnumerableValue],A=[d.EnumerableValue],O=[d.EnumerableValue],M=[d.EnumerableValue],R=[d.EnumerableValue],i(e,null,t,{kind:"method",name:"Nb",static:!1,private:!1,access:{has:function(e){return"Nb"in e},get:function(e){return e.Nb}},metadata:r},null,D),i(e,null,n,{kind:"getter",name:"version",static:!1,private:!1,access:{has:function(e){return"version"in e},get:function(e){return e.version}},metadata:r},null,D),i(e,null,m,{kind:"getter",name:"vr",static:!1,private:!1,access:{has:function(e){return"vr"in e},get:function(e){return e.vr}},metadata:r},null,D),i(e,null,S,{kind:"getter",name:"buffer",static:!1,private:!1,access:{has:function(e){return"buffer"in e},get:function(e){return e.buffer}},metadata:r},null,D),i(e,null,_,{kind:"getter",name:"lowlatency",static:!1,private:!1,access:{has:function(e){return"lowlatency"in e},get:function(e){return e.lowlatency}},metadata:r},null,D),i(e,null,b,{kind:"getter",name:"adaptation",static:!1,private:!1,access:{has:function(e){return"adaptation"in e},get:function(e){return e.adaptation}},metadata:r},null,D),i(e,null,T,{kind:"getter",name:"subtitles",static:!1,private:!1,access:{has:function(e){return"subtitles"in e},get:function(e){return e.subtitles}},metadata:r},null,D),i(e,null,P,{kind:"getter",name:"manifest",static:!1,private:!1,access:{has:function(e){return"manifest"in e},get:function(e){return e.manifest}},metadata:r},null,D),i(e,null,A,{kind:"getter",name:"drm",static:!1,private:!1,access:{has:function(e){return"drm"in e},get:function(e){return e.drm}},metadata:r},null,D),i(e,null,O,{kind:"getter",name:"ads",static:!1,private:!1,access:{has:function(e){return"ads"in e},get:function(e){return e.ads}},metadata:r},null,D),i(e,null,M,{kind:"getter",name:"analytics",static:!1,private:!1,access:{has:function(e){return"analytics"in e},get:function(e){return e.analytics}},metadata:r},null,D),i(e,null,R,{kind:"getter",name:"exports",static:!1,private:!1,access:{has:function(e){return"exports"in e},get:function(e){return e.exports}},metadata:r},null,D),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}(),e}();t.Player=m},43767:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FileLoader=void 0;var n=function(){function e(){this.nK={}}return e.getInstance=function(){return e.instance||(e.instance=new e),e.instance},e.prototype.loadScript=function(e,t){return void 0===t&&(t=!1),this.nK.hasOwnProperty(e)&&this.nK[e]||(t&&window.requirejs&&window.define?this.nK[e]=new Promise((function(t,n){window.requirejs([e],(function(e){t(e)}),(function(e){n(e)}))})):this.nK[e]=new Promise((function(t,n){var r=document.getElementsByTagName("head")[0]||document.documentElement,i=!1,o=document.createElement("script");o.type="text/javascript",o.src=e,o.async=!0,o.onload=o.onreadystatechange=function(){i||this.readyState&&"loaded"!==this.readyState&&"complete"!==this.readyState||(i=!0,o.onload=o.onreadystatechange=null,r&&o.parentNode&&r.removeChild(o),t(void 0))},o.onerror=n,r.insertBefore(o,r.firstChild)}))),this.nK[e]},e.prototype.removeScript=function(e,t){this.nK.hasOwnProperty(e)&&this.nK[e]&&delete this.nK[e];for(var n=document.head.getElementsByTagName("script"),r=0;r<n.length;r++)n[r].src.includes(t)&&document.head.removeChild(n[r])},e.prototype.loadCSS=function(e,t){for(var n,r=(null===(n=null==t?void 0:t.container)||void 0===n?void 0:n.call(t))||document.getElementsByTagName("head")[0]||document.documentElement,i=r.querySelectorAll("link"),o=0;o<i.length;o++){var a=i[o];if(a.hasAttribute("href")&&a.getAttribute("href").indexOf(e)>-1)return}var s=document.createElement("link");s.setAttribute("rel","stylesheet"),s.setAttribute("type","text/css"),s.setAttribute("href",e),r.insertBefore(s,r.firstChild),this.nK[e]=!0},e}();t.FileLoader=n},44468:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.TimeMode=t.SupportedTechnologyMode=t.ViewMode=t.PlayerAPINotAvailableError=t.LogLevel=t.BufferType=t.MediaType=t.StreamType=t.PlayerType=void 0;var i=n(40306),o=n(3336),a=n(32886);Object.defineProperty(t,"PlayerType",{enumerable:!0,get:function(){return a.PlayerType}});var s,u,l,c=n(65623);Object.defineProperty(t,"StreamType",{enumerable:!0,get:function(){return c.StreamType}}),function(e){e.Audio="audio",e.Video="video",e.Subtitles="subtitles",e.Thumbnails="thumbnails"}(s||(t.MediaType=s={})),function(e){e.ForwardDuration="forwardduration",e.BackwardDuration="backwardduration"}(u||(t.BufferType=u={})),function(e){e.DEBUG="debug",e.LOG="log",e.WARN="warn",e.ERROR="error",e.OFF="off"}(l||(t.LogLevel=l={}));var d,p,f,h=function(e){function t(t){return e.call(this,i.ErrorCode.API_NOT_AVAILABLE,void 0,"Cannot use the `player.".concat(t,"` API: the player has already been destroyed."))||this}return r(t,e),t}(o.PlayerError);t.PlayerAPINotAvailableError=h,function(e){e.Inline="inline",e.Fullscreen="fullscreen",e.PictureInPicture="pictureinpicture"}(d||(t.ViewMode=d={})),function(e){e.Platform="platform",e.Modules="modules",e.PlatformAndModules="platformandmodules"}(p||(t.SupportedTechnologyMode=p={})),function(e){e.RelativeTime="relativetime",e.AbsoluteTime="absolutetime"}(f||(t.TimeMode=f={}))},44991:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DrmReducer=void 0;var a=n(3793),s=n(48488),u=n(29682),l=(0,s.getInitialDrmState)();t.DrmReducer=(0,a.default)(l,((r={})[u.DrmActionType.SetManifestDrm]=function(e,t){var n=t.payload;return i(i({},e),n)},r[u.DrmActionType.ResetManifestDrm]=function(){return l},r[u.DrmActionType.TrackDrmKidError]=function(e,t){var n=t.payload;return e.keyIdsWithErrors.includes(n)?e:i(i({},e),{keyIdsWithErrors:o(o([],e.keyIdsWithErrors,!0),[n],!1)})},r[u.DrmActionType.ResetDrmKidErrors]=function(e){return e.keyIdsWithErrors.length>0?i(i({},e),{keyIdsWithErrors:[]}):e},r[u.DrmActionType.SetUsedKeySystem]=function(e,t){var n=t.payload;return i(i({},e),{usedKeySystem:n})},r[u.DrmActionType.ResetUsedKeySystem]=function(e,t){return i(i({},e),{usedKeySystem:{kind:null,uid:null}})},r))},45202:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Environment=void 0;var n=function(){function e(){}return Object.defineProperty(e,"hostname",{get:function(){return this._hostname||(this._hostname=location.hostname),this._hostname},set:function(e){this._hostname=e},enumerable:!1,configurable:!0}),Object.defineProperty(e,"baseUrl",{get:function(){return e.getURL()},enumerable:!1,configurable:!0}),e.checkDomainLock=function(){if(0===this.domains.length||"localhost"===this.hostname)return!0;for(var e=0,t=this.domains.split(",");e<t.length;e++){var n=t[e],r=n.substring(2),i=this.hostname.length-r.length,o=this.hostname.indexOf(r),a=-1!==o&&o===i,s=n.startsWith("*.")&&a;if(n===this.hostname||s)return!0}return!1},e.getURL=function(){var e=this.getCurrentScriptURL();return e.lastIndexOf("/")>-1?e.substring(0,e.lastIndexOf("/")+1):""},e.generateExceptionStack=function(){try{omgwtfnodocumentdotcurrentscript}catch(e){return e.stack}},e.getCurrentScriptFallback=function(){var e=this.generateExceptionStack();if(!e)return"";for(var t=-1!==e.indexOf(" at ")?" at ":"@";-1!==e.indexOf(t);)e=e.substring(e.indexOf(t)+t.length);var n=e.lastIndexOf(":",e.lastIndexOf(":")-1);return e.substring(e.indexOf("(")+1,n)},e.getCurrentScriptURL=function(){var e,t;if(null===(e=window.document)||void 0===e?void 0:e.currentScript){var n=window.document.currentScript.src;return n.indexOf("modules/bitmovinplayer-core.js")>-1?n.substring(0,n.lastIndexOf("modules/bitmovinplayer-core.js")):n}for(var i=(null===(t=window.document)||void 0===t?void 0:t.getElementsByTagName("script"))||[],o=i.length,a=0;a<o;a++)if(r(i[a])){if(i[a].src.indexOf("bitmovinplayer.js")>-1)return i[a].src;if(i[a].src.indexOf("modules/bitmovinplayer-core.js")>-1)return i[a].src.substring(0,i[a].src.indexOf("modules/bitmovinplayer-core.js"))}return this.getCurrentScriptFallback()||(i.length>0&&r(i[o-1])?i[o-1].src:"")},e.VERSION_NUMBER="8.235.0",e.idPrefix="bitmovinplayer-",e.domains="",e.modules={playerui:null},e}();function r(e){return e.hasAttribute("src")&&null!=e.src}t.Environment=n},46057:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.yieldToMain=function(){return new Promise((function(e){window.setTimeout(e)}))}},46151:function(e,t){"use strict";function n(e,t,n){return e[t]&&e[t].data[n]||[]}Object.defineProperty(t,"__esModule",{value:!0}),t.getMetricsHistoryFromInstanceState=t.getMetricsState=void 0,t.getMetricsHistory=n,t.getMetricsLastEntry=function(e,t,r){var i=n(e,t,r);return 0===i.length?{time:void 0,value:void 0}:i[i.length-1]},t.getMetricsState=function(e){return e.metrics},t.getMetricsHistoryFromInstanceState=function(e,r,i){return n((0,t.getMetricsState)(e),r,i)}},46922:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBackgroundPlaybackState=t.setMainContentPlaybackState=void 0;var r=n(35267),i=n(18192);t.setMainContentPlaybackState=function(e){return(0,r.createAction)(i.PlaybackActionType.SetMainContentPlaybackState,e)},t.setBackgroundPlaybackState=function(e){return(0,r.createAction)(i.PlaybackActionType.SetBackgroundPlaybackState,e)}},47602:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToRendererBufferChanges=function(e,t){var n=function(e){var t=e.getState(),n=(0,i.getBufferStateMap)(t);return void 0!==n?Object.keys(n):[]}(e).map((function(n){return(0,r.subscribe)(e)(function(e){return function(t){var n=(0,i.getBufferStateMap)(t);return n?(0,i.getRendererBufferedRanges)(n,e):[]}}(n),(function(e){return t(n,null!=e?e:[])}))}));return function(){return n.forEach((function(e){return e()}))}};var r=n(93204),i=n(86897)},47993:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.MSESafari=t.getBestTech=t.getTechSupportedByModules=t.getTechSupportedByPlatform=t.getTechSupportedByModulesOnPlatform=t.isLocalStorageAvailable=t.isInlinePlaybackRestricted=t.isFairPlayDrmSupported=t.supports=t.checkPlatformSupports=t.hasMediaSourceSupport=t.FairplayKeySystems=void 0,t.isUsingFileProtocol=function(){return"file:"===l.default.location.protocol},t.isFetchSupported=function(){return"function"==typeof l.default.fetch&&"function"==typeof l.default.AbortController};var i,o=n(88052),a=n(62756),s=n(44468),u=n(21513),l=n(4081),c=n(85434),d=n(15487);!function(e){e.FPS_1="com.apple.fps.1_0",e.FPS_2="com.apple.fps.2_0"}(i||(t.FairplayKeySystems=i={}));var p=[{player:s.PlayerType.Html5,streaming:s.StreamType.Dash},{player:s.PlayerType.Html5,streaming:s.StreamType.Hls},{player:s.PlayerType.Html5,streaming:s.StreamType.Smooth},{player:s.PlayerType.WebRtc,streaming:s.StreamType.Whep},{player:s.PlayerType.Native,streaming:s.StreamType.Hls},{player:s.PlayerType.Native,streaming:s.StreamType.Progressive}],f=Boolean(l.default.ArrayBuffer&&l.default.Uint8Array&&l.default.Uint16Array);t.hasMediaSourceSupport=function(){var e,t,n,r="MediaSource"in l.default&&"function"==typeof(null===(e=l.default.MediaSource)||void 0===e?void 0:e.isTypeSupported),i="WebKitMediaSource"in l.default&&"function"==typeof(null===(t=l.default.WebKitMediaSource)||void 0===t?void 0:t.isTypeSupported),o="ManagedMediaSource"in l.default&&"function"==typeof(null===(n=l.default.ManagedMediaSource)||void 0===n?void 0:n.isTypeSupported);return r||i||o};t.checkPlatformSupports=function(){var e=[];if(f?e=p.filter((function(e){return(0,t.supports)(e.player,e.streaming)})):e.push({player:s.PlayerType.Native,streaming:s.StreamType.Progressive}),(0,d.isSafari)())for(var n=1;n<e.length;n++)if(e[n].player===s.PlayerType.Native&&e[n].streaming===s.StreamType.Hls){e=e.splice(n,1).concat(e);break}return e},t.supports=function(e,n){var r=(0,t.hasMediaSourceSupport)()?[s.StreamType.Dash,s.StreamType.Hls,s.StreamType.Smooth]:[],i=function(){var e=l.default.RTCPeerConnection,t=Boolean(e)&&"function"==typeof e.prototype.addTransceiver;return function(){var e,t,n,r,i;return Boolean(null!==(i=null!==(r=null!==(n=null!==(t=null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia)&&void 0!==t?t:navigator.getUserMedia)&&void 0!==n?n:navigator.webkitGetUserMedia)&&void 0!==r?r:navigator.mozGetUserMedia)&&void 0!==i?i:navigator.msGetUserMedia)}()&&t}()?[s.StreamType.Whep]:[],o=function(e){return e.some((function(e){return e===n}))};switch(e){case s.PlayerType.Html5:return o(r);case s.PlayerType.WebRtc:return o(i);case s.PlayerType.Native:return o(function(){var e=[];return function(){var e=document.createElement("video");return e&&"function"==typeof e.canPlayType&&("maybe"===e.canPlayType("application/vnd.apple.mpegURL")||"maybe"===e.canPlayType("application/x-mpegURL")||"maybe"===e.canPlayType("audio/mpegurl")||"maybe"===e.canPlayType("audio/x-mpegurl"))}()&&!(0,d.isEdge)()&&e.push(s.StreamType.Hls),function(){return"function"==typeof document.createElement("video").canPlayType}()&&e.push(s.StreamType.Progressive),e}());default:return!1}},t.isFairPlayDrmSupported=function(){return Object.values(i).some((function(e){var t;return null===(t=l.default.WebKitMediaKeys)||void 0===t?void 0:t.isTypeSupported(e,c.MimeType.VideoMp4)}))},t.isInlinePlaybackRestricted=function(){var e=(0,d.getIOSVersion)(),t=e<d.IOS_9&&/iPad/i.test(navigator.userAgent),n=e<d.IOS_10&&/iP(hone|od)/i.test(navigator.userAgent);return d.isSafariIOS&&(t||n)},t.isLocalStorageAvailable=function(){try{return l.default.localStorage&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem}catch(e){return!1}},t.getTechSupportedByModulesOnPlatform=function(){var e=(0,t.getTechSupportedByModules)();return(0,t.getTechSupportedByPlatform)().filter((function(t){return e.filter((function(e){return function(e,t){return e.player===t.player&&e.streaming===t.streaming}(e,t)})).length>0}))},t.getTechSupportedByPlatform=function(){return(0,t.checkPlatformSupports)()},t.getTechSupportedByModules=function(){var e=o.ModuleManager.has(a.ModuleName.EngineBitmovin)?o.ModuleManager.get(a.ModuleName.EngineBitmovin).technologyChecker.getSupportedTechnologies():[],t=o.ModuleManager.has(a.ModuleName.EngineNative)?o.ModuleManager.get(a.ModuleName.EngineNative).technologyChecker.getSupportedTechnologies():[],n=o.ModuleManager.has(a.ModuleName.EngineWebRtc)?o.ModuleManager.get(a.ModuleName.EngineWebRtc).technologyChecker.getSupportedTechnologies():[];return r(r(r([],e,!0),t,!0),n,!0)},t.getBestTech=function(e,t,n){void 0===e&&(e=[]),void 0===t&&(t={});var i=(0,u.getCapabilities)(),o=function(e){var t=(0,u.getCapabilities)(),n=r([],t.techSupportedByPlatform,!0);if(!e||0===e.length)return n;var i=e.filter((function(e){return n.some((function(t,r){var i,o=e.player===t.player&&e.streaming===t.streaming,a=null!==(i=e.exclude)&&void 0!==i&&i;return o&&n.splice(r,1),o&&!a}))})).map((function(e){return{player:e.player,streaming:e.streaming}}));return r(r([],i,!0),n,!0)}(e),a=i.techSupportedByPlatform;return n&&(o=a.filter((function(e){return e.player===n.player&&e.streaming===n.streaming}))),(t.vr&&((0,d.isSafariIOS)()||(0,d.isSafari)())?o.filter((function(e){var t=e.streaming===s.StreamType.Progressive&&e.player===s.PlayerType.Native,n=e.streaming===s.StreamType.Hls&&e.player===s.PlayerType.Native;return t||n&&(!(0,d.isSafariIOS)()||(0,d.getIOSVersion)()>d.IOS_9)})):o).find((function(e){return Boolean(t[e.streaming])}))},t.MSESafari=function(){return(0,d.isSafari)()&&(0,t.hasMediaSourceSupport)()}},48143:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceManager=void 0,t.disposeService=function(e,t,n){void 0===n&&(n=i);var r=e.get(t,n);r&&(r.dispose(),e.set(t,null,n))};var r=n(80813),i="player-scoped",o=function(){function e(){this.Ey={},this.Fy=new WeakMap}return e.prototype.has=function(e,t){return void 0===t&&(t=i),Boolean(this.get(e,t))},e.prototype.get=function(e,t){if(void 0===t&&(t=i),this.Ey[t])return this.Ey[t][e]},e.prototype.set=function(e,t,n){void 0===n&&(n=i),this.Ey[n]||(this.Ey[n]={}),this.Ey[n][e]=t,t&&this.Fy.set(t,n)},e.prototype.getScope=function(e){return this.Fy.get(e)},e.prototype.delete=function(e,t){void 0===t&&(t=i),this.Ey[t]&&this.Ey[t][e]&&(this.Fy.delete(this.Ey[t][e]),this.Ey[t][e].dispose(),delete this.Ey[t][e])},e.prototype.maybeCall=function(e,t,n,r){void 0===n&&(n=null),void 0===r&&(r=i);var o=this.get(e,r);return o?t(o):n},e.prototype.dispose=function(){Object.values(this.Ey).forEach((function(e){a(e).forEach((function(t){e[t].dispose()}))})),this.Ey={},delete this.Fy},e.prototype.removeNonPlayerScopeServices=function(){var e=this;Object.keys(this.Ey).filter((function(e){return e!==i})).forEach((function(t){a(e.Ey[t]).forEach((function(n){e.delete(n,t)})),delete e.Ey[t]}))},e}();function a(e){return Object.keys(e).sort((function(e){return e!==r.ServiceName.SourceStoreService?-1:1})).filter((function(t){return Boolean(e[t])}))}t.ServiceManager=o},48488:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialDrmState=void 0,t.setManifestDrm=function(e){return(0,r.createAction)(i.DrmActionType.SetManifestDrm,e)},t.resetManifestDrm=function(){return(0,r.createAction)(i.DrmActionType.ResetManifestDrm)},t.trackDrmKidError=function(e){return(0,r.createAction)(i.DrmActionType.TrackDrmKidError,e)},t.resetDrmKidErrors=function(){return(0,r.createAction)(i.DrmActionType.ResetDrmKidErrors)},t.setUsedKeySystem=function(e){return(0,r.createAction)(i.DrmActionType.SetUsedKeySystem,e)},t.resetUsedKeySystem=function(){return(0,r.createAction)(i.DrmActionType.ResetUsedKeySystem)};var r=n(35267),i=n(29682);t.getInitialDrmState=function(){return{keyIdsWithErrors:[],usedKeySystem:{kind:null,uid:null}}}},48557:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlaybackReducer=void 0;var o=n(3793),a=n(18192);t.PlaybackReducer=(0,o.default)({kind:a.PlaybackKind.MainContent},((r={})[a.PlaybackActionType.SetMainContentPlaybackState]=function(e,t){return function(e,t){return i({},t)}(0,t.payload)},r[a.PlaybackActionType.SetBackgroundPlaybackState]=function(e,t){return function(e,t){return i(i({},e),t)}(e,t.payload)},r))},48669:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Comparators=void 0;var n=function(){function e(){}return e.boolean=function(e,t){return e===t?0:e?1:-1},e.reverseBoolean=function(t,n){return e.boolean(n,t)},e}();t.Comparators=n},48774:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.devToolsExtension=void 0;var r=n(4081);t.devToolsExtension=r.default.__REDUX_DEVTOOLS_EXTENSION__},49859:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getAdaptationState=function(e){return e.adaptation},t.getPreferredBitrate=function(e,t){return e[t]?e[t].preferredBitrate:void 0}},50025:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.performanceWrapper=t.resolvePerformanceApi=t.requiredMethodNames=void 0;var r=n(13053);t.requiredMethodNames=["now","mark","measure","getEntriesByName","getEntriesByType","clearMarks","clearMeasures"],t.resolvePerformanceApi=function(e){return function(e,t){return t.every((function(t){return"function"==typeof e[t]}))}(e.performance,t.requiredMethodNames)?e.performance:(0,r.getPerformanceShim)()},t.performanceWrapper=(0,t.resolvePerformanceApi)(window)},50172:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataParsedService=void 0;var r=n(3714),i=n(58735),o=n(89927),a=function(){function e(e){this.ZZ=1.3,this.WZ=e.eventHandler,this.WZ.on(r.PlayerEvent.SourceUnloaded,this.aZ),this.aZ()}return e.prototype.aZ=function(){this.YZ={},this.XZ=1/0},e.prototype.addMetadata=function(e,t){if(this.bZ(),[r.MetadataType.EVENT_STREAM,r.MetadataType.DATERANGE].includes(t.metadataType)){var n=(0,i.calculateMetadataHash)(t,e);if(this.YZ[n])return;this.YZ[n]=Date.now()}this.WZ.dispatchEvent(r.PlayerEvent.MetadataParsed,t)},e.prototype.bZ=function(){for(var e=0,t=Object.keys(this.YZ);e<t.length;e++){var n=t[e];this.cZ(this.YZ[n])&&delete this.YZ[n]}},e.prototype.cZ=function(e){if(!e)return!0;var t=(0,o.toMilliSeconds)(this.XZ*this.ZZ);return Date.now()-t>e},Object.defineProperty(e.prototype,"expirationTimeInSeconds",{get:function(){return this.XZ},set:function(e){this.XZ=Math.abs(e)},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.YZ=null,this.WZ.off(r.PlayerEvent.SourceUnloaded,this.aZ)},e}();t.MetadataParsedService=a},50239:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CurrentTimeCache=void 0;var r=n(19274),i=function(){function e(e){var t=e.eventHandler,n=e.getVideoElementCurrentTime,i=this;this.zdb=function(){i.wdb=i.xdb(),i.ydb.addEventListener(r.MediaElementEvent.timeupdate,i.reset),i.ydb.addEventListener(r.MediaElementEvent.playing,i.reset)},this.reset=function(){i.ydb.removeEventListener(r.MediaElementEvent.timeupdate,i.reset),i.ydb.removeEventListener(r.MediaElementEvent.playing,i.reset),i.Keb()},this.ydb=t,this.xdb=n,this.ydb.addEventListener(r.MediaElementEvent.primestart,this.zdb)}return e.prototype.Keb=function(){this.wdb=void 0},e.prototype.get=function(){return void 0!==this.wdb?this.wdb:this.xdb()},e.prototype.dispose=function(){this.ydb.removeEventListener(r.MediaElementEvent.primestart,this.zdb),this.ydb.removeEventListener(r.MediaElementEvent.timeupdate,this.reset),this.ydb.removeEventListener(r.MediaElementEvent.playing,this.reset),this.Keb()},e}();t.CurrentTimeCache=i},51072:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayPromise=void 0;var i=n(88844),o=n(19274),a=function(){function e(e,t,n){var o=this;this.l7=function(){var e=function(){(0,i.clearTimeoutIfDefined)(o.i7),o.h7&&o.h7.isLicenseRequestOngoing()?o.i7=setTimeout(e,o.f7.settings.PLAYBACK_TIMEOUT):o.r7({code:0,name:"NotAllowedError",message:"user interaction required"})};o.i7=setTimeout(e,o.f7.settings.PLAYBACK_TIMEOUT)},this.p7=function(){o.o7(),o.j7()},this.q7=function(e,t){return o.r7(r(r({},t),{eventName:e}))},this.r7=function(e){o.o7();var t=e;e&&e.type&&(t="error"===e.type?r(r({},e),{name:"NotSupportedError",message:"The operation is not supported"}):r(r({},e),{name:"AbortError",message:"The play call was interrupted by ".concat(e.type)})),o.k7(t)},this.f7=e,this.g7=t,this.h7=n}return e.prototype.m7=function(){var t=this,n=function(n){var i=e.eventMapping[n];r.g7.addEventListener(n,i?r.p7:function(e){return t.q7(n,e)})},r=this;for(var i in e.eventMapping)n(i);4===this.g7.readyState?this.l7():this.g7.addEventListener(o.MediaElementEvent.canplay,this.l7)},e.prototype.n7=function(){for(var t in e.eventMapping){var n=e.eventMapping[t];this.g7.removeEventListener(t,n?this.p7:this.r7)}this.g7.removeEventListener(o.MediaElementEvent.canplay,this.l7)},e.prototype.o7=function(){(0,i.clearTimeoutIfDefined)(this.i7),this.n7()},e.prototype.C8=function(){var e=this;return new Promise((function(t,n){e.j7=t,e.k7=n,e.m7()}))},e.new=function(t,n,r){return new e(t,n,r).C8()},e.eventMapping={playing:!0,ended:!0,pause:!1,abort:!1,emptied:!1,error:!1},e}();t.PlayPromise=a},51289:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.EventHandler=void 0,t.generateTroubleshootUrl=l;var i=n(3336),o=n(3714),a=n(48669),s=function(){function e(){var e=this;this.call=function(){e.wI.call(e.xI,e.data)},this.match=function(t){return!!e.yI&&("string"==typeof t?t===e.eventType:t===e.wI)}}return e.prototype.set=function(e,t,n,r,i){void 0===i&&(i=!0),this.wI=e,this.eventType=t,this.xI=n,this.data=r,this.yI=i},e.prototype.clear=function(){this.wI=null,this.eventType=null,this.xI=null,this.data=null,this.yI=null},Object.defineProperty(e.prototype,"cancelable",{get:function(){return this.yI},enumerable:!1,configurable:!0}),e}(),u=function(){function e(e,t,n){var r=this;for(var i in this.SJ=!1,this.TJ=!1,this.UJ=function(){for(var e=r.MJ?r.OJ.length:20,t=0,n=r.OJ.splice(0,e);t<n.length;t++){var i=n[t];!i||r.NJ&&i.eventType!==o.PlayerEvent.Destroy||r.VJ(i)}r.SJ=!1,r.OJ.length>0&&r.gJ()},this.YJ=function(e,t,n,i){if(void 0===i&&(i=!0),r.XJ(e,t,n)){var o=r.cJ(n),u=0,l=r.WJ(t,e);o[e].forEach((function(t){var n=r.QJ.pop()||new s;n.set(t.listener,e,r.zI,l,i),r.OJ.push(n),u+=t.repeatable?1:0})),u<o[e].length&&(o[e].sort((function(e,t){return a.Comparators.reverseBoolean(e.repeatable,t.repeatable)})),o[e].length=u),r.OJ.length>0&&r.gJ()}},this.dispatchEvent=function(e,t,n){void 0===n&&(n=!0),r.MJ||r.dJ(e,t,n)},this.clearEventsOfType=function(e){var t=r.OJ.reduce((function(t,n,r){return n.match(e)?t.concat(r):t}),[]);for(t.sort((function(e,t){return e-t}));t.length>0;)r.OJ.splice(t.pop(),1)},this.hJ=function(e){e.data===r.RJ&&(window.removeEventListener("message",r.hJ),r.UJ())},this.AI=e,this.zI=t,this.BI={internal:{},external:{}},this.MJ=!1,this.NJ=!1,this.OJ=[],this.QJ=[],o.PlayerEvent)o.PlayerEvent.hasOwnProperty(i)&&(this.BI.internal[o.PlayerEvent[i]]=[],this.BI.external[o.PlayerEvent[i]]=[]);this.PJ=[],this.RJ="".concat("bitmovin.triggerQueueWorker",".").concat(n)}return e.prototype.VJ=function(e){try{e.call(),e.clear(),this.QJ.push(e)}catch(e){this.AI.warn("unhandled exception in event callback",e)}},e.prototype.WJ=function(e,t){return r({type:t,timestamp:Date.now()},e)},e.prototype.XJ=function(e,t,n){var r=this.cJ(n),i=r.hasOwnProperty(e)&&r[e].length;return Boolean(!this.MJ&&i)},e.prototype.ZJ=function(e){this.OJ=this.OJ.filter((function(t){return!t.match(e)}))},e.prototype.aJ=function(e,t,n){var r=this.cJ(n);r.hasOwnProperty(e)&&(r[e]=r[e].filter((function(e){return e.listener!==t})))},e.prototype.bJ=function(e,t){if(e&&e instanceof i.PlayerError){var n={type:o.PlayerEvent.Error,timestamp:Date.now(),code:e.code,name:e.name,message:e.message,data:e.data,troubleShootLink:l(e.code)};t&&(n.sourceIdentifier=e.sourceIdentifier),this.YJ(o.PlayerEvent.Error,n,t)}else this.AI.error("Supplied error is not of type PlayerError:",e)},e.prototype.cJ=function(e){return e?this.BI.internal:this.BI.external},e.prototype.dJ=function(e,t,n){if(void 0===t&&(t={}),void 0===n&&(n=!0),e===o.PlayerEvent.Error){var r=t;r.hasOwnProperty("code")||(r.code=3e3)}t&&!t.hasOwnProperty("timestamp")&&(t.timestamp=Date.now()),this.YJ(e,t,!0,n),this.PJ.length>0&&!this.eJ(e,t)||this.YJ(e,t,!1,n)},e.prototype.eJ=function(e,t){return this.PJ.every((function(n){return n(e,t)}))},e.prototype.fJ=function(e,t,n,r){void 0===n&&(n=!1),void 0===r&&(r=!0);var i=this.cJ(n);i.hasOwnProperty(e)&&t&&!i[e].find((function(e){return e&&e.listener===t}))&&i[e].push({listener:t,repeatable:r})},e.prototype.on=function(e,t,n){void 0===n&&(n=!1),this.fJ(e,t,n)},e.prototype.one=function(e,t,n){void 0===n&&(n=!1),this.fJ(e,t,n,!1)},e.prototype.addFromObject=function(e,t){for(var n in void 0===t&&(t=!1),e)e.hasOwnProperty(n)&&this.on(n,e[n],t)},e.prototype.off=function(e,t,n){void 0===n&&(n=!0),n&&this.ZJ(t),this.aJ(e,t,!0),this.aJ(e,t,!1)},e.prototype.getEventFunction=function(){var e=this;return function(t,n,r,i){void 0===r&&(r=!1),void 0===i&&(i=!0),e.dispatchEvent(t,n,i)}},e.prototype.addExternalEventFilter=function(e){this.PJ.indexOf(e)<0&&this.PJ.push(e)},e.prototype.removeExternalEventFilter=function(e){var t=this.PJ.indexOf(e);t>=0&&this.PJ.splice(t,1)},e.prototype.dispose=function(){this.OJ=this.OJ.filter((function(e){return!e.cancelable})),this.MJ=!0,this.dJ=null,this.PJ=null,this.UJ()},e.prototype.setBeingDestroyed=function(){this.NJ=!0},e.prototype.resetErrors=function(){this.TJ=!1},e.prototype.fireError=function(e){var t,n;this.bJ(e,!0),!this.TJ&&this.eJ(o.PlayerEvent.Error,e)&&(this.TJ=!0,this.bJ(e,!1)),this.AI.error("PlayerError(".concat(e.code,"/").concat(e.name,") ").concat(null!==(t=e.message)&&void 0!==t?t:""),null!==(n=e.data)&&void 0!==n?n:" ")},e.prototype.gJ=function(){this.SJ||(this.SJ=!0,window.addEventListener("message",this.hJ),window.postMessage(this.RJ,location.origin+location.pathname))},e}();function l(e){return"https://bitmovin.com/docs/player/web/errors/".concat(e)}t.EventHandler=u},51682:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ISOBMFFConstants=void 0,t.ISOBMFFConstants={BOX_HEADER_LENGTH_REGULAR:8,BOX_HEADER_LENGTH_LARGE:16,BOX_SIZE_LENGTH:4,BOX_TYPE_LENGTH:4,FULL_BOX_VERSION_LENGTH:1,FULL_BOX_FLAGS_LENGTH:3,PSSH_KID_COUNT_LENGTH:4,PSSH_KID_LEN:16,PSSH_SYSTEM_ID_LENGTH:16,PSSH_DATA_SIZE:4}},52424:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DurationConverter=void 0;var n=function(){function e(){}return e.getDurationInSec=function(e){if("string"!=typeof e)return NaN;var t=/^([-])?P(([\d.]*)Y)?(([\d.]*)M)?(([\d.]*)D)?(T)?(([\d.]*)H)?(([\d.]*)M)?(([\d.]*|Infinity)S)?/.exec(e);if(t){var n=Boolean(t[1]),r=12*parseFloat(t[2]||"0")*30*24*60*60,i=30*parseFloat(t[4]||"0")*24*60*60,o=24*parseFloat(t[6]||"0")*60*60,a=60*parseFloat(t[9]||"0")*60,s=60*parseFloat(t[11]||"0"),u=parseFloat(t[13]||"0");if("T"===t[8]&&void 0===(t[9]||t[11]||t[13]))return NaN;var l=r+i+o+a+s+u;return n&&(l=-l),l}return NaN},e}();t.DurationConverter=n},52546:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerStateService=void 0;var r=n(80813),i=n(3714),o=n(23690),a=n(87827),s=n(85648),u=function(){function e(e){var t=this;this.mZ=function(){t.pZ((0,o.setPlayerHasBeenPlaying)(!1))},this.nZ=function(){t.pZ((0,o.setPlayerHasBeenPlaying)(!0))},this.oZ=function(){return a.getPlayerState(t.iZ.store.getState())},this.pZ=function(e){t.iZ.store.dispatch(e)},this.sZ=function(e,n){t.playbackState!==e&&(t.playbackState=e,t.pZ((0,o.addPlayerPendingTransition)(e))),n&&n()},this.tZ=function(e,n){if(t.playbackState!==e)t.playbackState=e,t.pZ((0,o.filterPlayerPendingTransition)(e));else{if(!t.uZ(e))return;t.iZ.logger.debug("Pending state ".concat(s.PlaybackState[e])),t.pZ((0,o.removePlayerPendingTransition)(0))}n&&n()},this.iZ=e,this.jZ=e.eventHandler,this.jZ.on(i.PlayerEvent.Playing,this.nZ,!0),this.jZ.on(i.PlayerEvent.SourceUnloaded,this.mZ,!0),this.pZ((0,o.resetPlayerState)(["viewMode","remoteControlState"])),this.kZ=e.serviceManager.get(r.ServiceName.StallTimeTrackerService),this.lZ=!1}return e.prototype.reset=function(){this.transitionToSeekedState(!1),this.stallExit(),this.playbackState=s.PlaybackState.None,this.seekState=s.SeekState.None},Object.defineProperty(e.prototype,"playbackState",{get:function(){return this.oZ().playbackState},set:function(e){var t=this.oZ().playbackState;this.iZ.logger.debug("State change ".concat(s.PlaybackState[t]," -> ").concat(s.PlaybackState[e])),this.pZ((0,o.setPlayerPlayback)(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seekState",{get:function(){return this.oZ().seekState},set:function(e){var t=this.oZ().seekState;this.iZ.logger.debug("SeekState change ".concat(s.SeekState[t]," -> ").concat(s.SeekState[e])),this.pZ((0,o.setPlayerSeek)(e))},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"timeShiftState",{get:function(){return this.oZ().timeShiftState},set:function(e){var t=this.oZ().timeShiftState;this.iZ.logger.debug("TimeShiftState change ".concat(s.TimeShiftState[t]," -> ").concat(s.TimeShiftState[e])),this.pZ((0,o.setPlayerTimeShift)(e))},enumerable:!1,configurable:!0}),e.prototype.qZ=function(e,t,n,r){this.seekState=e,r&&this.jZ.dispatchEvent(i.PlayerEvent.Seek,{position:this.vZ(),seekTarget:t,issuer:n||"api"}),this.pZ((0,o.setPlayerTargetPlaybackTime)(t))},e.prototype.transitionToSeekingState=function(e,t,n){void 0===n&&(n=!0),this.qZ(s.SeekState.Seeking,e,t,n)},e.prototype.transitionToSeekingIOSState=function(e,t,n){return void 0===n&&(n=!0),this.qZ(s.SeekState.SeekingIOS,e,t,n)},e.prototype.transitionToSeekedState=function(e){void 0===e&&(e=!0),this.isSeeking()&&(this.seekState=s.SeekState.Seeked,e&&this.jZ.dispatchEvent(i.PlayerEvent.Seeked)),this.rZ()},e.prototype.rZ=function(){this.pZ((0,o.setPlayerTargetPlaybackTime)(-1))},e.prototype.isSeeking=function(){return a.getIsSeeking(this.oZ())},e.prototype.transitionToTimeShiftingState=function(e,t,n,r){void 0===r&&(r=!0),this.pZ((0,o.setPlayerTimeShift)(s.TimeShiftState.Shifting)),r&&this.jZ.dispatchEvent(i.PlayerEvent.TimeShift,{position:e,target:t,issuer:n||"api"}),this.pZ((0,o.setPlayerTargetPlaybackTime)(t))},e.prototype.transitionToTimeShiftedState=function(e){void 0===e&&(e=!0),this.pZ((0,o.setPlayerTimeShift)(s.TimeShiftState.Shifted)),e&&this.jZ.dispatchEvent(i.PlayerEvent.TimeShifted),this.rZ()},e.prototype.transitionToStoppedState=function(){this.pZ((0,o.setPlayerPlayback)(s.PlaybackState.Stopped))},e.prototype.isInitial=function(){return a.getIsInitialPlayback(this.oZ())},e.prototype.isTimeShifting=function(){return a.getIsTimeShifting(this.oZ())},Object.defineProperty(e.prototype,"isStalled",{get:function(){return this.oZ().isStalled},set:function(e){this.pZ((0,o.setPlayerStall)(e))},enumerable:!1,configurable:!0}),e.prototype.setIsRendererStalling=function(e){this.pZ((0,o.setRendererStallAction)(e)),e&&this.isPlaying()&&!this.hasPendingTransitionToPausedState()&&(this.lZ=!0),e?this.stallEnter():this.stallExit()},e.prototype.getIsRendererStalling=function(){return a.getIsRendererStalled(this.oZ())},e.prototype.isPlaying=function(){return a.getIsPlaying(this.oZ())},e.prototype.isPlay=function(){return a.getIsPlay(this.oZ())},e.prototype.isPaused=function(){return a.getIsPaused(this.oZ())},e.prototype.isStopped=function(){return a.getIsStopped(this.oZ())},e.prototype.stallEnter=function(){this.isPlay()||this.isSeeking()||this.isTimeShifting()||this.isSeeking()||this.isTimeShifting()||this.isStalled||this.isPaused()||this.isStopped()||(this.isStalled=!0,this.kZ.startStall(),this.jZ.dispatchEvent(i.PlayerEvent.StallStarted,{}))},e.prototype.stallExit=function(){this.isStalled&&(this.isStalled=!1,this.kZ.endStall(),this.jZ.dispatchEvent(i.PlayerEvent.StallEnded,{}))},e.prototype.hasPendingTransitionToPausedState=function(){return this.uZ(s.PlaybackState.Paused)},e.prototype.uZ=function(e){return this.oZ().pendingTransitions[0]===e},e.prototype.vZ=function(){return this.iZ.videoElement.currentTime},e.prototype.wZ=function(e,t,n){var r=this;this.isPlaying()||(e?n(s.PlaybackState.Play,(function(){r.jZ.dispatchEvent(i.PlayerEvent.Play,{time:r.vZ(),issuer:t},!1)})):n(s.PlaybackState.Play))},e.prototype.transitionToPlayState=function(e,t){this.wZ(e,t,this.tZ)},e.prototype.transitionToPendingPlayState=function(e,t){this.wZ(e,t,this.sZ)},e.prototype.transitionToPlayingState=function(e,t){var n=this;void 0===t&&(t=!0),this.tZ(s.PlaybackState.Playing,(function(){t&&n.jZ.dispatchEvent(i.PlayerEvent.Playing,{time:n.vZ(),issuer:e},!1)}))},e.prototype.transitionToPausedState=function(e,t,n){var r=this;if(void 0===n&&(n=!1),n&&this.lZ)return this.iZ.logger.insane("Ignoring transition to paused from video element"),void(this.lZ=!1);this.lZ=!1,e&&this.isStalled&&this.stallExit(),this.iZ.videoElement.ended||(e?this.tZ(s.PlaybackState.Paused,(function(){r.jZ.dispatchEvent(i.PlayerEvent.Paused,{time:r.vZ(),issuer:t},!1)})):this.sZ(s.PlaybackState.Paused))},Object.defineProperty(e.prototype,"targetPlaybackTime",{get:function(){return this.oZ().targetPlaybackTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playbackSpeed",{get:function(){var e=this.oZ().playbackSpeed;return e.speed*e.multiplier},enumerable:!1,configurable:!0}),e.prototype.setPlaybackSpeed=function(e,t,n){void 0===t&&(t=1),void 0===n&&(n=!0);var r=a.getPlaybackSpeed(this.oZ());r.speed===e&&r.multiplier===t||(this.pZ((0,o.setPlayerPlaybackSpeed)({speed:e,multiplier:t})),n&&this.jZ.dispatchEvent(i.PlayerEvent.PlaybackSpeedChanged,{from:r.speed,to:e}))},Object.defineProperty(e.prototype,"seekingOrTimeshifting",{get:function(){return a.getIsSeekingOrTimeshifting(this.oZ())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"seekedOrTimeshifted",{get:function(){return a.getIsSeekedOrTimeshifted(this.oZ())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isInitialStall",{get:function(){return a.getIsInitialStall(this.oZ())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"hasBeenPlaying",{get:function(){return this.oZ().hasBeenPlaying},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.jZ.off(i.PlayerEvent.Playing,this.nZ),this.jZ.off(i.PlayerEvent.SourceUnloaded,this.mZ)},e}();t.PlayerStateService=u},53031:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerContext=void 0;var r=n(17564),i=n(56481),o=n(70962),a=n(6873),s=n(8973),u=n(21513),l=n(61089),c=n(70850),d=n(85902),p=function(){function e(e){this.internalPlayer=e.internalPlayer,this.internalPlayerID=c.Util.generateUniqueId(),this.config=e.config||{playback:{}},this.storedConfig=e.storedConfig,this.settings=e.settings||o.DefaultSettings,this.bufferSettings=new r.BufferSettings(this.settings.TARGET_BUFFER_LEVEL,e.logger),this.parentHtmlElement=e.container||null,this.eZ(),this.logger=e.logger,this.eventHandler=e.eventHandler,this.serviceManager=e.serviceManager,this.segmentInfoService=e.segmentInfoService,this.segmentPrefetchingService=e.segmentPrefetchingService,this.adRestorationOptimizationService=e.adRestorationOptimizationService,this.dZ=!1}return e.prototype.eZ=function(){this.store=new l.StoreService((0,u.default)(),"instances",this.internalPlayerID),this.store.addReducers({player:s.PlayerReducer,metrics:a.MetricsReducer})},e.prototype.setVideoElement=function(e){this.videoElement=d.VideoElementWrapperFactory.createWrappedVideoElement(this,e)},e.prototype.setSourceContext=function(e){this.sourceContext=e},e.prototype.setRenderer=function(e){this.renderer=e},Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.dZ},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.dZ=!0,this.serviceManager=(0,i.dispose)(this.serviceManager),this.renderer=null,this.parentHtmlElement=null,this.eventHandler=null,this.segmentInfoService=null,this.segmentPrefetchingService=null,this.adRestorationOptimizationService=null,this.store=(0,i.dispose)(this.store)},e}();t.PlayerContext=p},53129:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultConfig=void 0;var r=n(45202);t.DefaultConfig={key:"",playback:{autoplay:!1,muted:!1,volume:100,timeShift:!0,seeking:!0,playsInline:!0,preferredTech:[],videoCodecPriority:["dvhe","dvh1","vvc","vvi","av01","av1","hevc","hev","hvc","vp9","avc"],audioCodecPriority:["ec-4","ac-4","ec-3","mp4a.a6","ac-3","mp4a.a5","mp4a.40"]},style:{aspectratio:16/9,uiManagerFactory:function(e,t){return new r.Environment.modules.playerui.UIFactory.buildDefaultUI(e,t)}},tweaks:{file_protocol:!1},adaptation:{mobile:{limitToPlayerSize:!1,exclude:!1,qualityStabilityBalance:.5,bitrates:{minSelectableAudioBitrate:0,maxSelectableAudioBitrate:1/0,minSelectableVideoBitrate:0,maxSelectableVideoBitrate:1/0},resolution:{minSelectableVideoHeight:0,maxSelectableVideoHeight:1/0,minSelectableVideoWidth:0,maxSelectableVideoWidth:1/0}},desktop:{limitToPlayerSize:!1,exclude:!1,qualityStabilityBalance:.5,bitrates:{minSelectableAudioBitrate:0,maxSelectableAudioBitrate:1/0,minSelectableVideoBitrate:0,maxSelectableVideoBitrate:1/0},resolution:{minSelectableVideoHeight:0,maxSelectableVideoHeight:1/0,minSelectableVideoWidth:0,maxSelectableVideoWidth:1/0}}},cast:{enable:!1},events:{},licensing:{},live:{incrementalManifestUpdates:!0},logs:{bitmovin:!0},location:{ui:r.Environment.baseUrl+"bitmovinplayer-ui.js",ui_css:r.Environment.baseUrl+"bitmovinplayer-ui.css",serviceworker:"",cast:"https://www.gstatic.com/cv/js/sender/v1/cast_sender.js?loadCastFramework=1",google_ima:"https://imasdk.googleapis.com/js/sdkloader/ima3.js"}}},55471:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SafariCurrentTimeObserver=void 0;var r=n(20213),i=n(15487),o=n(88844),a=n(19274),s=function(){function e(e,t){var n=this;this.context=e,this.videoElement=t,this.Meb=!1,this.Oeb=Date.now(),this.Peb=0,this.Qeb=function(){!n.context.isDisposed&&n.videoElement&&(n.videoElement.paused||n.videoElement.seeking||Date.now()-n.Oeb>1e3&&(n.Peb++,n.Veb()))},this.Reb=function(){n.Meb=!1,(0,o.clearIntervalIfDefined)(n.Leb),n.Leb=void 0},this.Seb=function(){n.Meb=!0,(0,o.clearIntervalIfDefined)(n.Leb),n.Leb=window.setInterval(n.Qeb,250)},this.Teb=function(){n.Peb++},this.Ueb=function(){if(n.Oeb=Date.now(),!n.videoElement.paused&&!n.videoElement.seeking){n.Meb=!0;var e=n.videoElement.currentTime;e===n.Neb?n.Peb++:(n.Peb=0,n.Neb=e)}},this.videoElement.addEventListener(a.MediaElementEvent.pause,this.Reb),this.videoElement.addEventListener(a.MediaElementEvent.playing,this.Seb),this.videoElement.addEventListener(a.MediaElementEvent.timeupdate,this.Ueb),this.videoElement.addEventListener(a.MediaElementEvent.waiting,this.Teb),this.Leb=window.setInterval(this.Qeb,250)}return e.prototype.dispose=function(){(0,o.clearIntervalIfDefined)(this.Leb),this.videoElement.removeEventListener(a.MediaElementEvent.pause,this.Reb),this.videoElement.removeEventListener(a.MediaElementEvent.playing,this.Seb),this.videoElement.removeEventListener(a.MediaElementEvent.timeupdate,this.Ueb),this.videoElement.removeEventListener(a.MediaElementEvent.waiting,this.Teb)},e.prototype.reset=function(){this.Peb=0,this.Meb=!1,this.Oeb=Date.now()},e.prototype.Veb=function(){this.Peb<=12||(this.Peb=0,this.Meb?(this.context.logger.debug("[Safari] currentTime is not progressing from ".concat(this.videoElement.currentTime)),this.Web()):this.context.logger.debug("[Safari] Playback is possibly stuck, but no `playing` event was emitted"))},e.prototype.Web=function(){if(this.context.internalPlayer.getStreamType()!==r.StreamType.Progressive||function(){var e;return!!((0,i.isSafari)()&&(null!==(e=(0,i.getSafariVersion)().major)&&void 0!==e?e:0)>=i.SAFARI_15_MAJOR_VERSION)||!!((0,i.isIOS)()&&(0,i.getIOSVersion)()>=i.IOS_15)}()){var e=this.videoElement.currentTime,t=this.videoElement.duration;t>0&&e>=t?(this.context.logger.debug("[Safari] Playback has stalled at the end of the video. Trying to recover..."),this.videoElement.dispatchEvent(new Event(a.MediaElementEvent.ended))):(this.context.logger.debug("[Safari] Video element is stuck. Trying to recover..."),this.Xeb(e+.01))}},e.prototype.Xeb=function(e){try{this.videoElement.currentTime=e}catch(t){this.context.logger.debug("[Safari] Failed to set currentTime on video element to ".concat(e),t)}},e}();t.SafariCurrentTimeObserver=s},56481:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dispose=function(e){e&&e.dispose()}},56960:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.AdaptationActionType=void 0,function(e){e.SetPreferredBitrateForMimeType="setpreferredbitrateformimetype",e.ClearPreferredBitrateForMimeType="clearpreferredbitrateformimetype"}(n||(t.AdaptationActionType=n={}))},57387:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calcHash=function(e){return(r.ModuleManager.has(i.ModuleName.Subtitles)?r.ModuleManager.get(i.ModuleName.Subtitles).hashCode:o)(e)};var r=n(88052),i=n(62756);function o(e){var t=0;if(0===e.length)return t;for(var n=0;n<e.length;n++)t=(t<<5)-t+e.charCodeAt(n),t|=0;return t}},57456:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.XhrHelper=void 0,t.isDownloadTimeInformationValid=function(e){return e.length>0&&e.elapsedTime>=0&&e.timeToFirstByte>=0&&e.elapsedTime>e.timeToFirstByte};var i=n(29669),o=n(21513),a=function(){function e(){}return e.headersStringToArray=function(e){if(!e||0===e.trim().length)return{};var t={};return e.split("\r\n").filter((function(e){return""!==e})).forEach((function(e){var n=e.split(": ");t[n[0]]=n[1]})),t},e.toHttpResponse=function(t,n,i){var a=t.readyState===XMLHttpRequest.OPENED&&(0,o.getCapabilities)().isTizen?{status:-1,statusText:"PENDING"}:{status:t.status,statusText:t.statusText},s=e.headersStringToArray(t.getAllResponseHeaders()),u=r({request:n,url:t.responseURL||n.url,headers:s},a);return function(e){return e.openedTimestamp>-1&&e.headersReceivedTimestamp>-1&&e.doneTimestamp>-1}(i)&&(u.timeToFirstByte=i.headersReceivedTimestamp-i.openedTimestamp,u.elapsedTime=i.doneTimestamp-i.openedTimestamp),t.response&&(u.body=this.getResponseBody(t,n.responseType),u.length=t.response.byteLength||t.response.length||0),u},e.getResponseBody=function(e,t){var n;if(t===i.HttpResponseType.JSON&&(null===(n=e.getResponseHeader("content-type"))||void 0===n?void 0:n.includes("application/json"))&&"string"==typeof e.response)try{return JSON.parse(e.response)}catch(e){return null}return e.response},e.setHeaders=function(e,t){t&&Object.keys(t).length>0&&Object.keys(t).forEach((function(n){e.setRequestHeader(n,t[n])}))},e.mergeHeaders=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n={};return e.forEach((function(e){e&&Object.keys(e).forEach((function(t){var r=function(e,t){return Object.keys(e).find((function(e){return e.toLowerCase()===t.toLowerCase()}))}(n,t);r?n[r]=e[t]:n[t]=e[t]}))})),n},e}();t.XhrHelper=a},58313:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.URLHelper=void 0,t.extractOrigin=o,t.removeQueryParameters=function(e,t){var n=e.split("?"),r=n[0],i=n[1];if(!i)return e;var o=i.split("&").filter((function(e){var n=e.split("=")[0];return!t.includes(n)})).join("&");return o?"".concat(r,"?").concat(o):r};var n=function(){function e(){}return e.isUrlAbsolute=function(t){return!!t&&("string"!=typeof t&&(t=e.urlObjectToString(t)),!!e.isDataUri(t)||e.ABSOLUTE_URL_REGEX.test(t))},e.removeUrlParameters=function(e){return e.indexOf("?")>-1&&(e=e.split("?")[0]),e},e.urlObjectToString=function(e){return e&&"string"!=typeof e?function(e){return e&&"string"==typeof e.__text}(e)?e.__text:function(e){return e&&"string"==typeof e.url}(e)?e.url:null:e},e.concatUrlParts=function(t,n){var r="/",i=e.urlObjectToString(t),a=e.urlObjectToString(n);return!i||i.length<1||e.isUrlAbsolute(a)?a:!a||a.length<1?i:((i=e.removeUrlParameters(i)).indexOf("/")>-1&&(i=i.substring(0,i.lastIndexOf("/"))),"/"===a[0]&&(i=o(i),r=""),i+r+a)},e.removeLastPathPart=function(t){if(!t)return null;t=e.removeUrlParameters(t);var n=e.getProtocolOffset(t),r=t.lastIndexOf("/");return r===t.length-1&&(t=t.substring(0,r)),(r=t.lastIndexOf("/"))<0?"":r>t.length-1?t:r<=n?t+"/":t.substring(0,r+1)},e.isRootRelativeUrl=function(e){return!!(e&&e.length>0)&&"/"===e[0]},e.getProtocolOffset=function(e){var t=e.indexOf("://");return t>-1?t+3:-1===t&&0===e.indexOf("//")?2:0},e.replaceCdn=function(e,t){var n=o(e),r=o(t);return e.replace(n,r)},e.isSubUrl=function(e,t){return!(!e||!t)&&(0===t.indexOf("../")&&(t=t.substring(3)),e.indexOf(t)>-1)},e.concatBaseUrlWithPartial=function(t,n){return e.isUrlAbsolute(n)?(n.startsWith("/")&&(n=(function(e){return e.substring(0,e.indexOf("//"))}(t)||i())+n),n):(t=this.toFullUrl(t),n&&0!==n.length?e.isRootRelativeUrl(n)?o(t)+n:(t.endsWith("/")||(t=this.removeLastPathPart(t)),t+n):t)},e.appendQueryParametersToUrl=function(e,t){if(!t||0===Object.keys(t).length)return e;var n="",i=e.indexOf("?")>=0;for(var o in t)t.hasOwnProperty(o)&&(n+=i?"&":"?",i=!0,n=r(n,o,t[o]));return e+n},e.toFullUrl=function(t){if(e.isDataUri(t))return t;var n=t.startsWith("//")?i()+t:t;return t.split("//")[1].includes("/")||(n+="/"),n},e.isDataUri=function(e){return e&&0===e.indexOf(this.DATA_URI_PROTOCOL)},e.parseDataUri=function(e){if(!this.isDataUri(e))throw new Error("Invalid data uri: "+e);-1===(e=e.substring(this.DATA_URI_PROTOCOL.length)).indexOf(this.COMMA_CHARACTER)&&(e=this.DATA_URI_DEFAULT_MEDIA_TYPE+this.COMMA_CHARACTER+e);var t=e.split(this.COMMA_CHARACTER),n=t[0],r=t[1],i=n.endsWith(this.DATA_URI_BASE64_MARKER),o=n.length-this.DATA_URI_BASE64_MARKER.length-this.COMMA_CHARACTER.length;return{mediaType:i?n.substring(0,o):n,base64:i?r:void 0,data:i?atob(r):r}},e.buildAbsoluteUrl=function(t,n,r){return e.isUrlAbsolute(r)?r:e.isRootRelativeUrl(r)?n+r:t+r},e.getAbsoluteUrl=function(t,n){return e.isUrlAbsolute(t)?t:e.concatBaseUrlWithPartial(n,t)},e.removeDotSegments=function(t){for(var n=e.isUrlAbsolute(t)?o(t):"",r=[],i=0,a=t.substring(n.length).split("/");i<a.length;i++){var s=a[i];if(".."===s){if(0===r.length)return t;r.pop()}else"."!==s&&r.push(s)}return n+r.join("/")},e.DATA_URI_PROTOCOL="data:",e.DATA_URI_BASE64_MARKER="base64",e.DATA_URI_DEFAULT_MEDIA_TYPE="text/plain;charset=US-ASCII",e.ABSOLUTE_URL_REGEX=new RegExp("^(?:[a-z]+:)?//","i"),e.COMMA_CHARACTER=",",e}();function r(e,t,n){return e+=t,null!=n&&(e+="="+encodeURIComponent(n)),e}function i(){var e;return(null===(e=window.location)||void 0===e?void 0:e.protocol)||"https:"}function o(e){var t=e.indexOf("//")+2,n=e.indexOf("/",t);return-1===n&&(n=e.indexOf("?",t)),-1===n?e:e.slice(0,n)}t.URLHelper=n},58735:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateMetadataHash=function(e,t){return void 0===t&&(t=""),o(e)?String((0,i.calcHash)(e.metadataType+e.start+e.metadata.id)):String((0,i.calcHash)(t+JSON.stringify(e)))},t.isDateRangeMetadata=o;var r=n(20213),i=n(57387);function o(e){return e.metadataType===r.MetadataType.DATERANGE}},59225:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MetadataService=void 0;var r=n(80813),i=n(32485),o=function(){function e(e,t){this.EY=e.serviceManager.get(r.ServiceName.MetadataParsedService),this.FY=new i.TimeMetadataHandler(e,t)}return e.prototype.addToMetadataParsedService=function(e,t,n){t.start=t.start||e,this.EY.addMetadata(n,t)},e.prototype.addToTimeline=function(e,t,n){this.FY.add(e,t,n)},e.prototype.removeUntil=function(e){this.FY.removeUntil(e)},e.prototype.removeMatchingCues=function(e,t){this.FY.removeMatchingCues(e,t)},e.prototype.reset=function(e){this.FY.reset(e)},e.prototype.dispose=function(){this.FY.dispose()},e}();t.MetadataService=o},60430:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReachableDomainsReducer=void 0;var a=n(3793),s=n(32027);t.ReachableDomainsReducer=(0,a.default)({domains:[]},((r={})[s.ReachableDomainsActionType.AddDomain]=function(e,t){return function(e,t){return i(i({},e),{domains:e.domains.includes(t)?e.domains:o(o([],e.domains,!0),[t],!1)})}(e,t.payload)},r))},60865:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLowLatencyDefaultConfig=function(e){return void 0===e&&(e={}),{live:i(e),tweaks:o()}};var r=n(21281),i=function(e){var t=e.targetLatency;return{lowLatency:{targetLatency:null!=t?t:5,catchup:{playbackRateThreshold:.075,seekThreshold:5,playbackRate:1.2},fallback:{playbackRateThreshold:.075,seekThreshold:5,playbackRate:.95}},synchronization:[{method:r.LiveSynchronizationMethod.HttpHead,serverUrl:"https://time.akamai.com"}]}},o=function(){return{RESTART_THRESHOLD:.2,RESTART_THRESHOLD_DELTA:.05,STARTUP_THRESHOLD:.2,STARTUP_THRESHOLD_DELTA:.05,LOW_LATENCY_BUFFER_GUARD:.8}}},60877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.shouldResetCurrentTimeAfterBufferUnderrun=function(){var e=(0,i.getCapabilities)();return e.isWebOS?e[r.CapabilityKey.webOSChromiumVersion]===o.WEBOS_2020_CHROMIUM_VERSION:e.isChromium};var r=n(7387),i=n(21513),o=n(15487)},61089:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.StoreService=void 0;var i=n(39541),o=n(93204),a=function(){function e(e,t,n){var r=this;this.parentStore=e,this.levelIdentifier=t,this.identifierValue=n,this.l0=[],this.n0=function(e){return e[r.levelIdentifier][r.identifierValue]},this.k0=new i.ReducerTree,this.p0(this.k0)}return e.prototype.dispatch=function(e){var t;return null===(t=this.parentStore)||void 0===t?void 0:t.dispatch(this.m0(e))},e.prototype.m0=function(e){var t;return r(r({},e),{meta:r(r({},e.meta),(t={},t[this.levelIdentifier]=this.identifierValue,t))})},e.prototype.o0=function(){return this.parentStore.hasReducer(this.levelIdentifier)||this.parentStore.addReducer(this.levelIdentifier,new i.ReducerTree),this.parentStore.getReducer(this.levelIdentifier)},e.prototype.p0=function(e){var t=this.o0();(0,i.isReducerTree)(t)&&s(t).set(this.identifierValue,e),this.parentStore.addReducer(this.levelIdentifier,t)},e.prototype.getState=function(){var e,t=null===(e=this.parentStore)||void 0===e?void 0:e.getState();if(t)return this.n0(t)},e.prototype.subscribe=function(e,t){var n=this,r=(0,o.subscribe)(this.parentStore)(this.n0,e,t);return this.l0.push(r),function(){n.l0=n.l0.filter((function(e){return e!==r})),r()}},e.prototype.q0=function(e){var t=this;return function(n,r){return r.meta&&r.meta[t.levelIdentifier]&&r.meta[t.levelIdentifier]!==t.identifierValue?n:e(n,r)}},e.prototype.addReducer=function(e,t){this.k0.set(e,(0,i.isReducer)(t)?this.q0(t):t),this.p0(this.k0)},e.prototype.addReducers=function(e){for(var t=0,n=Object.entries(e);t<n.length;t++){var r=n[t],o=r[0],a=r[1];void 0!==a&&this.k0.set(o,(0,i.isReducer)(a)?this.q0(a):a)}this.p0(this.k0)},e.prototype.getReducer=function(e){return this.k0.get(e)},e.prototype.removeReducer=function(e){this.k0.delete(e),this.p0(this.k0)},e.prototype.hasReducer=function(e){return this.k0.has(e)},e.prototype.dispose=function(){var e=this.o0();this.l0.forEach((function(e){return e()})),e&&(0,i.isReducerTree)(e)&&s(e).delete(this.identifierValue),this.parentStore.addReducer(this.levelIdentifier,e),this.l0=[],this.k0=null,this.parentStore=null},e}();function s(e){return e}t.StoreService=a},61674:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.addStoreServiceDecoration=void 0,t.addStoreServiceDecoration=function(e){return function(t){return function(){var r=function(){return e.buildReducer()},i=t(r()),o=function(){return i.replaceReducer(r())};return o(),n(n({},i),{addReducer:function(t,n){e.set(t,n),o()},getReducer:function(t){return e.get(t)},removeReducer:function(t){e.delete(t),o()},hasReducer:function(t){return e.has(t)}})}}}},62756:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleName=void 0,function(e){e.VR="VR",e.XML="XML",e.Smooth="Smooth",e.AdvertisingCore="AdvertisingCore",e.Advertising="Advertising",e.AdvertisingIma="Advertising",e.AdvertisingBitmovin="Advertising",e.AdvertisingOmSdk="AdvertisingOmSdk",e.SGAI="SGAI",e.Polyfill="Polyfill",e.Patch="Patch",e.RemoteControl="RemoteControl",e.RendererMse="RendererMSE",e.EngineNative="EngineNative",e.EngineBitmovin="EngineBitmovin",e.ABR="ABR",e.Crypto="Crypto",e.HLS="HLS",e.DRM="DRM",e.DASH="DASH",e.ContainerTS="ContainerTS",e.ContainerMP4="ContainerMP4",e.ContainerWebM="ContainerWebM",e.Subtitles="Subtitles",e.SubtitlesTTML="SubtitlesTTML",e.SubtitlesWebVTT="SubtitlesWebVTT",e.SubtitlesCEA608="SubtitlesCEA608",e.SubtitlesNative="SubtitlesNative",e.Style="Style",e.Thumbnail="Thumbnail",e.ThumbnailImp="Thumbnail",e.UI="UI",e.Tizen="Tizen",e.Webos="webos",e.Vidaa="vidaa",e.LowLatency="LowLatency",e.ServiceWorkerClient="ServiceWorkerClient",e.Envivio="Envivio",e.PlayStation5="PlayStation5",e.PlayStation4="PlayStation4",e.EngineWebRtc="EngineWebRtc",e.ReactNative="ReactNative"}(n||(t.ModuleName=n={}))},63879:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setMseObjectUrl=function(e){return(0,r.createAction)(i.RendererActionType.SetMseObjectUrl,{url:e})};var r=n(35267),i=n(39564)},64681:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),i(n(92006),t)},65348:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DOMHelper=void 0;var n=function(){function e(){}return e.createTag=function(e,t,n){void 0===t&&(t={}),void 0===n&&(n={});var r=document.createElement(e);return Object.keys(n).forEach((function(e){return r.style[e]=n[e]})),Object.keys(t).forEach((function(e){return r.setAttribute(e,t[e])})),r},e}();t.DOMHelper=n},65567:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTvDefaultConfig=function(e){if((0,r.isUsingFileProtocol)()&&!e)throw new Error("You have to provide an app_id if you are loading the app through file protocol");return function(e){var t={forwardduration:i,backwardduration:o},n={buffer:{video:t,audio:t},playback:{autoplay:!0},tweaks:{minimal_backward_buffer_clearing_interval:5}};return e&&(n.tweaks.app_id=e,n.tweaks.file_protocol=!0,n.analytics={config:{origin:e}}),n}(e)};var r=n(47993),i=30,o=10},65623:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamType=void 0,function(e){e.Progressive="progressive",e.Dash="dash",e.Hls="hls",e.Smooth="smooth",e.Whep="whep",e.Unknown="unknown"}(n||(t.StreamType=n={}))},66502:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextSegmentAnalyzer=void 0;var r=n(74853),i=function(){function e(){}return e.isPlainTextPayload=function(e){if(!e)return!1;var t=[87,69,66,86,84,84],n=new Uint8Array(e.slice(0,6)),i=new Uint8Array(e.slice(0,9));return r.ArrayHelper.comparePrimitiveArrays(n,new Uint8Array(t))||r.ArrayHelper.comparePrimitiveArrays(i,new Uint8Array([239,187,191].concat(t)))},e.detectEncoding=function(e){for(var t,n=!0,r=[34,85,84,70,45,56,34],i=e instanceof ArrayBuffer?new DataView(e):e,o=0;o<i.byteLength;o++)if((t=i.getUint8(o))>128)n=!1;else{if(0===t)return"utf-16";if(t===r[0]&&i.byteLength>o+r.length){for(var a=!0,s=1;s<r.length;s++)if(r[s]!==i.getUint8(o+s)){a=!1;break}if(a)return"utf-8"}}return n?"ascii":"utf-8"},e}();t.TextSegmentAnalyzer=i},66790:function(e,t){"use strict";var n,r,i,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.DrmSetupError=t.TransmuxingRejectionReason=t.SegmentVerificationResult=t.HlsEncryptionMethods=t.HlsEncryptionMethod=t.SOURCE_BUFFER_APPEND_STATUS=t.RepresentationType=void 0,function(e){e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO",e[e.SUBTITLE=3]="SUBTITLE"}(n||(t.RepresentationType=n={})),function(e){e[e.FAILURE=0]="FAILURE",e[e.QUOTA_EXCEEDED=1]="QUOTA_EXCEEDED",e[e.SUSPENDED=2]="SUSPENDED"}(r||(t.SOURCE_BUFFER_APPEND_STATUS=r={})),function(e){e.NONE="NONE",e.AES_128="AES-128",e.SAMPLE_AES="SAMPLE-AES",e.SAMPLE_AES_CTR="SAMPLE-AES-CTR"}(i||(t.HlsEncryptionMethod=i={})),t.HlsEncryptionMethods=Object.keys(i).map((function(e){return i[e]})),function(e){e.Publish="publish",e.Drop="drop",e.Park="park"}(o||(t.SegmentVerificationResult=o={})),function(e){e.INVALID_TS_SEGMENT="Invalid TS segment, could not extract segment information",e.TRANSMUXING_ABORTED="Transmuxing was aborted as it is no longer needed"}(a||(t.TransmuxingRejectionReason=a={})),function(e){e.CANCELLED="Loading was cancelled for the DRM source",e.MISSING_CONFIGURATION="DRM is not configured"}(s||(t.DrmSetupError=s={}))},68205:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.addReachableDomain=function(e){return(0,r.createAction)(i.ReachableDomainsActionType.AddDomain,e)};var r=n(35267),i=n(32027)},68922:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.applyLabeling=t.getLabelFunction=t.handleLabelAssignment=t.DEFAULT_LABEL=t.LabelingType=void 0;var r,i=n(70850);!function(e){e.Qualities="qualities",e.Tracks="tracks",e.Subtitles="subtitles"}(r||(t.LabelingType=r={})),t.DEFAULT_LABEL="",t.handleLabelAssignment=function(e,n,r){if(!r)return t.DEFAULT_LABEL;var o=(0,i.safeUserCallback)((function(){return r(e)}),n.logger);return"string"==typeof o?o:t.DEFAULT_LABEL},t.getLabelFunction=function(e,t,n){var r,i;return null===(i=null===(r=e.labeling)||void 0===r?void 0:r[t])||void 0===i?void 0:i[n]},t.applyLabeling=function(e,n){var r=(0,t.getLabelFunction)(e.source,e.streamType,e.labelingType);return(0,t.handleLabelAssignment)(n,e.context,r)}},68925:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setBufferMaxSize=function(e,t){return(0,r.createAction)(i.BufferActionType.SetBufferMaxSize,{mimeType:e,maxBufferSize:t})},t.setRendererRanges=function(e,t){return(0,r.createAction)(i.BufferActionType.SetRendererRanges,{mimeType:e,ranges:t})},t.setBufferBlockSwitchOngoing=function(e){return(0,r.createAction)(i.BufferActionType.SetBufferBlockSwitchOngoing,{isOngoing:e})},t.setTimestampRollingOver=function(e){return(0,r.createAction)(i.BufferActionType.SetTimestampRollingOver,{isRollingOver:e})},t.addLoadedRange=function(e,t){return(0,r.createAction)(i.BufferActionType.AddLoadedRange,{mimeType:e,range:t})},t.removeLoadedRange=function(e,t){return(0,r.createAction)(i.BufferActionType.RemoveLoadedRange,{mimeType:e,range:t})},t.resetLoadedRanges=function(e){return(0,r.createAction)(i.BufferActionType.ResetLoadedRanges,{mimeType:e})},t.setLoadingRangeFinished=function(e){return(0,r.createAction)(i.BufferActionType.SetLoadingRangeFinished,{isFinished:e})};var r=n(35267),i=n(70118)},69251:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SourceContext=void 0;var n=function(){function e(e){this.technology=e.technology,this.source=e.source,this.isAd=e.isAd,this.xZ=!1,this.yZ=e.sourceIdentifier,this.mseObjectUrl=e.mseObjectUrl}return Object.defineProperty(e.prototype,"isDisposed",{get:function(){return this.xZ},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"sourceIdentifier",{get:function(){return this.yZ},enumerable:!1,configurable:!0}),e.prototype.dispose=function(){this.xZ=!0},e}();t.SourceContext=n},69573:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.staticSourceReducers=void 0;var r=n(87133),i=n(44991),o=n(48557),a=n(77179);t.staticSourceReducers={startOptions:a.StartOptionsReducer,drm:i.DrmReducer,adaptation:r.AdaptationReducer,playback:o.PlaybackReducer}},69957:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.setPerformanceTrackingLogger=function(e){n=e},t.trackPerformance=function(e,t){return void 0===t&&(t=!1),function(n,s){return function(){for(var s=[],u=0;u<arguments.length;u++)s[u]=arguments[u];var l=a(r),c=l.callStack,d=l.parent,p=Date.now(),f=o(),h=function(e,t){var n={method:t,isAsync:!1,next:null,subtractions:[]};return e.next=n,n}(d,e),y=function(){var n=o()-f;if(i({name:e,start:p,duration:n,callStack:c}),t&&(d.subtractions=d.subtractions||[],d.subtractions.push({name:e,duration:n})),h.subtractions&&h.subtractions.length){var r=h.subtractions.map((function(e){return e.name})).join(", "),a=h.subtractions.reduce((function(e,t){return e+t.duration}),0);i({name:"".concat(e," without ").concat(r),duration:n-a,start:Date.now()})}!function(e){e.isAsync&&e.next.isAsync||(e.next=null)}(d)},v=n.apply(this,s);return v instanceof Promise?(function(e){e.isAsync=!0}(d.next),v.then(y,y),v):(y(),v)}}},t.trackPerformanceStart=function(e){var t=o();s[e]&&u(e,t),s[e]=t},t.trackPerformanceEnd=function(e){u(e,o()),delete s[e]};var r={};function i(e){n&&n.debug("[Performance] ".concat(e.name," lasted ").concat(Math.floor(e.duration),"ms"),e)}function o(){var e,t;return(null===(e=performance.now)||void 0===e?void 0:e.call(performance))||(null===(t=performance.webkitNow)||void 0===t?void 0:t.call(performance))||Date.now()}function a(e,t){void 0===t&&(t=[]);var n=e.next,r=e.method;return r&&t.push(r),n?a(n,t):{callStack:t,parent:e}}var s={};function u(e,t){n&&i({name:e,start:s[e],duration:t-s[e]})}},70118:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.BufferActionType=void 0,function(e){e.SetBufferMaxSize="@instance/source/buffer/setbuffermaxsize",e.SetRendererRanges="@instance/source/buffer/setrendererranges",e.SetBufferBlockSwitchOngoing="@instance/source/buffer/setbufferblockswitchongoing",e.SetTimestampRollingOver="@instance/source/buffer/settimestamprollingover",e.AddLoadedRange="@instance/source/buffer/addloadedrange",e.RemoveLoadedRange="@instance/source/buffer/removeloadedrange",e.ResetLoadedRanges="@instance/source/buffer/resetloadedranges",e.SetLoadingRangeFinished="@instance/source/buffer/setloadingrangefinished"}(n||(t.BufferActionType=n={}))},70233:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.FormatHelper=void 0;var n=function(){function e(){}return e.hexToBytes=function(e){var t=e.length;1&t&&(e="0"+e,t++);for(var n=new Uint8Array(t>>1),r=0;r<t;r+=2)n[r>>1]=parseInt(e.substring(r,r+2),16);return n},e.bytesToHex=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var t="",n=0;n<e.byteLength;n++){var r=(255&e[n]).toString(16);r.length<2&&(t+="0"),t+=r}return t},e.bytesToUUID=function(e){return this.beautifyUUID(this.bytesToHex(e))},e.beautifyUUID=function(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)},e.intToHex=function(e){return("00"+e.toString(16)).slice(-2)},e.base64UrlEncode=function(e){return window.btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},e.base64UrlDecode=function(e){return window.atob((e+"===".slice((e.length+3)%4)).replace(/-/g,"+").replace(/_/g,"/"))},e}();t.FormatHelper=n},70850:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.Util=void 0,t.parseAspectRatio=function(e){if(!e)return 0;var t;if((e=String(e).replace(",",".")).indexOf(":")>-1)t=e.split(":");else{if(!(e.indexOf("/")>-1))return isNaN(parseFloat(e))?0:parseFloat(e);t=e.split("/")}if(t&&Array.isArray(t)&&t.length>1){var n=parseFloat(t[0])/parseFloat(t[1]);return isNaN(n)?0:n}return 0},t.removeDuplicates=function(e){return e.filter((function(e,t,n){return t===n.findIndex((function(t){return c.deepEqual(t,e)}))}))},t.safeUserCallback=function(e,t){if(!c.isFunction(e))return null;try{return e()}catch(e){return t&&t.warn("Exception in userCallback",e),null}};var i=n(56481),o=n(70962),a=n(19274),s=n(26225),u=n(57387),l=n(89927),c=function(){function e(){}return e.deepEqual=function(t,n){if(t===n)return!0;if(!t||"object"!=typeof t||!n||"object"!=typeof n)return!1;if(Object.keys(t).length!==Object.keys(n).length)return!1;for(var r in t)if(!n.hasOwnProperty(r)||!e.deepEqual(t[r],n[r]))return!1;return!0},e.deepCopy=function(t,n){var r=void 0!==window.ArrayBuffer;for(var i in n)n.hasOwnProperty(i)&&(r&&n[i]instanceof ArrayBuffer?t[i]=n[i].slice(0,n[i].byteLength):"object"==typeof n[i]&&null!==n[i]?(t.hasOwnProperty(i)||(Array.isArray(n[i])?t[i]=[]:t[i]={}),e.deepCopy(t[i],n[i])):t[i]=n[i])},e.deepCopyMulti=function(e){for(var t=this,n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];return n.forEach((function(n){return t.deepCopy(e,n)})),e},e.isFunction=function(e){return!!e&&"[object Function]"==={}.toString.call(e)},e.extractBitrateFromString=function(e,t){return isNaN(t)?(t=t.toLowerCase().trim().replace(/,/g,".")).indexOf("mbps")>-1?1e6*t.split("m")[0]:t.indexOf("kbps")>-1?1e3*t.split("k")[0]:t.indexOf("bps")>-1?1*t.split("b")[0]:"max"===e?1/0:0:t===1/0?t:1*t},e.splitPlayerAndStreamingTechnology=function(e){if(e&&"string"==typeof e){for(var t=e.split("."),n=0,r=0;r<e.length;r++)""===t[r]&&(t[r]=null,n++);return n===e.length?null:{player:t[0],streaming:t[1]}}return null},e.createVRAudioElement=function(){var t=document.createElement("source");t.setAttribute("type","audio/mp3"),t.setAttribute("src","data:audio/mpeg;base64,/+MYxAAAAANIAUAAAASEEB/jwOFM/0MM/90b/+RhST//w4NFwOjf///PZu////9lns5GFDv//l9GlUIEEIAAAgIg8Ir/JGq3/+MYxDsLIj5QMYcoAP0dv9HIjUcH//yYSg+CIbkGP//8w0bLVjUP///3Z0x5QCAv/yLjwtGKTEFNRTMuOTeqqqqqqqqqqqqq/+MYxEkNmdJkUYc4AKqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq");var n={settings:o.DefaultSettings};for(e.vrAudioElement=e.vrAudioElement||new s.MediaElementWrapper(n,document.createElement("audio")),e.vrAudioElement.setAttribute("id","bitmovinplayer-audio"),e.vrAudioElement.addEventListener(a.MediaElementEvent.playing,(function(){return e.vrAudioElement.bit_wasPlayCalled=!0})),e.vrAudioElement.setAttribute("crossorigin","anonymous"),e.vrAudioElement.hasAttribute("src")&&e.vrAudioElement.removeAttribute("src");e.vrAudioElement.firstChild;)e.vrAudioElement.removeChild(e.vrAudioElement.firstChild);e.vrAudioElement.load()},e.getVRAudioElement=function(){return e.vrAudioElement||e.createVRAudioElement(),e.vrAudioElement},e.removeVRAudioElement=function(){if(e.vrAudioElement){var t=e.vrAudioElement.getWrappedElement();e.vrAudioElement=(0,i.dispose)(e.vrAudioElement),t.parentNode&&t.parentNode.removeChild(t)}},e.isFullscreen=function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.webkitCurrentFullScreenElement},e.generateUniqueId=function(){return Date.now().toString(16)+Math.floor(1048576*(1+Math.random())).toString(16).substring(1)},e.getUtcDate=function(t){var n=null;return"string"!=typeof t&&isNaN(t)||(n="string"==typeof t?e.timeZoneRegex.test(t)?new Date(t):new Date(t+"Z"):new Date(t)),n},e.delay=function(e,t){return new Promise((function(n){setTimeout((function(){"function"==typeof t?n(t()):n()}),e)}))},e.timeInSeconds=function(e){return(0,l.toSeconds)(e.getTime())},e.toHash=function(e){var t=new WeakMap,n=JSON.stringify(e,(function e(n,r){if(null==r)return r;if("function"==typeof r)return r.toString().replace(/\n|\s\s/g,"");if(r instanceof ArrayBuffer)return String.fromCharCode.apply(null,new Uint8Array(r.slice(0,20)));if(r instanceof Uint8Array)return String.fromCharCode.apply(null,r.slice(0,20));if("object"==typeof r&&!Array.isArray(r)){if(t.has(r)){var i=JSON.stringify(Object.keys(r),e);return"[Object ".concat(Math.abs((0,u.calcHash)(i)).toString(16),"]")}t.set(r,!0)}return r}));return(268435456|Math.abs((0,u.calcHash)(n))).toString(16)},e.roundValue=function(e,t){var n=Math.pow(10,t);return Math.round(e*n)/n},e.arrayMove=function(e,t,n){var i=r([],e,!0),o=i[t];return i.splice(t,1),i.splice(n,0,o),i},e.vrAudioElement=null,e.timeZoneRegex=/(?:Z|[+-](?:2[0-3]|[01][0-9]):[0-5][0-9])$/,e}();t.Util=c},70962:function(e,t,n){"use strict";var r,i,o,a;Object.defineProperty(t,"__esModule",{value:!0}),t.DefaultSettings=t.WishDefaultConfig=void 0;var s=n(29669),u=n(44468);t.WishDefaultConfig={TARGET_BITRATE_FACTOR:1,TARGET_BUFFER_FACTOR:.8,BITRATE_MODIFIER_FUNCTION_TYPE:"log",USE_RATE_BASED_SELECTION_ON_SEEKING:!1},t.DefaultSettings={TARGET_BUFFER_LEVEL:(r={},r[u.MediaType.Video]=(i={},i[u.BufferType.ForwardDuration]=40,i[u.BufferType.BackwardDuration]=20,i),r[u.MediaType.Audio]=(o={},o[u.BufferType.ForwardDuration]=40,o[u.BufferType.BackwardDuration]=20,o),r),BUFFER_LOGIC_ACTIVATION_THRESHOLD:10,MIN_TIMELINE_LIVE_OFFSET:4,RETRY_DELAY:2,MAX_INCREASE_RETRY_DELAY_SEC:30,INCREASE_RETRY_DELAY:!0,INCREASE_RETRY_DELAY_BASE_SEC:.25,DISABLE_RETRY_FOR_RESPONSE_STATUS:(a={},a[s.HttpRequestType.MANIFEST_DASH]=[],a[s.HttpRequestType.MANIFEST_HLS_MASTER]=[],a[s.HttpRequestType.MANIFEST_HLS_VARIANT]=[],a[s.HttpRequestType.MANIFEST_SMOOTH]=[],a[s.HttpRequestType.MANIFEST_ADS]=[],a[s.HttpRequestType.MEDIA_AUDIO]=[],a[s.HttpRequestType.MEDIA_VIDEO]=[],a[s.HttpRequestType.MEDIA_SUBTITLES]=[],a[s.HttpRequestType.MEDIA_THUMBNAILS]=[],a[s.HttpRequestType.MEDIA_SEGMENTINDEX]=[],a[s.HttpRequestType.DRM_LICENSE_WIDEVINE]=[],a[s.HttpRequestType.DRM_LICENSE_PLAYREADY]=[],a[s.HttpRequestType.DRM_LICENSE_FAIRPLAY]=[],a[s.HttpRequestType.DRM_LICENSE_PRIMETIME]=[],a[s.HttpRequestType.DRM_LICENSE_CLEARKEY]=[],a[s.HttpRequestType.DRM_LICENSE_TVKEY]=[],a[s.HttpRequestType.DRM_CERTIFICATE_FAIRPLAY]=[],a[s.HttpRequestType.HLS_INTERSTITIALS_ASSET_LIST]=[],a[s.HttpRequestType.KEY_HLS_AES]=[],a[s.HttpRequestType.TIME_SYNC]=[],a[s.HttpRequestType.WEBRTC_SDP_REQUEST]=[],a[s.HttpRequestType.WEBRTC_SDP_ANSWER]=[],a[s.HttpRequestType.WEBRTC_SDP_OFFER]=[],a[s.HttpRequestType.INTERNAL]=[],a[s.HttpRequestType.UNKNOWN]=[],a),METRIC_HISTORY_SIZE:30,DEFAULT_ADAPTATION_RULE_HISTORY_SIZE:40,LOG_LEVEL:2,LOG_PREFIX:"",RESTART_THRESHOLD:.9,RESTART_THRESHOLD_DELTA:.5,STARTUP_THRESHOLD:.9,STARTUP_THRESHOLD_DELTA:.5,MAX_STARTUP_BUFFER:0,START_SEARCHING_END:2,MAX_RETRIES:2,MAX_CDN_RETRIES:2,MAX_MPD_RETRIES:2,MPD_RETRY_DELAY:.5,MPD_UPDATE_PERIOD_TOLERANCE:5,DRM_MAX_RETRIES:1,DRM_RETRY_DELAY:.25,DRM_WITH_CREDENTIALS:!1,CAST_APPLICATION_ID:"D3A86B20",CAST_MESSAGE_NAMESPACE:"urn:x-cast:com.bitmovin.player.cast2",BUFFER_VISIBILITY_DELAY:2,MIN_SELECTABLE_VIDEO_BITRATE:0,MAX_SELECTABLE_VIDEO_BITRATE:1/0,EXCLUDE_DISALLOWED_REPRESENTATIONS:!1,MIN_SELECTABLE_AUDIO_BITRATE:0,MAX_SELECTABLE_AUDIO_BITRATE:1/0,XHR_TIMEOUT:20,QUERY_PARAMETERS:void 0,GAP_TOLERANCE:.1,END_OF_BUFFER_TOLERANCE:.1,END_OF_BUFFER_RECOVERY_TOLERANCE:.5,MAX_POTENTIAL_GAP_TIME_DEVIATION:.125,SEEK_TO_END_OFFSET:2,MINIMUM_ALLOWED_UPDATE_PERIOD:1,MAXIMUM_ALLOWED_UPDATE_PERIOD:1/0,GLOBAL_DISABLE_SEEKING:!1,PRE_ROLL_RESTORE_THRESHOLD:.25,IOS_MIN_TIMEUPDATES_AFTER_AD:2,HTTP_HEADERS:{},DOWNLOAD_DURATION_SAFETY_MARGIN:.4,MAXIMUM_DOWNLOAD_DURATION_MULTIPLIER:2,RATE_SAFETY_MARGIN_PERCENTAGE:10,MAX_ALLOWED_BANDWIDTH_ESTIMATION:1/0,LIVE_SEGMENT_LIST_START_INDEX_OFFSET:0,MAX_NUM_CACHED_SEGMENTS:1,TRUN_VERSION:void 0,IGNORE_MP4_EDTS_BOX:!0,HLS_AUDIO_ONLY_THRESHOLD_BITRATE:2e5,ENABLE_SEEK_FOR_LIVE:!1,LIVE_EDGE_DISTANCE:0,QUALITY_THRESHOLD:.5,QUALITY_UPPER_THRESHOLD:45,MAX_CONSECUTIVE_VR_ERRORS:3,MAX_CONSECUTIVE_RENDERER_ERRORS:3,DISABLE_HLS_BACKUP_STREAM_FAILOVER:!1,PLAYBACK_TIMEOUT:1500,HLS_SYNC_VIA_MEDIA_SEQUENCE:!1,STOP_DOWNLOAD_ON_PAUSE:!1,VR_SCHEME_ID_URI:"https://bitmovin.com/082017/vr",HLS_VR_CHARACTERISTICS_UTI:"com.bitmovin.vr.",SAFARI_NUM_PROGRESS_EVENTS_AFTER_SEEK_GLITCH:5,SEGMENT_LOADER_POOL_SIZE:{},NATIVE_HLS_PARSING:!1,NATIVE_HLS_DOWNLOAD_ERROR_HANDLING:!1,AKAMAI_DATETIME_PARSING:!1,QJY_BROWSER_WORKAROUND:!1,DWORD_BASE_MEDIA_DECODE_TIMESTAMPS:!1,FORCE_BASE_MEDIA_DECODE_TIME_REWRITE:!1,WEBOS_MAX_SAFE_BMDT:1/0,WEBOS_MAX_SAFE_PTO:1/0,TIZEN_MAX_SAFE_BMDT:1/0,TIZEN_MAX_SAFE_PTO:1/0,VIDAA_MAX_SAFE_BMDT:4294967295,VIDAA_MAX_SAFE_PTO:4294967295,ADAPTATION_SET_SWITCHING_WITHOUT_SUPPLEMENTAL_PROPERTY:!1,MINIMAL_BACKWARD_BUFFER_CLEARING_INTERVAL:.5,CHUNKED_CMAF_STREAMING:!1,LOW_LATENCY_DEFAULT_TARGET_LATENCY:5,LOW_LATENCY_BUFFER_GUARD:.5,LOW_LATENCY_DEFAULT_FALLBACK_PLAYBACK_RATE:.95,LOW_LATENCY_DEFAULT_CATCHUP_PLAYBACK_RATE:1.2,LOW_LATENCY_SEEK_AHEAD:1,ACCEPTABLE_TIMESHIFT_INACCURACY:3,IGNORE_HLS_AUDIO_GROUPS:!1,OPTIMIZE_AD_RESTORATION:!0,AD_RESTORATION_SEGMENT_PREFETCHING_DURATION:5,MIN_SAFE_BUFFER_LEVEL:3,THUMBNAIL_TO_PLAYER_SIZE_RATIO:.1,FAIRPLAY_IGNORE_DUPLICATE_INIT_DATA_KEY_ERRORS:!1,NO_QUOTA_EXCEEDED_ADJUSTMENT:!1,RESUME_LIVE_CONTENT_AT_PREVIOUS_POSITION_AFTER_AD_BREAK:!1,MIN_EFFECTIVE_SEGMENT_DOWNLOAD_TIME:.5,fixed:{APP_NAME:"html5",VERSION:"8.235.0"},CLEAR_BUFFERS_ON_SEEKING_BACKWARDS:!1,DROP_INVALID_SEGMENTS:!1,PROACTIVE_GAP_SKIP_DISTANCE_SECONDS:0,MIN_SIZE_FOR_GAP_SKIPPING:0,FORCE_SOFTWARE_DECRYPTION:!1,SEGMENT_LOADING_PROGRESS_CHECK_INTERVAL:.5,ENABLE_SEGMENT_INFO_PROVIDER_FROM_STORE:!1,HLS_SYNC_SEGMENT_PLAYBACK_TIME_VIA_MEDIA_SEQUENCE:!1,HLS_PARSE_MANIFEST_IN_WORKER:!1,HLS_CLEAR_BUFFERS_ON_DISCONTINUITY_SWITCHES:!1,PARSE_EMSG_BOXES:!0,WISH_ABR_PARAMS:t.WishDefaultConfig,HLS_BACKUP_STREAM_PENALTY_DURATION:30,CHECK_ALL_DRM_LICENSES_FOR_KID:!0,LL_HLS:!0,LL_HLS_SEGMENT_END_TIME_MATCHING_TOLERANCE:.1,LL_HLS_MAX_PLAYLIST_AGE_FOR_BLOCKING_REQUEST_IN_PART_TARGET_MULTIPLES:2,HLS_PARSE_NATIVE_METADATA:!0,PREFER_MANAGED_MEDIA_SOURCE:!0,INFINITE_RETRIES_FOR_LIVE:!0,MAX_SAFE_MSE_DURATION:1/0,ENABLE_MEDIA_ELEMENT_EVENT_LOGS:!1,DISABLE_PARALLEL_SEGMENT_LOADING:!1,ENABLE_MUTED_BACKGROUND_PLAYBACK:!1,POSTPONE_MANIFEST_UPDATES_UNTIL_PLAYBACK_START:!0,DASH_CLEAR_BUFFERS_ON_PERIOD_SWITCHES:!1,DISABLE_AUTO_RECOVERY_ON_DVR_WINDOW_EXCEEDED:!1,ENABLE_SGAI_HANDLING:!1,ENABLE_PERFORMANCE_LOGS:!1,ENABLE_HLS_CONTENT_STEERING:!1}},72537:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StorageHandler=void 0;var n=function(){function e(e){this.t0=e,this.r0="bitmovinplayer_config",this.data={},this.s0=function(){var e=new Date;return e.setTime(e.getTime()+316224e5),"expires="+e.toUTCString()}(),this.x0()}return e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){this.data[e]=t,this.y0()},e.prototype.setDisabled=function(e){this.disabled=e},e.prototype.u0=function(e){var t=this.v0();if(!t)return"";for(var n=e+"=",r=t.split(";"),i=0;i<r.length;i++){for(var o=r[i];" "===o.charAt(0);)o=o.substring(1);if(0===o.indexOf(n))return o.substring(n.length,o.length)}return""},e.prototype.v0=function(){try{return document.cookie}catch(e){return""}},e.prototype.w0=function(e){if(e)try{this.data=JSON.parse(e)}catch(e){}},e.prototype.x0=function(){this.t0?this.w0(localStorage.getItem(this.r0)):this.w0(this.u0(this.r0))},e.prototype.y0=function(){if(!this.disabled)try{this.t0?localStorage.setItem(this.r0,JSON.stringify(this.data)):document.cookie=this.r0+"="+JSON.stringify(this.data)+"; "+this.s0}catch(e){}},e}();t.StorageHandler=n},72786:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerBufferApiFactory=void 0;var n=function(){function e(){}return e.create=function(e){return new(function(){function t(){}return t.prototype.setTargetLevel=function(t,n,r){e.setTargetBufferLevel(t,n,r)},t.prototype.getLevel=function(t,n){return e.getBufferLevel(t,n)},t}())},e}();t.PlayerBufferApiFactory=n},74853:function(e,t,n){"use strict";var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayHelper=void 0,t.invert=function(e){return function(t,n,r){return!e(t,n,r)}},t.findIndexFromEnd=a,t.findIndexWithin=function(e,t,n,r){for(var i=t;i<n;i++)if(r(e[i]))return i;return-1},t.findFromEnd=function(e,t){return e[a(e,t)]},t.forEachFromIndex=function(e,t,n){for(;t<e.length;t++)n(e[t-1],e[t])},t.forceArray=function(e){return Array.isArray(e)?e:[e]},t.contains=function(e,t,n){return void 0===n&&(n=s),null!=e.find((function(e){return n(t,e)}))},t.shallowObjectMatcher=s,t.clearArray=function(e){e.splice(0,e.length)},t.removeEntriesFromStart=function(e,t){return t<1?[]:e.splice(0,t)};var i=n(70233),o=function(){function e(){}return e.comparePrimitiveArrays=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},e.stringToArrayWithoutEncoding=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},e.convertBufferSourceToUTF8=function(t,n){return void 0===n&&(n="utf-8"),t instanceof ArrayBuffer?t=new Uint8Array(t):t instanceof DataView&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),e.convertUint8ArrayToUtf8(t,n)},e.convertUint8ArrayToUtf8=function(e,t){if("undefined"!=typeof TextDecoder)return new TextDecoder(t).decode(e);for(var n=0,r="";n<e.length;){var i=e[n++];if(i>127)if(i>191&&i<224){if(n>=e.length||64&e[n]){r+="";continue}i=(31&i)<<6|63&e[n++]}else if(i>223&&i<240){if(n+1>=e.length||64&e[n]||64&e[n+1]){r+="";continue}i=(15&i)<<12|(63&e[n++])<<6|63&e[n++]}else{if(!(i>239&&i<248)){r+="";continue}if(n+2>=e.length||64&e[n]||64&e[n+1]||64&e[n+2]){r+="";continue}i=(7&i)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}i<=65535?r+=String.fromCharCode(i):i<=1114111?(i-=65536,r+=String.fromCharCode(i>>10|55296),r+=String.fromCharCode(1023&i|56320)):r+=""}return r},e.sort=function(e,t,n){if("string"==typeof t&&"[object Array]"===Object.prototype.toString.call(e)){var r;if(n||(n="asc"),"asc"===n)r=-1;else{if("desc"!==n)return;r=1}return e.length<2?e:e.sort((function(e,n){return e[t]<n[t]?r:e[t]>n[t]?-1*r:0}))}},e.append=function(t,n){var r=e.getTypedArrayType(t),i=e.getTypedArrayType(n);if(!r&&!i||r!==i)return null;var o=new r((t.byteLength+n.byteLength)/r.BYTES_PER_ELEMENT);return o.set(new r(t),0),o.set(new r(n),t.byteLength/r.BYTES_PER_ELEMENT),o},e.concatBuffers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(e=e.filter((function(e){return e}))).length)return null;var n=e.reduce((function(e,t){return e+t.byteLength}),0),r=new Uint8Array(n);return e.reduce((function(e,t){return r.set(new Uint8Array(t),e),e+t.byteLength}),0),r.buffer},e.getTypedArrayType=function(e){return e instanceof Uint8Array?Uint8Array:e instanceof Uint16Array?Uint16Array:e instanceof Uint32Array?Uint32Array:null},e.getArray=function(t){return e.getTypedArrayType(t)?[].slice.call(t):Array.isArray(t)?t:null},e.union=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return e.filter((function(e){return Boolean(e)})).forEach((function(e){return e.forEach((function(e){n.includes(e)||n.push(e)}))})),n},e.isArrayBuffer=function(e){return Boolean(e)&&e instanceof ArrayBuffer&&void 0!==e.byteLength},e.arrayBufferToAsciiString=function(t,n){return void 0===n&&(n=!0),e.sparseArrayBufferToAsciiString(t,1,0,n)},e.arrayBufferToBase64=function(e){for(var t="",n=new Uint8Array(e),r=0;r<n.length;r++)t+=String.fromCharCode(n[r]);return window.btoa(t)},e.sparseArrayBufferToAsciiString=function(e,t,n,r){void 0===t&&(t=2),void 0===n&&(n=0),void 0===r&&(r=!0);for(var i="",o=r?new Uint8Array(e):new Uint16Array(e),a=n;a<o.length;a+=t)i+=String.fromCharCode(o[a]);return i},e.intersect=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=[],i=t.filter((function(e){return Boolean(e)}));return e.union.apply(e,t).forEach((function(e){i.every((function(t){return t.includes(e)}))&&r.push(e)})),r},e.addAndMergeIntersects=function(t,n){var i=t.filter((function(t){return e.intersect(t,n).length>0})),o=t.filter((function(e){return!i.includes(e)}));return 0===i.length?r(r([],t,!0),[n],!1):r([e.union.apply(e,r(r([],i,!1),[n],!1))],o,!0)},e.extractAsciiString=function(e,t,n){for(var r=t+n,i="";t<r;t++)i+=String.fromCharCode(e.getUint8(t));return i},e.extractHexString=function(e,t,n){for(var r=t+n,o="";t<r;t++)o+=i.FormatHelper.intToHex(e.getUint8(t));return o},e.insertInSortedArray=function(e,t,n){var r=e.findIndex(n);return r<0?e.push(t):e.splice(r,0,t),e},e.removeUntilInSortedArray=function(e,t){var n=e.findIndex(t),r=-1===n?e.length:n;return 0===r?[]:e.splice(0,r)},e.toArray=function(e){try{if(!e||!e.length)return[];for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}catch(e){return[]}},e}();function a(e,t){var n;for(n=e.length-1;n>=0&&!t(e[n]);n--);return n}function s(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((function(n){return e[n]===t[n]}))}t.ArrayHelper=o},75108:function(e,t){"use strict";var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCodeMap=t.MediaErrorCode=void 0,function(e){e[e.MEDIA_ERR_NETWORK=2]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_DECODE=3]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=4]="MEDIA_ERR_SRC_NOT_SUPPORTED"}(n||(t.MediaErrorCode=n={})),function(e){e[e.MEDIA_ERR_DECODE=1301]="MEDIA_ERR_DECODE",e[e.MEDIA_ERR_NETWORK=1400]="MEDIA_ERR_NETWORK",e[e.MEDIA_ERR_SRC_NOT_SUPPORTED=1204]="MEDIA_ERR_SRC_NOT_SUPPORTED"}(r||(t.ErrorCodeMap=r={}))},75375:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.UI_SEEK_ISSUER_NAME=t.INTERNAL_ISSUER_NAME=t.ADVERTISING_RESTORE_ISSUER_NAME=t.ADVERTISING_ISSUER_NAME=t.STARTUP_ISSUER_NAME=void 0,t.STARTUP_ISSUER_NAME="startup",t.ADVERTISING_ISSUER_NAME="advertising-api",t.ADVERTISING_RESTORE_ISSUER_NAME="advertising-restore",t.INTERNAL_ISSUER_NAME="internal",t.UI_SEEK_ISSUER_NAME="ui-seek"},76253:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.SafariVideoElementWrapper=void 0;var i=n(51072),o=n(19274),a=n(79186),s=n(50239),u=n(55471),l=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.icb=!1,r.onPlaying=function(){var e;r.paused||r.icb||(r.icb=!0,null===(e=r.mediaElementEventHandler)||void 0===e||e.suppressEvent(o.MediaElementEvent.playing))},r.maybeTriggerDelayedPlaying=function(){var e,t;r.icb&&!r.paused&&!r.seeking&&function(e){return e.readyState>=HTMLMediaElement.HAVE_FUTURE_DATA}(r)&&(r.icb=!1,null===(e=r.mediaElementEventHandler)||void 0===e||e.clearEventSuppression(o.MediaElementEvent.playing),null===(t=r.mediaElementEventHandler)||void 0===t||t.triggerEvent(o.MediaElementEvent.playing))},r.hcb=new u.SafariCurrentTimeObserver(t,n),r.currentTimeCache=new s.CurrentTimeCache({eventHandler:r.eventHandler,getVideoElementCurrentTime:function(){return r.getWrappedElement().currentTime}}),r.jcb(),r}return r(t,e),t.prototype.jcb=function(){this.getWrappedElement().addEventListener(o.MediaElementEvent.timeupdate,this.maybeTriggerDelayedPlaying),this.getWrappedElement().addEventListener(o.MediaElementEvent.playing,this.onPlaying)},t.prototype.kcb=function(){this.getWrappedElement().removeEventListener(o.MediaElementEvent.timeupdate,this.maybeTriggerDelayedPlaying),this.getWrappedElement().removeEventListener(o.MediaElementEvent.playing,this.onPlaying)},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.currentTimeCache.get()},set:function(e){this.getWrappedElement().currentTime=e},enumerable:!1,configurable:!0}),t.prototype.dispose=function(){this.hcb.dispose(),this.currentTimeCache.dispose(),this.kcb(),e.prototype.dispose.call(this)},t.prototype.load=function(){this.mediaElementEventHandler.suppressEvent(o.MediaElementEvent.playing),this.icb=!1,this.hcb.reset(),this.currentTimeCache.reset(),e.prototype.load.call(this)},t.prototype.prime=function(){return e.prototype.prime.call(this).then((function(){return new Promise((function(e){return setTimeout(e,0)}))}))},t.prototype.play=function(){var e=this;this.mediaElementEventHandler.suppressEvent(o.MediaElementEvent.playing),this.mediaElementEventHandler.suppressEvent(o.MediaElementEvent.timeupdate,1);var t=this.element.play();return null==t&&(t=i.PlayPromise.new(this.context,this,this.drmHandler)),t.then((function(){return e.maybeTriggerDelayedPlaying()}))},t}(a.VideoElementWrapper);t.SafariVideoElementWrapper=l},76399:function(e,t){"use strict";var n=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.FilterIterator=t.ArrayIterator=t.EmptyIterator=void 0;var r=function(){function e(){}return e.prototype.toArray=function(){for(var e=[];this.hasNext();)e.push(this.next());return e},e}(),i=function(e){function t(){return e.call(this)||this}return n(t,e),t.prototype.hasNext=function(){return!1},t.prototype.next=function(){},t.getInstance=function(){return this.singletonInstance||(this.singletonInstance=new t),this.singletonInstance},t}(r);t.EmptyIterator=i;var o=function(e){function t(t){var n=e.call(this)||this;return n.data=t,n.sV=-1,n}return n(t,e),t.prototype.hasNext=function(){return this.tV=void 0,this.sV<this.data.length&&(this.sV++,this.tV=this.data[this.sV]),null!=this.tV},t.prototype.next=function(){return this.tV},t}(r);t.ArrayIterator=o;var a=function(e){function t(t,n){var r=e.call(this)||this;return r.iterator=t,r.filter=n,r}return n(t,e),t.prototype.hasNext=function(){var e;for(this.uV=void 0;this.iterator.hasNext();)if(e=this.iterator.next(),this.filter(e)){this.uV=e;break}return null!=this.uV},t.prototype.next=function(){return this.uV},t}(r);t.FilterIterator=a},77179:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.StartOptionsReducer=void 0,t.getStartTimeOffset=function(e){return e.startOptions.startTimeOffset};var o=n(3793),a=n(30012),s=n(25934),u=a.initialStartOptions,l=function(e,t){var n=t.payload;return i(i({},e),n)};t.StartOptionsReducer=(0,o.default)(u,((r={})[s.StartOptionsActionKey.InitStartTimeOffset]=l,r[s.StartOptionsActionKey.SetStartTimeOffset]=l,r))},77401:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.RequestError=void 0,function(e){e.Failed="request failed",e.Canceled="canceled by user",e.TimedOut="request has timed out"}(n||(t.RequestError=n={}))},77753:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isInstanceState=function(e){return(0,r.isObject)(e)&&["player","metrics"].every((function(t){return t in e}))};var r=n(94685)},78760:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.validateAppIdConfig=function(e){var t=e.get("tweaks"),n=(0,s.getCapabilities)()[a.CapabilityKey.isReactNative],l=(0,u.isUsingFileProtocol)();if(l||n){if(!t.app_id||l&&!t.file_protocol)throw new i.PlayerError(r.ErrorCode.SETUP_UNSUPPORTED_PROTOCOL,{tweaks:JSON.stringify(t)},"The current tweaks configuration is not valid: ".concat(t.app_id?"file_protocol":"app_id"," is missing."));!t.app_id||o.Environment.hostname&&!n||(o.Environment.hostname=t.app_id)}};var r=n(40306),i=n(3336),o=n(45202),a=n(7387),s=n(21513),u=n(47993)},78877:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getBufferEndSafetyMargin=function(e){var t=(0,i.getCapabilities)(),n=t.isChromium,u=t.isChrome,l=t.isVizio,c=t.isWebOS,d=t.isPlayStation4;if(c||l||(0,o.isTizen2018)()||(0,o.isTizen2019)()||d)return s;var p=(null==e?void 0:e.usedKeySystem.kind)===r.KeySystemKind.PLAYREADY;return n&&!u&&p?s:a};var r=n(33468),i=n(21513),o=n(15487),a=.25,s=1.25},79069:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LicensingLegacySslBackendBaseUrl=void 0,t.LicensingLegacySslBackendBaseUrl=atob("aHR0cHM6Ly9saWNlbnNpbmctbGVnYWN5LXNzbC1jb21wYXQuYml0bW92aW4uY29t")},79186:function(e,t,n){"use strict";var r,i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.VideoElementWrapper=void 0;var o,a=n(44468),s=n(26225);!function(e){e.Inline="inline",e.PictureInPicture="picture-in-picture",e.Fullscreen="fullscreen"}(o||(o={}));var u=((r={})[o.Inline]=a.ViewMode.Inline,r[o.PictureInPicture]=a.ViewMode.PictureInPicture,r[o.Fullscreen]=a.ViewMode.Fullscreen,r),l=function(e){function t(t,n){return e.call(this,t,n)||this}return i(t,e),Object.defineProperty(t.prototype,"droppedVideoFrames",{get:function(){var e,t;return null!==(t=null!==(e=this.element.droppedVideoFrames)&&void 0!==e?e:this.element.webkitDroppedFrameCount)&&void 0!==t?t:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoWidth",{get:function(){return this.element&&this.element.videoWidth||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"videoHeight",{get:function(){return this.element&&this.element.videoHeight||0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"webkitKeys",{get:function(){return this.element.webkitKeys},enumerable:!1,configurable:!0}),t.prototype.webkitGenerateKeyRequest=function(e,t){this.element.webkitGenerateKeyRequest(e,t)},Object.defineProperty(t.prototype,"width",{get:function(){return this.element.width},set:function(e){this.element.width=e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){return this.element.height},set:function(e){this.element.height=e},enumerable:!1,configurable:!0}),t.prototype.webkitAddKey=function(e,t,n,r){this.element.webkitAddKey(e,t,n,r)},t.prototype.webkitEnterFullScreen=function(){this.element.webkitEnterFullScreen()},t.prototype.webkitExitFullscreen=function(){this.element.webkitExitFullscreen()},t.prototype.webkitShowPlaybackTargetPicker=function(){return this.element.webkitShowPlaybackTargetPicker()},Object.defineProperty(t.prototype,"webkitDisplayingFullscreen",{get:function(){var e;return null!==(e=this.element.webkitDisplayingFullscreen)&&void 0!==e&&e},enumerable:!1,configurable:!0}),t.prototype.getViewModeFromPresentationMode=function(){return u[this.element.webkitPresentationMode]||(document.pictureInPictureElement===this.element?a.ViewMode.PictureInPicture:a.ViewMode.Inline)},t.prototype.getVideoPlaybackQuality=function(){var e,t;return null===(t=(e=this.element).getVideoPlaybackQuality)||void 0===t?void 0:t.call(e)},Object.defineProperty(t.prototype,"disableRemotePlayback",{set:function(e){this.element.disableRemotePlayback=e},enumerable:!1,configurable:!0}),t.prototype.isPictureInPictureAvailable=function(){if(!this.element)return!1;var e="function"==typeof this.element.webkitSupportsPresentationMode&&this.element.webkitSupportsPresentationMode(o.PictureInPicture)&&"function"==typeof this.element.webkitSetPresentationMode&&!/iP(hone|od)/i.test(navigator.userAgent),t="function"==typeof this.element.requestPictureInPicture&&"function"==typeof document.exitPictureInPicture&&document.pictureInPictureEnabled;return e||t},t.prototype.isPictureInPicture=function(){return!!this.isPictureInPictureAvailable()&&(this.element.webkitPresentationMode===o.PictureInPicture||document.pictureInPictureElement===this.element)},t.prototype.isAirplayActive=function(){return Boolean(this.element.webkitCurrentPlaybackTargetIsWireless)},t.prototype.enterPictureInPicture=function(){var e=this;this.isPictureInPictureAvailable()&&(this.element.webkitSetPresentationMode?this.element.webkitSetPresentationMode(o.PictureInPicture):this.element.requestPictureInPicture&&this.element.requestPictureInPicture().catch((function(t){e.context.logger.debug("Request for PiP failed",t)})))},t.prototype.exitPictureInPicture=function(){var e=this;this.isPictureInPicture()&&(this.element.webkitPresentationMode===o.PictureInPicture?this.element.webkitSetPresentationMode(o.Inline):document.pictureInPictureElement===this.element&&document.exitPictureInPicture().catch((function(t){e.context.logger.debug("Exiting of PiP failed",t)})))},t.prototype.webkitSetMediaKeys=function(e){this.element.webkitSetMediaKeys(e)},t}(s.MediaElementWrapper);t.VideoElementWrapper=l},79721:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DEFAULT_PERIOD_ID=void 0,t.DEFAULT_PERIOD_ID="0"},80438:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Timeline=void 0;var i=n(80813),o=n(3714),a=n(13531),s=n(57387),u=n(70850),l=n(58735),c=n(8719),d=function(){function e(e,t){var n=this;this.cues=[],this.activeCues=[],this.activeCueUpdates=[],this.timestampOffset=0,this.k9=function(e){var t=e.time||e.relativeTime||0;n.m9(t),n.n9(t),n.o9(t)},this.context=e,this.i9=e.internalPlayer,this.h9=t,this.j9=!1,t.allowDuplicates||(this.storedCueTracker=new c.StoredCueTracker),this.i9&&this.startListening()}return e.prototype.startListening=function(){this.j9||(this.j9=!0,this.i9.on(o.PlayerEvent.TimeChanged,this.k9))},e.prototype.stopListening=function(){this.j9&&(this.i9.off(o.PlayerEvent.TimeChanged,this.k9),this.j9=!1)},e.shouldCueBeActive=function(e,t){return e.end>=t&&e.start<=t},e.prototype.l9=function(e){for(var t=0;t<this.activeCues.length;t++)if(e===this.activeCues[t])return!0;return!1},e.prototype.m9=function(t){for(var n,r,i=0;i<this.activeCues.length;i++){var o=this.activeCues[i];e.shouldCueBeActive(o,t)||(this.activeCues.splice(i,1),i--,null===(r=(n=this.h9).onCueExit)||void 0===r||r.call(n,o))}},e.prototype.n9=function(t){for(var n,r,i=0;i<this.cues.length;i++){var o=this.cues[i];if(e.shouldCueBeActive(o,t)&&!this.l9(o)){if(!1===(null===(r=(n=this.h9).onCueEnter)||void 0===r?void 0:r.call(n,o)))continue;this.activeCues.push(o)}}},e.prototype.o9=function(e){for(var t,n,i=[],o=0,a=this.activeCues;o<a.length;o++){var s=a[o],u=y(s.updates,e);void 0!==u&&(i.push(u),this.p9(u)||null===(n=(t=this.h9).onCueUpdate)||void 0===n||n.call(t,r(r({},s),{content:r(r({},s.content),u.content)})))}this.activeCueUpdates=i},e.prototype.p9=function(e){return Boolean(this.activeCueUpdates.find((function(t){return t===e})))},e.prototype.addCue=function(e,t,n,i){var o,s=this;if(void 0===i&&(i=[]),!isNaN(e)&&!isNaN(t)&&n){var l=this.storedCueTracker?p({start:e,end:t,content:n}):void 0;if(!(null===(o=this.storedCueTracker)||void 0===o?void 0:o.has(l))){var c=i.map((function(e){return r(r({},e),{updateTime:e.updateTime+s.timestampOffset})})),d={start:e+this.timestampOffset,end:t+this.timestampOffset,content:n,updates:c};if(this.cues.length>0){var f=this.cues[this.cues.length-1];if(u.Util.deepEqual(n,f.content)&&e>=f.start&&e-.5<=f.end)return this.context.logger.isLevelEnabled(a.LogLevel.INSANE)&&this.context.logger.insane("changing end time of existing cue instead of adding a new cue ["+e+"-"+t+"] "+n),void(this.cues[this.cues.length-1].end=Math.max(t,f.end))}if(this.context.logger.isLevelEnabled(a.LogLevel.INSANE)){var h=JSON.stringify(n);h.length>500&&(h=h.substring(0,497)+"..."),this.context.logger.insane("add new cue ["+e+"-"+t+"] "+h)}this.storedCueTracker&&this.storedCueTracker.add(l),this.cues.push(d)}}},e.prototype.addCues=function(e,t){t=t||0;for(var n=0,r=0,i=e;r<i.length;r++){var o=i[r];if(o&&o.hasOwnProperty("start")&&o.hasOwnProperty("end")&&o.end>t){var a=f(o),s=h(o);this.addCue(o.start,o.end,a,s),n=Math.max(n,o.end)}}return n},e.prototype.removeMatchingCues=function(e){var t=this;this.cues=this.cues.filter((function(n){var r,i=e(n);return i&&(null===(r=t.storedCueTracker)||void 0===r||r.remove(p(n))),!i}))},e.prototype.removeCuesUntil=function(e){this.removeMatchingCues((function(t){return t.end<e}))},e.prototype.removeCues=function(){var e;this.hide(),this.cues=[],null===(e=this.storedCueTracker)||void 0===e||e.removeAll()},e.prototype.hide=function(){this.m9(-1),this.activeCues=[],this.activeCueUpdates=[]},e.prototype.show=function(){var e=this.context.serviceManager.get(i.ServiceName.PlayerStateService),t=(null==e?void 0:e.seekingOrTimeshifting)?e.targetPlaybackTime:this.i9.getCurrentTime();this.k9({time:t})},e.prototype.isVisible=function(){return!0},e.prototype.setTimestampOffset=function(e){this.timestampOffset=e},e.prototype.dispose=function(){var e;this.cues=[],this.activeCues=[],this.activeCueUpdates=[],null===(e=this.storedCueTracker)||void 0===e||e.dispose(),this.stopListening()},e.prototype.getCues=function(){return this.cues},e}();function p(e){return(0,l.isDateRangeMetadata)(e.content)?(0,l.calculateMetadataHash)(e.content):String((0,s.calcHash)(JSON.stringify({start:e.start,end:e.end,content:e.content})))}function f(e){var t={text:e.text};return"html"in e&&(t.html=e.html,t.text=t.text||t.html),"region"in e&&(t.region=e.region),"regionStyle"in e&&(t.regionStyle=e.regionStyle),"position"in e&&(t.position=e.position),"image"in e&&(t.image=e.image),"vtt"in e&&(t.vtt=e.vtt),t}function h(e){var t=[];return"updates"in e&&(t=e.updates.map((function(t){return{updateTime:t.updateTime,content:{html:t.html,text:e.text}}}))),t}function y(e,t){for(var n=e.length-1;n>=0;n--)if(e[n].updateTime<=t)return e[n]}t.Timeline=d},80813:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceName=void 0,function(e){e.AdaptationService="AdaptationService",e.DrmDetectorService="DrmDetectorService",e.DrmService="DrmService",e.HeartbeatService="HeartbeatService",e.LiveLatencyService="LiveLatencyService",e.ManifestCachingService="ManifestCachingService",e.ManifestLoadingService="ManifestLoadingService",e.ManifestService="ManifestService",e.ManifestUpdateSchedulingService="ManifestUpdateSchedulingService",e.MetadataParsedService="MetadataParsedService",e.PlayerStateService="PlayerStateService",e.SegmentService="SegmentService",e.SourceStoreService="SourceStoreService",e.StallTimeTrackerService="StallTimeTrackerService",e.StartOffsetService="StartOffsetService",e.StreamTimeService="StreamTimeService",e.SubtitleService="SubtitleService",e.SynchronizedTimeService="SynchronizedTimeService",e.ThumbnailService="ThumbnailService",e.TimedMetadataService="TimedMetadataService",e.SgaiService="SgaiService"}(n||(t.ServiceName=n={}))},81524:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getPlaybackPosition=void 0;var r=n(18192);t.getPlaybackPosition=function(e){return e.kind===r.PlaybackKind.Background?e.position:NaN}},81683:function(e,t){"use strict";function n(e){Object.freeze(e);var t="function"==typeof e,r=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(e).forEach((function(i){!r.call(e,i)||t&&("caller"===i||"callee"===i||"arguments"===i)||null===e[i]||"object"!=typeof e[i]&&"function"!=typeof e[i]||Object.isFrozen(e[i])||n(e[i])})),e}Object.defineProperty(t,"__esModule",{value:!0}),t.freeze=void 0,t.deepFreeze=n;var r=function(e){var t=e.getState();(function(e){return null!==e&&"object"==typeof e})(t)&&n(t)};t.freeze=function(e){return r(e),function(t){return function(n){r(e);try{return t(n)}finally{r(e)}}}}},84568:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.memoize=function(e,t){var n=new Map;function r(r){return function(n,r){var i=t?t.apply(void 0,r):e;return n.has(i)||n.set(i,e.apply(void 0,r)),n.get(i)}(t||0===r.length?n:i(n,r),r)}function i(e,t,n){void 0===n&&(n=0);var r,o=t.length-1===n,a=t[n];return e.has(a)?r=e.get(a):(r=new Map,e.set(a,r)),n+=1,o?r:i(r,t,n)}return function(){var e=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r(e)};return e.invalidate=function(){return n.clear()},e}()}},85434:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MimeTypeHelper=t.MimeType=void 0,t.isMediaTypeContained=function(e,t){return Object.keys(e).map((function(e){return a.getMediaType(e)})).includes(a.getMediaType(t))};var r,i=n(85625),o=n(44468);!function(e){e.VideoMp4="video/mp4",e.VideoTs="video/mp2t",e.AudioMp4="audio/mp4",e.AudioTs="audio/mp2t"}(r||(t.MimeType=r={}));var a=function(){function e(){}return e.isSubtitle=function(e){return this.isApplication(e)||this.isText(e)},e.isText=function(e){return e.includes("text")},e.isTtmlXml=function(e){return e.includes("ttml+xml")},e.isApplication=function(e){return e.includes("application")},e.isAV=function(e){return this.isVideo(e)||this.isAudio(e)},e.isVideo=function(e){return e.includes("video")},e.isUnknown=function(e){return e.includes("unknown")},e.isAudio=function(e){return e.includes("audio")},e.isImage=function(e){return e.includes("image")},e.isDash=function(e){return e.includes(i.ManifestMimeType.Dash)},e.isHls=function(e){return e.includes(i.ManifestMimeType.Hls)||e.toLowerCase().includes("vnd.apple.mpegurl")},e.isMP4=function(e){return e.includes("mp4")},e.getMediaType=function(e){return this.isVideo(e)?o.MediaType.Video:this.isAudio(e)?o.MediaType.Audio:this.isSubtitle(e)?o.MediaType.Subtitles:this.isImage(e)?o.MediaType.Thumbnails:void 0},e.extractContentType=function(e){return e.split("/")[0]},e.extractContainerType=function(e){var t=e.split("/");return t.length>1?t[1]:null},e}();t.MimeTypeHelper=a},85625:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestMimeType=void 0,function(e){e.Dash="application/dash+xml",e.Hls="application/x-mpegURL",e.Smooth="application/vnd.ms-sstr+xml"}(n||(t.ManifestMimeType=n={}))},85648:function(e,t){"use strict";var n,r,i,o,a,s,u;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerActionType=t.DestroyState=t.TimeShiftState=t.SeekState=t.PlaybackState=t.ConnectionState=t.RemoteControlType=void 0,function(e){e[e.None=0]="None",e[e.Websocket=1]="Websocket",e[e.GoogleCastV2=2]="GoogleCastV2",e[e.GoogleCastV3=3]="GoogleCastV3"}(n||(t.RemoteControlType=n={})),function(e){e[e.Connecting=0]="Connecting",e[e.Connected=1]="Connected",e[e.Disconnecting=2]="Disconnecting",e[e.Disconnected=3]="Disconnected"}(r||(t.ConnectionState=r={})),function(e){e[e.None=0]="None",e[e.Stopped=1]="Stopped",e[e.Play=2]="Play",e[e.Playing=3]="Playing",e[e.Paused=4]="Paused"}(i||(t.PlaybackState=i={})),function(e){e[e.None=0]="None",e[e.Seeking=1]="Seeking",e[e.SeekingIOS=2]="SeekingIOS",e[e.Seeked=3]="Seeked"}(o||(t.SeekState=o={})),function(e){e[e.None=0]="None",e[e.Shifting=1]="Shifting",e[e.Shifted=2]="Shifted"}(a||(t.TimeShiftState=a={})),function(e){e.None="none",e.Destroying="destroying",e.Destroyed="destroyed"}(s||(t.DestroyState=s={})),function(e){e.SetPlayerSeek="@instance/player/setplayerseek",e.SetPlayerPlayback="@instance/player/setplayerplayback",e.SetPlayerTimeshift="@instance/player/setplayertimeshift",e.SetPlayerStall="@instance/player/setplayerstall",e.SetRendererStall="@instance/player/setplayerrendererstall",e.SetPlayerHasBeenPlaying="@instance/player/setplayerhasbeenplaying",e.SetPlayerTargetPlaybackTime="@instance/player/setplayertargetplaybacktime",e.SetPlayerPlaybackSpeed="@instance/player/setplayerplaybackspeed",e.SetPlayerViewMode="@instance/player/setplayerviewmode",e.SetDestroyState="@instance/player/setDestroyState",e.AddPlayerPendingTransition="@instance/player/addplayerpendingtransition",e.FilterPlayerPendingTransition="@instance/player/filterplayerpendingtransition",e.RemovePlayerPendingTransition="@instance/player/removeplayerpendingtransition",e.ClearPlayerPendingTransitions="@instance/player/clearplayerpendingtransitions",e.ResetPlayerState="@instance/player/resetplayerstate",e.SetRemoteControlType="@instance/player/setremotecontroltype",e.SetConnectionState="@instance/player/setconnectionstate",e.UpdateSeekingProcess="@instance/player/updateseekingprocess"}(u||(t.PlayerActionType=u={}))},85902:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.VideoElementWrapperFactory=void 0;var r=n(88052),i=n(62756),o=n(7387),a=n(21513),s=n(15487),u=n(96907),l=n(76253),c=n(79186);function d(e,t){return{casUse:e,getConstructor:t}}var p=[d((function(){return(0,s.isSafari15orIOS15)()}),(function(){return u.Safari15VideoElementWrapper})),d((function(){return(0,a.getCapabilities)()[o.CapabilityKey.isSafari]}),(function(){return l.SafariVideoElementWrapper})),d((function(){return(0,a.getCapabilities)()[o.CapabilityKey.isTizen]&&r.ModuleManager.has(i.ModuleName.Tizen)}),(function(){return r.ModuleManager.get(i.ModuleName.Tizen).TizenVideoElementWrapper})),d((function(){return(0,a.getCapabilities)()[o.CapabilityKey.isWebOS]&&r.ModuleManager.has(i.ModuleName.Webos)}),(function(){return r.ModuleManager.get(i.ModuleName.Webos).WebosVideoElementWrapper})),d((function(){return(0,a.getCapabilities)()[o.CapabilityKey.isVidaa]&&r.ModuleManager.has(i.ModuleName.Vidaa)}),(function(){return r.ModuleManager.get(i.ModuleName.Vidaa).VidaaVideoElementWrapper})),d((function(){return(0,a.getCapabilities)()[o.CapabilityKey.isPlayStation5]&&r.ModuleManager.has(i.ModuleName.PlayStation5)}),(function(){return r.ModuleManager.get(i.ModuleName.PlayStation5).PlayStation5VideoElementWrapper})),d((function(){return(0,a.getCapabilities)()[o.CapabilityKey.isPlayStation4]&&r.ModuleManager.has(i.ModuleName.PlayStation4)}),(function(){return r.ModuleManager.get(i.ModuleName.PlayStation4).PlayStation4VideoElementWrapper}))],f=function(){function e(){}return e.createWrappedVideoElement=function(e,t){var n,r;if(t&&t.nodeName&&"video"===t.nodeName.toLowerCase())return new(null!==(r=null===(n=p.find((function(e){return(0,e.casUse)()})))||void 0===n?void 0:n.getConstructor())&&void 0!==r?r:c.VideoElementWrapper)(e,t)},e}();t.VideoElementWrapperFactory=f},86897:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getRendererBufferRangesMap=t.getBufferRangesMap=t.getBufferBlockLoadedRanges=t.getBufferMaxSize=t.hasBufferRangesChanged=t.hasBufferMaxSizeChanged=t.getRendererBufferedRanges=t.getBufferState=t.getBufferStateMap=t.DefaultBufferMaxSize=void 0,t.getLoadedRangesForMimeType=function(e,t){var n,r;return null!==(r=null===(n=e.bufferStateMap[t])||void 0===n?void 0:n.loadedRanges)&&void 0!==r?r:[]},t.getBufferStartTime=function(e){if(!e)return-1;var t=Object.keys(e).map((function(t){var n,r;return null===(r=null===(n=e[t].rendererRanges)||void 0===n?void 0:n[0])||void 0===r?void 0:r.start})).filter((function(e){return void 0!==e}));return t.length>0?Math.max.apply(Math,t):-1},t.getIsTimestampRollingOver=function(e){var t,n;return null!==(n=null===(t=e.buffer)||void 0===t?void 0:t.isTimestampRollingOver)&&void 0!==n&&n};var r=n(4524),i=n(85434);function o(e){var t;return null!==(t=e.loadedRanges)&&void 0!==t?t:[]}function a(e,t){return e!==t&&(0!==e.length||0!==t.length)&&e!==t}t.DefaultBufferMaxSize=0,t.getBufferStateMap=function(e){var t;return null===(t=null==e?void 0:e.buffer)||void 0===t?void 0:t.bufferStateMap},t.getBufferState=function(e){return null==e?void 0:e.buffer},t.getRendererBufferedRanges=function(e,t){var n;return t in e&&null!==(n=e[t].rendererRanges)&&void 0!==n?n:[]},t.hasBufferMaxSizeChanged=function(e){return function(n,r){var i=(0,t.getBufferState)(n),o=(0,t.getBufferState)(r);return(i?(0,t.getBufferMaxSize)(i,e):t.DefaultBufferMaxSize)!==(o?(0,t.getBufferMaxSize)(o,e):t.DefaultBufferMaxSize)}},t.hasBufferRangesChanged=function(e,n){var r=e.bufferStateMap,i=n.bufferStateMap,s=Object.keys(r),u=Object.keys(i);if(s.length!==u.length||s.some((function(e){return!u.includes(e)})))return!0;for(var l=0,c=s;l<c.length;l++){var d=c[l];if(a((0,t.getRendererBufferedRanges)(r,d),(0,t.getRendererBufferedRanges)(i,d)))return!0;if(a(o(r[d]),o(i[d])))return!0}return!1},t.getBufferMaxSize=function(e,n){var r;return n in e.bufferStateMap&&null!==(r=e.bufferStateMap[n].maxBufferSize)&&void 0!==r?r:t.DefaultBufferMaxSize},t.getBufferBlockLoadedRanges=function(e,t){return e?Object.keys(e.bufferStateMap).reduce((function(n,r){return n[r]=function(e,t){return o(e).filter((function(e){return e.bufferBlockId===t}))}(e.bufferStateMap[r],t),n}),{}):{}},t.getBufferRangesMap=function(e,t,n){return void 0===t?{}:function(e,t,n){var i=Object.keys(e.bufferStateMap),o=t.getSegmentStoreRangesMap(e,i),a=s(e,i);return Object.keys(a).forEach((function(e){return o[e].push(a[e])})),function(e,t,n){var i={};return e.forEach((function(e){return i[e]=r.BufferRangeHelper.mergeRanges(t[e].flatMap((function(e){return e})),n)})),i}(i,o,n)}(t,e,n)},t.getRendererBufferRangesMap=function(e,t){return function(n){var r=e.getBufferBlock(n),o=null==r?void 0:r.getAllKnownPeriodIds()[0];if(void 0===o||void 0===t||void 0===r)return{};var a=e.getMediaTypes(o).map((function(e){return e.mimeType})).filter((function(e){return i.MimeTypeHelper.isAV(e)}));return s(t,a)}};var s=function(e,n){var r={};return n.forEach((function(n){return r[n]=(0,t.getRendererBufferedRanges)(e.bufferStateMap,n)})),r}},86969:function(e,t,n){"use strict";var r=this&&this.__createBinding||(Object.create?function(e,t,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(t,n);i&&!("get"in i?!t.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return t[n]}}),Object.defineProperty(e,r,i)}:function(e,t,n,r){void 0===r&&(r=n),e[r]=t[n]}),i=this&&this.__exportStar||function(e,t){for(var n in e)"default"===n||Object.prototype.hasOwnProperty.call(t,n)||r(t,e,n)};Object.defineProperty(t,"__esModule",{value:!0}),t.util=t.Player=void 0;var o=n(43662);Object.defineProperty(t,"Player",{enumerable:!0,get:function(){return o.Player}}),i(n(20213),t);var a=n(64681);t.util=a,t.default=o.Player},87133:function(e,t,n){"use strict";var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AdaptationReducer=void 0;var o=n(3793),a=n(56960);t.AdaptationReducer=(0,o.default)({},((r={})[a.AdaptationActionType.SetPreferredBitrateForMimeType]=function(e,t){var n=t.payload;return function(e,t,n){var r;return i(i({},e),((r={})[t]=i(i({},e[t]),{preferredBitrate:n}),r))}(e,n.mimeType,n.preferredBitrate)},r[a.AdaptationActionType.ClearPreferredBitrateForMimeType]=function(e,t){return function(e,t){var n;return i(i({},e),((n={})[t]=i(i({},e[t]),{preferredBitrate:void 0}),n))}(e,t.payload.mimeType)},r))},87244:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isSwitchingBufferBlocks=function(e){var t,n=null==e?void 0:e.getState();return!!n&&(null===(t=n.buffer)||void 0===t?void 0:t.isBufferBlockSwitchOngoing)}},87827:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.subscribeToSeekedOrTimeshifted=t.subscribeToSeeked=t.subscribeToSeek=t.getRemoteControlState=t.getIsRendererStalled=t.isDestroyed=t.isBeingDestroyed=t.getIsSeekedOrTimeshifted=t.getIsSeekingOrTimeshifting=t.getPlaybackSpeed=t.getTargetPlaybackTime=t.getIsTimeShifted=t.getIsTimeShifting=t.getIsSeeked=t.getIsSeeking=t.getIsInitialSeek=t.getIsInitialStall=t.getIsStopped=t.getIsPaused=t.getIsPlay=t.getIsPlaying=t.getIsInitialPlayback=t.getPlayerState=void 0;var r=n(23068),i=n(93204),o=n(85648);t.getPlayerState=function(e){return e.player},t.getIsInitialPlayback=function(e){return e.playbackState===o.PlaybackState.None},t.getIsPlaying=function(e){return e.playbackState===o.PlaybackState.Playing},t.getIsPlay=function(e){return e.playbackState===o.PlaybackState.Play},t.getIsPaused=function(e){return e.playbackState===o.PlaybackState.Paused},t.getIsStopped=function(e){return e.playbackState===o.PlaybackState.Stopped},t.getIsInitialStall=function(e){return!e.hasBeenPlaying&&e.isStalled},t.getIsInitialSeek=function(e){return e.seekState===o.SeekState.None},t.getIsSeeking=function(e){return[o.SeekState.Seeking,o.SeekState.SeekingIOS].includes(e.seekState)},t.getIsSeeked=function(e){return e.seekState===o.SeekState.Seeked},t.getIsTimeShifting=function(e){return e.timeShiftState===o.TimeShiftState.Shifting},t.getIsTimeShifted=function(e){return e.timeShiftState===o.TimeShiftState.Shifted},t.getTargetPlaybackTime=function(e){return e.targetPlaybackTime},t.getPlaybackSpeed=function(e){return e.playbackSpeed},t.getIsSeekingOrTimeshifting=function(e){return(0,t.getIsSeeking)(e)||(0,t.getIsTimeShifting)(e)},t.getIsSeekedOrTimeshifted=function(e){return(0,t.getIsSeeked)(e)||(0,t.getIsTimeShifted)(e)},t.isBeingDestroyed=function(e){return e.destroyState!==o.DestroyState.None},t.isDestroyed=function(e){return e.destroyState===o.DestroyState.Destroyed},t.getIsRendererStalled=function(e){return e.isRendererStalled},t.getRemoteControlState=function(e){return e.remoteControlState},t.subscribeToSeek=function(e,n){return(0,i.subscribe)(e)((function(e){return e&&(0,t.getPlayerState)(e)}),n,(function(e,n){return(0,r.isDefined)(n)&&(0,r.isDefined)(e)&&!(0,t.getIsSeeking)(n)&&(0,t.getIsSeeking)(e)}))},t.subscribeToSeeked=function(e,n){return(0,i.subscribe)(e)((function(e){return e&&(0,t.getPlayerState)(e)}),n,(function(e,n){return(0,r.isDefined)(n)&&(0,r.isDefined)(e)&&(0,t.getIsSeeking)(n)&&!(0,t.getIsSeeking)(e)}))},t.subscribeToSeekedOrTimeshifted=function(e,n){return(0,i.subscribe)(e)((function(e){return e&&(0,t.getPlayerState)(e)&&(0,t.getIsSeekingOrTimeshifting)((0,t.getPlayerState)(e))}),n,(function(e,t){return!0===t&&!1===e}))}},88052:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleManager=void 0;var r=n(40306),i=n(3336),o=n(95880),a=function(){function e(){}return e.initialize=function(){this.modules||(this.modules={})},e.add=function(e){if(this.initialize(),!e)throw new i.PlayerError(r.ErrorCode.MODULE_INVALID_DEFINITION,void 0,"Cannot add the module: no module definition was provided to the API.");if(!e.name)throw new i.PlayerError(r.ErrorCode.MODULE_INVALID_DEFINITION,void 0,"Cannot add the module: no `name` property was provided to the module definition.");if(!e.module)throw new i.PlayerError(r.ErrorCode.MODULE_INVALID_DEFINITION,void 0,"Cannot add the module: no `module` property was provided to the module definition.");if(e.dependencies){for(var t=0,n=e.dependencies;t<n.length;t++){var a=n[t];if(!this.has(a))throw new o.PlayerModuleMissingError(e.name,a)}if("function"!=typeof e.module)throw new i.PlayerError(r.ErrorCode.MODULE_INVALID_DEFINITION_DEPENDENCY,{name:e.name},"Cannot add the module: modules with dependencies must pass a deferred loading function to the `ModuleDefinition.module` property.")}var s=e.module;"function"==typeof s&&(s=s()),this.modules[e.name]={moduleDefinition:e,module:s},e.hooks&&e.hooks.add&&e.hooks.add(e.module)},e.remove=function(e){var t;if(this.modules){if(!this.modules[e])throw new o.PlayerModuleMissingError(e);var n=this.modules[e].moduleDefinition;(null===(t=n.hooks)||void 0===t?void 0:t.remove)&&n.hooks.remove(n.module),delete this.modules[e]}},e.get=function(e,t){void 0===t&&(t=!0),this.initialize();var n=this.modules[e];if(n&&n.module)return n.module;if(t)throw new o.PlayerModuleMissingError(e)},e.has=function(e){return void 0!==this.get(e,!1)},e.getModuleNames=function(){return Object.getOwnPropertyNames(this.modules)},e.getModuleDefinitions=function(){var e=this;return this.getModuleNames().map((function(t){return e.modules[t]}))},e.callSetupHooks=function(e){this.getModuleDefinitions().filter((function(e){return e.moduleDefinition.hooks&&e.moduleDefinition.hooks.setup})).forEach((function(t){return t.moduleDefinition.hooks.setup(t.module,e)}))},e.callDestroyHooks=function(e){var t=this.getModuleDefinitions().filter((function(e){return e.moduleDefinition.hooks&&e.moduleDefinition.hooks.destroy})).map((function(t){return t.moduleDefinition.hooks.destroy(t.module,e)}));return Promise.all(t).then((function(){}))},e}();t.ModuleManager=a},88210:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.EnumerableValue=function(e,t){return t.addInitializer((function(){var e=Object.getOwnPropertyDescriptor(this,t.name)||Object.getOwnPropertyDescriptor(Object.getPrototypeOf(this),t.name);e&&Object.defineProperty(this,t.name,n(n({},e),{enumerable:!0}))})),e}},88844:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.clearTimeoutIfDefined=function(e){e&&r.default.clearTimeout(e)},t.clearIntervalIfDefined=function(e){e&&r.default.clearInterval(e)};var r=n(4081)},88847:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Suspendable=void 0,t.suspend=function(e){e&&e.suspend()},t.restore=function(e){e&&e.restore()};var n=function(){function e(e){this.FW=!1,this.GW=null==e?void 0:e.onSuspend,this.HW=null==e?void 0:e.onRestore}return e.prototype.suspend=function(){var e;this.FW||(this.FW=!0,null===(e=this.GW)||void 0===e||e.call(this))},e.prototype.restore=function(){var e;this.FW&&(this.FW=!1,null===(e=this.HW)||void 0===e||e.call(this))},e.prototype.isSuspended=function(){return this.FW},e.prototype.dispose=function(){this.FW=null,this.GW=null,this.HW=null},e}();t.Suspendable=n},89279:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ImpressionCall=void 0;var r=n(45202),i=n(4129),o=n(29669),a=n(7387),s=n(21513),u=n(79069),l=function(){function e(e,t){this.logger=e,this.LZ=!1,this.MZ=u.LicensingLegacySslBackendBaseUrl+"/impression",this.setImpressionServerUrl(t)}return e.prototype.NZ=function(e){return new i.DefaultContentLoader({settings:{RETRY_DELAY:0,INCREASE_RETRY_DELAY:!1,INCREASE_RETRY_DELAY_BASE_SEC:0,MAX_INCREASE_RETRY_DELAY_SEC:0,QUERY_PARAMETERS:[],HTTP_HEADERS:null,XHR_TIMEOUT:2e4,DISABLE_RETRY_FOR_RESPONSE_STATUS:{}},logger:this.logger,config:{network:{requestApi:e}}})},e.prototype.issue=function(e,t,n){var i,a=this;if(this.LZ)return Promise.resolve(void 0);this.JZ=null!==(i=this.JZ)&&void 0!==i?i:this.NZ(n),this.LZ=!0;var u={domain:r.Environment.hostname,key:e,version:r.Environment.VERSION_NUMBER,type:"web:"+t,platform:c()};return this.JZ.load(this.KZ,o.HttpRequestMethod.POST,null,JSON.stringify(u)).then((function(e){return e}),(function(r){return a.KZ!==a.MZ&&(0,s.getCapabilities)().isTizen?(a.LZ=!1,a.setImpressionServerUrl(a.MZ),a.issue(e,t,n)):r}))},e.prototype.setImpressionServerUrl=function(e){e&&(this.KZ=e)},e.prototype.reset=function(){this.LZ=!1},e.prototype.dispose=function(){var e;null===(e=this.JZ)||void 0===e||e.dispose()},e}();function c(){return(0,s.getCapabilities)()[a.CapabilityKey.isReactNative]?"Kepler:unknown":"generic"}t.ImpressionCall=l},89927:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.toSeconds=function(e){return e/n},t.toMilliSeconds=function(e){return e*n};var n=1e3},90040:function(module){var URL=window.URL||window.webkitURL;module.exports=function(content,url){try{try{var blob;try{var BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;blob=new BlobBuilder,blob.append(content),blob=blob.getBlob()}catch(e){blob=new Blob([content])}return new Worker(URL.createObjectURL(blob))}catch(e){return new Worker("data:application/javascript,"+encodeURIComponent(content))}}catch(e){try{var exportReturnStatement="return __webpack_require__(",exportStatement="var __webpack_exports__ = __webpack_require__(";return"!"===content.substring(0,1)&&(content=content.substring(1,content.length-1),content="("+content+")"),content.indexOf(exportStatement)>0&&(content=content.replace(exportStatement,exportReturnStatement)),eval(content).getContext()}catch(e){return{}}}}},90408:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.maybeFireDurationChangedEvent=function(e,t,n){null!=e&&e!==t&&n&&n.dispatchEvent(r.PlayerEvent.DurationChanged,{from:e,to:t})},t.createPlayerErrorFromMediaError=function(e,t){var n;void 0===t&&(t=!1);var r=a(e)?e.errorObject.code:e.code,s=a(e)?e.errorMessage:JSON.stringify(e),u=a(e)?e.errorObject:{errorMessage:JSON.stringify(e),code:r};t&&(u.exception=s);var l=null!==(n=o.ErrorCodeMap[o.MediaErrorCode[r]])&&void 0!==n?n:i.ErrorCode.UNKNOWN;return new i.PlayerError(l,u,"The video element has thrown a media error.")};var r=n(3714),i=n(20213),o=n(75108);function a(e){return"errorObject"in e}},90571:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerConfiguration=void 0;var i=n(40306),o=n(3336),a=n(44468),s=n(70962),u=n(21513),l=n(70850),c=n(53129),d=function(){function e(e){if(!e)throw new o.PlayerError(i.ErrorCode.SETUP_MISSING_CONFIGURATION,void 0,"The player must be configured with a valid `PlayerConfig`, but no configuration was provided.");this.GZ={},this.HZ=e,this.IZ()}return e.mergeSizeConfig=function(e,t){var n,r,i=!1,o=!1,a=!1;if(t.style?(a=Boolean(t.style.width),o=Boolean(t.style.height),i=Boolean(t.style.aspectratio)):t.style={},e.style=e.style||{},i){var s=(0,l.parseAspectRatio)(null!==(r=null===(n=c.DefaultConfig.style)||void 0===n?void 0:n.aspectratio)&&void 0!==r?r:16/9);e.style.aspectratio=(0,l.parseAspectRatio)(t.style.aspectratio)||s}else e.style.aspectratio=c.DefaultConfig.style.aspectratio;a&&!isNaN(String(t.style.width).slice(-1))&&(e.style.width=t.style.width+"px"),o&&!isNaN(String(t.style.height).slice(-1))&&(e.style.height=t.style.height+"px")},e.prototype.IZ=function(){var t=this;l.Util.deepCopyMulti(this.GZ,c.DefaultConfig,this.HZ);var n=this.HZ.adaptation||{},r={};l.Util.deepCopy(r,n),delete r.mobile,delete r.desktop,(0,u.getCapabilities)().isMobile?this.GZ.adaptation=l.Util.deepCopyMulti({},c.DefaultConfig.adaptation.mobile,r,n.mobile):this.GZ.adaptation=l.Util.deepCopyMulti({},c.DefaultConfig.adaptation.desktop,r,n.desktop);var i=this.GZ.adaptation.bitrates;["minSelectableAudioBitrate","maxSelectableAudioBitrate","minSelectableVideoBitrate","maxSelectableVideoBitrate"].forEach((function(e){t.GZ.adaptation.bitrates[e]=l.Util.extractBitrateFromString(e.substring(0,3),i[e])})),e.mergeSizeConfig(this.GZ,this.HZ)},e.overwriteConfigEntries=function(e,t,n){if(t.hasOwnProperty(n)){var r=t[n];for(var i in r)r.hasOwnProperty(i)&&"fixed"!==i&&e.hasOwnProperty(i.toUpperCase())?e[i.toUpperCase()]=r[i]:r.hasOwnProperty(i)&&"MAX_BUFFER_LEVEL"===i.toUpperCase()&&(e.TARGET_BUFFER_LEVEL[a.MediaType.Video][a.BufferType.ForwardDuration]=r[i],e.TARGET_BUFFER_LEVEL[a.MediaType.Audio][a.BufferType.ForwardDuration]=r[i])}},e.prototype.getSettings=function(t){var n;void 0===t&&(t=this.GZ);var i={},o=t.adaptation||{};return l.Util.deepCopy(i,s.DefaultSettings),e.overwriteConfigEntries(i,t,"tweaks"),e.overwriteConfigEntries(i,t,"cast"),o.bitrates=o.bitrates||{},o.exclude=o.exclude||!1,i.EXCLUDE_DISALLOWED_REPRESENTATIONS=o.exclude,i.MIN_SELECTABLE_AUDIO_BITRATE=o.bitrates.minSelectableAudioBitrate||0,i.MAX_SELECTABLE_AUDIO_BITRATE=o.bitrates.maxSelectableAudioBitrate||1/0,i.MIN_SELECTABLE_VIDEO_BITRATE=o.bitrates.minSelectableVideoBitrate||0,i.MAX_SELECTABLE_VIDEO_BITRATE=o.bitrates.maxSelectableVideoBitrate||1/0,i.QUALITY_THRESHOLD=o.qualityThreshold||i.QUALITY_THRESHOLD,i.QUALITY_UPPER_THRESHOLD=o.qualityUpperThreshold||i.QUALITY_UPPER_THRESHOLD,i.WISH_ABR_PARAMS=r(r({},s.DefaultSettings.WISH_ABR_PARAMS),(null===(n=t.tweaks)||void 0===n?void 0:n.wish_abr_params)||{}),i},e.prototype.getUserConfig=function(){return this.HZ},e.prototype.update=function(e){var t={};for(var n in l.Util.deepCopy(t,e),t)t.hasOwnProperty(n)&&(this.GZ[n]=t[n],this.HZ[n]=t[n])},e.prototype.get=function(e,t){return void 0===t&&(t=this.GZ),e?t.hasOwnProperty(e)?this.GZ[e]:{}:t},e.prototype.playback=function(){return this.get("playback")},e.prototype.style=function(){return this.get("style")},e.prototype.buffer=function(){return this.get("buffer")},e.prototype.tweaks=function(){return this.get("tweaks")},e.prototype.adaptation=function(){return this.get("adaptation")},e.prototype.advertising=function(){return this.get("advertising")},e.prototype.cast=function(){return this.get("cast")},e.prototype.logs=function(){return this.get("logs")},e.prototype.licensing=function(){return this.get("licensing")},e.prototype.live=function(){return this.get("live")},e.prototype.location=function(){return this.get("location")},e}();t.PlayerConfiguration=d},91565:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeCapabilities=function(){return(0,o.createAction)(s,l())},t.setCapabilityKey=function(e,t){return(0,o.createAction)(u,{key:e,value:t})};var r=n(47993),i=n(15487),o=n(35267),a=n(7387),s=a.CapabilityActionType.InitCapabilities,u=a.CapabilityActionType.SetCapability,l=function(){var e;return{isPlayStation5:i.isPlayStation5(),isPlayStation4:i.isPlayStation4(),isMobile:i.isMobile(),isTizen:i.isTizen(),isSafari:i.isSafari(),isIOS:i.isIOS(),isSafariIOS:i.isSafariIOS(),isEdge:i.isEdge(),isLegacyEdge:i.isLegacyEdge(),isEdgeChromium:i.isEdgeChromium(),isChrome:i.isChrome(),isChromium:i.isChromium(),isFirefox:i.isFirefox(),isFirefoxIOS:i.isFirefoxIOS(),isWebOS:i.isWebOS(),isVidaa:i.isVidaa(),isVizio:i.isVizio(),isReactNative:i.isReactNative(),MSESafari:r.MSESafari(),isLocalStorageAvailable:r.isLocalStorageAvailable(),isInlinePlaybackRestricted:r.isInlinePlaybackRestricted(),edgeVersion:i.getEdgeVersion(),IOSVersion:i.getIOSVersion(),safariVersion:i.getSafariVersion(),webOSChromiumVersion:null!==(e=i.getWebOsChromiumVersion().major)&&void 0!==e?e:0,techSupportedByModules:r.getTechSupportedByModules(),techSupportedByPlatform:r.getTechSupportedByPlatform(),techSupportedByModulesOnPlatform:r.getTechSupportedByModulesOnPlatform()}}},91678:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.initializeMetricsForMimeType=function(e,t,n){return void 0===n&&(n=e),(0,r.createAction)(i.MetricsActionType.InitializeMetricsForMimeType,{mimeType:e,settings:t,saveUnderName:n})},t.removeMetricsForMimeType=function(e){return(0,r.createAction)(i.MetricsActionType.RemoveMetricsForMimeType,{mimeType:e})},t.addMetricsValue=function(e,t,n){return(0,r.createAction)(i.MetricsActionType.AddMetricsValue,{mimeType:e,metricType:t,value:n})},t.removeMetricsValue=function(e,t,n){return(0,r.createAction)(i.MetricsActionType.RemoveMetricsValue,{mimeType:e,metricType:t,value:n})},t.clearMetricsHistory=function(e,t){return(0,r.createAction)(i.MetricsActionType.ClearMetricsHistory,{mimeType:e,metricType:t})},t.setBufferLogicActivationThreshold=function(e,t){return(0,r.createAction)(i.MetricsActionType.SetBufferLogicActivationThreshold,{mimeType:e,threshold:t})};var r=n(35267),i=n(33436)},91829:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t,n){return(t=function(e){var t=function(e){if("object"!=r(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=r(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==r(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:function(){return c},applyMiddleware:function(){return E},bindActionCreators:function(){return y},combineReducers:function(){return f},compose:function(){return v},createStore:function(){return d},legacy_createStore:function(){return p}});var u=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}(),l=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function d(e,t,n){var r;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(s(1));return n(d)(e,t)}if("function"!=typeof e)throw new Error(s(2));var i=e,o=t,a=[],l=a,p=!1;function f(){l===a&&(l=a.slice())}function h(){if(p)throw new Error(s(3));return o}function y(e){if("function"!=typeof e)throw new Error(s(4));if(p)throw new Error(s(5));var t=!0;return f(),l.push(e),function(){if(t){if(p)throw new Error(s(6));t=!1,f();var n=l.indexOf(e);l.splice(n,1),a=null}}}function v(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(s(7));if(void 0===e.type)throw new Error(s(8));if(p)throw new Error(s(9));try{p=!0,o=i(o,e)}finally{p=!1}for(var t=a=l,n=0;n<t.length;n++)(0,t[n])();return e}return v({type:c.INIT}),(r={dispatch:v,subscribe:y,getState:h,replaceReducer:function(e){if("function"!=typeof e)throw new Error(s(10));i=e,v({type:c.REPLACE})}})[u]=function(){var e,t=y;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(s(11));function n(){e.next&&e.next(h())}return n(),{unsubscribe:t(n)}}})[u]=function(){return this},e},r}var p=d;function f(e){for(var t=Object.keys(e),n={},r=0;r<t.length;r++){var i=t[r];"function"==typeof e[i]&&(n[i]=e[i])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:c.INIT}))throw new Error(s(12));if(void 0===n(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var r=!1,i={},u=0;u<a.length;u++){var l=a[u],c=n[l],d=e[l],p=c(d,t);if(void 0===p)throw t&&t.type,new Error(s(14));i[l]=p,r=r||p!==d}return(r=r||a.length!==Object.keys(e).length)?i:e}}function h(e,t){return function(){return t(e.apply(this,arguments))}}function y(e,t){if("function"==typeof e)return h(e,t);if("object"!=typeof e||null===e)throw new Error(s(16));var n={};for(var r in e){var i=e[r];"function"==typeof i&&(n[r]=h(i,t))}return n}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function E(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),r=function(){throw new Error(s(15))},i={getState:n.getState,dispatch:function(){return r.apply(void 0,arguments)}},o=t.map((function(e){return e(i)}));return r=v.apply(void 0,o)(n.dispatch),a(a({},n),{},{dispatch:r})}}}},92006:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerConfigBuilder=void 0;var i=n(60865),o=n(65567),a=n(15487),s=n(70850),u=function(){function e(e){"string"==typeof e?this.zG={key:e}:(this.zG={},s.Util.deepCopy(this.zG,e))}return e.prototype.optimizeForPlatform=function(e){var t=(null!=e?e:{}).appId;if((0,a.isTizen)()||(0,a.isWebOS)()){var n=(0,o.getTvDefaultConfig)(t);s.Util.deepCopy(this.zG,n)}return this},e.prototype.enableLowLatency=function(e){var t=(0,i.getLowLatencyDefaultConfig)(e);return s.Util.deepCopy(this.zG,t),this},e.prototype.mergeWith=function(e){return s.Util.deepCopy(this.zG,e),this},e.prototype.build=function(){return r({},this.zG)},e}();t.PlayerConfigBuilder=u},93204:function(e,t){"use strict";function n(e){return function(t,n,r){void 0===r&&(r=function(){return!0});var i=t(e.getState());return e.subscribe((function(){var o=t(e.getState()),a=i;i=o,null!=o&&o!==a&&r(o,a)&&n(o,a)}))}}function r(e){return function(t,r,i){void 0===i&&(i=function(){return!0});var o=n(e)(t,(function(e){o(),r(e)}),i);return o}}Object.defineProperty(t,"__esModule",{value:!0}),t.subscribe=n,t.waitForStateChange=r,t.waitForStateChangeThen=function(e){return function(t,n){return void 0===n&&(n=function(){return!0}),new Promise((function(i){r(e)(t,(function(e){i(e)}),n)}))}}},93907:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StallTimeTrackerService=void 0;var r=n(91678),i=n(46151),o=n(33436),a=n(94685),s=n(89927),u=function(){function e(e){this.context=e,this.context=e,this.AZ=0}return e.prototype.startStall=function(){this.zZ=Date.now()},e.prototype.endStall=function(){var e=(0,s.toSeconds)(Date.now()-this.zZ);this.AZ+=e,this.BZ()},e.prototype.BZ=function(){var e=this;if((0,a.isContextAvailable)(this.context)){var t=(0,i.getMetricsState)(this.context.store.getState());Object.keys(t).forEach((function(t){return e.context.store.dispatch((0,r.addMetricsValue)(t,o.MetricType.StalledSeconds,e.AZ))}))}},e.prototype.reset=function(){this.AZ=0},e.prototype.dispose=function(){},e}();t.StallTimeTrackerService=u},94685:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e},t.isContextAvailable=function(e){return void 0!==e&&!e.isDisposed}},95880:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerModuleMissingError=void 0;var i=n(40306),o=function(e){function t(t,n){return n?e.call(this,i.ErrorCode.MODULE_DEPENDENCY_MISSING,{name:t,dependency:n},"The ".concat(t," module requires the ").concat(n," module to be included as well."))||this:e.call(this,i.ErrorCode.MODULE_MISSING,{name:t},"The ".concat(t," module is required to play this stream."))||this}return r(t,e),t}(n(3336).PlayerError);t.PlayerModuleMissingError=o},96266:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.XhrEvent=void 0,function(e){e.ReadyStateChange="readystatechange",e.Abort="abort",e.Error="error",e.Load="load",e.LoadEnd="loadend",e.LoadStart="loadstart",e.Progress="progress",e.Timeout="timeout"}(n||(t.XhrEvent=n={}))},96556:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.MediaElementEventHandler=void 0;var r=n(13531),i=n(4081),o=n(88844),a=n(70850),s=n(19274),u=function(){function e(t,n){var r=this;this.handleVideoElementErrorEvent=function(t){if(r.L8(t.type,t),!r.shouldSuppressEvent(t)){if(r.E8.error){t.errorObject={code:r.E8.error.code};var n=e.getMediaErrorName(r.E8.error.code);n&&(t.errorObject.mediaError=n),"msExtendedCode"in r.E8.error&&r.E8.error.msExtendedCode&&(t.errorObject.systemCode=r.E8.error.msExtendedCode.toString(16)),r.E8.error.message&&(t.errorObject.message=r.E8.error.message),t.errorMessage=Object.keys(t.errorObject).map((function(e){return e+": "+t.errorObject[e]})).join(", ")}else t.errorMessage="Video element triggered an Error, but has no error object.";r.callAllHandlers(t)}},this.handleVideoElementEvent=function(e){r.L8(e.type),r.shouldSuppressEvent(e)||r.callAllHandlers(e)},this.D8=t,this.E8=n,this.F8={},this.G8={},this.H8=[],this.I8=!1,this.J8=!1,this.attachVideoEventHandlers()}return Object.defineProperty(e.prototype,"isAd",{get:function(){return this.I8},set:function(e){this.I8=e},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPriming",{get:function(){return this.J8},set:function(e){this.J8=e},enumerable:!1,configurable:!0}),e.prototype.suppressEvent=function(e,t,n){var r=this;if(void 0===t&&(t=1e8),this.G8[e]=this.G8[e]||0,this.G8[e]+=t,n&&n>0){var i=window.setTimeout((function(){r.G8[e]=Math.max(r.G8[e]-t,0),r.H8.splice(r.H8.indexOf(i),1)}),n);this.H8.push(i)}},e.prototype.clearEventSuppression=function(e){this.G8[e]&&(this.G8[e]=0)},e.prototype.K8=function(){var e=this;Object.keys(this.G8).forEach((function(t){return e.clearEventSuppression(t)})),this.H8.forEach((function(e){return(0,o.clearTimeoutIfDefined)(e)}))},e.prototype.triggerEvent=function(e,t){void 0===t&&(t={type:e}),e===s.MediaElementEvent.error?this.handleVideoElementErrorEvent(t):this.handleVideoElementEvent(t)},e.prototype.attachVideoEventHandlers=function(){var e=this;Object.keys(s.MediaElementEvent).forEach((function(t){t===s.MediaElementEvent.error?e.E8.addEventListener(s.MediaElementEvent.error,e.handleVideoElementErrorEvent):e.E8.addEventListener(t,e.handleVideoElementEvent)}))},e.prototype.removeVideoEventHandlers=function(){var e=this;Object.keys(s.MediaElementEvent).forEach((function(t){e.E8.removeEventListener(t,e.handleVideoElementEvent)})),this.E8.removeEventListener(s.MediaElementEvent.error,this.handleVideoElementErrorEvent)},e.prototype.shouldSuppressEvent=function(t){return!!this.isAd||!(!this.isPriming||!e.PRIME_RELATED_EVENTS.includes(t.type))||this.G8[t.type]>0&&(this.G8[t.type]--,!0)},e.prototype.L8=function(e,t){var n,i;if(null===(i=null===(n=this.D8)||void 0===n?void 0:n.logger)||void 0===i?void 0:i.isLevelEnabled(r.LogLevel.DEBUG)){var o=this.D8.logger,a="[MediaElementEvent] ".concat(e);this.D8.settings.ENABLE_MEDIA_ELEMENT_EVENT_LOGS?t?o.debug(a,t):o.debug(a):o.isLevelEnabled(r.LogLevel.INSANE)&&(t?o.insane(a,t):o.insane(a))}},e.prototype.callAllHandlers=function(e){var t=this;this.F8[e.type]&&this.F8[e.type].forEach((function(n){t.M8(n,e)}))},e.prototype.M8=function(e,t){var n=e.eventModification?e.eventModification(t):t;e.eventHandler.handleEvent?e.eventHandler.handleEvent(n):"function"==typeof e.eventHandler?e.eventHandler(n):this.D8.logger.debug("Encountered unknown event handler for "+t.type+": ",e.eventHandler)},e.prototype.addEventListener=function(e,t,n){this.F8[e]=this.F8[e]||[],this.F8[e].push(new l(t,n))},e.prototype.hasEventHandler=function(e,t){return!!this.F8[e]&&null!=this.F8[e].find((function(e){return e.eventHandler===t}))},e.prototype.removeEventListener=function(e,t){this.F8[e]&&(this.F8[e]=this.F8[e].filter((function(e){return e.eventHandler!==t})))},e.prototype.reset=function(){this.K8()},e.prototype.dispose=function(){this.reset(),this.removeVideoEventHandlers(),this.F8=null},e.getMediaErrorName=function(e){if("MediaError"in i.default)for(var t in MediaError)if(t.indexOf("MEDIA_ERR_")>-1&&MediaError[t]===e)return t;return null},e.PRIME_RELATED_EVENTS=[s.MediaElementEvent.play,s.MediaElementEvent.playing,s.MediaElementEvent.pause,s.MediaElementEvent.timeupdate],e}();t.MediaElementEventHandler=u;var l=function(){return function(e,t){this.eventHandler=e,t&&a.Util.isFunction(t)&&(this.eventModification=t)}}()},96859:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LicenseCall=void 0;var r,i=n(45202),o=n(4129),a=n(29669),s=n(21513),u=n(79069);!function(e){e.Granted="granted",e.Denied="denied"}(r||(r={}));var l=["localhost","127.0.0.1"],c=u.LicensingLegacySslBackendBaseUrl+"/licensing",d=function(){function e(e,t,n){this.c0=0,this.d0=[],this.e0=!1,this.f0=void 0,this.OZ=t,this.PZ=n,this.b0=e}return e.prototype.issue=function(e,t){var n=this;this.g0()?setTimeout((function(){return e(!0)}),0):this.PZ?this.f0?setTimeout((function(){return e(n.f0.granted,n.f0.payload,n.f0.data)}),0):(this.d0.push(e),this.e0||(this.e0=!0,setTimeout((function(){n.i0(n.PZ,n.OZ,t)}),this.c0))):setTimeout((function(){return e(!1,{validationInformation:[{key:"key",errorMessage:"field can't take an empty string"}]})}),0)},e.prototype.g0=function(){return l.includes(i.Environment.hostname)||!this.OZ},e.handleSuccessfulLicenseRequest=function(e){var t={granted:!1,payload:{},data:{}};return e&&e.analytics&&(t.data.analytics={key:e.analytics}),e&&e.hasOwnProperty("status")&&(e.status===r.Granted?(t.granted=!0,t.payload=function(e){var t={};return e.hasOwnProperty("reporting")&&e.reporting&&(t.reporting=!0),e.hasOwnProperty("reportingUrls")&&(t.reportingUrls=e.reportingUrls),e.hasOwnProperty("reportingInterval")&&(t.reportingInterval=e.reportingInterval),e.hasOwnProperty("reportingSampleInterval")&&(t.reportingSampleInterval=e.reportingSampleInterval),t}(e)):e.status===r.Denied&&(t.granted=!1,t.payload={message:e.message})),t},e.handleFailedLicenseRequest=function(e){var t={granted:!1,payload:{},data:{}};return e&&e.hasOwnProperty("validationInformation")?(t.granted=!1,t.payload=e):t.granted=!0,t},e.prototype.h0=function(e){for(var t=0,n=this.d0;t<n.length;t++)(0,n[t])(e.granted,e.payload,e.data)},e.prototype.setCustomData=function(e){this.a0=e},e.prototype.setDelay=function(e){isNaN(e)||(this.c0=Math.min(e,3e4))},e.prototype.i0=function(t,n,r){var o=this,u=JSON.stringify({domain:i.Environment.hostname,key:t||"",version:i.Environment.VERSION_NUMBER,customData:this.a0}),l=this.j0(r);l.load(n,a.HttpRequestMethod.POST,a.HttpResponseType.JSON,u).then((function(t){l.dispose(),o.f0=e.handleSuccessfulLicenseRequest(p(t.body)),o.e0=!1,o.h0(o.f0)}),(function(i){l.dispose(),n!==c&&(0,s.getCapabilities)().isTizen?setTimeout((function(){return o.i0(t,c,r)}),o.c0):(o.f0=e.handleFailedLicenseRequest(p(i.body)),o.e0=!1,o.h0(o.f0))}))},e.prototype.j0=function(e){return new o.DefaultContentLoader({settings:{RETRY_DELAY:0,INCREASE_RETRY_DELAY:!1,INCREASE_RETRY_DELAY_BASE_SEC:0,MAX_INCREASE_RETRY_DELAY_SEC:0,QUERY_PARAMETERS:[],HTTP_HEADERS:null,XHR_TIMEOUT:2e4,DISABLE_RETRY_FOR_RESPONSE_STATUS:{}},logger:this.b0,config:{network:{requestApi:e}}})},e.getInstance=function(t,n,r){var i=[n,r].toString();return e.instanceMap.hasOwnProperty(i)||(e.instanceMap[i]=new e(t,n,r)),e.instanceMap[i]},e.reset=function(){Object.keys(e.instanceMap).forEach((function(t){return delete e.instanceMap[t]}))},e.instanceMap={},e}();function p(e){if("string"==typeof e)try{return JSON.parse(e)}catch(e){return{}}return e}t.LicenseCall=d},96907:function(e,t,n){"use strict";var r=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.Safari15VideoElementWrapper=void 0;var i=n(19274),o=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r.acb=-1,r.bcb=!1,r.ccb=!1,r.dcb=function(){r.acb=r.getWrappedElement().currentTime,r.paused||(r.bcb=!0,r.mediaElementEventHandler.suppressEvent(i.MediaElementEvent.seeked),r.mediaElementEventHandler.suppressEvent(i.MediaElementEvent.timeupdate))},r.ecb=function(){r.ccb=!0},r.fcb=function(){a(r)&&(r.acb=r.getWrappedElement().currentTime,r.bcb&&r.ccb&&!r.getWrappedElement().seeking&&(r.bcb=!1,r.ccb=!1,r.mediaElementEventHandler.clearEventSuppression(i.MediaElementEvent.timeupdate),r.mediaElementEventHandler.clearEventSuppression(i.MediaElementEvent.seeked),r.mediaElementEventHandler.triggerEvent(i.MediaElementEvent.seeked),r.mediaElementEventHandler.triggerEvent(i.MediaElementEvent.timeupdate)))},r.getWrappedElement().addEventListener(i.MediaElementEvent.seeking,r.dcb),r.getWrappedElement().addEventListener(i.MediaElementEvent.seeked,r.ecb),r.getWrappedElement().addEventListener(i.MediaElementEvent.timeupdate,r.fcb),r}return r(t,e),Object.defineProperty(t.prototype,"currentTime",{get:function(){var e=this.currentTimeCache.get();return-1===this.acb&&0!==e&&(this.acb=e),a(this)?e:Math.max(this.acb,0)},set:function(e){this.getWrappedElement().currentTime=e},enumerable:!1,configurable:!0}),t.prototype.load=function(){this.gcb(),e.prototype.load.call(this)},t.prototype.play=function(){return this.ended&&(this.acb=-1),e.prototype.play.call(this)},t.prototype.dispose=function(){this.getWrappedElement().removeEventListener(i.MediaElementEvent.seeking,this.dcb),this.getWrappedElement().removeEventListener(i.MediaElementEvent.seeked,this.ecb),this.getWrappedElement().removeEventListener(i.MediaElementEvent.timeupdate,this.fcb),e.prototype.dispose.call(this)},t.prototype.gcb=function(){this.acb=-1,this.bcb=!1,this.ccb=!1},t}(n(76253).SafariVideoElementWrapper);function a(e){return 0!==e.buffered.length&&e.getWrappedElement().currentTime>=e.buffered.start(0)}t.Safari15VideoElementWrapper=o},97583:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.NativeMediaEventListener=void 0;var r=n(80813),i=n(3714),o=n(94685),a=n(19274),s=function(){function e(e,t){var n,o,a,s,u,l,c=this;this.context=e,this.P8=function(){var e=c.N8.volume,t=c.N8.muted;c.lastKnownState.muted!==t&&(t?c.S8(i.PlayerEvent.Muted,{issuer:"media-element"}):c.S8(i.PlayerEvent.Unmuted,{issuer:"media-element"}),c.lastKnownState.muted=t),c.lastKnownState.volume!==e&&(c.S8(i.PlayerEvent.VolumeChanged,{issuer:"media-element",targetVolume:100*e,sourceVolume:100*c.lastKnownState.volume}),c.lastKnownState.volume=e)},this.Q8=function(){var e=c.N8.playbackRate;c.context.serviceManager.maybeCall(r.ServiceName.PlayerStateService,(function(t){t.playbackSpeed!==e&&t.setPlaybackSpeed(e)}))},this.R8=function(){c.lastKnownState.canPlay||(c.lastKnownState.canPlay=!0,c.S8(i.PlayerEvent.Ready))},this.N8=t,this.lastKnownState={muted:null!==(a=null===(o=null===(n=e.config)||void 0===n?void 0:n.playback)||void 0===o?void 0:o.muted)&&void 0!==a?a:t.muted,volume:null!==(l=null===(u=null===(s=e.config)||void 0===s?void 0:s.playback)||void 0===u?void 0:u.volume)&&void 0!==l?l:t.volume,playbackRate:t.playbackRate,canPlay:!1},this.O8()}return e.prototype.O8=function(){this.N8.addEventListener(a.MediaElementEvent.volumechange,this.P8),this.N8.addEventListener(a.MediaElementEvent.canplay,this.R8),this.N8.addEventListener(a.MediaElementEvent.ratechange,this.Q8)},e.prototype.S8=function(e,t){(0,o.isContextAvailable)(this.context)&&this.context.eventHandler&&this.context.eventHandler.dispatchEvent(e,t)},e.prototype.T8=function(){this.N8.removeEventListener(a.MediaElementEvent.volumechange,this.P8),this.N8.removeEventListener(a.MediaElementEvent.canplay,this.R8),this.N8.removeEventListener(a.MediaElementEvent.ratechange,this.Q8)},e.prototype.reset=function(){this.lastKnownState.canPlay=!1},e.prototype.dispose=function(){this.T8()},e}();t.NativeMediaEventListener=s},98714:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setPreferredBitrateForMimeTypeAction=function(e,t){return(0,r.createAction)(i.AdaptationActionType.SetPreferredBitrateForMimeType,{mimeType:e,preferredBitrate:t})},t.clearPreferredBitrateForMimeTypeAction=function(e){return(0,r.createAction)(i.AdaptationActionType.ClearPreferredBitrateForMimeType,{mimeType:e})};var r=n(35267),i=n(56960)},99266:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.LogLevels=void 0,t.LogLevels={DEBUG:"debug",LOG:"log",WARN:"warn",ERROR:"error",OFF:"off"}},99313:function(e,t,n){"use strict";var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.XhrWrapper=void 0;var i=n(89927),o=n(88844),a=n(77401),s=n(43446),u=n(96266),l=n(57456),c=function(){function e(e,t,n){var r=this;this.gbb=!1,this.ibb=function(e){var t,n,i=null!==(t=e.total)&&void 0!==t?t:-1,o=null!==(n=e.loaded)&&void 0!==n?n:-1,a=s.TimingUtil.getHiResTimestamp();r.Uab.totalBytes=i,r.Uab.loadedBytes=o,r.Vab.progressTimestamp=a,o<i&&r.hbb()},this.jbb=function(e){var t=(0,i.toSeconds)(e.timeStamp);if(r.Pab.readyState===r.Pab.OPENED)r.Vab.openedTimestamp=t,r.hbb();else if(r.Pab.readyState===r.Pab.HEADERS_RECEIVED)r.Vab.headersReceivedTimestamp=t,r.hbb();else if(r.Pab.readyState===r.Pab.DONE){var n=r.Pab.status>=200&&r.Pab.status<300;r.Vab.doneTimestamp=t,n&&null!==r.Pab.response?r.Qab(l.XhrHelper.toHttpResponse(r.Pab,r.Nab,r.Vab)):r.gbb||r.kbb(a.RequestError.Failed),r.dispose()}},this.Mab=e,this.Nab=t,this.timeout=n,this.Sab={},this.Tab=!1,this.Vab={sendTimestamp:-1,openedTimestamp:-1,headersReceivedTimestamp:-1,progressTimestamp:-1,doneTimestamp:-1},this.Uab={totalBytes:-1,loadedBytes:-1,url:t.url,responseTiming:this.Vab}}return e.prototype.on=function(e,t){this.Sab=this.Sab||{},this.Sab[e]=this.Sab[e]||[],this.Sab[e].push(t)},e.prototype.hbb=function(){var e,t=this;(null!==(e=this.Sab[u.XhrEvent.Progress])&&void 0!==e?e:[]).forEach((function(e){return e(r({},t.Uab))}))},e.prototype.send=function(){var e=this;return this.Pab=new XMLHttpRequest,this.Tab=!1,this.gbb=!1,new Promise((function(t,n){e.Qab=t,e.Rab=n;try{e.Pab.addEventListener(u.XhrEvent.Progress,e.ibb),e.Pab.addEventListener(u.XhrEvent.ReadyStateChange,e.jbb)}catch(n){return e.Mab.debug("ContentLoader: could not add event listeners",n),t(e.send())}e.Vab.sendTimestamp=s.TimingUtil.getHiResTimestamp(),e.Pab.open(e.Nab.method,e.Nab.url),e.Pab.withCredentials="include"===e.Nab.credentials,e.hbb(),l.XhrHelper.setHeaders(e.Pab,e.Nab.headers),e.Nab.responseType&&(e.Pab.responseType=e.Nab.responseType),e.timeout>0&&(e.Oab=window.setTimeout((function(){return e.abort(a.RequestError.TimedOut)}),e.timeout)),e.Nab.body?e.Pab.send(e.Nab.body):e.Pab.send()}))},e.prototype.dispose=function(){this.Tab||((0,o.clearTimeoutIfDefined)(this.Oab),this.Pab.removeEventListener(u.XhrEvent.Progress,this.ibb),this.Pab.removeEventListener(u.XhrEvent.ReadyStateChange,this.jbb),this.Sab=null,this.Pab=null,this.Qab=null,this.Rab=null,this.Tab=!0)},e.prototype.kbb=function(e,t){void 0===t&&(t=!1),this.Tab||(this.Rab({error:e,response:l.XhrHelper.toHttpResponse(this.Pab,this.Nab,this.Vab)}),t&&this.Pab.abort())},e.prototype.abort=function(e){void 0===e&&(e=a.RequestError.Canceled),this.Tab||this.gbb||(this.gbb=!0,this.kbb(e,!0),this.dispose())},e}();t.XhrWrapper=c}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var n=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e].call(n.exports,n,n.exports,__webpack_require__),n.exports}__webpack_require__.m=__webpack_modules__,function(){var e=[];__webpack_require__.O=function(t,n,r,i){if(!n){var o=1/0;for(l=0;l<e.length;l++){n=e[l][0],r=e[l][1],i=e[l][2];for(var a=!0,s=0;s<n.length;s++)(!1&i||o>=i)&&Object.keys(__webpack_require__.O).every((function(e){return __webpack_require__.O[e](n[s])}))?n.splice(s--,1):(a=!1,i<o&&(o=i));if(a){e.splice(l--,1);var u=r();void 0!==u&&(t=u)}}return t}i=i||0;for(var l=e.length;l>0&&e[l-1][2]>i;l--)e[l]=e[l-1];e[l]=[n,r,i]}}(),function(){__webpack_require__.d=function(e,t){for(var n in t)__webpack_require__.o(t,n)&&!__webpack_require__.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})}}(),function(){__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}()}(),function(){__webpack_require__.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){__webpack_require__.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){__webpack_require__.p=""}(),function(){var e={114:0};__webpack_require__.O.j=function(t){return 0===e[t]};var t=function(t,n){var r,i,o=n[0],a=n[1],s=n[2],u=0;if(o.some((function(t){return 0!==e[t]}))){for(r in a)__webpack_require__.o(a,r)&&(__webpack_require__.m[r]=a[r]);if(s)var l=s(__webpack_require__)}try{s&&!l&&(l=s(__webpack_require__))}catch(e){}for(t&&t(n);u<o.length;u++)i=o[u],__webpack_require__.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return __webpack_require__.O(l)},n=self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))}();var __webpack_exports__=__webpack_require__(86969);return __webpack_exports__=__webpack_require__.O(__webpack_exports__),__webpack_exports__}()}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.polyfill=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player.polyfill=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[538],{3805:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.WeakMapPolyfill=void 0;var n=function(){};!function(){function t(e){e.permitHostObjects___&&e.permitHostObjects___(t)}var e,r=!1;if("function"==typeof WeakMap)if(e=WeakMap,"undefined"!=typeof navigator&&/Firefox/.test(navigator.userAgent));else{var o=new e,i=Object.freeze({});if(o.set(i,1),1===o.get(i))return void(n=function(){});r=!0}var l=Object.getOwnPropertyNames,u=Object.defineProperty,f=Object.isExtensible,a="weakmap:",c=a+"ident:"+Math.random()+"___";if("undefined"!=typeof crypto&&"function"==typeof crypto.getRandomValues&&"function"==typeof ArrayBuffer&&"function"==typeof Uint8Array){var s=new ArrayBuffer(25),y=new Uint8Array(s);crypto.getRandomValues(y),c=a+"rand:"+Array.prototype.map.call(y,(function(t){return(t%36).toString(36)})).join("")+"___"}function p(t){return!(t.substr(0,8)==a&&"___"===t.substr(t.length-3))}var d="object"==typeof window?Object.getOwnPropertyNames(window):[];if(u(Object,"getOwnPropertyNames",{value:function(t){if("[object Window]"===Object.prototype.toString.call(t))try{return l(t)}catch(t){return[].concat([],d)}return l(t).filter(p)}}),"getPropertyNames"in Object){var h=Object.getPropertyNames;u(Object,"getPropertyNames",{value:function(t){return h(t).filter(p)}})}function _(t){if(t!==Object(t))throw new TypeError("Not an object: "+t);var e=t[c];if(e&&e.key===t)return e;if(f(t)){e={key:t};try{return u(t,c,{value:e,writable:!1,enumerable:!1,configurable:!1}),e}catch(t){return}}}function v(t){return t.prototype=null,Object.freeze(t)}!function(){var t=Object.freeze;u(Object,"freeze",{value:function(e){return _(e),t(e)}});var e=Object.seal;u(Object,"seal",{value:function(t){return _(t),e(t)}});var n=Object.preventExtensions;u(Object,"preventExtensions",{value:function(t){return _(t),n(t)}})}();var b=!1;function w(){b||"undefined"==typeof console||(b=!0,console.warn("WeakMap should be invoked as new WeakMap(), not WeakMap(). This will be an error in the future."))}var P=0,g=function(){this instanceof g||w();var t=[],e=[],n=P++;return Object.create(g.prototype,{get___:{value:v((function(r,o){var i,l=_(r);return l?n in l?l[n]:o:(i=t.indexOf(r))>=0?e[i]:o}))},has___:{value:v((function(e){var r=_(e);return r?n in r:t.indexOf(e)>=0}))},set___:{value:v((function(r,o){var i,l=_(r);return l?l[n]=o:(i=t.indexOf(r))>=0?e[i]=o:(i=t.length,e[i]=o,t[i]=r),this}))},delete___:{value:v((function(r){var o,i,l=_(r);return l?n in l&&delete l[n]:!((o=t.indexOf(r))<0||(i=t.length-1,t[o]=void 0,e[o]=e[i],t[o]=t[i],t.length=i,e.length=i,0))}))}})};g.prototype=Object.create(Object.prototype,{get:{value:function(t,e){return this.get___(t,e)},writable:!0,configurable:!0},has:{value:function(t){return this.has___(t)},writable:!0,configurable:!0},set:{value:function(t,e){return this.set___(t,e)},writable:!0,configurable:!0},delete:{value:function(t){return this.delete___(t)},writable:!0,configurable:!0}}),"function"==typeof e?function(){function o(){this instanceof g||w();var n,o=new e,i=void 0,l=!1;return n=r?function(t,e){return o.set(t,e),o.has(t)||(i||(i=g()),i.set(t,e)),this}:function(t,e){if(l)try{o.set(t,e)}catch(n){i||(i=g()),i.set___(t,e)}else o.set(t,e);return this},Object.create(g.prototype,{get___:{value:v((function(t,e){return i?o.has(t)?o.get(t):i.get___(t,e):o.get(t,e)}))},has___:{value:v((function(t){return o.has(t)||!!i&&i.has___(t)}))},set___:{value:v(n)},delete___:{value:v((function(t){var e=!!o.delete(t);return i&&i.delete___(t)||e}))},permitHostObjects___:{value:v((function(e){if(e!==t)throw new Error("bogus call to permitHostObjects___");l=!0}))}})}r&&"undefined"!=typeof Proxy&&(Proxy=void 0),o.prototype=g.prototype,n=function(){window.WeakMap=o},Object.defineProperty(WeakMap.prototype,"constructor",{value:WeakMap,enumerable:!1,configurable:!0,writable:!0})}():("undefined"!=typeof Proxy&&(Proxy=void 0),n=function(){window.WeakMap=g})}(),e.WeakMapPolyfill={polyfill:n}},10455:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayFindIndexPolyfill=void 0,e.ArrayFindIndexPolyfill=function(){return{polyfill:function(){Object.defineProperty(Array.prototype,"findIndex",{value:function(t){if(null==this)throw new TypeError('"this" is null or not defined');var e=Object(this),n=e.length>>>0;if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var r=arguments[1],o=0;o<n;){var i=e[o];if(t.call(r,i,o,e))return o;o++}return-1},configurable:!0,writable:!0})}}}()},18410:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default={polyfill:function(){window.Promise.prototype.finally&&"function"==typeof window.Promise.prototype.finally||(window.Promise.prototype.finally=function(t){var e=this.constructor;return this.then((function(n){return e.resolve(t()).then((function(){return n}))}),(function(n){return e.resolve(t()).then((function(){throw n}))}))})}}},22581:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayFlatMapPolyfill=void 0;var n=function(){function t(){}return t.polyfill=function(){Object.defineProperty(Array.prototype,"flatMap",{value:function(t){return Array.prototype.concat.apply([],this.map(t))}})},t}();e.ArrayFlatMapPolyfill=n},30829:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.StringStartsWithPolyfill=void 0,e.StringStartsWithPolyfill=function(){return{polyfill:function(){String.prototype.startsWith=function(t,e){var n=e>0?0|e:0;return this.substring(n,n+t.length)===t}}}}()},33402:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.PolyfillModuleDefinition=void 0;var r=n(62756),o=n(62935);e.PolyfillModuleDefinition={name:r.ModuleName.Polyfill,module:{Polyfills:o.Polyfills},hooks:{add:function(t){t.Polyfills.installPolyfills()}}},e.default=e.PolyfillModuleDefinition},33878:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.StringEndsWithPolyfill=void 0,e.StringEndsWithPolyfill=function(){return{polyfill:function(){String.prototype.endsWith=function(t,e){if(null==t)return!1;var n=this.length;return null!=e&&(n=Math.min(e,this.length)),this.substring(n-t.length,n)===t}}}}()},45078:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectEntriesPolyfill=void 0,e.ObjectEntriesPolyfill=function(){return{polyfill:function(){Object.entries=function(t){for(var e=Object.keys(t),n=e.length,r=new Array(n);n--;)r[n]=[e[n],t[e[n]]];return r}}}}()},45417:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.NodeListPolyfill=void 0,e.NodeListPolyfill=function(){return{polyfill:function(){NodeList.prototype.forEach=function(t,e){e=e||window;for(var n=0;n<this.length;n++)t.call(e,this[n],n,this)}}}}()},49056:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayBufferPolyfill=void 0,e.ArrayBufferPolyfill=function(){function t(t,e){return(t=0|t||0)<0?Math.max(t+e,0):Math.min(t,e)}return{polyfill:function(){ArrayBuffer.prototype.slice=function(e,n){var r=this.byteLength,o=t(e,r),i=r;if(void 0!==n&&(i=t(n,r)),o>i)return new ArrayBuffer(0);var l=i-o,u=new ArrayBuffer(l),f=new Uint8Array(u),a=new Uint8Array(this,o,l);return f.set(a),u}}}}()},61545:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MapPolyfill=void 0,e.MapPolyfill={polyfill:function(){var t,e=Object.defineProperty,n=function(t,e){return t===e||t!=t&&e!=e};function r(t){this.add?t.forEach(this.add,this):t.forEach((function(t){this.set(t[0],t[1])}),this)}function o(e,r){if(r!=r||0===r)for(t=e.length;t--&&!n(e[t],r););else t=e.indexOf(r);return-1<t}function i(t,e,n){var r=[0],o=!1;return t.push(r),{next:function(){var i,l=r[0];return!o&&l<e.length?(i=n?[e[l],n[l]]:e[l],r[0]++):(o=!0,t.splice(t.indexOf(r),1)),{done:o,value:i}}}}function l(){return this._values.length}window.Map=function(t){function n(t){if(!this||this.constructor!==n)return new(n(t));this._keys=[],this._values=[],this._itp=[],t&&r.call(this,t)}return e(t,"size",{get:l}),t.constructor=n,n.prototype=t,n}({delete:function(e){return this.has(e)&&(this._keys.splice(t,1),this._values.splice(t,1),this._itp.forEach((function(e){t<e[0]&&e[0]--}))),-1<t},has:function(t){return o.call(this,this._keys,t)},get:function(e){return this.has(e)?this._values[t]:void 0},set:function(e,n){return this.has(e)?this._values[t]=n:this._values[this._keys.push(e)-1]=n,this},keys:function(){return i(this._itp,this._keys)},values:function(){return i(this._itp,this._values)},entries:function(){return i(this._itp,this._keys,this._values)},forEach:function(t,e){for(var n=this.entries();;){var r=n.next();if(r.done)break;t.call(e,r.value[1],r.value[0],this)}},clear:function(){(this._keys||0).length=this._values.length=0}})}}},62935:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.Polyfills=void 0;var r=n(49056),o=n(10455),i=n(77337),l=n(22581),u=n(64499),f=n(99810),a=n(61545),c=n(88514),s=n(45417),y=n(90927),p=n(45078),d=n(75284),h=n(18410),_=n(33878),v=n(64205),b=n(30829),w=n(3805);e.Polyfills={installPolyfills:function(){window.bitmovin=window.bitmovin||{},window&&window.Promise&&"function"==typeof window.Promise||f.PromisePolyfill.polyfill(),h.default.polyfill(),window&&window.ArrayBuffer&&!window.ArrayBuffer.prototype.slice&&r.ArrayBufferPolyfill.polyfill(),window.WeakMap&&"function"==typeof window.WeakMap||w.WeakMapPolyfill.polyfill(),window.Map&&"function"==typeof window.Map||a.MapPolyfill.polyfill(),Array.prototype.find||i.ArrayFindPolyfill.polyfill(),Array.prototype.includes||u.ArrayIncludesPolyfill.polyfill(),Array.prototype.findIndex||o.ArrayFindIndexPolyfill.polyfill(),Array.prototype.flatMap||l.ArrayFlatMapPolyfill.polyfill(),String.prototype.includes||v.StringIncludesPolyfill.polyfill(),String.prototype.startsWith||b.StringStartsWithPolyfill.polyfill(),String.prototype.endsWith||_.StringEndsWithPolyfill.polyfill(),window.NodeList&&!NodeList.prototype.forEach&&s.NodeListPolyfill.polyfill(),(window.Node&&!Node.prototype.hasOwnProperty("children")||window.Element&&!Element.prototype.hasOwnProperty("children"))&&c.NodeChildrenPolyfill.polyfill(),Object.values||d.ObjectValuesPolyfill.polyfill(),Object.entries||p.ObjectEntriesPolyfill.polyfill(),Object.assign||y.ObjectAssignPolyfill.polyfill(),(window.MediaSource||window.WebKitMediaSource)&&(window.MediaSource=window.MediaSource||window.WebKitMediaSource),Number.isNaN||(Number.isNaN=function(t){return"number"==typeof t&&isNaN(t)})}}},64205:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.StringIncludesPolyfill=void 0,e.StringIncludesPolyfill=function(){return{polyfill:function(){String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}}}}()},64499:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayIncludesPolyfill=void 0,e.ArrayIncludesPolyfill=function(){return{polyfill:function(){Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),r=n.length>>>0;if(0===r)return!1;var o=0|e,i=Math.max(o>=0?o:r-Math.abs(o),0);function l(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}for(;i<r;){if(l(n[i],t))return!0;i++}return!1}})}}}()},75284:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectValuesPolyfill=void 0,e.ObjectValuesPolyfill=function(){return{polyfill:function(){Object.values=function(t){return Object.keys(t).map((function(e){return t[e]}))}}}}()},77337:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayFindPolyfill=void 0,e.ArrayFindPolyfill=function(){return{polyfill:function(){Array.prototype.find=function(t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),r=n.length>>>0,o=arguments[1],i=0;i<r;i++)if(e=n[i],t.call(o,e,i,n))return e}}}}()},88514:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.NodeChildrenPolyfill=void 0,e.NodeChildrenPolyfill=function(){return{polyfill:function(){!function(t){t&&t.prototype&&null==t.prototype.children&&Object.defineProperty(t.prototype,"children",{get:function(){var t,e=0,n=this.childNodes,r=[];if(!n)return r;for(;t=n[e++];)1===t.nodeType&&r.push(t);return r}})}(window.Node||window.Element)}}}()},90927:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ObjectAssignPolyfill=void 0,e.ObjectAssignPolyfill=function(){return{polyfill:function(){Object.defineProperty(Object,"assign",{value:function(t,e){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1;r<arguments.length;r++){var o=arguments[r];if(null!=o)for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(n[i]=o[i])}return n},writable:!0,configurable:!0})}}}()},99810:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.PromisePolyfill=void 0,e.PromisePolyfill=function(){function t(t){return"function"==typeof t}var e,n,r=Array.isArray?Array.isArray:function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=0,i=function(t,r){a[o]=t,a[o+1]=r,2===(o+=2)&&(e?e(c):n())},l=("undefined"!=typeof window?window:void 0)||{},u=l.MutationObserver||l.WebKitMutationObserver,f="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,a=new Array(1e3);function c(){for(var t=0;t<o;t+=2)(0,a[t])(a[t+1]),a[t]=void 0,a[t+1]=void 0;o=0}function s(){}n=u?function(){var t=0,e=new u(c),n=document.createTextNode("");return e.observe(n,{characterData:!0}),function(){n.data=t=++t%2}}():f?function(){var t=new MessageChannel;return t.port1.onmessage=c,function(){t.port2.postMessage(0)}}():function(){return function(){setTimeout(c,1)}}();var y=void 0,p=new g;function d(e,n){if(n.constructor===e.constructor)!function(t,e){1===e._state?v(t,e._result):2===e._state?b(t,e._result):w(e,void 0,(function(e){h(t,e)}),(function(e){b(t,e)}))}(e,n);else{var r=function(t){try{return t.then}catch(t){return p.error=t,p}}(n);r===p?b(e,p.error):void 0===r?v(e,n):t(r)?function(t,e,n){i((function(t){var r=!1,o=function(n,o){try{n.call(o,(function(n){r||(r=!0,e!==n?h(t,n):v(t,n))}),(function(e){r||(r=!0,b(t,e))}))}catch(t){return t}}(n,e,0,0,t._label);!r&&o&&(r=!0,b(t,o))}),t)}(e,n,r):v(e,n)}}function h(t,e){t===e?b(t,function(){return new TypeError("You cannot resolve a promise with itself")}()):function(t){return"function"==typeof t||"object"==typeof t&&null!==t}(e)?d(t,e):v(t,e)}function _(t){t._onerror&&t._onerror(t._result),P(t)}function v(t,e){t._state===y&&(t._result=e,t._state=1,0!==t._subscribers.length&&i(P,t))}function b(t,e){t._state===y&&(t._state=2,t._result=e,i(_,t))}function w(t,e,n,r){var o=t._subscribers,l=o.length;t._onerror=null,o[l]=e,o[l+1]=n,o[l+2]=r,0===l&&t._state&&i(P,t)}function P(t){var e=t._subscribers,n=t._state;if(0!==e.length){for(var r,o,i=t._result,l=0;l<e.length;l+=3)r=e[l],o=e[l+n],r?O(n,r,o,i):o(i);t._subscribers.length=0}}function g(){this.error=null}var j=new g;function O(e,n,r,o){var i,l,u,f,a=t(r);if(a){if(i=function(t,e){try{return t(e)}catch(t){return j.error=t,j}}(r,o),i===j?(f=!0,l=i.error,i=null):u=!0,n===i)return void b(n,function(){return new TypeError("A promises callback cannot return that same promise.")}())}else i=o,u=!0;n._state!==y||(a&&u?h(n,i):f?b(n,l):1===e?v(n,i):2===e&&b(n,i))}function m(t,e){var n=this;n._instanceConstructor=t,n.promise=new t(s),n._validateInput(e)?(n._input=e,n.length=e.length,n._remaining=e.length,n._init(),0===n.length?v(n.promise,n._result):(n.length=n.length||0,n._enumerate(),0===n._remaining&&v(n.promise,n._result))):b(n.promise,n._validationError())}m.prototype._validateInput=function(t){return r(t)},m.prototype._validationError=function(){return new Error("Array Methods must be provided an Array")},m.prototype._init=function(){this._result=new Array(this.length)};var M=m;m.prototype._enumerate=function(){for(var t=this,e=t.length,n=t.promise,r=t._input,o=0;n._state===y&&o<e;o++)t._eachEntry(r[o],o)},m.prototype._eachEntry=function(t,e){var n=this,r=n._instanceConstructor;!function(t){return"object"==typeof t&&null!==t}(t)?(n._remaining--,n._result[e]=t):t.constructor===r&&t._state!==y?(t._onerror=null,n._settledAt(t._state,e,t._result)):n._willSettleAt(r.resolve(t),e)},m.prototype._settledAt=function(t,e,n){var r=this,o=r.promise;o._state===y&&(r._remaining--,2===t?b(o,n):r._result[e]=n),0===r._remaining&&v(o,r._result)},m.prototype._willSettleAt=function(t,e){var n=this;w(t,void 0,(function(t){n._settledAt(1,e,t)}),(function(t){n._settledAt(2,e,t)}))};var A=0,E=k;function k(e){this._id=A++,this._state=void 0,this._result=void 0,this._subscribers=[],s!==e&&(t(e)||function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof k||function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}(),function(t,e){try{e((function(e){h(t,e)}),(function(e){b(t,e)}))}catch(e){b(t,e)}}(this,e))}return k.all=function(t){return new M(this,t).promise},k.race=function(t){var e=new this(s);if(!r(t))return b(e,new TypeError("You must pass an array to race.")),e;var n=t.length;function o(t){h(e,t)}function i(t){b(e,t)}for(var l=0;e._state===y&&l<n;l++)w(this.resolve(t[l]),void 0,o,i);return e},k.resolve=function(t){if(t&&"object"==typeof t&&t.constructor===this)return t;var e=new this(s);return h(e,t),e},k.reject=function(t){var e=new this(s);return b(e,t),e},k._setScheduler=function(t){e=t},k._setAsap=function(t){i=t},k._asap=i,k.prototype={constructor:k,then:function(t,e){var n=this,r=n._state;if(1===r&&!t||2===r&&!e)return this;var o=new this.constructor(s),l=n._result;if(r){var u=arguments[r-1];i((function(){O(r,o,u,l)}))}else w(n,o,t,e);return o},catch:function(t){return this.then(null,t)}},{Promise:E,polyfill:function(){var t=window.Promise;t&&"[object Promise]"===Object.prototype.toString.call(t.resolve())&&!t.cast||(window.Promise=E)}}}.call(this)}},function(t){return function(){return t(t.s=33402)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["engine-bitmovin"]=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.player=e.bitmovin.player||{},e.bitmovin.player["engine-bitmovin"]=t())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[238],{674:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.areBufferBlocksEqual=function(e,t){return!(!e||!t)&&e===t}},689:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getLoaderConfig=function(e,t){var i;return(null===(i=e.config.tweaks)||void 0===i?void 0:i.segmentLoaderArgs)?e.config.tweaks.segmentLoaderArgs:{maxRetries:e.settings.MAX_CDN_RETRIES,requestType:a(t),disableDownloadTimeout:!0,resetRetriesWhenOffline:!0}},t.getLoader=function(e,t){var i,r=null===(i=e.config.tweaks)||void 0===i?void 0:i.segmentLoader;return r&&"function"==typeof r?new r(t):new n.DefaultContentLoader(e,t)};var n=i(4129),r=i(29669),o=i(85434);function a(e){return o.MimeTypeHelper.isVideo(e)?r.HttpRequestType.MEDIA_VIDEO:o.MimeTypeHelper.isAudio(e)?r.HttpRequestType.MEDIA_AUDIO:o.MimeTypeHelper.isSubtitle(e)?r.HttpRequestType.MEDIA_SUBTITLES:o.MimeTypeHelper.isUnknown(e)?r.HttpRequestType.INTERNAL:r.HttpRequestType.UNKNOWN}},3095:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createSegmentParser=function(e,t){if(t===o.ContainerFormat.MP4&&n.ModuleManager.has(r.ModuleName.ContainerMP4)){var i=n.ModuleManager.get(r.ModuleName.ContainerMP4);return new i.MP4Parser(e,new i.MP4EncryptionParser(e))}if(t===o.ContainerFormat.WEBM&&n.ModuleManager.has(r.ModuleName.ContainerWebM))return new(0,n.ModuleManager.get(r.ModuleName.ContainerWebM).WebMParser)};var n=i(88052),r=i(62756),o=i(34795)},7511:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracksActionType=void 0,function(e){e.SetSelectedRepresentationId="@instance/sources/@source/activetracks/setselectedrepresentationid",e.SetMediaType="@instance/sources/@source/activetracks/setmediatype",e.SetContainerFormat="@instance/sources/@source/activetracks/setcontainerformat",e.RemoveActiveTrack="@instance/sources/@source/activetracks/remove",e.ClearActiveTracks="@instance/sources/@source/activetracks/clear"}(i||(t.ActiveTracksActionType=i={}))},10333:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.sourceIdentifiersSelector=t.hasASourceStoreIdentifierChanged=void 0,t.hasASourceStoreIdentifierChanged=function(e,t){return e.length!==t.length||e.some((function(e){return!t.includes(e)}))},t.sourceIdentifiersSelector=function(e){var t;return Object.keys(null!==(t=e.sources)&&void 0!==t?t:{})}},11536:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerConfigEnhancer=void 0;var n=i(21281),r=i(70850),o=i(50962),a=function(){function e(e){this.QV={},r.Util.deepCopy(this.QV,e.config),this.RV={},r.Util.deepCopy(this.RV,e.settings)}return e.prototype.adjustToCurrentSource=function(e,t){var i,r,a,s,u=e.config;if(u.adaptation&&(u.adaptation.logic=null===(i=this.QV.adaptation)||void 0===i?void 0:i.logic),e.settings.CHUNKED_CMAF_STREAMING=this.RV.CHUNKED_CMAF_STREAMING,t.isDashManifest()&&t.isLive()&&(0,o.isLowLatencyConfigured)(e)){e.logger.debug("Detected DASH Live stream and LL config, enabling 'low-latency-v1' adaptation logic and CHUNKED_CMAF_STREAMING tweak"),u.adaptation=null!==(r=u.adaptation)&&void 0!==r?r:{},u.adaptation.logic=null!==(a=u.adaptation.logic)&&void 0!==a?a:n.AdaptationLogicType.LOW_LATENCY;var c=e.internalPlayer.getConfig().tweaks||{};e.settings.CHUNKED_CMAF_STREAMING=null===(s=c.CHUNKED_CMAF_STREAMING)||void 0===s||s}},e}();t.PlayerConfigEnhancer=a},11991:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentPrefetcher=void 0;var n=i(94685),r=i(19483),o=i(65244),a=function(){function e(e){var t=this;this.pI=function(e){var i=t.jI.get(e);i&&0!==i.length&&t.qI(i.shift()).then((function(){return t.pI(e)}))},this.jI=new r.ArrayMap,this.lI=new Map,this.kI=new Map,this.mI=new Map,this.nI=e,this.oI=new Map}return e.prototype.updateContext=function(e){this.iI=e},e.prototype.setShouldDownloadBeCancelledCallback=function(e,t){this.oI.set(e,t)},e.prototype.removeShouldDownloadBeCancelledCallback=function(e){this.oI.delete(e)},e.prototype.setDecrypter=function(e,t){this.kI.set(t,e),this.mI.has(t)&&this.mI.get(t).attachDecrypter(e)},e.prototype.removeDecrypter=function(e){this.kI.delete(e)},e.prototype.getDecrypter=function(e){return this.kI.get(e)},e.prototype.prefetchSegment=function(e){return this.qI(e)},e.prototype.prefetchSegments=function(e){var t=this;e.forEach((function(e){return t.jI.add(e.mimeType,e)})),this.jI.keys.forEach((function(e){return t.pI(e)}))},e.prototype.qI=function(e){var t=this,i=this.sI(e.mimeType).then((function(){return t.rI(e)})).then((function(){})).catch((function(){}));return this.lI.set(e.mimeType,i),i},e.prototype.rI=function(e){var t=this;if(!(0,n.isContextAvailable)(this.iI))return Promise.reject("PlayerContext not available");var i=this.tI(e).load(e).then((function(e){return e.read()})).then((function(e){return e.value}));return this.nI.onPrefetch({segmentInfo:e,loadingPromise:i}),i.catch((function(i){(0,n.isContextAvailable)(t.iI)&&t.iI.logger.debug("segment prefetching failed for",e,"with",i)})),i},e.prototype.sI=function(e){return this.lI.has(e)||this.lI.set(e,Promise.resolve()),this.lI.get(e)},e.prototype.tI=function(e){return this.mI.has(e.mimeType)||this.mI.set(e.mimeType,this.uI(e)),this.mI.get(e.mimeType)},e.prototype.uI=function(e){this.lI.set(e.mimeType,Promise.resolve());var t=new o.SegmentLoader(this.iI,e.mimeType,this.vI(e),!0);return t.attachDecrypter(this.kI.get(e.mimeType)),t},e.prototype.vI=function(e){var t=this;return function(i){var n=e.mimeType,r=t.mI.get(n),o=r?r.getCurrentLoadingSegmentInfo():null,a=void 0!==n?t.oI.get(n):void 0,s=o?o.internalRepresentationId:e.internalRepresentationId;return void 0!==a&&a(i,s)}},e.prototype.clearPrefetchingQueue=function(e){this.jI.delete(e)},e.prototype.reset=function(){this.jI.clear(),this.mI.forEach((function(e){return e.dispose()})),this.oI.clear(),this.mI.clear(),this.kI.clear()},e.prototype.dispose=function(){this.reset(),this.mI=null,this.oI=null},e}();t.SegmentPrefetcher=a},12030:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DrmKidErrorHandler=void 0;var n=i(80813),r=i(91678),o=i(46151),a=i(33436),s=i(93204),u=i(13114),c=function(){function e(e,t){var i=this;this.context=e,this.onDownloadedRepresentationExcludedCallback=t,this.BV=function(e,t){if(void 0!==e&&void 0!==t){var n=e.filter((function(e){return!t.includes(e)}));i.AV(n)}};var r=e.sourceContext.sourceIdentifier;this.yV=e.store,this.vV=e.logger,this.zV=e.serviceManager.get(n.ServiceName.SourceStoreService,r),this.wV=e.serviceManager.get(n.ServiceName.ManifestService,r),this.xV=(0,s.subscribe)(this.zV)(u.getDrmKeyIdsWithErrors,this.BV)}return e.prototype.AV=function(e){var t=function(e,t){return e.getAllRepresentations().filter((function(e){return e.associatedKid&&t.includes(e.associatedKid)})).map((function(e){return e._internalId}))}(this.wV,e),i=this.yV.getState();if(0!==t.length&&void 0!==i){var n=function(e){return(0,o.getMetricsHistoryFromInstanceState)(e,"default",a.MetricType.RequestedRepresentations).map((function(e){return e.value}))}(i),s=function(e,t){return t.some((function(t){return e.some((function(e){return e.equals(t)}))}))}(n,t);this.vV.debug("Excluding representations due to DRM licenses not being available",t),this.wV.excludeRepresentations(t)&&s&&(this.yV.dispatch((0,r.clearMetricsHistory)("default",a.MetricType.RequestedRepresentations)),this.onDownloadedRepresentationExcludedCallback())}},e.prototype.trackSegment=function(e){var t=e.getDrmKid();if(void 0!==t){var i=this.zV.getState(),n=e.getRepresentationId(),r=i?(0,u.getDrmKeyIdsWithErrors)(i):[];(function(e,t,i){return e!==i.getRepresentationDrmKid(t)})(t,n,this.wV)&&(function(e,t,i){i.setRepresentationDrmKid(t,e)}(t,n,this.wV),this.AV(r))}},e.prototype.dispose=function(){this.xV()},e}();t.DrmKidErrorHandler=c},13114:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getDrmUsedKeySystem=t.getDrmKeyIdsWithErrors=t.getDrmState=void 0,t.getDrmState=function(e){return null==e?void 0:e.drm},t.getDrmKeyIdsWithErrors=function(e){var t,i;return null!==(i=null===(t=e.drm)||void 0===t?void 0:t.keyIdsWithErrors)&&void 0!==i?i:[]},t.getDrmUsedKeySystem=function(e){var i;return(null===(i=(0,t.getDrmState)(e))||void 0===i?void 0:i.usedKeySystem)||{kind:null,uid:null}}},13422:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.orderAdaptationSetsByCodec=function(e,t){return(e=n({},e)).Period=e.Period.map((function(e){if(!e.AdaptationSet)return n({},e);var i=function(e){return e.reduce((function(e,t){var i=u(t);return r.MimeTypeHelper.isVideo(i)?e.videoSets.push(t):r.MimeTypeHelper.isAudio(i)?e.audioSets.push(t):e.otherSets.push(t),e}),{videoSets:[],audioSets:[],otherSets:[]})}(e.AdaptationSet),o=i.videoSets,s=i.audioSets,c=i.otherSets,d=a(o,t.video),l={};return s.forEach((function(e){var t=e._lang||"none";l[t]=l[t]||[],l[t].push(e)})),Object.keys(l).forEach((function(e){d=d.concat(a(l[e],t.audio))})),n(n({},e),{AdaptationSet:d.concat(c)})})),e},t.sortAdaptationSetsByBestCodec=a,t.getCodecsFromAdaptationSet=s,t.getMimeTypeForAdaptationSet=u,t.removeRepresentations=function(e,t){if(!(e.Period&&e.Period.length>0)||0===t.length)return e;var i=e.Period.map((function(e){return function(e,t){var i=e.AdaptationSet.map((function(e){return function(e,t,i){var r=t.Representation.filter((function(t){return!i.some((function(i){return i.equals(new o.RepresentationId(e,t._id))}))}));return n(n({},t),{Representation:r})}(e._internalId,e,t)})).filter((function(e){return e.Representation.length>0}));return n(n({},e),{AdaptationSet:i})}(e,t)})).filter((function(e){return e.AdaptationSet.length>0}));return n(n({},e),{Period:i})};var r=i(85434),o=i(79505);function a(e,t){var i=function(e){for(var i=0;i<t.length;i++)if(0===e.indexOf(t[i]))return i;return t.length+1};return e.sort((function(e,t){return i(s(e))-i(s(t))}))}function s(e){var t;if((null===(t=null==e?void 0:e._codecs)||void 0===t?void 0:t.length)>0)return e._codecs;if(e.Representation&&e.Representation.length>0){var i=e.Representation[e.Representation.length-1];if(i._codecs)return i._codecs}return""}function u(e){if(e._mimeType)return e._mimeType;if(Array.isArray(e.Representation)){var t=e.Representation.find((function(e){return e._mimeType}));if(t)return t._mimeType}return""}},14302:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AbstractUpdater=t.REPRESENTATION_UPDATE_CANCEL=void 0,t.calculateUpdateDelayInMillis=c;var n=i(80813),r=i(3714),o=i(34841),a=i(89927),s=i(88844);t.REPRESENTATION_UPDATE_CANCEL="CANCEL";var u=function(){function e(e,t){var i=this;this.context=e,this.updateCallbacks=t,this.qO=function(){var e,t;!1===(null===(e=i.pO)||void 0===e?void 0:e.hasSettled)&&(i.context.logger.debug("Scheduling delayed manifest update as playback has started"),null===(t=i.pO)||void 0===t||t.resolve(),i.pO=void 0)},this.wO=function(e){i.xO(e),i.clearTimeout()},this.yO=function(e){i.success(e),i.clearTimeout(),i.oO||i.scheduleUpdate()},this.oO=!1,e.eventHandler.on(r.PlayerEvent.Playing,this.qO,!0)}return e.prototype.cancel=function(){var e;this.mO&&(this.mO.reject(t.REPRESENTATION_UPDATE_CANCEL),this.updateCallbacks.error(t.REPRESENTATION_UPDATE_CANCEL),null===(e=this.pO)||void 0===e||e.reject(t.REPRESENTATION_UPDATE_CANCEL),this.pO=void 0),this.clearTimeout()},e.prototype.clearTimeout=function(){(0,s.clearTimeoutIfDefined)(this.nO),this.nO=null},e.prototype.stop=function(){null!==this.nO&&(this.oO=!0,this.cancel())},e.prototype.start=function(){this.oO=!1,this.scheduleUpdate()},e.prototype.scheduleUpdate=function(e){void 0===e&&(e=!1),this.nO||this.oO||this.rO(e)},e.prototype.rO=function(e){var t=this,i=c(this.getLastReloadTimestamp(),this.getReloadIntervalInSeconds());if(!(i>2147483647)){var n=new o.Deferred,r={isForcedUpdate:e,wasInvalidated:function(){return n!==t.mO}};n.promise.catch((function(){})),this.mO=n,this.nO=window.setTimeout((function(){return t.sO(r)}),i)}},e.prototype.sO=function(e){var t=this;this.tO(e.isForcedUpdate).then((function(){return t.update()})).then((function(i){e.wasInvalidated()||t.yO(i)})).catch((function(i){e.wasInvalidated()||t.wO(i)}))},e.prototype.tO=function(e){var t;return!(null===(t=this.context.settings)||void 0===t?void 0:t.POSTPONE_MANIFEST_UPDATES_UNTIL_PLAYBACK_START)||e||!function(e){var t,i;return!0===(null===(i=null===(t=null==e?void 0:e.serviceManager)||void 0===t?void 0:t.get(n.ServiceName.PlayerStateService))||void 0===i?void 0:i.isPlay())}(this.context)||this.vO()?Promise.resolve():(this.context.logger.debug("Delaying manifest update until playback has started"),this.pO=this.pO||new o.Deferred,this.pO.promise)},e.prototype.uO=function(){return this.context.serviceManager.get(n.ServiceName.SourceStoreService,this.context.sourceContext.sourceIdentifier)},e.prototype.vO=function(){var e,t,i;return null===(i=null===(t=null===(e=this.uO())||void 0===e?void 0:e.getState())||void 0===t?void 0:t.hls)||void 0===i?void 0:i.isLowLatencyPlaylist},e.prototype.xO=function(e){this.mO.reject(e),this.updateCallbacks.error(e)},e.prototype.success=function(e){this.mO.resolve(e),this.updateCallbacks.success(e)},e.prototype.dispose=function(){this.context.eventHandler.off(r.PlayerEvent.Playing,this.qO,!0)},Object.defineProperty(e.prototype,"isStopped",{get:function(){return this.oO},enumerable:!1,configurable:!0}),e.prototype.getPayload=function(){return this.mO.promise},e}();function c(e,t){if(isNaN(t))return 0;var i=(0,a.toSeconds)(Date.now()-e);return i>=t?0:(0,a.toMilliSeconds)(t-i)}t.AbstractUpdater=u},14443:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentController=void 0,t.getSegmentManager=ne,t.extractContainerFormat=re;var o=i(66790),a=i(40306),s=i(3336),u=i(25926),c=i(4224),d=i(80813),l=i(56481),h=i(3714),p=i(13531),f=i(77401),g=i(98714),m=i(49859),v=i(91678),y=i(46151),S=i(33436),T=i(15971),b=i(93204),M=i(94685),I=i(34047),P=i(85434),A=i(15014),R=i(89927),E=i(23068),C=i(58313),_=i(88052),B=i(62756),N=i(95880),O=i(34795),k=i(13422),L=i(23940),D=i(84696),x=i(3095),w=i(19627),H=i(36193),z=i(44115),W=i(59707),F=i(88935),U=i(39523),V=i(99529),j=i(60729),Y=i(49440),X=i(73794),q=i(86219),K=i(34810),G=i(37641),Q=i(50429),J=i(65439),Z=i(65244),$=i(98892),ee=i(25902),te=function(){function e(e,t,i,n,r,a,s,u){var c=this;this.context=e,this.onDataAvailableCallback=t,this.mimeType=i,this.manifestLoader=a,this.Jc=_.ModuleManager.get(B.ModuleName.HLS,!1),this.Pc={},this.Qc=[],this.hasDownloadError=!1,this.Wc=!1,this.bc=!1,this.cc=!1,this.kc=[],this.Kd=function(e){if((0,M.isContextAvailable)(c.context)){var t="Error obtaining ".concat(c.mimeType," segment info");c.Sc&&c.Sc===e?c.lc.insane(t,e):c.kd(t,e),c.Sc=e}},this.Rd=function(e){c.kd("Error in cancelLoading of segmentLoaderPool ",e)},this.getNext=function(e,t){var i,n=!(null===(i=c.oc)||void 0===i?void 0:i.canLoad())||c.Yc||c.hasActiveTransmuxingJobs()||c.cc||c.qd();if(c.Nc&&!n){c.kd("Getting next segment for time ".concat(e));var r={periodId:c.Vc,recommendedRepresentationId:t,time:e};c.Hd(r).then((function(e){return c.hd(e)})).catch(c.Kd)}},this.bd=function(e){c.hasDownloadError=!1,c.Xd(e);var t=c.Yd(e);if(t!==o.SegmentVerificationResult.Drop){if(t!==o.SegmentVerificationResult.Park)if(c.isTransmuxerRequired()){var i=e.getSegmentInfo();i.presentationTimeOffset&&isNaN(i.presentationTimeOffset)&&(c.Mc.setTimestampOffset(0),i.presentationTimeOffset=0),c.Wd(e)}else{var n=!1;c.Nc&&c.oc&&(n=c.Tc.onSegmentAvailable(e,{id3:[],closedCaptions:[]},c.Nc,c.oc)),n||ie(e.getSegmentInfo(),c.jc),e.getMimeType().indexOf("mp4")>-1&&!c.Se()&&(c.Rc=e.isLastSegment())}}else ie(e.getSegmentInfo(),c.jc)},this.Bd=function(e,t){var i,n=Boolean(null===(i=c.hc)||void 0===i?void 0:i.shouldDownloadBeCancelled(c.mimeType,e,t));return c.Se()&&c.gc.possiblyDependentSegments&&n?(c.kd("Download should be cancelled, but this is disabled for segments not starting with key frames"),!1):n};var l=e.sourceContext.sourceIdentifier;if(this.Vc=s,this.jc=u,this.Kc=e.serviceManager.get(d.ServiceName.ManifestUpdateSchedulingService,l),this.Zc=new w.SegmentUnavailabilityHandler(this.context),this.hc=this.context.serviceManager.get(d.ServiceName.AdaptationService),this.ic=this.context.serviceManager.get(d.ServiceName.StreamTimeService),this.gc={isTransmuxingRequired:r&&!this.pc,transmuxer:void 0,possiblyDependentSegments:!1,isAvMuxedTogether:(0,I.isAVMuxedTogether)(n),discardNextSegment:!1,muxedAudioTrackIndex:0},this.gd()){var h=this.fd();this.gc.isTransmuxingRequired=h.source!==h.target}this.Pe()}return Object.defineProperty(e.prototype,"lc",{get:function(){return this.context.logger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"mc",{get:function(){return this.context.settings},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"nc",{get:function(){return this.context.eventHandler},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oc",{get:function(){return ne(this.context,this.mimeType,this.Lc,this.gc,this.dc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"pc",{get:function(){return P.MimeTypeHelper.isSubtitle(this.mimeType)},enumerable:!1,configurable:!0}),e.prototype.qc=function(e){var t,i=this.rc();if(i){var n=null===(t=this.hc)||void 0===t?void 0:t.getUserSelectedRepresentation(this.mimeType,this.Nc,e);return n?(this.nc.dispatchEvent(i,{representationID:n._internalId.representationId}),n._internalId):void this.nc.dispatchEvent(i,{representationID:e.representationId})}},e.prototype.rc=function(){return P.MimeTypeHelper.isAudio(this.mimeType)?h.PlayerEvent.AudioAdaptation:P.MimeTypeHelper.isVideo(this.mimeType)?h.PlayerEvent.VideoAdaptation:null},e.prototype.sc=function(){var e;if(null===(e=this.context.adRestorationOptimizationService)||void 0===e?void 0:e.hasPrefetchedSegment(this.mimeType,this.Xc))return this.context.adRestorationOptimizationService.getRepresentationForPrefetchedSegment(this.mimeType)},e.prototype.tc=function(e){if(!this.Mc.canSwitchRepresentation(e.time)&&this.Oc)return this.Oc;var t=this.sc();if(t)return t;var i=this.jc.getState(),n=!!i&&Boolean((0,m.getPreferredBitrate)((0,m.getAdaptationState)(i),this.mimeType)),r=this.Ed(),o=e.recommendedRepresentationId,a=(null==o?void 0:o.periodId)===this.getCurrentPeriodId();o&&a&&!n&&(r=o);var s=r?this.qc(r):void 0;return s?(this.bc=!0,s):r},e.prototype.Ed=function(){var e,t,i={hlsDependentSegments:this.gc.possiblyDependentSegments,segmentDuration:this.Mc.getSegmentDuration()};return null===(e=this.hc)||void 0===e?void 0:e.selectRepresentation(this.mimeType,i,null===(t=this.getCurrentAdaptationSet())||void 0===t?void 0:t.Representation)},e.prototype.Fd=function(e){var t=this.Oc?this.Oc.representationId:null;this.kd("switching representation from ".concat(t," to ").concat(e.representationId)),this.Mc.setRepresentationId(e),this.Oc=e},e.prototype.invalidateOngoingRequests=function(){this.Wc=!0},e.prototype.Gd=function(e,t){var i,n=oe(e,this.context),r=oe(t,this.context),o=n?(0,L.representationToQuality)(n,this.mimeType):void 0,a=r?(0,L.representationToQuality)(r,this.mimeType):void 0;if(a){var s={targetQuality:a,targetQualityId:a.id,sourceQuality:o,sourceQualityId:null!==(i=null==o?void 0:o.id)&&void 0!==i?i:null};P.MimeTypeHelper.isVideo(this.mimeType)?this.context.eventHandler.dispatchEvent(h.PlayerEvent.VideoDownloadQualityChange,s):P.MimeTypeHelper.isAudio(this.mimeType)&&this.context.eventHandler.dispatchEvent(h.PlayerEvent.AudioDownloadQualityChange,s)}},e.prototype.Hd=function(e){var t,i=this,r=void 0!==(null===(t=this.Xc)||void 0===t?void 0:t.segmentNumber)?this.Xc.segmentNumber+1:0,o=this.tc(e),u=!o.equals(this.Oc);return u&&P.MimeTypeHelper.isAV(this.mimeType)&&this.Gd(this.Oc,o),this.Wc=!1,this.Yc=this.Pd(o).then((function(){return i.Nc&&i.Mc.setAdaptationSetId(i.Nc,o),u&&i.Fd(o),i.Mc.getNextSegmentInfo(e.time)})).then((function(e){var t,a=null!==(t=i.Oc)&&void 0!==t?t:o;if(i.Ld(e,r,a),i.Id(e))throw(0,M.isContextAvailable)(i.context)&&i.kd("invalidating ongoing SegmentInfo request for",n({},e)),"ongoing segment info request was invalidated";return i.Xc=e,e})).catch((function(t){var r,u;if(i.Yc=void 0,function(e){return e instanceof s.PlayerError?[a.ErrorCode.SOURCE_MANIFEST_INVALID,a.ErrorCode.SOURCE_COULD_NOT_LOAD_MANIFEST].includes(e.code):e===f.RequestError.Failed||e===f.RequestError.TimedOut}(t)){var c=null!==(u=null!==(r=null==t?void 0:t.name)&&void 0!==r?r:null==t?void 0:t.message)&&void 0!==u?u:t;i.kd("HLS playlist loading failed for representation ".concat(o.representationId," (").concat(c,")"));var d=i.vd(o);if(d)return i.kd("Trying with lower quality representation ".concat(d.representationId)),i.Hd(n(n({},e),{recommendedRepresentationId:d}));i.wd(o,t)}throw t})).finally((function(){i.ac=void 0})),this.Yc},e.prototype.Id=function(e){return this.Wc&&e&&!e.isInitSegment&&!this.Jd(e)},e.prototype.Jd=function(e){return void 0!==this.ac&&(0,E.isNumber)(e.startTime)&&(0,E.isNumber)(e.duration)&&this.ac>=e.startTime&&this.ac<=e.startTime+e.duration},e.prototype.getDataSegmentInfo=function(e){var t={periodId:this.Vc,time:e};return this.Oc&&this.Oc.periodId===this.getCurrentPeriodId()?this.Hd(n(n({},t),{recommendedRepresentationId:this.Oc})):this.Hd(t)},e.prototype.Ld=function(e,t,i){e&&(this.Md(e,i),this.Nd(e),this.Od(i,e),e.duration||e.isInitSegment||(e.duration=this.Mc.getSegmentDuration()),(void 0===e.segmentNumber||isNaN(e.segmentNumber))&&(e.segmentNumber=t),e.discardData=this.gc.discardNextSegment,this.gc.discardNextSegment=!1,this.bc&&(e.preventDownloadCanceling=!0,this.bc=!1))},e.prototype.Md=function(e,t){var i=oe(t,this.context);i&&(e.representationId=t.representationId,e.internalRepresentationId=t,e.mimeType=this.mimeType,e.bitrate=i._bandwidth,e.periodId=t.periodId,e.codecs=this.getCodecs(),P.MimeTypeHelper.isAudio(this.mimeType)?(e.sampleRate=i._audioSamplingRate,e.width=void 0,e.height=void 0):P.MimeTypeHelper.isVideo(this.mimeType)&&(e.width=i._width,e.height=i._height,e.frameRate=i._frameRate))},e.prototype.Nd=function(e){if(P.MimeTypeHelper.isVideo(this.mimeType)&&!e.dateTime&&this.mc.AKAMAI_DATETIME_PARSING&&this.Jc){var t=null!=e.duration?this.Jc.PlaylistUtils.getProgramDateTimeFromSegmentUrl(e.url,e.duration):void 0;t&&(e.dateTime=t)}},e.prototype.Od=function(e,t){var i=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(t){return t.getAvailableBaseURLsForRepresentation(e)}),void 0,this.context.sourceContext.sourceIdentifier);t.availableBaseURLs=i,t.firstUsedBaseURLIndex=0,this.Xc&&this.Xc.lastUsedBaseURLIndex&&(t.firstUsedBaseURLIndex=this.Xc.lastUsedBaseURLIndex),t.lastUsedBaseURLIndex=t.firstUsedBaseURLIndex,this.Se()?(t.baseURL="",t.mediaURL||(t.mediaURL=t.url)):(t.baseURL=i[t.firstUsedBaseURLIndex],t.mediaURL=t.mediaURL||t.url,delete t.url),t.url=C.URLHelper.concatBaseUrlWithPartial(t.baseURL,t.mediaURL)},e.prototype.Pd=function(e){var t,i,n,r,o=this,a=null!==(i=null===(t=this.Nc)||void 0===t?void 0:t.adaptationSetId)&&void 0!==i?i:"",s=null===(n=this.jc.getState().activeTracks)||void 0===n?void 0:n[a],u=!(null===(r=null==s?void 0:s.selectedRepresentationId)||void 0===r?void 0:r.equals(e));return this.jc.dispatch((0,H.setRepresentationIdAction)(e)),u?this.Kc?this.Kc.waitForRepUpdate(e).then((function(){return o.Mc.updateRepresentation(e)})):Promise.reject("ManifestUpdateScheduler does not exist."):Promise.resolve()},e.prototype.Qd=function(){var e;return this.isTransmuxerRequired()&&Boolean(null===(e=this.gc.transmuxer)||void 0===e?void 0:e.isTransmuxing())},e.prototype.hasActiveTransmuxingJobs=function(){var e;return!!this.isTransmuxerRequired()&&(this.hasDelayedSegmentsInTransmuxer()||Boolean(null===(e=this.gc.transmuxer)||void 0===e?void 0:e.hasActiveJobs()))},e.prototype.hasDelayedSegmentsInTransmuxer=function(){var e;return P.MimeTypeHelper.isAudio(this.mimeType)&&this.isTransmuxerRequired()&&Boolean(null===(e=this.gc.transmuxer)||void 0===e?void 0:e.hasDelayedAudioSegments())},e.prototype.Sd=function(){var e,t,i=this;(null!==(t=null===(e=this.gc.transmuxer)||void 0===e?void 0:e.discardCurrentJobs(this.mimeType))&&void 0!==t?t:[]).forEach((function(e){return ie(e.mp2tsSegment.getSegmentInfo(),i.jc)}))},e.prototype.cancelLoading=function(){var e;this.Wc=!0,null===(e=this.oc)||void 0===e||e.cancel().catch(this.Rd)},e.prototype.seekTo=function(e){var t=this;null!==e&&this.Nc&&(this.cancelLoading(),this.Sd(),this.Qc=[],this.hasDownloadError=!1,this.Rc=!1,this.fc&&this.fc.reset(),this.isTransmuxerRequired()&&this.gc.transmuxer&&this.gc.transmuxer.resetCaptionParser(),e>=0&&(this.ac=e,this.Mc.seekTo(e),this.context.serviceManager.maybeCall(d.ServiceName.TimedMetadataService,(function(e){return e.clearSegmentBoundMetadata(t.mimeType)}))))},e.prototype.Td=function(e){var t,i=this,n=this.Ve(this.Vc),r=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.getMediaPresentationDuration()}),0,this.context.sourceContext.sourceIdentifier);if(n&&n.hasOwnProperty("_duration"))t=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.getPeriodDuration(i.Vc)}),void 0,this.context.sourceContext.sourceIdentifier);else{if(0===r)return!1;t=r}return this.Mc.hasNext(t)},e.prototype.Ud=function(e){var t=this;if(this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.isAvailabilityEndTimeExceeded()}),!1,this.context.sourceContext.sourceIdentifier))return this.lc.log("Stream (".concat(this.mimeType,") availability end time reached, stopping download of further segments.")),this.Rc=!0,!1;this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.isLastPeriod(t.Vc)}),!1,this.context.sourceContext.sourceIdentifier)&&this.Mc.resolvePendingSegmentInfoRequests();var i=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.getPeriodDuration(t.Vc)}),void 0,this.context.sourceContext.sourceIdentifier);return this.Mc.hasNext(i)},e.prototype.hasNext=function(e){var t=this,i=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.isLastPeriod(t.Vc)}),!1,this.context.sourceContext.sourceIdentifier);return!(this.Rc&&i||!this.Nc||!this.Mc)&&(this.Ue()?this.Ud(e):this.Td(e))},e.prototype.Vd=function(e){var t=this;if(e.transmuxedSegments.every((function(e){return null!==e.getCodec()}))){!this.gc.possiblyDependentSegments&&function(e){return e.transmuxedSegments.some((function(e){return P.MimeTypeHelper.isAV(e.getMimeType())&&!e.isIndependentlyDecodable()}))}(e)&&(this.kd("Encountered HLS segment not starting with a key frame"),this.gc.possiblyDependentSegments=!0);var i=e.transmuxedSegments.find((function(e){return"video/mp4"===e.getMimeType()})),n=e.transmuxedSegments.filter((function(e){return"audio/mp4"===e.getMimeType()})),r=[i,n[this.gc.muxedAudioTrackIndex]||n[0]].filter((function(e){return Boolean(e)}));r.forEach((function(e){return t.Uc.maybeAdjustTimestampOffsetAtDiscontinuityChange(e,t.Mc)})),this.oc&&this.Nc&&this.Tc.onMuxedSegmentAvailable(e,r,this.Nc,this.oc);var o=r[r.length-1];o&&o.getMimeType().indexOf("mp4")>-1&&(this.Rc=o.isLastSegment()),this.kd("Transmuxing done",e.originalSegment.getUrl())}else{var a=e.originalSegment.getUrl();this.kd("Discarding muxing because codecs were not available in the segment: ".concat(a))}},e.prototype.hasPendingSegments=function(e){var t,i,n,r,o,a;return e?(o=this.isTransmuxerRequired()&&Boolean(this.gc.transmuxer)&&this.gc.transmuxer.isTransmuxingSegmentsForPeriod(e),a=null!==(i=null===(t=this.oc)||void 0===t?void 0:t.isLoading(e))&&void 0!==i&&i):(o=this.Qd(),a=null!==(r=null===(n=this.oc)||void 0===n?void 0:n.isLoading())&&void 0!==r&&r),a||o||this.cc||Boolean(this.Yc)},e.prototype.Wd=function(e){var t=this;if(this.gc.transmuxer){var i=e.getSegmentInfo();this.gc.transmuxer.isSetupForDiscontinuity(i.discontinuitySequenceNumber)||(void 0===i.startTime&&(this.kd("resetting segment playback times for new initialization"),this.jc.dispatch((0,W.resetSegmentPlaybackTimes)())),(0,X.initializeHlsSegmentStartTimes)(e,this.context,this.Mc));var n=Date.now();this.gc.transmuxer.transmuxSegment(e).then((function(e){var r,o=(0,R.toSeconds)(Date.now()-n),a={time:o,representationId:i.internalRepresentationId};return t.context.store.dispatch((0,v.addMetricsValue)(t.mimeType,S.MetricType.TransmuxingTime,a)),t.context.logger.debug("Transmuxed ".concat(t.mimeType," segment in: ").concat(null==o?void 0:o.toFixed(2),", quality: ").concat(null!==(r=i.representationId)&&void 0!==r?r:"")),t.Vd(e)})).catch((function(i){ie(e.getSegmentInfo(),t.jc),i!==o.TransmuxingRejectionReason.TRANSMUXING_ABORTED?t.ed(e,"Transmuxing failed: ".concat(i)):t.kd(i,e.getUrl())}))}},e.prototype.Xd=function(e){var t,i;if(!this.gd()||this.cd(e)){var n=(0,Y.resolveContainerFormat)(this.mimeType,e,this.Se());this.kd("Container format is ".concat(null==n?void 0:n.source)),n&&this.jc.dispatch((0,H.setContainerFormatAction)(e.getRepresentationId(),n)),this.gc.isTransmuxingRequired=Boolean(n&&n.source!==n.target),!this.gc.isTransmuxingRequired&&P.MimeTypeHelper.isAV(this.mimeType)&&(null===(t=this.gc.transmuxer)||void 0===t||t.dispose(),this.context.serviceManager.maybeCall(d.ServiceName.SubtitleService,(function(e){e.setTransmuxer(void 0)}),void 0,null===(i=this.context.sourceContext)||void 0===i?void 0:i.sourceIdentifier))}},e.prototype.Yd=function(e){var t;if(this.cd(e))return this.kd("Warning: Loaded segment has size 0 bytes, skipping further processing! May cause gap!",e.getUrl()),null===(t=this.fc)||void 0===t||t.reset(),o.SegmentVerificationResult.Drop;if(this.isTransmuxerRequired()){if(!_.ModuleManager.has(B.ModuleName.ContainerTS))return this.context.eventHandler.fireError(new N.PlayerModuleMissingError(B.ModuleName.ContainerTS)),o.SegmentVerificationResult.Drop}else if(!this.Te()&&this.dd(e)){if(this.context.settings.DROP_INVALID_SEGMENTS)return this.ed(e,"The loaded MP4 segment is invalid, skipping further processing! May cause gap!"),o.SegmentVerificationResult.Drop;this.ed(e,"The loaded MP4 segment is invalid. This may cause playback issues!")}var i=_.ModuleManager.get(B.ModuleName.LowLatency,!1),n=this.context.serviceManager.get(d.ServiceName.ManifestService,this.context.sourceContext.sourceIdentifier);if((0,j.isPlayingLowLatencyHls)(this.context)&&i&&n){var r=i.verifyLlHlsSegment(e,n);if(r===o.SegmentVerificationResult.Drop)return this.kd("LL-HLS Segment Verification: Dropping (partial) segment as it disappeared from playlist",e.getUrl()),o.SegmentVerificationResult.Drop;if(r===o.SegmentVerificationResult.Park)return this.Zd(e),o.SegmentVerificationResult.Park}return o.SegmentVerificationResult.Publish},e.prototype.Zd=function(e){var t=this,i=(0,b.subscribe)(this.jc)((function(t){var i;if(t.manifest)return null===(i=(0,A.findRepresentation)(t.manifest,e.getRepresentationId()))||void 0===i?void 0:i._requestTimestamp}),(function(){i(),t.ad(i),t.bd(e)}),(function(e,t){return e!==t}));this.kc.push(i)},e.prototype.ad=function(e){var t=this.kc.findIndex((function(t){return t===e}));t>-1&&this.kc.splice(t,1)},e.prototype.cd=function(e){var t=e.getData();return!!(t&&t.byteLength<1)},e.prototype.dd=function(e){if(!_.ModuleManager.has(B.ModuleName.ContainerMP4)||!P.MimeTypeHelper.isAV(this.mimeType))return!1;var t=_.ModuleManager.get(B.ModuleName.ContainerMP4,!1),i=t.isValidMp4,n=t.MP4Parser;return this.Lc instanceof n&&!i(e)},e.prototype.ed=function(e,t){this.nc.dispatchEvent(h.PlayerEvent.Warning,new u.PlayerWarning(c.WarningCode.PLAYBACK_INVALID_DATA_SEGMENT_ENCOUNTERED,t,{mimeType:e.getMimeType(),segmentUrl:e.getUrl()}))},e.prototype.fd=function(){var e=this.jc.getState();return e&&(0,z.getContainerFormat)(e,P.MimeTypeHelper.getMediaType(this.mimeType))},e.prototype.gd=function(){return Boolean(this.fd())},e.prototype.hd=function(e){var t=this;return this.Yc=void 0,this.cc=!0,e?(this.Qc.push(e),this.Sc=void 0,this.jd(e),this.ld(e).catch((function(i){return t.od(i,e)})).finally((function(){return t.cc=!1}))):Promise.resolve()},e.prototype.jd=function(e){var t=this.getInitSegmentInfoForDataSegmentInfo(e);t&&(e.init=t)},e.prototype.kd=function(e){for(var t,i,n,o=[],a=1;a<arguments.length;a++)o[a-1]=arguments[a];(null===(i=this.lc)||void 0===i?void 0:i.isLevelEnabled(p.LogLevel.DEBUG))&&(t=this.lc).debug.apply(t,r(["[".concat(this.mimeType,"][").concat(null===(n=this.Oc)||void 0===n?void 0:n.representationId,"] SegmentController: ").concat(e)],o,!1))},e.prototype.ld=function(e){var t;return(null===(t=this.lc)||void 0===t?void 0:t.isLevelEnabled(p.LogLevel.DEBUG))&&this.kd("Loading ".concat(JSON.stringify(e))),this.md(e)},e.prototype.getInitSegmentInfoForDataSegmentInfo=function(e){var t;return(t=e.init?n(n({},e.init),{isInitSegment:!0,internalRepresentationId:e.internalRepresentationId}):this.Mc.getInitSegmentInfo(e.internalRepresentationId))&&this.Ld(t,void 0,e.internalRepresentationId),t},e.prototype.md=function(e){var t=this;return this.oc?this.oc.getSegment(e).then((function(e){return t.nd(e)})):Promise.reject()},e.prototype.nd=function(e){var t=this;return new Promise((function(i,n){e.transform((function(e){!function(e,t){var i=t.findIndex((function(t){return(0,G.areSegmentsIdentical)(t,e)}));i>-1&&t.splice(i,1)}(e.getSegmentInfo(),t.Qc),t.bd(e)}),(function(){return i()}),(function(e){var i=e.message,r={reason:i};return n(r),r.reason!==Z.SegmentLoadingErrorReason.CANCEL&&t.kd("Error loading segment",i),i}))}))},e.prototype.od=function(e,t){var i;null===(i=(0,T.getSourceStore)(this.context))||void 0===i||i.dispatch((0,g.clearPreferredBitrateForMimeTypeAction)(this.mimeType)),ie(t,this.jc);var n=(null==e?void 0:e.info)?e.info.response.status:0;switch(null==e?void 0:e.reason){case Z.SegmentLoadingErrorReason.CANCEL:this.kd("Download was cancelled as the segment is probably outdated");break;case Z.SegmentLoadingErrorReason.ERROR_DECRYPTING:this.kd("Could not decrypt segment",t.url),this.nc.dispatchEvent(h.PlayerEvent.Warning,new u.PlayerWarning(c.WarningCode.DRM_COULD_NOT_DECRYPT_SEGMENT));break;case Z.SegmentLoadingErrorReason.ERROR_LOADING:this.sd(n,t,Z.SegmentLoadingErrorReason.ERROR_LOADING);break;case Z.SegmentLoadingErrorReason.TIMEOUT:this.sd(n,t,Z.SegmentLoadingErrorReason.TIMEOUT);break;case Z.SegmentLoadingErrorReason.ABR_TIMEOUT:this.Ad(t);break;default:this.kd("Unexpected error while loading the segment",{url:t.url,error:e})}},e.prototype.pd=function(e,t){var i=this;return this.Jc&&this.manifestLoader instanceof this.Jc.M3u8Loader?this.manifestLoader.switchToBackupStream(e,t).then((function(e){return e.length>0})).catch((function(e){return i.kd("Could not switch to HLS backup stream: ".concat(e)),Promise.resolve(!1)})):Promise.resolve(!1)},e.prototype.qd=function(){return!!(this.Jc&&this.manifestLoader instanceof this.Jc.M3u8Loader)&&this.manifestLoader.isSwitchingToBackupStreams()},e.prototype.rd=function(){var e=this.mc.CHUNKED_CMAF_STREAMING?1:this.Qc.length;return this.Mc.getIndex()-e},e.prototype.sd=function(e,t,i){(null==t?void 0:t.isPreloadHint)?this.kd("Ignoring download error of preload hint segment.",t.url):(this.kd("Failed to load segment (code: ".concat(e,") ").concat(t.url)),this.Zc.shouldTryAlternatives(e)?this.td(t,e,i):(this.yd(t),this.hasDownloadError=!0))},e.prototype.td=function(e,t,i){var n=this;if(this.Oc&&this.Oc.equals(e.internalRepresentationId)){var r=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return n.Nc&&e.getRepresentation(n.Nc,n.Oc.representationId)}),null,this.context.sourceContext.sourceIdentifier);if(r){var o=!1;this.pd(r,e).then((function(e){return o=e})).then((function(){var e;return null===(e=n.oc)||void 0===e?void 0:e.cancel()})).then((function(){return n.ud(o,e,t,i)}))}}else this.kd("Ignoring download error of previous representation.")},e.prototype.ud=function(e,t,i,n){var r,o=this.rd();if(this.Qc=[],e)this.Mc.setIndex(Math.max(0,o));else if(r=this.Zc.switchBaseURL(t))this.context.logger.debug("Switching ".concat(this.mimeType," segment location to ").concat(r.baseURL)),this.hd(r);else{var a=this.vd(this.Oc);if(a){if(this.ic){this.Mc.setIndex(Math.max(0,o)),this.kd("Trying with lower quality segment ".concat(a.representationId));var s=this.ic.getTimeForNextSegment((0,V.getTrackIdentifier)(t)),u=this.Mc.getLatestTimeForPossibleSwitch(s);this.getNext(u,a)}}else this.hasDownloadError=!0,this.xd(t,i,n)}},e.prototype.vd=function(e){var t,i,n;if(e&&(null===(t=this.hc)||void 0===t?void 0:t.isAuto(this.mimeType))){var r=null!==(n=null===(i=this.We(this.Nc))||void 0===i?void 0:i.Representation)&&void 0!==n?n:[];return this.Zc.switchQuality(r,e)}},e.prototype.wd=function(e,t){var i;if(this.Ue()&&this.mc.INFINITE_RETRIES_FOR_LIVE){this.kd("Could not load any segment of any quality from any CDN: restart retries."),this.Zc.downloadSuccess(!1);var n=oe(this.Oc,this.context);n&&(this.jc.dispatch((0,W.updateRepresentationFailedDownloadAction)(n._internalId,null)),null===(i=this.Kc)||void 0===i||i.scheduleRepresentationUpdate(n))}else{var r=oe(e,this.context);(0,K.throwPlaylistDownloadError)(this.context,"Could not load segments of any quality from any CDN",r,t)}},e.prototype.xd=function(e,t,i){this.yd(e),this.Ue()&&this.mc.INFINITE_RETRIES_FOR_LIVE?(this.kd("Could not load current segment of any quality from any CDN (all retries failed), skipping it..."),this.zd(e)):(0,Q.throwDownloadError)(this.context,"Segment not available at any quality or location",t,e,i)},e.prototype.yd=function(e){var t,i=(0,J.getSegmentInfoTimeRange)(e);if(i&&(0,M.isContextAvailable)(this.context)&&e.mimeType){var n=(0,V.getTrackIdentifier)(e);null===(t=(0,T.getSourceStore)(this.context))||void 0===t||t.dispatch((0,U.addStreamTimeRange)(n,i,V.StreamTimeRangeType.Failed))}},e.prototype.zd=function(e){if(this.Zc.downloadSuccess(!1),e.hasDownloadFailed=!0,null!=e.startTime&&null!=e.duration){var t=e.startTime+e.duration,i=this.Mc.adjustTimeToNextSegmentStart(t);this.getNext(i)}},e.prototype.Ad=function(e){var t,i=this;(0,M.isContextAvailable)(this.context)&&(this.kd("Download took too long, cancelled it",e.url),!e.isInitSegment&&this.Mc&&(null===(t=this.oc)||void 0===t||t.cancel().then((function(){if(i.Mc){var e=i.rd();i.Qc=[],i.kd("Trying to get the same segment with a lower bitrate."),i.Mc.setIndex(Math.max(0,e))}}))))},e.prototype.Cd=function(e,t,i){var n=this;if(void 0===i&&(i=!1),this.pc&&!(null==t?void 0:t.id))return this.dc=t,void(this.oc&&this.cancelLoading());var r=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(r){return r.findAdaptationSet(e,n.mimeType,t,i)}),null,this.context.sourceContext.sourceIdentifier);return r?(this.dc=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.getLangObjectFromAdaptationSet(r,n.mimeType)}),void 0,this.context.sourceContext.sourceIdentifier),r._internalId):void 0},e.prototype.getCurrentAdaptationSet=function(){return this.We(this.Nc)},e.prototype.getAdaptationSetForPeriodId=function(e){return this.We(this.Pc[e])||this.getCurrentAdaptationSet()},e.prototype.updateMpd=function(){var e;this.kd("Caught a manifest update event");var t=!this.Ve(this.Vc);for(var i in this.Nc=this.Cd(this.Vc,this.dc,!1),!t&&this.Nc&&(this.Pc[this.Vc]=this.Nc,null===(e=this.hc)||void 0===e||e.setAdaptationSetId(this.mimeType,this.Nc),this.Mc.setAdaptationSetId(this.Nc,this.Oc,{isPeriodSwitch:!1,isManifestUpdate:!0})),this.Pc)this.Ve(i)||delete this.Pc[i]},e.prototype.activateSubtitleSegmentController=function(e){var t;this.pc&&(this.Nc&&(this.Mc.setAdaptationSetId(this.Nc),null===(t=this.hc)||void 0===t||t.setAdaptationSetId(this.mimeType,this.Nc)),isNaN(this.Mc.getTimestampOffset())&&this.Mc.setTimestampOffset(0),this.seekTo(e))},e.prototype.setCurrentLangObj=function(e){var t;if(this.gc.isAvMuxedTogether&&P.MimeTypeHelper.isVideo(this.mimeType)){var i=this.We(this.Nc);if(null==i?void 0:i.ContentComponent){var n=i.ContentComponent.find((function(t){return"audio"===t._contentType&&t._id===e.id}));if(n)return this.gc.muxedAudioTrackIndex=i.ContentComponent.filter((function(e){return"audio"===e._contentType})).indexOf(n),void(this.dc=e)}}e.id!==(null===(t=this.dc)||void 0===t?void 0:t.id)&&this.Dd(e)},e.prototype.Dd=function(e){var t=this.Nc;if(this.Nc&&this.jc.dispatch((0,H.removeActiveTrackAction)(this.Nc)),this.Nc=this.Cd(this.Vc,e),this.Nc){var i=this.We(this.Nc);i&&this.jc.dispatch((0,H.setMediaTypeAction)(i._internalId,(0,D.resolveMediaTypes)(i))),this.Pc[this.Vc]=this.Nc,t&&!this.Nc.equals(t)&&this.Oe(e)}},e.prototype.Oe=function(e){var t,i;this.dc=e,this.ec=e,this.kd("Trying to set language to ID ".concat(this.dc.id)+" (lang: ".concat(this.dc.lang,") for mpd handler and adaption handler")),this.Nc&&(this.Mc.setAdaptationSetId(this.Nc),null===(t=this.hc)||void 0===t||t.setAdaptationSetId(this.mimeType,this.Nc),null===(i=this.hc)||void 0===i||i.selectRepresentation(this.mimeType))},e.prototype.getCurrentLangObj=function(){return this.dc},e.prototype.stop=function(){var e,t;this.cancelLoading(),null===(e=this.oc)||void 0===e||e.clearCache(),null===(t=this.hc)||void 0===t||t.shutdown(this.mimeType)},e.prototype.Pe=function(){var e,t,i=this,n=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.getFirstPeriod()}),void 0,this.context.sourceContext.sourceIdentifier);!this.Vc&&n&&(this.Vc=n._id);var r=q.MPDHandlerFactory.createInstance(this.context,this.mimeType,this.manifestLoader,this.Vc);if(r){this.Mc=r;var o,u=re(this.mimeType);u&&(o=(0,x.createSegmentParser)(this.context,u)),o?this.Lc=o:this.kd("Could not create segment parser for mime type"),this.Uc=new ee.TimestampOffsetService(this.context,this.mimeType),this.Tc=new $.SegmentPreProcessor(this.context,this.mimeType,this.onDataAvailableCallback,this.gc,this.Zc,this.Uc,this.Lc),this.Tc.setMpdHandler(this.Mc),this.hasDownloadError=!1,this.Nc=this.Cd(this.Vc,this.dc),this.Nc&&(this.Pc[this.Vc]=this.Nc),this.context.serviceManager.maybeCall(d.ServiceName.SegmentService,(function(e){return e.add({mimeType:i.mimeType,shouldDownloadBeCancelledCallback:i.Bd},i.Lc,i.dc)})),this.Se()&&(this.fc=new this.Jc.HlsTimelineTracker(this.context,this.mc.GAP_TOLERANCE),this.Tc.setHlsTimelineTracker(this.fc)),P.MimeTypeHelper.isMP4(this.mimeType)&&this.context.serviceManager.maybeCall(d.ServiceName.SubtitleService,(function(e){e.setupCea608CaptionExtractor(i.context.logger)}),void 0,null===(e=this.context.sourceContext)||void 0===e?void 0:e.sourceIdentifier),this.Nc&&(null===(t=this.hc)||void 0===t||t.setAdaptationSetId(this.mimeType,this.Nc),this.Mc.setAdaptationSetId(this.Nc,void 0,{isPeriodSwitch:!0}),this.Ue()&&!this.mc.ENABLE_SEEK_FOR_LIVE&&this.Mc.timeShift(0,this.Vc)),this.Rc=!1}else this.nc.fireError(new s.PlayerError(a.ErrorCode.SOURCE_MANIFEST_INVALID))},e.prototype.getSegmentInfos=function(){var e,t=this,i=null===(e=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.getAvailableBaseURLsForRepresentation(t.Oc)}),null,this.context.sourceContext.sourceIdentifier))||void 0===e?void 0:e[0];return this.Mc.getSegmentInfos(i)},e.prototype.getCurrentPeriodId=function(){return this.Vc},e.prototype.Qe=function(e){var t=this;return this.ec&&this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(i){return i.isLanguageAvailable(e,t.mimeType,t.ec)}),!1,this.context.sourceContext.sourceIdentifier)?this.ec:this.dc},e.prototype.switchPeriod=function(e){var t,i,n,r=this,o=this.Qe(e);if(this.kd("switching period from ".concat(this.Vc," to ").concat(e)),this.cancelLoading(),null===(t=this.oc)||void 0===t||t.clearCache(),this.Re(),this.Vc=e,this.Oc=void 0,this.Nc=this.Cd(e,o,!0),this.Nc&&(this.Pc[e]=this.Nc),this.Nc){null===(i=this.hc)||void 0===i||i.setAdaptationSetId(this.mimeType,this.Nc);var u=this.Mc.getPendingSegmentInfoRequest(),c=q.MPDHandlerFactory.createInstance(this.context,this.mimeType,this.manifestLoader,e,o);c?(this.Mc.dispose(),this.Mc=c):this.nc.fireError(new s.PlayerError(a.ErrorCode.SOURCE_MANIFEST_INVALID)),this.Tc.setMpdHandler(this.Mc),this.Mc.setPendingSegmentInfoRequest(u),this.Mc.setAdaptationSetId(this.Nc,void 0,{isPeriodSwitch:!0})}if(this.isTransmuxerRequired()){var l=this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return r.Nc&&e.findDownloadedHlsRepresentation(r.Nc)}),null,this.context.sourceContext.sourceIdentifier);l&&this.Mc.setRepresentationId(l._internalId),this.fc&&this.fc.reset(),null===(n=this.oc)||void 0===n||n.clearCache(!1)}this.hasDownloadError=!1,this.Rc=!1},e.prototype.getMPDHandler=function(){return this.Mc},e.prototype.getIndex=function(){return this.Mc&&this.Mc.getIndex()||0},e.prototype.getSourceBufferTypes=function(){var e=[];return this.isTransmuxerRequired()&&this.gc.isAvMuxedTogether?(e.push("video/mp4"),e.push("audio/mp4")):e.push(this.mimeType),e},e.prototype.getCodecs=function(){var e,t=this.getCurrentAdaptationSet();return null!==(e=t&&(0,k.getCodecsFromAdaptationSet)(t))&&void 0!==e?e:void 0},e.prototype.getLiveEdgeTime=function(){return this.Ue()?this.Mc.getLiveEdgeTime():-1},e.prototype.setAdaptionLogicStartupPhase=function(){var e;null===(e=this.hc)||void 0===e||e.setStartupPhase(this.mimeType)},e.prototype.getMimeType=function(){return this.mimeType},e.prototype.Re=function(){var e=this,t=this.context.store.getState(),i=t?(0,y.getMetricsState)(t):void 0;if(this.oc&&i){var n=this.jc.getState(),r=n?(0,F.getPlayingPeriodId)(n):void 0;this.oc.removeCachedInitSegments((function(t){return e.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.isPrecedingPeriod(r,t.getPeriodId())}),!1,e.context.sourceContext.sourceIdentifier)})),((0,y.getMetricsHistory)(i,this.mimeType,S.MetricType.CachedInitSegments)||[]).filter((function(t){var i=t.value.internalRepId.periodId;return e.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.isPrecedingPeriod(r,i)}),!1,e.context.sourceContext.sourceIdentifier)})).forEach((function(t){return e.context.store.dispatch((0,v.removeMetricsValue)(e.mimeType,S.MetricType.CachedInitSegments,t))}))}},e.prototype.canLoad=function(){var e;return Boolean(null===(e=this.oc)||void 0===e?void 0:e.canLoad())},e.prototype.isTransmuxerRequired=function(){return this.gc.isTransmuxingRequired},e.prototype.setTransmuxer=function(e){this.gc.transmuxer=e},e.prototype.getTransmuxer=function(){return this.gc.transmuxer},e.prototype.resetTransmuxer=function(){this.gc.transmuxer&&this.gc.transmuxer.reset()},e.prototype.Se=function(){return this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.isHlsManifest()}),!1,this.context.sourceContext.sourceIdentifier)},e.prototype.Te=function(){return this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.isSmoothManifest()}),!1,this.context.sourceContext.sourceIdentifier)},e.prototype.Ue=function(){return this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(e){return e.isLive()}),!1,this.context.sourceContext.sourceIdentifier)},e.prototype.Ve=function(e){return this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(t){return t.findPeriod(e)}),null,this.context.sourceContext.sourceIdentifier)},e.prototype.We=function(e){return this.context.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(t){return t.getAdaptationSet(e)}),null,this.context.sourceContext.sourceIdentifier)},e.prototype.dispose=function(){var e,t;(0,l.dispose)(this.Mc),(0,l.dispose)(this.Uc),(0,l.dispose)(this.Tc),null===(e=this.hc)||void 0===e||e.release(this.mimeType),this.fc&&this.fc.dispose(),(0,M.isContextAvailable)(this.context)&&(null===(t=this.context.serviceManager.get(d.ServiceName.SegmentService))||void 0===t||t.disposeOfType(this.mimeType,this.dc)),this.kc.forEach((function(e){return e()}))},e}();function ie(e,t){var i=(0,J.getSegmentInfoTimeRange)(e),n=(0,V.getTrackIdentifier)(e);i&&(null==t||t.dispatch((0,U.removeStreamTimeRange)(n,i,V.StreamTimeRangeType.Loading)))}function ne(e,t,i,n,r){var o=e.serviceManager.get(d.ServiceName.AdaptationService),a=e.serviceManager.get(d.ServiceName.ManifestService,e.sourceContext.sourceIdentifier),s=function(i,r){var s=Boolean(null==o?void 0:o.shouldDownloadBeCancelled(t,i,r));return(null==a?void 0:a.isHlsManifest())&&n.possiblyDependentSegments&&s?(e.logger.debug("Download should be cancelled, but this is disabled for segments not starting with key frames"),!1):s};return e.serviceManager.maybeCall(d.ServiceName.SegmentService,(function(e){return e.add({mimeType:t,shouldDownloadBeCancelledCallback:s},i,r)}))}function re(e){var t=e.split("/")[1].toLowerCase();return Object.values(O.ContainerFormat).find((function(e){return e===t}))}function oe(e,t){if(e&&(0,M.isContextAvailable)(t))return t.serviceManager.maybeCall(d.ServiceName.ManifestService,(function(t){return t.getRepresentationById(e)}),void 0,t.sourceContext.sourceIdentifier)}t.SegmentController=te},14808:function(e,t,i){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getStreamTimeline=t.StreamTimelineReducer=void 0;var a=i(4524),s=i(3793),u=i(99529),c=i(80965),d={};t.StreamTimelineReducer=(0,s.default)(d,((n={})[c.StreamTimelineActionType.StreamTimeRangeAdd]=function(e,t){return function(e,t,i){var n,a=e[t]?o([],e[t],!0):[];return r(r({},e),((n={})[t]=(0,u.addStreamTimeRangeToTimeline)(a,i),n))}(e,t.payload.mimeType,t.payload.streamTimeRange)},n[c.StreamTimelineActionType.StreamTimeRangeRemove]=function(e,t){return function(e,t,i,n){var s;if(!e[t])return e;var c=o([],e[t],!0);if(n){var d=r(r({},i),{type:n});c=(0,u.removeStreamTimeRangeFromTimeline)(c,d)}else c=a.BufferRangeHelper.excludeTimeRange(c,i);return r(r({},e),((s={})[t]=c,s))}(e,t.payload.mimeType,t.payload.range,t.payload.type)},n[c.StreamTimelineActionType.StreamTimelineReset]=function(e,t){return function(e,t){var i;return t?r(r({},e),((i={})[t]=[],i)):d}(e,t.payload)},n)),t.getStreamTimeline=function(e){var t;return null!==(t=null==e?void 0:e.streamTimeline)&&void 0!==t?t:{}}},15761:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TimedMetadataService=void 0;var r=i(80813),o=i(56481),a=i(3714),s=i(59225),u=i(32485),c=i(91678),d=i(46151),l=i(33436),h=i(85434),p=i(79505),f=i(61800),g=i(86163),m=function(){function e(e){var t,i=this;this.context=e,this.FD=function(e){if(e.hasOwnProperty("metadata")){var t={metadataType:e.metadataType.toUpperCase(),metadata:e.metadata};(e.start||0===e.start)&&(t.start=e.start),e.end&&(t.end=e.end),i.context.eventHandler.dispatchEvent(a.PlayerEvent.Metadata,t)}},this.HD=function(e){e&&e.hasOwnProperty("metadataType")&&i.context.eventHandler.dispatchEvent(a.PlayerEvent.Metadata,{metadataType:e.metadataType,metadata:e.metadata})},this.ID=function(e){var t=e.metadata.event;return!(void 0!==t.periodId&&!i.tC.isPeriodExpected(t.periodId))&&!(void 0!==t.discontinuitySequenceNumber&&!i.sC.isDiscontinuityExpected(t.discontinuitySequenceNumber))&&(i.pC[t.mimeType]=t,i.oC[t.mimeType]=p.RepresentationId.from(e.metadata.representationId),i.sC.maybeFirePeriodSwitchEvents(t),i.tC.maybeHandlePeriodSwitch(t),i.nC[t.mimeType]&&i.nC[t.mimeType].id===t.representationId||i.JD(t),void i.context.eventHandler.dispatchEvent(a.PlayerEvent.SegmentPlayback,t))},this.nC={},this.oC={},this.pC={},this.rC=this.context.serviceManager.get(r.ServiceName.ManifestService,e.sourceContext.sourceIdentifier);var n=((t={})[u.TimedMetadataType.InBand]=this.HD,t[u.TimedMetadataType.SegmentPlayback]=this.ID,t[u.TimedMetadataType.Manifest]=this.FD,t[u.TimedMetadataType.EventStream]=this.FD,t[u.TimedMetadataType.DateRange]=this.FD,t[u.TimedMetadataType.CustomTag]=this.FD,t);this.qC=new s.MetadataService(e,n),this.sC=new f.DiscontinuityMonitor(e),this.tC=new g.PeriodSwitchMonitor(e)}return e.prototype.clearSegmentBoundMetadata=function(e){this.qC.removeMatchingCues(u.TimedMetadataType.SegmentPlayback,(function(t){return t.content.metadata.mimeType===e}))},e.prototype.onSegmentAvailable=function(e){var t,i=this,n=e.segment,r=e.extractedMetadata,o=e.isSegmentOfMainStream,s=e.presentationTimeOffset;if(o){t=function(e){var t=v(e),i=e.getSegmentInfo();return i.dateTime&&(t.dateTime=i.dateTime),i.representationId&&(t.representationId=i.representationId),t}(n);var u=n.getSegmentInfo();u.metadata&&u.metadata.forEach((function(e){i.PD(e,t,n.getPeriodId())})),function(e){return e.metadata&&e.metadata.length>0&&e.metadata[0].type===a.MetadataType.CUSTOM}(u)&&this.ND(u),this.LD(r,s,n.getPeriodId())}else t=v(n);this.ED(n,t),n.getInbandEvents().forEach((function(e){i.OD(e,n.getPeriodId())}))},e.prototype.ED=function(e,t){if(!e.isInit()){var i=e.getSegmentInfo(),n=e.getMimeType(),r={metadata:{event:t,representationId:{_periodId:i.internalRepresentationId.periodId,_adaptationSetId:i.internalRepresentationId.adaptationSetId,_representationId:i.internalRepresentationId.representationId},mimeType:n}};this.qC.addToTimeline(u.TimedMetadataType.SegmentPlayback,t.playbackTime,r),(0,d.getMetricsState)(this.context.store.getState())[n]||this.context.store.dispatch((0,c.initializeMetricsForMimeType)(n,this.context.settings)),this.context.store.dispatch((0,c.addMetricsValue)(n,l.MetricType.SegmentInformation,{bitrate:8*e.getNetworkRequestSize()/e.getDuration(),duration:e.getDuration(),playbackTime:i.startTime||e.getPlaybackTime(),representationId:e.getRepresentationId()}))}},e.prototype.parseEventStream=function(){var e=this;this.rC.getAllPeriods().forEach((function(t){e.rC.getEventStreamEvents(t).forEach((function(i){e.GD(i,t)}))}))},e.prototype.GD=function(e,t){var i={metadataType:a.MetadataType.EVENT_STREAM,metadata:e.data,start:e.startTime,end:e.endTime};this.qC.addToMetadataParsedService(e.startTime,n(n({},i),{data:e.data}),t._id),this.qC.addToTimeline(u.TimedMetadataType.EventStream,e.startTime,i)},e.prototype.getPlaybackRepresentation=function(e){var t=this.context.serviceManager.get(r.ServiceName.ManifestService,this.context.sourceContext.sourceIdentifier),i=null==t?void 0:t.getRepresentationById(this.oC[e]);if(i)return i=n({},i),this.pC[e]&&(i.uid=this.pC[e].uid),i},e.prototype.trackContentBoundary=function(e){var t=e.getPeriodId();this.tC.trackIncomingPeriod(t);var i=e.getSegmentInfo().discontinuitySequenceNumber;if(void 0!==i){var n=e.getSegmentInfo().startTime,r=e.getSegmentInfo().duration,o=e.getMimeType();this.sC.trackIncomingDiscontinuity(i,o,n,r)}},e.prototype.resetContentBoundaryTracking=function(){this.tC.reset(),this.sC.reset()},e.prototype.JD=function(e){var t,i;h.MimeTypeHelper.isAudio(e.mimeType)?(t=a.PlayerEvent.AudioPlaybackQualityChanged,i={id:e.representationId,bitrate:parseFloat(e.mediaInfo.bitrate)}):h.MimeTypeHelper.isVideo(e.mimeType)&&(t=a.PlayerEvent.VideoPlaybackQualityChanged,i={id:e.representationId,bitrate:parseFloat(e.mediaInfo.bitrate),width:parseFloat(e.mediaInfo.width),height:parseFloat(e.mediaInfo.height)}),t&&this.context.eventHandler.dispatchEvent(t,{targetQuality:i,sourceQuality:this.nC[e.mimeType]||null}),this.nC[e.mimeType]=i},e.prototype.processDateRangeEvent=function(e,t){var i={metadataType:a.MetadataType.DATERANGE,metadata:e.data,start:e.startTime,end:e.endTime};this.qC.addToMetadataParsedService(e.startTime,n(n({},i),{data:e.data}),t),this.qC.addToTimeline(u.TimedMetadataType.DateRange,e.startTime,i)},e.prototype.KD=function(e,t){var i=this;e.forEach((function(e){if(e._metadata&&e._metadata.length>0&&e._playbackTime){var n={metadataType:a.MetadataType.CUSTOM,metadata:e._metadata,data:e._metadata,start:e._playbackTime,end:e._playbackTime+e._duration};i.qC.addToMetadataParsedService(e._playbackTime,n,t)}}))},e.prototype.LD=function(e,t,i){var n=this;e&&Array.isArray(e.id3)&&e.id3.length>0&&e.id3.forEach((function(e){n.MD(e,t,i)}))},e.prototype.MD=function(e,t,i){var r=e.presentationTime-t,o={metadataType:a.MetadataType.ID3,metadata:e.data,start:r};this.qC.addToMetadataParsedService(r,n(n({},o),{data:e.data}),i),this.qC.addToTimeline(u.TimedMetadataType.InBand,r,o)},e.prototype.ND=function(e){var t=this,i=this.rC.getRepresentationById(e.internalRepresentationId);i.SegmentList[0].SegmentURL.forEach((function(n,r){n._media===e.url&&(n._playbackTime||function(e,t,i){for(var n=t,r=i;n>=0;)e[n]._playbackTime=r,r-=e[n]._duration,n--;for(n=t+1,r=i+e[t]._duration;n<e.length;)e[n]._playbackTime=r,r+=e[n]._duration,n++}(i.SegmentList[0].SegmentURL,r,e.startTime),t.qC.addToTimeline(u.TimedMetadataType.CustomTag,e.startTime,{metadataType:a.MetadataType.CUSTOM,metadata:n._metadata,start:e.startTime,end:e.startTime+e.duration}))})),this.KD(i.SegmentList[0].SegmentURL,e.periodId)},e.prototype.OD=function(e,t){var i=e.presentationTime,r={metadataType:a.MetadataType.EMSG,metadata:e,start:i};this.qC.addToMetadataParsedService(i,n(n({},r),{data:e}),t),this.qC.addToTimeline(u.TimedMetadataType.InBand,i,r)},e.prototype.PD=function(e,t,i){var r=e.type;if(r===a.MetadataType.CUSTOM)t.EXPERIMENTAL=t.EXPERIMENTAL||{},t.EXPERIMENTAL.hlsAttributes=t.EXPERIMENTAL.hlsAttributes||[],t.EXPERIMENTAL.hlsAttributes=t.EXPERIMENTAL.hlsAttributes.concat(e.attributes);else{var o={metadataType:/^CUE-(IN|OUT(-CONT)?)$/.test(r)?a.MetadataType.CUETAG:a.MetadataType[e.type],metadata:e,start:t.playbackTime};this.qC.addToMetadataParsedService(o.start,n(n({},o),{data:e}),i),this.qC.addToTimeline(u.TimedMetadataType.Manifest,o.start,o)}},e.prototype.dispose=function(){this.qC=(0,o.dispose)(this.qC),this.rC=null,this.sC=(0,o.dispose)(this.sC),this.tC.dispose()},e}();function v(e){var t=e.getSegmentInfo();return{uid:btoa(e.getUrl()),url:e.getUrl(),mimeType:e.getMimeType(),playbackTime:e.getPlaybackTime(),presentationTimestamp:e.getBaseMediaDecodeTime()/e.getTimescale(),duration:e.getDuration(),mediaInfo:e.getMediaInfo(),wallClockTime:t.wallClockTime,discontinuitySequenceNumber:t.discontinuitySequenceNumber,periodId:void 0===t.discontinuitySequenceNumber?t.periodId:void 0}}t.TimedMetadataService=m},16197:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.PeriodId=void 0;var i=function(){function e(e){this.uH=e}return Object.defineProperty(e.prototype,"periodId",{get:function(){return this.uH},enumerable:!1,configurable:!0}),e.prototype.equals=function(e){return null!=e&&this.periodId===e.periodId},e.prototype.key=function(){return this.periodId},e}();t.PeriodId=i},16870:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SynchronizedTimeService=void 0;var n=i(89927),r=i(55938),o=i(58747),a=i(58486),s=function(){function e(e,t){this.rG=e,this.sG=t,this.tG=0;var i=new a.HttpHeadTimeProvider(this.rG,new o.ISO8601TimeDecoder),n=new a.HttpGetTimeProvider(this.rG,new o.XSDateTimeDecoder),r=new a.HttpGetTimeProvider(this.rG,new o.ISO8601TimeDecoder),s=new a.StringTimeProvider(new o.XSDateTimeDecoder);this.uG={"urn:mpeg:dash:utc:http-head:2012":i,"urn:mpeg:dash:utc:http-head:2014":i,"urn:mpeg:dash:utc:http-xsdate:2012":n,"urn:mpeg:dash:utc:http-xsdate:2014":n,"urn:mpeg:dash:utc:http-iso:2012":r,"urn:mpeg:dash:utc:http-iso:2014":r,"urn:mpeg:dash:utc:direct:2012":s,"urn:mpeg:dash:utc:direct:2014":s},this.xG()}return e.prototype.xG=function(){var e=(0,r.getUtcTimingSources)(this.rG.config,this.sG.source);e.length>0&&this.synchronizeWithServer(e)},e.prototype.getTimeDifference=function(){return this.tG},e.prototype.yG=function(e){var t=this,i=e.shift();if(!i)return Promise.reject(new Error("No time source left to try"));if(!this.uG[i.schemeIdUri])return this.rG.logger.debug("UTCTiming scheme ".concat(i.schemeIdUri," is not supported.")),this.yG(e);this.vG=this.uG[i.schemeIdUri];var n=Date.now();return this.vG.requestTime(i.value).then((function(e){return e+(Date.now()-n)/2})).catch((function(){return t.rG.logger.debug("UTCTiming scheme ".concat(i.schemeIdUri," resulted in an error")),t.yG(e)}))},e.prototype.synchronizeWithServer=function(e,t){var i=this;return void 0===t&&(t=0),this.wG||(this.wG=this.yG(e).then((function(e){i.vG=void 0,i.tG=e+(0,n.toMilliSeconds)(t)-Date.now(),i.rG.logger.debug("Synchronized client time with time server - drift: ".concat((0,n.toSeconds)(i.tG),"s"))})).catch((function(){i.rG.logger.debug("Synchronizing client time with time server unsuccessful")}))),this.wG},e.prototype.getSynchronizationPromise=function(){return this.wG},e.prototype.reset=function(){this.tG=0,this.wG=void 0,this.vG&&(this.vG.cancelRequest(),this.vG=void 0)},e.prototype.dispose=function(){this.reset()},e}();t.SynchronizedTimeService=s},17382:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.calculateDownloadRates=function(e){return e.map((function(e){return(0,n.bytesToBits)(e.bytes)/e.downloadDuration})).filter((function(e){return e<1/0}))},t.filterValuesExceedingAverageByMargin=function(e){var t=1.1*r(e);return e.filter((function(e){return e<=t}))},t.calcAverage=r,t.bpsToMbps=function(e){return e/1024/1024};var n=i(33004);function r(e){return e.reduce((function(e,t){return e+t}),0)/e.length}},19627:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentUnavailabilityHandler=void 0;var n=i(3714),r=i(58313),o=function(){function e(e){this.EH={},this.FH=!1,this.DH=e}return e.prototype.downloadSuccess=function(e){this.FH&&e?this.FH=!1:this.EH={}},e.prototype.GH=function(e,t){for(var i=[],n=0;n<e.length&&!e[n]._internalId.equals(t);n++)this.EH[e[n]._id]||i.push(e[n]);return i.length>0?i[i.length-1]._internalId:null},e.prototype.switchQuality=function(e,t){this.EH[t.representationId]=!0;var i=this.GH(e,t);return i?(this.FH=!0,i):(this.DH.logger.log("no quality left, all tried"),null)},e.prototype.switchBaseURL=function(e){var t=e.availableBaseURLs,i=e.lastUsedBaseURLIndex+1;if((i%=t.length)===e.firstUsedBaseURLIndex)return this.DH.logger.log("no base url left, all tried"),null;var o=e.baseURL;return e.lastUsedBaseURLIndex=i,e.baseURL=t[i],e.url=r.URLHelper.concatBaseUrlWithPartial(e.baseURL,e.mediaURL),this.DH.eventHandler.dispatchEvent(n.PlayerEvent.ContentLocationChanged,{sourceLocationId:null!=o?o:"",targetLocationId:e.baseURL,reason:n.ContentLocationChangedReason.Failover}),e},e.prototype.shouldTryAlternatives=function(e){return e>=400&&e<=599||0===e},e}();t.SegmentUnavailabilityHandler=o},20477:function(e,t,i){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionKeyReducer=void 0;var a=i(3793),s=i(92096);t.EncryptionKeyReducer=(0,a.default)([],((n={})[s.EncryptionKeyActionKey.AddEncryptionKey]=function(e,t){var i=t.payload;return o(o([],e,!0),[r({},i)],!1)},n[s.EncryptionKeyActionKey.UpdateEncryptionKey]=function(e,t){var i=t.payload,n=e.findIndex((function(e){return e.uri===i.uri}));if(-1===n)return e;var a=e[n],s=o([],e,!0);return s.splice(n,1,r(r({},a),i)),s},n[s.EncryptionKeyActionKey.RemoveEncryptionKey]=function(e,t){var i=t.payload;return o([],e,!0).filter((function(e){return e.uri!==i.keyUri}))},n))},22059:function(e,t,i){var n=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestUpdater=void 0;var r=i(14302),o=i(23940),a=function(e){function t(t,i,n,r,o){var a=e.call(this,t,o)||this;return a.context=t,a.manifestLoader=i,a.manifest=n,a.settings=r,a}return n(t,e),t.prototype.getUpdatedManifest=function(){return this.getPayload()},t.prototype.update=function(){var e=this;return this.manifestLoader.load(this.manifest._currentLoadingUrl).then((function(t){return e.manifest=t,t}))},t.prototype.getReloadIntervalInSeconds=function(){var e=(0,o.getMinimumUpdatePeriodInSeconds)(this.manifest);return isNaN(e)?this.settings.minAllowedUpdatePeriod:Math.min(this.settings.maxAllowedUpdatePeriod,Math.max(this.settings.minAllowedUpdatePeriod,e))},t.prototype.getLastReloadTimestamp=function(){return this.manifest._requestTimestamp},t}(r.AbstractUpdater);t.ManifestUpdater=a},23133:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.addEncryptionKeyToStore=function(e,t,i){return i.dispatch((0,o.addEncryptionKey)({uri:e,key:void 0,loadState:s.KeyLoadState.Loading})),t.load(e).then((function(t){return null==i||i.dispatch((0,o.updateEncryptionKey)({uri:e,key:r.FormatHelper.bytesToHex(t),loadState:s.KeyLoadState.Loaded})),function(e){var t=(0,a.getAllEncryptionKeys)(e.getState());t&&t.length>u&&e.dispatch((0,o.removeEncryptionKey)(t[0].uri))}(i),t})).catch((function(t){return null==i||i.dispatch((0,o.updateEncryptionKey)({uri:e,key:void 0,loadState:s.KeyLoadState.Cancel})),Promise.reject(t)}))},t.waitForKeyToBeLoaded=function(e,t){return new Promise((function(i,o){var u=(0,n.subscribe)(e)((function(e){return(0,a.getEncryptionKey)(e,t)}),(function(e){return e.loadState===s.KeyLoadState.Cancel?(u(),o(new Error("Encryption key load cancelled!"))):e.loadState===s.KeyLoadState.Loaded&&e.key?(u(),i(r.FormatHelper.hexToBytes(e.key).buffer)):void 0}))}))};var n=i(93204),r=i(70233),o=i(51386),a=i(66628),s=i(92096),u=20},23901:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.createManifestLoadingService=function(e,t,i){switch(e.type){case o.StreamType.Dash:return new(0,a.ModuleManager.get(s.ModuleName.DASH).MPDLoader)(t,i);case o.StreamType.Hls:return new(0,a.ModuleManager.get(s.ModuleName.HLS).M3u8Loader)(t,i);case o.StreamType.Smooth:return new(0,a.ModuleManager.get(s.ModuleName.Smooth).SmoothStreamingLoader)(t,i);default:throw new r.PlayerError(n.ErrorCode.SOURCE_INVALID,{given:e.type,supported:"dash, hls, smooth"},"The provided stream type is not supported by the player.")}};var n=i(40306),r=i(3336),o=i(44468),a=i(88052),s=i(62756)},23940:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MPDExtractor=void 0,t.stripUnderscorePrefix=v,t.applyProperties=y,t.representationToQuality=S,t.getMinimumUpdatePeriodInSeconds=function(e){return null==(null==e?void 0:e._minimumUpdatePeriod)?1/0:s.DurationConverter.getDurationInSec(e._minimumUpdatePeriod)},t.getContentTypeFromMimeTypeAndCodecs=b;var n=i(80813),r=i(44468),o=i(77179),a=i(34047),s=i(52424),u=i(85434),c=i(89927),d=i(70850),l=i(88052),h=i(62756),p=i(59707),f=i(62198),g=i(92778),m=function(){function e(e,t){var i=this;this.isLive=function(){var e;return"dynamic"===(null===(e=i.MC())||void 0===e?void 0:e._type)},this.GC=e,this.HC=t,this.IC=e.settings,this.KC=!1,this.JC=e.serviceManager.get(n.ServiceName.SynchronizedTimeService,this.HC.sourceIdentifier),this.LC=e.serviceManager.get(n.ServiceName.SourceStoreService,this.HC.sourceIdentifier)}return e.prototype.MC=function(){var e;return(0,f.getManifest)(null===(e=this.LC)||void 0===e?void 0:e.getState())},e.prototype.NC=function(){var e,t;return null!==(t=null===(e=this.MC())||void 0===e?void 0:e.Period)&&void 0!==t?t:[]},e.prototype.OC=function(e){var t=this.NC().find((function(t){return t._id===e}));return t?t.AdaptationSet:[]},e.prototype.adjustPeriodStartTimes=function(){var e,t,i,n=null===(e=this.LC)||void 0===e?void 0:e.getState();if(n&&!this.KC&&!(null===(t=this.MC())||void 0===t?void 0:t._isHls)){var r=this.isLive()?(0,c.toSeconds)(this.getAvailabilityStartTime()):(0,o.getStartTimeOffset)(n);null===(i=this.LC)||void 0===i||i.dispatch((0,p.adjustPeriodStartTimes)(r)),this.KC=!0}},e.prototype.getAvailabilityStartTime=function(){var e;return this.isLive()&&(null===(e=this.MC())||void 0===e?void 0:e._availabilityStartTime)?d.Util.getUtcDate(this.MC()._availabilityStartTime).getTime()-this.PC():0},e.prototype.getAvailabilityEndTime=function(){var e;if(null===(e=this.MC())||void 0===e?void 0:e.hasOwnProperty("_availabilityEndTime")){var t=d.Util.getUtcDate(this.MC()._availabilityEndTime).getTime();return new Date(t-this.PC())}return null},e.prototype.PC=function(){return this.JC?this.JC.getTimeDifference():0},e.prototype.getType=function(){var e;return null===(e=this.MC())||void 0===e?void 0:e._type},e.prototype.getDuration=function(){var e;return null===(e=this.MC())||void 0===e?void 0:e._mediaPresentationDuration},e.prototype.getRequestTimestamp=function(){var e;return null===(e=this.MC())||void 0===e?void 0:e._requestTimestamp},e.isValueWithinBounds=function(e,t,i){return!e||e>=t&&e<=i},e.prototype.QC=function(t){var i=e.isValueWithinBounds(t.width,this.GC.config.adaptation.resolution.minSelectableVideoWidth,this.GC.config.adaptation.resolution.maxSelectableVideoWidth),n=e.isValueWithinBounds(t.height,this.GC.config.adaptation.resolution.minSelectableVideoHeight,this.GC.config.adaptation.resolution.maxSelectableVideoHeight),r=e.isValueWithinBounds(t.bitrate,this.IC.MIN_SELECTABLE_VIDEO_BITRATE,this.IC.MAX_SELECTABLE_VIDEO_BITRATE);return i&&n&&r},e.prototype.RC=function(t){return e.isValueWithinBounds(t.bitrate,this.IC.MIN_SELECTABLE_AUDIO_BITRATE,this.IC.MAX_SELECTABLE_AUDIO_BITRATE)},e.prototype.SC=function(e,t){var i=this;if(!e)return[];var n=t.filter((function(t){return u.MimeTypeHelper.isVideo(e)&&i.QC(t)||u.MimeTypeHelper.isAudio(e)&&i.RC(t)}));return n.length<1&&t.length>0?t:n},e.prototype.TC=function(e){if(!e)return[];var t=e.Representation.map((function(t){return S(t,e._mimeType,e._codecs)}));return this.IC.EXCLUDE_DISALLOWED_REPRESENTATIONS&&(t=this.SC(e._mimeType,t)),t},e.prototype.getAudioQualities=function(e){var t=this,i=this.UC(e);return this.OC(i).reduce((function(e,i){return i._mimeType&&u.MimeTypeHelper.isAudio(i._mimeType)&&(e[i._internalId.adaptationSetId]=t.TC(i)),e}),{})},e.prototype.getVideoQualities=function(e){var t=this.UC(e),i=this.OC(t).find((function(e){return e._mimeType&&u.MimeTypeHelper.isVideo(e._mimeType)}));return i?this.TC(i):[]},e.prototype.getLangObjectFromAdaptationSet=function(e,t,i){var n={id:null,lang:null,adaptationSetId:null,kind:null,label:"off",url:null},r=e._mimeType&&e._mimeType.indexOf(t)>-1,o=i&&e._mimeType.indexOf(i)>-1;return u.MimeTypeHelper.isSubtitle(t)&&(n.kind="subtitle"),e.Role&&e.Role.length>0&&(n.role=e.Role.map((function(e){return y(e,{})}))),(r||o)&&(y(e,n,["_lang","_isFragmented"]),n.lang=n.lang||"und",n.label=e._label||n.lang,n.adaptationSetId=e._internalId,n.id=e._internalId.adaptationSetId),n},e.prototype.toSubtitleTrack=function(e,t,i){var n,r=this.getLangObjectFromAdaptationSet(e,t,i),o={id:r.id,lang:r.lang,kind:r.kind,isFragmented:null!==(n=r.isFragmented)&&void 0!==n&&n,isSideloaded:!1,enabled:!1,label:r.label};return null!=r.role&&(o.role=r.role),o.forced=function(e,t){var i,n;return Boolean(null===(i=e.role)||void 0===i?void 0:i.some((function(e){return e.value&&["forced_subtitle","forced-subtitle"].includes(e.value)})))||Boolean(null===(n=null==t?void 0:t._hls)||void 0===n?void 0:n.isForced)}(o,e.Representation[0]),o},e.prototype.getAvailableSubtitles=function(e){var t=this,i=0;return e=this.UC(e),this.OC(e).filter((function(e){return u.MimeTypeHelper.isSubtitle(e._mimeType)})).map((function(e){var n=t.toSubtitleTrack(e,"application","text");return n.id||(i++,n.id="sub_".concat(i)),n}))},e.prototype.getClosedCaptionLabels=function(e){return e=this.UC(e),this.OC(e).filter((function(e){return e.ClosedCaptionLabels})).flatMap((function(e){return Object.keys(e.ClosedCaptionLabels).map((function(t){var i=e.ClosedCaptionLabels[t];return{id:t,kind:"captions",lang:i.lang||"unknown",label:i.label||"Captions (".concat(t,")")}}))}))},e.prototype.getAvailableAudio=function(e,t){var i=this;void 0===t&&(t=!0);var n=this.UC(e),o=this.OC(n),a=0,s=o.filter((function(e){return u.MimeTypeHelper.isAudio(e._mimeType)})).map((function(e){var t=i.getLangObjectFromAdaptationSet(e,r.MediaType.Audio);return t&&"off"!==t.label?(t.id||(t.id="audio_"+a,a++),t):null}));if(t){var c=o.find((function(e){return u.MimeTypeHelper.isVideo(e._mimeType)}));if(c&&c.ContentComponent){var d=c.ContentComponent.filter((function(e){return e._contentType===r.MediaType.Audio})).map((function(e){return{id:e._id,lang:e._lang,label:e._id,adaptationSetId:c._internalId}}));s=s.concat(d)}}return s.filter((function(e){return e}))},e.prototype.getAvailableVideo=function(e){var t=this.UC(e),i=this.OC(t).find((function(e){return u.MimeTypeHelper.isVideo(e._mimeType)}));return i?[this.getLangObjectFromAdaptationSet(i,r.MediaType.Video)]:[]},e.getContentProtectionForManifestElement=function(e){var t;return(null===(t=null==e?void 0:e.ContentProtection)||void 0===t?void 0:t.length)&&l.ModuleManager.has(h.ModuleName.DRM)?l.ModuleManager.get(h.ModuleName.DRM).ContentProtectionHelper.parseContentProtectionDescriptors(e.ContentProtection):[]},e.getContentProtectionForAdaptationSet=function(t){for(var i=[],n=0;n<t.Representation.length;n++)i=i.concat(e.getContentProtectionForManifestElement(t.Representation[n]));return i.concat(e.getContentProtectionForManifestElement(t))},e.prototype.getTimeShiftBufferDepthSeconds=function(){if(this.isLive()){var e=this.MC()._timeShiftBufferDepth,t=(0,c.toSeconds)(Date.now()-this.getAvailabilityStartTime());return e===Number.NEGATIVE_INFINITY?-t:Math.max(e,-t)}return 0},e.getCurrentAndSuccessorPeriod=function(e,t){for(var i=[null,0,null],n=i[0],r=i[1],o=i[2];r<e.length;r++)if(e[r]._id===t){n=e[r],o=e[r+1]||null;break}return[n,o]},e.prototype.getPeriodDuration=function(t,i){var n;i=null!=i?i:this.NC();var r=e.getCurrentAndSuccessorPeriod(i,t),o=r[0],a=r[1];if(o&&o._duration)return s.DurationConverter.getDurationInSec(o._duration);if(o&&o.start&&a&&a.start)return a.start-o.start;if(null===(n=this.MC())||void 0===n?void 0:n._mediaPresentationDuration){var u=s.DurationConverter.getDurationInSec(this.MC()._mediaPresentationDuration);if(!isNaN(u))return u}return Number.POSITIVE_INFINITY},e.prototype.getDRMCapabilitiesForPeriod=function(e){e=this.UC(e);var t=this.NC().find((function(t){return t._id===e}));return this.getDRMCapabilitiesFromPeriod(t)},e.prototype.getDRMCapabilitiesFromPeriod=function(t){for(var i=[],n=[],r=0,o=t.AdaptationSet;r<o.length;r++){var a=o[r],s=a._mimeType,c=e.getMimeTypeCodecStringForAdaptationSet(a);u.MimeTypeHelper.isVideo(s)?M(n,c):u.MimeTypeHelper.isAudio(s)&&M(i,c)}return[i,n]},e.prototype.dispose=function(){this.IC=null},e.getMimeTypeCodecStringForAdaptationSet=function(t){for(var i=[],n=0,r=t.Representation;n<r.length;n++){var o=r[n],a=e.getAttributeFromRepresentationOrAdaptationSet("_codecs",o,t),s=t._mimeType;if(t._mimeType&&a){var u=b(s,a);i.push({contentType:u})}}return i},e.getAttributeFromRepresentationOrAdaptationSet=function(e,t,i){return t.hasOwnProperty(e)&&t[e]?t[e]:i.hasOwnProperty(e)&&i[e]?i[e]:null},e.prototype.UC=function(e){var t=this.NC();if(t.find((function(t){return t._id===e})))return e;var i=t[t.length-1]._id;return this.GC.logger.debug("Period "+e+" not available - return last period ("+i+")"),i},e.prototype.getEventStreamEvents=function(e){var t=this;return e&&e.EventStream?e.EventStream.filter((function(e){return e.Event})).flatMap((function(i){var n,r=Number(null!==(n=i._timescale)&&void 0!==n?n:1);return t.VC(e.start,i,r)})):[]},e.prototype.VC=function(e,t,i){var n=this;return t.Event.map((function(r){var o={},a=r._presentationTime||0;if(o.startTime=a/i+e,r._duration){var s=r._duration/i;o.endTime=o.startTime+s}else o.endTime=o.startTime;return o.data=n.WC(r,t._schemeIdUri),o}))},e.prototype.WC=function(e,t){var i=/<event[^>]*>(.*)(<\/event>|\/>)/g.exec(e.rawXmlRepresentation),n=void 0;i&&i.length>1&&(n=i[1]);var r={};return Object.getOwnPropertyNames(e).filter((function(e){return!["_presentationTime","_duration","__text"].some((function(t){return t===e}))&&0===e.lastIndexOf("_",0)})).forEach((function(t){r[t.substring(1,t.length)]=e[t]})),{properties:r,content:n,schemeIdUri:t}},e}();function v(e){return 0===e.indexOf("_")?e.substring(1):e}function y(e,t,i){return void 0===i&&(i=[]),Object.keys(e).filter((function(e){return 0===i.length||i.indexOf(e)>-1})).forEach((function(i){t[v(i)]=e[i]})),t}function S(e,t,i){if(!e)return null;var n={id:e._id?String(e._id):null,bitrate:e._bandwidth||0},r=a.CodecStringHelper.getExtractedCodecStrings(e._codecs||i);return function(e,t){return u.MimeTypeHelper.isAudio(t)}(0,t)?function(e,t,i){var n,r;i.audio&&(e.codec=i.audio);var o=null===(r=null===(n=t.AudioChannelConfiguration)||void 0===n?void 0:n.find((function(e){var t=e._schemeIdUri,i=e._value;return t===g.DashSchemeUri.AudioChannelConfig&&void 0!==i})))||void 0===r?void 0:r._value;return o&&(e.channels=parseInt(o)),e.label=t._label||T(e.bitrate),e}(n,e,r):function(e,t){return u.MimeTypeHelper.isVideo(t)}(0,t)?function(e,t,i){e.width=t._width||0,e.height=t._height||0,i.video&&(e.codec=i.video),t.hasOwnProperty("_frameRate")&&(e.frameRate=t._frameRate);var n=T(e.bitrate);return e.width&&e.height&&(n="".concat(e.width,"x").concat(e.height,", ").concat(n)),e.label=t._label||n,e}(n,e,r):(n.label=e._label||T(n.bitrate),n)}function T(e){return"".concat(Math.round(e/1e3),"kbps")}function b(e,t){return"".concat(e,'; codecs="').concat(t,'"')}function M(e,t){for(var i=function(t){-1===e.findIndex((function(e){return e.contentType===t.contentType}))&&e.push(t)},n=0,r=t;n<r.length;n++)i(r[n])}t.MPDExtractor=m},24389:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamReadError=void 0,function(e){e.Aborted="aborted",e.ParallelRead="parallelread"}(i||(t.StreamReadError=i={}))},25248:function(e,t,i){var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentInfoService=void 0,t.getSegmentInfoId=function(e){return e.url+(e.byteRange?","+JSON.stringify(e.byteRange):"")};var r=i(80813),o=i(94685),a=function(){function e(){this.Ye=[]}return e.prototype.updatePlayerContext=function(e){this.Xe=e},e.prototype.setSegmentControllers=function(e){this.Ye=e},e.prototype.getSegmentControllerMimeTypes=function(){return this.Ye.map((function(e){return e.getMimeType()}))},e.prototype.getSegmentInfos=function(e,t){if(!(0,o.isContextAvailable)(this.Xe))return Promise.resolve([]);var i=this.Xe.serviceManager.get(r.ServiceName.ManifestService,this.Xe.sourceContext.sourceIdentifier).getPeriodIdForTime(e),a=this.Ye.map((function(r){return function(e,t){return e.getCurrentPeriodId()!==t.targetPeriodId&&e.switchPeriod(t.targetPeriodId),e.seekTo(t.startTime),e.getCurrentAdaptationSet()?function(e,t){return s(e,t.duration).then((function(t){if(t.length>0){var i=e.getInitSegmentInfoForDataSegmentInfo(t[0]);if(i)return n([i],t,!0)}return t}))}(e,t):Promise.resolve([])}(r,{startTime:e,duration:t,targetPeriodId:i})}));return Promise.all(a).then((function(e){return e.flatMap((function(e){return e}))}))},e.prototype.dispose=function(){this.Ye=[]},e}();function s(e,t,i){void 0===i&&(i=[]);var n=i[i.length-1],r=n?n.startTime+n.duration:0;return t<=0||!e.hasNext(r)?Promise.resolve(i):e.getDataSegmentInfo(r).then((function(n){return n.duration&&(t-=n.duration),i.push(n),s(e,t,i)}))}t.SegmentInfoService=a},25902:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TimestampOffsetService=void 0;var n=i(80813),r=i(85434),o=i(66502),a=i(88052),s=i(62756),u=function(){function e(e,t){this.context=e,this.mimeType=t,this.ZI=new Map;var i=e.sourceContext.sourceIdentifier;this.aI=e.serviceManager.get(n.ServiceName.SourceStoreService,i)}return Object.defineProperty(e.prototype,"bI",{get:function(){return this.context.logger},enumerable:!1,configurable:!0}),e.prototype.maybeAdjustTimestampOffsetAtDiscontinuityChange=function(e,t){var i=e.getSegmentInfo().discontinuitySequenceNumber;if(null==i||e.isInit())return!1;var n=this.ZI.get(e.getMimeType())!==i,r=isNaN(t.getTimestampOffset());if(n||r)this.cI(e,i,t);else if(e.getSegmentInfo().wasPrefetched){var o=this.dI(e,i);this.eI(e,o)}return this.ZI.set(e.getMimeType(),i),!0},e.prototype.cI=function(e,t,i){var n=this.dI(e,t);this.fI(e,t,i),this.bI.debug("[".concat(this.mimeType,"] Initialized PTO for new discontinuity ").concat(t," to ").concat(n," on segment ").concat(e.getUrl())),i.setTimestampOffset(n),this.eI(e,n)},e.prototype.dI=function(e,t){var i,n,r=this.hI(e).encodedPlaybackTime,o=a.ModuleManager.get(s.ModuleName.HLS),u=null!==(i=null==o?void 0:o.selectors)&&void 0!==i?i:{},c=u.getHlsState,d=u.getPresentationTimeOffset,l=null==c?void 0:c(this.aI.getState());return l&&null!==(n=d(l,String(t)))&&void 0!==n?n:this.gI(e,r,t)},e.prototype.eI=function(e,t){var i=this.hI(e),n=i.encodedPlaybackTime,r=i.shouldUpdatePlaybackTime;e.getSegmentInfo().presentationTimeOffset=t,e.setPresentationTimeOffset(t),r&&e.setPlaybackTime(n-t)},e.prototype.fI=function(e,t,i){null==e.getSegmentInfo().startTime&&function(e){return"extrapolateStartTimesFromDiscontinuityStarts"in e}(i)&&(this.bI.debug("[".concat(e.getMimeType(),"] Missing segment startTime when trying to calculate PTO for discontinuity ").concat(t)),i.extrapolateStartTimesFromDiscontinuityStarts(e))},e.prototype.gI=function(e,t,i){var n=t-e.getSegmentInfo().startTime,u=a.ModuleManager.get(s.ModuleName.HLS);return r.MimeTypeHelper.isSubtitle(e.getMimeType())&&o.TextSegmentAnalyzer.isPlainTextPayload(e.getData())||(this.aI.dispatch(u.actions.setPresentationTimeOffset(String(i),n)),this.bI.debug("[".concat(e.getMimeType(),"] Setting PTO for discontinuity ").concat(i," to ").concat(n))),n},e.prototype.hI=function(e){var t,i=a.ModuleManager.get(s.ModuleName.ContainerMP4,!1),n=!0,r=i?i.parsePlaybackTime(e,this.bI):e.getBaseMediaDecodeTime()/e.getTimescale();return isNaN(r)&&(r=null!==(t=e.getPlaybackTime())&&void 0!==t?t:e.getSegmentInfo().startTime,n=!1),{encodedPlaybackTime:r,shouldUpdatePlaybackTime:n}},e.prototype.dispose=function(){this.ZI=null,this.aI=null},e}();t.TimestampOffsetService=u},33004:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.bytesToBits=function(e){return 8*e}},34795:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ContainerFormat=void 0,function(e){e.MP4="mp4",e.TS="ts",e.WEBM="webm"}(i||(t.ContainerFormat=i={}))},34810:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.throwPlaylistDownloadError=function(e,t,i,s){if(e.logger.debug(t),s instanceof r.PlayerError)e.eventHandler.fireError(s);else if(function(e){return!!e&&Object.keys(n.ErrorCode).includes(e)}(s)){var u=n.ErrorCode[s];e.eventHandler.fireError(new r.PlayerError(u,a(i),t))}else s!==o.RequestError.TimedOut?e.eventHandler.fireError(new r.PlayerError(n.ErrorCode.SOURCE_COULD_NOT_LOAD_MANIFEST,a(i),t)):e.eventHandler.fireError(new r.PlayerError(n.ErrorCode.NETWORK_MANIFEST_DOWNLOAD_TIMEOUT,a(i),"Failed to load the segment: the request timed out."))};var n=i(40306),r=i(3336),o=i(77401);function a(e){return{url:null==e?void 0:e.Uri,mimeType:null==e?void 0:e._mimeType,codecs:null==e?void 0:e._codecs,bitrate:null==e?void 0:e._bandwidth}}},35046:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferController=void 0;var r=i(4524),o=i(66790),a=i(40306),s=i(3336),u=i(25926),c=i(4224),d=i(80813),l=i(56481),h=i(3714),p=i(44468),f=i(33468),g=i(91678),m=i(46151),v=i(33436),y=i(87827),S=i(85648),T=i(68925),b=i(86897),M=i(93204),I=i(79721),P=i(34841),A=i(87244),R=i(85434),E=i(15487),C=i(89927),_=i(23068),B=i(70850),N=i(19274),O=i(88052),k=i(62756),L=i(95880),D=i(62198),x=i(42208),w=i(59604),H=i(13114),z=i(39523),W=i(14808),F=i(99529),U=i(90685),V=i(60632),j=i(94305),Y=i(51888),X=i(39494),q=i(77264),K=function(){function e(e,t,i,n){var r=this;this.QW=[],this.aW=!1,this.bW=!0,this.cW=!1,this.dW=!1,this.kW={},this.wX={},this.zX=!1,this.BX=0,this.GX=function(){r.YW=r.OW.getTotalDuration(),r.YW>(r.NW.getDuration()||0)&&r.JX()},this.JX=function(){r.cW||r.NW.setDuration(r.YW)},this.KX=function(e){r.IW.logger.debug("Renderer setup failed with",e)},this.cX=function(){Date.now()-r.gW>r.fW&&r.bX()&&r.UX(),r.checkIfEndOfBufferReached(r.KW.END_OF_BUFFER_TOLERANCE)},this.dX=function(){var e,t=r.KW.END_OF_BUFFER_RECOVERY_TOLERANCE,i=null===(e=r.PW)||void 0===e?void 0:e.getBufferBlock(r.WW);i&&r.jX()&&(t=r.PW.getSmallestMaxSegmentDuration(i)),r.checkIfEndOfBufferReached(t)},this.eX=function(){var e;if(!(0,A.isSwitchingBufferBlocks)(r.PX())){var t=null===(e=r.PW)||void 0===e?void 0:e.getNextBufferBlock(r.WW);if(t){var i=r.NW.getCurrentTime(!0);r.pX(i,t)}}},this.fX=function(){r.checkIfEndOfBufferReached(r.KW.END_OF_BUFFER_RECOVERY_TOLERANCE)},this.IW=e,this.JW=e.logger,this.KW=e.settings,this.LW=e.bufferSettings,this.MW=e.eventHandler,this.NW=e.renderer,this.OW=e.serviceManager.get(d.ServiceName.ManifestService,e.sourceContext.sourceIdentifier),this.PW=new X.SegmentStore(this.IW,this.KW),this.XW=t,this.lW=new j.BufferStallingService(this.ZY(),this.JW,this.IW.renderer),this.YW=i,this.WW=X.INITIAL_BUFFER_BLOCK_ID,this.jW=new Map,this.eW=!1,this.gW=0,this.fW=(0,C.toMilliSeconds)(this.IW.settings.MINIMAL_BACKWARD_BUFFER_CLEARING_INTERVAL),this.iW=new Map,this.yX=new Y.DeferredReject,this.RW=Promise.resolve(null),this.CX=new V.BufferRangesCache(this.IW,this.PW),this.FX(),this.NW.ready().then((function(){r.JX(),r.IX()&&r.OX(n)})).catch(this.KX),this.EX=(0,M.subscribe)(this.IW.store)((function(e){return e&&(0,y.getPlayerState)(e).seekState}),(function(){r.bX()&&r.UX()}),(function(e,t){return e===S.SeekState.Seeked&&t!==S.SeekState.Seeked}))}return e.prototype.FX=function(){var e=this,t=this.IW.store;void 0!==t&&(this.DX=(0,M.subscribe)(t)((function(e){return e&&(0,y.getIsStopped)((0,y.getPlayerState)(e))}),(function(){return e.dW=!0}),(function(e){return!0===e})))},Object.defineProperty(e.prototype,"HX",{get:function(){return this.lW.isRendererStalling()},enumerable:!1,configurable:!0}),e.prototype.IX=function(){var e,t;return Boolean(null===(t=(0,H.getDrmState)(null===(e=this.PX())||void 0===e?void 0:e.getState()))||void 0===t?void 0:t.immediateLicenseRequest)},e.prototype.LX=function(e,t){var i=this,n=Promise.resolve();return this.hW=new P.Deferred,this.bW||(n=this.NW.shutdown(!0)),this.kW={},this.hW.resolve(n.then((function(){return i.NW.ready()})).then((function(){var n;i.JX(),i.gY(),e.forEach((function(e){var t=e.mimeType;i.addMimeTypeAndCodec(t,e.codec)||(i.JW.debug("Could not create source buffer for ".concat(t)),i.IW.store.dispatch((0,g.removeMetricsForMimeType)(t))),i.MX(t)})),i.QW=e.filter((function(e){return R.MimeTypeHelper.isAV(e.mimeType)}));var r=null!==(n=t.getAllKnownPeriodIds()[0])&&void 0!==n?n:I.DEFAULT_PERIOD_ID;return i.OX(r),Promise.resolve(i.QW.length)}))),this.hW.promise.catch((function(e){return i.JW.warn(e)})).then((function(){i.hW=null})),this.hW.promise},e.prototype.MX=function(e){var t=this,i=this.PX();i&&(this.wX[e]=i.subscribe((function(){return t.VX(e)}),(0,b.hasBufferMaxSizeChanged)(e)))},e.prototype.NX=function(e){var t=this.wX[e];t&&(t(),delete this.wX[e])},e.prototype.OX=function(e){var t,i=this,r=(0,H.getDrmState)(null===(t=this.PX())||void 0===t?void 0:t.getState());if(void 0!==r&&Object.keys(r).length>0){var a=n(n({},this.IW.sourceContext.source),{drm:r}),s=this.OW.getDRMCapabilitiesForPeriod(e);Object.keys(f.KeySystemMap).some((function(e){return a.drm.hasOwnProperty(e)}))&&(this.RW=this.NW.setDrmConfig(r,s),this.RW.catch((function(e){(null==e?void 0:e.message)!==o.DrmSetupError.CANCELLED&&i.JW.debug("Could not initialize renderer with given DRM config: ".concat(null==e?void 0:e.message),e)})))}},e.prototype.PX=function(){var e;return null===(e=this.IW.serviceManager)||void 0===e?void 0:e.get(d.ServiceName.SourceStoreService,this.IW.sourceContext.sourceIdentifier)},e.prototype.QX=function(){var e=this;return this.AX?this.AX.catch((function(){return e.zX=!0,Promise.reject("Failed to clear buffer on timeshift, stopping segment cache processing")})).then((function(){return e.zX?(e.zX=!1,Promise.reject("Timeshift cancelled, stopping segment cache processing")):Promise.resolve()})):Promise.resolve()},e.prototype.addSegment=function(e){var t,i=this;if(!this.PW)return Promise.reject("Skipping segment processing, segment store is already disposed");this.JW.insane("adding segment to cache for period ".concat(e.getPeriodId()," with playback time ").concat(e.getPlaybackTime()," and mime type ").concat(e.getMimeType())),this.PW.addSegment(e);var n=this.dY(),r=this.PW.getBufferBlock(n);if(this.PW.getNextBufferBlock(n)&&this.ZX(r)&&(null===(t=this.PX())||void 0===t||t.dispatch((0,T.setLoadingRangeFinished)(!0))),this.fY(),function(e,t){var i=(0,F.getTrackIdentifier)(e.getSegmentInfo()),n=e.getPlaybackTimeRange();n&&(null==t||t.dispatch((0,z.removeStreamTimeRange)(i,n,F.StreamTimeRangeType.Loading))),null==t||t.dispatch((0,T.addLoadedRange)(i,(0,w.segmentToBufferBlockTimeRange)(e)))}(e,this.PX()),!this.areBufferBlockMediaTypesFinalForPeriod(e.getPeriodId()))return Promise.resolve();var o=Promise.resolve();if(this.SW){var a=this.SW.time,s=this.oX(a);if(!this.PW.canSwitchToBufferBlock(s))return Promise.resolve();o=this.QX().then((function(){return i.pX(a,s)}))}else if((0,A.isSwitchingBufferBlocks)(this.PX())||this.isBufferAvailable()||this.hW)this.hW&&(o=this.hW.promise);else{var u=this.PW.getBufferBlockForSegment(e),c=null==u?void 0:u.getMediaTypesWithoutSubs();if(!c||!u)return this.JW.debug("Chosen buffer block for segment unexpectedly had no mediaTypes"),Promise.resolve();o=this.LX(c,u)}return o.then((function(){return i.NW?i.NW.ready():Promise.reject("Stopping queue processing, renderer is not available")})).then((function(){return i.XX()}))},e.prototype.RX=function(e,t){var i=this;this.PW&&this.PW.getPrecedingSegments(e,t).forEach((function(e){var t;i.PW.removeSegment(e),null===(t=i.PX())||void 0===t||t.dispatch((0,T.removeLoadedRange)(e.getMimeType(),(0,w.segmentToBufferBlockTimeRange)(e)))}))},e.prototype.SX=function(e,t){var i=this;return this.RX(e,t),this.gW=Date.now(),this.NW.removeData(e,0,t).catch((function(t){return i.JW.debug("Error clearing ".concat(e," backward buffer:"),t)}))},e.prototype.TX=function(){if(this.PW){var e=this.PW.getBufferBlock(this.WW),t=e?this.PW.getSmallestMaxSegmentDuration(e):-1;this.fW=(0,C.toMilliSeconds)(Math.max(t/2,this.IW.settings.MINIMAL_BACKWARD_BUFFER_CLEARING_INTERVAL))}},e.prototype.UX=function(){var e,t,i=this;this.TX();var n=null===(e=this.PW)||void 0===e?void 0:e.getBufferBlock(this.WW),r=this.NW.getCurrentTime(),o=(0,b.getBufferStateMap)(null===(t=this.PX())||void 0===t?void 0:t.getState());o&&Object.keys(o).forEach((function(e){var t,a=null===(t=(0,b.getRendererBufferedRanges)(o,e)[0])||void 0===t?void 0:t.start,s=R.MimeTypeHelper.getMediaType(e);if(void 0!==a&&(null==n?void 0:n.hasMaxSegmentDuration(e))){var u=n.getMaxSegmentDuration(e)+1,c=i.LW.getBackwardTargetLevel(s),d=Math.max(u,c),l=r-d;a<l&&(i.JW.debug("Clearing backward buffer for ".concat(e," from ").concat(a," to ").concat(l)),i.SX(e,l).catch((function(e){i.IW.logger.debug("Could not clear backward buffer",e)})))}}))},e.prototype.setEndOfStream=function(e){var t;return e&&this.VW||!this.NW?(this.JW.debug("Skipping setting EOS"),Promise.resolve()):(e&&(null===(t=this.PX())||void 0===t||t.dispatch((0,T.setLoadingRangeFinished)(!0))),this.eW=e,this.NW.setEndOfStream(e))},e.prototype.VX=function(e){var t,i=(0,b.getBufferState)(null===(t=this.PX())||void 0===t?void 0:t.getState()),n=void 0!==i?(0,b.getBufferMaxSize)(i,e):b.DefaultBufferMaxSize;if(this.JW.debug("Exceeded quota for ".concat(e," with ").concat(n," seconds of data in the buffers")),!this.IW.settings.NO_QUOTA_EXCEEDED_ADJUSTMENT){var r=this.NW.getCurrentTime(),o=this.PW.getSmallestSafeBufferSize(r,e);this.LW.adjustMaxBufferLevels(o,e,n)}},e.prototype.WX=function(){var e,t=this.PW.getBufferBlock(this.WW),i=function(e){return e.reduce((function(e,t){var i=e.getPlaybackTime();return t.getPlaybackTime()<i?t:e}),e[0])}(this.PW.getAllSegmentsFromBufferBlock(t).toArray()),n=null!==(e=null==i?void 0:i.getPlaybackTime())&&void 0!==e?e:0;n<0&&(this.MW.dispatchEvent(h.PlayerEvent.Warning,new u.PlayerWarning(c.WarningCode.PLAYBACK_NEGATIVE_DECODING_TIMESTAMP_ENCOUNTERED)),this.JW.debug("Encountered negative DTS ".concat(n,", attempting to correct PTO...")),this.BX=n)},e.prototype.XX=function(){var e=this;return this.bW?this.NY()?(this.WX(),this.aX(1/0).then((function(){return e.PY()}))):Promise.resolve():this.aX(1/0)},e.prototype.getBufferedRangesMap=function(e){var t;void 0===e&&(e=!0);var i=(0,b.getBufferState)(null===(t=this.PX())||void 0===t?void 0:t.getState());return void 0!==i&&this.PW?e?this.CX.getRanges(i):(0,b.getRendererBufferRangesMap)(this.PW,i)(this.WW):{}},e.prototype.YX=function(e,t){var i=this;if(!this.PW)return Promise.resolve();var n=this.PW.getAllSegmentsFromBufferBlock(e),o=n.hasNext()&&n.next();return o?(this.PW.removeSegment(o),this.TY(o).catch((function(e){i.JW.warn("Could not add segment to renderer (mimeType: ".concat(o.getMimeType(),", playbackTime: ").concat(o.getPlaybackTime(),")"),e)})).then((function(){var n;o.isInit()||null===(n=i.PX())||void 0===n||n.dispatch((0,T.removeLoadedRange)(o.getMimeType(),(0,w.segmentToBufferBlockTimeRange)(o))),i.jW.set(o.getMimeType(),!o.isInit());var a=r.BufferRangeHelper.getTotalCommonBufferLength(i.getBufferedRangesMap());return!(0,A.isSwitchingBufferBlocks)(i.PX())||a<t?i.YX(e,t):Promise.resolve()}))):Promise.resolve()},e.prototype.ZX=function(e){var t,i,n=this;if(!e)return!1;var r=this.hasStopped(),o=null===(t=this.PW)||void 0===t?void 0:t.hasStartedLoadingNextBufferBlock(this.WW),a=null===(i=this.PW)||void 0===i?void 0:i.hasSegmentsForBufferBlock(e);return!this.QW.some((function(e){return n.NW.isDataBeingAppended(e.mimeType)}))&&(o||r)&&!a},e.prototype.isSegmentStoreWaitingForSegments=function(){var e,t;return null!==(t=null===(e=this.PW)||void 0===e?void 0:e.isWaitingForSegments())&&void 0!==t&&t},e.prototype.aX=function(e){var t=this,i=this.PW.getBufferBlock(this.WW);return this.VW=!0,this.YX(i,e).then((function(){var e,n;t.VW=!1,t.HX&&!t.isBufferClearingOngoing()&&t.WY()&&t.bY(),t.ZX(i)?(t.JW.debug("Finished loading BB ".concat(t.WW,": signaling EOS")),null===(e=t.PX())||void 0===e||e.dispatch((0,T.setLoadingRangeFinished)(!0)),t.UW?t.JW.debug("Skipped EOS signaling as a BufferBlock switch is just being executed"):t.TW&&(0,A.isSwitchingBufferBlocks)(t.PX())?(t.JW.debug("delaying EOS signal until ongoing period switch is completed"),t.TW.then((function(){t.setEndOfStream(!0)}))):t.setEndOfStream(!0)):null===(n=t.PX())||void 0===n||n.dispatch((0,T.setLoadingRangeFinished)(!1))}))},e.prototype.bX=function(){var e,t,i=this.IW.serviceManager.get(d.ServiceName.PlayerStateService);if(!i)return!1;var n=null!==(e=i.seekingOrTimeshifting)&&void 0!==e&&e,r=null===(t=this.PX())||void 0===t?void 0:t.getState(),o=r&&(0,b.getIsTimestampRollingOver)(r);return!(this.eW||(0,A.isSwitchingBufferBlocks)(this.PX())||n||o)},e.prototype.checkIfEndOfBufferReached=function(e){var t=this.NW.getEndOfBufferTime();if(void 0===t)this.NW.isPaused()||this.YY();else{var i=t-e,n=this.NW.getCurrentTime(!0);this.gX(n,i)&&this.iX(n)}},e.prototype.gX=function(e,t){return!(0,A.isSwitchingBufferBlocks)(this.PX())&&(t<=e||this.OW.isLive()&&0===e)},e.prototype.hX=function(){var e,t=!0;this.jW.forEach((function(i,n){R.MimeTypeHelper.isVideo(n)&&(t=i,e=n)})),t||(this.JW.debug("Resetting currentTime on video element on stalling"),this.IW.videoElement.currentTime=this.IW.videoElement.currentTime,this.jW.set(e,!0))},e.prototype.iX=function(e){var t,i,n=this.jX(),r=null===(t=this.PW)||void 0===t?void 0:t.getNextBufferBlock(this.WW),o=Boolean(r);if(n&&o&&(null===(i=this.PW)||void 0===i?void 0:i.areBufferBlockMediaTypesFinal(r))){var a=r.getMinCommonStartTime(),s=isFinite(a)&&a>=e?a:e;this.pX(s,r)}else this.OY()>0&&!this.cW&&(this.YY(),this.hX())},e.prototype.jX=function(){var e,t=null===(e=this.PW)||void 0===e?void 0:e.getBufferBlock(this.WW);return!!t&&(!t.getNextSegment()||!!this.PW&&this.PW.hasStartedLoadingNextBufferBlock(t.getId()))},e.prototype.readyToSeek=function(){return this.TW?(this.JW.debug("Awaiting ongoing buffer block switch before seek"),this.TW.then((function(){})).catch((function(){}))):Promise.resolve()},e.prototype.shouldBuffersBeClearedOnTimeshift=function(e){var t=this.NW.getCurrentTime();return!this.isInBufferedRange(e)||e<t},e.prototype.kX=function(e,t){return void 0===t&&(t=!1),t||this.shouldBuffersBeClearedOnTimeshift(e)?this.lX():Promise.resolve()},e.prototype.setTimeshiftCancelState=function(e){this.zX=e},e.prototype.lX=function(){var e=this;return this.IW.logger.debug("Clearing buffer on timeshift"),this.clearBuffers().then((function(){return e.zX?(e.zX=!1,Promise.reject("cancelled timeshift")):Promise.resolve()}))},e.prototype.setCurrentTime=function(e,t,i){var n=this;void 0===t&&(t=!1),void 0===i&&(i=!1);var r=this.PW.getBufferBlockForPlaybackTime(e),o=this.PW.getBufferBlock(this.WW),a=Boolean(!r||r.getId()!==o.getId());return this.ZW=e,this.bW||this.isInBufferedRange(e)||this.YY(),t&&this.isBufferAvailable()&&!this.isBufferClearingOngoing()&&this.kX(e,i).catch((function(e){return n.JW.debug("Error clearing buffers:",e)})),a?r?this.pX(e,r):this.rX(e):(this.SW=void 0,this.NW.setCurrentTime(e).then((function(e){return n.mX(e)})))},e.prototype.mX=function(e){return this.ZW=void 0,this.WY()?this.HX&&(this.JW.debug("End stalling after seek to ".concat(e)),this.bY()):this.JW.debug("Delay ending stall as the restart threshold is not yet reached"),Promise.resolve(e)},e.prototype.nX=function(e,t){var i,n,r,o,a,s=null!==(n=null===(i=this.SW)||void 0===i?void 0:i.time)&&void 0!==n?n:t,u=(0,_.isNumber)(null===(r=this.SW)||void 0===r?void 0:r.time)&&(null===(o=this.PW)||void 0===o?void 0:o.canSwitchToBufferBlockForTime(s));if(this.JW.debug("Buffer block switch failed:",e),this.yX=new Y.DeferredReject,u){this.JW.debug("Trying to continue delayed BufferBlock switch to ".concat(s,"..."));var c=this.oX(s);return this.pX(s,c)}return null===(a=this.PX())||void 0===a||a.dispatch((0,T.setBufferBlockSwitchOngoing)(!1)),Promise.resolve(t)},e.prototype.oX=function(e){var t,i=this.OW.getPeriodIdForTime(e);return null===(t=this.PW)||void 0===t?void 0:t.getTargetBufferBlock(e,i)},e.prototype.pX=function(e,t){var i,n,r=this,o=function(){};if(this.yX&&this.yX.reject("BufferBlock switch interrupted by newest one"),this.yX=new Y.DeferredReject,null===(i=this.PX())||void 0===i||i.dispatch((0,T.setBufferBlockSwitchOngoing)(!0)),this.SW&&(o=this.SW.deferred.resolve),!(null===(n=this.PW)||void 0===n?void 0:n.canSwitchToBufferBlock(t)))return this.rX(e);this.UW=!0;var a=this.AX||Promise.resolve();return this.TW=a.then((function(){return r.setEndOfStream(!1)})).then((function(){return r.SW=void 0})).then((function(){return r.yX.next((function(){return r.clearRendererBuffers()}))})).then((function(){return r.yX.next((function(){return r.qX(t,e)}))})).then((function(e){return r.UW=!1,r.yX=new Y.DeferredReject,o(e),e})).catch((function(t){return r.nX(t,e)})).finally((function(){r.TW=void 0})),this.TW},e.prototype.qX=function(e,t){var i,n;return this.hasStreamEnded()?(null===(i=this.yX)||void 0===i||i.reject("BufferBlock switch interrupted by source unloading"),Promise.reject("Source was unloaded")):(0,E.isTizen2017)()||(null===(n=this.PW)||void 0===n?void 0:n.shouldSwitchBufferBlock(e,this.WW))?this.GY(t,e):this.sX(t,e)},e.prototype.rX=function(e){(0,A.isSwitchingBufferBlocks)(this.PX())&&this.yX&&this.yX.reject("BufferBlock switch interrupted by newest one");var t=this.PW.getAvailablePositionForTime(e,this.NW.getCurrentTime());return this.SW&&this.SW.time===e||(this.SW&&this.SW.time!==e&&this.SW.deferred.reject(),this.SW={time:t,deferred:new P.Deferred}),this.SW.deferred.promise},e.prototype.sX=function(e,t){var i,n=this,r=t.getId();return(null===(i=this.PW)||void 0===i?void 0:i.getBufferBlock(r))?(this.eW=!1,this.WW=r,this.PW.deleteOldBufferBlocks(r),this.UW=!1,this.iW.clear(),this.yX.next((function(){return n.aX(1/0)})).then((function(){return n.yX.next((function(){return n.IY(e)}))})).then((function(e){var t;return null===(t=n.PX())||void 0===t||t.dispatch((0,T.setBufferBlockSwitchOngoing)(!1)),n.tX(),n.mX(e)}))):(this.JW.debug("Target BufferBlock is no longer available, cancelling BufferBlock switch..."),Promise.reject("The targeted buffer BufferBlock is no longer available"))},e.prototype.tX=function(){var e=this,t=this.ZY();t&&(this.HX||t.isPaused()||this.NW.play().catch((function(t){e.JW.debug("play call failed with reason: ".concat(t))})))},e.prototype.uX=function(e,t){var i,n=null===(i=this.PW)||void 0===i?void 0:i.getBufferBlock(this.WW);if(!n)return!0;var r=n.getAllKnownPeriodIds().some((function(t){return e.hasTrackedPeriodId(t)})),o=this.QW.length===t.length,a=!(r||o)||!(0,q.canReuseSourceBuffer)(n,e,t);return this.vX(a,n,e)},e.prototype.vX=function(e,t,i){var n,r,o,a,s=null===(n=this.IW)||void 0===n?void 0:n.sourceContext.source,u=null===(r=null==s?void 0:s.options)||void 0===r?void 0:r.shouldRecreateSourceBuffersOnPeriodSwitch;if(!u)return e;var c=t.getAllKnownPeriodIds(),d=G(t,null!==(o=c[c.length-1])&&void 0!==o?o:I.DEFAULT_PERIOD_ID),l=null!==(a=i.getAllKnownPeriodIds()[0])&&void 0!==a?a:I.DEFAULT_PERIOD_ID,h=G(i,l),p=(0,B.safeUserCallback)((function(){return u(d,h,e)}),this.IW.logger);return"boolean"==typeof p?(this.JW.debug("User overwrote default SourceBuffer recreation strategy from ".concat(e," to ").concat(p)+" for the switch from ".concat(d.periodId," to ").concat(h.periodId,".")),p):e},e.prototype.GY=function(e,t){var i,n,r,o,a,s,u=this;this.JW.debug("Switching buffer block for time ".concat(e));var c=t.getMediaTypesWithoutSubs(),l=this.HY(t,c);if(this.QW=c,null===(i=this.PX())||void 0===i||i.dispatch((0,T.setLoadingRangeFinished)(!1)),null===(r=null===(n=this.IW.serviceManager)||void 0===n?void 0:n.get(d.ServiceName.TimedMetadataService))||void 0===r||r.resetContentBoundaryTracking(),!1===(null===(o=this.ZY())||void 0===o?void 0:o.seekingOrTimeshifting)){var h=null!==(a=t.getAllKnownPeriodIds()[0])&&void 0!==a?a:I.DEFAULT_PERIOD_ID;null===(s=this.PX())||void 0===s||s.dispatch((0,x.periodSwitchStarted)(h))}return this.yX.next((function(){return l})).then((function(){return u.yX.next((function(){return u.sX(e,t)}))})).then((function(e){return u.yX.next((function(){return u.aX(1/0).catch((function(){return u.IW.logger.debug("Could not push segment into renderer")}))})).then((function(){return e}))}))},e.prototype.HY=function(e,t){return this.uX(e,t)?(this.JW.debug("recreating the buffers with types",t),this.LX(t,e)):Promise.resolve(0)},e.prototype.IY=function(e){var t=this,i=this.SW;return this.SW=void 0,this.yX.next((function(){return t.NW.setCurrentTime(e)})).then((function(e){return i&&i.deferred&&i.deferred.resolve(e),e}))},e.prototype.addMimeTypeAndCodec=function(e,t,i){if(void 0===i&&(i=!1),!R.MimeTypeHelper.isAV(e))return!0;var n=this.NW.addBuffer(e,t);return n&&((0,m.getMetricsState)(this.IW.store.getState())[e]||this.IW.store.dispatch((0,g.initializeMetricsForMimeType)(e,this.IW.settings)),i||this.IW.store.dispatch((0,g.addMetricsValue)(e,v.MetricType.StalledSeconds,0))),n},e.prototype.JY=function(){var e,t,i,n,r,o=this.dY(),a=null===(e=this.PW)||void 0===e?void 0:e.getAllBufferBlocks(),s=null===(t=this.PW)||void 0===t?void 0:t.getFutureBufferBlocks(o),u=null===(i=this.PW)||void 0===i?void 0:i.getBufferBlock(o);if(null==a?void 0:a.length){if(!(null==s?void 0:s.length))return u;for(var c=a.findIndex((function(e){return e.getId()===o})),d=c;d<a.length;d++){var l=a[d];(null===(n=this.PW)||void 0===n?void 0:n.hasStartedLoadingNextBufferBlock(l.getId()))&&(u=null===(r=this.PW)||void 0===r?void 0:r.getNextBufferBlock(l.getId()))}return u}},e.prototype.KY=function(){return this.QW.map((function(e){return e.mimeType}))},e.prototype.LY=function(){var e,t;return null!==(t=null===(e=this.JY())||void 0===e?void 0:e.getMediaTypes().map((function(e){return e.mimeType})))&&void 0!==t?t:[]},e.prototype.MY=function(e,t,i){var n=this;if(!this.isBufferAvailable())return 0;var r=e.map((function(e){return n.getOverallBufferLevel(e,t,p.BufferType.ForwardDuration,i)}));return r.length>0?Math.min.apply(Math,r):0},e.prototype.NY=function(){var e=this.LW.getForwardTargetLevel(),t=Math.min(this.KW.STARTUP_THRESHOLD,e-this.KW.STARTUP_THRESHOLD_DELTA),i=this.LY(),n=this.MY(i);return n>=t||n>=this.OY()},e.prototype.OY=function(){return this.OW.isLive()?1/0:this.NW.getDuration()-this.cY()},e.prototype.PY=function(){if(this.bW){var e=Date.now(),t=(0,m.getMetricsState)(this.IW.store.getState()),i=(0,m.getMetricsLastEntry)(t,"default",v.MetricType.StartTime).value,n=(0,C.toSeconds)(e-i);this.IW.store.dispatch((0,g.addMetricsValue)("default",v.MetricType.StartupTimeSeconds,n)),isNaN(n)||this.JW.debug("start up time: ".concat(n)),this.bW=!1,this.bY()}},e.prototype.QY=function(e){var t=this.NW.getCurrentTime(!0);e.isInit()&&R.MimeTypeHelper.isVideo(e.getMimeType())&&this.HX&&this.isInBufferedRange(t)&&(this.JW.debug("Resetting currentTime on video element on unstalling"),this.IW.videoElement.currentTime=this.IW.videoElement.currentTime)},e.prototype.RY=function(e){var t=this;e.getDrmInitData().filter((function(e){var t;return(null===(t=e.kid)||void 0===t?void 0:t.length)>0})).forEach((function(i){return t.OW.setRepresentationDrmKid(e.getRepresentationId(),i.kid[0])}))},e.prototype.SY=function(e){var t=e.getPresentationTimeOffset()+this.BX;isNaN(t)||e.setPresentationTimeOffset(t)},e.prototype.TY=function(e){var t=this;this.BX<0&&this.SY(e);var i=R.MimeTypeHelper.extractContentType(e.getMimeType());if(this.kW[i]!==e.getInitSegment()){var n=e.getInitSegment();return this.kW[i]=n,Promise.all([n,e].map((function(e){return t.UY(e)}))).then()}return this.UY(e)},e.prototype.UY=function(e){var t=this;return e.hasDrmInitData()&&this.RY(e),this.RW.catch((function(i){if(e.isEncrypted())throw(null==i?void 0:i.message)!==o.DrmSetupError.CANCELLED&&t.IW.eventHandler.fireError(function(e){var t;return O.ModuleManager.has(k.ModuleName.DRM)?(null==e?void 0:e.message)===o.DrmSetupError.MISSING_CONFIGURATION?new s.PlayerError(a.ErrorCode.DRM_MISSING_CONFIGURATION,{reason:e.message}):new s.PlayerError(a.ErrorCode.DRM_NO_KEY_SYSTEM,{reason:null!==(t=null==e?void 0:e.message)&&void 0!==t?t:e}):new L.PlayerModuleMissingError(k.ModuleName.DRM)}(i)),"DRMConfig failure";t.JW.debug("Problem ensuring segment, error:",i)})).then((function(){return t.QY(e),t.VY(e),t.NW.appendData(e).catch((function(e){t.JW.debug("could not append data to renderer",e)}))}))},e.prototype.VY=function(e){var t,i;if(!e.isInit()){var n=e.getSegmentInfo().discontinuitySequenceNumber,r=e.getPeriodId(),o=void 0!==n?String(n):r,a=e.getMimeType();if(o!==this.iW.get(a)){var s=e.getPresentationTimeOffset();(0,_.isNumber)(s)&&isFinite(s)&&this.NW.setTimestampOffset(a,-s),this.iW.set(a,o),null===(i=null===(t=this.IW.serviceManager)||void 0===t?void 0:t.get(d.ServiceName.TimedMetadataService))||void 0===i||i.trackContentBoundary(e)}}},e.prototype.WY=function(){var e=this;if(!this.LW)return!1;var t=this.KW.RESTART_THRESHOLD;(0,E.isWebOS)()&&(t=Math.max(t,1.5));var i=this.LW.getForwardTargetLevel(),n=Math.min(t,i-this.KW.RESTART_THRESHOLD_DELTA,this.OY()),r=this.KY();return r.every((function(t){return e.NW.getBufferedRanges(t).length>0}))&&this.MY(r)>=n},e.prototype.XY=function(){return!this.bW&&!(0,A.isSwitchingBufferBlocks)(this.PX())},e.prototype.YY=function(){this.XY()&&this.lW.startStalling()},e.prototype.ZY=function(){return this.IW.serviceManager.get(d.ServiceName.PlayerStateService)},e.prototype.aY=function(e){var t=this.ZY();if(!t)return!1;var i=this.KY(),n=this.MY(i,e,!1),r=n>=this.KW.RESTART_THRESHOLD,o=n>=this.OY()||this.cW;return!r&&!o&&!t.seekingOrTimeshifting},e.prototype.bY=function(){if(this.HX)if((0,A.isSwitchingBufferBlocks)(this.PX()))this.JW.debug("Ending stall was aborted due to buffer block switching");else{var e=this.cY();this.aY(e)?this.eY(e)?(this.JW.debug("Ending stall at the gap"),this.XW()):this.JW.debug("Cannot unstall yet as playback is stalling at a gap and there is no future common buffer"):this.lW.endStalling()}},e.prototype.cY=function(){return void 0!==this.ZW?this.ZW:this.NW.getCurrentTime()},e.prototype.dY=function(){return this.PW.getCurrentBufferBlockId()},e.prototype.hasPendingSegments=function(e){return e=e||this.dY(),this.PW.getFutureBufferBlocks(e).some((function(e){return e.hasSegments()}))},e.prototype.getOverallBufferLevel=function(e,t,i,n){void 0===t&&(t=this.NW.getCurrentTime()),void 0===i&&(i=p.BufferType.ForwardDuration),void 0===n&&(n=!0),this.bW&&(t=this.cY());var o=this.getBufferedRangesMap()[e];return o&&0!==o.length?(o=n?r.BufferRangeHelper.mergeRanges(o.concat(r.BufferRangeHelper.findGapsInRanges(o)),this.KW.GAP_TOLERANCE):o.filter((function(e){return e.start<=t&&t<=e.end})),r.BufferRangeHelper.getBufferLevel(o,t,i)):0},e.prototype.eY=function(e){return void 0===e&&(e=this.NW.getCurrentTime()),r.BufferRangeHelper.getCommonBufferedRanges(this.getBufferedRangesMap()).some((function(t){return t.getStart()>e}))},e.prototype.hasFutureBufferBlockData=function(){var e;return Boolean(null===(e=this.PW)||void 0===e?void 0:e.getNextBufferBlock(this.WW))||(0,A.isSwitchingBufferBlocks)(this.PX())},e.prototype.isInBufferedRange=function(e){return r.BufferRangeHelper.isInBufferedRange(this.getBufferedRangesMap(),e)},e.prototype.isStarted=function(){return this.aW},e.prototype.hasStreamEnded=function(){return this.dW},e.prototype.fY=function(){var e;if(!this.xX){var t=this.PX();void 0!==t&&void 0!==(null===(e=t.getState())||void 0===e?void 0:e.manifest)&&(this.xX=(0,M.subscribe)(t)(D.getManifest,this.GX,(function(e){return(null==e?void 0:e.isInitialized)||!1})))}},e.prototype.stop=function(e){void 0===e&&(e=!1),this.cW=!0,this.aW=!1,this.bW=!1,e?(this.NW.end(),this.dW=!0,this.JW.debug("stopped playback"),this.NW.off(N.MediaElementEvent.stalled,this.fX),this.NW.off(N.MediaElementEvent.waiting,this.fX),this.NW.off(N.MediaElementEvent.ended,this.eX),this.NW.off(N.MediaElementEvent.timeupdate,this.cX),this.NW.off(N.MediaElementEvent.currenttimenotadvancing,this.dX),this.xX&&(this.xX(),this.xX=void 0),void 0!==this.DX&&(this.DX(),this.DX=void 0),this.gY(),this.jW.clear()):this.bY()},e.prototype.hasStopped=function(){return this.cW},e.prototype.gY=function(){var e=this;Object.keys(this.wX).forEach((function(t){return e.NX(t)}))},e.prototype.restart=function(){this.cW=!1,this.aW||(this.aW=!0,this.NW.on(N.MediaElementEvent.stalled,this.fX),this.NW.on(N.MediaElementEvent.waiting,this.fX),this.NW.on(N.MediaElementEvent.ended,this.eX),this.NW.on(N.MediaElementEvent.timeupdate,this.cX),this.NW.on(N.MediaElementEvent.currenttimenotadvancing,this.dX)),this.dW=!1},e.prototype.dispose=function(){var e,t;this.stop(!0),this.NW=null,this.MW=null,this.KW=null,this.LW=null,this.MW=null,this.PW=void 0,this.kW=null,null===(e=this.EX)||void 0===e||e.call(this),null===(t=this.PX())||void 0===t||t.dispatch((0,T.resetLoadedRanges)()),this.CX.dispose(),this.QW=[],this.gY(),this.RW=null,this.lW=(0,l.dispose)(this.lW)},e.prototype.changeBufferType=function(e,t,i){var n,r,o=this.QW.find((function(t){return R.MimeTypeHelper.getMediaType(t.mimeType)===R.MimeTypeHelper.getMediaType(e)}));return o&&(this.QW.splice(this.QW.indexOf(o),1),this.QW.push({mimeType:e,codec:t}),this.NX(o.mimeType),null===(r=this.PX())||void 0===r||r.dispatch((0,T.resetLoadedRanges)(o.mimeType))),this.MX(e),this.PW.changeMediaType(e,null==o?void 0:o.mimeType),this.kW={},o?this.NW.changeBufferType(e,t,i):Promise.resolve(((n={})[e]=t,n))},e.prototype.addRequiredMediaType=function(e,t){this.PW.addRequiredMediaType(e,t)},e.prototype.areBufferBlockMediaTypesFinalForPeriod=function(e){var t,i;return null!==(i=null===(t=this.PW)||void 0===t?void 0:t.areBufferBlockMediaTypesFinalForPeriod(e))&&void 0!==i&&i},e.prototype.clearCacheForMimeType=function(e){var t;null===(t=this.PX())||void 0===t||t.dispatch((0,T.resetLoadedRanges)(e)),this.PW.clearSegments(e)},e.prototype.hY=function(){var e,t=this;Object.keys((0,W.getStreamTimeline)(null===(e=this.PX())||void 0===e?void 0:e.getState())).filter((function(e){return R.MimeTypeHelper.isAV(e)})).forEach((function(e){return t.clearCacheForMimeType(e)}))},e.prototype.isBufferClearingOngoing=function(){return void 0!==this.AX},e.prototype.clearBuffers=function(){var e=this;return this.AX?(this.JW.debug("Skipping buffer clearing as it is already ongoing"),this.AX):(this.YY(),this.hY(),this.AX=this.setEndOfStream(!1).then((function(){return e.clearRendererBuffers()})),this.AX.finally((function(){return e.AX=void 0})),this.AX)},e.prototype.clearRendererBuffers=function(){var e=this;if(!this.isBufferAvailable())return Promise.resolve();var t=this.QW.map((function(t){return e.clearBuffer(t.mimeType)}));return Promise.all(t).then((function(){}))},e.prototype.clearBuffer=function(e){var t=this;return this.NW.removeData(e).catch((function(i){return t.JW.debug("Error clearing ".concat(e," buffer:"),i)}))},e.prototype.isBufferAvailable=function(){return this.QW.length>0},e}();function G(e,t){return{periodId:t,contentInformation:e.getMediaTypes().map((function(t){return{codec:t.codec,mimeType:t.mimeType,isDrmProtected:e.getSegregationCriteria(t.mimeType).encryption===U.EncryptionState.Encrypted}}))}}t.BufferController=K},36193:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.setRepresentationIdAction=function(e){return(0,n.createAction)(o.ActiveTracksActionType.SetSelectedRepresentationId,{selectedRepresentationId:e})},t.setMediaTypeAction=function(e,t){var i=(0,r.forceArray)(t);return(0,n.createAction)(o.ActiveTracksActionType.SetMediaType,{trackId:e,mediaTypes:i})},t.setContainerFormatAction=function(e,t){return(0,n.createAction)(o.ActiveTracksActionType.SetContainerFormat,{trackId:e,containerFormat:t})},t.removeActiveTrackAction=function(e){return(0,n.createAction)(o.ActiveTracksActionType.RemoveActiveTrack,{adaptationSetId:e})},t.clearActiveTracksAction=function(){return(0,n.createAction)(o.ActiveTracksActionType.ClearActiveTracks)};var n=i(35267),r=i(74853),o=i(7511)},37641:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentCache=void 0,t.areSegmentsIdentical=a;var n=i(74853),r=i(19541),o=function(){function e(e){this.HH=Math.max(0,e),this.IH=[]}return e.prototype.contains=function(e){return this.IH.some((function(t){return a(e.getSegmentInfo(),t.getSegmentInfo())}))},e.prototype.JH=function(e){this.IH=0!==e?this.IH.slice(-e):[]},e.prototype.add=function(e){this.contains(e)||(this.IH.push(e),this.JH(this.HH))},e.prototype.get=function(e){return this.IH.find((function(t){return a(e,t.getSegmentInfo())}))},e.prototype.clear=function(){this.JH(0)},e.prototype.remove=function(e){this.IH=this.IH.filter((0,n.invert)(e))},e.prototype.getCapacity=function(){return this.HH},e.prototype.getCachedCount=function(){return this.IH.length},e.prototype.getCachedSegments=function(){return this.IH.slice(0)},e}();function a(e,t){return(e.isInitSegment?["url","periodId","byteRange","representationId"]:["url","periodId","byteRange","discontinuitySequenceNumber"]).every((function(i){return"object"==typeof e[i]?(0,r.compareValues)(e[i],t[i]):e[i]===t[i]}))}t.SegmentCache=o},38568:function(e,t,i){var n=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__runInitializers||function(e,t,i){for(var n=arguments.length>2,r=0;r<t.length;r++)i=n?t[r].call(e,i):t[r].call(e);return n?i:void 0},o=this&&this.__esDecorate||function(e,t,i,n,r,o){function a(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var s,u=n.kind,c="getter"===u?"get":"setter"===u?"set":"value",d=!t&&e?n.static?e:e.prototype:null,l=t||(d?Object.getOwnPropertyDescriptor(d,n.name):{}),h=!1,p=i.length-1;p>=0;p--){var f={};for(var g in n)f[g]="access"===g?{}:n[g];for(var g in n.access)f.access[g]=n.access[g];f.addInitializer=function(e){if(h)throw new TypeError("Cannot add initializers after decoration has completed");o.push(a(e||null))};var m=(0,i[p])("accessor"===u?{get:l.get,set:l.set}:l[c],f);if("accessor"===u){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(s=a(m.get))&&(l.get=s),(s=a(m.set))&&(l.set=s),(s=a(m.init))&&r.unshift(s)}else(s=a(m))&&("field"===u?r.unshift(s):l[c]=s)}d&&Object.defineProperty(d,n.name,l),h=!0};Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestUpdateScheduler=void 0,t.isRepresentationUpToDate=S;var a=i(3336),s=i(80813),u=i(77401),c=i(69957),d=i(85648),l=i(93204),h=i(88847),p=i(85434),f=i(89927),g=i(59707),m=i(22059),v=i(63147),y=function(){var e,t,i=h.Suspendable,f=[];return e=function(e){function t(t,i){var n=e.call(this,{onSuspend:function(){return n.EC()},onRestore:function(){return n.FC()}})||this;n.PB=r(n,f),n.XB=!1,n.YB={},n.dB=function(e){return null==e?void 0:e.activeTracks},n.eB=function(e){e&&n.RB.isHlsManifest()&&n.fB(e)},n.jB=function(e){return e.player&&e.player.playbackState},n.uC=function(e){e&&(e===d.PlaybackState.Paused?n.CC():e===d.PlaybackState.Playing&&n.DC())},n.xC=function(e){n.zC(e),n.RB.updateManifest(n.RB.getManifest()).catch((function(){n.WB.debug("Updating the manifest failed")}))},n.yC=function(e,t){if(n.WB.debug("Rejection while updating the representation",e),e===u.RequestError.Failed||e===u.RequestError.TimedOut||e instanceof a.PlayerError){var i=e instanceof a.PlayerError?e.name:e;n.UB.dispatch((0,g.updateRepresentationFailedDownloadAction)(t._internalId,i)),n.RB.updateManifest(n.RB.getManifest()).catch((function(e){n.WB.debug("Error while updating the manifest after the representation failed to load",e)}))}},n.AC=function(){n.WB.debug("Error while loading manifest")},n.PB=t,n.QB=i;var o=n.QB.sourceIdentifier;return n.RB=t.serviceManager.get(s.ServiceName.ManifestService,o),n.SB=t.serviceManager.get(s.ServiceName.ManifestLoadingService,o),n.TB=t.store,n.UB=t.serviceManager.get(s.ServiceName.SourceStoreService,o),n.VB=t.eventHandler,n.WB=t.logger,n.aB=n.cB(),n.bB=n.iB(t),n}return n(t,e),t.prototype.cB=function(){var e=this;return(0,l.subscribe)(this.UB)((function(t){return e.dB(t)}),this.eB)},t.prototype.fB=function(e){this.gB(e),this.hB(e)},t.prototype.gB=function(e){var t=this;Object.keys(e).filter((function(t){return e[t].selectedRepresentationId})).forEach((function(i){t.vC(e[i].selectedRepresentationId)}))},t.prototype.hB=function(e){var t=this;Object.keys(this.YB).filter((function(t){return!Object.keys(e).includes(t)})).forEach((function(e){t.YB[e].stop(),delete t.YB[e]}))},t.prototype.iB=function(e){return(0,l.subscribe)(this.TB)(this.jB,this.uC,(function(){return e.settings.STOP_DOWNLOAD_ON_PAUSE}))},t.prototype.vC=function(e){var t=this.RB.getRepresentationById(e),i=e.adaptationSetId;this.YB[i]?this.YB[i].getRepresentation()._internalId.equals(e)||this.YB[i].setRepresentation(t):this.YB[t._internalId.adaptationSetId]=this.wC(t)},t.prototype.stopRepresentationUpdates=function(e){var t,i=this.YB[e._internalId.adaptationSetId];return null!==(t=null==i?void 0:i.stopRepresentationUpdate(e))&&void 0!==t?t:Promise.resolve()},t.prototype.scheduleRepresentationUpdate=function(e){var t=this.YB[e._internalId.adaptationSetId];null==t||t.setRepresentation(e),null==t||t.start()},t.prototype.wC=function(e){var t=this,i=new v.RepresentationUpdater(this.PB,e,this.SB,{success:this.xC,error:function(e){return t.yC(e,i.getRepresentation())}});return p.MimeTypeHelper.isAV(e._mimeType)||i.setRepresentation(e),i.start(),i},t.prototype.zC=function(e){this.UB.dispatch((0,g.updateRepresentationAction)(e))},t.prototype.init=function(e){var t=this;return this.SB.load(e).then((function(e){return t.RB.updateManifest(e).then((function(){t.XB=!0,t.RB.isLive()&&!t.RB.isHlsManifest()&&t.BC(e)}))})).catch((function(e){return e instanceof a.PlayerError||e instanceof Error?Promise.reject(e):Promise.reject(new Error("The loading of the manifest has failed or was cancelled"))}))},t.prototype.BC=function(e){var t=this;this.ZB=new m.ManifestUpdater(this.PB,this.SB,e,{minAllowedUpdatePeriod:this.PB.settings.MINIMUM_ALLOWED_UPDATE_PERIOD,maxAllowedUpdatePeriod:this.PB.settings.MAXIMUM_ALLOWED_UPDATE_PERIOD},{success:function(e){return t.RB.updateManifest(e)},error:this.AC}),this.ZB.start()},t.prototype.waitForRepUpdate=function(e){return 0===Object.keys(this.YB).length||S(this.RB.getRepresentationById(e))?Promise.resolve():this.YB[e.adaptationSetId].updateRepresentation().then((function(){}))},t.prototype.CC=function(){Object.values(this.YB).forEach((function(e){return e.stop()})),this.ZB&&this.ZB.stop()},t.prototype.DC=function(){Object.values(this.YB).filter((function(e){return e.isStopped})).forEach((function(e){e.start()})),this.ZB&&this.ZB.isStopped&&this.ZB.start()},t.prototype.EC=function(){this.bB()},t.prototype.FC=function(){this.bB=this.iB(this.PB)},t.prototype.isInitiated=function(){return this.XB},t.prototype.dispose=function(){var t;this.aB(),this.bB(),this.CC(),null===(t=this.ZB)||void 0===t||t.dispose(),Object.values(this.YB).forEach((function(e){e.dispose()})),this.ZB=null,this.YB=null,e.prototype.dispose.call(this)},t}(i),function(){var n,r="function"==typeof Symbol&&Symbol.metadata?Object.create(null!==(n=i[Symbol.metadata])&&void 0!==n?n:null):void 0;t=[(0,c.trackPerformance)("ManifestUpdateScheduler.init",!0)],o(e,null,t,{kind:"method",name:"init",static:!1,private:!1,access:{has:function(e){return"init"in e},get:function(e){return e.init}},metadata:r},null,f),r&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:r})}(),e}();function S(e){var t;return!!e._requestTimestamp&&e._requestTimestamp+(0,f.toMilliSeconds)(null!==(t=e._updateInterval)&&void 0!==t?t:1/0)>Date.now()}t.ManifestUpdateScheduler=y},39494:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentStore=t.INITIAL_BUFFER_BLOCK_ID=void 0;var r=i(68925),o=i(86897),a=i(15971),s=i(34047),u=i(79721),c=i(76399),d=i(85434),l=i(88052),h=i(62756),p=i(59604),f=i(99529),g=i(90685),m=i(674),v=i(77264);t.INITIAL_BUFFER_BLOCK_ID=0;var y=function(){function e(e,i){this.context=e,this.S9=[],this.U9={};var n=new g.BufferBlock(t.INITIAL_BUFFER_BLOCK_ID);this.U9={},this.T9=new v.Segregation(this.U9,i),this.R9=[n]}return e.prototype.V9=function(e){return this.R9.find((function(t){return t.hasTrackedPeriodId(e)}))},e.prototype.hasSegmentsForBufferBlock=function(e){return this.getAllSegmentsFromBufferBlock(e).hasNext()},e.prototype.isWaitingForSegments=function(){return 0!==this.S9.length},e.prototype.hasDataSegmentsForBufferBlock=function(e){return Object.keys(e.mediaTypes).filter((function(e){return d.MimeTypeHelper.isAV(e)})).every((function(t){return e.hasDataSegments(t)}))},e.prototype.getTargetBufferBlock=function(e,t){return this.getBufferBlockForPlaybackTime(e)||this.e9(e)||this.V9(t)},e.prototype.canSwitchToBufferBlock=function(e){if(!e)return!1;var t=this.areBufferBlockMediaTypesFinal(e);return this.hasDataSegmentsForBufferBlock(e)&&t},e.prototype.canSwitchToBufferBlockForTime=function(e){var t=this.getBufferBlockForPlaybackTime(e);return this.canSwitchToBufferBlock(t)},e.prototype.areBufferBlockMediaTypesFinalForPeriod=function(e){var t,i=this;if(void 0===this.U9[e])return!1;var n=this.V9(e);if(!n||0===Object.keys(null!==(t=null==n?void 0:n.mediaTypes)&&void 0!==t?t:{}).length)return!1;var r=Object.keys(n.mediaTypes);return Object.keys(this.U9[e]).filter((function(e){return d.MimeTypeHelper.isAV(e)})).every((function(t){var n;return r.includes(t)&&(null===(n=i.U9[e][t])||void 0===n?void 0:n.codec)}))},e.prototype.areBufferBlockMediaTypesFinal=function(e){var t,i=this;return!(!e||0===Object.keys(null!==(t=null==e?void 0:e.mediaTypes)&&void 0!==t?t:{}).length)&&e.getAllKnownPeriodIds().every((function(e){return i.areBufferBlockMediaTypesFinalForPeriod(e)}))},e.prototype.addRequiredMediaType=function(e,t){this.U9[e]||(this.U9[e]={}),this.U9[e][t]||(this.U9[e][t]={mimeType:t});var i=this.V9(e);i&&(i.mediaTypes[t]||i.addMediaType({mimeType:t}))},e.prototype.changeMediaType=function(e,t){var i=this,n=Object.keys(this.U9),r=t;n.forEach((function(n){t||(r=Object.keys(i.U9[n]).find((function(t){return d.MimeTypeHelper.getMediaType(t)===d.MimeTypeHelper.getMediaType(e)}))),i.removeRequiredMediaType(n,r),i.addRequiredMediaType(n,e)}))},e.prototype.removeRequiredMediaType=function(e,t){if(this.U9[e]){delete this.U9[e][t];var i=this.V9(e);i&&i.removeMediaType(t)}this.clearSegments(t)},e.prototype.W9=function(e,t){var i;if(this.U9[e]){var r=this.U9[e][t.mimeType];this.U9[e][t.mimeType]=n(n({},r),t)}else this.U9[e]=((i={})[t.mimeType]=t,i)},e.prototype.X9=function(e,t){var i=this;if(1===this.R9.length&&this.T9.canAddSegmentToBufferBlock(e,this.R9[0],t))return this.R9[0];var n=this.R9.reduce((function(n,r){return i.T9.canAddSegmentToBufferBlock(e,r,t)&&(!n||r.getMinDistanceFromBufferBlock(e)<n.getMinDistanceFromBufferBlock(e))?r:n}),void 0);if(n){var r=n.getCommonPlaybackTimeRanges(),o=e.getPlaybackTime(),a=function(e){return e.map((function(e){return{range:e.getCommonPlaybackTimeRanges(),block:e}})).sort((function(e,t){return e.range.start-t.range.start}))}(this.R9.filter((function(e){return e!==n}))),s=function(e,t){return t.reduce((function(t,i){return i.range.end<=e?Math.max(i.range.start,t):t}),-1/0)}(r.start,a),u=function(e,t){return t.reduce((function(t,i){return i.range.start>=e?Math.min(i.range.start,t):t}),1/0)}(r.end,a);if(s<=o&&o<=u&&!this.Y9(o,n,a))return n}},e.prototype.Y9=function(e,t,i){return i.filter((function(e){return isFinite(e.range.start)&&e.range.start>t.getCommonPlaybackTimeRanges().start&&isFinite(e.range.end)&&e.range.end>t.getCommonPlaybackTimeRanges().end})).some((function(t){var i=t.range.start<=e&&e<=t.range.end,n=e>t.range.end;return i||n}))},e.prototype.Z9=function(e,t){var i=this,n=null!=e?e:u.DEFAULT_PERIOD_ID;return Object.keys(this.U9[n]).filter((function(e){return d.MimeTypeHelper.isAV(e)})).every((function(e){return i.S9.some((function(i){return i.getMimeType()===e&&i.getSegmentInfo().discontinuitySequenceNumber===t&&i.getPeriodId()===n}))}))},e.prototype.a9=function(e){var t,i=null===(t=(0,a.getSourceState)(this.context))||void 0===t?void 0:t.hls;return!!i&&(0,l.ModuleManager.get(h.ModuleName.HLS).selectors.areDiscontinuitiesMisaligned)(i,Object.keys(this.U9[u.DEFAULT_PERIOD_ID]).filter((function(e){return d.MimeTypeHelper.isAV(e)})),e.getDuration())},e.prototype.addSegment=function(e){var t=this;if(function(e,t){var i=e.getSegmentInfo(),n=i.codecs,r=i.discontinuitySequenceNumber,o=i.periodId;return null!=r?!t.some((function(e){return e.hasTrackedDiscontinuity(r)}))&&!(0,s.isAVMuxedTogether)(n):void 0!==o&&!t.some((function(e){return e.hasTrackedPeriodId(o)}))}(e,this.R9)){var i=e.getSegmentInfo(),n=i.discontinuitySequenceNumber,r=i.periodId;if(this.S9.push(e),this.context.logger.debug("[SegmentStore] Reached new content boundary ".concat(null!=n?n:r," with ").concat(e.getMimeType()," segment"),{url:e.getUrl()}),this.Z9(r,n)){var o=this.S9.filter((function(e){return e.getSegmentInfo().discontinuitySequenceNumber===n&&e.getSegmentInfo().periodId===r}));this.context.logger.debug("[SegmentStore] ".concat(null==n?"Period":"Discontinuity"," ").concat(null!=n?n:r," is ready: adding segments to store")),this.b9(o),this.S9=this.S9.filter((function(e){return e.getSegmentInfo().discontinuitySequenceNumber!==n||e.getSegmentInfo().periodId!==r}))}else this.a9(e)&&(this.context.logger.debug("[SegmentStore] Detected misaligned discontinuities: flushing all delayed segments"),this.S9.forEach((function(e){return t.b9([e])})),this.S9=[])}else this.b9([e])},e.prototype.b9=function(e){var t=this,i=e.reduce((function(e,i){var n=t.T9.getSegregationCriteria(i),r=t.X9(i,n);return null===e?r:r!==e?void 0:r}),null);i||(i=this.d9(),this.R9.push(i)),e.forEach((function(e){var n=t.T9.getSegregationCriteria(e);t.context.logger.debug("[SegmentStore] Added ".concat(e.getMimeType()," segment to BB with ID ").concat(i.getId()),{segment:e.getUrl(),segmentCriteria:n});var o=(0,a.getSourceStore)(t.context),s=(0,f.getTrackIdentifier)(e.getSegmentInfo());null==o||o.dispatch((0,r.removeLoadedRange)(s,(0,p.segmentToBufferBlockTimeRange)(e))),i.addSegment(e),null==o||o.dispatch((0,r.addLoadedRange)(s,(0,p.segmentToBufferBlockTimeRange)(e))),i.getSegregationCriteria(e.getMimeType())||i.setSegregationCriteria(n,e.getMimeType());var u=i.getMediaType(e.getMimeType());u&&t.W9(e.getPeriodId(),u)}))},e.prototype.c9=function(){var e=this.R9[this.R9.length-1];return e?e.getId()+1:t.INITIAL_BUFFER_BLOCK_ID},e.prototype.d9=function(){var e=this.c9();return this.context.logger.debug("[SegmentStore] creating new BB with ID ".concat(e)),new g.BufferBlock(e)},e.prototype.getMediaTypes=function(e){var t=this;return e&&this.U9[e]?Object.keys(this.U9[e]).map((function(i){return t.U9[e][i]})):[]},e.prototype.getAllBufferBlocks=function(){return this.R9},e.prototype.getCurrentBufferBlockId=function(){var e,i=this.R9[0];return null!==(e=null==i?void 0:i.getId())&&void 0!==e?e:t.INITIAL_BUFFER_BLOCK_ID},e.prototype.deleteOldBufferBlocks=function(e){this.R9=this.R9.filter((function(t){return t.getId()>=e&&t.getAllSegments().length>0}))},e.prototype.getActiveBufferBlock=function(){var e;return null!==(e=this.getBufferBlock(this.getCurrentBufferBlockId()))&&void 0!==e?e:null},e.prototype.getBufferBlock=function(e){return this.R9.find((function(t){return t.getId()===e}))},e.prototype.getBufferBlockForSegment=function(e){return this.getBufferBlock(e.getBufferBlockId())},e.prototype.getBufferBlockForPlaybackTime=function(e){var t=this,i=this.R9.filter((function(i){var n=0===e?t.getSmallestMaxSegmentDuration(i)-.01:.01;return Object.keys(i.mediaTypes).filter((function(e){return d.MimeTypeHelper.isAV(e)})).every((function(t){var r,o;return(null===(r=i.getPlaybackTimeRange(t))||void 0===r?void 0:r.start)<=e+n&&(null===(o=i.getPlaybackTimeRange(t))||void 0===o?void 0:o.end)>=e}))}));return i[i.length-1]},e.prototype.e9=function(e){return this.R9.filter((function(t){return t.getMinCommonStartTime()>=e})).sort((function(e,t){return e.getMinCommonStartTime()-t.getMinCommonStartTime()}))[0]},e.prototype.getNextSegment=function(){var e,t;return null!==(t=null===(e=this.getActiveBufferBlock())||void 0===e?void 0:e.getNextSegment())&&void 0!==t?t:null},e.prototype.removeSegment=function(e){var t=this.getBufferBlockForSegment(e);t&&t.removeSegment(e),this.S9=this.S9.filter((function(t){return t!==e}))},e.prototype.getAllSegmentsFromBufferBlock=function(e,t){if(!e)return c.EmptyIterator.getInstance();var i=e.getAllSegments();return t?new c.FilterIterator(new c.ArrayIterator(i),(function(e){return e.getMimeType()===t})):new c.ArrayIterator(i)},e.prototype.getNextBufferBlock=function(e){return this.R9.find((function(t){return t.getId()>e}))},e.prototype.getFutureBufferBlocks=function(e){return this.R9.filter((function(t){return t.getId()>=e}))},e.prototype.getPrecedingSegments=function(e,t){var i=this.S9.filter((function(i){return(0,g.isPrecedingSegment)(i,e,t)}));return this.R9.flatMap((function(i){return i.getPrecedingSegments(e,t)})).concat(i)},e.prototype.clearSegments=function(e){this.context.logger.debug("[SegmentStore] clearing all segments for ".concat(e)),this.R9.forEach((function(t){return t.clearSegments(e)})),this.S9=this.S9.filter((function(t){return t.getMimeType()!==e}))},e.prototype.getSmallestMaxSegmentDuration=function(e){return Boolean(e)&&e.hasMaxSegmentDurations()?e.getMinMaxSegmentDuration():-1},e.prototype.getSmallestSafeBufferSize=function(e,t){var i=this.getBufferBlockForPlaybackTime(e);return(null==i?void 0:i.hasMaxSegmentDuration(t))?i.getMaxSegmentDuration(t)+1:1},e.prototype.getAvailablePositionForTime=function(e,t){var i=e;if(t&&e>t){var n=this.getBufferBlockForPlaybackTime(e);n||(n=this.e9(e))&&(i=n.getMinCommonStartTime())}return i},e.prototype.getPlaybackTimesForBufferBlock=function(e,t){var i=this,n=this.getBufferBlock(e);return t.map((function(e){var t=new c.FilterIterator(i.getAllSegmentsFromBufferBlock(n,e),(function(e){return!e.isInit()}));return t.hasNext()?t.next().getPlaybackTime():-1/0}))},e.prototype.hasStartedLoadingNextBufferBlock=function(e){var t=this.getNextBufferBlock(e);return!!t&&this.hasDataSegmentsForBufferBlock(t)},e.prototype.shouldSwitchBufferBlock=function(e,t){return!(0,m.areBufferBlocksEqual)(e,this.getBufferBlock(t))},e.prototype.getSegmentStoreRangesMap=function(e,t){var i={};return t.forEach((function(e){return i[e]=[]})),this.getFutureBufferBlocks(this.getCurrentBufferBlockId()).map((function(e){return e.getId()})).concat(1/0).map((function(t){return(0,o.getBufferBlockLoadedRanges)(e,t)})).forEach((function(e){return Object.keys(e).forEach((function(t){return i[t].push(e[t])}))})),i},e}();t.SegmentStore=y},39523:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.addStreamTimeRange=function(e,t,i){var o={start:t.start,end:t.end,type:i};return(0,n.createAction)(r.StreamTimelineActionType.StreamTimeRangeAdd,{mimeType:e,streamTimeRange:o})},t.removeStreamTimeRange=function(e,t,i){return(0,n.createAction)(r.StreamTimelineActionType.StreamTimeRangeRemove,{mimeType:e,range:t,type:i})},t.resetStreamTimeline=function(e){return(0,n.createAction)(r.StreamTimelineActionType.StreamTimelineReset,e)};var n=i(35267),r=i(80965)},41710:function(e,t,i){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.RendererReducer=void 0;var o=i(3793),a=i(39564);t.RendererReducer=(0,o.default)(function(){return{mseObjectUrl:""}}(),((n={})[a.RendererActionType.SetMseObjectUrl]=function(e,t){var i=t.payload;return r(r({},e),{mseObjectUrl:i.url})},n))},42208:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.periodSwitchStarted=t.periodSwitchFinished=t.setPlayingPeriodId=void 0;var n=i(35267),r=i(84362);t.setPlayingPeriodId=function(e){return(0,n.createAction)(r.PlayingTracksActionKey.SetPlayingPeriodId,e)},t.periodSwitchFinished=function(e){return(0,n.createAction)(r.PlayingTracksActionKey.FinishedPeriodSwitch,e)},t.periodSwitchStarted=function(e){return(0,n.createAction)(r.PlayingTracksActionKey.StartedPeriodSwitch,e)}},42614:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.getMinSafeStartupBuffer=function(e,t){if((0,r.isTizen2016)()){var i=t.map((function(e){return n.MimeTypeHelper.getMediaType(e)})).map((function(t){return e.bufferSettings.getForwardTargetLevel(t)}));return Math.max.apply(Math,i)}return(0,r.isWebOs2019OrOlder)()||(0,r.isLegacyEdge)()?6:(0,r.isTizen2017)()||(0,r.isTizen2018)()||(0,r.isTizen2019)()||(0,r.isWebOs2020)()?4:0};var n=i(85434),r=i(15487)},44115:function(e,t,i){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__rest||function(e,t){var i={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(i[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var r=0;for(n=Object.getOwnPropertySymbols(e);r<n.length;r++)t.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(e,n[r])&&(i[n[r]]=e[n[r]])}return i};Object.defineProperty(t,"__esModule",{value:!0}),t.ActiveTracksReducer=void 0,t.getContainerFormat=function(e,t){var i;if(e.activeTracks)return null===(i=Object.values(e.activeTracks).find((function(e){var i;return null===(i=e.mediaTypes)||void 0===i?void 0:i.includes(t)})))||void 0===i?void 0:i.containerFormat},t.getMediaTypes=function(e,t){var i;return e.activeTracks&&(null===(i=e.activeTracks[t.adaptationSetId])||void 0===i?void 0:i.mediaTypes)||[]};var a=i(3793),s=i(7511),u={};t.ActiveTracksReducer=(0,a.default)({},((n={})[s.ActiveTracksActionType.SetSelectedRepresentationId]=function(e,t){return function(e,t){var i,n=t.selectedRepresentationId,o=e[n.adaptationSetId];return r(r({},e),((i={})[n.adaptationSetId]=r(r({},o),{selectedRepresentationId:n}),i))}(e,t.payload)},n[s.ActiveTracksActionType.SetMediaType]=function(e,t){return function(e,t){var i,n=t.trackId,o=t.mediaTypes,a=e[n.adaptationSetId];return r(r({},e),((i={})[n.adaptationSetId]=r(r({},a),{mediaTypes:o}),i))}(e,t.payload)},n[s.ActiveTracksActionType.SetContainerFormat]=function(e,t){return function(e,t){var i,n=t.trackId,o=t.containerFormat,a=e[n.adaptationSetId];return r(r({},e),((i={})[n.adaptationSetId]=r(r({},a),{containerFormat:o}),i))}(e,t.payload)},n[s.ActiveTracksActionType.RemoveActiveTrack]=function(e,t){return function(e,t){var i=e,n=t.adaptationSetId.adaptationSetId,a=(i[n],o(i,["symbol"==typeof n?n:n+""]));return r({},a)}(e,t.payload)},n[s.ActiveTracksActionType.ClearActiveTracks]=function(){return u},n))},44552:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentManager=t.SegmentService=void 0;var n=i(56481),r=i(85434),o=i(15487),a=i(37641),s=i(71018),u=i(97587),c=i(88401),d=function(){function e(e){var t=this;this.context=e,this.ZC=function(e){t.XC.has(e)&&(t.XC.get(e).dispose(),t.XC.delete(e))},this.XC=new Map}return e.prototype.YC=function(e,t){var i=void 0===t?{}:t,n=i.id,o=i.lang;return r.MimeTypeHelper.isSubtitle(e)?[e,n,o].filter(Boolean).join("-"):e},e.prototype.add=function(e,t,i){var n=this.get(e.mimeType,i);return n||(n=this.createSegmentManager(e,t),this.XC.set(this.YC(e.mimeType,i),n)),n},e.prototype.createSegmentManager=function(e,t){return new l(this.context,e,t)},e.prototype.get=function(e,t){return this.XC.get(this.YC(e,t))},e.prototype.disposeOfType=function(e,t){this.ZC(this.YC(e,t))},e.prototype.dispose=function(){this.XC.forEach((function(e){return e.dispose()})),this.XC.clear()},e}();t.SegmentService=d;var l=function(){function e(e,t,i){this.context=e,this.segmentParser=i,this.eC=!1,this.cC=new s.SegmentLoaderPool(e,t),this.bC=new c.UrlInitSegmentProvider(e,t.mimeType),this.aC=new a.SegmentCache(e.settings.MAX_NUM_CACHED_SEGMENTS),this.dC=Promise.resolve(null)}return e.prototype.getSegment=function(e){var t=e.isInitSegment?this.fC(e).then((function(e){return h(e)})):this.gC(e);return this.dC=this.dC.catch((function(){})).then((function(){return t})),this.dC},e.prototype.fC=function(e){var t=this;return this.bC.getSegment(e).then((function(e){var i;return null===(i=t.segmentParser)||void 0===i||i.parseSegment(e),e})).catch((function(e){return t.context.logger.debug("Error during loading an init segment",e),Promise.reject(e)}))},e.prototype.gC=function(e){var t,i=this;(null===(t=e.key)||void 0===t?void 0:t.method)&&(this.eC=!0);var n=this.hC(e);return(this.iC()?this.jC(n,e):this.kC(n,e)).then((function(e){var t=e[0],n=e[1];return t.transform((function(e){return i.mC(e,n),e}),(function(){}),(function(e){return i.context.logger.debug("Loading failed",e),e.message}))}))},e.prototype.hC=function(e){var t=Promise.resolve();if(e.init){var i=this.bC.getCachedSegment(e);t=i?Promise.resolve(i):this.fC(e.init)}return t},e.prototype.iC=function(){var e;return this.context.settings.DISABLE_PARALLEL_SEGMENT_LOADING||Boolean(null===(e=this.context.sourceContext.source.drm)||void 0===e?void 0:e.clearkey)||this.eC||(0,o.isTizen2016)()},e.prototype.jC=function(e,t){var i=this;return e.then((function(e){return i.lC(t).then((function(t){return[t,e]}))}))},e.prototype.kC=function(e,t){return Promise.all([this.lC(t),e])},e.prototype.lC=function(e){var t=this.getCachedSegment(e);return null!=t?(this.context.logger.debug("Returning segment from cache for URL: ".concat(e.url)),Promise.resolve(h(t))):this.cC.load(e)},e.prototype.mC=function(e,t){t&&e.setInitSegment(t)},e.prototype.isLoading=function(e){return e?this.cC.getLoadingPeriodIds().includes(e):this.cC.getLoadingPeriodIds().length>0},e.prototype.canLoad=function(){var e=this.cC.isFreeLoaderAvailable();return this.iC()?e&&!this.bC.isLoading():e},e.prototype.cacheSegment=function(e){this.aC.add(e)},e.prototype.hasCachedSegment=function(e){return Boolean(this.getCachedSegment(e))},e.prototype.getCachedSegment=function(e){return e.isInitSegment?this.bC.getCachedSegment(e):this.aC.get(e)},e.prototype.removeCachedInitSegments=function(e){this.bC.removeCachedSegments(e)},e.prototype.clearCache=function(e){void 0===e&&(e=!0),e&&this.bC.removeCachedSegments((function(){return!0})),this.aC.clear()},e.prototype.cancel=function(){return this.cC.cancelLoading()},e.prototype.dispose=function(){this.cancel(),this.clearCache(!1),this.cC=(0,n.dispose)(this.cC),this.segmentParser=void 0,(0,n.dispose)(this.bC)},e}();function h(e){var t=new u.Stream;return t.add(e),t.end(),t}t.SegmentManager=l},47151:function(e,t,i){var n=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.AdaptationSetId=void 0,t.createAdaptationSetIdFromMimeTypeAndIndex=function(e,t,i){return new r(e,"".concat(t,"-").concat(i))};var r=function(e){function t(t,i){var n=e.call(this,t)||this;return n.Pb=i,n}return n(t,e),Object.defineProperty(t.prototype,"adaptationSetId",{get:function(){return this.Pb},enumerable:!1,configurable:!0}),t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.adaptationSetId===(null==t?void 0:t.adaptationSetId)},t.prototype.key=function(){return e.prototype.key.call(this)+"-"+this.adaptationSetId},t}(i(16197).PeriodId);t.AdaptationSetId=r},47531:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.StreamTimeService=void 0;var n=i(80813),r=i(74853),o=i(99529),a=function(){function e(e,t){this.serviceManager=e,this.sourceIdentifier=t}return Object.defineProperty(e.prototype,"QD",{get:function(){return this.serviceManager.get(n.ServiceName.SourceStoreService,this.sourceIdentifier).getState()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"RD",{get:function(){var e;return null===(e=this.QD)||void 0===e?void 0:e.streamTimeline},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SD",{get:function(){var e;return null===(e=this.QD)||void 0===e?void 0:e.buffer.bufferStateMap},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"TD",{get:function(){return this.serviceManager.get(n.ServiceName.PlayerStateService)},enumerable:!1,configurable:!0}),e.prototype.getTimeForNextSegment=function(e){var t,i,n,o,a=(0,r.findFromEnd)(this.RD[e]||[],s),u=null===(t=this.SD)||void 0===t?void 0:t[e],c=[a,(null===(i=null==u?void 0:u.loadedRanges)||void 0===i?void 0:i[u.loadedRanges.length-1])||(null===(n=null==u?void 0:u.rendererRanges)||void 0===n?void 0:n[u.rendererRanges.length-1])].filter((function(e){return e})).map((function(e){return e.end})),d=Math.max.apply(Math,c);return isFinite(d)?d:(null===(o=this.TD)||void 0===o?void 0:o.seekingOrTimeshifting)?this.TD.targetPlaybackTime:0},e.prototype.dispose=function(){},e}();function s(e){return[o.StreamTimeRangeType.Loading,o.StreamTimeRangeType.Failed].includes(e.type)}t.StreamTimeService=a},48954:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getValues=function(e){var t=[];return e.forEach((function(e){t.push(e)})),t},t.getKeys=function(e){var t=[];return e.forEach((function(e,i){t.push(i)})),t}},49440:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveContainerFormat=function(e,t,i){return i?function(e,t){var i,s=r.ModuleManager.has(o.ModuleName.ContainerMP4),c=null===(i=r.ModuleManager.get(o.ModuleName.ContainerMP4,!1))||void 0===i?void 0:i.isValidMp4;return s&&c(t)?{source:a.ContainerFormat.MP4,target:a.ContainerFormat.MP4}:n.MimeTypeHelper.isSubtitle(e)?u(e):{source:a.ContainerFormat.TS,target:a.ContainerFormat.MP4}}(e,t):u(e)};var n=i(85434),r=i(88052),o=i(62756),a=i(34795),s=i(14443);function u(e){var t=(0,s.extractContainerFormat)(e);return t?{source:t,target:t}:void 0}},49713:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentInfoMapActionType=void 0,function(e){e.SetSegmentInfos="@instance/sources/@source/playback/setSegmentInfos",e.UpdateSegmentInfos="@instance/sources/@source/playback/updateSegmentInfos"}(i||(t.SegmentInfoMapActionType=i={}))},50429:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.throwDownloadError=function(e,t,i,d,l){e.eventHandler.dispatchEvent(s.PlayerEvent.Warning,new o.PlayerWarning(a.WarningCode.PLAYBACK_DECODE_RETRIES_EXCEEDED)),e.eventHandler.fireError(function(e,t,i,o,a){if(0===i)return t&&t===u.RequestError.TimedOut||a===c.SegmentLoadingErrorReason.TIMEOUT?new r.PlayerError(n.ErrorCode.NETWORK_SEGMENT_DOWNLOAD_TIMEOUT,{segmentUrl:o.url,mimeType:o.mimeType},"Failed to load the segment: the request timed out."):new r.PlayerError(n.ErrorCode.NETWORK_ERROR,{url:o.url,statusCode:i},t);e.logger.debug(t);var s={message:t};return o.url&&(s.segment=function(e){return{url:e.url,mimeType:e.mimeType,codecs:e.codecs}}(o)),a===c.SegmentLoadingErrorReason.TIMEOUT?new r.PlayerError(n.ErrorCode.NETWORK_SEGMENT_DOWNLOAD_TIMEOUT,s,t):new r.PlayerError(n.ErrorCode.NETWORK_ERROR,s,t)}(e,t,i,d,l))};var n=i(40306),r=i(3336),o=i(25926),a=i(4224),s=i(3714),u=i(77401),c=i(65244)},50827:function(e,t){function i(e){return[e.url,e.mediaURL].filter(Boolean)}function n(e,t){return null==e?null==t:null!=t&&e.start===t.start&&e.end===t.end}Object.defineProperty(t,"__esModule",{value:!0}),t.isIdenticalSegmentInfo=function(e,t){if(void 0!==e.mediaSequence&&void 0!==t.mediaSequence)return e.mediaSequence===t.mediaSequence;var r=function(e,t){var n=i(e),r=i(t);return n.some((function(e){return r.includes(e)}))}(e,t),o=n(e.byteRange,t.byteRange),a=e.discontinuitySequenceNumber===t.discontinuitySequenceNumber;return r&&o&&a},t.isIdenticalInitSegmentInfo=function(e,t){var i=(null==e?void 0:e.url)===(null==t?void 0:t.url),r=n(null==e?void 0:e.byteRange,null==t?void 0:t.byteRange);return i&&r}},50962:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isLowLatencyConfigured=function(e){var t=e.serviceManager.get(n.ServiceName.LiveLatencyService);return(null==t?void 0:t.isConfigured())||!1};var n=i(80813)},51386:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.removeEncryptionKey=t.updateEncryptionKey=t.addEncryptionKey=void 0;var n=i(35267),r=i(92096);t.addEncryptionKey=function(e){return(0,n.createAction)(r.EncryptionKeyActionKey.AddEncryptionKey,e)},t.updateEncryptionKey=function(e){return(0,n.createAction)(r.EncryptionKeyActionKey.UpdateEncryptionKey,e)},t.removeEncryptionKey=function(e){return(0,n.createAction)(r.EncryptionKeyActionKey.RemoveEncryptionKey,{keyUri:e})}},51888:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DeferredReject=void 0;var i=function(){function e(){this.P9=!1}return e.prototype.reject=function(e){this.P9=!0,this.Q9=e},e.prototype.next=function(e){return this.P9?Promise.reject(this.Q9):e()},e}();t.DeferredReject=i},52090:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPlayerController=void 0,t.isBufferChangeRequired=Y,t.getDefaultMaxStartupBuffer=q;var n=i(80813),r=i(56481),o=i(3714),a=i(75375),s=i(44468),u=i(91678),c=i(23690),d=i(87827),l=i(48488),h=i(15971),p=i(77179),f=i(93204),g=i(34047),m=i(79721),v=i(78877),y=i(87244),S=i(85434),T=i(15487),b=i(19274),M=i(88052),I=i(62756),P=i(35046),A=i(12030),R=i(87222),E=i(13422),C=i(16197),_=i(84696),B=i(14443),N=i(58784),O=i(11536),k=i(36193),L=i(62198),D=i(42208),x=i(88935),w=i(13114),H=i(39523),z=i(99529),W=i(52602),F=i(69102),U=i(60729),V=i(42614),j=function(){function e(e,t){var i=this;this.fz={},this.Ez=function(e){if(i.ez.isBufferClearingOngoing())X(e,i.Fz());else{if(i.vz.trackSegment(e),i.Dz(e))return i.Yz.logger.debug("Dropping segment ".concat(e.getUrl())),void X(e,i.Fz());var t=e.getMimeType(),n=i.fz[t];n&&i.Gz(n)&&i.Az(e.getPeriodId()),i.ez.addSegment(e).then((function(){var e;null===(e=i.rz)||void 0===e||e.beat()})).catch((function(e){i.Tz&&i.Tz.debug(e)})),i.Zz(e)}},this.nA=function(){var e=i.ez.getBufferedRangesMap(),t=Math.max.apply(Math,Object.values(e).filter((function(e){return e.length>0})).map((function(e){return e[e.length-1].start})));i.seek(t,!1,!0)},this.oA=function(){var e;i.qA(),i.bz&&i.bA(),i.mA(),i.pA(),i.bz&&(i.getAllSegmentControllers().forEach((function(e){return e.updateMpd()})),null===(e=i.tz)||void 0===e||e.onManifestUpdate()),i.Yz.serviceManager.get(n.ServiceName.TimedMetadataService).parseEventStream()},this.CA=function(){(i.hasStreamEnded()||i.isInitialized()&&!i.jz.isPlaying())&&i.start()},this.IA=function(e){var t;if(e){if(e.success||408===e.httpStatus){var n=i.fz[e.mimeType];n&&i.JA(e,n)}e.success||null===(t=i.rz)||void 0===t||t.beat()}},this.KA=function(){i.getAllSegmentControllers().every((function(e){var t=i.sz.getTimeForNextSegment(e.getMimeType());return e.hasNext(t)}))?i.Tz.debug("ignoring ended event in firePlaybackFinishedEvent as there are more segments available"):i.iz.isLastPeriod(i.kz.getCurrentPlayingPeriodId())?i.ez.hasFutureBufferBlockData()||(i.stop(),i.Tz.debug("Stopping buffer controller"),i.ez.stop(!0),i.jz.transitionToStoppedState()):i.Tz.debug("ignoring ended event in firePlaybackFinishedEvent as there is a future period")},this.Yz=e,this.Tz=e.logger,this.Uz=e.settings,this.Vz=e.bufferSettings,this.Wz=e.eventHandler,this.Xz=e.renderer,this.Zz=t,this.bz=!1,this.az=null,this.cz={},this.dz=0,this.nz=!1,this.mz=!1,this.wz=new O.PlayerConfigEnhancer(e)}return e.prototype.Az=function(e){this.ez.addRequiredMediaType(e,"video/mp4"),this.ez.addRequiredMediaType(e,"audio/mp4")},e.prototype.Bz=function(){var e=this,t=this.iz.isLive(),i=t?this.getTimeShift():this.Xz.getCurrentTime();t?this.timeShift(i,(function(){}),!0).catch((function(t){return e.Yz.logger.debug("TimeShift failed",t)})):this.seek(i,!1,!1,!0)},e.prototype.Cz=function(){this.Bz(),this.Yz.logger.debug("manifest update interrupted by DRM key status change")},e.prototype.Dz=function(e){var t=S.MimeTypeHelper.isSubtitle(e.getMimeType()),i=this.Yz.sourceContext.technology.streaming===s.StreamType.Hls,n=(0,p.getStartTimeOffset)(this.Fz().getState())+this.iz.getDuration(),r=this.isVod()&&e.getPlaybackTime()>=n,o=this.nz||r,a=this.iz.isRepresentationExcluded(e.getRepresentationId());return!t&&!i&&o||a},e.prototype.Fz=function(){return this.Yz.serviceManager.get(n.ServiceName.SourceStoreService,this.Yz.sourceContext.sourceIdentifier)},e.prototype.Gz=function(e){var t=g.CodecStringHelper.getExtractedCodecStrings(e.getCodecs());return Boolean(t.video&&t.audio)},e.prototype.getMaxTimeShift=function(){return this.getTimeShiftHandler().getMaxTimeShift()},e.prototype.Hz=function(){this.Wz.off(o.PlayerEvent.SegmentRequestFinished,this.IA)},e.prototype.Iz=function(){var e=this,t=this.Yz.store;!this.zz&&t&&(this.zz=(0,f.subscribe)(t)((function(e){if(e)return(0,d.getPlayerState)(e).seekingProcess}),(function(t,i){return t&&i&&e.FA(t,i)})))},e.prototype.Jz=function(){var e=this.Fz();!this.xz&&e&&(this.xz=(0,f.subscribe)(e)(L.getManifest,this.oA,(function(e,t){return e.isInitialized&&!t.isInitialized})))},e.prototype.Kz=function(){this.xz&&(this.xz(),this.xz=null)},e.prototype.Lz=function(){var e=this.Fz();!this.yz&&e&&(this.yz=(0,f.subscribe)(e)(x.getPlayingTracksState,this.CA,x.wasSwitchingToPeriodIdReset))},e.prototype.Mz=function(){this.yz&&(this.yz(),this.yz=void 0)},e.prototype.Nz=function(e){var t,i,n=(0,E.getMimeTypeForAdaptationSet)(e);if(S.MimeTypeHelper.isAV(n)){this.Yz.store.dispatch((0,u.initializeMetricsForMimeType)(n,this.Yz.settings)),this.Fz().dispatch((0,k.setMediaTypeAction)(e._internalId,(0,_.resolveMediaTypes)(e))),this.cz[n]=(0,E.getCodecsFromAdaptationSet)(e);var r=this.kz.getCurrentPlayingPeriodId();this.fz[n]=new B.SegmentController(this.Yz,this.Ez,n,this.cz[n],e.isTransmuxingRequired,this.gz,null!==(t=e._periodId)&&void 0!==t?t:r,this.Fz()),null===(i=this.tz)||void 0===i||i.updateSegmentControllers(this.fz),this.oz&&this.fz[n].setTransmuxer(this.oz),r&&this.Xz.storeDrmInitDataFromManifest(e),this.Yz.segmentInfoService&&this.Yz.segmentInfoService.setSegmentControllers(Object.values(this.fz))}},e.prototype.updatePeriodForTimeshift=function(e,t,i){var n,r=this.kz.getCurrentPlayingPeriodId();r||this.kz.setCurrentPlayingPeriodId(e),this.kz.getCurrentLoadingPeriodId()!==e&&i&&this.switchLoadingPeriodForAllMedia(e),t&&r!==e&&(this.Yz.logger.debug("Updating current playing period to ".concat(e)),this.kz.setCurrentPlayingPeriodId(e)),r!==e&&(null===(n=(0,h.getSourceStore)(this.Yz))||void 0===n||n.dispatch((0,D.periodSwitchStarted)(e)))},e.prototype.Oz=function(e){var t=e.AdaptationSet.find((function(e){return S.MimeTypeHelper.isVideo(e._mimeType)}));t&&this.ez.addRequiredMediaType(e._id,t._mimeType);var i=e.AdaptationSet.find((function(e){return S.MimeTypeHelper.isAudio(e._mimeType)}));i&&this.ez.addRequiredMediaType(e._id,i._mimeType)},e.prototype.Pz=function(e){var t=this;e.AdaptationSet.filter((function(e){return S.MimeTypeHelper.isSubtitle(e._mimeType)})).forEach((function(i){t.ez.addRequiredMediaType(e._id,i._mimeType)}))},e.prototype.aA=function(e){this.Oz(e),this.Pz(e)},e.prototype.bA=function(){var e=this;this.iz.getAllPeriods().forEach((function(t){e.aA(t),e.ez.checkIfEndOfBufferReached(e.Uz.END_OF_BUFFER_TOLERANCE)}))},e.prototype.cA=function(){var e=this;return this.az?this.az:!0===this.bz||null===this.iz.getManifest()?this.az=Promise.resolve():(this.dA(),this.cz={},this.az=this.Xz.ready().then((function(){return e.gA()})))},e.prototype.dA=function(){var e=this;this.fz&&(Object.keys(this.fz).forEach((function(t){return e.fz[t].dispose()})),this.fz={})},e.prototype.eA=function(){var e=this;if(M.ModuleManager.has(I.ModuleName.ContainerTS)){var t=M.ModuleManager.get(I.ModuleName.ContainerTS);this.getAllSegmentControllers().filter((function(e){return e.isTransmuxerRequired()})).forEach((function(i){e.oz=e.oz||new t.WebWorkerTransmuxer(e.Yz,e.fA()),i.setTransmuxer(e.oz)})),this.pz&&this.pz.setTransmuxer(this.oz)}},e.prototype.fA=function(){return this.getAllSegmentControllers().filter((function(e){return S.MimeTypeHelper.isAV(e.getMimeType())})).length>1},e.prototype.gA=function(){this.kz.setInitialPeriod(),this.lA(),this.bA();var e=this.kz.getCurrentPlayingPeriod()||this.iz.getFirstPeriod();e&&this.iA(e),this.hA(),this.eA(),this.bz=!0},e.prototype.hA=function(){var e,t,i,n,r=this.getAudioSegmentController();if(this.pz){var o=null!==(i=null===(t=null===(e=null==r?void 0:r.getCurrentLangObj)||void 0===e?void 0:e.call(r))||void 0===t?void 0:t.lang)&&void 0!==i?i:null===(n=(0,R.getPreferredLanguage)("audio/mp4"))||void 0===n?void 0:n.language;this.pz.enableForcedSubtitle(o)}},e.prototype.iA=function(e){var t,i=this;this.jA(null!==(t=null==e?void 0:e.AdaptationSet)&&void 0!==t?t:[]).forEach((function(e){return i.kA(e)}))},e.prototype.jA=function(e){var t,i,n,r=e.find((function(e){return S.MimeTypeHelper.isAudio(e._mimeType)})),o=e.find((function(e){return S.MimeTypeHelper.isVideo(e._mimeType)})),a=(null!==(i=null===(t=null==o?void 0:o.ContentComponent)||void 0===t?void 0:t.length)&&void 0!==i?i:0)>1;if(!r||!o||!a)return e;var s=(0,R.getHlsDefaultLanguage)(r._mimeType,this.Fz().getState()),u=null===(n=o.ContentComponent)||void 0===n?void 0:n.find((function(e){return e._lang===(null==s?void 0:s.language)&&e._id===(null==s?void 0:s.name)}));return s&&u?[o]:e},e.prototype.kA=function(e){var t=(0,E.getMimeTypeForAdaptationSet)(e);(0,S.isMediaTypeContained)(this.cz,t)||this.Nz(e)},e.prototype.lA=function(){this.ez=new P.BufferController(this.Yz,this.nA,this.iz.getTotalDuration(),this.kz.getCurrentPlayingPeriodId())},e.prototype.getBufferLevel=function(e,t,i,n){return void 0===n&&(n=!0),this.ez?this.ez.getOverallBufferLevel(e,t,i,n):0},e.prototype.mA=function(){var e=this;this.kz.shouldHandleDroppedOutPeriod()&&(this.kz.isPlayingPeriodDroppedOut()?(this.Tz.debug("Playing period dropped out of the manifest, timeshifting to current position"),this.timeShift(this.getTimeShift()).catch((function(t){return e.Yz.logger.debug("TimeShift failed",t)}))):this.kz.isLoadingPeriodDroppedOut()&&(this.Tz.debug("Current loading period (".concat(this.kz.getCurrentLoadingPeriodId(),") ")+"dropped out of the manifest, switching to first available one"),this.getAllSegmentControllers().forEach((function(e){return e.invalidateOngoingRequests()})),this.switchLoadingPeriodForAllMedia(this.iz.getFirstPeriod()._id)))},e.prototype.pA=function(){var e=this;this.Yz.serviceManager.maybeCall(n.ServiceName.ThumbnailService,(function(t){e.Yz.sourceContext.source&&e.Yz.sourceContext.source.thumbnailTrack||t.addThumbnails(e.iz.getAllDashThumbnailSources())}))},e.prototype.qA=function(){var e=this.iz.isLive(),t=this.Yz.serviceManager.get(n.ServiceName.StartOffsetService),i=this.iz.hasSuggestedStartPosition();if(e){var r=this.iz.getTimeShiftBufferDepthSeconds();0!==r&&(this.qz.expirationTimeInSeconds=r),i&&(t.manifestStartOffset=this.iz.getLiveStartOffset(),this.rA())}else i&&(t.manifestStartOffset=this.iz.getVodStartOffset())},e.prototype.rA=function(){if(!this.isInitialized()){var e=Math.abs(this.iz.getLiveStartOffset(!1));e=e>0?e:this.iz.getMaxSegmentDuration(),this.Yz.bufferSettings.setDistanceToLiveEdge(e)}},e.prototype.terminate=function(){var e,t,i=this;this.Tz.debug("stopping playback"),this.stop(),this.getAllSegmentControllers().forEach((function(e){return e.stop()})),this.ez&&this.ez.stop(!0),this.oz=(0,r.dispose)(this.oz),this.tz=(0,r.dispose)(this.tz),this.vz=(0,r.dispose)(this.vz),(0,r.dispose)(this.kz),this.uz=null,this.Xz.off(b.MediaElementEvent.ended,this.KA);var n=this.Xz.shutdown(!1).catch((function(e){return i.Tz.debug("Got an error on shutdown",{message:e.message}),Promise.resolve()}));return this.Hz(),this.Mz(),this.bz=!1,null===(e=this.kz)||void 0===e||e.setCurrentPlayingPeriodId(void 0),this.cz=null,this.Yz.store.dispatch((0,l.resetDrmKidErrors)()),null===(t=this.iz)||void 0===t||t.resetExcludedRepresentations(),this.dA(),n},e.prototype.dispose=function(){this.tz=(0,r.dispose)(this.tz),this.ez=(0,r.dispose)(this.ez),(0,r.dispose)(this.kz);try{this.Hz()}catch(e){}this.Kz(),this.Mz(),this.dA(),this.zz&&this.zz(),this.pz=null,this.rz=null,this.sz=null,this.fz=null,this.Uz=null,this.Vz=null,this.Wz=null,this.Xz=null,this.cz=null},e.prototype.sA=function(){var e=this.Yz.sourceContext.sourceIdentifier;this.iz=this.Yz.serviceManager.get(n.ServiceName.ManifestService,e),this.jz=this.Yz.serviceManager.get(n.ServiceName.PlayerStateService),this.pz=this.Yz.serviceManager.get(n.ServiceName.SubtitleService,e),this.qz=this.Yz.serviceManager.get(n.ServiceName.MetadataParsedService),this.gz=this.Yz.serviceManager.get(n.ServiceName.ManifestLoadingService,e),this.rz=this.Yz.serviceManager.get(n.ServiceName.HeartbeatService,e),this.sz=this.Yz.serviceManager.get(n.ServiceName.StreamTimeService),this.hz=this.Yz.serviceManager.get(n.ServiceName.ManifestUpdateSchedulingService,e)},e.prototype.init=function(e){var t,i=this,r=this.Fz();this.kz=new N.PeriodSwitchTracker(this.Yz),this.Lz(),this.Iz(),this.lz=!1,this.Yz.store.dispatch((0,l.resetDrmKidErrors)()),this.sA(),r&&!this.vz&&(this.vz=new A.DrmKidErrorHandler(this.Yz,(function(){return i.Cz()}))),this.Xz.on(b.MediaElementEvent.ended,this.KA);var o=this.hz.isInitiated()?Promise.resolve():this.hz.init(e.url.toString());return e.config.drm&&(null===(t=this.Yz.serviceManager.get(n.ServiceName.DrmService))||void 0===t||t.resolveDrmSystemFromSourceConfig(e.config.drm)),o.then((function(){return i.Jz(),i.oA(),i.wz.adjustToCurrentSource(i.Yz,i.iz),i.bz?Promise.resolve():i.cA()}))},e.prototype.stop=function(){var e;this.Tz.debug("Stopping main timer"),null===(e=this.rz)||void 0===e||e.stop(),this.az=null,this.Wz.off(o.PlayerEvent.SegmentRequestFinished,this.IA),this.Kz()},e.prototype.isOneLoaderReady=function(){return this.getAllSegmentControllers().some((function(e){return e.canLoad()}))},e.prototype.areAllLoadersReady=function(){return this.getAllSegmentControllers().every((function(e){return e.canLoad()}))},e.prototype.isVod=function(){return!this.iz.isLive()},e.prototype.tA=function(){return this.jz.isPaused()&&this.Uz.STOP_DOWNLOAD_ON_PAUSE&&this.iz.isLive()},e.prototype.uA=function(e){var t=Object.keys(this.fz).find((function(t){return S.MimeTypeHelper.isAV(t)&&e!==t}));if(!t)return!1;if((0,U.isPlayingLowLatencyHls)(this.Yz))return!1;if(this.lz)return S.MimeTypeHelper.isAudio(t);var i=this.fz[t],n=this.sz.getTimeForNextSegment(t);if(i.hasNext(n)&&!i.hasDownloadError&&!i.hasDelayedSegmentsInTransmuxer()){var r=this.getBufferRelevantTime(),o=this.zA(e,r),a=this.zA(t,r);return this.Uz.DISABLE_PARALLEL_SEGMENT_LOADING&&o===a?S.MimeTypeHelper.isVideo(t):!this.vA(t,a)&&n<this.sz.getTimeForNextSegment(e)}return i.getCurrentPeriodId()!==this.fz[e].getCurrentPeriodId()},e.prototype.vA=function(e,t){var i=S.MimeTypeHelper.getMediaType(e);return t>=this.Vz.getForwardTargetLevel(i)},e.prototype.wA=function(){var e=this,t=this.getAllSegmentControllers(),i=this.ez.hasPendingSegments(),n=t.map((function(e){return e.getMimeType()})),r=t.some((function(e){return e.hasPendingSegments()})),o=n.some((function(t){return e.Xz.isDataBeingAppended(t)}));return!r&&!i&&!o},e.prototype.shouldSuspendHeartbeat=function(){return!this.isOneLoaderReady()||this.tA()||this.ez.isBufferClearingOngoing()||this.mz},e.prototype.getActiveSegmentControllers=function(){var e=this;return this.getAllSegmentControllers().filter((function(t){return e.xA(t)}))},e.prototype.xA=function(e){var t=this.kz.getCurrentLoadingPeriodId(),i=this.sz.getTimeForNextSegment(e.getMimeType());return e.canLoad()&&(e.hasNext(i)||e.hasPendingSegments(t))&&!this.uA(e.getMimeType())},e.prototype.shouldClearSubtitleServiceBuffers=function(){var e;return!this.jz.seekingOrTimeshifting&&Boolean(null===(e=this.pz)||void 0===e?void 0:e.hasSubtitles())},e.prototype.clearSubtitleServiceBuffers=function(){var e;null===(e=this.pz)||void 0===e||e.clearBuffersUntil(this.Xz.getCurrentTime()-10)},e.prototype.areMediaTypesFinalForPlayingPeriod=function(){var e=this.kz.getCurrentPlayingPeriodId();return this.ez.areBufferBlockMediaTypesFinalForPeriod(e)},e.prototype.maybeStop=function(){var e=this.iz.isManifestFinalized(),t=this.iz.isLastPeriod(this.kz.getCurrentLoadingPeriodId());e&&t&&(this.ez.stop(!1),this.wA()&&(this.signalEndOfStream(),this.stop()))},e.prototype.yA=function(){var e=this;if(!this.jz.isPlay()||this.jz.hasBeenPlaying)return!1;var t=0!==this.Yz.settings.MAX_STARTUP_BUFFER?this.Yz.settings.MAX_STARTUP_BUFFER:q();if(t<=0||t===1/0)return!1;if(this.ez.isSegmentStoreWaitingForSegments())return!1;var i=Object.keys(this.cz),n=this.getBufferRelevantTime(),r=i.map((function(t){return e.zA(t,n)})),o=Math.min.apply(Math,r),a=this.Fz(),s=(0,w.getDrmState)(null==a?void 0:a.getState()),u=o>=(t=Math.max(t,this.Yz.settings.STARTUP_THRESHOLD,(0,v.getBufferEndSafetyMargin)(s),(0,V.getMinSafeStartupBuffer)(this.Yz,i)));return u&&this.Tz.debug("Max startup buffer of ".concat(t," reached, delaying segment loading until playback has started"),{currentTime:n,maxStartupBuffer:t,bufferLevels:r}),u},e.prototype.getNextSegment=function(e,t){if(e.canLoad()&&this.Xz.shouldContinueBuffering()&&!this.yA()){var i=S.MimeTypeHelper.getMediaType(e.getMimeType()),r=this.Vz.getForwardTargetLevel(i),o=this.zA(e.getMimeType(),this.getBufferRelevantTime());o>=r||(this.Yz.serviceManager.get(n.ServiceName.AdaptationService).addSample(e.getMimeType(),{bufferTargetLevel:r,bufferLevel:o}),e.hasNext(t)&&e.getNext(t))}},e.prototype.getBufferRelevantTime=function(){return this.jz.seekingOrTimeshifting?this.jz.targetPlaybackTime:this.Xz.getCurrentTime()},e.prototype.zA=function(e,t){return this.getBufferLevel(e,t,s.BufferType.ForwardDuration)},e.prototype.isLoadingLastPeriod=function(){return this.kz.isLoadingLastPeriod()&&!this.lz},e.prototype.switchLoadingPeriod=function(){if(this.lz){var e=this.getAudioSegmentController(),t=e.getCurrentPeriodId(),i=this.iz.getNextPeriod(t)._id;this.BA(i),e.getCurrentPeriodId()===this.kz.getCurrentLoadingPeriodId()&&(e.isTransmuxerRequired()&&e.getTransmuxer()&&(e.getTransmuxer().dispose(),e.setTransmuxer(this.oz)),this.lz=!1,this.Tz.debug("The audio SegmentController caught up to the overall loading period again."))}else{var n=this.iz.getNextPeriod(this.kz.getCurrentLoadingPeriodId());n&&this.switchLoadingPeriodForAllMedia(n._id)}},e.prototype.switchLoadingPeriodForAllMedia=function(e){var t=this;e!==this.kz.getCurrentLoadingPeriodId()&&(this.lz=!1,this.AA(e),this.getAllSegmentControllers().filter((function(t){return t.getCurrentPeriodId()!==e})).forEach((function(i){i.switchPeriod(e),t.Xz.storeDrmInitDataFromManifest(i.getAdaptationSetForPeriodId(e))})),this.kz.setCurrentLoadingPeriodId(e))},e.prototype.AA=function(e){var t,i,n=this;(null!==(i=null===(t=this.iz.getPeriod(new C.PeriodId(e)))||void 0===t?void 0:t.AdaptationSet)&&void 0!==i?i:[]).forEach((function(e){return n.kA(e)})),this.resetTransmuxer()},e.prototype.BA=function(e){var t=this.getAudioSegmentController(),i=t.getCurrentPeriodId();t.resetTransmuxer(),t.switchPeriod(e),this.Tz.debug("Switched audio loading period from ".concat(i," to ").concat(e))},e.prototype.isAVCompletelyLoaded=function(){var e=this.getAllSegmentControllers().some((function(e){return e.hasPendingSegments()}))||this.ez.hasPendingSegments();return this.iz.isManifestFinalized()&&!e},e.prototype.getBufferedRanges=function(e){return void 0===e&&(e=!1),this.ez.getBufferedRangesMap(e)},e.prototype.resetTransmuxer=function(){this.oz&&(this.oz.dispose(),this.oz=null),this.eA()},e.prototype.DA=function(){this.ez.hasStopped()&&this.ez.restart()},e.prototype.EA=function(e,t,i,n){if(i&&0===e)return!1;var r=e<this.Xz.getCurrentTime()&&this.Yz.settings.CLEAR_BUFFERS_ON_SEEKING_BACKWARDS;return!t&&(!this.ez.isInBufferedRange(e)||r)||n},e.prototype.FA=function(e,t){var i;if(-1===e.targetTime&&t.targetTime>=0)null===(i=this.jz)||void 0===i||i.transitionToSeekedState(t.issuer!==a.STARTUP_ISSUER_NAME);else{var n=e.targetTime!==t.targetTime,r=e.targetTime>=0;n&&r&&this.seek(e.targetTime,e.issuer===a.STARTUP_ISSUER_NAME)}},e.prototype.seek=function(e,t,i,n){var r,o=this;if(void 0===t&&(t=!1),void 0===i&&(i=!1),void 0===n&&(n=!1),this.ez){this.DA(),this.dz++;var s=this.dz,u=null!==(r=this.iz.getPeriodIdForTime(e))&&void 0!==r?r:m.DEFAULT_PERIOD_ID;this.GA(u);var l,p,f=this.kz.getCurrentPlayingPeriodId();this.Tz.debug("seek from current period (".concat(f,") to target period ")+"(".concat(u,") - seek time in period is: ").concat(e)),this.ez.readyToSeek().then((function(){var r;if(p=o.EA(e,i,t,n),l=o.kz.getCurrentLoadingPeriodId()!==u&&p,f!==u&&(null===(r=(0,h.getSourceStore)(o.Yz))||void 0===r||r.dispatch((0,D.periodSwitchStarted)(u))),p&&o.ez.isBufferAvailable())return o.HA()})).then((function(){return o.bz?(l&&o.switchLoadingPeriodForAllMedia(u),p&&o.getAllSegmentControllers().forEach((function(t){t.setAdaptionLogicStartupPhase(),t.seekTo(e)})),(t?Promise.resolve():o.start()).then((function(){o.hasStarted()&&o.rz.beat(),o.ez.setCurrentTime(e).then((function(t){var i;o.Yz.isDisposed||(o.dz===s?(o.Tz.debug("Successfully seeked to ".concat(t)),null===(i=(0,h.getSourceStore)(o.Yz))||void 0===i||i.dispatch((0,D.periodSwitchFinished)(u)),o.Yz.store.dispatch((0,c.updateSeekingProcess)({targetTime:-1,issuer:"",isInitial:!1,seekableRange:{start:-1,end:-1}}))):function(e){var t=e.getState();if(!t)return!1;var i=(0,d.getPlayerState)(t).seekingProcess.issuer;return i!==a.STARTUP_ISSUER_NAME&&""!==i}(o.Yz.store)&&o.Yz.logger.debug("Seek to ".concat(e," has finished but a newer operation has been started")))})).catch((function(e){o.Tz.debug("Failed to set currentTime on seek",e)}))}))):(o.Tz.debug("Aborting seek as MediaPlayerController has been terminated!"),Promise.resolve())}))}},e.prototype.GA=function(e){var t=this;void 0===this.kz.getCurrentPlayingPeriodId()&&(this.Tz.debug("current period is undefined, using seek target period "+e),this.kz.setCurrentPlayingPeriodId(e),this.resetTransmuxer(),this.getAllSegmentControllers().forEach((function(e){e.switchPeriod(t.kz.getCurrentPlayingPeriodId()),S.MimeTypeHelper.isAV(e.getMimeType())&&t.Xz.storeDrmInitDataFromManifest(e.getCurrentAdaptationSet())})),this.kz.setCurrentLoadingPeriodId(this.kz.getCurrentPlayingPeriodId()))},e.prototype.HA=function(){var e=this;return this.Yz.logger.debug("Clearing buffer on seek"),this.nz=!1,this.getAllSegmentControllers().forEach((function(e){return e.cancelLoading()})),this.ez.clearBuffers().catch((function(){e.Tz.debug("Failed to clear buffers on seek, carrying on regardless")}))},e.prototype.getAllSegmentControllers=function(){return Object.values(this.fz||{})},e.prototype.getAudioSegmentController=function(){return this.getAllSegmentControllers().find((function(e){return S.MimeTypeHelper.isAudio(e.getMimeType())}))},e.prototype.JA=function(e,t){var i,r;if(!(e.isInit||!e.success&&this.jz.seekingOrTimeshifting)){var o=S.MimeTypeHelper.getMediaType(t.getMimeType()),a=this.getBufferLevel(t.getMimeType(),this.Xz.getCurrentTime(),s.BufferType.ForwardDuration),u=this.Vz.getForwardTargetLevel(o);null===(r=null===(i=this.Yz.serviceManager)||void 0===i?void 0:i.get(n.ServiceName.AdaptationService))||void 0===r||r.addSample(t.getMimeType(),{bufferTargetLevel:u,bufferLevel:a,segmentDuration:e.duration,segmentDownloadDuration:e.downloadTime,downloadCancelled:!e.success})}},e.prototype.signalEndOfStream=function(e){void 0===e&&(e=!0),this.isVod()&&(this.nz||(this.nz=!0,this.ez.setEndOfStream(!0),e&&this.stop()),this.ez.isStarted()&&this.ez.stop())},e.prototype.start=function(){var e=this;return this.hasStarted()?Promise.resolve():this.cA().then((function(){var t;e.ez.hasStreamEnded()&&(e.seek((0,p.getStartTimeOffset)(e.Fz().getState())),e.getAllSegmentControllers().forEach((function(e){return e.resetTransmuxer()}))),e.ez.isStarted()||e.ez.restart(),e.getAllSegmentControllers().filter((function(e){return S.MimeTypeHelper.isAV(e.getMimeType())})).forEach((function(t){return e.Xz.storeDrmInitDataFromManifest(t.getCurrentAdaptationSet())})),e.Tz.debug("Starting main timer"),e.nz=!1,null===(t=e.rz)||void 0===t||t.start(),e.Jz(),e.Wz.on(o.PlayerEvent.SegmentRequestFinished,e.IA)}))},e.prototype.maybeTransitionToPausedState=function(e){(0,y.isSwitchingBufferBlocks)(this.Fz())?this.Yz.logger.debug("Ignoring transition to Paused because buffer block switch is ongoing"):this.jz.transitionToPausedState(!0,e,!0)},e.prototype.LA=function(e){var t=this;return Promise.all(e.map((function(e){return t.ez.clearCacheForMimeType(e),t.ez.clearBuffer(e)}))).then((function(){}))},e.prototype.MA=function(e,t){var i=this;return this.ez.setEndOfStream(!1).then((function(){var n=i.LA(e.getSourceBufferTypes());return e.getCurrentPeriodId()!==i.kz.getCurrentPlayingPeriodId()?i.UA(e):e.getCurrentPeriodId()!==i.kz.getCurrentLoadingPeriodId()&&i.kz.setCurrentLoadingPeriodId(e.getCurrentPeriodId()),e.setAdaptionLogicStartupPhase(),e.seekTo(t),i.start().catch((function(){return i.Tz.debug("Could not restart stopped MPC after audio track switch")})),n.then((function(){i.Xz.setCurrentTime(t).catch((function(e){return i.Tz.debug("Failed to set currentTime on audio track switch",e)}))})).catch((function(e){return i.Tz.debug("Failed to attempt to restore playback after audio track switch",e)}))}))},e.prototype.setAudio=function(e){var t,i=this,n=this.getAvailableAudio(this.kz.getCurrentPlayingPeriodId()),r=n.find((function(t){return t.id===e}));if(!this.bz||!r)return Promise.reject(null);var o=null===(t=this.getAudio())||void 0===t?void 0:t.id,a=n.find((function(e){return e.id===o}));if(!a||o===e)return Promise.reject(o);var s=Object.keys(this.fz),u=s.find(S.MimeTypeHelper.isAudio)||s.find(S.MimeTypeHelper.isVideo),c=this.iz.getAdaptationSet(a.adaptationSetId),d=this.iz.getAdaptationSet(r.adaptationSetId);return c&&d&&u?(this.mz=!0,this.OA(c,d,u).then((function(e){return i.PA(c,d,r,e)})).then((function(e){return i.NA(e,r.id)})).then((function(e){return i.SA(e,r)})).finally((function(){return i.mz=!1}))):Promise.reject("Did not find matching adaptation set")},e.prototype.NA=function(e,t){var i=this;return Object.keys(e).some(S.MimeTypeHelper.isAudio)&&function(e){var t=M.ModuleManager.get(I.ModuleName.HLS,!1),i=null==t?void 0:t.M3u8Loader;return void 0!==i&&e instanceof i}(this.gz)?this.gz.updateAdaptationSet(t).then((function(){return i.getAllSegmentControllers().forEach((function(e){return e.updateMpd()}))})).then((function(){return e})):Promise.resolve(e)},e.prototype.OA=function(e,t,i){var n,r=this,o=Y(t,e),a=S.MimeTypeHelper.isVideo(t._mimeType)||S.MimeTypeHelper.isVideo(e._mimeType),s=!(0,F.hasContentProtection)(e.ContentProtection,t.ContentProtection);if(a||!o&&!s)return Promise.resolve(((n={})[t._mimeType]="",n));var u=Object.keys(this.fz).find(S.MimeTypeHelper.isVideo);return this.RA(i,t).then((function(){return s&&u?r.LA([u]).then((function(){var e,t=r.fz[u],i=r.kz.getCurrentPlayingPeriodId();t.getCurrentPeriodId()!==i&&r.fz[u].switchPeriod(i),r.fz[u].seekTo(r.Xz.getCurrentTime()),null===(e=r.tz)||void 0===e||e.updateSegmentControllers(r.fz)})):Promise.resolve()})).then((function(){return r.ez.changeBufferType(t._mimeType,r.cz[t._mimeType],s)}))},e.prototype.PA=function(e,t,i,n){var r=this;return S.MimeTypeHelper.isVideo(t._mimeType)||S.MimeTypeHelper.isVideo(e._mimeType)?this.LA([e._mimeType,t._mimeType]).then((function(){var n=S.MimeTypeHelper.isVideo(t._mimeType);return r.oz.setShouldExpectSeparateAvSegments(!n),n?(r.QA(e),Promise.resolve()):(r.kA(t),r.TA(i,e._mimeType))})).then((function(){return n})):Promise.resolve(n)},e.prototype.QA=function(e){var t;if(e){var i=e._mimeType,n=this.fz[i];n.cancelLoading(),n.dispose(),delete this.fz[i],delete this.cz[i],null===(t=this.tz)||void 0===t||t.updateSegmentControllers(this.fz),this.Fz().dispatch((0,k.removeActiveTrackAction)(e._internalId)),this.Yz.segmentInfoService&&this.Yz.segmentInfoService.setSegmentControllers(Object.values(this.fz))}},e.prototype.RA=function(e,t){var i=this,n=this.fz[e];return this.QA(n.getCurrentAdaptationSet()),this.LA([e]).then((function(){return i.Nz(t),t._mimeType}))},e.prototype.SA=function(e,t){var i=this;return Promise.all(Object.keys(e).map((function(e){return i.TA(t,e)}))).then((function(){}))},e.prototype.TA=function(e,t){if(this.pz&&this.pz.enableForcedSubtitle(e.lang),this.fz[t].setCurrentLangObj(e),this.fz[t].cancelLoading(),this.hasStarted()||this.nz){var i=this.getBufferRelevantTime();return this.MA(this.fz[t],i)}return Promise.resolve()},e.prototype.getAudio=function(){if(this.bz){var e=void 0,t=Object.keys(this.fz).find((function(e){return S.MimeTypeHelper.isAudio(e)}));if(t&&(e=this.fz[t].getCurrentLangObj()),!e){var i=Object.keys(this.fz).find((function(e){return S.MimeTypeHelper.isVideo(e)}));if(i&&this.fz[i].getSourceBufferTypes()){var n=this.fz[i];if(n.getSourceBufferTypes().some((function(e){return S.MimeTypeHelper.isAudio(e)}))){var r=n.getCurrentAdaptationSet()._internalId;e=this.getAvailableAudio(this.kz.getCurrentPlayingPeriodId()).find((function(e){return e.adaptationSetId===r}))||n.getCurrentLangObj()}}}return e||null}return null},e.prototype.UA=function(e){if(this.Gz(e))this.switchLoadingPeriodForAllMedia(this.kz.getCurrentPlayingPeriodId());else{if(this.Tz.debug("audio needs to load previous period(s) and catch up to the overall loading period"),e.isTransmuxerRequired()){var t=M.ModuleManager.get(I.ModuleName.ContainerTS);e.setTransmuxer(new t.WebWorkerTransmuxer(this.Yz,this.fA()))}this.lz=!0,this.BA(this.kz.getCurrentPlayingPeriodId())}},e.prototype.getPlaybackRepresentation=function(e){for(var t in this.fz)if(this.fz[t]&&t.includes(e))return this.Yz.serviceManager.get(n.ServiceName.TimedMetadataService).getPlaybackRepresentation(t)},e.prototype.getTimeShift=function(){return this.getTimeShiftHandler().getTimeShift()},e.prototype.getTimeShiftLiveEdge=function(){return this.iz.isLive()?this.getTimeShiftHandler().getTimeShiftLiveEdge():0},e.prototype.getPlaybackTimeForTimeShiftOffset=function(e){return this.getTimeShiftHandler().calculatePlaybackTimeForTimeShiftOffset(e)},e.prototype.getTimeShiftHandler=function(){return this.tz||(this.tz=new W.TimeShiftHandler(this.Yz,this,this.ez,this.fz)),this.tz},e.prototype.timeShift=function(e,t,i){return void 0===i&&(i=!1),this.getTimeShiftHandler().timeShift(e,t,i)},e.prototype.getAvailableAudio=function(e){return this.iz.getAvailableAudio(e)},e.prototype.hasStreamEnded=function(){return!!this.ez&&this.ez.hasStreamEnded()},e.prototype.getCurrentTime=function(){return this.Xz.getCurrentTime()},e.prototype.getSeekableRange=function(){if(this.iz.isLive()){if(this.jz.seekingOrTimeshifting&&this.uz)return this.uz;var e=this.getTimeShiftLiveEdge(),t=e+this.getMaxTimeShift();return this.uz={start:t,end:e}}var i=this.getAllSegmentControllers().find((function(e){return S.MimeTypeHelper.isAV(e.getMimeType())}));return i?i.getMPDHandler().getSeekableRange():{start:-1,end:-1}},e.prototype.getAvailableSegments=function(){var e=this,t={};return Object.keys(this.fz).forEach((function(i){t[i]=e.fz[i].getSegmentInfos()})),t},e.prototype.isInitialized=function(){return this.bz},e.prototype.hasStarted=function(){var e,t;return null!==(t=null===(e=this.rz)||void 0===e?void 0:e.started)&&void 0!==t&&t},e}();function Y(e,t){return!(0,F.areAudioMimeCodecsCompatible)({mimeType:e._mimeType,codec:(0,E.getCodecsFromAdaptationSet)(e)},{mimeType:t._mimeType,codec:(0,E.getCodecsFromAdaptationSet)(t)})}function X(e,t){var i=e.getPlaybackTimeRange(),n=(0,z.getTrackIdentifier)(e.getSegmentInfo());i&&(null==t||t.dispatch((0,H.removeStreamTimeRange)(n,i,z.StreamTimeRangeType.Loading)))}function q(){return(0,T.isWebOS)()||(0,T.isTizen)()?2.5:1/0}t.MediaPlayerController=j},52447:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.engineBitmovinSourceReducers=void 0;var n=i(44115),r=i(20477),o=i(79872),a=i(88935),s=i(95236),u=i(73861),c=i(41710),d=i(14808);t.engineBitmovinSourceReducers={manifest:o.ManifestReducer,activeTracks:n.ActiveTracksReducer,playingTracks:a.PlayingTracksReducer,encryptionKeys:r.EncryptionKeyReducer,buffer:u.BufferReducer,renderer:c.RendererReducer,streamTimeline:d.StreamTimelineReducer,segmentInfoMap:s.SegmentInfoMapReducer}},52570:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MseModuleDefinition=void 0;var n=i(68925),r=i(86897),o=i(62756),a=i(34795),s=i(47151),u=i(67580),c=i(13422),d=i(79505),l=i(94358),h=i(99257),p=i(88618),f=i(14443),g=i(25248),m=i(63066),v=i(54015),y=i(97587),S=i(36193),T=i(44115),b=i(88935),M=i(72498),I=i(39523),P=i(99529),A=i(64922),R={removeStreamTimeRange:I.removeStreamTimeRange,removeLoadedRange:n.removeLoadedRange,addLoadedRange:n.addLoadedRange,resetLoadedRanges:n.resetLoadedRanges,resetStreamTimeline:I.resetStreamTimeline,removeActiveTrackAction:S.removeActiveTrackAction,setRepresentationIdAction:S.setRepresentationIdAction,setMediaTypeAction:S.setMediaTypeAction},E={getPlayingPeriodId:b.getPlayingPeriodId,getContainerFormat:T.getContainerFormat,getLoadedRangesForMimeType:r.getLoadedRangesForMimeType,getSegmentInfos:M.getSegmentInfos},C={containerFormat:a.ContainerFormat,streamTimeRangeType:P.StreamTimeRangeType};t.MseModuleDefinition={name:o.ModuleName.EngineBitmovin,module:{MediaPlayer:l.MediaPlayer,SegmentController:f.SegmentController,technologyChecker:new A.TechnologyChecker,Stream:y.Stream,FetchController:p.FetchController,SegmentInfoService:g.SegmentInfoService,SegmentPrefetchingService:v.SegmentPrefetchingService,AdRestorationOptimizationService:h.AdRestorationOptimizationService,ManifestCachingService:u.ManifestCachingService,SegmentListMPDHandler:m.SegmentListMPDHandler,actions:R,selectors:E,mseModuleTypes:C,AdaptationSetId:s.AdaptationSetId,RepresentationId:d.RepresentationId,getTrackIdentifier:P.getTrackIdentifier,getCodecsFromAdaptationSet:c.getCodecsFromAdaptationSet,getMimeTypeForAdaptationSet:c.getMimeTypeForAdaptationSet}},t.default=t.MseModuleDefinition},52602:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TimeShiftHandler=void 0;var n=i(80813),r=i(3714),o=i(87827),a=i(15971),s=i(79721),u=i(89927),c=i(23068),d=i(70850),l=i(88052),h=i(62756),p=i(42208),f=i(39523),g=i(99529),m=i(68981),v=i(50962),y=i(60729),S=function(){function e(e,t,i,r){var o=this;this.nW=!1,this.AW=function(){o.BW(!0)},this.CW=function(e){var t=o.SV.renderer.getCurrentTime(!0),i=t-e;i=d.Util.roundValue(i,1),o.zW(i,t)},this.SV=e,this.TV=t,this.UV=i,this.VV=Object.keys(r).map((function(e){return r[e]})),this.WV=e.serviceManager.get(n.ServiceName.ManifestService,e.sourceContext.sourceIdentifier),this.XV=e.logger,this.aV=0,this.oW=e.sourceContext.sourceIdentifier,this.DW()}return e.prototype.pW=function(){var e=(0,v.isLowLatencyConfigured)(this.SV),t=(0,y.isPlayingLowLatencyHls)(this.SV);return e||t},e.prototype.qW=function(){var e;if(this.bV&&!this.bV.isOngoing){var t=(0,u.toSeconds)(Date.now()-this.bV.timestamp);e=this.bV.liveEdge+t}else e=this.rW();return isFinite(e)||(e=(0,u.toSeconds)(Date.now()-this.WV.getAvailabilityStartTime())),e},e.prototype.rW=function(){var e=this.tW();if(!this.pW())return e;var t=this.VV.reduce((function(e,t){return Math.min(e,t.getMPDHandler().getSegmentDuration())}),1/0),i=this.sW();return i-e<t?i:e},e.prototype.sW=function(){var e=this.SV.serviceManager.maybeCall(n.ServiceName.SynchronizedTimeService,(function(e){return e.getTimeDifference()}),0,this.SV.sourceContext.sourceIdentifier);return(0,u.toSeconds)(Date.now()+e)},e.prototype.tW=function(){return this.VV.map((function(e){return e.getLiveEdgeTime()})).reduce((function(e,t){return t<e&&t>=0?t:e}),1/0)},e.prototype.updateSegmentControllers=function(e){this.VV=Object.values(e)},e.prototype.getMaxTimeShift=function(){if(this.WV.getManifest()){var e=this.WV.getTimeShiftBufferDepthSeconds();return Math.min(e+this.WV.getDesiredDistanceToLiveEdge(),0)}return 0},e.prototype.getTimeShiftLiveEdge=function(){return this.qW()-this.WV.getDesiredDistanceToLiveEdge()},e.prototype.getTimeShift=function(){var e=this.uW();if(this.mW){var t=(0,u.toSeconds)(Date.now()-this.mW.completionDate)-(this.TV.getCurrentTime()-this.mW.reachedTime);if(Math.abs(t)<this.SV.settings.ACCEPTABLE_TIMESHIFT_INACCURACY)return this.mW.offset}var i=this.getMaxTimeShift();return e<i&&(e=i),e>0&&(e=0),e},e.prototype.uW=function(e){return void 0===e&&(e=!1),!this.bV||this.bV.isOngoing?0:(e?this.TV.getBufferRelevantTime():this.TV.getCurrentTime())-this.getTimeShiftLiveEdge()},e.prototype.vW=function(){return this.qW()-this.TV.getBufferRelevantTime()},e.prototype.timeShift=function(e,t,i){var n,r=this;void 0===i&&(i=!1);var o=Boolean(this.bV);o||this.yW(),e=Math.max(this.getMaxTimeShift(),e);var u=this.TV.getCurrentTime(),d=this.calculatePlaybackTimeForTimeShiftOffset(e),l=null!==(n=this.WV.getPeriodIdForTime(d))&&void 0!==n?n:s.DEFAULT_PERIOD_ID;this.aV++;var h=this.aV,f=i||this.UV.shouldBuffersBeClearedOnTimeshift(d);return this.XV.debug("Performing timeShift to offset ".concat(e,", time: ").concat(u," -> ").concat(d,", period: ").concat(l)),this.UV.setTimeshiftCancelState(!1),(0,c.isDefined)(l)&&this.TV.updatePeriodForTimeshift(l,!o,f),f&&this.VV.forEach((function(e){return e.seekTo(d)})),o&&this.wW(d),this.BW(!0),this.UV.setCurrentTime(d,!0,i).then((function(i){var n;r.BW(!1),r.mW={offset:e,completionDate:Date.now(),reachedTime:i},r.aV===h&&t?(r.XV.debug("Successfully timeShifted to ".concat(i,", hit target time with a diff of ").concat(i-d)),null===(n=(0,a.getSourceStore)(r.SV))||void 0===n||n.dispatch((0,p.periodSwitchFinished)(l)),t()):t&&r.SV.logger.debug("Timeshift to ".concat(e," has finished but a newer operation has been started"))})).catch((function(e){r.XV.debug("Failed to set currentTime on timeShift",e)})).finally((function(){return r.UV.setTimeshiftCancelState(!1)}))},e.prototype.wW=function(e){var t;if(this.WV.isHlsManifest()){var i=this.SV.serviceManager.get(n.ServiceName.SourceStoreService,this.oW);(function(e,t){var i,n,r=null!==(n=null===(i=null==e?void 0:e.timestampRolloverPositions)||void 0===i?void 0:i.next)&&void 0!==n?n:-1;return-1!==r&&(t>=r||t<=e.timestampRolloverPositions.previous)})(null===(t=l.ModuleManager.get(h.ModuleName.HLS))||void 0===t?void 0:t.selectors.getHlsState(null==i?void 0:i.getState()),e)&&(this.SV.logger.debug("Resetting transmuxer because target is beyond a timestamp rollover"),this.TV.resetTransmuxer())}},e.prototype.cancel=function(){this.SV.logger.debug("Cancelling ongoing time shift operation..."),this.UV.setTimeshiftCancelState(!0)},e.prototype.calculatePlaybackTimeForTimeShiftOffset=function(e){var t=this.WV.getDesiredDistanceToLiveEdge(),i=this.qW(),n=i+(e-t);return this.WV.hasMultiplePeriods()?(0,m.adjustTargetTimeToPeriodStart)(n,this.SV.settings.END_OF_BUFFER_TOLERANCE,this.WV,this.SV.logger):0===e&&this.pW()?Math.min(i,n+this.SV.settings.LOW_LATENCY_SEEK_AHEAD):n},e.prototype.onManifestUpdate=function(){this.yW(),this.WV.isLive()&&(this.uW(!0)<this.getMaxTimeShift()-this.getMinSegmentDuration()?this.SV.settings.DISABLE_AUTO_RECOVERY_ON_DVR_WINDOW_EXCEEDED?this.nW||(this.SV.eventHandler.dispatchEvent(r.PlayerEvent.DVRWindowExceeded),this.nW=!0):this.SV.eventHandler.dispatchEvent(r.PlayerEvent.DVRWindowExceeded):this.nW=!1,this.xW())},e.prototype.xW=function(){var e=this;this.SV.serviceManager.maybeCall(n.ServiceName.SourceStoreService,(function(t){var i,n=e.WV.getTimeShiftBufferDepthSeconds(),r=e.qW()+n,o=null===(i=t.getState())||void 0===i?void 0:i.streamTimeline;void 0!==o&&Object.keys(o).forEach((function(e){t.dispatch((0,f.removeStreamTimeRange)(e,{start:0,end:r},g.StreamTimeRangeType.Failed))}))}))},e.prototype.isTimeInBufferedRange=function(e){return this.UV.isInBufferedRange(e)},e.prototype.getMinSegmentDuration=function(){return this.VV.reduce((function(e,t){return Math.min(e,t.getMPDHandler().getSegmentDuration())}),1/0)},e.prototype.yW=function(){var e=this.WV.isLive(),t=e?this.vW():1/0,i=e?Math.abs(this.WV.getTimeShiftBufferDepthSeconds()):this.WV.getDuration();this.SV.bufferSettings.setTargetBufferLevelConstraints({minimumBufferLength:this.getMinSegmentDuration(),currentDistanceToLiveEdge:t,streamDuration:i})},e.prototype.zW=function(e,t){this.mW={completionDate:Date.now(),reachedTime:t,offset:e},this.BW(!1)},e.prototype.BW=function(e){(!this.bV||!e&&this.bV.isOngoing)&&(this.bV={timestamp:Date.now(),liveEdge:this.qW(),isOngoing:e})},e.prototype.DW=function(){var e=this;this.YV=(0,o.subscribeToSeek)(this.SV.store,this.AW),this.ZV=(0,o.subscribeToSeeked)(this.SV.store,(function(t,i){return e.CW(i.seekingProcess.seekableRange.end)}))},e.prototype.EW=function(){var e,t;null===(e=this.YV)||void 0===e||e.call(this),null===(t=this.ZV)||void 0===t||t.call(this)},e.prototype.dispose=function(){this.EW(),this.UV.setTimeshiftCancelState(!0)},e}();t.TimeShiftHandler=S},54015:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentPrefetchingService=void 0;var n=i(25248),r=i(11991),o=function(){function e(){this.qf=new r.SegmentPrefetcher(this),this.rf=new Map}return e.prototype.updatePlayerContext=function(e){this.pf=e,this.qf.updateContext(this.pf)},e.prototype.setDecrypter=function(e,t){this.qf.setDecrypter(e,t)},e.prototype.removeDecrypter=function(e){this.qf.removeDecrypter(e)},e.prototype.getDecrypter=function(e){return this.qf.getDecrypter(e)},e.prototype.hasMp4Decrypter=function(e){return Boolean(this.getDecrypter(e))},e.prototype.setShouldDownloadBeCancelledCallback=function(e,t){this.qf.setShouldDownloadBeCancelledCallback(e,t)},e.prototype.removeShouldDownloadBeCancelledCallback=function(e){this.qf.removeShouldDownloadBeCancelledCallback(e)},e.prototype.fetch=function(e){var t=this;return this.qf.prefetchSegment(e).then((function(){var i=t.rf.get(e.mimeType).get((0,n.getSegmentInfoId)(e));return i?Promise.resolve(i.loadingPromise):Promise.reject()}))},e.prototype.fetchAll=function(e){this.qf.prefetchSegments(e)},e.prototype.onPrefetch=function(e){var t=e.segmentInfo.mimeType;this.rf.has(t)||this.rf.set(t,new Map),this.rf.get(t).set((0,n.getSegmentInfoId)(e.segmentInfo),e)},e.prototype.hasPrefetchedSegment=function(e){return Boolean(this.sf(e))},e.prototype.getPrefetchedSegment=function(e){var t=this.sf(e);return t?t.loadingPromise:null},e.prototype.sf=function(e){return this.rf.has(e.mimeType)&&this.rf.get(e.mimeType).get((0,n.getSegmentInfoId)(e))||null},e.prototype.getPrefetchedSegments=function(){return this.rf},e.prototype.removePrefetchedSegment=function(e){this.rf.has(e.mimeType)&&this.rf.get(e.mimeType).delete((0,n.getSegmentInfoId)(e))},e.prototype.clearPrefetchingQueue=function(e){this.qf.clearPrefetchingQueue(e)},e.prototype.reset=function(){this.qf.reset(),this.rf.clear()},e.prototype.dispose=function(){this.reset(),this.qf.dispose(),this.qf=null,this.rf=null},e}();t.SegmentPrefetchingService=o},54053:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentInfoError=void 0,function(e){e.END_OF_STREAM_REACHED="END_OF_STREAM_REACHED",e.PERIOD_COMPLETE="PERIOD_COMPLETE",e.SEGMENT_EXCEEDING_PERIOD_DURATION="SEGMENT_EXCEEDING_PERIOD_DURATION"}(i||(t.SegmentInfoError=i={}))},55938:function(e,t,i){var n=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.getUtcTimingSources=function(e,t){var i=[];return function(e,t){var i,r,o=(null===(i=e.live)||void 0===i?void 0:i.synchronization)||[],a=(null===(r=t.live)||void 0===r?void 0:r.synchronization)||[];return n(n([],o,!0),a.filter((function(e){return!o.some((function(t){return t.method===e.method}))})),!0)}(e,t).forEach((function(e){var t=function(e){switch(e){case r.LiveSynchronizationMethod.HttpHead:return"urn:mpeg:dash:utc:http-head:2014";case r.LiveSynchronizationMethod.HttpXsDate:return"urn:mpeg:dash:utc:http-xsdate:2014";case r.LiveSynchronizationMethod.HttpIso:return"urn:mpeg:dash:utc:http-iso:2014";default:return}}(e.method);t&&i.push({schemeIdUri:t,value:e.serverUrl})})),i};var r=i(21281)},58486:function(e,t,i){var n=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.StringTimeProvider=t.HttpHeadTimeProvider=t.HttpGetTimeProvider=t.HttpTimeProvider=t.ServerTimeProvider=void 0;var r=i(4129),o=i(29669),a=function(){return function(e){this.timeDecoder=e}}();t.ServerTimeProvider=a;var s=function(e){function t(t,i){var n=e.call(this,i)||this;return n.z0=t,n}return n(t,e),t.prototype.B0=function(e){var t=this,i=e.shift();return i?(this.A0=new r.DefaultContentLoader(this.z0,{requestType:o.HttpRequestType.TIME_SYNC,maxRetries:1}),this.A0.load(i,this.requestMethod).then((function(e){var i=t.timeDecoder.decode(t.processResponse(e));return t.A0=void 0,isNaN(i)?Promise.reject(new Error("Failed to decode time")):Promise.resolve(i)})).catch((function(i){return t.z0.logger.debug("could not load UTC time url",i),t.B0(e)}))):Promise.reject(new Error("No time source left to try"))},t.prototype.requestTime=function(e){var t=this,i=e.match(/\S+/g);return i?this.B0(i).then((function(e){return t.A0=void 0,e})):Promise.reject(new Error("No time source left to try"))},t.prototype.cancelRequest=function(){this.A0&&this.A0.cancel()},t}(a);t.HttpTimeProvider=s;var u=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.requestMethod=o.HttpRequestMethod.GET,n}return n(t,e),t.prototype.processResponse=function(e){return e.body},t}(s);t.HttpGetTimeProvider=u;var c=function(e){function t(t,i){var n=e.call(this,t,i)||this;return n.requestMethod=o.HttpRequestMethod.HEAD,n}return n(t,e),t.prototype.processResponse=function(e){var t=Object.keys(e.headers).find((function(e){return"date"===e.toLocaleLowerCase()}));return t&&e.headers[t]||""},t}(u);t.HttpHeadTimeProvider=c;var d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.requestTime=function(e){var t=this.timeDecoder.decode(e);return isNaN(t)?Promise.reject(new Error("Failed to decode time")):Promise.resolve(t)},t.prototype.cancelRequest=function(){},t}(a);t.StringTimeProvider=d},58747:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.XSDateTimeDecoder=t.ISO8601TimeDecoder=void 0;var i=function(){function e(){}return e.prototype.decode=function(e){return Date.parse(e)},e}();t.ISO8601TimeDecoder=i;var n=function(){function e(){}return e.prototype.decode=function(t){var i=Date.parse(t);if(isNaN(i)){var n=e.DATETIME_REGEX.exec(t);if(!n)return NaN;var r=Date.UTC(parseInt(n[1],10),parseInt(n[2],10)-1,parseInt(n[3],10),parseInt(n[4],10),parseInt(n[5],10),n[6]&&parseInt(n[6],10)||0,n[7]&&1e3*parseFloat(n[7])||0);if(n[9]&&n[10]){var o=60*parseInt(n[9],10)+parseInt(n[10],10);r+=("+"===n[8]?-1:1)*o*60*1e3}return new Date(r).getTime()}return i},e.DATETIME_REGEX=/^(\d{4})-(\d{2})-(\d{2})T(\d{2}):(\d{2})(?::(\d*)(\.\d*)?)?(?:([+-])(\d{2}):(\d{2}))?/,e}();t.XSDateTimeDecoder=n},58784:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PeriodSwitchTracker=void 0;var n=i(80813),r=i(3714),o=i(93204),a=i(89927),s=i(42208),u=i(88935),c=function(){function e(e){var t=this;this.KV=function(e,i){var n=t.getCurrentPlayingPeriodId(),o=e.switchingToPeriodId;n!==o&&(t.DV.debug("Starting switch from Period ".concat(n," to Period ").concat(o)),t.CV.eventHandler.dispatchEvent(r.PlayerEvent.PeriodSwitch,{sourcePeriod:{periodId:n},targetPeriod:{periodId:o}}))},this.LV=function(e,i){var n=i.switchingToPeriodId,o=t.getCurrentPlayingPeriodId();if(n!==o){t.setCurrentPlayingPeriodId(n);var a=t.getCurrentPlayingPeriod();a&&a.AdaptationSet.forEach((function(e){return t.CV.renderer.storeDrmInitDataFromManifest(e)})),t.DV.debug("Successfully switched from Period ".concat(o," to Period ").concat(n)),t.CV.eventHandler.dispatchEvent(r.PlayerEvent.PeriodSwitched,{sourcePeriod:{periodId:o},targetPeriod:{periodId:n}})}},this.CV=e,this.DV=e.logger,this.IV()}return e.prototype.HV=function(){return this.CV.serviceManager.get(n.ServiceName.ManifestService,this.CV.sourceContext.sourceIdentifier)},e.prototype.getCurrentPlayingPeriod=function(){return this.HV().findPeriod(this.getCurrentPlayingPeriodId())},e.prototype.IV=function(){var e=this.MV();!this.GV&&e&&(this.GV=(0,o.subscribe)(e)(u.getPlayingTracksState,this.KV,u.isSwitchingPeriods)),!this.FV&&e&&(this.FV=(0,o.subscribe)(e)(u.getPlayingTracksState,this.LV,u.wasSwitchingToPeriodIdReset))},e.prototype.JV=function(){this.FV&&(this.FV(),this.FV=void 0),this.GV&&(this.GV(),this.GV=void 0)},e.prototype.MV=function(){return this.CV.serviceManager.get(n.ServiceName.SourceStoreService,this.CV.sourceContext.sourceIdentifier)},e.prototype.getCurrentLoadingPeriodId=function(){return this.EV},e.prototype.setCurrentLoadingPeriodId=function(e){this.EV=e},e.prototype.getCurrentPlayingPeriodId=function(){return(0,u.getPlayingPeriodId)(this.MV().getState())},e.prototype.setCurrentPlayingPeriodId=function(e){this.MV().dispatch((0,s.setPlayingPeriodId)(e))},e.prototype.resetPeriodIds=function(){this.setCurrentPlayingPeriodId(void 0),this.setCurrentLoadingPeriodId(void 0)},e.prototype.shouldHandleDroppedOutPeriod=function(){return!(null==this.getCurrentPlayingPeriodId()&&null==this.EV)},e.prototype.NV=function(e){return!this.HV().getAllPeriods().map((function(e){return e._id})).includes(e)},e.prototype.isPlayingPeriodDroppedOut=function(){return this.NV(this.getCurrentPlayingPeriodId())},e.prototype.isLoadingPeriodDroppedOut=function(){return this.NV(this.EV)},e.prototype.isLoadingLastPeriod=function(){return this.HV().isLastPeriod(this.EV)},e.prototype.setInitialPeriod=function(){var e=this.HV().isLive()?this.OV():this.PV();this.EV=e,this.setCurrentPlayingPeriodId(this.EV),this.DV.debug("setting initial period to ".concat(this.EV))},e.prototype.OV=function(){var e=(0,a.toSeconds)(Date.now())-this.HV().getDesiredDistanceToLiveEdge();return this.HV().getPeriodIdForTime(e)},e.prototype.PV=function(){var e=this.CV.serviceManager.get(n.ServiceName.StartOffsetService).getStartOffset(this.CV.sourceContext.source);return this.HV().getPeriodIdForTime(e)},e.prototype.dispose=function(){this.JV()},e}();t.PeriodSwitchTracker=c},59604:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.mergeBufferBlockTimeRanges=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var i=a(e);return Object.keys(i).flatMap((function(e){return n.BufferRangeHelper.mergeRanges(i[e],r)}))},t.excludeBufferBlockTimeRange=function(e,t){var i=t.bufferBlockId,s=a(e.map((function(e){return o(e.start,e.end,e.bufferBlockId)}))),u=s[i];if(!(null==u?void 0:u.length))return e;var c=function(e,t){var i=[];return e.forEach((function(e){(0,n.areDisjoint)(e,t)?i.push(e):(0,n.isSurrounding)(e,t)?i.push.apply(i,function(e,t){return[o(e.start,t.start,e.bufferBlockId),o(t.end,e.end,e.bufferBlockId)]}(e,t)):(0,n.isFullyIncluded)(e,t)||i.push(function(e,t){return o(e.start>=t.start?t.end:e.start,e.end>t.end?e.end:t.start,e.bufferBlockId)}(e,t))})),i.filter((function(e){return e.end-e.start>=r}))}(u,t);return s[i]=n.BufferRangeHelper.mergeRanges(c,r),Object.keys(s).flatMap((function(e){return s[e]}))},t.segmentToBufferBlockTimeRange=function(e){var t,i=null!==(t=e.getBufferBlockId())&&void 0!==t?t:1/0,n=e.getPlaybackTime();return o(n,n+e.getDuration(),i)};var n=i(4524),r=.1;function o(e,t,i){return{start:(0,n.rangeFixedValue)(e),end:(0,n.rangeFixedValue)(t),bufferBlockId:i}}function a(e){var t={};return e.forEach((function(e){t[e.bufferBlockId]||(t[e.bufferBlockId]=[]),t[e.bufferBlockId].push(e)})),t}},59707:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.setManifestAction=function(e){return(0,n.createAction)(r.ManifestActionType.SetManifest,{manifest:e})},t.setManifestInitializedAction=function(e){return(0,n.createAction)(r.ManifestActionType.SetManifestInitialized,{isInitialized:e})},t.removeRepresentationsAction=function(e){return(0,n.createAction)(r.ManifestActionType.RemoveRepresentations,{representationIds:e})},t.updateManifestAction=function(e){return(0,n.createAction)(r.ManifestActionType.UpdateManifest,e)},t.updateAdaptationSetAction=function(e,t){return(0,n.createAction)(r.ManifestActionType.UpdateAdaptationSet,{adaptationSetId:e,updates:t})},t.updateRepresentationAction=function(e){return(0,n.createAction)(r.ManifestActionType.UpdateRepresentation,e)},t.updatePeriodTimingAction=function(e,t){return(0,n.createAction)(r.ManifestActionType.UpdatePeriodTiming,{periodId:e,timing:t})},t.adjustPeriodStartTimes=function(e){return(0,n.createAction)(r.ManifestActionType.AdjustPeriodStartTimes,{offset:e})},t.setRepresentationDrmKidAction=function(e,t){return(0,n.createAction)(r.ManifestActionType.SetRepresentationDrmKid,{representationId:e,associatedKid:t})},t.updateRepresentationFailedDownloadAction=function(e,t){return(0,n.createAction)(r.ManifestActionType.UpdateRepresentationFailedDownload,{representationId:e,loadFailureReason:t})},t.setRepresentationSegmentIndexAction=function(e,t){return(0,n.createAction)(r.ManifestActionType.SetRepresentationSegmentIndex,{representationId:e,segmentIndex:t})},t.setRepresentationIsLoadingAction=function(e,t){return(0,n.createAction)(r.ManifestActionType.SetRepresentationIsLoading,{representationId:e,isLoading:t})},t.setRepresentationSegmentIndexParsingErrorAction=function(e,t){return(0,n.createAction)(r.ManifestActionType.SetRepresentationSegmentIndexParsingError,{representationId:e,segmentIndexParsingError:t})},t.setRepresentationAnchorPointAction=function(e,t){return(0,n.createAction)(r.ManifestActionType.SetRepresentationAnchorPoint,{representationId:e,anchorPoint:t})},t.initPlaybackTimesFromIndex=function(e,t,i){return(0,n.createAction)(r.ManifestActionType.InitPlaybackTimesFromIndex,{representationId:e,index:t,playbackTimeForIndex:i})},t.initPlaybackTimesFromReferenceSegment=function(e){return(0,n.createAction)(r.ManifestActionType.InitPlaybackTimesFromReferenceSegment,{representationId:e.getRepresentationId(),segmentUrl:e.getUrl(),segmentPlaybackTime:e.getPlaybackTime(),discontinuitySequenceNumber:e.getSegmentInfo().discontinuitySequenceNumber})},t.resetSegmentPlaybackTimes=function(){return(0,n.createAction)(r.ManifestActionType.ResetSegmentPlaybackTimes)};var n=i(35267),r=i(71050)},60632:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferRangesCache=void 0;var n=i(80813),r=i(86897),o=i(93204),a=i(10333),s=function(){function e(e,t){var i=this;this.context=e,this.segmentStore=t,this.o8=this.q8(),this.m8=(0,o.subscribe)(e.store)(a.sourceIdentifiersSelector,(function(){return i.p8()}),(function(e,t){return!!e.includes(i.context.sourceContext.sourceIdentifier)&&(0,a.hasASourceStoreIdentifierChanged)(e,t)})),this.s8(),this.t8((0,r.getBufferState)(this.o8.getState()))}return e.prototype.p8=function(){this.o8=this.q8(),this.o8?(this.s8(),this.t8((0,r.getBufferState)(this.o8.getState()))):this.r8()},e.prototype.q8=function(){return this.context.serviceManager.get(n.ServiceName.SourceStoreService,this.context.sourceContext.sourceIdentifier)},e.prototype.r8=function(){this.l8&&this.l8(),this.l8=void 0,this.m8=void 0},e.prototype.s8=function(){var e=this;this.r8(),this.l8=(0,o.subscribe)(this.o8)((function(e){return(0,r.getBufferState)(e)}),(function(t){return e.t8(t)}),r.hasBufferRangesChanged)},e.prototype.t8=function(e){this.n8={overallBufferRanges:(0,r.getBufferRangesMap)(this.segmentStore,e,this.context.settings.GAP_TOLERANCE)}},e.prototype.getRanges=function(e){return void 0!==this.l8&&void 0!==this.n8&&0!==Object.keys(this.n8.overallBufferRanges).length||this.t8(e),this.n8.overallBufferRanges},e.prototype.dispose=function(){this.r8(),this.m8&&(this.m8(),this.m8=void 0),this.n8=void 0},e}();t.BufferRangesCache=s},60729:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isPlayingLowLatencyHls=function(e){var t;if(!(0,a.isLowLatencyConfigured)(e)||!e.settings.LL_HLS)return!1;var i=(0,n.getSourceState)(e);if(!i)return!1;var s=r.ModuleManager.get(o.ModuleName.HLS,!1);if(!s)return!1;var u=s.selectors,c=u.getHlsState,d=u.getIsLowLatencyPlaylist,l=c(i);return!!l&&null!==(t=d(l))&&void 0!==t&&t};var n=i(15971),r=i(88052),o=i(62756),a=i(50962)},61800:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.DiscontinuityMonitor=void 0;var n=i(3714),r=function(){function e(e){var t=this;this.context=e,this.zY=function(){t.wY=!0},this.AY=function(){var e=t.context.internalPlayer.getCurrentTime();Object.values(t.xY).forEach((function(i){e>=i.playbackTime&&i.playbackTime+i.duration>=e&&t.maybeFirePeriodSwitchEvents(i)})),t.xY={},t.wY=!1},this.vY={},this.xY={},this.wY=!1,this.yY=[],this.context.eventHandler.on(n.PlayerEvent.Seek,this.zY,!0),this.context.eventHandler.on(n.PlayerEvent.Seeked,this.AY,!0)}return e.prototype.trackIncomingDiscontinuity=function(e,t,i,n){this.vY[t]?this.wY&&(this.xY[t]={mimeType:t,discontinuitySequenceNumber:e,playbackTime:i,duration:n}):this.vY[t]={discontinuitySequenceNumber:e,startTime:i||0},this.yY.includes(e)||this.yY.push(e)},e.prototype.isDiscontinuityExpected=function(e){return this.yY.includes(e)},e.prototype.reset=function(){this.yY=[]},e.prototype.maybeFirePeriodSwitchEvents=function(e){var t=e.mimeType,i=e.discontinuitySequenceNumber,r=e.playbackTime;if(null!=i&&this.vY[t]){var o=this.vY[t].discontinuitySequenceNumber;o!==i&&(this.BY(t,i,r)&&(this.context.eventHandler.dispatchEvent(n.PlayerEvent.PeriodSwitch),this.context.eventHandler.dispatchEvent(n.PlayerEvent.PeriodSwitched,{sourcePeriod:{periodId:String(o)},targetPeriod:{periodId:String(i)}})),this.vY[t]={discontinuitySequenceNumber:i,startTime:r})}},e.prototype.BY=function(e,t,i){var n=this,r=Object.keys(this.vY).filter((function(t){return t!==e})),o=!0;return r.forEach((function(e){var r=n.vY[e];r.discontinuitySequenceNumber===t&&Math.abs(i-r.startTime)<1&&(o=!1)})),o},e.prototype.dispose=function(){this.context.eventHandler.off(n.PlayerEvent.Seek,this.zY),this.context.eventHandler.off(n.PlayerEvent.Seeked,this.AY)},e}();t.DiscontinuityMonitor=r},62198:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getManifest=void 0,t.getManifest=function(e){return null==e?void 0:e.manifest}},63066:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentListMPDHandler=t.PHANTOM_SEGMENT_URL=void 0,t.assignSegmentStartTimesFromHlsRepresentation=b,t.copyPropValues=P,t.getMatchingPart=A;var r=i(66790),o=i(80813),a=i(77179),s=i(20649),u=i(74853),c=i(52424),d=i(89927),l=i(23068),h=i(88052),p=i(62756),f=i(50827),g=i(72498),m=i(60729),v=i(54053),y=i(65439);t.PHANTOM_SEGMENT_URL="PHANTOM-SEGMENT";var S=function(){function e(e){this.Ze=e,this.ae=e.sourceContext,this.ce=e.settings,this.be=e.logger,this.ie=e.serviceManager.get(o.ServiceName.ManifestService,this.ae.sourceIdentifier),this.he=0,this.ke={},this.je=NaN}return Object.defineProperty(e.prototype,"le",{get:function(){return this.Ze.serviceManager.get(o.ServiceName.PlayerStateService)},enumerable:!1,configurable:!0}),e.prototype.me=function(e,t){var i;if(!e)return null;var o={isInitSegment:!1,url:e._media,duration:e._duration,internalRepresentationId:t,periodId:t.periodId};if(e._key&&e._key.method!==r.HlsEncryptionMethod.NONE&&(o.key=e._key),void 0!==e._playbackTime&&(o.startTime=e._playbackTime),e._dateTime&&(o.dateTime=e._dateTime),e._metadata&&(o.metadata=e._metadata),e._byteRange&&(o.byteRange=e._byteRange),e._init&&(o.init=e._init,(null===(i=e._init.key)||void 0===i?void 0:i.method)===r.HlsEncryptionMethod.NONE&&(o.init=n({},o.init),delete o.init.key)),void 0!==e._mediaSequence&&(o.mediaSequence=e._mediaSequence),void 0!==e._discontinuitySequenceNumber&&(o.discontinuitySequenceNumber=e._discontinuitySequenceNumber),e._parts){var a=o.dateTime;o.parts=e._parts.map((function(e){var t=function(e,t){var i={url:e.uri,duration:e.duration,isInitSegment:!1,internalRepresentationId:t.internalRepresentationId,isPreloadHint:Boolean(e.isPreloadHint),isIndependent:Boolean(e.independent)};return e.byteRange&&(i.byteRange=e.byteRange),t.key&&(i.key=t.key),t.init&&(i.init=t.init),(0,l.isDefined)(t.mediaSequence)&&(i.mediaSequence=t.mediaSequence),(0,l.isDefined)(t.discontinuitySequenceNumber)&&(i.discontinuitySequenceNumber=t.discontinuitySequenceNumber),i}(e,o);return a&&(t.dateTime=a,t.startTime=(0,d.toSeconds)(a.getTime()),a=new Date(a.getTime()+(0,d.toMilliSeconds)(e.duration))),t}))}return o},e.prototype.ne=function(e,t,i){if(t.SegmentURL.length<1)return e.entries=[],e.totalDuration=0,e.entries.length;for(var n=this.me(t.SegmentURL[0],i),r=0,o=0,a=0;a<e.entries.length;a++){var s=e.entries[a];if((0,f.isIdenticalSegmentInfo)(s,n))break;r+=s.duration,e.entries.splice(a,1),a--,o++,this.ee.equals(i)&&this.rewindOneSegment()}return e.totalDuration-=r,o},e.prototype.oe=function(e,t,i){for(var n=[],r=e.entries[e.entries.length-1],o=0,a=t.SegmentURL.length-1;a>=0;a--){var s=this.me(t.SegmentURL[a],i);if(r&&(0,f.isIdenticalSegmentInfo)(r,s)){if(M(r)){var u=I(r,s);e.totalDuration+=u}break}r&&(0,f.isIdenticalInitSegmentInfo)(r.init,s.init)&&(s.init=r.init),isNaN(s.duration)&&(s.duration=e.maximumSegmentDuration),s.duration/=e.timescale,o+=s.duration,n.push(s)}return e.totalDuration+=o,n.reverse(),e.entries=e.entries.concat(n),n.length},e.prototype.pe=function(e,t){var i,n,r=t.SegmentList,o=t._internalId.representationId,a=null===(i=this.ee)||void 0===i?void 0:i.equals(t._internalId),s=null===(n=null==r?void 0:r[0])||void 0===n?void 0:n.SegmentURL.length;if(!a||s){e.Uri&&e.Uri!==t.Uri&&this.qe(e,null==r?void 0:r[0],a),e.Uri=t.Uri,e.timescale=1,e.maximumSegmentDuration=1,e.startNumber=1;for(var u=function(i){var n=r[i];if(n.hasOwnProperty("_duration")&&(e.maximumSegmentDuration=Number(n._duration)),["_timescale","_startNumber","_presentationTimeOffset"].filter((function(e){return n.hasOwnProperty(e)})).forEach((function(t){return e[t.substr(1)]=n[t]})),c.re(e,n,t),n.hasOwnProperty("SegmentURL")){var a=c.ne(e,n,t._internalId),s=c.oe(e,n,t._internalId);c.se(t._mimeType,o,a,s),c.ie.isHlsManifest()?b(e.entries,t._internalId,c.ie):c.te(e,t._internalId)}},c=this,d=0;d<r.length;d++)u(d)}},e.prototype.qe=function(e,t,i){var n,r,o,a,s,c;if(this.ie.isLive()&&i){var d=null!==(o=null===(r=null===(n=e.entries)||void 0===n?void 0:n[0])||void 0===r?void 0:r.mediaSequence)&&void 0!==o?o:1/0,l=(null!==(s=null===(a=null==t?void 0:t.SegmentURL[0])||void 0===a?void 0:a._mediaSequence)&&void 0!==s?s:0)-d,h=function(e){var t,i,n=e.totalDuration/(null!==(i=null===(t=e.entries)||void 0===t?void 0:t.length)&&void 0!==i?i:1);return Math.ceil(24/n)}(e);!isNaN(l)&&l>0&&l<h&&this.df(l)}(0,u.clearArray)(null!==(c=e.entries)&&void 0!==c?c:[])},e.prototype.re=function(e,t,i){var n,r=null===(n=h.ModuleManager.get(p.ModuleName.DASH,!1))||void 0===n?void 0:n.initSegmentInfoSourceDetectors.isInitializationNode;(null==r?void 0:r(t))?e.init=h.ModuleManager.get(p.ModuleName.DASH,!1).initSegmentInfoProviders.provideSegmentInfoFromInitializationNodeProperty(t,i):delete e.init},e.prototype.se=function(e,t,i,n){(i>0||n>0)&&this.be.debug("[".concat(e,"][").concat(t,"] Updated segment list, removed ").concat(i," segments and added ").concat(n," segments"))},e.prototype.te=function(e,t){var i=this.mf(t),n=0;e.entries.forEach((function(e){var t;e.startTime=i+n,n+=null!==(t=e.duration)&&void 0!==t?t:0}))},e.prototype.extrapolateStartTimesFromDiscontinuityStarts=function(e){var t,i,n,r,o=null===(i=null===(t=this.ue())||void 0===t?void 0:t.getState())||void 0===i?void 0:i.hls;if(o){var a=e.getRepresentationId().representationId,s=this.getSegmentListEntries(this.ee),u=h.ModuleManager.get(p.ModuleName.HLS).selectors,c=u.getDiscoSequenceTimings,d=u.getMergedDiscontinuityTimings,l=function(e,t){for(var i=e[0].discontinuitySequenceNumber,n=1;n<e.length;n++){var r=e[n].discontinuitySequenceNumber;if(r!==i){var o=T(t,r);if(null!=o)return{index:n,discontinuityStartTime:o}}}return null}(s,null!==(n=c(o,e.getMimeType()))&&void 0!==n?n:d(o));if(!l){var f=null===(r=this.ef())||void 0===r?void 0:r.start;if(void 0===f)return;l={index:0,discontinuityStartTime:f},this.be.debug("Could not find discontinuity boundary with start time, using period start time ".concat(f))}this.be.debug("Assigning segment start times for rep ".concat(a," from discontinuity at index ").concat(l.index," with time ").concat(l.discontinuityStartTime)),s[l.index].startTime=l.discontinuityStartTime;for(var g=l.index-1;g>=0;g--)s[g].startTime=s[g+1].startTime-s[g+1].duration;for(g=l.index+1;g<s.length;g++)s[g].startTime=s[g-1].startTime+s[g-1].duration}},e.prototype.ue=function(){return this.Ze.serviceManager.get(o.ServiceName.SourceStoreService,this.Ze.sourceContext.sourceIdentifier)},e.prototype.ve=function(e,t){for(var i=-1,n=this.getSegmentListEntries(t),r=n.length-1;r>=0;r--)if((0,f.isIdenticalSegmentInfo)(n[r],e)){i=r;break}return i},e.prototype.we=function(e){var t,i=this,n=null===(t=this.ie)||void 0===t?void 0:t.getAdaptationSet(e);n&&n.Representation.forEach((function(e){var t=i.ke[e._internalId.key()];if(t||(t=i.Ae(e._internalId.key())),e.hasOwnProperty("SegmentList")&&(i.pe(t,e),h.ModuleManager.has(p.ModuleName.DASH))){var n=h.ModuleManager.get(p.ModuleName.DASH).initSegmentInfoSourceDetectors.isInitializationNode;if(!t.hasOwnProperty("init")&&e.hasOwnProperty("SegmentBase")&&e.SegmentBase&&n(e.SegmentBase[0])){var r=h.ModuleManager.get(p.ModuleName.DASH).initSegmentInfoProviders.provideSegmentInfoFromInitializationNodeProperty;t.init=r(e.SegmentBase[0],e)}}}))},e.prototype.xe=function(){var e,t,i=this,n=null===(e=this.Ze.serviceManager.get(o.ServiceName.SourceStoreService,this.ae.sourceIdentifier).getState().activeTracks)||void 0===e?void 0:e[this.fe.adaptationSetId];if((null===(t=null==n?void 0:n.selectedRepresentationId)||void 0===t?void 0:t.periodId)===this.fe.periodId)return n.selectedRepresentationId;if(this.ee){var r=this.ie.getRepresentation(this.fe,this.ee.representationId);if(r)return r._internalId}return(this.ye((function(e){return i.isSegmentInfoLoaded(e._internalId)}))||this.ye())._internalId},e.prototype.ye=function(e){return this.ie.getMatchingRepresentationByBandwidth(this.fe,this.Be(),e)},e.prototype.ze=function(){var e=this.fe.equals(this.ee),t=!this.ee||Boolean(this.ie.getRepresentationById(this.ee));return!this.ee||!e||!t},e.prototype.setAdaptationSetId=function(e){this.fe=e,this.we(this.fe);var t,i=this.ie.isLive(),n=0;this.ze()&&(this.ee=this.xe());var r=this.ke[this.ee.key()];if(r||(r=this.Ae(this.ee.key())),r&&i&&r.entries&&r.entries.length>0){var o=r.entries.length-1;this.de>o&&(n=this.de-o),this.de=Math.min(o,this.de||0),this.de=Math.max(0,this.de),t=r.entries[this.de]}if(this.de=this.de||0,i&&(this.he=this.getSegmentDuration()*this.ce.LIVE_SEGMENT_LIST_START_INDEX_OFFSET),i){if(t&&r){var a=this.ve(t,this.ee);a>=0?this.de=a+n:this.De()}else this.De();var s=this.Ce();s?this.Zf(s):this.resolvePendingSegmentInfoRequests()}else this.resolvePendingSegmentInfoRequests()},e.prototype.Ae=function(e){var t={totalDuration:0,entries:[],SegmentURL:[],startNumber:0,init:null,maximumSegmentDuration:1,timescale:1};return this.ke[e]=t,t},e.prototype.Be=function(){var e=0,t=this.gf();return t&&(e=t._bandwidth),e},e.prototype.Ce=function(){var e;if(this.ie.isHlsManifest()){var t=this.ie.getRepresentationById(this.ee);if(null===(e=null==t?void 0:t._hls)||void 0===e?void 0:e.loadFailureReason)return t._hls.loadFailureReason}return this.hasNext()||this.ie.isLastPeriod(this.ee.periodId)?null:v.SegmentInfoError.PERIOD_COMPLETE},e.prototype.De=function(){this.ce.ENABLE_SEEK_FOR_LIVE?this.de=0:this.timeShift(0)},e.prototype.Ee=function(e,t){var i,n,r=this.ie.getRepresentationById(e),o=this.ie.getRepresentationById(t),a=(0,l.isNumber)(null===(i=null==o?void 0:o._hls)||void 0===i?void 0:i.mediaSequence)&&(0,l.isNumber)(null===(n=null==r?void 0:r._hls)||void 0===n?void 0:n.mediaSequence);if(r&&o&&a){var s=o._hls.mediaSequence-r._hls.mediaSequence,c=this.getSegmentListEntries(e),d=this.getSegmentListEntries(t);s>=c.length||(d[0].startTime=c[s].startTime,(0,u.forEachFromIndex)(d,1,(function(e,t){(0,l.isNumber)(e.startTime)&&(0,l.isNumber)(e.duration)&&(t.startTime=e.startTime+e.duration)})))}},e.prototype.setRepresentationId=function(e){var t=this.ie.getRepresentationById(e),i=this.getSegmentListEntries(this.ee)[this.de];if(t){var n=void 0===this.ee,r=this.ee;if(this.ee=e,this.ie.isLive()&&t._hls)if(this.ce.HLS_SYNC_SEGMENT_PLAYBACK_TIME_VIA_MEDIA_SEQUENCE&&this.Ee(r,this.ee),n)this.De();else if(this.ce.HLS_SYNC_VIA_MEDIA_SEQUENCE){var o=this.ie.getRepresentationById(r)._hls.mediaSequence+this.de;this.de=o-t._hls.mediaSequence,this.de=Math.max(this.de,0)}else if(null!=(null==i?void 0:i.startTime)&&!isNaN(i.startTime)){var a=this.lf(i.startTime);null===a||isNaN(a)||(this.de=this.Fe(a,i.startTime))}return!0}return!1},e.prototype.Fe=function(e,t){var i=this.getSegmentListEntries(this.ee),n=[i[e],i[e+1]];if(e===i.length-1||n.some((function(e){return!e.startTime})))return e;var r=n.map((function(e){return Math.abs(e.startTime-t)})),o=Math.min.apply(this,r);return e+r.indexOf(o)},e.prototype.getInitSegmentInfo=function(){var e=this.hf(this.ee);if(null==e?void 0:e.init)return e.init.presentationTimeOffset=this.getTimestampOffset(),e.init;var t=this.getSegmentListEntries(this.ee);if(this.Me(t)&&this.de>-1){var i=n({},t[this.de]);if(i.init){var r=i.init;return r.isInitSegment=!0,r}}return null},e.prototype.Ge=function(e){var t;if(!(this.getSegmentListEntries(this.ee).length<1||this.de<0)){var i=this.He(e);return i&&this.be.debug("".concat(null===(t=this.fe)||void 0===t?void 0:t.adaptationSetId," given time ").concat(e," matches seek time, performing precise segment/part search"),e),(0,m.isPlayingLowLatencyHls)(this.Ze)&&this.Ie(e,i),this.Je(e,i)}},e.prototype.He=function(e){var t;return e===(null===(t=this.le)||void 0===t?void 0:t.targetPlaybackTime)||!1},e.prototype.Ie=function(e,t){var i;if(0!==e){if(this.de=this.lf(e),!t){var n=this.getSegmentListEntries(this.ee),r=n[this.de];if(!(r.parts&&r.parts.length>0)){var o=this.de;this.de=R(e,this.de,n),this.de!==o&&this.be.debug("Snapped segment index for time ".concat(e," to next segment boundary at ").concat(null===(i=n[this.de])||void 0===i?void 0:i.startTime))}}}else this.Ze.logger.debug("Ignoring target time of 0 for LL-HLS")},e.prototype.Je=function(e,t){var i=this.getSegmentListEntries(this.ee);if(this.Me(i)){var n=i[this.de];if(!(n.parts&&n.parts.length>0))return this.Le();if(M(n))return A(n,e,t);var r=A(n,e,t);return r?n.parts.indexOf(r)>0?r:this.Le():(this.de++,this.Je(e,t))}},e.prototype.getNextSegmentInfo=function(e){var t=this.Ge(e);return t?(this.Ke(t),Promise.resolve(t)):this.Yf({time:e})},e.prototype.Ke=function(e){return e.presentationTimeOffset=this.getTimestampOffset(),e.startTime&&(e.wallClockTime=(0,d.toMilliSeconds)(e.startTime)),e},e.prototype.Le=function(){return this.getSegmentListEntries(this.ee)[this.de++]},e.prototype.getSegmentInfos=function(){var e=this,t={},i=this.ie.getAdaptationSet(this.fe);return i&&i.Representation.forEach((function(i){var n=e.getSegmentListEntries(i._internalId);t[i._id]=n.map((function(e){return{url:e.url,duration:e.duration,startTime:e.startTime}}))})),t},e.prototype.getSubtitleUrl=function(){return this.ie.getAvailableSubtitles(this.fe.periodId)[0].url},e.prototype.getStartNumber=function(){var e=this.hf(this.ee);return e?e.startNumber:1},e.prototype.getSegmentDuration=function(){var e=this,t=this.hf(this.ee),i=this.getSegmentListEntries(this.ee);if(t)return i.length>0&&(0,l.isNumber)(t.totalDuration)?t.totalDuration/i.length:t.maximumSegmentDuration;if(this.ie.getAdaptationSet(this.fe)){var n=Object.keys(this.ke).map((function(t){return e.ke[t]})).find((function(e){return null!==e}));if(n)return n.maximumSegmentDuration}return 1},e.prototype.seekTo=function(e){e>-1&&(this.de=this.lf(e))},e.prototype.Me=function(e){return this.de<e.length},e.prototype.hasNext=function(){var e=this.getSegmentListEntries(this.ee);return!this.ee||!e.length||(this.ie.isLive()?this.Ne(e):this.Me(e))},e.prototype.Ne=function(e){return!!this.ie.isLastPeriod(this.ee.periodId)||this.Me(e)},e.prototype.setTimestampOffset=function(e,t){void 0===t&&(t=1),this.je=e/t},e.prototype.getTimestampOffset=function(){if(!isNaN(this.je))return this.je;var e=this.ef(),t=0;if(this.ee){var i=this.hf(this.ee);i&&!isNaN(i.presentationTimeOffset)&&(t=i.presentationTimeOffset/i.timescale)}return e&&!this.ie.isHlsManifest()&&(t-=e.start),t},e.prototype.getIndex=function(){return this.de},e.prototype.setIndex=function(e){if("number"==typeof e)return e<0?(this.be.debug("Tried to set index at MPDHandler to value smaller 0. Setting to 0."),void(this.de=0)):void(this.de=e);this.be.debug("Tried to set index at MPDHandler with parameter not being a number!")},e.prototype.Yf=function(e){var t,i=this;if(this.ge)return Promise.reject("fail");var r=this.ie.getRepresentationById(this.ee);return(null===(t=null==r?void 0:r._hls)||void 0===t?void 0:t.loadFailureReason)?Promise.reject(r._hls.loadFailureReason):(this.be.debug("No segment info was found for the target time. Waiting for representation update."),new Promise((function(t,r){i.ge=n(n({},e),{resolve:t,reject:r})})))},e.prototype.resolvePendingSegmentInfoRequests=function(){if(this.ge){var e=this.Ge(this.ge.time);e?(this.Ke(e),this.ge.resolve(e),this.ge=null):this.ie.isLive()||this.hasNext()||this.ge.reject(v.SegmentInfoError.END_OF_STREAM_REACHED)}},e.prototype.Zf=function(e){this.ge&&(this.ge.reject(e),this.ge=null)},e.prototype.af=function(){var e=this.getSegmentListEntries(this.ee);return e.length>0?e.length-1:0},e.prototype.bf=function(e){for(var t,i=Math.abs(e),n=this.getSegmentDuration(),r=this.getSegmentListEntries(this.ee),o=this.af(),a=0,s=r.length-1;s>=0&&!((a+=null!==(t=r[s].duration)&&void 0!==t?t:n)>=i);s--)o--;return Math.max(0,o)},e.prototype.timeShift=function(e,t,i){if(this.ie.isLive()){var n=this.de;this.de=i&&this.cf()?this.lf(i):this.bf(e),this.be.debug("timeShift changes index from ".concat(n," to ").concat(this.de,", based on")+" offset ".concat(e," and target time ").concat(i))}},e.prototype.cf=function(){var e,t=null===(e=this.getSegmentListEntries(this.ee)[0])||void 0===e?void 0:e.startTime;return(0,l.isNumber)(t)&&t>=0},e.prototype.updateRepresentation=function(e){return Promise.resolve(e)},e.prototype.isSegmentInfoLoaded=function(e){if(void 0===e&&(e=this.ee),!e)return!1;var t=this.getSegmentListEntries(e),i=this.ie.getRepresentationById(e);return!(!t.length||!i)},e.prototype.df=function(e){this.be.debug("Rewinding segment list index by ".concat(e," segments")),this.de-=e,this.de<0&&(this.be.debug("List array index is smaller than 0, probably a discontinuity. Using 0."),this.de=0)},e.prototype.rewindOneSegment=function(){return this.de--,!(this.de<0&&(this.be.debug("List array index is smaller than 0, probably a discontinuity. Using 0."),this.de=0,1))},e.prototype.ef=function(){return this.ie.getPeriod(this.ee)},e.prototype.ff=function(e){var t=this.ef().start;return(this.ie.hasSinglePeriod()?this.getSeekableRange().start:t)+this.getSegmentListEntries(this.ee).slice(0,e).reduce((function(e,t){return e+t.duration}),0)},e.prototype.gf=function(){return this.ie.getRepresentationById(this.ee)},e.prototype.hf=function(e){if(e)return this.ke[e.key()]},e.prototype.getSegmentListEntries=function(e){var t,i;return e?this.ce.ENABLE_SEGMENT_INFO_PROVIDER_FROM_STORE&&this.ie.isHlsManifest()?this.jf(e):null!==(i=null===(t=this.hf(e))||void 0===t?void 0:t.entries)&&void 0!==i?i:[]:[]},e.prototype.jf=function(e){var t,i=null===(t=this.ue())||void 0===t?void 0:t.getState();return(0,g.getSegmentInfos)(i,e.key())},e.prototype.kf=function(e,t){var i,n;if(!this.fe)return 0;for(var r=this.ie.getPeriod(this.fe),o=null!==(i=null==r?void 0:r.start)&&void 0!==i?i:0,a=this.getSegmentListEntries(this.ee),s=0,u=o;u<=t&&s<a.length;s++)u+=null!==(n=a[s].duration)&&void 0!==n?n:0;return Math.max(s-1,0)},e.prototype.lf=function(e){var t=this.hf(this.ee),i=this.getSegmentListEntries(this.ee);if(!t||0===i.length||!(0,l.isNumber)(t.totalDuration))return 0;var n=this.mf(),r=Math.max(n,e),o=t.totalDuration/i.length,a=(0,y.findSegmentIndexForTime)(i,r,o);return null!==a?a:this.kf(t,r)},e.prototype.mf=function(e){void 0===e&&(e=this.ee);var t=this.ie.hasSinglePeriod()?this.getSeekableRange().start:this.ie.getPeriod(e).start;return this.ie.isFirstPeriod(e.periodId)&&(t+=this.he),t},e.prototype.getLiveEdgeTime=function(){var e,t=null===(e=this.ie)||void 0===e?void 0:e.getLastPeriod();return t?t.start+c.DurationConverter.getDurationInSec(t._duration):1/0},e.prototype.getActualTimeShiftBufferDepth=function(){return this.ie.getTimeShiftBufferDepthSeconds()},e.prototype.getSeekableRange=function(){var e={start:0,end:0},t=this.ie.getTotalDuration();if(!this.ie.isLive())return e.start=(0,a.getStartTimeOffset)(this.ue().getState()),e.end=t,e;var i=this.ie.getTimeShiftBufferDepthSeconds(),n=(0,d.toSeconds)(this.ie.getRequestTimestamp()-this.ie.getAvailabilityStartTime());if(e.start=Math.max(n+i,0),e.end=Math.max(n,0),h.ModuleManager.has(p.ModuleName.HLS)&&this.ie.isHlsManifest()){var r=h.ModuleManager.get(p.ModuleName.HLS).selectors,o=r.getHlsState;"EVENT"===(0,r.getPlaylistType)(o(this.ue().getState()))?(e.start=0,e.end=t):e.start+=this.he}return e.end-=this.ie.getDesiredDistanceToLiveEdge(),e},e.prototype.getPendingSegmentInfoRequest=function(){return this.ge},e.prototype.setPendingSegmentInfoRequest=function(e){this.ge=e},e.prototype.canSwitchRepresentation=function(e){var t,i=this.getSegmentListEntries(this.ee)[this.de];if(!i)return!0;var n=function(e,t,i){return void 0!==t.startTime&&void 0!==t.duration&&Math.abs(e-(t.startTime+t.duration))<i}(e,i,this.ce.LL_HLS_SEGMENT_END_TIME_MATCHING_TOLERANCE);if(!M(i)&&n)return!0;var r=this.He(e);return!((null===(t=null==i?void 0:i.parts)||void 0===t?void 0:t.length)&&A(i,e,r)!==i.parts[0])},e.prototype.getLatestTimeForPossibleSwitch=function(e){var t,i=this.nf(e),n=i.isLoadingCurrentSegmentsParts,r=i.currentSegment;return r&&n&&null!==(t=r.startTime)&&void 0!==t?t:e},e.prototype.adjustTimeToNextSegmentStart=function(e){var t=this.nf(e),i=t.isLoadingCurrentSegmentsParts,n=t.currentSegment;return i&&(null==n?void 0:n.startTime)&&(null==n?void 0:n.duration)?n.startTime+n.duration:e},e.prototype.nf=function(e){var t,i=function(e,t){var i,n,r;if(t&&!(t.length<1)&&(null===(i=t[0])||void 0===i?void 0:i.duration)){var o=(0,y.findSegmentIndexForTime)(t,e,t[0].duration),a=null===o,s=e<(null!==(r=null===(n=t[0])||void 0===n?void 0:n.startTime)&&void 0!==r?r:1/0),u=t[t.length-1];if(void 0!==u.startTime&&void 0!==u.duration){var c=e>u.startTime+u.duration;if(!(a||s||c))return t[o]}}}(e,this.getSegmentListEntries(this.ee)),n=null===(t=null==i?void 0:i.parts)||void 0===t?void 0:t[0],r=this.He(e),o=!1;if(n&&i){var a=A(i,e,r);o=void 0!==a&&a!==n}return{currentSegment:i,isLoadingCurrentSegmentsParts:o}},e.prototype.dispose=function(){this.ce=null,this.ie=null,this.fe=null,this.ee=null,this.ie=null,this.ge=null,this.ke=null},e}();function T(e,t){var i=e[String(t)];return i&&i.startTime>0?i.startTime:(i=e[String(t-1)])&&i.endTime>0?i.endTime:null}function b(e,t,i){var n;e.length&&i.hasSegmentStartTimeForHlsRepresentation(t)&&(null!=e[0].startTime?n=(0,u.findIndexFromEnd)(e,(function(e){return null!=e.startTime}))+1:(e[0].startTime=i.getStartTimeForHlsSegment(t,e[0]),n=1),(0,u.forEachFromIndex)(e,n,(function(e,t){return t.startTime=e.startTime+e.duration})))}function M(e){return e.url.endsWith(t.PHANTOM_SEGMENT_URL)}function I(e,i){var n=i.duration-e.duration;return P(i,e,["url","mediaURL","duration","parts","init","key","discontinuitySequenceNumber","isDiscontinuityStart"]),!e.url.endsWith(t.PHANTOM_SEGMENT_URL)&&(e.url=(0,s.forceReallocation)(e.url)),n}function P(e,t,i){i.forEach((function(i){return t[i]=e[i]}))}function A(e,t,i){var n,r=null===(n=e.parts)||void 0===n?void 0:n.every(y.isSegmentTiming);if(e.parts&&r){var o=e.parts,a=o.reduce((function(e,t){return e+t.duration}),0)/o.length,s=(0,y.findSegmentIndexForTime)(o,t,a);if(null!=s)return i?e.parts[0]:(s=R(t,s,o),e.parts[s])}}function R(e,t,i){var n=i[t],r=n.startTime+n.duration;return Math.abs(e-n.startTime)<=Math.abs(e-r)?t:t+1}t.SegmentListMPDHandler=S},63147:function(e,t,i){var n=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.RepresentationUpdater=void 0;var r=i(88052),o=i(62756),a=i(60729),s=i(14302),u=function(e){function t(t,i,n,r){var o=e.call(this,t,r)||this;return o.context=t,o.representation=i,o.manifestLoader=n,o}return n(t,e),t.prototype.getRepresentation=function(){return this.representation},t.prototype.setRepresentation=function(e){this.representation._internalId.equals(e._internalId)||this.cancel(),this.representation=e,this.scheduleUpdate(!0)},t.prototype.updateRepresentation=function(){return this.getPayload()},t.prototype.stopRepresentationUpdate=function(t){return e.prototype.stop.call(this),this.manifestLoader.stopRepresentationUpdate(t)},t.prototype.update=function(){var e=this;return this.manifestLoader.updateRepresentation(this.representation).then((function(t){if(e.representation._id!==t._id)throw s.REPRESENTATION_UPDATE_CANCEL;return e.representation=t,t}))},t.prototype.getReloadIntervalInSeconds=function(){var e,t;return this.representation._requestTimestamp?(0,a.isPlayingLowLatencyHls)(this.context)&&(null===(e=r.ModuleManager.get(o.ModuleName.HLS))||void 0===e?void 0:e.canMakeBlockingPlaylistReload(this.representation,this.context.settings))?0:null!==(t=this.representation._updateInterval)&&void 0!==t?t:1/0:0},t.prototype.getLastReloadTimestamp=function(){return this.representation._requestTimestamp?this.representation._requestTimestamp:0},t}(s.AbstractUpdater);t.RepresentationUpdater=u},64922:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.TechnologyChecker=void 0;var n=i(88052),r=i(62756),o=function(){function e(){}return e.prototype.getSupportedTechnologies=function(){return n.ModuleManager.has(r.ModuleName.RendererMse)?n.ModuleManager.get(r.ModuleName.RendererMse).technologyChecker.getSupportedTechnologies():[]},e}();t.TechnologyChecker=o},65244:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentLoader=t.State=t.SegmentLoadingErrorReason=void 0;var r,o,a=i(66790),s=i(40306),u=i(3336),c=i(80813),d=i(3714),l=i(77401),h=i(4131),p=i(43446),f=i(57456),g=i(29669),m=i(91678),v=i(46151),y=i(33436),S=i(70233),T=i(85434),b=i(89927),M=i(88844),I=i(23068),P=i(88052),A=i(62756),R=i(95880),E=i(34795),C=i(87187),_=i(44115),B=i(66628),N=i(33004),O=i(17382),k=i(23133),L=i(94618),D=i(689),x=i(97587);!function(e){e.CANCEL="CANCEL",e.ERROR_LOADING="ERROR_LOADING",e.ERROR_DECRYPTING="ERROR_DECRYPTING",e.BUSY="BUSY",e.UNKNOWN="UNKNOWN",e.TIMEOUT="TIMEOUT",e.ABR_TIMEOUT="ABR_TIMEOUT"}(r||(t.SegmentLoadingErrorReason=r={})),function(e){e[e.IDLE=1]="IDLE",e[e.LOADING=2]="LOADING",e[e.CANCELLING=3]="CANCELLING",e[e.TERMINATED=4]="TERMINATED",e[e.TIMEOUT=5]="TIMEOUT",e[e.ABR_TIMEOUT=6]="ABR_TIMEOUT"}(o||(t.State=o={}));var w=function(){function e(e,t,i,r){void 0===r&&(r=!1);var a=this;if(this.context=e,this.cancelLoading=function(e){var t,i,n,r,s,u,c;if(void 0===e&&(e=o.CANCELLING),(0,M.clearTimeoutIfDefined)(a.NH),a.NH=void 0,(0,M.clearIntervalIfDefined)(a.OH),a.OH=void 0,a.isLoading()){var d=a.XH[a.aH];if(delete a.XH[a.aH],a.eH=e,a.PH.cancel(),void 0!==a.YH){var l=null!==(i=null===(t=a.YH.responseTiming)||void 0===t?void 0:t.headersReceivedTimestamp)&&void 0!==i?i:-1,p=null!==(r=null===(n=a.YH.responseTiming)||void 0===n?void 0:n.openedTimestamp)&&void 0!==r?r:-1,f=null!==(s=a.YH.elapsedTime)&&void 0!==s?s:-1,g=l-p;f>=0&&g>=0&&f>g&&a.context.store.dispatch((0,m.addMetricsValue)(a.MH,y.MetricType.DownloadInformation,{bytes:a.YH.loadedBytes,time:f,timeToFirstByte:g})),(null===(u=a.YH)||void 0===u?void 0:u.chunks)&&d&&a.kH(d),a.gH={success:!1,httpStatus:408,url:a.aH,downloadTime:f,size:a.YH.loadedBytes,duration:null!==(c=a.ZH)&&void 0!==c?c:0,isInit:a.cH,mimeType:a.MH,uid:void 0,timeToFirstByte:(0,h.hasLoadedData)(a.YH)?g:-1}}a.YH=void 0}},this.qH=function(){var e,t,i,r=null!==(i=null===(t=null===(e=a.YH)||void 0===e?void 0:e.responseTiming)||void 0===t?void 0:t.sendTimestamp)&&void 0!==i?i:-1;void 0===a.YH||r<0||a.rH(n(n({},a.YH),{elapsedTime:p.TimingUtil.getHiResTimestamp()-r}))},this.rH=function(e){var t,i=null!==(t=e.elapsedTime)&&void 0!==t?t:-1,r=a.XH[a.aH];a.YH=n(n({},e),{segmentDuration:a.ZH,url:a.aH,representationBitrate:r.bitrate}),a.cH||i<=.5||a.eH!==o.LOADING||a.QH(a.YH,r.internalRepresentationId)&&a.cancelLoading(o.ABR_TIMEOUT)},this.CI=function(e,t,i){var n,r,o,s,u,c,l=a.context.store.getState(),h=l?(0,v.getMetricsState)(l):void 0;if(a.context.logger.debug("Downloaded ".concat(a.MH," ").concat(a.cH?"init":"data"," segment in: ").concat(null===(n=e.elapsedTime)||void 0===n?void 0:n.toFixed(2),", TTFB: ").concat(null===(r=e.timeToFirstByte)||void 0===r?void 0:r.toFixed(2),", quality: ").concat(null!==(s=null===(o=a.XH[a.aH])||void 0===o?void 0:o.representationId)&&void 0!==s?s:"")),!a.cH&&h&&a.MH in h&&(a.context.store.dispatch((0,m.addMetricsValue)(a.MH,y.MetricType.DownloadTime,t)),a.context.store.dispatch((0,m.addMetricsValue)(a.MH,y.MetricType.DownloadSuccess,!0)),(0,f.isDownloadTimeInformationValid)(e)&&a.context.store.dispatch((0,m.addMetricsValue)(a.MH,y.MetricType.DownloadInformation,{bytes:e.length,time:e.elapsedTime,timeToFirstByte:e.timeToFirstByte})),null===(u=a.YH)||void 0===u?void 0:u.chunks)){a.KH.debug("[SegmentLoader] ",a.YH.chunks);var p=(0,O.calculateDownloadRates)(a.YH.chunks),g=(0,O.calcAverage)((0,O.filterValuesExceedingAverageByMargin)(p)),S=a.YH.loadedBytes,T=a.XH[a.aH],b=T.duration,I=void 0!==b?(0,N.bytesToBits)(S)/b:void 0,P=T.bitrate;a.KH.debug("[SegmentLoader] DL rate (AVG-based filter): ".concat((0,O.bpsToMbps)(g),", segmentBitrate: ").concat(I)),a.context.store.dispatch((0,m.addMetricsValue)(a.MH,y.MetricType.ChunkedDownloadInformation,{downloadRate:g,segmentBitrate:I,representationBitrate:P}))}(0,M.clearTimeoutIfDefined)(a.NH),a.NH=void 0,(0,M.clearIntervalIfDefined)(a.OH),a.OH=void 0;var A={success:!0,httpStatus:e.status,url:e.url,downloadTime:e.elapsedTime,size:e.length,duration:a.ZH,isInit:a.cH,mimeType:a.MH,uid:a.bH,timeToFirstByte:null!==(c=e.timeToFirstByte)&&void 0!==c?c:-1};a.LH.dispatchEvent(d.PlayerEvent.SegmentRequestFinished,A)},this.KH=e.logger,this.LH=e.eventHandler,this.SH=e.config.tweaks.segmentLoaderArgs||null,this.RH=e.config.tweaks.segmentLoader||null,this.ZH=1,this.eH=o.IDLE,this.MH=t,this.QH=i,this.WH=null,this.XH={},this.gH=null,this.jH=r,P.ModuleManager.has(A.ModuleName.ContainerMP4)){var s=P.ModuleManager.get(A.ModuleName.ContainerMP4);this.iH=new s.CmafChunkParser(this.context)}this.LI()}return e.prototype.kH=function(e){var t,i,n,r,o,a,s,u,c=(null!==(n=null===(i=null===(t=this.YH)||void 0===t?void 0:t.responseTiming)||void 0===i?void 0:i.progressTimestamp)&&void 0!==n?n:p.TimingUtil.getHiResTimestamp())-(null!==(a=null===(o=null===(r=this.YH)||void 0===r?void 0:r.responseTiming)||void 0===o?void 0:o.headersReceivedTimestamp)&&void 0!==a?a:0),d=(0,N.bytesToBits)(null!==(u=null===(s=this.YH)||void 0===s?void 0:s.loadedBytes)&&void 0!==u?u:0)/c,l=void 0===e.duration?1:Math.max(1-c/e.duration,.1);this.context.store.dispatch((0,m.addMetricsValue)(this.MH,y.MetricType.ChunkedDownloadInformation,{downloadRate:d*l,segmentBitrate:void 0,representationBitrate:e.bitrate}))},e.prototype.isLoading=function(){var e=Boolean(this.TH&&this.TH.isLoading());return this.eH===o.LOADING||this.eH===o.CANCELLING||this.PH&&this.PH.isLoading()||e},e.prototype.isRetrying=function(){return this.PH&&this.PH.isRetrying()},e.prototype.load=function(e){var t=this;if(this.isLoading())return this.KH.debug("Error loading segment, loader is busy!"+this.aH),Promise.reject({reason:r.BUSY});this.PH&&this.PH.dispose();var i=this.fH;return e.isPreloadHint&&(i=n(n({},i),{maxRetries:0})),this.gH=null,this.YH=void 0,this.PH=(0,D.getLoader)(this.context,i),this.eH=o.LOADING,this.aH=e.url,this.bH=btoa(this.aH),this.XH[this.aH]=e,this.cH=e.isInitSegment,this.ZH=e.duration,this.WH=this.lH(e).then((function(){return t.DI(e)})).catch((function(e){throw t.eH=o.IDLE,t.WH=null,e})),this.WH},e.prototype.lH=function(e){var t,i=this;this.dH=e.key;var n=Boolean(null===(t=this.dH)||void 0===t?void 0:t.buffer);if(!this.dH||n)return Promise.resolve();switch(this.dH.method){case a.HlsEncryptionMethod.AES_128:return this.nH(e).then((function(e){e&&(i.dH.buffer=e)}));case a.HlsEncryptionMethod.SAMPLE_AES:return this.LH.fireError(new u.PlayerError(s.ErrorCode.SOURCE_ENCRYPTION_METHOD_NOT_SUPPORTED,{"encryption-method":this.dH.method,supported:a.HlsEncryptionMethod.AES_128},"The ".concat(a.HlsEncryptionMethod.SAMPLE_AES," encryption method is not supported."))),Promise.reject({reason:r.ERROR_DECRYPTING});case a.HlsEncryptionMethod.SAMPLE_AES_CTR:return Promise.resolve();default:return Promise.reject({reason:r.ERROR_DECRYPTING})}},e.prototype.getCurrentLoadPromise=function(){return this.WH},e.prototype.mH=function(){var e;return null===(e=this.context.serviceManager)||void 0===e?void 0:e.get(c.ServiceName.SourceStoreService,this.context.sourceContext.sourceIdentifier)},e.prototype.nH=function(e){var t,i,n=null===(t=e.key)||void 0===t?void 0:t.uri,r=this.mH();if(!r||!n)return Promise.reject(new Error("Source store not available."));var o=r.getState(),a=(0,B.getEncryptionKey)(o,n);return(null==a?void 0:a.uri)?a.key?Promise.resolve(S.FormatHelper.hexToBytes(a.key).buffer):(0,k.waitForKeyToBeLoaded)(r,n):(null!==(i=this.TH)&&void 0!==i||(this.TH=new L.KeyLoader(this.context)),(0,k.addEncryptionKeyToStore)(n,this.TH,r))},e.prototype.oH=function(e,t){var i;return this.jH||!(null===(i=this.context.adRestorationOptimizationService)||void 0===i?void 0:i.hasPrefetchedSegment(t))?null:(this.XH[e]&&(this.XH[e].wasPrefetched=!0),this.context.adRestorationOptimizationService.getPrefetchedSegment(t,this.QH))},e.prototype.pH=function(){(0,M.clearIntervalIfDefined)(this.OH);var e=(0,b.toMilliSeconds)(this.context.settings.SEGMENT_LOADING_PROGRESS_CHECK_INTERVAL);this.OH=e<=0?void 0:window.setInterval(this.qH,e)},e.prototype.DI=function(e){var t,i=this,n={};e.byteRange&&(n.Range=["bytes=",e.byteRange.start,"-",e.byteRange.end].join(""));var r=this.context.sourceContext.source&&this.context.sourceContext.source.hasOwnProperty("options")&&Boolean(this.context.sourceContext.source.options.withCredentials);(0,M.clearTimeoutIfDefined)(this.NH),this.NH=void 0,(0,M.clearIntervalIfDefined)(this.OH),this.OH=void 0,this.cH||e.preventDownloadCanceling||(this.NH=window.setTimeout((function(){return i.cancelLoading(o.TIMEOUT)}),(0,b.toMilliSeconds)(this.context.settings.XHR_TIMEOUT)));var a=this.oH(this.aH,e);if(a)return this.context.logger.debug("return prefetched segment for",this.aH),a.then((function(e){var t=new x.Stream;return i.KI(),t.add(e),e.getSegmentInfo().wasPrefetched=!0,t.end(),t})).catch((function(e){throw e}));var s=null===(t=this.mH())||void 0===t?void 0:t.getState(),u=s&&(0,_.getContainerFormat)(s,T.MimeTypeHelper.getMediaType(this.MH)),c=(null==u?void 0:u.source)===E.ContainerFormat.MP4,d=Boolean(this.dH)||Boolean(this.VH),l=this.context.settings.CHUNKED_CMAF_STREAMING&&this.iH&&c&&!e.isInitSegment&&!d;return this.pH(),this.PH.load(this.aH,g.HttpRequestMethod.GET,g.HttpResponseType.ARRAYBUFFER,null,n,r,this.MH,l).then((function(e){return i.JI(e.body)})).catch((function(e){throw i.EI(e)}))},e.prototype.EI=function(e){var t,i;return[o.CANCELLING,o.TIMEOUT,o.ABR_TIMEOUT].includes(this.eH)?(this.KH.debug("Cancelled ".concat(this.MH," download [").concat(this.aH,"]")),this.gH&&(null===(t=this.LH)||void 0===t||t.dispatchEvent(d.PlayerEvent.SegmentRequestFinished,this.gH)),i={reason:H(this.eH)}):this.eH===o.LOADING&&(i={reason:r.ERROR_LOADING,info:{response:e,isInit:this.cH}}),i},e.prototype.getAllLoadingPeriodIds=function(){var e=this;return Object.keys(this.XH).map((function(t){var i;return null===(i=e.XH[t])||void 0===i?void 0:i.periodId})).filter(I.isDefined)},e.prototype.getCurrentLoadingSegmentInfo=function(){return this.isLoading()&&this.aH&&this.XH[this.aH]?this.XH[this.aH]:null},e.prototype.attachDecrypter=function(e){this.VH=this.VH||e},e.prototype.attachClearKeyLoader=function(e){this.UH=this.UH||e},e.prototype.terminate=function(){var e,t=this;this.isLoading()?(null===(e=this.WH)||void 0===e||e.catch((function(){t.eH=o.TERMINATED})),this.cancelLoading()):this.eH=o.TERMINATED},e.prototype.FI=function(e){var t,i;i=this.cH?C.SegmentInitType.INIT:C.SegmentInitType.NONE;var n=this.XH[this.aH],r=new C.Segment(e,this.MH,null!==(t=n.codecs)&&void 0!==t?t:null,n.periodId,this.ZH,i,!0,e.byteLength,n.internalRepresentationId,n.startTime);return r.setUrl(this.aH),r.setSegmentInfo(n),r},e.prototype.GI=function(e,t){return this.dH&&this.dH.method===a.HlsEncryptionMethod.AES_128&&!t?this.HI(e):this.VH?this.II(e):Promise.resolve(e)},e.prototype.HI=function(e){var t,i;return P.ModuleManager.has(A.ModuleName.Crypto)?(null===(t=this.dH)||void 0===t?void 0:t.buffer)&&(null===(i=this.dH)||void 0===i?void 0:i.iv)?(this.KH.debug("Decrypting AES-128-encrypted segment ".concat(this.aH,", ")+"KEY: 0x".concat(S.FormatHelper.bytesToHex(this.dH.buffer),", ")+"IV: 0x".concat(this.dH.iv)),new(0,P.ModuleManager.get(A.ModuleName.Crypto).CryptoApi)(this.context,"AES-CBC",this.dH.buffer,this.dH.iv,this.MH).decrypt(e).then((function(e){if(!e||0===e.byteLength)throw{reason:r.ERROR_DECRYPTING};return e})).catch((function(){throw{reason:r.ERROR_DECRYPTING}}))):(this.KH.debug("Error decrypting AES-128-encrypted segment, missing key or IV"),Promise.reject({reason:r.ERROR_DECRYPTING})):(this.context.eventHandler.fireError(new R.PlayerModuleMissingError(A.ModuleName.Crypto)),Promise.reject({reason:r.ERROR_DECRYPTING}))},e.prototype.II=function(e){var t=this,i=Promise.resolve(e);if(this.cH)i=this.VH.parseInitSegment(e),this.UH&&(i=i.then((function(e){return t.UH.load(t.VH.getKeyIds()).then((function(i){return t.VH.addKeys(i),Promise.resolve(e)}))})));else if(this.VH.isEncrypted()){var n=S.FormatHelper.bytesToHex(this.VH.getKey());this.KH.debug("Decrypting SAMPLE-AES-encrypted segment ".concat(this.aH,", KEY: 0x").concat(n)),i=this.VH.decryptDataSegment(e)}return i.catch((function(){throw{reason:r.ERROR_DECRYPTING}}))},e.prototype.JI=function(e,t){var i=this;if(void 0===t&&(t=!1),e instanceof ArrayBuffer){this.hH=new x.Stream;var n=Date.now();this.GI(e,t).then((function(t){var a;i.eH===o.TERMINATED||i.eH===o.CANCELLING?i.hH.abort(r.CANCEL):(i.hH.add(i.FI(t)),i.hH.end());var s=i.XH[i.aH];if(e!==t&&s){var u=(0,b.toSeconds)(Date.now()-n),c=s.internalRepresentationId,d={time:u,representationId:c};i.context.store.dispatch((0,m.addMetricsValue)(i.MH,y.MetricType.DecryptionTime,d)),i.context.logger.debug("Decrypted ".concat(i.MH," segment in: ").concat(null==u?void 0:u.toFixed(2),", quality: ").concat(null!==(a=null==c?void 0:c.representationId)&&void 0!==a?a:""))}})).catch((function(){return i.hH.abort(r.ERROR_DECRYPTING)})).finally((function(){return i.KI()}))}else this.hH=e.transform((function(e){return i.iH.appendData(e),i.iH.getCompleteChunks()}),(function(){}),(function(e){return e.message})).transform((function(e){return i.FI(e)}),(function(){return i.KI()}),(function(e){i.KH.debug("Error handling fetch segment request",e);var t=r.ERROR_LOADING;return e.message===l.RequestError.Canceled&&(t=H(i.eH)),i.KI(),t}));return Promise.resolve(this.hH)},e.prototype.KI=function(){this.eH=o.IDLE,this.WH=null,this.iH&&this.iH.reset(),this.XH&&delete this.XH[this.aH]},e.prototype.dispose=function(){this.terminate(),(0,M.clearTimeoutIfDefined)(this.NH),(0,M.clearIntervalIfDefined)(this.OH),this.PH&&this.PH.dispose&&this.PH.dispose(),this.TH&&this.TH.dispose(),P.ModuleManager.has(A.ModuleName.Crypto)&&P.ModuleManager.get(A.ModuleName.Crypto).WebWorkerCrypto.dispose(),this.PH=null,this.RH=null,this.SH=null,this.TH=null,this.aH=null,this.bH=null,this.dH=null,this.XH={},this.YH=void 0,this.VH=null,this.LH=null},e.prototype.LI=function(){var e=this;this.fH=n(n({},(0,D.getLoaderConfig)(this.context,this.MH)),{onSuccess:this.CI,onProgress:this.rH,onFailure:function(t,i){var n,r;e.context.store.dispatch((0,m.addMetricsValue)(e.MH,y.MetricType.DownloadSuccess,!1)),(null==i?void 0:i.name)===l.RequestError.TimedOut&&(e.eH=o.TIMEOUT),(0,M.clearTimeoutIfDefined)(e.NH),e.NH=void 0,(0,M.clearIntervalIfDefined)(e.OH),e.OH=void 0,delete e.XH[e.aH],e.LH.dispatchEvent(d.PlayerEvent.SegmentRequestFinished,{success:!1,httpStatus:t&&t.status||0,url:null!==(n=null==t?void 0:t.url)&&void 0!==n?n:e.aH,downloadTime:-1,size:-1,duration:e.ZH,isInit:e.cH,mimeType:e.MH,uid:void 0,timeToFirstByte:null!==(r=null==t?void 0:t.timeToFirstByte)&&void 0!==r?r:-1})}})},e}();function H(e){switch(e){case o.ABR_TIMEOUT:return r.ABR_TIMEOUT;case o.TIMEOUT:return r.TIMEOUT;default:return r.CANCEL}}t.SegmentLoader=w},65272:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.HeartbeatService=void 0;var n=i(80813),r=i(88844),o=function(){function e(e,t){this.serviceManager=e,this.mediaPlayerController=t,this.Qz=-1}return Object.defineProperty(e.prototype,"Rz",{get:function(){return this.serviceManager.get(n.ServiceName.StreamTimeService)},enumerable:!1,configurable:!0}),e.prototype.Sz=function(){var e=this;(0,r.clearTimeoutIfDefined)(this.Qz),this.Qz=window.setTimeout((function(){return e.beat()}),250)},e.prototype.beat=function(){this.Sz(),s(this.mediaPlayerController,this.Rz)},Object.defineProperty(e.prototype,"started",{get:function(){return-1!==this.Qz},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.beat()},e.prototype.stop=function(){(0,r.clearTimeoutIfDefined)(this.Qz),this.Qz=-1},e.prototype.dispose=function(){this.stop()},e}();function a(e){e.shouldClearSubtitleServiceBuffers()&&e.clearSubtitleServiceBuffers()}function s(e,t){e.shouldSuspendHeartbeat()||function(e,t){var i=e.getActiveSegmentControllers(),n=i.length>0;n&&i.forEach((function(i){var n=t.getTimeForNextSegment(i.getMimeType());e.getNextSegment(i,n)})),e.areAllLoadersReady()&&(n?a(e):e.isLoadingLastPeriod()?function(e){e.areMediaTypesFinalForPlayingPeriod()?e.maybeStop():e.isAVCompletelyLoaded()&&e.signalEndOfStream(),a(e)}(e):(e.switchLoadingPeriod(),s(e,t)))}(e,t)}t.HeartbeatService=o},65439:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.isSegmentTiming=function(e){return"startTime"in e&&(0,n.isNumber)(e.startTime)&&"duration"in e&&(0,n.isNumber)(e.duration)},t.findSegmentIndexForTime=function(e,t,i){var n=!e||!e.length,o=t<e[0].startTime+e[0].duration;if(n||o)return 0;var a=e.length-1;if(t>=e[a].startTime)return a;var s=Math.max(t-e[0].startTime,0),u=Math.min(Math.floor(s/i),e.length-1);return r(e[0])&&r(e[u])?function(e,t,i){for(;e[i]&&e[i].startTime>t;)i--;for(;e[i]&&e[i].startTime+e[i].duration<=t;)i++;return i=Math.max(i,0),i=Math.min(i,e.length-1)}(e,t,u):null},t.createInitSegmentInfoBase=function(e){var t=e._internalId;return{internalRepresentationId:t,representationId:t.representationId,periodId:t.periodId,mimeType:e._mimeType,isInitSegment:!0}},t.getSegmentInfoTimeRange=function(e){if((null==e?void 0:e.duration)&&void 0!==(null==e?void 0:e.startTime))return{start:e.startTime,end:e.startTime+e.duration}};var n=i(23068);function r(e){return e&&(0,n.isNumber)(e.startTime)}},66628:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getEncryptionKey=t.getAllEncryptionKeys=void 0,t.getAllEncryptionKeys=function(e){return null==e?void 0:e.encryptionKeys},t.getEncryptionKey=function(e,t){var i;return null===(i=null==e?void 0:e.encryptionKeys)||void 0===i?void 0:i.find((function(e){return e.uri===t}))}},67580:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestCachingService=void 0;var n=i(58313),r=function(){function e(){this.Qb={}}return e.prototype.set=function(e,t,i){var r=n.URLHelper.toFullUrl(e);o(r,this.Qb),this.Qb[r][t]=i},e.prototype.Rb=function(e,t){var i=n.URLHelper.toFullUrl(e);o(i,this.Qb),this.Qb[i].expire=t},e.prototype.get=function(e,t){var i=n.URLHelper.toFullUrl(t),r=this.Qb[i];if(r&&function(e){return e>=Date.now()}(r.expire))return r[e];delete this.Qb[i]},e.prototype.cacheHttpResponse=function(e,t,i){void 0===i&&(i=1/0),this.set(t,"httpResponse",e),this.Rb(t,i)},e.prototype.cacheParsedManifest=function(e,t,i){void 0===i&&(i=1/0),this.set(t,"parsedManifest",e),this.Rb(t,i)},e.prototype.cacheSegmentList=function(e,t,i){void 0===i&&(i=1/0),this.set(t,"segmentList",e),this.Rb(t,i)},e.prototype.getHttpResponse=function(e){return this.get("httpResponse",e)},e.prototype.getParsedManifest=function(e){return this.get("parsedManifest",e)},e.prototype.getSegmentList=function(e){return this.get("segmentList",e)},e.prototype.clear=function(){this.Qb={}},e.prototype.dispose=function(){this.Qb={}},e}();function o(e,t){t[e]||(t[e]={})}t.ManifestCachingService=r},68981:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.adjustTargetTimeToPeriodStart=function(e,t,i,n){var r,o=i.getPeriodIdForTime(e);if(!o)return e;var a=i.isTimeNearPeriodEnd(e,o,t),s=i.getNextPeriod(o);return a&&s?(n.debug("Target time ".concat(e," too close to end of period ").concat(o,", adjusting to next period start ").concat(s.start)),null!==(r=s.start)&&void 0!==r?r:e):e}},69102:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.areAudioMimeCodecsCompatible=function(e,t){return e.mimeType===t.mimeType&&n.CodecStringHelper.canSwitchBetweenAudioCodecs(e.codec,t.codec)},t.hasContentProtection=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),0===e.length&&0===t.length||e.length>0&&t.length>0};var n=i(34047)},71018:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentLoaderPool=void 0,t.getLoaderPoolSize=y;var n=i(91678),r=i(46151),o=i(33436),a=i(15971),s=i(94685),u=i(85434),c=i(23068),d=i(88052),l=i(62756),h=i(39523),p=i(99529),f=i(65439),g=i(65244),m=1,v=function(){function e(e,t){this.context=e,this.iY=t.mimeType,this.jY=[],this.kY=t.shouldDownloadBeCancelledCallback,this.addLoaders(y(this.iY,e.settings.SEGMENT_LOADER_POOL_SIZE)),this.nY()}return e.prototype.addLoaders=function(e){for(var t=0;t<e;t++)this.jY.push(new g.SegmentLoader(this.context,this.iY,this.kY))},e.prototype.lY=function(e){if(this.context.segmentPrefetchingService&&this.context.segmentPrefetchingService.hasMp4Decrypter(this.iY))return this.context.segmentPrefetchingService.getDecrypter(this.iY);var t=d.ModuleManager.get(l.ModuleName.Crypto).createDecrypter,i=T(e.drm.clearkey)?e.drm.clearkey:[];return t(this.context,this.iY,i)},e.prototype.mY=function(e){return new(0,d.ModuleManager.get(l.ModuleName.Crypto).ClearKeyLoader)(this.context,e)},e.prototype.nY=function(){var e=this.context.sourceContext.source,t=function(e){var t,i;return T(null===(t=null==e?void 0:e.drm)||void 0===t?void 0:t.clearkey)||S(null===(i=null==e?void 0:e.drm)||void 0===i?void 0:i.clearkey)}(e)?this.lY(e):null;if(t&&(this.jY.forEach((function(e){return e.attachDecrypter(t)})),this.context.segmentPrefetchingService&&this.context.segmentPrefetchingService.setDecrypter(t,this.iY),S(e.drm.clearkey))){var i=this.mY(e.drm.clearkey);this.jY.forEach((function(e){return e.attachClearKeyLoader(i)}))}},e.prototype.isLoading=function(){return this.jY.some((function(e){return e.isLoading()}))},e.prototype.isFreeLoaderAvailable=function(){return this.jY.some((function(e){return!e.isLoading()}))},e.prototype.oY=function(e){var t=(0,r.getMetricsHistoryFromInstanceState)(this.context.store.getState(),"default",o.MetricType.RequestedRepresentations);(t?t.map((function(e){return e.value})):[]).includes(e)||this.context.store.dispatch((0,n.addMetricsValue)("default",o.MetricType.RequestedRepresentations,e))},e.prototype.load=function(e){var t=this.jY.find((function(e){return!e.isLoading()}));if(!t)return this.context.logger.debug("Failed to load segment. No free loader!",e.url),Promise.reject(null);this.oY(e.internalRepresentationId),this.context.logger.debug("[SegmentLoader ".concat(this.jY.indexOf(t),"][").concat(e.mimeType,"][").concat(e.representationId,"] Loading ").concat(e.startTime," ").concat(e.url));var i=(0,f.getSegmentInfoTimeRange)(e),n=(0,p.getTrackIdentifier)(e),r=(0,a.getSourceStore)(this.context);return i&&(null==r||r.dispatch((0,h.addStreamTimeRange)(n,i,p.StreamTimeRangeType.Loading))),t.load(e).catch((function(e){throw i&&(null==r||r.dispatch((0,h.removeStreamTimeRange)(n,i,p.StreamTimeRangeType.Loading))),e}))},e.prototype.cancelLoading=function(){var e=this;return Promise.all(this.jY.map((function(e){return e.isLoading()&&e.cancelLoading(),Promise.resolve(e.getCurrentLoadPromise())}))).then((function(){})).catch((function(t){(null==t?void 0:t.reason)!==g.SegmentLoadingErrorReason.CANCEL&&(0,s.isContextAvailable)(e.context)&&e.context.logger.debug("Error while loading a segment ",t)}))},e.prototype.getLoadingPeriodIds=function(){return this.jY.flatMap((function(e){return e.getAllLoadingPeriodIds()}))},e.prototype.dispose=function(){this.cancelLoading(),this.jY.forEach((function(e){return e.dispose()})),this.jY=null},e}();function y(e,t){var i=u.MimeTypeHelper.extractContentType(e);return t&&(0,c.isNumber)(t[i])?Math.max(m,t[i]):m}function S(e){return Boolean(null==e?void 0:e.LA_URL)}function T(e){return(null==e?void 0:e.length)>0}t.SegmentLoaderPool=v},71050:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestActionType=void 0,function(e){e.SetManifest="@instance/manifest/setmanifest",e.SetManifestInitialized="@instance/manifest/setmanifestinitialized",e.RemoveRepresentations="@instance/manifest/removerepresentations",e.UpdateManifest="@instance/manifest/updatemanifest",e.UpdateAdaptationSet="@instance/manifest/updateadaptationset",e.UpdateRepresentation="@instance/manifest/updaterepresentation",e.UpdatePeriodTiming="@instance/manifest/updateperiodtiming",e.AdjustPeriodStartTimes="@instance/manifest/adjustperiodstarttimes",e.SetRepresentationDrmKid="@instance/manifest/setrepresentationdrmkid",e.UpdateRepresentationFailedDownload="@instance/manifest/setrepresentationfaileddownload",e.SetRepresentationSegmentIndex="@instance/manifest/setrepresentationsegmentindex",e.SetRepresentationIsLoading="@instance/manifest/setrepresentationisloading",e.SetRepresentationSegmentIndexParsingError="@instance/manifest/setrepresentationsegmentindexparsingerror",e.SetRepresentationAnchorPoint="@instance/manifest/setrepresentationacnhorpoint",e.InitPlaybackTimesFromIndex="@instance/manifest/initplaybacktimesfromindex",e.InitPlaybackTimesFromReferenceSegment="@instance/manifest/initplaybacktimesfromreferencesegment",e.ResetSegmentPlaybackTimes="@instance/manifest/resetsegmentplaybacktimes"}(i||(t.ManifestActionType=i={}))},72498:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMostRecentlyRefreshedQuality=t.getSegmentInfos=t.getSegmentMapEntry=void 0,t.getSegmentMapEntry=function(e,t){return null==e?void 0:e.segmentInfoMap[t]},t.getSegmentInfos=function(e,i){var n,r;return null!==(r=null===(n=(0,t.getSegmentMapEntry)(e,i))||void 0===n?void 0:n.segmentInfos)&&void 0!==r?r:[]},t.getMostRecentlyRefreshedQuality=function(e){if(e)return Object.values(e.segmentInfoMap).filter((function(e){return null!=e.qualityInfo.lastUpdateTimestamp})).sort((function(e,t){var i=e.qualityInfo.lastUpdateTimestamp;return t.qualityInfo.lastUpdateTimestamp-i}))[0]}},73794:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.initializeHlsSegmentStartTimes=function(e,t,i){var o=t.sourceContext.sourceIdentifier,a=t.serviceManager.get(n.ServiceName.ManifestService,o);if(a&&!a.getAllAdaptationSets().some((function(e){return e.Representation.some((function(e){var t,i;return void 0!==(null===(i=null===(t=e.SegmentList)||void 0===t?void 0:t[0].SegmentURL[0])||void 0===i?void 0:i._playbackTime)}))}))){var s=e.getRepresentationId();a.initializeSegmentStartTimesFromStart(s),(0,r.assignSegmentStartTimesFromHlsRepresentation)(i.getSegmentListEntries(e.getRepresentationId()),s,a)}};var n=i(80813),r=i(63066)},73861:function(e,t,i){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.BufferReducer=void 0;var a=i(4524),s=i(3793),u=i(70118),c=i(59604);function d(){return{isLoadingRangeFinished:!1,isBufferBlockSwitchOngoing:!1,isTimestampRollingOver:!1,bufferStateMap:{}}}t.BufferReducer=(0,s.default)(d(),((n={})[u.BufferActionType.SetBufferMaxSize]=function(e,t){var i,n=t.payload;return r(r({},e),{bufferStateMap:r(r({},e.bufferStateMap),(i={},i[n.mimeType]=r(r({},e.bufferStateMap[n.mimeType]),{maxBufferSize:n.maxBufferSize}),i))})},n[u.BufferActionType.SetRendererRanges]=function(e,t){var i,n=t.payload;return r(r({},e),{bufferStateMap:r(r({},e.bufferStateMap),(i={},i[n.mimeType]=r(r({},e.bufferStateMap[n.mimeType]),{rendererRanges:n.ranges}),i))})},n[u.BufferActionType.SetBufferBlockSwitchOngoing]=function(e,t){var i=t.payload;return r(r({},e),{isBufferBlockSwitchOngoing:i.isOngoing})},n[u.BufferActionType.SetTimestampRollingOver]=function(e,t){var i=t.payload;return r(r({},e),{isTimestampRollingOver:i.isRollingOver})},n[u.BufferActionType.AddLoadedRange]=function(e,t){var i,n,s,u=t.payload,d=u.mimeType,l=u.range;if(!d)return e;var h=null!==(s=null===(n=e.bufferStateMap[d])||void 0===n?void 0:n.loadedRanges)&&void 0!==s?s:[];return h.some((function(e){return(0,a.isFullyIncluded)(l,e)}))?e:r(r({},e),{bufferStateMap:r(r({},e.bufferStateMap),(i={},i[d]=r(r({},e.bufferStateMap[d]),{loadedRanges:c.mergeBufferBlockTimeRanges.apply(void 0,o(o([],h,!1),[l],!1))}),i))})},n[u.BufferActionType.RemoveLoadedRange]=function(e,t){var i,n,o,s=t.payload,u=s.mimeType,d=s.range;if(!u)return e;var l=null!==(o=null===(n=e.bufferStateMap[u])||void 0===n?void 0:n.loadedRanges)&&void 0!==o?o:[];return l.every((function(e){return!(0,a.isOverlapping)(d,e)}))?e:r(r({},e),{bufferStateMap:r(r({},e.bufferStateMap),(i={},i[u]=r(r({},e.bufferStateMap[u]),{loadedRanges:(0,c.excludeBufferBlockTimeRange)(l,d)}),i))})},n[u.BufferActionType.ResetLoadedRanges]=function(e,t){var i,n,o,a=t.payload.mimeType;if(void 0===a){if(void 0===e)return d();var s=r(r({},e),{bufferStateMap:r({},e.bufferStateMap)});return Object.keys(s.bufferStateMap).forEach((function(e){s.bufferStateMap[e]=r(r({},s.bufferStateMap[e]),{loadedRanges:[]})})),s}return(null!==(o=null===(n=e.bufferStateMap[a])||void 0===n?void 0:n.loadedRanges)&&void 0!==o?o:[]).length>0?r(r({},e),{bufferStateMap:r(r({},e.bufferStateMap),(i={},i[a]=r(r({},e.bufferStateMap[a]),{loadedRanges:[]}),i))}):e},n[u.BufferActionType.SetLoadingRangeFinished]=function(e,t){var i=t.payload.isFinished;return i!==e.isLoadingRangeFinished?r(r({},e),{isLoadingRangeFinished:i}):e},n))},77264:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Segregation=void 0,t.areSegregationCriteriaEqual=d,t.canReuseSourceBuffer=function(e,t,i){var o=function(){return(0,r.getCapabilities)().isTizen?v:(0,r.getCapabilities)().isLegacyEdge?S:(0,r.getCapabilities)()[n.CapabilityKey.isEdge]?m:(0,r.getCapabilities)()[n.CapabilityKey.isWebOS]?y:(0,r.getCapabilities)()[n.CapabilityKey.isPlayStation4]?f:(0,r.getCapabilities)()[n.CapabilityKey.isPlayStation5]?g:p}();return i.every((function(i){var n=i.mimeType;return o.canReuseSourceBuffers(e,t,n)}))};var n=i(7387),r=i(21513),o=i(34047),a=i(85434),s=i(15487),u=i(90685),c=function(){function e(e,t){this.requiredMediaTypes=e,this.settings=t,this.requiredMediaTypes=e}return e.prototype.f9=function(e){var t;return Boolean(null===(t=this.requiredMediaTypes[e.getPeriodId()])||void 0===t?void 0:t[e.getMimeType()])},e.prototype.g9=function(e,t){var i=this;if(void 0!==t.getSegmentInfo().discontinuitySequenceNumber)return!0;if(!this.f9(t))return!1;var n=t.getPeriodId(),r=this.requiredMediaTypes[n]||{},o=Object.keys(r).filter((function(e){return a.MimeTypeHelper.isAV(e)}));return e.length===o.length&&e.every((function(e){var t;return null===(t=i.requiredMediaTypes[n])||void 0===t?void 0:t[e.mimeType]}))},e.prototype.getSegregationCriteria=function(e){var t,i=function(e){return e.isEncrypted()?u.EncryptionState.Encrypted:u.EncryptionState.Clear}(e),n={encryption:i,codec:o.CodecStringHelper.extractCodec(e.getCodec())};if(this.settings.HLS_CLEAR_BUFFERS_ON_DISCONTINUITY_SWITCHES){var r=null===(t=e.getSegmentInfo())||void 0===t?void 0:t.discontinuitySequenceNumber;null!=r&&(n.discontinuityNumber=r)}return(this.settings.DASH_CLEAR_BUFFERS_ON_PERIOD_SWITCHES||(0,s.isTizen2016)())&&(n.periodId=e.getPeriodId()),n},e.prototype.canAddSegmentToBufferBlock=function(e,t,i){var n,r=t.getMediaTypes();if(0===r.length)return!0;if(!this.g9(r,e))return!1;var o=e.getMimeType(),a=t.getSegregationCriteria(o);if(a)return d(i,a);var s=null===(n=r.find((function(e){return e.mimeType!==o})))||void 0===n?void 0:n.mimeType;return!s||d(i,t.getSegregationCriteria(s),["codec","encryption"])},e}();function d(e,t,i){return void 0===i&&(i=[]),Object.keys(e).filter((function(e){return!i.includes(e)})).every((function(i){return t&&t[i]===e[i]}))}function l(e,t){var i=e.getMediaTypes().find((function(e){return e.mimeType===t}));return i?i.timescale:0}function h(e,t,i){return{currentCriteria:e.getSegregationCriteria(i),nextCriteria:t.getSegregationCriteria(i)}}t.Segregation=c;var p={canReuseSourceBuffers:function(e,t,i){var n=h(e,t,i);return T(n.currentCriteria,n.nextCriteria)}},f={canReuseSourceBuffers:function(e,t,i){var n=h(e,t,i),r=n.currentCriteria,o=n.nextCriteria;return T(r,o)&&b(r,o)&&M(r,o)&&function(e,t){return(null==e?void 0:e.periodId)===(null==t?void 0:t.periodId)}(r,o)&&I(e,t,i)}},g={canReuseSourceBuffers:function(e,t,i){var n=h(e,t,i),r=n.currentCriteria,o=n.nextCriteria;return T(r,o)&&b(r,o)&&I(e,t,i)}},m={canReuseSourceBuffers:function(e,t,i){var n=h(e,t,i),r=n.currentCriteria,o=n.nextCriteria;return T(r,o)&&b(r,o)}},v={canReuseSourceBuffers:function(e,t,i){var n=h(e,t,i),r=n.currentCriteria,o=n.nextCriteria;return!(0,s.isTizen2017)()&&T(r,o)&&b(r,o)&&I(e,t,i)}},y={canReuseSourceBuffers:function(e,t,i){var n=h(e,t,i),r=n.currentCriteria,o=n.nextCriteria,a=T(r,o)&&I(e,t,i)&&!M(r,o);return((0,s.isWebOs2017)()||(0,s.isWebOs2016)())&&(a=a&&b(r,o)),a}},S={canReuseSourceBuffers:function(e,t,i){return!1}};function T(e,t){return(null==e?void 0:e.codec)===(null==t?void 0:t.codec)}function b(e,t){return(null==e?void 0:e.encryption)===(null==t?void 0:t.encryption)}function M(e,t){return(null==e?void 0:e.discontinuityNumber)===(null==t?void 0:t.discontinuityNumber)}function I(e,t,i){return l(e,i)===l(t,i)}},77286:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentInfoProvider=void 0;var n=i(58313),r=i(90919),o=function(){function e(){}return e.findSegmentInfoOfRepresentation=function(t,i){if(i.SegmentList){var n=i.SegmentList[0].SegmentURL,r=t.getUrl(),o=n.find((function(t){return e.getSegmentInfoUrl(t,i)===r}));if(o)return o}return null},e.findHlsRepresentationForSegment=function(e,t){var i,n,o=t.Representation.find((function(t){return e.getRepresentationId().representationId===t._internalId.representationId}));if(o){var a=(0,r.findSegmentUrlIndexWithinSegmentList)(e.getSegmentInfo(),null!==(n=null===(i=o.SegmentList)||void 0===i?void 0:i[0].SegmentURL)&&void 0!==n?n:[]);if(-1!==a)return{representation:o,index:a}}},e.getSegmentInfoUrl=function(e,t){var i=e._media;return n.URLHelper.isUrlAbsolute(i)||(i=n.URLHelper.concatUrlParts(t.BaseURL[0],i)),i},e}();t.SegmentInfoProvider=o},78006:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamState=void 0,function(e){e.Open="open",e.Ended="ended",e.Aborted="aborted"}(i||(t.StreamState=i={}))},79505:function(e,t,i){var n=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.RepresentationId=void 0;var r=i(47151),o=function(e){function t(t,i){var n=e.call(this,t.periodId,t.adaptationSetId)||this;return n.Sb=i,n}return n(t,e),Object.defineProperty(t.prototype,"representationId",{get:function(){return this.Sb},enumerable:!1,configurable:!0}),t.prototype.equals=function(t){return e.prototype.equals.call(this,t)&&this.representationId===(null==t?void 0:t.representationId)},t.prototype.key=function(){return e.prototype.key.call(this)+"-"+this.representationId},t.from=function(e){return e._representationId&&e._adaptationSetId&&e._periodId?new t(new r.AdaptationSetId(e._periodId,e._adaptationSetId),e._representationId):null},t}(r.AdaptationSetId);t.RepresentationId=o},79872:function(e,t,i){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestReducer=void 0;var a=i(3793),s=i(15014),u=i(13422),c=i(71050);function d(e,t,i){var n,o;return r(r({},e),{Period:null!==(o=null===(n=e.Period)||void 0===n?void 0:n.map((function(e){var n;return r(r({},e),{AdaptationSet:null===(n=e.AdaptationSet)||void 0===n?void 0:n.map((function(e){var n;return r(r({},e),{Representation:null===(n=e.Representation)||void 0===n?void 0:n.map((function(e){return e._internalId.equals(t)?r(r({},e),i):e}))})}))})})))&&void 0!==o?o:[]})}function l(e,t,i){var n=o([],e,!0);return n[t]=r({},n[t]),n[t]._playbackTime=i,function(e,t){for(var i=t-1;i>=0;i--)e[i]=r({},e[i]),e[i]._playbackTime=e[i+1]._playbackTime-e[i]._duration}(n,t),function(e,t){for(var i=t+1;i<e.length;i++)e[i]=r({},e[i]),e[i]._playbackTime=e[i-1]._playbackTime+e[i-1]._duration}(n,t),n}function h(e){return r(r({},e),{SegmentURL:e.SegmentURL.map((function(e){var t=r({},e);return delete t._playbackTime,t}))})}t.ManifestReducer=(0,a.default)({},((n={})[c.ManifestActionType.SetManifest]=function(e,t){return t.payload.manifest||e},n[c.ManifestActionType.SetManifestInitialized]=function(e,t){return r(r({},e),{isInitialized:t.payload.isInitialized})},n[c.ManifestActionType.RemoveRepresentations]=function(e,t){return 0===t.payload.representationIds.length?e:(0,u.removeRepresentations)(e,t.payload.representationIds)},n[c.ManifestActionType.UpdateManifest]=function(e,t){return function(e,t){return r(r({},e),t)}(e,t.payload)},n[c.ManifestActionType.UpdateAdaptationSet]=function(e,t){return function(e,t){var i,n=t.adaptationSetId,a=t.updates,s=e.Period.findIndex((function(e){return e._id===n.periodId}));if(s<0)return e;var u=null===(i=e.Period[s])||void 0===i?void 0:i.AdaptationSet.findIndex((function(e){return e._internalId.equals(n)}));if(u<0)return e;var c=r({},e);c.Period=o([],c.Period,!0),c.Period[s]=r({},c.Period[s]);var d=c.Period[s];return d.AdaptationSet=o([],d.AdaptationSet,!0),d.AdaptationSet[u]=r(r({},d.AdaptationSet[u]),a),c}(e,t.payload)},n[c.ManifestActionType.UpdateRepresentation]=function(e,t){return function(e,t){var i,n,a,s=t,u=s._internalId;if(!e.Period)return e;var c=e.Period.findIndex((function(e){return e._id===u.periodId})),d=null===(i=e.Period[c])||void 0===i?void 0:i.AdaptationSet.findIndex((function(e){return e._internalId.equals(u)})),l=null===(a=null===(n=e.Period[c])||void 0===n?void 0:n.AdaptationSet[d])||void 0===a?void 0:a.Representation.findIndex((function(e){return e._internalId.equals(u)})),h=r({},e);h.Period=o([],h.Period,!0),h.Period[c]=r({},h.Period[c]);var p=h.Period[c];p.AdaptationSet=o([],p.AdaptationSet,!0),p.AdaptationSet[d]=r({},p.AdaptationSet[d]);var f=p.AdaptationSet[d];return f.Representation=o([],f.Representation,!0),f.Representation[l]=s,h}(e,t.payload)},n[c.ManifestActionType.UpdateRepresentationFailedDownload]=function(e,t){var i,n,o=t.payload,a=o.representationId,s=o.loadFailureReason,u=function(e){var t;return e._internalId.equals(a)?s:null===(t=e._hls)||void 0===t?void 0:t.loadFailureReason};return r(r({},e),{Period:null!==(n=null===(i=e.Period)||void 0===i?void 0:i.map((function(e){var t;return r(r({},e),{AdaptationSet:null===(t=e.AdaptationSet)||void 0===t?void 0:t.map((function(e){var t;return r(r({},e),{Representation:null===(t=e.Representation)||void 0===t?void 0:t.map((function(e){return r(r({},e),{_hls:r(r({},e._hls),{loadFailureReason:u(e)})})}))})}))})})))&&void 0!==n?n:[]})},n[c.ManifestActionType.AdjustPeriodStartTimes]=function(e,t){return t.payload.offset?r(r({},e),{Period:e.Period.map((function(e){return r(r({},e),{start:e.start+t.payload.offset})}))}):e},n[c.ManifestActionType.UpdatePeriodTiming]=function(e,t){return function(e,t){if(!e.Period)return e;var i=t.periodId,n=t.timing,a=e.Period.findIndex((function(e){return e._id===i}));if(a<0)return e;var s=o([],e.Period,!0);return s[a]=r(r({},s[a]),n),r(r({},e),{Period:s})}(e,t.payload)},n[c.ManifestActionType.SetRepresentationDrmKid]=function(e,t){var i=t.payload;return d(e,i.representationId,{associatedKid:i.associatedKid})},n[c.ManifestActionType.SetRepresentationIsLoading]=function(e,t){var i=t.payload;return d(e,i.representationId,{isLoading:i.isLoading})},n[c.ManifestActionType.SetRepresentationSegmentIndex]=function(e,t){var i=t.payload;return d(e,i.representationId,{segmentIndex:i.segmentIndex})},n[c.ManifestActionType.SetRepresentationSegmentIndexParsingError]=function(e,t){var i=t.payload;return d(e,i.representationId,{segmentIndexParsingError:i.segmentIndexParsingError})},n[c.ManifestActionType.SetRepresentationAnchorPoint]=function(e,t){var i=t.payload;return d(e,i.representationId,{anchorPoint:i.anchorPoint})},n[c.ManifestActionType.InitPlaybackTimesFromIndex]=function(e,t){var i,n=t.payload,o=n.representationId,a=n.index,u=n.playbackTimeForIndex,c=(0,s.findRepresentation)(e,o);return c?d(e,o,r(r({},c),{SegmentList:null===(i=c.SegmentList)||void 0===i?void 0:i.map((function(e){return r(r({},e),{SegmentURL:l(e.SegmentURL,a,u)})}))})):e},n[c.ManifestActionType.InitPlaybackTimesFromReferenceSegment]=function(e,t){var i,n=t.payload,o=n.representationId,a=n.segmentUrl,u=n.segmentPlaybackTime,c=n.discontinuitySequenceNumber,h=(0,s.findRepresentation)(e,o);if(!(null==h?void 0:h.SegmentList)||0===h.SegmentList.length)return e;if(void 0!==(null===(i=h.SegmentList[0].SegmentURL[0])||void 0===i?void 0:i._playbackTime)||void 0===u)return e;var p=h.SegmentList[0].SegmentURL.findIndex((function(e){return e._media===a&&e._discontinuitySequenceNumber===c}));return-1===p?e:d(e,o,r(r({},h),{SegmentList:h.SegmentList.map((function(e){return r(r({},e),{SegmentURL:l(e.SegmentURL,p,u)})}))}))},n[c.ManifestActionType.ResetSegmentPlaybackTimes]=function(e){return r(r({},e),{Period:e.Period.map((function(e){return r(r({},e),{AdaptationSet:e.AdaptationSet.map((function(e){return r(r({},e),{Representation:e.Representation.map((function(e){var t;return r(r({},e),{SegmentList:null===(t=e.SegmentList)||void 0===t?void 0:t.map(h)})}))})}))})}))})},n))},80965:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamTimelineActionType=void 0,function(e){e.StreamTimelineReset="@instance/source/stream/streamtimelinereset",e.StreamTimeRangeRemove="@instance/source/stream/streamtimerangeremove",e.StreamTimeRangeAdd="@instance/source/stream/streamtimerangeadd"}(i||(t.StreamTimelineActionType=i={}))},84362:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayingTracksActionKey=void 0,function(e){e.SetPlayingPeriodId="@instance/sources/@source/playingTracks/setPlayingPeriodId",e.FinishedPeriodSwitch="@instance/sources/@source/playingTracks/periodSwitchFinished",e.StartedPeriodSwitch="@instance/sources/@source/playingTracks/periodSwitchStarted"}(i||(t.PlayingTracksActionKey=i={}))},84696:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.resolveMediaTypes=function(e){return(0,r.getCodecsFromAdaptationSet)(e).split(",").map((function(e){return(0,n.getMediaTypeFromCodec)(e)}))};var n=i(34047),r=i(13422)},86163:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.PeriodSwitchMonitor=void 0;var n=i(15971),r=i(42208),o=function(){function e(e){this.context=e,this.DY=[]}return e.prototype.isPeriodExpected=function(e){return this.DY.includes(e)},e.prototype.trackIncomingPeriod=function(e){this.DY.includes(e)||this.DY.push(e)},e.prototype.maybeHandlePeriodSwitch=function(e){var t,i,o=e.periodId,a=o!==this.CY;o&&a&&this.DY.includes(o)&&(this.CY=o,null===(t=(0,n.getSourceStore)(this.context))||void 0===t||t.dispatch((0,r.periodSwitchStarted)(o)),null===(i=(0,n.getSourceStore)(this.context))||void 0===i||i.dispatch((0,r.periodSwitchFinished)(o)))},e.prototype.reset=function(){this.DY=[]},e.prototype.dispose=function(){this.CY=void 0,this.DY=[]},e}();t.PeriodSwitchMonitor=o},86219:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MPDHandlerFactory=void 0;var n=i(80813),r=i(79721),o=i(88052),a=i(62756),s=i(63066),u=function(){function e(){}return e.createInstance=function(e,t,i,u,c){void 0===u&&(u=r.DEFAULT_PERIOD_ID);var d=e.serviceManager.get(n.ServiceName.ManifestService,e.sourceContext.sourceIdentifier);if(!(null==d?void 0:d.hasAdaptationSets(u)))return null;var l=d.findAdaptationSet(u,t,c);if(!l)return e.logger.debug("Did not find adaptation set for mime type [".concat(t,"] in period ").concat(u)),null;var h=l.Representation&&l.Representation[0],p=h&&h.SegmentTemplate?h.SegmentTemplate:l.SegmentTemplate;return d.isSmoothManifest()?function(e,t,i,n){return n?new(o.ModuleManager.get(a.ModuleName.Smooth).createSmoothSegmentTemplateMPDHandler())(e,t,i):null}(e,t,i,p):d.isHlsManifest()?function(e,t){return t.SegmentList?new s.SegmentListMPDHandler(e):null}(e,h):function(e,t,i){var n=o.ModuleManager.get(a.ModuleName.DASH);return t&&t[0].SegmentTimeline?new n.SegmentTimelineMPDHandler(e):t?new n.SegmentTemplateMPDHandler(e):i.SegmentList?new s.SegmentListMPDHandler(e):i.SegmentBase?new n.SegmentBaseMPDHandler(e):null}(e,p,h)},e}();t.MPDHandlerFactory=u},87187:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentInitType=t.Segment=void 0;var r,o=i(74853),a=i(85434),s=i(65439),u=function(){function e(e,t,i,n,a,s,u,c,d,l){void 0===s&&(s=r.NONE),this.cN=[],this.data=e,this.XN=t,this.YN=i,this.WN=n,this.ZN=a,this.aN=s,this.bN=u,this.eN=!1,this.ON={subtitles:[]},this.fN=c,this.gN=d,this.RN=l,this.hN=!1,this.kN=null,e instanceof ArrayBuffer||"string"==typeof e&&(this.data=o.ArrayHelper.stringToArrayWithoutEncoding(e).buffer)}return e.prototype.setDrmKid=function(e){this.mN=e},e.prototype.hasDrmKid=function(){return Boolean(this.getDrmKid())},e.prototype.getDrmKid=function(){var e,t,i;return null!==(i=null!==(e=this.mN)&&void 0!==e?e:null===(t=this.lN)||void 0===t?void 0:t.getDrmKid())&&void 0!==i?i:void 0},e.prototype.setDrmInitData=function(e){this.kN=e},e.prototype.hasDrmInitData=function(){var e;return(null===(e=this.kN)||void 0===e?void 0:e.length)>0},e.prototype.getDrmInitData=function(){return this.hasDrmInitData()?this.kN:[]},e.prototype.getMimeType=function(){return this.XN},e.prototype.isInit=function(){return this.aN===r.INIT},e.prototype.isSelfInit=function(){return this.aN===r.SELF_INIT},e.prototype.isEncrypted=function(){return this.eN},e.prototype.setEncrypted=function(e){this.eN=e},e.prototype.setUrl=function(e){this.PN=e},e.prototype.getUrl=function(){return this.PN},e.prototype.getData=function(){return this.data},e.prototype.setData=function(e){this.data=e},e.prototype.getMetadata=function(){return this.ON},e.prototype.setMetadata=function(e){this.ON=e},e.prototype.getPlaybackTime=function(){return this.RN},e.prototype.setPlaybackTime=function(e){this.RN=e},e.prototype.getPlaybackEndTime=function(){return this.RN+this.ZN},e.prototype.getPlaybackTimeRange=function(){return this.ZN?{start:this.getPlaybackTime(),end:this.getPlaybackEndTime()}:(0,s.getSegmentInfoTimeRange)(this.getSegmentInfo())},e.prototype.getBaseMediaDecodeTime=function(){return this.TN},e.prototype.setBaseMediaDecodeTime=function(e){this.TN=e},e.prototype.getPresentationTimeOffset=function(){return this.UN},e.prototype.setPresentationTimeOffset=function(e){this.UN=e},e.prototype.getTFDTBoxOffsets=function(){return this.SN},e.prototype.setTFDTBoxOffsets=function(e){this.SN=e},e.prototype.nN=function(e){var t;return this.getParserMetadata()&&this.getParserMetadata()[e]?this.getParserMetadata()[e]:(null===(t=this.getInitSegment())||void 0===t?void 0:t.getParserMetadata())?this.getInitSegment().getParserMetadata()[e]:void 0},e.prototype.getTimescale=function(){return this.nN("timescale")},e.prototype.getIvSize=function(){return this.nN("ivSize")},e.prototype.getDefaultSampleDuration=function(){return this.nN("defaultSampleDuration")},e.prototype.getDefaultSampleSize=function(){return this.nN("defaultSampleSize")},e.prototype.setTimescale=function(e){this.updateParserMetadata({timescale:e})},e.prototype.getPeriodId=function(){return this.WN},e.prototype.getCodec=function(){return this.YN},e.prototype.setCodec=function(e){this.YN=e},e.prototype.getDuration=function(){return this.ZN},e.prototype.setDuration=function(e){this.ZN=e},e.prototype.getNetworkRequestSize=function(){return this.fN},e.prototype.getRepresentationId=function(){return this.gN},e.prototype.getParsedData=function(){return this.QN},e.prototype.setParsedData=function(e){this.QN=e},e.prototype.getSegmentInfo=function(){return this.VN},e.prototype.isIndependentlyDecodable=function(){return this.bN},e.prototype.setSegmentInfo=function(e){this.VN=e},e.prototype.getMediaInfo=function(){var e={};return this.VN&&this.VN.bitrate&&(e.bitrate=this.VN.bitrate),a.MimeTypeHelper.isAudio(this.XN)?this.VN&&this.VN.sampleRate&&(e.sampleRate=this.VN.sampleRate):a.MimeTypeHelper.isVideo(this.XN)&&(this.VN&&this.VN.width&&(e.width=this.VN.width),this.VN&&this.VN.height&&(e.height=this.VN.height),this.VN&&this.VN.frameRate&&(e.frameRate=this.VN.frameRate)),e},e.prototype.isDirty=function(){return this.hN},e.prototype.setDirty=function(e){this.hN=e},e.prototype.setInbandEvents=function(e){this.cN=e},e.prototype.getInbandEvents=function(){return this.cN},e.prototype.setLastSegment=function(e){this.dN=e},e.prototype.isLastSegment=function(){return this.dN},e.prototype.wasLoadedFrom=function(e){return this.getUrl().includes(e)},e.prototype.getParserMetadata=function(){return this.iN},e.prototype.setParserMetadata=function(e){this.iN=e},e.prototype.updateParserMetadata=function(e){this.iN=n(n({},this.iN),e)},e.prototype.setBufferBlockId=function(e){this.jN=e},e.prototype.getBufferBlockId=function(){return this.jN},e.prototype.setInitSegment=function(e){this.lN=e},e.prototype.getInitSegment=function(){return this.lN},e}();t.Segment=u,function(e){e[e.NONE=0]="NONE",e[e.INIT=1]="INIT",e[e.SELF_INIT=2]="SELF_INIT"}(r||(t.SegmentInitType=r={}))},87222:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.findAdaptationSetOfMimeType=function(e,t,i){void 0===i&&(i={});var n,r=i.sourceState,o=i.langObj,c=i.periodSwitched,l=s(e,r),h=d(t,e);return l&&(n=u(h,l,o,c)),!n&&r&&(n=u(h,a(e,r),o,c)),n||h[0]},t.getHlsDefaultLanguage=a,t.getPreferredLanguage=s,t.findAdaptationSetsForMimeType=d;var n=i(85434),r=i(88052),o=i(62756);function a(e,t){var i;if(r.ModuleManager.has(o.ModuleName.HLS)){var a=r.ModuleManager.get(o.ModuleName.HLS).selectors,s=a.getHlsState,u=a.getDefaultLanguages,c=s(t),d=c?u(c):void 0;if(d){var l=null===(i=n.MimeTypeHelper.getMediaType(e))||void 0===i?void 0:i.toUpperCase();return l?d[l]:void 0}}}function s(e,t){var i=t&&a(e,t),n={language:navigator.language||navigator.userLanguage||(null==i?void 0:i.language)};return n.language&&i&&c(n.language,i.language)&&(n.name=i.name),n}function u(e,t,i,n){if(void 0===n&&(n=!1),0!==e.length){var r=void 0;if(i&&(r=function(e,t,i){var n=e.find((function(e){return e._lang&&t.lang&&e._lang===t.lang})),r=e.find((function(e){return t.adaptationSetId&&e._internalId.equals(t.adaptationSetId)}));return r=r||e.find((function(e){return t.id===e._internalId.adaptationSetId})),i?n||r:r||n}(e,i,n)),r)return r;if(t&&t.language){var o=e.filter((function(e){return!(!Boolean(e._lang)||null==e._lang)&&c(e._lang,t.language)}));return o.find((function(e){return e.Representation.find((function(e){return e._name===t.name}))}))||o[0]}}}function c(e,t){return Boolean((null==e?void 0:e.includes(t))||(null==t?void 0:t.includes(e)))}function d(e,t){return e.AdaptationSet.filter((function(e){return e._mimeType===t||e.Representation.find((function(e){return e._mimeType===t}))}))}},88401:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.UrlInitSegmentProvider=void 0;var n=i(91678),r=i(33436),o=i(37641),a=i(71018),s=function(){function e(e,t){this.sY={},this.pY=e,this.qY=new a.SegmentLoaderPool(e,{mimeType:t,shouldDownloadBeCancelledCallback:function(){return!1}}),this.rY=new o.SegmentCache(1/0)}return e.prototype.getSegment=function(e){var t=this,i=this.rY.get(e);return i?Promise.resolve(i):null!=this.sY[e.url]?this.sY[e.url]:this.tY(e).then((function(e){return t.uY(e),e}))},e.prototype.isLoading=function(){return this.qY.isLoading()},e.prototype.tY=function(e){var t=this;this.qY.isFreeLoaderAvailable()||this.qY.addLoaders(1),this.pY.logger.debug("Loading init segment",e.url);var i=this.qY.load(e).then((function(e){return e.read()})).then((function(t){if(!t.value)throw new Error("SegmentStream error ".concat(e.url));return t.value})).finally((function(){delete t.sY[e.url]}));return this.sY[e.url]=i,i},e.prototype.uY=function(e){this.rY.add(e),this.pY.store.dispatch((0,n.addMetricsValue)(e.getMimeType(),r.MetricType.CachedInitSegments,{internalRepId:e.getSegmentInfo().internalRepresentationId}))},e.prototype.getCachedSegment=function(e){return this.rY.get(e)},e.prototype.removeCachedSegments=function(e){this.rY.remove(e)},e.prototype.dispose=function(){this.rY.clear(),this.qY.dispose()},e}();t.UrlInitSegmentProvider=s},88618:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.FetchController=void 0;var r,o=i(77401),a=i(43446),s=i(29669),u=i(34841),c=i(88844),d=i(97587);!function(e){e.User="user",e.Timeout="timeout"}(r||(r={}));var l=function(){function e(e,t,i,r){var o=this;this.useStreamResponse=r,this.setProgressListener=function(e){o.xc=e},this.Gc=function(e){o.xc&&(o.wc.progressTimestamp=a.TimingUtil.getHiResTimestamp(),o.yc.loadedBytes=e,o.xc(n({},o.yc)))},this.Hc=function(){(0,c.clearTimeoutIfDefined)(o.jb)},this.eb=e.logger,this.fb=i,this.hb=t,this.ib=new u.Deferred,this.vc=0,this.wc={sendTimestamp:-1,openedTimestamp:-1,headersReceivedTimestamp:-1,progressTimestamp:-1,doneTimestamp:-1},this.gb=new AbortController,this.yc={loadedBytes:0,url:t.url,responseTiming:this.wc,chunks:[],elapsedTime:0}}return e.prototype.getResponse=function(){return this.zc(this.hb),this.ib.promise},e.prototype.cancel=function(e){void 0===e&&(e=r.User),(0,c.clearTimeoutIfDefined)(this.jb),this.uc=e,this.gb.abort()},e.prototype.zc=function(e){var t,i=this,s={method:e.method,headers:new Headers(e.headers),credentials:e.credentials,signal:this.gb?this.gb.signal:void 0,body:h(e.method)?e.body:void 0};this.wc.sendTimestamp=a.TimingUtil.getHiResTimestamp(),fetch(e.url,s).then((function(e){var t;if(i.wc.headersReceivedTimestamp=a.TimingUtil.getHiResTimestamp(),null===(t=i.xc)||void 0===t||t.call(i,n({},i.yc)),e.ok){var r=i.Bc(e);i.Dc(e).then((function(e){r.body=e,r.length=i.vc,r.timeToFirstByte=i.wc.headersReceivedTimestamp-i.wc.sendTimestamp,i.wc.doneTimestamp>0&&(r.elapsedTime=i.wc.doneTimestamp-i.wc.sendTimestamp),i.ib.resolve(r)})).catch((function(t){i.Ic({error:t.message,response:i.Bc(e)})}))}else i.Ic({error:o.RequestError.Failed,response:i.Bc(e)})})).catch((function(e){i.Ic({error:i.Cc(e)})})),this.wc.openedTimestamp=a.TimingUtil.getHiResTimestamp(),null===(t=this.xc)||void 0===t||t.call(this,n({},this.yc)),this.jb=window.setTimeout((function(){return i.cancel(r.Timeout)}),this.fb)},e.prototype.Ac=function(e){var t={};return e.headers.forEach((function(e,i){return t[i]=e})),t},e.prototype.Bc=function(e){return{request:this.hb,url:e.url,headers:this.Ac(e),status:e.status,statusText:e.statusText}},e.prototype.Cc=function(e){return this.eb.debug("fetch error",e),e instanceof Error&&"AbortError"===e.name?this.uc===r.User?o.RequestError.Canceled:o.RequestError.TimedOut:o.RequestError.Failed},e.prototype.Dc=function(e){var t=this;if(e.body&&this.useStreamResponse){var i=new d.Stream,n=this.wc.headersReceivedTimestamp;return this.Ec(e,(function(e){var r=a.TimingUtil.getHiResTimestamp(),o=r-n;n=r,t.yc.chunks.push({downloadDuration:o,bytes:e.byteLength});var s=e instanceof Uint8Array?e.buffer:e;i.add(s)})).then((function(){i.end(),t.Hc()})).catch((function(e){t.eb.debug("Error reading of fetch response:",e),i.abort(t.Cc(e))})),Promise.resolve(i)}var r=e.headers.get("Content-Length"),o=r?parseInt(r):0;return this.yc.totalBytes=o,this.Ec(e.clone()).catch((function(e){t.eb.debug("Error reading of fetch response:",e)})),this.Fc(e).then((function(e){return t.vc=o,t.wc.doneTimestamp=a.TimingUtil.getHiResTimestamp(),t.Hc(),e}))},e.prototype.Ec=function(e,t){var i=this;if(!e.body)return Promise.reject(new Error("response.body is null"));var n=e.body.getReader(),r=function(){return n.read().then((function(e){var n=e.done,o=e.value;return n?(i.wc.doneTimestamp=a.TimingUtil.getHiResTimestamp(),void i.Gc(i.vc)):o?(null==t||t(o),i.vc+=o.byteLength,i.Gc(i.vc),r()):void 0}))};return r()},e.prototype.Fc=function(e){switch(this.hb.responseType){case s.HttpResponseType.ARRAYBUFFER:return e.arrayBuffer();case s.HttpResponseType.TEXT:return e.text();case s.HttpResponseType.JSON:return e.json();default:return Promise.reject(new Error("Unsupported response type on fetch request"))}},e.prototype.Ic=function(e){(0,c.clearTimeoutIfDefined)(this.jb),this.eb.debug("Error performing fetch: ".concat(e.error),e.response),this.ib.reject(e)},e}();function h(e){return![s.HttpRequestMethod.GET,s.HttpRequestMethod.HEAD].includes(e)}t.FetchController=l},88935:function(e,t,i){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayingTracksReducer=t.isSwitchingPeriods=t.wasSwitchingToPeriodIdReset=t.getPlayingTracksState=t.getPlayingPeriodId=void 0;var o=i(3793),a=i(84362);t.getPlayingPeriodId=function(e){var t;return null===(t=e.playingTracks)||void 0===t?void 0:t.playingPeriodId},t.getPlayingTracksState=function(e){return e.playingTracks},t.wasSwitchingToPeriodIdReset=function(e,t){return void 0!==(null==t?void 0:t.switchingToPeriodId)&&void 0===(null==e?void 0:e.switchingToPeriodId)},t.isSwitchingPeriods=function(e,t){return void 0===(null==t?void 0:t.switchingToPeriodId)&&void 0!==(null==e?void 0:e.switchingToPeriodId)},t.PlayingTracksReducer=(0,o.default)({},((n={})[a.PlayingTracksActionKey.SetPlayingPeriodId]=function(e,t){var i=t.payload;return r(r({},e),{playingPeriodId:i})},n[a.PlayingTracksActionKey.FinishedPeriodSwitch]=function(e,t){var i=t.payload;return r(r({},e),{switchingToPeriodId:e.switchingToPeriodId===i?void 0:e.switchingToPeriodId})},n[a.PlayingTracksActionKey.StartedPeriodSwitch]=function(e,t){var i=t.payload;return r(r({},e),{switchingToPeriodId:i})},n))},90087:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPlayerManifestApiFactory=void 0;var n=i(80813),r=i(3714),o=i(16197),a=function(){function e(){}return e.create=function(t,i){var r=i.serviceManager.get(n.ServiceName.ManifestService,i.sourceContext.sourceIdentifier);return new(function(){return function(){r.isHlsManifest()?this.hls=e.createHlsApi(r):r.isSmoothManifest()||(this.dash=e.createDashApi(t,r))}}())},e.createDashApi=function(t,i){return new(function(){function n(){}return n.prototype.getPeriod=function(){var n=i.getPeriodIdForTime(t.getCurrentTime()),r=i.getPeriod(new o.PeriodId(n));return r?e.createPeriodApi(i,r):null},n.prototype.listPeriods=function(){return i.getAllPeriods().map((function(t){return e.createPeriodApi(i,t)}))},n}())},e.createHlsApi=function(t){return new(function(){function i(){this.properties=t.getHlsTags()}return i.prototype.getVideoTracks=function(){return e.getVideoTracks(t,t.getFirstPeriod()._id)},i.prototype.getAudioTracks=function(){return e.getAudioTracks(t,t.getFirstPeriod()._id)},i.prototype.getTextTracks=function(){return e.getTextTracks(t,t.getFirstPeriod()._id)},i}())},e.createPeriodApi=function(t,i){return new(function(){function n(){this.id=i._id,this.properties={},i._id&&(this.properties.id=i._id),i._start&&(this.properties.start=i._start),i._duration&&(this.properties.duration=i._duration)}return n.prototype.getVideoTracks=function(){return e.getVideoTracks(t,this.id)},n.prototype.getAudioTracks=function(){return e.getAudioTracks(t,this.id)},n.prototype.getTextTracks=function(){return e.getTextTracks(t,this.id)},n.prototype.getMetadata=function(){return e.getMetadata(t,this.id)},n}())},e.getAudioTracks=function(t,i){return t.getAvailableAudio(i,!1).map((function(n){var r={id:n.id,label:n.label,lang:n.lang,getQualities:function(){return e.getAudioQualities(t,i,n.id)}};return n.role&&(r.role=n.role),r}))},e.getVideoTracks=function(t,i){return t.getAvailableVideo(i).map((function(n){var r={id:n.id,label:n.label,getQualities:function(){return e.getVideoQualities(t,i)}};return n.role&&(r.role=n.role),r}))},e.getTextTracks=function(e,t){return e.getAvailableSubtitles(t)},e.getMetadata=function(e,t){return e.getEventStreamEvents(e.findPeriod(t)).map((function(e){return{type:r.MetadataType.EVENT_STREAM,payload:e.data,start:e.startTime,end:e.endTime}}))},e.getAudioQualities=function(e,t,i){return e.getAudioRepresentations(t)[i]||[]},e.getVideoQualities=function(e,t){return e.getVideoRepresentations(t)},e}();t.MediaPlayerManifestApiFactory=a},90685:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferBlock=t.EncryptionState=void 0,t.isPrecedingSegment=u;var n,r=i(85434),o=i(48954);!function(e){e.Encrypted="encrypted",e.Clear="clear"}(n||(t.EncryptionState=n={}));var a=function(){function e(e){this.w8={},this.x8={},this.id=e,this.u8=[],this.v8=new Map}return e.prototype.addSegment=function(e){var t=e.getMimeType();e.isInit()&&this.N9(t),this.y8(e),this.z8(e);var i=e.isInit()?0:e.getDuration();this.u8.push({segment:e}),e.isInit()||(this.setMaxSegmentDuration(t,Math.max(i,this.getMaxSegmentDuration(t))),this.M9(e,t)),e.setBufferBlockId(this.id),this.B8(e)},e.prototype.y8=function(e){var t=e.getSegmentInfo(),i=t.discontinuitySequenceNumber,n=t.mimeType;n&&(this.w8[n]||(this.w8[n]=[]),null==i||this.w8[n].includes(i)||this.w8[n].push(i))},e.prototype.z8=function(e){var t=e.getSegmentInfo(),i=t.periodId,n=t.mimeType;n&&(this.x8[n]||(this.x8[n]=[]),null==i||this.x8[n].includes(i)||this.x8[n].push(i))},e.prototype.setSegregationCriteria=function(e,t){this.v8.has(t)||this.A8(t),this.O9(t).segregationCriteria=e},e.prototype.A8=function(e){var t={};return this.v8.set(e,t),t},e.prototype.updateMediaTypeForMimeType=function(e){var t=this.O9(e.mimeType)||this.A8(e.mimeType);t.mediaType?(s(e,"codec",(function(e){t.mediaType.codec=e})),s(e,"timescale",(function(e){t.mediaType.timescale=e}))):t.mediaType=e},e.prototype.getSegregationCriteria=function(e){var t;return null===(t=this.O9(e))||void 0===t?void 0:t.segregationCriteria},e.prototype.B8=function(e){var t,i,n=e.getMimeType(),r=this.getMediaType(n);r?(null!==(t=r.codec)&&void 0!==t||(r.codec=e.getCodec()),null!==(i=r.timescale)&&void 0!==i||(r.timescale=e.getTimescale())):(this.v8.has(n)||this.v8.set(n,{}),this.O9(n).mediaType={mimeType:n,codec:e.getCodec(),timescale:e.getTimescale()})},e.prototype.getMediaType=function(e){var t,i;return null!==(i=null===(t=this.O9(e))||void 0===t?void 0:t.mediaType)&&void 0!==i?i:null},e.prototype.addMediaType=function(e){r.MimeTypeHelper.isAV(e.mimeType)&&!this.getMediaType(e.mimeType)&&(this.v8.has(e.mimeType)||this.A8(e.mimeType),this.O9(e.mimeType).mediaType=e)},e.prototype.removeMediaType=function(e){this.clearSegments(e),this.v8.delete(e)},e.prototype.hasMediaType=function(e){var t,i;return null!==(i=null===(t=this.v8)||void 0===t?void 0:t.has(e))&&void 0!==i&&i},e.prototype.getMediaTypes=function(){return(0,o.getValues)(this.v8).map((function(e){return e.mediaType}))},e.prototype.getMediaTypesWithoutSubs=function(){return this.getMediaTypes().filter((function(e){return r.MimeTypeHelper.isAV(e.mimeType)}))},e.prototype.removeSegment=function(e){var t=this.u8.findIndex((function(t){return t.segment===e}));t>-1&&this.u8.splice(t,1)},e.prototype.clearSegments=function(e){this.u8=this.u8.filter((function(t){return t.segment.getMimeType()!==e}));var t=this.O9(e);t&&(t.playbackTimeRange=void 0),this.w8[e]=[]},e.prototype.getPrecedingSegments=function(e,t){var i=[];return this.u8.forEach((function(n){u(n.segment,e,t)&&i.push(n.segment)})),i},e.prototype.M9=function(e,t){var i=this.getPlaybackTimeRange(t),n=e.getPlaybackTime(),r=n+e.getDuration();i?(n<i.start&&(i.start=n),r>i.end&&(i.end=r)):this.O9(t).playbackTimeRange={start:n,end:r}},e.prototype.getPlaybackTimeRange=function(e){var t,i;return null!==(i=null===(t=this.O9(e))||void 0===t?void 0:t.playbackTimeRange)&&void 0!==i?i:null},e.prototype.getId=function(){return this.id},e.prototype.getAllKnownPeriodIds=function(){var e;return(e=[]).concat.apply(e,Object.values(this.x8))},e.prototype.getMinCommonStartTime=function(){return(0,o.getValues)(this.v8).filter((function(e){return e.playbackTimeRange})).map((function(e){return e.playbackTimeRange})).reduce((function(e,t){return Math.max(t.start,e)}),-1/0)},e.prototype.getCommonPlaybackTimeRanges=function(){return(0,o.getValues)(this.v8).filter((function(e){return e.playbackTimeRange})).map((function(e){return e.playbackTimeRange})).reduce((function(e,t){return{start:Math.max(t.start,e.start),end:Math.min(t.end,e.end)}}),{start:-1/0,end:1/0})},e.prototype.setMaxSegmentDuration=function(e,t){this.v8.has(e)||this.A8(e),this.O9(e).maxSegmentDuration=t},e.prototype.getMaxSegmentDuration=function(e){var t;return(null===(t=this.O9(e))||void 0===t?void 0:t.maxSegmentDuration)||0},e.prototype.hasMaxSegmentDuration=function(e){var t;return null!=(null===(t=this.O9(e))||void 0===t?void 0:t.maxSegmentDuration)},e.prototype.hasMaxSegmentDurations=function(){return Boolean((0,o.getValues)(this.v8).map((function(e){return e.maxSegmentDuration})).find((function(e){return e>=0})))},e.prototype.getMinMaxSegmentDuration=function(){var e=Number.MAX_VALUE;return(0,o.getValues)(this.v8).map((function(e){return e.maxSegmentDuration})).forEach((function(t){return e=t<e?t:e})),e},e.prototype.getAllSegmentsForMimeType=function(e){return this.getAllSegments().filter((function(t){return t.getMimeType()===e}))},e.prototype.getAllSegments=function(){return this.u8.map((function(e){return e.segment}))},e.prototype.hasDataSegments=function(e){return this.u8.some((function(t){return!t.segment.isInit()&&t.segment.getMimeType()===e}))},e.prototype.hasSegments=function(){return this.getAllSegments().length>0},e.prototype.hasTrackedDiscontinuity=function(e){var t=this;return Object.keys(this.w8).some((function(i){return t.w8[i].includes(e)}))},e.prototype.hasTrackedPeriodId=function(e){var t=this;return Object.keys(this.x8).some((function(i){return t.x8[i].includes(e)}))},e.prototype.getNextSegment=function(){var e=this.u8.filter((function(e){return!e.pendingRemoval}));if(0===e.length)return null;var t=e.find((function(t){return e.filter((function(e){return t.segment.getMimeType()===e.segment.getMimeType()})).some((function(e){return!e.segment.isInit()}))}));return t?(t.pendingRemoval=!0,t.segment):null},e.prototype.N9=function(e){var t=this.getAllSegmentsForMimeType(e);if(t.length>0){var i=t[t.length-1];i.isInit()&&this.removeSegment(i)}},e.prototype.O9=function(e){return this.v8.get(e)},Object.defineProperty(e.prototype,"mediaTypes",{get:function(){var e={};return this.v8.forEach((function(t,i){e[i]=t.mediaType})),e},enumerable:!1,configurable:!0}),e.prototype.getMinDistanceFromBufferBlock=function(e){var t=this.getCommonPlaybackTimeRanges();return Math.min(Math.min(Math.abs(e.getPlaybackTime()-t.start),Math.abs(e.getPlaybackTime()-t.end)),Math.min(Math.abs(e.getPlaybackEndTime()-t.start),Math.abs(e.getPlaybackEndTime()-t.end)))},e}();function s(e,t,i){e.hasOwnProperty(t)&&i(e[t])}function u(e,t,i){var n=e.isInit(),r=e.getMimeType()!==t;return!n&&!r&&e.getPlaybackTime()+e.getDuration()<i}t.BufferBlock=a},90919:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.findSegmentUrlIndexWithinSegmentList=function(e,t){return t.findIndex((function(t){var i=e.discontinuitySequenceNumber===t._discontinuitySequenceNumber,o=r(e.url,t._media),a=(0,n.compareValues)(e.byteRange,t._byteRange);return i&&o&&a}))},t.matchesMediaUrl=r;var n=i(19541);function r(e,t){return e.endsWith(t)||e.split("?")[0].endsWith(t)}},92096:function(e,t){var i,n;Object.defineProperty(t,"__esModule",{value:!0}),t.EncryptionKeyActionKey=t.KeyLoadState=void 0,function(e){e.Loading="loading",e.Loaded="loaded",e.Cancel="cancel"}(i||(t.KeyLoadState=i={})),function(e){e.AddEncryptionKey="@instance/sources/@source/encryptionkey/addEncryptionKey",e.UpdateEncryptionKey="@instance/sources/@source/encryptionkey/updateEncryptionKey",e.RemoveEncryptionKey="@instance/sources/@source/encryptionkey/removeEncryptionKey"}(n||(t.EncryptionKeyActionKey=n={}))},92778:function(e,t){var i;Object.defineProperty(t,"__esModule",{value:!0}),t.DashSchemeUri=void 0,function(e){e.AudioChannelConfig="urn:mpeg:dash:23003:3:audio_channel_configuration:2011"}(i||(t.DashSchemeUri=i={}))},94305:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferStallingService=void 0;var n=i(85648),r=i(60877),o=function(){function e(e,t,i){this.playerStateService=e,this.logger=t,this.renderer=i}return e.prototype.startStalling=function(){this.isRendererStalling()||(this.logger.debug("Stalling playback at ".concat(this.renderer.getCurrentTime(!0))),this.logger.insane("Video element stall started in state: ".concat(this.playerStateService.playbackState)),this.playerStateService.setIsRendererStalling(!0),this.playerStateService.isPlaying()&&(this.logger.insane("Call pause on renderer"),this.renderer.pause()))},e.prototype.endStalling=function(){var e=this;if(this.isRendererStalling()){this.playerStateService.setIsRendererStalling(!1);var t=[n.PlaybackState.Play,n.PlaybackState.Playing].includes(this.playerStateService.playbackState);this.logger.debug("Unstalling and ".concat(t?"":"not ","restarting playback")),t&&(!this.playerStateService.seekingOrTimeshifting&&(0,r.shouldResetCurrentTimeAfterBufferUnderrun)()&&(this.logger.debug("Resetting current time before unstalling"),this.renderer.setCurrentTime(this.renderer.getCurrentTime())),this.renderer.play().catch((function(t){e.logger&&e.logger.debug("Play after unstalling failed with reason: ".concat(t))})))}},e.prototype.isRendererStalling=function(){return this.playerStateService.getIsRendererStalling()},e.prototype.dispose=function(){this.logger=null,this.playerStateService=null,this.renderer=null},e}();t.BufferStallingService=o},94358:function(e,t,i){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.MediaPlayer=t.LoadState=void 0,t.checkIfGapSkip=j;var r,o=i(4524),a=i(48143),s=i(80813),u=i(56481),c=i(3714),d=i(90408),l=i(75375),h=i(44468),p=i(91678),f=i(46151),g=i(33436),m=i(23690),v=i(87827),y=i(93204),S=i(34047),T=i(85434),b=i(89927),M=i(19274),I=i(88052),P=i(62756),A=i(65272),R=i(23901),E=i(96533),C=i(38568),_=i(90087),B=i(23940),N=i(52090),O=i(44552),k=i(15761),L=i(36193),D=i(52447),x=i(88935),w=i(47531),H=i(16870),z=i(68981);!function(e){e.Unloaded="unloaded",e.Preparing="preparing",e.Loading="loading",e.Loaded="loaded"}(r||(t.LoadState=r={}));var W=Object.freeze({id:"auto",bitrate:null}),F=Object.freeze({id:"auto",bitrate:null,width:null,height:null}),U=function(){function e(e){var t=this;this.h=-1,this.j=!1,this.m=!1,this.n=!1,this.o=!0,this.p="api",this.q="api",this.K=function(e){null!=t.x||e.isInit()||(t.x=t.isLive()?t.L(e):0)},this.M=function(){t.isLive()&&t.Q()&&t.R()},this.N=function(e){t.j?t.j=!1:(t.b.debug("Caught a video element error: ",e),t.unload(),t.f.fireError((0,d.createPlayerErrorFromMediaError)(e)))},this.P=function(){var e=t.v.getStatus(t.u,t.T());t.u!==e.mode&&(t.a.eventHandler.dispatchEvent(c.PlayerEvent.LatencyModeChanged,{from:t.u,to:e.mode}),t.u=e.mode),e.mode===c.LatencyMode.Suspended||t.w.seekingOrTimeshifting||(e.requiredAction===t.g.LiveLatencyControlAction.Seek?t.O():e.requiredAction===t.g.LiveLatencyControlAction.PlaybackRate&&t.setPlaybackSpeed(1,e.actionParam,!1))},this.V=function(){t.w.getIsRendererStalling()?(t.b.debug("Renderer is currently stalled. Waiting for unstalling before ending stall."),t.Hb(),t.A=(0,y.subscribe)(t.a.store)((function(e){return(0,v.getPlayerState)(e)}),(function(){return t.U()}),(function(e){return!(0,v.getIsRendererStalled)(e)}))):t.U()},this.W=function(){t.m&&(t.b.debug("Detected replay attempt from video element"),t.a.internalPlayer.play()),t.w.transitionToPlayState(!0,t.p)},this.X=function(){t.b.insane("video element signaled pause in state: ".concat(t.w.playbackState)),t.k.maybeTransitionToPausedState(t.q)},this.zb=function(e){return{id:e.id,lang:e.lang,label:e.label,role:e.role,getQualities:function(){return _.MediaPlayerManifestApiFactory.getAudioQualities(t.s,t.getCurrentPlayingPeriodId(),e.id)}}},this.Bb=function(e){var i=j(t.a,e.time);t.d.GLOBAL_DISABLE_SEEKING&&!i&&Math.abs(e.time-t.r)>.05&&(t.b.debug("Seeking now allowed, seeking back to expected time"),t.a.videoElement.currentTime=t.r)},this.Cb=function(e){if(!t.m){var i=0===t.e.getCurrentTime(!0),n=t.isPlaying(),r=t.w.isSeeking(),o=t.isStalled();!n||r||o||i?t.b.debug("Skipping timeupdate",{isPlaying:n,isSeeking:r,isStalled:o,timeUpdateWithoutBuffer:i,time:e.time}):t.kb(t.getCurrentTime())}},this.Db=function(){t.m=!0},this.Eb=function(){t.a.logger.debug("DVR window exceeded"),t.w.isPlaying()?t.d.DISABLE_AUTO_RECOVERY_ON_DVR_WINDOW_EXCEEDED||t.Fb():t.n=!0},this.Gb=function(e){3001===e.code&&t.unload()},this.Ib=function(){for(var e=t.getCurrentTime(),i=0,n=t.getAvailableAudio();i<n.length;i++){var r=n[i];t.a.eventHandler.dispatchEvent(c.PlayerEvent.AudioAdded,{track:r,time:e})}},this.Jb=function(e){for(var i=0,n=t.getAvailableAudio();i<n.length;i++){var r=n[i];t.a.eventHandler.dispatchEvent(c.PlayerEvent.AudioRemoved,{track:r,time:e})}},this.Kb=function(){t.Jb(t.getCurrentTime())},this.Mb=function(e){t.isLive()&&(t.Q()?t.R():t.S(!1))},this.a=e,this.b=e.logger,this.c=e.config,this.d=e.settings,this.e=e.renderer,this.f=e.eventHandler,this.l=r.Unloaded,this.a.store.dispatch((0,p.initializeMetricsForMimeType)("default",this.a.settings)),this.k=new N.MediaPlayerController(e,this.K),I.ModuleManager.has(P.ModuleName.LowLatency)&&(this.g=I.ModuleManager.get(P.ModuleName.LowLatency)),this.f.on(c.PlayerEvent.PeriodSwitch,this.Kb),this.f.on(c.PlayerEvent.PeriodSwitched,this.Ib),this.f.on(c.PlayerEvent.PlaybackSpeedChanged,this.Mb),this.z=(0,y.subscribe)(this.a.store)((function(e){return(0,v.getIsPlaying)((0,v.getPlayerState)(e))}),this.M,(function(e,t){return e&&!t}))}return e.prototype.C=function(e,t){var i=t.serviceManager;this.D(t),this.E(t),this.F(t,e),this.G(t);var n=I.ModuleManager.get(P.ModuleName.ABR).AdaptationService;i.set(s.ServiceName.AdaptationService,new n(t)),i.set(s.ServiceName.TimedMetadataService,new k.TimedMetadataService(t)),i.set(s.ServiceName.SegmentService,new O.SegmentService(t));var r=new w.StreamTimeService(i,t.sourceContext.sourceIdentifier);i.set(s.ServiceName.StreamTimeService,r),i.set(s.ServiceName.HeartbeatService,new A.HeartbeatService(i,this.k),t.sourceContext.sourceIdentifier),this.H(t),this.I(t)},e.prototype.D=function(e){var t=e.serviceManager,i=e.sourceContext.sourceIdentifier;if(!t.has(s.ServiceName.SynchronizedTimeService,i)){var n=new H.SynchronizedTimeService(e,e.sourceContext);t.set(s.ServiceName.SynchronizedTimeService,n,i)}},e.prototype.E=function(e){var t=e.serviceManager,i=e.sourceContext.sourceIdentifier;t.has(s.ServiceName.ManifestService,i)?(this.s=t.get(s.ServiceName.ManifestService,i),this.s.restore()):(this.s=new E.ManifestService(e,e.sourceContext),t.set(s.ServiceName.ManifestService,this.s,i))},e.prototype.F=function(e,t){var i=e.serviceManager,n=e.sourceContext.sourceIdentifier;if(!i.has(s.ServiceName.ManifestLoadingService,n)){var r=(0,R.createManifestLoadingService)(t,e,e.sourceContext);i.set(s.ServiceName.ManifestLoadingService,r,n)}},e.prototype.G=function(e){var t=e.serviceManager,i=e.sourceContext.sourceIdentifier;if(t.has(s.ServiceName.ManifestUpdateSchedulingService,i))t.get(s.ServiceName.ManifestUpdateSchedulingService,i).restore();else{var n=new C.ManifestUpdateScheduler(e,e.sourceContext);t.set(s.ServiceName.ManifestUpdateSchedulingService,n,i)}},e.prototype.H=function(e){var t=e.serviceManager,i=e.sourceContext.sourceIdentifier;if(I.ModuleManager.has(P.ModuleName.Subtitles)&&!t.has(s.ServiceName.SubtitleService,i)){var n=I.ModuleManager.get(P.ModuleName.Subtitles).SubtitleService;t.set(s.ServiceName.SubtitleService,new n(e),i)}this.t=t.get(s.ServiceName.SubtitleService,i)},e.prototype.I=function(e){var t,i=e.serviceManager;null===(t=this.v)||void 0===t||t.dispose(),I.ModuleManager.has(P.ModuleName.LowLatency)&&(i.set(s.ServiceName.LiveLatencyService,new this.g.LiveLatencyService(e)),this.v=i.get(s.ServiceName.LiveLatencyService))},e.prototype.J=function(e){var t,i,n,r,o=this.a.serviceManager;[s.ServiceName.LiveLatencyService,s.ServiceName.TimedMetadataService].forEach((function(e){return(0,a.disposeService)(o,e)}));var u=null===(t=this.a.sourceContext)||void 0===t?void 0:t.sourceIdentifier;if(u){(0,a.disposeService)(o,s.ServiceName.HeartbeatService,u),(0,a.disposeService)(o,s.ServiceName.SegmentService,u);var c=!this.a.sourceContext.isAd;e===l.ADVERTISING_ISSUER_NAME&&c?(null===(i=o.get(s.ServiceName.ManifestService,u))||void 0===i||i.suspend(),null===(n=o.get(s.ServiceName.ManifestUpdateSchedulingService,u))||void 0===n||n.suspend(),null===(r=o.get(s.ServiceName.SubtitleService,u))||void 0===r||r.disableAllSubtitles()):[s.ServiceName.ManifestService,s.ServiceName.ManifestLoadingService,s.ServiceName.ManifestUpdateSchedulingService,s.ServiceName.SynchronizedTimeService,s.ServiceName.SubtitleService].forEach((function(e){return(0,a.disposeService)(o,e,u)}))}},e.prototype.L=function(e){var t=null!=e.getSegmentInfo().wallClockTime?e.getPlaybackTime()-(0,b.toSeconds)(e.getSegmentInfo().wallClockTime):0;return this.k.getSeekableRange().start+t},e.prototype.play=function(e){return this.p=e,this.o?this.i?this.w.isPlaying()?(this.b.debug("Ignoring play call as play was already triggered or we're already playing"),Promise.resolve()):(this.m=!1,this.w.isPaused()&&this.isLive()&&(this.n||this.getMaxTimeShift()>=0)&&!this.d.DISABLE_AUTO_RECOVERY_ON_DVR_WINDOW_EXCEEDED&&(this.a.logger.debug("Handling DVR window excursion - going to live edge"),this.O(),this.n=!1),this.k.start(),this.w.transitionToPendingPlayState(!1,e),this.e.play()):Promise.resolve():Promise.reject("Play control not permitted")},e.prototype.O=function(){var e=this;this.d.ENABLE_SEEK_FOR_LIVE?this.w.isSeeking()||this.seek(this.getSeekableRange().end,l.INTERNAL_ISSUER_NAME):this.k.timeShift(0,(function(){return e.yb()})).catch((function(){return e.xb()}))},e.prototype.Q=function(){return Boolean(this.v)&&!this.isPaused()&&0===this.getTimeShift()&&1===this.getPlaybackSpeed()&&!this.w.isTimeShifting()&&!this.w.isSeeking()},e.prototype.R=function(){this.v.resumeControl()},e.prototype.S=function(e){void 0===e&&(e=!0);var t=this.u===c.LatencyMode.Suspended;this.v&&!t&&(this.v.suspendControl(),e&&this.setPlaybackSpeed(1,1,!1))},e.prototype.T=function(){var e=[this.getBufferLevel(h.BufferType.ForwardDuration,h.MediaType.Audio),this.getBufferLevel(h.BufferType.ForwardDuration,h.MediaType.Video)].map((function(e){return e.level})).filter((function(e){return null!==e}));return 0===e.length?0:Math.min.apply(Math,e)},e.prototype.U=function(){this.Hb(),this.w.stallExit(),this.w.transitionToPlayingState(this.p),this.m=!1},e.prototype.preload=function(){this.l!==r.Unloaded&&this.k&&this.k.start()},e.prototype.pause=function(e){this.o&&(this.b.insane("Pause was called via the API"),this.w.isInitial()||(this.q=e,this.isLive()&&this.v&&this.v.isConfigured()&&(this.S(),this.P()),this.w.isPaused()||this.w.isStopped()||this.e.pause(),this.w.transitionToPausedState(this.e.isPaused(),e)))},e.prototype.mute=function(e){this.isMuted()||(this.e.mute(),this.a.eventHandler.dispatchEvent(c.PlayerEvent.Muted,{issuer:e||"api"}))},e.prototype.unmute=function(e){this.isMuted()&&(this.e.unmute(),this.a.eventHandler.dispatchEvent(c.PlayerEvent.Unmuted,{issuer:e||"api"}))},e.prototype.Y=function(e,t){var i,n=null===(i=this.rb())||void 0===i?void 0:i.getState();if(!n)return e;for(var r=I.ModuleManager.get(P.ModuleName.HLS).selectors,o=r.getHlsState,a=(0,r.getMergedDiscontinuityTimings)(o(n)),s=Object.values(a),u=0;u<s.length-1;u++){var c=s[u].endTime,d=s[u+1].startTime;if(e>=c-t&&e<d)return this.b.debug("Adjusting seek target to discontinuity start: ".concat(e," -> ").concat(d)),d}return e},e.prototype.seek=function(e,t){var i,n,r;void 0===t&&(t="");var o=this.c&&this.c.hasOwnProperty("playback")?this.c.playback:{},a=!o.hasOwnProperty("seeking")||o.seeking,s=this.a.store.getState(),u=!!s&&null!==(r=null===(n=null===(i=(0,v.getPlayerState)(s))||void 0===i?void 0:i.seekingProcess)||void 0===n?void 0:n.isInitial)&&void 0!==r&&r,c=![l.STARTUP_ISSUER_NAME,l.INTERNAL_ISSUER_NAME].includes(t);if(!(u||!this.d.GLOBAL_DISABLE_SEEKING&&a)||!this.o)return!1;var d=this.d.END_OF_BUFFER_TOLERANCE,h=this.s.isHlsManifest()?this.Y(e,d):(0,z.adjustTargetTimeToPeriodStart)(e,d,this.s,this.b);return this.m=!1,this.Z(),this.Lb(),this.w.transitionToSeekingState(h,t,c),this.a.store.dispatch((0,m.updateSeekingProcess)({issuer:t,targetTime:h,seekableRange:this.getSeekableRange(),isInitial:u})),!0},e.prototype.Z=function(){this.w.isTimeShifting()&&(this.k.getTimeShiftHandler().cancel(),this.w.transitionToTimeShiftedState(!1))},e.prototype.kb=function(e){e!==this.r&&(this.a.eventHandler.dispatchEvent(c.PlayerEvent.TimeChanged,{time:e}),this.r=e,this.isLive()&&this.v&&this.v.isConfigured()&&this.P())},e.prototype.setVolume=function(e,t){var i=this.e.getVolume();this.e.setVolume(e),i!==e&&this.a.eventHandler.dispatchEvent(c.PlayerEvent.VolumeChanged,{targetVolume:e,sourceVolume:i,issuer:t||"api"})},e.prototype.setAudioQuality=function(e){var t,i=this.getAvailableAudioQualities(),n=this.getAudioQuality();(t="auto"===e?W:i.find((function(t){return t.id===e})))&&n.id!==t.id&&(this.lb(h.MediaType.Audio,e),this.a.eventHandler.dispatchEvent(c.PlayerEvent.AudioQualityChanged,{sourceQuality:n,sourceQualityId:n.id,targetQuality:t,targetQualityId:t.id}))},e.prototype.getAudioQuality=function(){var e=this.tb(h.MediaType.Audio),t=this.a.serviceManager.get(s.ServiceName.AdaptationService),i=t.isAuto(e),n=t.getCurrentRepresentationId(e);return i||null===n?W:this.getAvailableAudioQualities().find((function(e){return e.id===n.representationId}))},e.prototype.lb=function(e,t){var i=this.tb(e);this.a.serviceManager.get(s.ServiceName.AdaptationService).setFixedRepresentation(i,t)},e.prototype.setVideoQuality=function(e){var t,i=this.getAvailableVideoQualities(),n=this.getVideoQuality();(t="auto"===e?F:i.find((function(t){return t.id===e})))&&n.id!==t.id&&(this.a.eventHandler.dispatchEvent(c.PlayerEvent.VideoQualityChanged,{sourceQuality:n,sourceQualityId:n.id,targetQuality:t,targetQualityId:t.id}),this.lb(h.MediaType.Video,e))},e.prototype.getVideoQuality=function(){var e=this.tb(h.MediaType.Video),t=this.a.serviceManager.get(s.ServiceName.AdaptationService),i=t.isAuto(e),n=t.getCurrentRepresentationId(e);return i||null===n?F:this.getAvailableVideoQualities().find((function(e){return e.id===n.representationId}))},e.prototype.mb=function(){var e=this.a.sourceContext;e.source&&e.source.options&&e.source.options.headers&&(this.d.HTTP_HEADERS=e.source.options.headers)},e.prototype.nb=function(e){var t=this.rb();if(void 0!==t)if(e.type===h.StreamType.Hls&&I.ModuleManager.has(P.ModuleName.HLS)&&!t.hasReducer("hls")){var i=I.ModuleManager.get(P.ModuleName.HLS);t.addReducers(n(n({},D.engineBitmovinSourceReducers),{hls:i.HlsReducer}))}else t.addReducers(D.engineBitmovinSourceReducers)},e.prototype.ob=function(){this.e.on(M.MediaElementEvent.error,this.N),this.e.on(M.MediaElementEvent.timeupdate,this.Cb),this.e.on(M.MediaElementEvent.seeking,this.Bb),this.e.on(M.MediaElementEvent.playing,this.V),this.e.on(M.MediaElementEvent.play,this.W),this.e.on(M.MediaElementEvent.pause,this.X)},e.prototype.pb=function(){this.b.debug("setting bitrate boundaries for audio to "+this.d.MIN_SELECTABLE_AUDIO_BITRATE+" - "+this.d.MAX_SELECTABLE_AUDIO_BITRATE),this.b.debug("setting bitrate boundaries for video to "+this.d.MIN_SELECTABLE_VIDEO_BITRATE+" - "+this.d.MAX_SELECTABLE_VIDEO_BITRATE)},e.prototype.qb=function(e,t){var i,n=this;return this.l===r.Unloaded?Promise.reject("Unload during load"):(this.C(e,this.a),this.a.sourceContext.source=e.config,(null===(i=this.a.videoElement)||void 0===i?void 0:i.eventHandler)&&this.a.videoElement.eventHandler.reset(),this.i=e,this.m=!1,this.n=!1,this.a.store.dispatch((0,m.updateSeekingProcess)({isInitial:!0})),this.pb(),this.v&&(this.u=c.LatencyMode.Suspended,this.v.reset()),this.ob(),this.d.GLOBAL_DISABLE_SEEKING=t||!1,this.l=r.Loading,this.k.init(e).then((function(){n.l=r.Loaded})))},e.prototype.prepareLoad=function(){var e=this.a.serviceManager.get(s.ServiceName.PlayerStateService);e&&(this.w=e);var t=Promise.resolve();return this.l===r.Loading&&(t=this.unload()),this.w.reset(),this.l=r.Preparing,t},e.prototype.load=function(e,t){var i,n=this;if("dash"!==e.type&&"hls"!==e.type&&"smooth"!==e.type)return Promise.reject("invalid source");this.nb(e),this.mb(),this.y=(0,y.subscribe)(this.a.store)((function(e){return(0,v.getIsStopped)((0,v.getPlayerState)(e))}),this.Db,(function(e){return!0===e})),this.f.on(c.PlayerEvent.DVRWindowExceeded,this.Eb,!0),this.f.on(c.PlayerEvent.Error,this.Gb,!0);var r=null!==(i=null==t?void 0:t.seeking)&&void 0!==i&&i;return this.e.ready().then((function(){return n.qb(e,r)}))},e.prototype.rb=function(){return this.a.serviceManager.get(s.ServiceName.SourceStoreService,this.a.sourceContext.sourceIdentifier)},e.prototype.unload=function(e){var t=this;if(this.Hb(),this.l===r.Unloaded)return Promise.resolve();var i=this.l===r.Loaded;this.m=!1,this.l=r.Unloaded,this.j=!0,this.x=null,this.e.off(M.MediaElementEvent.error,this.N),this.e.off(M.MediaElementEvent.timeupdate,this.Cb),this.e.off(M.MediaElementEvent.seeking,this.Bb),this.e.off(M.MediaElementEvent.playing,this.V),this.e.off(M.MediaElementEvent.play,this.W),this.e.off(M.MediaElementEvent.pause,this.X),null==this||this.y(),this.f.off(c.PlayerEvent.DVRWindowExceeded,this.Eb),this.f.off(c.PlayerEvent.Error,this.Gb),this.w.isPlaying()&&this.e.pause(),this.w.reset();var n=this.a.sourceContext.sourceIdentifier;return this.a.serviceManager.has(s.ServiceName.SynchronizedTimeService,n)&&!V(e)&&this.a.serviceManager.get(s.ServiceName.SynchronizedTimeService,n).reset(),(this.k?this.k.terminate():Promise.resolve()).then((function(){t.i=void 0,t.J(e),V(e)||t.rb().dispatch((0,L.clearActiveTracksAction)()),i&&t.f.dispatchEvent(c.PlayerEvent.SourceUnloaded)}))},e.prototype.sb=function(){return this.k.isInitialized()},e.prototype.isPlaying=function(){return this.w.isPlaying()},e.prototype.isPaused=function(){return this.w.isPaused()},e.prototype.hasEnded=function(){return this.m},e.prototype.isMuted=function(){return this.e.isMuted()},e.prototype.isStalled=function(){return this.w.isStalled},e.prototype.isLive=function(){return this.s.isLive()},e.prototype.getVolume=function(){return this.e.getVolume()},e.prototype.getCurrentTime=function(e){return void 0===e&&(e=h.TimeMode.AbsoluteTime),!this.isLive()&&this.hasEnded()?this.getDuration():e===h.TimeMode.RelativeTime?Math.max(0,this.k.getCurrentTime()-this.x):this.k.getCurrentTime()},e.prototype.getDuration=function(){return this.s.getDuration()},e.prototype.getAvailableVideoQualities=function(){return this.sb()?this.s.getVideoRepresentations(this.getCurrentPlayingPeriodId()):[]},e.prototype.getAvailableSegments=function(){return this.sb()?this.k.getAvailableSegments():{}},e.prototype.getAvailableAudioQualities=function(){var e=this.getAudio();if(!this.sb()||!e)return[];var t=this.s.getAudioRepresentations(this.getCurrentPlayingPeriodId());return t[e.id]?t[e.id]:[]},e.prototype.getDroppedVideoFrames=function(){return this.e.getDroppedVideoFrames()},e.prototype.setTargetBufferLevel=function(e,t,i){this.a.bufferSettings.setTargetLevel(e,t,i)},e.prototype.getBufferLevel=function(e,t){var i={level:null,targetLevel:this.a.bufferSettings.getTargetLevel(e,t),type:e,media:t},n=this.e.getCurrentTime(),r=(0,f.getMetricsState)(this.a.store.getState()),o=Object.keys(r).find((function(e){return T.MimeTypeHelper.isVideo(e)})),a=Object.keys(r).find((function(e){return T.MimeTypeHelper.isAudio(e)}));return t===h.MediaType.Video&&o?i.level=this.k.getBufferLevel(o,n,e):t===h.MediaType.Audio&&a&&(i.level=this.k.getBufferLevel(a,n,e)),i},e.prototype.getTotalStalledTime=function(){var e=(0,f.getMetricsState)(this.a.store.getState());for(var t in e)if(e[t]){var i=(0,f.getMetricsLastEntry)(e,t,g.MetricType.StalledSeconds);if(i&&i.value&&!isNaN(i.value))return Math.round(100*i.value)/100}return 0},e.prototype.tb=function(e){var t=(0,f.getMetricsState)(this.a.store.getState());return Object.keys(t).find((function(t){return t.includes(e)}))},e.prototype.getDownloadedData=function(e){var t=this.tb(e),i=n({},this.vb(t)),r=n({},this.ub(t));return r.id&&(r.id=""+r.id),void 0===r.width&&void 0!==i.width&&(r.width=i.width),r.width=parseInt(""+r.width),void 0===r.height&&void 0!==i.height&&(r.height=i.height),r.height=parseInt(""+r.height),void 0===r.bitrate&&void 0!==i.bitrate&&(r.bitrate=i.bitrate),r.bitrate=parseInt(""+r.bitrate),r.isAuto=this.a.serviceManager.get(s.ServiceName.AdaptationService).isAuto(t),r},e.prototype.ub=function(e){if(this.k.hasStarted()){var t=(0,f.getMetricsState)(this.a.store.getState());if(t[e])return(0,f.getMetricsLastEntry)(t,e,g.MetricType.DownloadedRepresentation).value}return{}},e.prototype.vb=function(e){if(this.k.hasStarted()){var t=(0,f.getMetricsState)(this.a.store.getState());if(t[e])return(0,f.getMetricsLastEntry)(t,e,g.MetricType.DownloadedAdaptationSet).value}return{}},e.prototype.getDownloadedVideoData=function(){var e=this.getDownloadedData(h.MediaType.Video),t=!0;return e.hasOwnProperty("isAuto")&&(t=e.isAuto),e&&(e.bitrate||e.id)?{id:e.id,bitrate:e.bitrate,height:e.height,width:e.width,isAuto:t}:{id:"",bitrate:0,height:0,width:0,isAuto:!0}},e.prototype.getDownloadedAudioData=function(){var e=this.getDownloadedData(h.MediaType.Audio),t=!0;return e.hasOwnProperty("isAuto")&&(t=e.isAuto),e&&(e.bitrate||e.id)?{id:e.id,bitrate:e.bitrate,isAuto:t}:{id:"",bitrate:0,isAuto:!0}},e.prototype.getPlaybackVideoData=function(){var e=this.k.getPlaybackRepresentation(h.MediaType.Video)||{},t=isNaN(e._height)?0:Number(e._height),i=isNaN(e._width)?0:Number(e._width),n={id:e._id+"",bitrate:Number(e._bandwidth)||0,frameRate:e._frameRate,height:t,width:i,uid:e.uid};return e._codecs&&(n.codec=S.CodecStringHelper.getExtractedCodecStrings(e._codecs).video),n},e.prototype.getPlaybackAudioData=function(){var e,t={id:String(void 0),bitrate:Number(void 0)},i=this.k.getPlaybackRepresentation(h.MediaType.Audio);return i&&null!==(e=(0,B.representationToQuality)(i,i._mimeType))&&void 0!==e?e:t},e.prototype.setQueryParameters=function(e){this.d.QUERY_PARAMETERS=e},e.prototype.clearQueryParameters=function(){this.d.QUERY_PARAMETERS=void 0},e.prototype.wb=function(e){this.w&&this.w.isTimeShifting()&&(this.w.transitionToTimeShiftedState(e),this.h=-1)},e.prototype.xb=function(){this.wb(!1)},e.prototype.yb=function(e){this.wb(e!==l.STARTUP_ISSUER_NAME)},e.prototype.getMaxTimeShift=function(){if(this.isLive()&&this.sb())return this.c.playback&&!1===this.c.playback.timeShift?0:this.k.getMaxTimeShift()},e.prototype.timeShift=function(e,t){var i=this;if(this.sb()&&this.getMaxTimeShift()<=0){-1===this.h&&(this.h=this.getCurrentTime(),0===this.h&&(this.h=this.k.getTimeShiftLiveEdge())),this.Lb();var n=this.k.getPlaybackTimeForTimeShiftOffset(e);this.w.transitionToTimeShiftingState(this.h,n,t||"api",t!==l.STARTUP_ISSUER_NAME),this.k.timeShift(e,(function(){return i.yb(t)})).catch((function(){return i.xb()}))}},e.prototype.getTimeShift=function(){return this.sb()?this.k.getTimeShift():0},e.prototype.addSubtitle=function(e){var t=this;return this.sb()&&this.t?Promise.resolve(void 0).then((function(){t.t.addExternalSubtitle(e)})):Promise.reject(void 0)},e.prototype.removeSubtitle=function(e){this.sb()&&this.t&&this.t.removeSubtitle(e)},e.prototype.enableSubtitle=function(e){return this.sb()&&this.t?this.t.enableSubtitle(e):Promise.resolve(!1)},e.prototype.disableSubtitle=function(e){return this.sb()&&this.t?this.t.disableSubtitle(e):Promise.resolve(!1)},e.prototype.listSubtitles=function(){return this.sb()&&this.t&&this.k?this.t.getAvailableSubtitles(this.getCurrentPlayingPeriodId()):[]},e.prototype.setAudio=function(e){var t=this;if(this.sb()&&this.k&&"string"==typeof e){var i=this.getAudio();if(i&&i.id===String(e))return;this.k.setAudio(e).then((function(){var e=t.getAudio();e&&i&&e.id!==i.id&&t.a.eventHandler.dispatchEvent(c.PlayerEvent.AudioChanged,{targetAudio:e,sourceAudio:i,time:t.e.getCurrentTime()})})).catch((function(e){t.b.debug("setAudio failed for lang ",e)}))}},e.prototype.getAvailableAudio=function(){return this.sb()&&this.k?this.k.getAvailableAudio(this.getCurrentPlayingPeriodId()).map(this.zb):[]},e.prototype.getAudio=function(){if(this.sb()&&this.k){var e=this.k.getAudio();if(e)return this.zb(e)}return null},e.prototype.getManifest=function(){var e=this.s.getManifest();if(e)return e._isHls?this.Ab():e.originalDashManifest},e.prototype.Ab=function(){return I.ModuleManager.get(P.ModuleName.HLS).selectors.getHlsState(this.rb().getState()).masterPlaylist.string},e.prototype.getBufferedRanges=function(){var e=this.k.getBufferedRanges(!0);return o.BufferRangeHelper.getCommonBufferedRanges(e).map((function(e){return{start:e.getStart(),end:e.getEnd()}}))},e.prototype.getSnapshot=function(e,t){if(this.isPlaying()||this.isPaused())return this.e.getSnapshotData(e,t)},e.prototype.setPlaybackSpeed=function(e,t,i){void 0===t&&(t=1),void 0===i&&(i=!0),this.e.setPlaybackSpeed(e*t),this.w.playbackSpeed!==this.e.getPlaybackSpeed()&&this.w.setPlaybackSpeed(e,t,i)},e.prototype.getPlaybackSpeed=function(){return this.w.playbackSpeed},e.prototype.permitControl=function(e){this.o=e},e.prototype.getSeekableRange=function(){return this.isLive()&&!this.d.ENABLE_SEEK_FOR_LIVE||!this.k?{start:-1,end:-1}:this.k.getSeekableRange()},e.prototype.createManifestApi=function(){return _.MediaPlayerManifestApiFactory.create(this,this.a)},e.prototype.Fb=function(){var e=this.k.getTimeShiftHandler(),t=this.getMaxTimeShift()+e.getMinSegmentDuration(),i=this.k.getPlaybackTimeForTimeShiftOffset(t),n=e.isTimeInBufferedRange(i);this.a.logger.debug("Handling DVRWindowExceeded - TimeShifting to ".concat(n?t:"live edge")),this.timeShift(n?t:0)},e.prototype.getLatency=function(){return this.v.getLatency()},e.prototype.setTargetLatency=function(e){var t=Math.abs(this.s.getTimeShiftBufferDepthSeconds());e>t&&(e=t,this.b.debug("Tried to set target latency outside DVR window, corrected to lower bound",t)),this.a.eventHandler.dispatchEvent(c.PlayerEvent.TargetLatencyChanged,{from:this.v.getTargetLatency(),to:e}),this.v.setTargetLatency(e)},e.prototype.getTargetLatency=function(){return this.v.getTargetLatency()},e.prototype.setCatchupConfig=function(e){this.v.setCatchupConfig(e)},e.prototype.getCatchupConfig=function(){return this.v.getCatchupConfig()},e.prototype.setFallbackConfig=function(e){this.v.setFallbackConfig(e)},e.prototype.getFallbackConfig=function(){return this.v.getFallbackConfig()},e.prototype.release=function(e){var t,i=this;return this.f.off(c.PlayerEvent.PeriodSwitch,this.Kb),this.f.off(c.PlayerEvent.PeriodSwitched,this.Ib),this.f.off(c.PlayerEvent.PlaybackSpeedChanged,this.Mb),this.z(),null===(t=this.B)||void 0===t||t.call(this),this.unload(e).then((function(){return i.w=null,i.k=(0,u.dispose)(i.k),i.e.release().then((function(){return i.e=null}))}))},e.prototype.Hb=function(){this.A&&(this.A(),this.A=void 0)},e.prototype.Lb=function(){var e=this;!this.B&&this.a.store&&(this.B=(0,v.subscribeToSeekedOrTimeshifted)(this.a.store,(function(){var t;null===(t=e.B)||void 0===t||t.call(e),e.B=void 0,e.Q()?e.R():e.S()})))},e.prototype.getCurrentPlayingPeriodId=function(){return(0,x.getPlayingPeriodId)(this.rb().getState())},e.prototype.updateCallback=function(e){},e.prototype.onFullscreenEnter=function(){},e.prototype.onFullscreenExit=function(){},e.prototype.isAirplayAvailable=function(){return!1},e.prototype.isAirplayActive=function(){return!1},e.prototype.showAirplayTargetPicker=function(){},e}();function V(e){return e===l.ADVERTISING_ISSUER_NAME||e===l.ADVERTISING_RESTORE_ISSUER_NAME}function j(e,t){if(!I.ModuleManager.has(P.ModuleName.RendererMse)||!e.videoElement)return!1;for(var i=I.ModuleManager.get(P.ModuleName.RendererMse).Ranges,n=e.settings.MIN_SIZE_FOR_GAP_SKIPPING,r=i.findGaps(e.videoElement.buffered,n),o=!1,a=0;a<r.length;a++){var s=r.end(a)+i.TIME_FUDGE_FACTOR;Math.abs(s-t)<=.1&&(o=!0)}return o}t.MediaPlayer=U},94618:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.KeyLoader=void 0;var n=i(40306),r=i(3336),o=i(4129),a=i(77401),s=i(29669),u=function(){function e(e){this.N3=e,this.O3=e.settings,this.Q3=e.sourceContext.sourceIdentifier,this.P3=new o.DefaultContentLoader(this.N3,{maxRetries:this.O3.MAX_RETRIES,retryDelay:this.O3.RETRY_DELAY,requestType:s.HttpRequestType.KEY_HLS_AES})}return e.prototype.R3=function(){var e=this.N3.sourceContext.source&&this.N3.sourceContext.source.hasOwnProperty("options")&&this.N3.sourceContext.source.options,t=e&&e.hasOwnProperty("withCredentials")&&e.withCredentials,i=e&&e.hasOwnProperty("hlsWithCredentials")&&e.hlsWithCredentials;return Boolean(t)||Boolean(i)},e.prototype.load=function(e){var t=this;return this.P3?this.P3.load(e,s.HttpRequestMethod.GET,s.HttpResponseType.ARRAYBUFFER,void 0,void 0,this.R3()).then((function(e){return e.body})).catch((function(i){if(i.message===a.RequestError.Canceled)return Promise.reject(i);var o=new r.PlayerError(n.ErrorCode.DRM_FAILED_LICENSE_REQUEST,{statusCode:i.status,statusText:i.statusText,keyUrl:e},"Failed to load the DRM key: ".concat(i.status," ").concat(i.statusText,"."),t.Q3);return t.N3.eventHandler.fireError(o),Promise.reject(o)})):Promise.reject("Could not load: No loader.")},e.prototype.isLoading=function(){return!!this.P3&&this.P3.isLoading()},e.prototype.dispose=function(){this.P3&&"function"==typeof this.P3.dispose&&this.P3.dispose(),this.P3=void 0,this.O3=void 0},e}();t.KeyLoader=u},95236:function(e,t,i){var n,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentInfoMapReducer=void 0;var a=i(3793),s=i(37641),u=i(49713);function c(e,t,i){var n;return r(r({},e),((n={})[t]=i,n))}t.SegmentInfoMapReducer=(0,a.default)({},((n={})[u.SegmentInfoMapActionType.SetSegmentInfos]=function(e,t){return c(e,t.payload.qualityPath,t.payload.updatedEntry)},n[u.SegmentInfoMapActionType.UpdateSegmentInfos]=function(e,t){return function(e,t,i){var n;if(!e[t]||0===i.segmentInfos.length)return c(e,t,i);var a=e[t].segmentInfos,u=a.findIndex((function(e){return(0,s.areSegmentsIdentical)(e,i.segmentInfos[0])}));if(-1===u)return c(e,t,i);var d,l=a.length-u,h=i.segmentInfos.length-l;if(0!==u||0!==h){var p=h>0?i.segmentInfos.slice(-h):[];d=o(o([],a.slice(u),!0),p,!0)}else d=a;var f=r(r(r({},e[t]),i),{segmentInfos:d});return r(r({},e),((n={})[t]=f,n))}(e,t.payload.qualityPath,t.payload.updatedEntry)},n))},96533:function(e,t,i){var n=this&&this.__extends||function(){var e=function(t,i){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i])},e(t,i)};return function(t,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=t}e(t,i),t.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,i=1,n=arguments.length;i<n;i++)for(var r in t=arguments[i])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,i){if(i||2===arguments.length)for(var n,r=0,o=t.length;r<o;r++)!n&&r in t||(n||(n=Array.prototype.slice.call(t,0,r)),n[r]=t[r]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestService=void 0,t.initializeInternalIds=H,t.addDrmKidsToRepresentations=z,t.iterateAdaptationSets=W,t.getNearestPeriodForTime=F,t.findLowestPossibleBandwidthFromRepresentations=U,t.getMatchingRepresentationsByBandwidth=V,t.getMatchingRepresentationByBandwidth=j,t.getCodecPriorities=X,t.getCodecOfAdaptationSetMimeType=K;var a=i(40306),s=i(3336),u=i(80813),c=i(56481),d=i(3714),l=i(90408),h=i(25811),p=i(48488),f=i(30012),g=i(20649),m=i(88847),v=i(94685),y=i(74853),S=i(34047),T=i(52424),b=i(85434),M=i(15014),I=i(89927),P=i(23068),A=i(88052),R=i(62756),E=i(59707),C=i(62198),_=i(90919),B=i(87222),N=i(47151),O=i(13422),k=i(23940),L=i(16197),D=i(79505),x="Outdated",w=function(e){function t(t,i){var n=e.call(this,{onRestore:function(){return n.wB()}})||this;n.context=t,n.oB=0,n.vB=function(e){var t=n.getAdaptationSet(e._internalId);if(t){var i=function(t){n.context.eventHandler.dispatchEvent(t,{quality:{id:e._id,bitrate:e._bandwidth}})};b.MimeTypeHelper.isAudio(t._mimeType)?i(d.PlayerEvent.AudioQualityRemoved):b.MimeTypeHelper.isVideo(t._mimeType)&&i(d.PlayerEvent.VideoQualityRemoved)}},n.BB=function(e){(e.Representation||[]).forEach((function(t){e._codecs&&!t._codecs&&(t._codecs=e._codecs),e._width&&!t._width&&(t._width=e._width),e._height&&!t._height&&(t._height=e._height)})),delete e.SegmentTemplate},n.WA=i,n.VA=t.settings,n.kB=[];var r=n.WA.sourceIdentifier;return n.lB=t.serviceManager.get(u.ServiceName.SynchronizedTimeService,r),n.XA=t.serviceManager.get(u.ServiceName.SourceStoreService,r),n}return n(t,e),Object.defineProperty(t.prototype,"pB",{get:function(){return this.ZA||(this.ZA=new k.MPDExtractor(this.context,this.WA)),this.ZA},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"qB",{get:function(){var e;return(0,C.getManifest)(null===(e=this.XA)||void 0===e?void 0:e.getState())},enumerable:!1,configurable:!0}),t.prototype.rB=function(e){this.XA.dispatch((0,E.setManifestAction)(this.preProcessManifest(e)))},t.prototype.updateManifest=function(e){var t=this;this.oB++;var i=this.oB;return this.OB(e).then((function(){return t.sB(i),t.tB(e)})).then((function(){t.sB(i),t.uB(e)})).catch((function(e){if(e!==x)throw e;t.context.logger.debug("Skipping manifest update, since a newer manifest is available")}))},t.prototype.sB=function(e){if(e!==this.oB)throw x},t.prototype.tB=function(e){var t,i,n=this,r=null===(t=this.context.serviceManager)||void 0===t?void 0:t.get(u.ServiceName.DrmService),o=null===(i=this.context.serviceManager)||void 0===i?void 0:i.get(u.ServiceName.DrmDetectorService);return r&&o&&(null==e?void 0:e.Period)?r.getUsedOrEarlyResolvedKeySystemUid().then((function(t){if(t){var i=function(e,t){var i=[],n=[];return e.Period.forEach((function(e){var r=t.getDRMCapabilitiesFromPeriod(e);i=i.concat(r[0]),n=n.concat(r[1])})),{audioCapabilities:i,videoCapabilities:n}}(e,n.pB),r=i.audioCapabilities,a=i.videoCapabilities;return o.getSupportedCapabilities(t,r,a).then((function(t){return function(e,t,i){e.Period.forEach((function(e){e.AdaptationSet=e.AdaptationSet.filter((function(n){return n.Representation=n.Representation.filter((function(r){var o=e.ContentProtection||n.ContentProtection,a=(null==o?void 0:o.length)>0,s=(0,k.getContentTypeFromMimeTypeAndCodecs)(r._mimeType,r._codecs),u=function(e,t,i){return b.MimeTypeHelper.isAudio(e)?Boolean(t.find((function(t){return t.contentType===e}))):!b.MimeTypeHelper.isVideo(e)||Boolean(i.find((function(t){return t.contentType===e})))}(s,t.audioCapabilities,t.videoCapabilities);return a&&!u&&i.debug("Representation not supported by MediaKeySystem (".concat(s,")")),!a||u})),!b.MimeTypeHelper.isAV(n._mimeType)||n.Representation.length>0}))}))}(e,t,n.context.logger)}))}})):Promise.resolve()},t.prototype.uB=function(e){if((0,v.isContextAvailable)(this.context)&&this.context.serviceManager){if(this.MB(),e.isInitialized=!1,this.rB(e),this.isLive()){var t=this.getFirstPeriod(),i=this.isHlsManifest()&&t?t.start:(0,I.toSeconds)(this.getAvailabilityStartTime());this.XA.dispatch((0,f.setStartTimeOffset)(i))}this.pB.adjustPeriodStartTimes();var n=this.JB();(0,l.maybeFireDurationChangedEvent)(this.YA,n,this.context.eventHandler),this.YA=n,this.FB(!0),this.context.serviceManager.maybeCall(u.ServiceName.HeartbeatService,(function(e){e.started&&e.beat()}),void 0,this.context.sourceContext.sourceIdentifier)}},t.prototype.excludeRepresentations=function(e){var t=this,i=e.map((function(e){return t.getRepresentationById(e)})).filter((function(e){return Boolean(e)}));this.FB(!1);var n=G(this.getAllPeriods());this.kB=y.ArrayHelper.union(this.kB,e),this.XA.dispatch((0,E.removeRepresentationsAction)(this.kB));var r=G(this.getAllPeriods());return Object.keys(n).every((function(e){return null!=r[e]&&n[e].length===r[e].length}))?(this.MB(),i.forEach(this.vB),this.FB(!0),!0):(this.context.eventHandler.fireError(new s.PlayerError(a.ErrorCode.SOURCE_ERROR,void 0,"No playable track left")),!1)},t.prototype.isRepresentationExcluded=function(e){return this.kB.some((function(t){return t.equals(e)}))},t.prototype.resetExcludedRepresentations=function(){this.kB=[]},t.prototype.wB=function(){this.GB(this.getManifest()),this.XA.dispatch((0,E.setManifestAction)(H(this.getManifest())))},t.getSupplementalProperties=function(e,t){return!e.SupplementalProperty||e.SupplementalProperty.length<=0?null:e.SupplementalProperty.filter((function(e){return e._schemeIdUri===t}))},t.prototype.xB=function(e,t,i){var n=i&&i.length>0;if(!n&&!this.VA.ADAPTATION_SET_SWITCHING_WITHOUT_SUPPLEMENTAL_PROPERTY)return null;var r=[],o=e._group,a=K(e);return n&&i.forEach((function(e){e._value&&r.push.apply(r,e._value.split(","))})),this.VA.ADAPTATION_SET_SWITCHING_WITHOUT_SUPPLEMENTAL_PROPERTY&&t.forEach((function(e){r.includes(e._id)||r.push(e._id)})),t.filter((function(t){if(!r.includes(t._id)||t._id===e._id)return!1;var i=t._group===o,n=t._mimeType===e._mimeType,s=K(t)===a,u=t._lang===e._lang;return n&&s&&i&&u}))},t.prototype.yB=function(e){var i=this;return e.AdaptationSet?e.AdaptationSet.reduce((function(n,r){var a=t.getSupplementalProperties(r,"urn:mpeg:dash:adaptation-set-switching:2016"),s=i.xB(r,e.AdaptationSet,a);return s&&0!==s.length?y.ArrayHelper.addAndMergeIntersects(n,o([r],s,!0)):n}),[]):[]},t.mergeAdaptationSetProperties=function(e,t,i){var n=e.hasOwnProperty(i),r=t.hasOwnProperty(i);(n||r)&&(n?r||(t[i]=[]):e[i]=[],e[i]=e[i].concat(t[i]))},t.prototype.zB=function(e,t){return e.filter((function(e){return e.hasOwnProperty(t)})).map((function(e){return e[t]}))},t.prototype.AB=function(e,t){var i=[e].concat(t),n=this.zB(i,"_minWidth"),r=this.zB(i,"_maxWidth"),o=this.zB(i,"_minHeight"),a=this.zB(i,"_maxHeight"),s=this.zB(i,"_minBandwidth"),u=this.zB(i,"_maxBandwidth");n.length>0&&(e._minWidth=Math.min.apply(null,n)),r.length>0&&(e._maxWidth=Math.max.apply(null,r)),o.length>0&&(e._minHeight=Math.min.apply(null,o)),a.length>0&&(e._maxHeight=Math.max.apply(null,a)),s.length>0&&(e._minBandwidth=Math.min.apply(null,s)),u.length>0&&(e._maxBandwidth=Math.max.apply(null,u))},t.prototype.CB=function(e,i){i.forEach(this.BB);var n=i.shift();i.forEach((function(e){["Representation","ContentComponent","ContentProtection","SupplementalProperty"].forEach((function(i){return t.mergeAdaptationSetProperties(n,e,i)}))})),this.AB(n,i),e.AdaptationSet=e.AdaptationSet.filter((function(e){return!i.includes(e)}))},t.prototype.DB=function(e){var t;null===(t=null==e?void 0:e.AdaptationSet)||void 0===t||t.forEach((function(e){var t;null===(t=null==e?void 0:e.Representation)||void 0===t||t.sort((function(e,t){return e._bandwidth-t._bandwidth}))}))},t.prototype.EB=function(e){var t=this;return e.Period.forEach((function(e){t.yB(e).forEach((function(i){t.CB(e,i)})),t.DB(e)})),e},t.prototype.setRepresentationDrmKid=function(e,t){this.XA.dispatch((0,E.setRepresentationDrmKidAction)(e,t))},t.prototype.getRepresentationDrmKid=function(e){var t;return null===(t=this.getRepresentationById(e))||void 0===t?void 0:t.associatedKid},t.prototype.FB=function(e){this.XA.dispatch((0,E.setManifestInitializedAction)(e))},t.prototype.GB=function(e){var t=this.WA.source.drm,i=function(e){return null==e.Period?[]:e.Period.filter((function(e){return e.AdaptationSet&&e.AdaptationSet.length>0})).reduce((function(e,t){return e.concat(t.AdaptationSet)}),[]).filter((function(e){return e.ContentProtection&&e.ContentProtection.length>0})).flatMap((function(e){return e.ContentProtection})).filter((function(e){return null!=e.laurl&&e.laurl.length>0})).flatMap((function(e){return e.laurl.map((function(t){return r(r({},t),{drmType:h.DRMSchemeIDURIs[e._schemeIdUri]})}))})).filter((function(e){return null!=e.drmType})).map((function(e){var t;return(t={})[e.drmType]={LA_URL:e._licenseUrl},t}))}(e),n={};i.length>0&&(n=r({},i[0])),null!=t&&Object.keys(t).length>0&&Object.keys(t).forEach((function(e){n[e]=null!=n[e]?r(r({},n[e]),t[e]):t[e]})),this.HB(n);var o=Object.keys(n).length>0?(0,p.setManifestDrm)(n):(0,p.resetManifestDrm)();this.XA.dispatch(o)},t.prototype.HB=function(e){if(A.ModuleManager.has(R.ModuleName.DRM)&&Object.keys(e).length>0&&!this.context.serviceManager.has(u.ServiceName.DrmService)){var t=A.ModuleManager.get(R.ModuleName.DRM).DrmService;this.context.serviceManager.set(u.ServiceName.DrmService,new t(this.context))}this.context.serviceManager.maybeCall(u.ServiceName.DrmService,(function(t){t.isDrmConfigSet()||t.setDrmConfig(e)}))},t.prototype.IB=function(){var e=new Map;return this.getAllRepresentations().filter((function(e){return e._internalId&&e.associatedKid})).forEach((function(t){return e.set(t._internalId.key(),t.associatedKid)})),e},t.prototype.preProcessManifest=function(e){var t=this.IB();return e.Period&&e.Period.length>0?(z(e=(0,O.orderAdaptationSetsByCodec)(e,X(this.context.config,this.WA.source))),e=this.EB(e),A.ModuleManager.has(R.ModuleName.Envivio)&&(e=A.ModuleManager.get(R.ModuleName.Envivio).fixSegmentTimelineLiveStream(e)),this.isSuspended()||this.GB(e),e=H(e),function(e,t){e.Period.flatMap((function(e){var t;return null!==(t=null==e?void 0:e.AdaptationSet)&&void 0!==t?t:[]})).flatMap((function(e){var t;return null!==(t=null==e?void 0:e.Representation)&&void 0!==t?t:[]})).forEach((function(e){t.has(e._internalId.key())&&(e.associatedKid=t.get(e._internalId.key()))}))}(e=(0,O.removeRepresentations)(e,this.kB),t),e):(this.context.eventHandler.fireError(new s.PlayerError(a.ErrorCode.SOURCE_ERROR,void 0,"No playable track left")),null)},t.prototype.JB=function(){if(this.pB){var e=NaN,t=this.pB.getDuration();return t&&(this.mB&&this.mB===t?e=this.nB:(e=T.DurationConverter.getDurationInSec(t),this.mB=t,this.nB=e)),isNaN(e)&&this.isLive()?1/0:e}return 0},t.prototype.getDuration=function(){return this.YA},t.prototype.isLive=function(){return!!this.qB&&this.pB.isLive()},t.prototype.getAvailabilityStartTime=function(){return this.pB.getAvailabilityStartTime()},t.prototype.getAvailabilityEndTime=function(){return this.pB.getAvailabilityEndTime()},t.prototype.isAvailabilityEndTimeExceeded=function(){var e=this.getAvailabilityEndTime();return e&&Date.now()>e.getTime()},t.prototype.findPeriod=function(e){return(0,M.findPeriod)(this.qB,e)},t.prototype.getAllPeriods=function(){var e,t;return null!==(t=null===(e=this.qB)||void 0===e?void 0:e.Period)&&void 0!==t?t:[]},t.prototype.getPeriod=function(e){return e?this.findPeriod(e.periodId):null},t.prototype.isLanguageAvailable=function(e,t,i){var n=(0,M.findPeriod)(this.qB,e)||q(this.qB);return(0,B.findAdaptationSetsForMimeType)(n,t).some((function(e){var t=e._lang&&i.lang&&e._lang===i.lang,n=i.adaptationSetId&&e._internalId.equals(i.adaptationSetId);return t||n}))},t.prototype.findAdaptationSet=function(e,t,i,n){void 0===n&&(n=!1);var r=(0,M.findPeriod)(this.qB,e)||q(this.qB);if(void 0!==r){var o=this.XA.getState(),a=(0,B.findAdaptationSetOfMimeType)(t,r,{sourceState:o,langObj:i,periodSwitched:n,playbackConfig:this.context.config.playback});return a||this.context.logger.debug("No AdaptationSet found to match mime type "+t),a}},t.prototype.getManifest=function(){return this.qB},t.prototype.getAvailableAudio=function(e,t){return this.pB.getAvailableAudio(e,t)},t.prototype.getAvailableVideo=function(e){return this.pB.getAvailableVideo(e)},t.prototype.getAvailableSubtitles=function(e){return this.pB.getAvailableSubtitles(e)},t.prototype.getClosedCaptionLabels=function(e){return this.pB.getClosedCaptionLabels(e)},t.prototype.getVideoRepresentations=function(e){return this.pB.getVideoQualities(e)},t.prototype.getAudioRepresentations=function(e){return this.pB.getAudioQualities(e)},t.prototype.getPeriodDuration=function(e,t){var i;return this.pB.getPeriodDuration(e,null!=t?t:null===(i=this.getManifest())||void 0===i?void 0:i.Period)},t.prototype.KB=function(e){var t,i;return this.isLastPeriod(e._id)?null!==(i=function(e){var t,i,n,r,o,a,s,u;return(null==e?void 0:e.SegmentTemplate)?null===(n=null===(i=null===(t=e.SegmentTemplate[0])||void 0===t?void 0:t.SegmentTimeline)||void 0===i?void 0:i[0])||void 0===n?void 0:n.totalDuration:(null==e?void 0:e.Representation)?null===(u=null===(s=null===(a=null===(o=null===(r=e.Representation[0])||void 0===r?void 0:r.SegmentTemplate)||void 0===o?void 0:o[0])||void 0===a?void 0:a.SegmentTimeline)||void 0===s?void 0:s[0])||void 0===u?void 0:u.totalDuration:void 0}(e.AdaptationSet[0]))&&void 0!==i?i:1/0:null!==(t=e.duration)&&void 0!==t?t:this.getPeriodDuration(e._id)},t.prototype.hasMultiplePeriods=function(){return this.getAllPeriods().length>1},t.prototype.hasSinglePeriod=function(){return 1===this.getAllPeriods().length},t.prototype.LB=function(){var e=this;return this.getAllPeriods().reduce((function(t,i){return t+e.KB(i)}),0)},t.prototype.getTimeShiftBufferDepthSeconds=function(){var e=this.pB.getTimeShiftBufferDepthSeconds(),t=-this.LB();return Math.max(e,t)},t.prototype.getRequestTimestamp=function(){return this.pB.getRequestTimestamp()},t.prototype.getMediaPresentationDuration=function(){var e,t=T.DurationConverter.getDurationInSec(null===(e=this.qB)||void 0===e?void 0:e._mediaPresentationDuration);return isNaN(t)?0:t},t.prototype.calculateCumulativePeriodDuration=function(e){for(var t,i,n=0,r=0,o=null!==(i=null===(t=this.qB)||void 0===t?void 0:t.Period)&&void 0!==i?i:[];r<o.length;r++){var a=o[r];if(a._id===e)break;n+=this.getPeriodDuration(a._id)}return this.isLive()?(0,I.toSeconds)(Date.now()-this.getAvailabilityStartTime())-n:n},t.prototype.getMinimumUpdatePeriod=function(){return(0,k.getMinimumUpdatePeriodInSeconds)(this.qB)},t.prototype.getContentProtectionForAdaptationSet=function(e){return k.MPDExtractor.getContentProtectionForAdaptationSet(e)},t.prototype.getLangObjectFromAdaptationSet=function(e,t){return this.pB.getLangObjectFromAdaptationSet(e,t)},t.prototype.toSubtitleTrack=function(e,t){return this.pB.toSubtitleTrack(e,t)},t.prototype.getDRMCapabilitiesForPeriod=function(e){return this.pB.getDRMCapabilitiesForPeriod(e)},t.prototype.hasManifestTypeChanged=function(e){return!(!this.qB||this.qB._type===e||(this.context.logger.log("Manifest has just changed from "+this.qB._type+" to "+e),0))},t.prototype.getPeriodIdForTime=function(e){var t,i=this.getAllPeriods();return 1===i.length?i[0]._id:null===(t=F(i,e))||void 0===t?void 0:t._id},t.prototype.dispose=function(){this.MB(),e.prototype.dispose.call(this)},t.prototype.MB=function(){this.ZA=(0,c.dispose)(this.ZA)},t.prototype.NB=function(){var e=this.getFirstPeriod();if(this.nB&&e&&e.start)return e.start+this.nB},t.prototype.getTotalDuration=function(){if(this.isLive())return this.NB()||1/0;var e=this.getLastPeriod();return e?(e.start||e._start&&T.DurationConverter.getDurationInSec(e._start)||0)+this.pB.getPeriodDuration(e._id):0},t.prototype.getFirstPeriod=function(){return q(this.qB)},t.prototype.getLastPeriod=function(){var e=this.getAllPeriods();if(e.length>0)return e[e.length-1]},t.prototype.isLastPeriod=function(e){var t=this.getLastPeriod();return!!t&&e===t._id},t.prototype.isManifestFinalized=function(){return!this.isLive()},t.prototype.isFirstPeriod=function(e){var t=this.getFirstPeriod();return!!t&&t._id===e},t.prototype.isHlsManifest=function(){var e,t;return null!==(t=null===(e=this.getManifest())||void 0===e?void 0:e._isHls)&&void 0!==t&&t},t.prototype.isDashManifest=function(){return!this.isHlsManifest()&&!this.isSmoothManifest()},t.prototype.isSmoothManifest=function(){var e,t;return"smooth"===(null===(t=null===(e=this.qB)||void 0===e?void 0:e.originalFormat)||void 0===t?void 0:t.format)},t.prototype.getHlsTags=function(){if(!this.isHlsManifest())return null;var e=A.ModuleManager.get(R.ModuleName.HLS).selectors,t=e.getHlsState;return(0,e.getCustomTags)(t(this.XA.getState()))},t.prototype.isMimeTypePartOfPeriod=function(e,t){var i=this.getPeriod(new L.PeriodId(t));return(i?i.AdaptationSet:[]).some((function(t){return t._mimeType===e}))},t.prototype.getNextPeriod=function(e){var t;if(null===(t=this.qB)||void 0===t?void 0:t.Period)for(var i=this.findPeriod(e),n=this.qB.Period.indexOf(i)+1;n<this.qB.Period.length;n++){var r=this.qB.Period[n];if(r)return r}return null},t.prototype.getEventStreamEvents=function(e){return this.pB.getEventStreamEvents(e)},t.prototype.hasAdaptationSets=function(e){var t=this.qB;if(t&&t.Period){var i=t.Period.find((function(t){return t._id===e}));return Boolean(i&&i.AdaptationSet)}return!1},t.prototype.OB=function(e){if(this.lB){var t=this.lB.getSynchronizationPromise();if(t)return t;if(e.UTCTiming&&e.UTCTiming.length>0)return this.lB.synchronizeWithServer(e.UTCTiming,e._downloadTime)}return Promise.resolve()},t.prototype.getAdaptationSet=function(e){if(e&&this.qB)return(0,M.findAdaptationSet)(this.qB,e)},t.prototype.getRepresentationById=function(e){if(e&&this.qB)return(0,M.findRepresentation)(this.qB,e)},t.prototype.representationExists=function(e){return Boolean(this.getRepresentationById(e))},t.prototype.getLowestBandwidthOfAdaptationSet=function(e){return this.findLowestPossibleBandwidth(e,-1/0)},t.prototype.findLowestPossibleBandwidth=function(e,t){void 0===t&&(t=-1/0);var i=this.getAdaptationSet(e);return i?U(i.Representation,t):1/0},t.prototype.getMatchingRepresentationsByBandwidth=function(e,t,i){void 0===i&&(i=function(){return!0});var n=this.getAdaptationSet(e);return n?V(n.Representation,t,i):[]},t.prototype.getMatchingRepresentationByBandwidth=function(e,t,i){void 0===i&&(i=function(){return!0});var n=this.getAdaptationSet(e);return n?j(n.Representation,t,i):null},t.prototype.getAllRepresentations=function(){return this.getAllPeriods().flatMap((function(e){var t;return(null===(t=e.AdaptationSet)||void 0===t?void 0:t.flatMap((function(e){return e.Representation})))||[]}))},t.prototype.getRepresentation=function(e,t){return this.getRepresentationById(new D.RepresentationId(e,t))},t.prototype.getAllAdaptationSets=function(){return this.getAllPeriods().flatMap((function(e){return e.AdaptationSet}))},t.prototype.getAllImageAdaptationSets=function(){return this.getAllAdaptationSets().filter((function(e){return e._mimeType.includes("image")&&"image"===e._contentType}))},t.prototype.getAllDashThumbnailSources=function(){var e=this;return this.getAllImageAdaptationSets().map((function(t){var i=e.findPeriod(t._internalId.periodId);return{adaptationSet:t,timing:{startTime:i.start,duration:i.duration}}}))},t.prototype.getAdaptationSetIndex=function(e){var t=this.findPeriod(e.periodId);return t&&t.AdaptationSet&&0!==t.AdaptationSet.length?t.AdaptationSet.findIndex((function(t){return t._internalId.equals(e)})):-1},t.prototype.getAvailableBaseURLsForRepresentation=function(e){var t=this.getAdaptationSet(e);if(void 0===e||!t)return[];for(var i=[],n=t.Representation,r=0;r<n.length;r++)if(n[r]._internalId.equals(e)&&n[r].BaseURL&&n[r].BaseURL.length>0){i=n[r].BaseURL;break}var o=[];for(r=0;r<i.length;r++)o.push((0,g.forceReallocation)(i[r].url));return o},t.prototype.findDownloadedHlsRepresentation=function(e){var t=this.getAdaptationSet(e);return t?t.Representation.find((function(e){return e._hls&&Boolean(e._hls.requestTimestamp)})):null},t.prototype.isManifestFetchRequired=function(e){if(!this.isHlsManifest())return!1;var t=Date.now(),i=this.getRepresentationById(e),n=Boolean(i.SegmentList)&&i.SegmentList.length>0&&Boolean(i.SegmentList[0].SegmentURL),r=n?i.SegmentList[0].SegmentURL.length:0,o=!n||r>0,a=t-(i._requestTimestamp||t),s=this.isLive()&&a>=this.getMinimumUpdatePeriod();return!o||s},t.prototype.hasSelfInitialisingSegments=function(){return this.getAllPeriods().map((function(e){return e.AdaptationSet})).reduce((function(e,t){return e.concat(t)}),[]).map((function(e){return e.Representation})).reduce((function(e,t){return e.concat(t)}),[]).some((function(e){var t=Boolean(e.SegmentList)&&e.SegmentList.length>0?e.SegmentList:[],i=Boolean(e.SegmentBase)&&e.SegmentBase.length>0,n=Boolean(e.SegmentTemplate)&&e.SegmentTemplate.length>0?e.SegmentTemplate:[];return!(e.init||i||t.some((function(e){return Boolean(e.init)}))||n.some((function(e){return Boolean(e._initialization)})))}))},t.prototype.getAvailabilityTimeComplete=function(e){var t=this.getRepresentationById(e),i=t.SegmentList||t.SegmentBase||t.SegmentTemplate;return!(i&&i[0]&&i[0]._availabilityTimeComplete)||JSON.parse(i[0]._availabilityTimeComplete)},t.prototype.isSegmentInfoLoaded=function(e){var t=this.getRepresentationById(e);return!(!t||!t.segmentIndex&&!t.segmentIndexParsingError)},t.prototype.isPrecedingPeriod=function(e,t){if(!(e&&t&&this.qB&&this.qB.Period))return!1;var i=this.qB.Period.findIndex((function(t){return t._id===e})),n=this.qB.Period.findIndex((function(e){return e._id===t}));return i>=0&&n>=0&&n<i},t.prototype.getMaxSegmentDuration=function(){var e=T.DurationConverter.getDurationInSec(this.qB._maxSegmentDuration);return isNaN(e)?0:e},t.prototype.getDesiredDistanceToLiveEdge=function(){var e,t=null===(e=this.context.serviceManager.get(u.ServiceName.LiveLatencyService))||void 0===e?void 0:e.getTargetLatency();return(0,P.isDefined)(t)?t:this.context.bufferSettings.getForwardTargetLevel()+this.VA.LIVE_EDGE_DISTANCE},t.prototype.hasSuggestedStartPosition=function(){var e,t;return null!==(t=null===(e=this.qB)||void 0===e?void 0:e.hasOwnProperty("_startOffset"))&&void 0!==t&&t},t.prototype.getVodStartOffset=function(){return Math.max(0,Math.min(this.qB._startOffset,this.getDuration()-this.VA.SEEK_TO_END_OFFSET))},t.prototype.getLiveStartOffset=function(e){void 0===e&&(e=!0);var t=this.qB._startOffset;return t-=Math.abs(this.getTimeShiftBufferDepthSeconds()),e&&(t+=this.getDesiredDistanceToLiveEdge(),t=Math.min(0,t)),t},t.prototype.initSegmentStartTimesFromReferenceSegment=function(e){this.XA.dispatch((0,E.initPlaybackTimesFromReferenceSegment)(e))},t.prototype.initializeSegmentStartTimesFromStart=function(e){var t,i,n=this.getRepresentationById(e),r=null===(i=null===(t=null==n?void 0:n.SegmentList)||void 0===t?void 0:t[0])||void 0===i?void 0:i.SegmentURL;if(n&&(null==r?void 0:r.length)){var o=r.length-1,a=(0,I.toSeconds)(n._requestTimestamp)-r[o]._duration;this.context.logger.debug("Initializing segment start times with start time of last segment ".concat(a),e),this.XA.dispatch((0,E.initPlaybackTimesFromIndex)(e,o,a))}else this.context.logger.debug("Failed to initialize segment start times, no segments found",e)},t.prototype.hasSegmentStartTimeForHlsRepresentation=function(e){var t,i,n,r=this.getRepresentationById(e);return void 0!==(null===(n=null===(i=null===(t=null==r?void 0:r.SegmentList)||void 0===t?void 0:t[0])||void 0===i?void 0:i.SegmentURL[0])||void 0===n?void 0:n._playbackTime)},t.prototype.getStartTimeForHlsSegment=function(e,t){var i,n,r,o,a,s=this.getRepresentationById(e),u=null!==(r=null===(n=null===(i=null==s?void 0:s.SegmentList)||void 0===i?void 0:i[0])||void 0===n?void 0:n.SegmentURL)&&void 0!==r?r:[],c=(0,_.findSegmentUrlIndexWithinSegmentList)(t,u);return-1!==c&&void 0!==u[c]._playbackTime?u[c]._playbackTime:null!==(a=null===(o=q(this.qB))||void 0===o?void 0:o.start)&&void 0!==a?a:void 0},t.prototype.isTimeNearPeriodEnd=function(e,t,i){var n=this.findPeriod(t),r=null==n?void 0:n.start;if(void 0===r)return!1;var o=r+this.getPeriodDuration(n._id,this.getAllPeriods());return e>=r&&e<=o&&o-e<=i},t}(m.Suspendable);function H(e){var t;return(e=r({},e)).Period=null===(t=e.Period)||void 0===t?void 0:t.map((function(e){var t;return r(r({},e),{AdaptationSet:null===(t=e.AdaptationSet)||void 0===t?void 0:t.map((function(t,i){var n,o=(0,N.createAdaptationSetIdFromMimeTypeAndIndex)(e._id,t._mimeType,i);return r(r({},t),{_internalId:o,_periodId:e._id,Representation:null===(n=t.Representation)||void 0===n?void 0:n.map((function(e){return r(r({},e),{_internalId:new D.RepresentationId(o,e._id)})}))})}))})})),e}function z(e){if(A.ModuleManager.has(R.ModuleName.DRM)){var t=A.ModuleManager.get(R.ModuleName.DRM).ContentProtectionHelper.getFirstKeyId;W(e,(function(e){for(var i=t(e.ContentProtection),n=0;e.Representation&&n<e.Representation.length;n++){var r=e.Representation[n];(i||r.ContentProtection)&&(r.associatedKid=r.ContentProtection&&t(r.ContentProtection)||i)}}))}}function W(e,t){for(var i=0;e.Period&&i<e.Period.length;i++)for(var n=e.Period[i],r=0;n.AdaptationSet&&r<n.AdaptationSet.length;r++)t(n.AdaptationSet[r])}function F(e,t){if(e&&e.length){if(t<e[0].start)return e[0];var i=e[e.length-1];return t>=i.start?i:function(e,t){for(var i=e.length-1;i>=0;i--){var n=e[i].start+e[i].duration;if(t>=e[i].start&&t<n)return e[i];if(t>=n&&t<e[i+1].start)return e[i+1]}}(e,t)||i}}function U(e,t){return void 0===t&&(t=-1/0),e.reduce((function(e,i){return i._bandwidth>=t?Math.min(e,i._bandwidth):e}),1/0)}function V(e,t,i){void 0===i&&(i=function(){return!0});var n=e.filter(i),r=n.filter((function(e){return e._bandwidth===t}));return r.length>0?r:function(e,t){var i=e.map((function(e){return e._bandwidth})).reduce((function(e,i){return Math.abs(i-t)<Math.abs(e-t)?i:e}));return e.filter((function(e){return e._bandwidth===i}))}(n,t)}function j(e,t,i){void 0===e&&(e=[]),void 0===i&&(i=function(){return!0});var n=e.filter(i),r=null,o=-1/0;return n.forEach((function(e){e._bandwidth>o&&e._bandwidth<=t&&(o=e._bandwidth,r=e)})),r||n[0]}function Y(e,t,i){var n=i?"videoCodecPriority":"audioCodecPriority";return(null==t?void 0:t.options)&&t.options[n]?t.options[n]:e.playback&&e.playback[n]?e.playback&&e.playback[n]:[]}function X(e,t){return{video:Y(e,t,!0),audio:Y(e,t,!1)}}function q(e){return null==e?void 0:e.Period[0]}function K(e){var t=(0,O.getCodecsFromAdaptationSet)(e);if(!t||0===t.length)return null;var i=S.CodecStringHelper.getExtractedCodecStrings(t),n=e._mimeType.split("/")[0];return i[n]?S.CodecStringHelper.extractCodec(i[n]):null}function G(e){return e.reduce((function(e,t){return e[t._id]=function(e){return e.AdaptationSet.map((function(e){return e._mimeType})).filter((function(e,t,i){return b.MimeTypeHelper.isAV(e)&&i.indexOf(e)===t}))}(t),e}),{})}t.ManifestService=w},97587:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.Stream=void 0;var n=i(34841),r=i(24389),o=i(78006),a=function(){function e(){var e=this;this.xf=function(){e.vf&&!e.isEmpty()&&(e.vf.resolve({done:!1,value:e.uf.shift()}),e.vf=null)},this.tf=o.StreamState.Open,this.uf=[],this.wf=new n.Deferred,this.wf.promise.catch((function(){}))}return e.prototype.add=function(e){this.tf===o.StreamState.Open&&(this.uf.push(e),this.xf())},e.prototype.read=function(){if(this.vf)return Promise.reject({name:r.StreamReadError.ParallelRead});if(this.tf===o.StreamState.Ended&&this.isEmpty())return Promise.resolve({done:!0});if(this.tf===o.StreamState.Aborted)return Promise.reject({name:r.StreamReadError.Aborted,message:this.getError()});this.vf=new n.Deferred;var e=this.vf.promise;return this.xf(),e},e.prototype.end=function(){this.tf===o.StreamState.Open&&(this.tf=o.StreamState.Ended,this.vf&&this.isEmpty()&&(this.vf.resolve({done:!0}),this.vf=null),this.wf.resolve())},e.prototype.abort=function(e){var t;if(this.tf===o.StreamState.Open){this.tf=o.StreamState.Aborted,this.error=e;var i={name:o.StreamState.Aborted,message:null!==(t=this.getError())&&void 0!==t?t:""};this.vf&&(this.vf.reject(i),this.vf=null),this.wf.reject(i)}},e.prototype.transform=function(t,i,n){var r=this,o=new e,a=function(){r.read().then((function(e){var n=e.done,r=e.value;if(n)i&&i(),o.end();else{var s=null!=r&&t(r);s&&o.add(s),a()}})).catch((function(e){n?o.abort(n(e)):o.abort(e)}))};return a(),o},e.prototype.isEmpty=function(){return 0===this.uf.length},e.prototype.getError=function(){return this.error||null},e}();t.Stream=a},98892:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentPreProcessor=void 0;var n=i(80813),r=i(3714),o=i(91678),a=i(33436),s=i(15971),u=i(85434),c=i(66502),d=i(88052),l=i(62756),h=i(23940),p=i(39523),f=i(99529),g=i(60729),m=i(73794),v=i(37641),y=i(77286),S=i(65439),T=i(63066),b=function(){function e(e,t,i,r,o,a,s){this.context=e,this.mimeType=t,this.onDataAvailableCallback=i,this.hls=r,this.segmentUnavailabilityHandler=o,this.timestampOffsetService=a,this.segmentParser=s,this.OI=!1,this.PI=null;var u=e.sourceContext.sourceIdentifier;this.MI=this.context.serviceManager.get(n.ServiceName.ManifestService,u)}return Object.defineProperty(e.prototype,"RI",{get:function(){return this.context.logger},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"SI",{get:function(){return this.context.eventHandler},enumerable:!1,configurable:!0}),e.prototype.setHlsTimelineTracker=function(e){this.NI=e},e.prototype.setMpdHandler=function(e){this.QI=e},e.prototype.onMuxedSegmentAvailable=function(e,t,i,n){var r=this,o=t.find((function(e){return M(e,r.hls)}));if(o){var a=!o.getRepresentationId().equals(this.PI),u=this.YI(o,i,a),c=u.shouldMakeSegmentAvailable,d=u.shouldCacheSegment;c?t.forEach((function(t){var o=e.metadata[e.transmuxedSegments.indexOf(t)];r.onSegmentAvailable(t,o,i,n)||n.cacheSegment(e.originalSegment)})):(d&&n.cacheSegment(e.originalSegment),function(e,t){var i=(0,s.getSourceStore)(t),n=e.getSegmentInfo(),r=(0,S.getSegmentInfoTimeRange)(n),o=(0,f.getTrackIdentifier)(n);i&&r&&i.dispatch((0,p.removeStreamTimeRange)(o,r,f.StreamTimeRangeType.Loading))}(e.originalSegment,this.context))}},e.prototype.onSegmentAvailable=function(e,t,i,n){var r,o,a;return this.RI.debug("onSegmentAvailable ".concat(e.getMimeType()).concat(e.isInit()?" init":""," segment [").concat(e.getUrl(),"]")),this.segmentUnavailabilityHandler.downloadSuccess(e.isInit()),null===(o=(r=this.QI).generateSmoothInitSegment)||void 0===o||o.call(r,e,this.segmentParser),this.hls.isTransmuxingRequired||c.TextSegmentAnalyzer.isPlainTextPayload(e.getData())||null===(a=this.segmentParser)||void 0===a||a.parseSegment(e),!!e.isInit()||this.TI(e,t,i,n)},e.prototype.TI=function(e,t,i,r){var o,a,u,d,l=this,h=!e.getRepresentationId().equals(this.PI);M(e,this.hls)&&h&&this.VI(e,this.PI);var g=this.hls.isTransmuxingRequired,v=!0;if(this.MI.isHlsManifest()){if(this.UI(e),!g&&!c.TextSegmentAnalyzer.isPlainTextPayload(e.getData())){(isNaN(this.QI.getTimestampOffset())||0===this.QI.getTimestampOffset())&&(0,m.initializeHlsSegmentStartTimes)(e,this.context,this.QI),this.timestampOffsetService.maybeAdjustTimestampOffsetAtDiscontinuityChange(e,this.QI)&&(null===(o=this.segmentParser)||void 0===o||o.parseSegment(e));var y=this.YI(e,i,h),T=y.shouldMakeSegmentAvailable,b=y.shouldCacheSegment;if(!T)return b&&r.cacheSegment(e),!1}I(e)&&this.timestampOffsetService.maybeAdjustTimestampOffsetAtDiscontinuityChange(e,this.QI),this.MI.initSegmentStartTimesFromReferenceSegment(e)}if(g&&this.hls.possiblyDependentSegments&&h&&M(e,this.hls)&&!this.OI){this.RI.debug("Just switched playlists, isIndependentlyDecodable=".concat(e.isIndependentlyDecodable(),", (").concat(e.getMimeType(),", ").concat(e.getUrl(),")"));var P=this.QI.getIndex()>1;!e.isIndependentlyDecodable()&&P&&(this.RI.debug("Started keyframe recovery"),this.QI.setIndex(this.QI.getIndex()-2),v=!1,this.hls.discardNextSegment=!0,this.OI=!0)}if(!v)return!1;!function(e,t){var i=(0,s.getSourceStore)(t),n=e.getSegmentInfo(),r=(0,S.getSegmentInfoTimeRange)(n),o=e.getPlaybackTimeRange(),a=(0,f.getTrackIdentifier)(n);i&&r&&o&&(i.dispatch((0,p.removeStreamTimeRange)(a,r,f.StreamTimeRangeType.Loading)),i.dispatch((0,p.addStreamTimeRange)(a,o,f.StreamTimeRangeType.Loading)))}(e,this.context),this.context.serviceManager.get(n.ServiceName.TimedMetadataService).onSegmentAvailable({segment:e,extractedMetadata:t,isSegmentOfMainStream:M(e,this.hls),presentationTimeOffset:this.QI.getTimestampOffset()}),this.context.serviceManager.maybeCall(n.ServiceName.SubtitleService,(function(i){i.handleClosedCaptions(l.QI,e,null==t?void 0:t.closedCaptions,g)}),void 0,null===(a=this.context.sourceContext)||void 0===a?void 0:a.sourceIdentifier);var A=e.getPlaybackTime(),R=null===(u=e.getSegmentInfo())||void 0===u?void 0:u.startTime,E=R?Math.abs(A-R):void 0;return this.RI.debug("[".concat("SegmentPreProcessor","][").concat(e.getMimeType(),"]: playbackTimeForSegment=").concat(A," expected=").concat(R," (diff=").concat(null==E?void 0:E.toFixed(3),") ").concat(e.getUrl())),M(e,this.hls)&&(null===(d=this.NI)||void 0===d||d.trackPlaybackTime(e),this.OI=!1),this.onDataAvailableCallback(e),v},e.prototype.UI=function(e){var t=d.ModuleManager.get(l.ModuleName.LowLatency,!1);(0,g.isPlayingLowLatencyHls)(this.context)&&t&&t.applyUpdatedSegmentInfoProps(e,this.MI)},e.prototype.VI=function(e,t){this.WI(e.getMimeType(),t,e.getRepresentationId());var i=e.getSegmentInfo(),n={id:i.representationId,bitrate:i.bitrate,width:i.width,height:i.height};this.context.store.dispatch((0,o.addMetricsValue)(this.mimeType,a.MetricType.DownloadedRepresentation,n)),this.PI=e.getRepresentationId()},e.prototype.WI=function(e,t,i){var n;if(u.MimeTypeHelper.isVideo(e))n=r.PlayerEvent.VideoDownloadQualityChanged;else{if(!u.MimeTypeHelper.isAudio(e))return;n=r.PlayerEvent.AudioDownloadQualityChanged}var o=(0,h.representationToQuality)(this.MI.getRepresentationById(t),e),a=(0,h.representationToQuality)(this.MI.getRepresentationById(i),e);this.SI.dispatchEvent(n,{targetQuality:a,targetQualityId:a.id,sourceQuality:o,sourceQualityId:o?o.id:null})},e.prototype.XI=function(e,t){var i={hasGap:!1};if(e&&this.MI.isHlsManifest()&&!I(e)&&M(e,this.hls)&&this.NI){var n=y.SegmentInfoProvider.findHlsRepresentationForSegment(e,this.MI.getAdaptationSet(t));if(n&&(i=this.NI.checkForTimelineGap(e,n.representation,n.index)).hasGap&&void 0!==i.correctedIndex){this.RI.debug("Encountered timeline gap (".concat(i.gapSizeSec,"), just loaded ").concat(e.getUrl()));var r=n.representation._internalId,o=this.QI instanceof T.SegmentListMPDHandler&&this.QI.getSegmentListEntries(r)&&this.QI.getSegmentListEntries(r)[i.correctedIndex];if(o&&(0,v.areSegmentsIdentical)(e.getSegmentInfo(),o))return this.RI.debug("Gap handling: Segment is identical to the one we just loaded, not rewinding"),i.hasGap=!1,i;o&&o.hasDownloadFailed?(this.RI.debug("Gap handling: Could not handle gap, segment has failed to download"),i.couldHandle=!1):(this.RI.debug("Gap handling: Correcting index from ".concat(this.QI.getIndex()," to ").concat(i.correctedIndex)),this.QI.setIndex(i.correctedIndex))}}return i},e.prototype.YI=function(e,t,i){if(!(this.NI.isGapVerificationNeeded()||this.NI.isSeekTargetVerificationNeeded()||i))return{shouldMakeSegmentAvailable:!0,shouldCacheSegment:!1};var n=this.XI(e,t);return n.hasGap?n.couldHandle?function(e){var t;return(null!==(t=e.gapSizeSec)&&void 0!==t?t:0)>0}(n)?{shouldMakeSegmentAvailable:!1,shouldCacheSegment:!0}:{shouldMakeSegmentAvailable:!1,shouldCacheSegment:!1}:(this.NI.reset(),{shouldMakeSegmentAvailable:!0,shouldCacheSegment:!1}):{shouldMakeSegmentAvailable:!0,shouldCacheSegment:!1}},e.prototype.dispose=function(){this.PI=null,this.NI=null,this.MI=null,this.onDataAvailableCallback=null,this.hls=null,this.segmentUnavailabilityHandler=null,this.timestampOffsetService=null,this.segmentParser=null,this.QI=null},e}();function M(e,t){return!t.isAvMuxedTogether||u.MimeTypeHelper.isVideo(e.getMimeType())}function I(e){return u.MimeTypeHelper.isSubtitle(e.getMimeType())}t.SegmentPreProcessor=b},99257:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.AdRestorationOptimizationService=void 0;var n=i(3714),r=i(91678),o=i(46151),a=i(94685),s=i(13422),u=i(80813),c=i(81524),d=function(){function e(){var e=this;this.ab=function(){(0,a.isContextAvailable)(e.Ub)&&e.Ub.eventHandler.off(n.PlayerEvent.AdStarted,e.ab),e.bb(e.Xb),e.Xb=[]}}return e.prototype.updatePlayerContext=function(e){this.Tb=[],this.Ub=e,this.Vb=e.segmentInfoService,this.Wb=e.segmentPrefetchingService},e.prototype.optimizeRestorationAfterUpcomingAdBreak=function(){var e,t,i=this,r=null===(t=null===(e=this.Yb())||void 0===e?void 0:e.getState())||void 0===t?void 0:t.playback;if(!(0,a.isContextAvailable)(this.Ub)||!this.Vb||!r)return Promise.reject("Could not get playback state and/or SegmentInfoService");var o=(0,c.getPlaybackPosition)(r);return isNaN(o)?Promise.reject("Could not get playback position"):this.Vb.getSegmentInfos(o,this.Ub.settings.AD_RESTORATION_SEGMENT_PREFETCHING_DURATION).then((function(e){i.Zb(e),i.Xb=e,(0,a.isContextAvailable)(i.Ub)&&i.Ub.eventHandler&&i.Ub.eventHandler.on(n.PlayerEvent.AdStarted,i.ab)}))},e.prototype.Yb=function(){return(0,a.isContextAvailable)(this.Ub)?this.Ub.serviceManager.get(u.ServiceName.SourceStoreService,this.Ub.sourceContext.sourceIdentifier):void 0},e.prototype.Zb=function(e){var t=(0,a.isContextAvailable)(this.Ub)?this.Ub.sourceContext.sourceIdentifier:void 0,i=t?this.Ub.serviceManager.get(u.ServiceName.ManifestService,t):void 0;i&&e.forEach((function(e){var t=i.getAdaptationSet(e.internalRepresentationId);t&&(e.codecs=(0,s.getCodecsFromAdaptationSet)(t))}))},e.prototype.bb=function(e){var t;this.Tb=e.reduce((function(e,t){return t.mimeType&&!e.includes(t.mimeType)&&e.push(t.mimeType),e}),[]),this.db(),null===(t=this.Wb)||void 0===t||t.fetchAll(e)},e.prototype.cb=function(e,t){var i,n=null===(i=this.Wb)||void 0===i?void 0:i.getPrefetchedSegments().get(e);if(n)return l(n,(function(e){return e.segmentInfo})).find((function(e){if(!t||null==t.segmentNumber||null==t.startTime||null==t.duration)return!0;var i=t.segmentNumber+1,n=Math.round(t.startTime+t.duration),r=e.segmentNumber===i,o=null!=e.startTime&&Math.round(e.startTime)===n;return r||o}))},e.prototype.hasPrefetchedSegment=function(e,t){var i;if((0,a.isContextAvailable)(this.Ub)&&this.Ub.sourceContext.isAd)return!1;var n=e;return"string"==typeof e&&(n=this.cb(e,t)),!(!n||"string"==typeof n)&&Boolean(null===(i=this.Wb)||void 0===i?void 0:i.getPrefetchedSegment(n))},e.prototype.getPrefetchedSegment=function(e,t){var i=this;if(!this.Wb||!e.mimeType)return null;var n=this.Wb.getPrefetchedSegment(e);return this.Wb.clearPrefetchingQueue(e.mimeType),n&&(this.Wb.removePrefetchedSegment(e),this.Wb.setShouldDownloadBeCancelledCallback(e.mimeType,t),n.finally((function(){i.Wb&&e.mimeType&&i.Wb.removeShouldDownloadBeCancelledCallback(e.mimeType)}))),n},e.prototype.getRepresentationForPrefetchedSegment=function(e){var t,i=null===(t=this.Wb)||void 0===t?void 0:t.getPrefetchedSegments().get(e);if(i)return l(i,(function(e){return e.segmentInfo.internalRepresentationId})).find(Boolean)},e.prototype.db=function(){var e=this;if((0,a.isContextAvailable)(this.Ub)){var t=this.Ub.store.getState();if(0!==this.Tb.length&&t){var i=(0,o.getMetricsState)(t);this.Tb.forEach((function(t){i[t]||e.Ub.store.dispatch((0,r.initializeMetricsForMimeType)(t,e.Ub.settings))}))}}},e.prototype.reset=function(){(0,a.isContextAvailable)(this.Ub)&&this.Ub.eventHandler.off(n.PlayerEvent.AdStarted,this.ab),this.Tb=[],this.Xb=[]},e.prototype.dispose=function(){this.reset(),this.Vb=void 0,this.Wb=void 0},e}();function l(e,t){var i=[];return e.forEach((function(e){return i.push(t(e))})),i}t.AdRestorationOptimizationService=d},99529:function(e,t,i){Object.defineProperty(t,"__esModule",{value:!0}),t.StreamTimeRangeType=void 0,t.addStreamTimeRangeToTimeline=function(e,t){var i=e.filter((function(e){return e.type===t.type})).concat(t),n=r.BufferRangeHelper.mergeRanges(i,o.DefaultSettings.GAP_TOLERANCE);return e=e.filter((function(e){return e.type!==t.type})),n.forEach((function(t){e=a.ArrayHelper.insertInSortedArray(e,t,(function(e){return e.start>t.start}))})),e},t.removeStreamTimeRangeFromTimeline=function(e,t){var i=e.filter((function(e){return e.type===t.type})),n=r.BufferRangeHelper.excludeTimeRange(i,t);return e=e.filter((function(e){return e.type!==t.type})),n.forEach((function(t){t.end-t.start>o.DefaultSettings.GAP_TOLERANCE&&(e=a.ArrayHelper.insertInSortedArray(e,t,(function(e){return e.start>t.start})))})),e},t.getTrackIdentifier=function(e){var t=e.mimeType,i=e.internalRepresentationId;return s.MimeTypeHelper.isSubtitle(t)?"".concat(t,"/").concat(i.adaptationSetId):t};var n,r=i(4524),o=i(70962),a=i(74853),s=i(85434);!function(e){e.Loading="loading",e.Failed="failed"}(n||(t.StreamTimeRangeType=n={}))}},function(e){return function(){return e(e.s=52570)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.mserenderer=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.player=e.bitmovin.player||{},e.bitmovin.player.mserenderer=t())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[737],{1765:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.BufferMimeCodecMap=void 0;var n=r(77753),i=r(91678),o=r(46151),s=r(33436),u=r(94685),a=r(85434),c=function(){function e(e,t){this.VT={},this.WT=e,this.XT=t}return e.prototype.YT=function(e){var t,r,s=null===(t=this.WT)||void 0===t?void 0:t.getState();(0,n.isInstanceState)(s)&&d(this.XT)&&((0,o.getMetricsState)(s)[e]||null===(r=this.WT)||void 0===r||r.dispatch((0,i.initializeMetricsForMimeType)(e,this.XT)))},e.prototype.ZT=function(e){var t;null===(t=this.WT)||void 0===t||t.dispatch((0,i.removeMetricsForMimeType)(e))},e.prototype.add=function(e,t){var r;this.VT[e]=t,this.YT(e),null===(r=this.WT)||void 0===r||r.dispatch((0,i.addMetricsValue)(e,s.MetricType.StalledSeconds,0))},e.prototype.remove=function(e){var t=this,r=a.MimeTypeHelper.getMediaType(e);Object.keys(this.VT).forEach((function(e){a.MimeTypeHelper.getMediaType(e)===r&&(t.ZT(e),delete t.VT[e])}))},e.prototype.has=function(e,t){var r=this,n=a.MimeTypeHelper.getMediaType(e),i=a.MimeTypeHelper.extractContainerType(e);return Object.keys(this.VT).some((function(o){var s=a.MimeTypeHelper.getMediaType(o),u=a.MimeTypeHelper.extractContainerType(o);return s===n&&u===i&&t===r.VT[e]}))},e.prototype.update=function(e,t){this.remove(e),this.add(e,t)},e.prototype.forEach=function(e){var t=this;Object.keys(this.entries()).forEach((function(r){return e(r,t.entries()[r])}))},e.prototype.entries=function(){return this.VT},e.prototype.dispose=function(){this.VT={},this.WT=void 0,this.XT=void 0},e}();t.BufferMimeCodecMap=c;var d=function(e){return(0,u.isObject)(e)}},10344:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.VideoEventHandler=void 0;var r=function(){function e(e){var t=this;this.TU=function(e){return e.time=t.SU&&t.SU.currentTime||0,e},this.SU=e}return e.prototype.on=function(e,t){this.SU&&this.SU.addEventListener(e,t,this.TU)},e.prototype.off=function(e,t){this.SU&&this.SU.removeEventListener(e,t)},e.prototype.fire=function(e,t){this.SU&&this.SU.eventHandler.triggerEvent(e,t)},e.prototype.dispose=function(){},e}();t.VideoEventHandler=r},21586:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MSERendererModuleDefinition=void 0;var n=r(62756),i=r(79323),o=r(48873),s=r(82889),u=r(44914);t.MSERendererModuleDefinition={name:n.ModuleName.RendererMse,module:{MSEWrapper:o.MSEWrapper,MSERenderer:i.MSERenderer,Ranges:s.Ranges,technologyChecker:new u.TechnologyChecker}},t.default=t.MSERendererModuleDefinition},44914:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.TechnologyChecker=void 0;var n=r(44468),i=function(){function e(){}return e.prototype.getSupportedTechnologies=function(){return[{player:n.PlayerType.Html5,streaming:n.StreamType.Dash},{player:n.PlayerType.Html5,streaming:n.StreamType.Hls},{player:n.PlayerType.Html5,streaming:n.StreamType.Smooth}]},e}();t.TechnologyChecker=i},48873:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.MSEWrapper=t.MediaSourceReadyState=void 0;var i,o=r(66790),s=r(40306),u=r(3336),a=r(25926),c=r(4224),d=r(3714),f=r(13531),h=r(75108),l=r(7387),v=r(68925),g=r(63879),p=r(15971),m=r(21513),y=r(34841),T=r(85434),S=r(15487),b=r(23068),E=r(41138),w=r(76340),R=r(60321),M=r(65940);!function(e){e.closed="closed",e.open="open",e.ended="ended"}(i||(t.MediaSourceReadyState=i={}));var C=function(){function e(e){var t=this;this.Bw=function(e,r,n){t.logger.debug("successfully removed buffer for ".concat(e," (from  ").concat(r," to ").concat(n,")"))},this.waitForBuffer=function(e){return t.sourceBuffers.hasOwnProperty(e)?t.Nw().then((function(){return t.sourceBuffers[e].ready()})):Promise.reject("No SourceBuffer for '".concat(e,"' available"))},this.Ow=function(){t.logger.debug("[MSEWrapper][ManagedMediaSource] Start Streaming received, resuming loading"),t.yw=!0},this.Pw=function(){t.logger.debug("[MSEWrapper][ManagedMediaSource] Stop Streaming received, stopping loading"),t.yw=!1},this.Qw=function(e){t.logger.isLevelEnabled(f.LogLevel.DEBUG)&&t.logger.debug("Received bufferedChange event, Added Ranges: ".concat(B(e.addedRanges),", Removed Ranges: ").concat(B(e.removedRanges)))},e.videoElement&&(this.context=e,this.logger=e.logger,this.video=e.videoElement,this.sourceBuffers={},this.ww=!1,this.zw=Promise.resolve(),this.yw=!0)}return e.prototype.getBufferedRanges=function(e){return this.sourceBuffers.hasOwnProperty(e)?this.sourceBuffers[e].bufferedRanges:[]},e.prototype.printDetailedBufferRange=function(e,t){var r;try{r=e.buffered}catch(e){return void this.logger.debug("".concat(t," buffer range: Error accessing buffered ranges"))}if(0!==r.length)for(var n=0;n<r.length;n++)this.logger.debug("".concat(t," buffer range [").concat(n,"]: ").concat(r.start(n)," - ").concat(r.end(n)));else this.logger.debug("".concat(t," buffer range: empty"))},e.prototype.getBufferStartTime=function(){var e=this,t=Object.keys(this.sourceBuffers).map((function(t){return 0===e.sourceBuffers[t].bufferedRanges.length?0:e.sourceBuffers[t].bufferedRanges[0].start}));return Math.max.apply(null,t)},e.prototype.addBuffer=function(e,t,r){var n=this;if(this.mediaSource){if(this.ww&&!this.sourceBuffers.hasOwnProperty(e))try{var i=this.mediaSource.addSourceBuffer(e+"; codecs="+t);this.sourceBuffers[e]=new R.SourceBufferWrapper(i,{mimeType:e,codec:t},(function(t){r(t),n.context.logger.isLevelEnabled(f.LogLevel.DEBUG)&&n.printDetailedBufferRange(i,e)}))}catch(r){return this.logger.debug("Could not add SourceBuffer for "+e+" with codecs "+t+":"+r),void this.context.eventHandler.dispatchEvent(d.PlayerEvent.Warning,new a.PlayerWarning(c.WarningCode.SOURCE_CODEC_OR_FILE_FORMAT_NOT_SUPPORTED))}return this.logger.debug("Added SourceBuffer for "+e+" with codecs "+t),isNaN(this.mediaSource.duration)||(this.sourceBuffers[e].appendWindowEnd=this.mediaSource.duration),this.sourceBuffers[e].buffer}},e.prototype.updateTimestampOffset=function(e,t){var r=this.sourceBuffers[e];r&&(this.logger.debug("setting new source buffer [".concat(e,"] offset from ").concat(r.buffer.timestampOffset," to ").concat(t)),r.buffer.timestampOffset=t)},e.prototype.setTimestampOffset=function(e,t){return this.sourceBuffers.hasOwnProperty(e)?((0,b.isDefined)(t)&&!isNaN(t)||(this.logger.debug("source buffer [".concat(e,"] offset is ").concat(t,", setting it to 0")),t=0),this.queueTimestampOffsetUpdate(e,t)):(this.logger.debug("no such source buffer found (mime type=".concat(e,")")),Promise.resolve())},e.prototype.queueTimestampOffsetUpdate=function(e,t){var r=this;return this.queueActionOnBuffer(e,(function(){return r.updateTimestampOffset(e,t)})).catch((function(t){r.logger.debug("Failed to set timestamp offset for",e,":",t)}))},e.prototype.getBufferRangeStart=function(e,t){return t||e.start(0)},e.prototype.getBufferRangeEnd=function(e,t){return t||e.end(e.length-1)},e.prototype.Aw=function(e,t,r){var n=this.sourceBuffers[e].buffer.buffered;return{start:this.getBufferRangeStart(n,t),end:this.getBufferRangeEnd(n,r)}},e.prototype.preBufferRemoval=function(e,t,r){this.logger.debug("removing buffer for ".concat(e," (from ").concat(t," to ").concat(r,")"))},e.prototype.removeBufferRange=function(e,t,r){this.preBufferRemoval(e,t,r),this.sourceBuffers[e].buffer.remove(t,r)},e.prototype.removeFromBuffer=function(e,t,r,n){var o=this;return void 0===n&&(n=this.Bw),this.queueActionOnBuffer(e,(function(){var s,u,f;try{if(o.video&&o.video.currentTime>=0&&(null===(f=null===(u=null===(s=o.sourceBuffers[e])||void 0===s?void 0:s.buffer)||void 0===u?void 0:u.buffered)||void 0===f?void 0:f.length)>0){var h=o.Aw(e,t,r),l=h.start,v=h.end;if(l>=0&&v>l){if(o.sourceBuffers[e].removalPending=!0,o.sourceBuffers[e].rangePendingRemoval={start:l,end:v},!o.mediaSource||o.mediaSource.readyState===i.open){var g=o.sourceBuffers[e].onUpdateEnded().then((function(){o.sourceBuffers[e]&&(o.sourceBuffers[e].rangePendingRemoval=null,o.sourceBuffers[e].removalPending=!1,n(e,l,v))}));return o.removeBufferRange(e,l,v),g}o.logger.debug("cannot remove buffer for ".concat(e," (from ").concat(l," to ").concat(v,"): MediaSource is not open")),o.addOneSourceOpenCallback((function(){o.removeFromBuffer(e,l,v,n).catch((function(t){o.logger.debug("Couldn't remove buffer from ".concat(l," to ").concat(v," for ").concat(e),t)}))}))}else o.logger.debug("Ignoring buffer clearing request for ".concat(e,", as the passed-in range is not valid: ").concat(l," to ").concat(v))}else o.logger.debug("Ignoring buffer clearing request for ".concat(e,", as there are no buffered ranges."))}catch(t){var p="".concat(c.WarningCode[c.WarningCode.PLAYBACK_WARNING],": Buffer clearing failed for ").concat(e,". Exception: ").concat(JSON.stringify(t));o.context.eventHandler.dispatchEvent(d.PlayerEvent.Warning,new a.PlayerWarning(c.WarningCode.PLAYBACK_WARNING,p))}return Promise.resolve()}))},e.prototype.removeBuffer=function(e){var t=this,r=Promise.resolve(),i=this.sourceBuffers[e];if(!i||!this.mediaSource)return r;if(this.isMediaSourceOpen())try{null==i||i.buffer.abort()}catch(e){return this.logger.debug("Could not abort last action on buffer",n({},e)),Promise.resolve()}if(T.MimeTypeHelper.isSubtitle(e))r=r.then((function(){return t.removeFromBuffer(e).catch((function(e){t.logger.debug("Error removing buffer data",e)}))}));else try{this.mediaSource&&this.mediaSource.removeSourceBuffer(i.buffer)}catch(t){this.logger.debug("Error while trying to remove ".concat(e," source buffer."),t)}return this.Cw(e),r},e.prototype.Cw=function(e){this.sourceBuffers[e]?(this.sourceBuffers[e].dispose(),delete this.sourceBuffers[e],this.logger.debug("Removed SourceBuffer for ".concat(e))):this.logger.debug("No source buffer to remove for mimeType=".concat(e))},e.prototype.isMediaSourceOpen=function(){var e;return(null===(e=this.mediaSource)||void 0===e?void 0:e.readyState)===i.open},e.prototype.Dw=function(){var e=this;if(!this.mediaSource)return this.logger.debug("Media source is removed. Can not reset buffers."),Promise.resolve();var t=[];for(var r in this.sourceBuffers)this.sourceBuffers.hasOwnProperty(r)&&t.push(this.removeBuffer(r));return Promise.all(t).then((function(){e.sourceBuffers={},e.logger.debug("Removed all SourceBuffers")}))},e.prototype.tearDownMediaSource=function(){var e=this;return this.zw=this.zw.then((function(){return e.Dw()})).then((function(){e.mediaSource?e.Ew():e.logger.debug("Media source has already been removed.")})),this.zw},e.prototype.Ew=function(){var e;if(this.video)if(null!==this.video.getWrappedElement()){var t=(0,w.getMseObjectUrl)((0,p.getSourceState)(this.context));if("function"==typeof(null===(e=null===window||void 0===window?void 0:window.URL)||void 0===e?void 0:e.revokeObjectURL)&&""!==t)try{window.URL.revokeObjectURL(t)}catch(e){this.logger.debug("Could not revoke MSE object URL")}this.mediaSource&&(this.mediaSource.removeEventListener("startstreaming",this.Ow),this.mediaSource.removeEventListener("endstreaming",this.Pw),this.mediaSource.removeEventListener("bufferedchange",this.Qw)),this.uw&&this.uw.reject("MediaSource is being destroyed."),this.uw=void 0,this.vw=void 0,t===this.video.src&&(E.VideoElementUtil.removeSource(this.video),this.video.load()),this.mediaSource=void 0,this.ww=!1,this.logger.debug("Detached video element and MSE")}else this.logger.debug("No video element to teardown.");else this.logger.debug("No video wrapper to teardown.")},e.prototype.removeUpdateEndCallback=function(e,t){this.sourceBuffers.hasOwnProperty(e)&&this.sourceBuffers[e].buffer.removeEventListener("updateend",t)},e.prototype.addUpdateEndCallback=function(e,t){this.sourceBuffers.hasOwnProperty(e)&&this.sourceBuffers[e].buffer.addEventListener("updateend",t)},e.prototype.addOneUpdateEndCallback=function(e,t){return this.sourceBuffers[e].onUpdateEnded().catch((function(){})).then(t)},e.prototype.addSourceOpenCallback=function(e){this.mediaSource&&this.mediaSource.addEventListener("sourceopen",e)},e.prototype.removeSourceOpenCallback=function(e){this.mediaSource&&this.mediaSource.removeEventListener("sourceopen",e)},e.prototype.addOneSourceOpenCallback=function(e){var t=this,r=function(n){t.removeSourceOpenCallback(r),e(n)};this.addSourceOpenCallback(r)},e.prototype.isAnyBufferUpdating=function(){var e=this;return 0!==Object.keys(this.sourceBuffers).filter((function(t){return e.sourceBuffers[t].buffer.updating})).length},e.prototype.setDuration=function(e){var t=this;this.queueActionOnBuffers((function(){if(t.mediaSource){var r=(0,b.isNumber)(e)&&e>0?e:1/0;r===1/0&&t.context.settings.MAX_SAFE_MSE_DURATION!==1/0&&(0,b.isNumber)(t.context.settings.MAX_SAFE_MSE_DURATION)&&t.context.settings.MAX_SAFE_MSE_DURATION>0&&(r=t.context.settings.MAX_SAFE_MSE_DURATION),t.mediaSource.duration!==r&&(t.isMediaSourceOpen()?(t.logger.debug("Setting video duration on MSE: ".concat(t.mediaSource.duration," -> ").concat(r)),t.mediaSource.duration=r):t.logger.debug("Skipping setDuration (".concat(t.mediaSource.duration," -> ").concat(r,"), MSE is not open")))}else t.logger.debug("Skipping setDuration (".concat(e,"), MSE is gone"))})).catch((function(e){t.logger.debug("Could not set the duration of the MSE!",e)}))},e.prototype.getDuration=function(){return this.mediaSource&&!isNaN(this.mediaSource.duration)?this.mediaSource.duration:0},e.prototype.isInitialized=function(){return this.ww},Object.defineProperty(e.prototype,"readyState",{get:function(){return this.mediaSource?this.mediaSource.readyState:void 0},enumerable:!1,configurable:!0}),e.prototype.isBufferRemovalPending=function(){var e=this;return Object.keys(this.sourceBuffers).some((function(t){return e.sourceBuffers[t].removalPending}))},e.prototype.getRangePendingRemoval=function(e){var t,r,n;return null!==(n=null===(r=null===(t=this.sourceBuffers)||void 0===t?void 0:t[e])||void 0===r?void 0:r.rangePendingRemoval)&&void 0!==n?n:void 0},e.prototype.Fw=function(e){return this.getBufferedRanges(e).reduce((function(e,t){return e+(t.end-t.start)}),0)},e.prototype.addToBuffer=function(e){var t=this,r=e.getMimeType();return this.queueActionOnBuffer(r,(function(){return t.mediaSource?t.mediaSource.readyState!==i.open?(t.logger.warn("MediaSource is not open (readyState="+t.mediaSource.readyState+")"),Promise.reject(o.SOURCE_BUFFER_APPEND_STATUS.FAILURE)):t.sourceBuffers.hasOwnProperty(r)?t.Gw(e,r):(t.logger.log("sourceBuffers has no entry for "+r),Promise.reject(o.SOURCE_BUFFER_APPEND_STATUS.FAILURE)):(t.logger.debug("Could not queue action on SourceBuffer: MediaSource has been destroyed"),Promise.reject(o.SOURCE_BUFFER_APPEND_STATUS.FAILURE))}))},e.prototype.Gw=function(e,t){var r=e.getRepresentationId().representationId;try{this.logger.debug("[MSEWrapper][".concat(t,"][").concat(r,"] Adding segment to SourceBuffer [").concat(e.getUrl(),"]"));var n=this.sourceBuffers[t];return n.buffer.appendBuffer(e.getData()),n.onUpdateEnded()}catch(n){return this.Hw(n,e,t,r)}},e.prototype.Hw=function(e,t,r,n){var i;return this.logger.debug("[MSEWrapper][".concat(r,"][").concat(n,"] appendBuffer() failed"),e),"QuotaExceededError"===e.name?this.Iw(r):((null===(i=this.video)||void 0===i?void 0:i.error)?this.Jw(e,t,r,n):this.Lw(e,t,r,n),this.logger.debug("[MSEWrapper][".concat(r,"][").concat(n,"] Failed appending segment to SourceBuffer"),e),Promise.reject(o.SOURCE_BUFFER_APPEND_STATUS.FAILURE))},e.prototype.Iw=function(e){return this.logger.debug("QuotaExceededError, trying to remove old data from buffers..."),this.context.store.dispatch((0,v.setBufferMaxSize)(e,this.Fw(e))),Promise.reject(o.SOURCE_BUFFER_APPEND_STATUS.QUOTA_EXCEEDED)},e.prototype.Jw=function(e,t,r,n){var i;if(null===(i=this.video)||void 0===i?void 0:i.error){var o={mediaError:this.video.error,appendBufferError:e,mimeType:r,segmentUrl:t.getUrl(),codec:t.getCodec(),networkState:this.video.networkState,readyState:this.video.readyState};this.logger.warn("[MSEWrapper][".concat(r,"][").concat(n,"] appendBuffer() failed due to HTMLMediaElement.error: ").concat(this.video.error.code," - ").concat(this.video.error.message),o),this.Kw(this.video.error.code)?this.context.eventHandler.fireError(new u.PlayerError(s.ErrorCode.PLAYBACK_ERROR,o,"Fatal media error detected: ".concat(this.video.error.message,". Player reload may be required."))):this.context.eventHandler.dispatchEvent(d.PlayerEvent.Warning,new a.PlayerWarning(c.WarningCode.PLAYBACK_WARNING,"appendBuffer failed due to HTMLMediaElement.error: ".concat(this.video.error.code," - ").concat(this.video.error.message),o))}},e.prototype.Kw=function(e){return[h.MediaErrorCode.MEDIA_ERR_DECODE,h.MediaErrorCode.MEDIA_ERR_SRC_NOT_SUPPORTED].includes(e)},e.prototype.Lw=function(e,t,r,n){var i,o,s={appendBufferError:e,mimeType:r,segmentUrl:t.getUrl(),codec:t.getCodec(),networkState:null===(i=this.video)||void 0===i?void 0:i.networkState,readyState:null===(o=this.video)||void 0===o?void 0:o.readyState};this.logger.warn("[MSEWrapper][".concat(r,"][").concat(n,"] appendBuffer() failed without HTMLMediaElement.error - treating as non-fatal"),s),this.context.eventHandler.dispatchEvent(d.PlayerEvent.Warning,new a.PlayerWarning(c.WarningCode.PLAYBACK_WARNING,"appendBuffer failed without HTMLMediaElement.error: ".concat(e.message||e.name||"Unknown error"),s))},e.prototype.endOfStream=function(){var e=this;return this.queueActionOnBuffers((function(){var t;e.isMediaSourceOpen()?(e.logger.debug("Signaled mse end of stream"),null===(t=e.mediaSource)||void 0===t||t.endOfStream()):e.logger.debug("Skipped signaling EOS as the mse is not open")})).catch((function(t){e.logger.debug("Unable to signal EOS on media source",t)}))},e.prototype.waitForBuffers=function(){var e=Object.keys(this.sourceBuffers).map(this.waitForBuffer);return this.Nw().then((function(){return Promise.all(e).then((function(){}))}))},e.prototype.queueActionOnBuffers=function(e){var t=this,r=new Promise((function(e,n){var i=Object.keys(t.sourceBuffers).map((function(e){var n=t.queueActionOnBuffer(e,(function(){}));return t.queueActionOnBuffer(e,(function(){return r})).then().catch(),n}));Promise.all(i).then((function(){return e()}),n)})).then((function(){return e()})).then((function(){return Promise.all(Object.keys(t.sourceBuffers).map((function(e){return t.sourceBuffers[e].ready()}))).then((function(){}))}));return r},e.prototype.queueActionOnBuffer=function(e,t){return this.sourceBuffers.hasOwnProperty(e)?this.sourceBuffers[e].queueAction(t):Promise.reject("No SourceBuffer for '".concat(e,"' available"))},e.prototype.Mw=function(e){var t,r=this;return null===(t=this.uw)||void 0===t||t.reject(e),this.vw?this.vw.then((function(){r.uw=void 0})):Promise.reject(e)},e.prototype.Nw=function(){var e,t=this;if(this.vw)return this.vw;this.uw=new y.Deferred,this.vw=this.uw.promise;var r=function(e){var r;i(),null===(r=t.uw)||void 0===r||r.reject(e)},n=function(){var e;i(),t.ww=!0,t.xw||(t.yw=!0),null===(e=t.uw)||void 0===e||e.resolve()},i=function(){t.mediaSource&&(t.mediaSource.removeEventListener("error",r),t.mediaSource.removeEventListener("sourceopen",n),t.mediaSource.removeEventListener("webkitsourceopen",n))};if(!this.video)return this.Mw("Could not set source to video element");if(!this.mediaSource)return this.Mw("mediaSource must not be null or undefined");if(this.mediaSource.addEventListener("error",r),this.mediaSource.addEventListener("sourceopen",n,!1),this.mediaSource.addEventListener("webkitsourceopen",n,!1),this.xw&&(this.video.disableRemotePlayback=!0,this.mediaSource.addEventListener("startstreaming",this.Ow),this.mediaSource.addEventListener("endstreaming",this.Pw),this.mediaSource.addEventListener("bufferedchange",this.Qw)),window&&window.URL&&"function"==typeof window.URL.createObjectURL){var o=window.URL.createObjectURL(this.mediaSource);this.video.src=o,null===(e=(0,p.getSourceStore)(this.context))||void 0===e||e.dispatch((0,g.setMseObjectUrl)(o))}else this.logger.debug("Could not use window.URL.createObjectURL(mediaSource) as the browser claims the function does not exist."),this.uw.reject("Could not create Object URL");return this.vw.then((function(){t.uw=void 0}))},Object.defineProperty(e.prototype,"shouldContinueBuffering",{get:function(){return this.yw},enumerable:!1,configurable:!0}),e.prototype.createNewMSE=function(){var e=this;return this.mediaSource?this.tearDownMediaSource().then((function(){return e.Rw()})):this.zw.then((function(){return e.Rw()}))},e.prototype.Rw=function(){return this.xw=(0,M.shouldUseManagedMediaSource)(this.context.settings.PREFER_MANAGED_MEDIA_SOURCE),this.xw?(this.logger.debug("[MSEWrapper] Using ManagedMediaSource"),this.mediaSource=new window.ManagedMediaSource):(this.logger.debug("[MSEWrapper] Using MediaSource"),this.mediaSource=new window.MediaSource),this.Nw()},e.prototype.isChangeTypeSupported=function(){var e,t,r=(0,m.getCapabilities)(),n=r.isWebOS&&r[l.CapabilityKey.webOSChromiumVersion]>=S.WEBOS_2021_CHROMIUM_VERSION;return!!(null===(t=null===(e=window.SourceBuffer)||void 0===e?void 0:e.prototype)||void 0===t?void 0:t.changeType)&&!(0,m.getCapabilities)().isTizen&&!n},e.prototype.Sw=function(e){var t=this,r=T.MimeTypeHelper.getMediaType(e),n=Object.keys(this.sourceBuffers).find((function(n){var i=T.MimeTypeHelper.getMediaType(n);return t.sourceBuffers.hasOwnProperty(n)&&i===r&&n!==e}));n&&(this.sourceBuffers[e]=this.sourceBuffers[n],delete this.sourceBuffers[n])},e.prototype.changeBufferType=function(e,t,r){var n=this;this.Sw(e);var i=this.sourceBuffers[e];return i?r&&i.getMimeType()===e&&i.getCodec()===t?(this.context.logger.debug("Skipping buffer type change for ".concat(e," - mimeType and codec unchanged: ").concat(t)),Promise.resolve()):this.queueActionOnBuffer(e,(function(){i.changeType(e,t),n.context.logger.debug("Changed ".concat(e," SourceBuffer type with codec=").concat(t))})):(this.context.logger.error("SourceBuffer not found for ".concat(e)),Promise.reject(new Error("SourceBuffer not found for ".concat(e))))},e.prototype.dispose=function(){var e=this;this.tearDownMediaSource().then((function(){e.video=void 0}))},e}();function B(e){for(var t=[],r=0;r<(null==e?void 0:e.length);r++){var n="[".concat(e.start(r)," - ").concat(e.end(r),"]");t.push(n)}return t.toString()}t.MSEWrapper=C},60321:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.SourceBufferWrapper=void 0;var n=r(34841),i=r(69200),o=function(){function e(e,t,r){var n=this;this.onBufferedRangesChanged=r,this.WU=function(){n.ZU(),n.onBufferedRangesChanged(n.bufferedRanges),n.YU((function(e){return e.resolve()}))},this.XU=function(e){n.YU((function(t){return t.reject(e)}))},this.ready=function(){return n.buffer.updating?n.onUpdateEnded():Promise.resolve()},this.buffer=e,this.UU=t,this.bufferedRanges=[],this.queuePromise=Promise.resolve(),this.VU=new i.LinkedListQueue,["error","abort","sourceended","sourceclose"].forEach((function(e){n.buffer.addEventListener(e,n.XU)})),this.buffer.addEventListener("updateend",this.WU)}return e.prototype.YU=function(e){for(var t;null!=(t=this.VU.dequeue());)e(t)},e.prototype.ZU=function(){try{this.bufferedRanges=function(e){for(var t=[],r=0;r<e.length;r++)t.push({start:e.start(r),end:e.end(r)});return t}(this.buffer.buffered)}catch(e){}},e.prototype.onUpdateEnded=function(){var e=new n.Deferred;return this.VU.enqueue(e),e.promise},e.prototype.queueAction=function(e){var t=this,r=this.queuePromise.then((function(){return t.ready()})).then((function(){return Promise.resolve(e()).then((function(){return t.ready()}))}));return this.queuePromise=r.catch((function(){})),r},e.prototype.changeType=function(e,t){this.buffer.changeType("".concat(e,"; codecs=").concat(t)),this.UU.mimeType=e,this.UU.codec=t},e.prototype.getCodec=function(){return this.UU.codec},e.prototype.getMimeType=function(){return this.UU.mimeType},e.prototype.dispose=function(){var e=this;["error","abort","sourceended","sourceclose"].forEach((function(t){e.buffer.removeEventListener(t,e.XU)})),this.YU((function(e){return e.reject("disposing source buffer")})),this.buffer.removeEventListener("updateend",this.WU)},e}();t.SourceBufferWrapper=o},65940:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.shouldUseManagedMediaSource=function(e){return"ManagedMediaSource"in window&&(e||!("MediaSource"in window))}},69200:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.LinkedListQueue=void 0;var r=function(){return function(e){this.value=e}}(),n=function(){function e(){this.W8=0}return Object.defineProperty(e.prototype,"length",{get:function(){return this.W8},enumerable:!1,configurable:!0}),e.prototype.dequeue=function(){if(0!==this.W8){var e=this.Y8;return this.Y8=null==e?void 0:e.previous,e&&(e.previous=void 0,e.next=void 0),this.W8--,null==e?void 0:e.value}},e.prototype.enqueue=function(e){if(0===this.W8){var t=new r(e);this.X8=t,this.Y8=t}else{var n=this.X8;this.X8=new r(e),this.X8.next=n,n&&(n.previous=this.X8)}this.W8++},e.prototype.isEmpty=function(){return 0===this.length},e}();t.LinkedListQueue=n},76340:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMseObjectUrl=void 0,t.getMseObjectUrl=function(e){var t,r;return null!==(r=null===(t=null==e?void 0:e.renderer)||void 0===t?void 0:t.mseObjectUrl)&&void 0!==r?r:""}},79323:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.MSERenderer=void 0;var n=r(4524),i=r(66790),o=r(40306),s=r(3336),u=r(80813),a=r(3714),c=r(44468),d=r(33468),f=r(7387),h=r(23690),l=r(15971),v=r(21513),g=r(93204),p=r(94685),m=r(34841),y=r(78877),T=r(87244),S=r(84568),b=r(85434),E=r(23068),w=r(19274),R=r(68925),M=r(86897),C=r(1765),B=r(98331),P=r(48873),O=r(65940),D=r(10344),U=function(){function e(e){var t=this;this.context=e,this.Iv=0,this.waitingForSeekedPromise=null,this.Rv=function(e){t.setCurrentTimeDelayedContext&&t.setCurrentTimeDelayedContext.time!==e.seekTarget&&Math.abs(t.setCurrentTimeDelayedContext.time-e.seekTarget)>=t.context.settings.GAP_TOLERANCE&&t.cancelSetCurrentTimeDelayed()},this.reOpenMse=function(){var e=t.segmentQueueMimeTypes;if(e.length<1)return Promise.resolve();var r=e.find((function(e){return t.Jv.hasOwnProperty(e)}));return r?t.setTimestampOffset(r,t.Jv[r]):t.setTimestampOffset(e[0],0)},this.Sv=function(){if(t.video){var e=t.video.isPictureInPicture()?c.ViewMode.PictureInPicture:c.ViewMode.Inline;t.context.store.dispatch((0,h.setPlayerViewMode)(e))}},this.Tv=function(e){e.time&&e.time>0&&(t.Iv=0)},this.postBufferRemoval=function(e,r,n){t.logger.debug("successfully removed buffer for ".concat(e," (from  ").concat(r," to ").concat(n,")"))},this.Xv=(0,S.memoize)(this.Yv.bind(this)),this.logger=e.logger,this.video=e.videoElement,this.settings=e.settings,this.Cv=Promise.resolve(),this.eventHandler=void 0,this.Jv={},this.Dv=new C.BufferMimeCodecMap(e.store,e.settings),this.savedCurrentTime=0,this.playerEventHandler=e.eventHandler,this.shutdownPromise=Promise.resolve(),this.init(!0)}return e.prototype.createMSEWrapper=function(){return new P.MSEWrapper(this.context)},e.prototype.Ov=function(e){return e?this.Qv():this.Pv()},e.prototype.Pv=function(){var e=this;return function(){var t;return null===(t=e.mse)||void 0===t?void 0:t.createNewMSE()}},e.prototype.Qv=function(){var e,t=null===(e=this.mse)||void 0===e?void 0:e.createNewMSE();return function(){return t}},e.prototype.init=function(e){var t=this;this.Lv=Promise.resolve(),this.mse=this.createMSEWrapper(),this.Cv=this.Cv.catch((function(e){return t.context.logger.debug("Caught error during MSE recreation",e)})).then(this.Ov(e)),this.Fv=!0,this.segmentQueues={},this.setCurrentTimeContext=void 0,this.setCurrentTimeDelayedContext=void 0,this.Mv=new Map,this.Nv=new Map,this.Hv=new B.GapHandler(this.context),null==this.eventHandler&&this.video&&(this.eventHandler=new D.VideoEventHandler(this.video),this.eventHandler.on(w.MediaElementEvent.timeupdate,this.Tv)),this.on(w.MediaElementEvent.webkitpresentationmodechanged,this.Sv),this.playerEventHandler.on(a.PlayerEvent.Seek,this.Rv)},e.prototype.trackRendererError=function(e){this.Iv++,this.Iv>=this.settings.MAX_CONSECUTIVE_RENDERER_ERRORS&&this.context.eventHandler.fireError(new s.PlayerError(o.ErrorCode.PLAYBACK_VIDEO_DECODING_ERROR,{codec:e.getCodec(),mimeType:e.getMimeType(),segmentUrl:e.getUrl()},"Failed to append the segment to the buffer. The MSE has thrown an error."))},e.prototype.hasSourceBuffers=function(){return this.segmentQueueMimeTypes.length>0},e.prototype.hasDataInSourceBuffers=function(){var e=this.mse;return!(!e||!this.hasSourceBuffers())&&this.segmentQueueMimeTypes.every((function(t){return e.getBufferedRanges(t).length>0}))},e.prototype.updateRendererRangesInStore=function(e){var t;null===(t=(0,l.getSourceStore)(this.context))||void 0===t||t.dispatch((0,R.setRendererRanges)(e,this.getOverallBufferedRanges(e)))},e.prototype.addBuffer=function(e,t){var r,n=this;if(!this.mse)return!1;this.Dv.add(e,t);var i=Boolean(this.mse.addBuffer(e,t,(function(){return n.updateRendererRangesInStore(e)})));return i&&(this.mse.addUpdateEndCallback(e,(function(){var t;return null===(t=n.setCurrentTimeDelayedContext)||void 0===t||t.reevaluateDataInBuffer(),n.Mv.set(e,!1)})),this.segmentQueues[e]=[],null===(r=(0,l.getSourceStore)(this.context))||void 0===r||r.dispatch((0,R.setRendererRanges)(e,[]))),i},e.prototype.addDrmInitData=function(e){if(null==e?void 0:e.length){var t=this.drmService;t?e.forEach((function(e){return t.addInitData(e)})):this.context.logger.debug("PSSH data found but DRM is not configured")}},e.prototype.storeDrmInitDataFromManifest=function(e){var t=this;e&&this.context.serviceManager.maybeCall(u.ServiceName.ManifestService,(function(r){var n=r.getContentProtectionForAdaptationSet(e).flatMap((function(e){var r=d.KeySystemKind[e.name.toUpperCase()],n=e.schemeIdUri.replace("urn:uuid:","").replace(/-/g,"");return(e.pssh||[]).map((function(i,o){return t.logger.insane("adding pssh for ".concat(e.name," : ").concat(i)),{initData:e.psshData[o],initDataStr:i,systemID:e.schemeIdUri,systemIDraw:n,systemName:r,kid:[]}}))}));t.addDrmInitData(n)}),void 0,this.context.sourceContext.sourceIdentifier)},e.prototype.appendData=function(e){var t=this;return this.addDrmInitData(e.getDrmInitData()),this.addSegmentToSegmentQueue(e),this.Lv=this.Lv.catch((function(){})).then((function(){return t.processSegmentQueues()})),this.Lv},e.prototype.addSegmentToSegmentQueue=function(e){var t=e.getMimeType();this.segmentQueues[t]?(this.segmentQueues[t].push(e),this.updateRendererRangesInStore(t)):this.logger.debug("Renderer missing segment queue for mimeType(".concat(t,") but trying to push segment.(url=").concat(e.getUrl(),")"))},e.prototype.getBufferedRanges=function(e){var t,r;return null!==(r=null===(t=this.mse)||void 0===t?void 0:t.getBufferedRanges(e))&&void 0!==r?r:[]},e.prototype.getVideoElementBufferedRanges=function(){return(0,n.getBufferedRanges)(this.video)},e.prototype.getOverallBufferedRanges=function(e){if(!this.mse||!this.segmentQueues.hasOwnProperty(e))return[];var t=n.BufferRangeHelper.getRangesFromQueue(this.segmentQueues[e],this.settings.GAP_TOLERANCE);return t=t.concat(this.getBufferedRanges(e)),n.BufferRangeHelper.mergeRanges(t,this.settings.GAP_TOLERANCE)},e.prototype.isDataBeingAppended=function(e){return!!this.mse&&(this.segmentQueues&&this.segmentQueues[e]&&this.segmentQueues[e].length>0||this.mse.isAnyBufferUpdating())},e.prototype.Uv=function(e){var t=(0,l.getSourceState)(this.context);if(!t)return[];var r=(0,M.getBufferStateMap)(t);return r?(0,M.getRendererBufferedRanges)(r,e):[]},e.prototype.getEndOfBufferTime=function(){var e=this,t=[];if(this.segmentQueueMimeTypes.forEach((function(r){var n=e.Uv(r);if(n.length>0){var i=n[n.length-1].end;t.push(i)}})),0!==t.length)return Math.min.apply(Math,t)},e.prototype.removeDataFromSegmentQueues=function(e,t,r){var n=this;void 0===t&&(t=-1/0),void 0===r&&(r=1/0),this.segmentQueues.hasOwnProperty(e)&&(this.segmentQueues[e]=this.segmentQueues[e].filter((function(i){var o=i.getDuration(),s=i.getPlaybackTime(),u=i.getRepresentationId().representationId,a=i.isInit()||s<t||s+o>r;return n.logger.debug("[MSERenderer][".concat(e,"][").concat(u,"] Removing segment from queue [").concat(!a,"]. ")+"Clearing from ".concat(t," to ").concat(r,". Segment: [playbackTime=").concat(i.getPlaybackTime(),", ")+"duration=".concat(i.getDuration(),", url=").concat(i.getUrl(),"]")),a})),this.updateRendererRangesInStore(e))},e.prototype.removeData=function(e,t,r){return this.mse?(void 0===t&&void 0===r&&this.saveCurrentTime(),this.removeDataFromSegmentQueues(e,t,r),this.mse.removeFromBuffer(e,t,r,this.postBufferRemoval)):Promise.reject()},e.prototype.getDroppedVideoFrames=function(){var e,t,r,n,i;return null!==(i=null!==(r=null===(t=null===(e=this.video)||void 0===e?void 0:e.getVideoPlaybackQuality())||void 0===t?void 0:t.droppedVideoFrames)&&void 0!==r?r:null===(n=this.video)||void 0===n?void 0:n.droppedVideoFrames)&&void 0!==i?i:0},e.prototype.setPlaybackSpeed=function(e){this.video&&!isNaN(e)&&e>0&&e!==this.video.playbackRate&&(this.video.playbackRate=e)},e.prototype.getPlaybackSpeed=function(){var e,t;return null!==(t=null===(e=this.video)||void 0===e?void 0:e.playbackRate)&&void 0!==t?t:1},e.prototype.setVolume=function(e){this.video&&!isNaN(e)&&(this.video.volume=Math.min(e/100,1))},e.prototype.getVolume=function(){var e,t;return 100*(null!==(t=null===(e=this.video)||void 0===e?void 0:e.volume)&&void 0!==t?t:1)},e.prototype.mute=function(){this.video&&(this.video.muted=!0)},e.prototype.unmute=function(){this.video&&(this.video.muted=!1)},e.prototype.isMuted=function(){var e,t;return null!==(t=null===(e=this.video)||void 0===e?void 0:e.muted)&&void 0!==t&&t},e.prototype.play=function(){var e=this;return this.video?this.video.play().catch((function(t){if((0,T.isSwitchingBufferBlocks)((0,l.getSourceStore)(e.context)))return e.ready();throw t})):Promise.resolve()},e.prototype.pause=function(){this.video&&this.video.pause()},e.prototype.end=function(){this.pause(),this.cancelSetCurrentTimeDelayed()},e.prototype.isPaused=function(){var e,t;return null===(t=null===(e=this.video)||void 0===e?void 0:e.paused)||void 0===t||t},e.prototype.setDuration=function(e){this.mse&&(e=Math.floor(1e4*e)/1e4,this.Gv=e,this.mse.setDuration(e))},e.prototype.getDuration=function(){var e,t;return null!==(t=null===(e=this.video)||void 0===e?void 0:e.duration)&&void 0!==t?t:NaN},e.prototype.setCurrentTime=function(e){var t=this;if(!this.mse)return Promise.reject("MSE is not open");if(e=Math.ceil(100*e)/100,this.setCurrentTimeContext){if(this.setCurrentTimeContext.time===e)return this.setCurrentTimeContext.promise;this.cancelSetCurrentTimeDelayed()}var r=Promise.resolve();this.isMSEOpen()||this.mw(e)||(this.logger.debug("reopen MSE on setCurrentTime"),r=this.reOpenMse());var n=r.then((function(){return t.setCurrentTimeInternal(e).catch((function(r){return t.logger.debug("could not set time ".concat(e," on video element"),r),t.getCurrentTime()})).finally((function(){return t.Fv=!1}))}));return this.setCurrentTimeContext={time:e,isInitialSeek:this.Fv,promise:n},n},e.prototype.getCurrentVideoTime=function(){var e,t;return null!==(t=null===(e=this.video)||void 0===e?void 0:e.currentTime)&&void 0!==t?t:0},e.prototype.getCurrentFallbackTime=function(){var e=this.setCurrentTimeContext;return e&&e.isInitialSeek&&-1!==e.time?e.time:0!==this.savedCurrentTime&&this.Vv()?this.savedCurrentTime:(this.savedCurrentTime=0,this.getCurrentVideoTime())},e.prototype.Vv=function(){var e;return!this.hasDataInSourceBuffers()&&!(null===(e=this.mse)||void 0===e?void 0:e.isBufferRemovalPending())||!(!(0,T.isSwitchingBufferBlocks)((0,l.getSourceStore)(this.context))&&this.mw(this.getCurrentVideoTime()))},e.prototype.getCurrentTime=function(e){return void 0===e&&(e=!1),e?this.getCurrentVideoTime():this.getCurrentFallbackTime()},e.prototype.getSnapshotData=function(e,t){void 0===t&&(t=1);try{if(!this.video)return;var r=this.video.videoWidth,n=this.video.videoHeight;this.Kv||(this.Kv=document.createElement("canvas"),this.Kv.id="snapshotHiddenCanvas"),this.Kv.width=r,this.Kv.height=n;var i=this.Kv.getContext("2d");null==i||i.drawImage(this.video.getWrappedElement(),0,0,r,n);var o=void 0;return"image/jpeg"===e||"image/webp"===e?(t=Math.max(t,0),t=Math.min(t,1),o=this.Kv.toDataURL(e,t)):o=this.Kv.toDataURL(e,t),{height:n,width:r,data:o}}catch(e){return void(e&&e.message?this.logger.debug("Snapshot acquisition failed: "+e.message):this.logger.debug("Snapshot acquisition failed"))}},e.prototype.Wv=function(){return this.drmService?this.drmService.shutdownPromise:Promise.resolve()},e.prototype.ready=function(){var e=this;return this.shutdownPromise.then((function(){return e.Wv()})).then((function(){return e.mse||e.init(!1),e.Cv}))},e.prototype.setTimestampOffset=function(e,t){var r=this;return this.mse?this.mse.setTimestampOffset(e,t).then((function(){r.Jv[e]=t})):Promise.resolve()},e.prototype.shutdown=function(e){var t,r=this;if(!this.mse)return this.shutdownPromise;for(var n in this.waitingForSeekedPromise=null,e&&this.saveCurrentTime(),this.segmentQueues)this.segmentQueues.hasOwnProperty(n)&&(delete this.segmentQueues[n],null===(t=(0,l.getSourceStore)(this.context))||void 0===t||t.dispatch((0,R.setRendererRanges)(n,[])));var i=this.mse;return this.shutdownPromise=this.shutdownPromise.then((function(){return i.tearDownMediaSource()})).catch((function(e){r.logger.debug("Could not tear down media source",{err:e,message:e.message})})),this.mse=void 0,this.cancelSetCurrentTimeDelayed(),this.Hv&&(this.Hv.shutdown(),this.Hv=void 0),this.eventHandler&&!e&&(this.eventHandler.dispose(),this.eventHandler=void 0),this.Mv.clear(),this.Nv.clear(),this.shutdownPromise},e.prototype.release=function(){var e;for(var t in this.segmentQueues)this.segmentQueues.hasOwnProperty(t)&&null!==this.mse&&(delete this.segmentQueues[t],null===(e=(0,l.getSourceStore)(this.context))||void 0===e||e.dispatch((0,R.setRendererRanges)(t,[])));return this.Dv.dispose(),this.mse&&this.mse.dispose(),this.Cv=Promise.resolve(),this.Jv={},this.cancelSetCurrentTimeDelayed(),this.Hv&&(this.Hv.shutdown(),this.Hv=void 0),this.off(w.MediaElementEvent.webkitpresentationmodechanged,this.Sv),this.eventHandler&&(this.eventHandler.off(w.MediaElementEvent.timeupdate,this.Tv),this.eventHandler.dispose(),this.eventHandler=void 0),this.waitingForSeekedPromise=null,this.playerEventHandler.off(a.PlayerEvent.Seek,this.Rv),this.Xv.invalidate(),this.Wv()},e.prototype.on=function(e,t){var r;null===(r=this.eventHandler)||void 0===r||r.on(e,t)},e.prototype.off=function(e,t){this.eventHandler&&this.eventHandler.off(e,t)},Object.defineProperty(e.prototype,"drmService",{get:function(){var e;return null===(e=this.context.serviceManager)||void 0===e?void 0:e.get(u.ServiceName.DrmService)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"segmentQueueMimeTypes",{get:function(){return Object.keys(this.segmentQueues)},enumerable:!1,configurable:!0}),e.prototype.setDrmConfig=function(e,t){return this.drmService?this.drmService.updateDrmConfig(e,t):Promise.reject(i.DrmSetupError.MISSING_CONFIGURATION)},e.prototype.isMediaTypeSupported=function(e,t){return this.Xv("".concat(e,'; codecs="').concat(t,'"'))},e.prototype.Yv=function(e){return(0,O.shouldUseManagedMediaSource)(this.context.settings.PREFER_MANAGED_MEDIA_SOURCE)?window.ManagedMediaSource.isTypeSupported(e):"MediaSource"in window&&MediaSource.isTypeSupported(e)},e.prototype.Zv=function(){this.Ev&&(this.Ev.reject(new Error("Cancelled pending end of stream.")),this.Ev=void 0)},e.prototype.av=function(){var e=this;return this.Ev=this.Ev||new m.Deferred,this.Ev.promise.then((function(){var t;return null===(t=e.mse)||void 0===t?void 0:t.endOfStream()})).catch((function(t){(0,p.isContextAvailable)(e.context)&&e.context.logger.debug(t)}))},e.prototype.setEndOfStream=function(e){if(void 0===e&&(e=!0),!e)return this.Zv(),this.isMSEOpen()?Promise.resolve():this.reOpenMse();if(!this.hasSourceBuffers()||!this.mse)return this.logger.debug("Cannot signal EOS as no buffers have been added yet"),Promise.resolve();var t=this.getEndOfBufferTime();return this.setCurrentTimeDelayedContext&&this.setCurrentTimeDelayedContext.time>=this.Gv&&t&&!isNaN(t)&&this.cancelSetCurrentTimeDelayed(),this.setCurrentTimeDelayedContext?this.av():this.mse.endOfStream()},e.prototype.bv=function(e){var t=this.ow();for(var r in t){var n=t[r];if(n.start<=e&&n.end>=e)return!0}return!1},e.prototype.mw=function(e,t){if(void 0===t&&(t=0),this.bv(e))return!1;var r=this.getRangesInSourceBuffers();return!!r&&Object.keys(r).every((function(i){return(0,n.isInTimeRanges)(r[i],e,t)}))},e.prototype.nw=function(e,t){var r,i=null!==(r=this.getRangesInSourceBuffers())&&void 0!==r?r:{},o=Object.keys(i),s=function(e,t){return Object.keys(e).map((function(r){return e[r].find((function(e){return(0,n.isInTimeRanges)([e],t)}))})).filter(E.isDefined)}(i,e);if(0===o.length||s.length<o.length)return NaN;var u=Math.min.apply(Math,s.map((function(e){var t;return null!==(t=null==e?void 0:e.end)&&void 0!==t?t:1/0}))),a=u-e;return a>=t?e:e-(t-a)},e.prototype.adjustTimeToNextCommonBufferStart=function(e){var t,r,n,i=this,o=null===(t=(0,l.getSourceState)(this.context))||void 0===t?void 0:t.drm,s=(0,y.getBufferEndSafetyMargin)(o);if(this.mw(e,s))return e;var u=this.mw(e),a=this.getFutureBufferStarts(e).filter((function(t){return t>=e})),c=0===a.length,d=null===(n=null===(r=(0,l.getSourceState)(this.context))||void 0===r?void 0:r.buffer.isLoadingRangeFinished)||void 0===n||n;if(u&&c){var f=this.nw(e,s);return f===e||d?!isNaN(f)&&this.mw(f)?(this.logger.debug("Adjusting current time away from end of buffer: ".concat(f)),f):e:(this.logger.debug("Not adjusting seek target, because there will be future data"),NaN)}if(!u&&c)return NaN;var h=a.find((function(e){return i.mw(e,s)})),v=null!=h?h:Math.min.apply(Math,a);return h||d?(this.logger.debug("Adjusting current time to next safe buffer start: ".concat(v)),v):(this.logger.debug("Not adjusting seek target, as it is not safe across media types and there will be future data"),NaN)},e.prototype.getFutureBufferStarts=function(e){var t,r=this.getRangesInSourceBuffers();if(!r)return[];if(this.mse){var i=this.ow();t=Object.keys(i).map((function(e){return i[e]}))}else t=[];return n.BufferRangeHelper.getCommonBufferedRanges(r).filter((function(t){return t.getEnd()>=e&&!isNaN(t.getStart())})).filter((function(e){return t.every((function(t){return(0,n.areDisjoint)(t,{start:e.getStart(),end:e.getEnd()})}))})).map((function(e){return e.getStart()}))},e.prototype.getRangesInSourceBuffers=function(){if(!this.mse)return null;var e={};for(var t in this.segmentQueues)if(this.segmentQueues.hasOwnProperty(t)&&(e[t]=this.mse.getBufferedRanges(t),e[t].length<1))return null;return Object.keys(e).length?e:null},e.prototype.ow=function(){if(!this.mse||!this.mse.isBufferRemovalPending())return{};var e={};for(var t in this.segmentQueues){var r=this.mse.getRangePendingRemoval(t);this.segmentQueues.hasOwnProperty(t)&&r&&(e[t]=r)}return e},e.prototype.processSegmentQueues=function(){var e=this,t=this.segmentQueueMimeTypes.filter((function(t){return e.segmentQueues[t].length>0})).map((function(t){return e.addSegmentFromQueueToMse(t)}));return 0===t.length?Promise.resolve():Promise.all(t).then((function(){return e.processSegmentQueues()})).catch((function(e){if(e!==i.SOURCE_BUFFER_APPEND_STATUS.SUSPENDED)throw e}))},e.prototype.getHeadOfQueue=function(e){return this.segmentQueues[e][0]},e.prototype.isMSEOpen=function(){var e;return(null===(e=this.mse)||void 0===e?void 0:e.readyState)===P.MediaSourceReadyState.open},e.prototype.pw=function(e){var t,r=null===(t=(0,l.getSourceState)(this.context))||void 0===t?void 0:t.drm;return this.context.serviceManager.maybeCall(u.ServiceName.DrmService,(function(t){return t.maybeWaitForDrmLicense(e,r)}),Promise.resolve())},e.prototype.addSegmentFromQueueToMse=function(e){var t=this;if(!this.mse)return Promise.resolve();var r=Promise.resolve();this.isMSEOpen()||(r=this.reOpenMse());var n=this.getHeadOfQueue(e);if(!n)return Promise.resolve();var o=n.getRepresentationId().representationId,s=n.getUrl();return this.context.logger.debug("[MSERenderer][".concat(e,"][").concat(o,"] Scheduling appendage to buffer [url=").concat(s,"], DRM key ID (").concat(n.getDrmKid(),")")),r.then((function(){return t.pw(n)})).then((function(){return t.mse?t.segmentQueues[e].includes(n)?t.mse.addToBuffer(n).then((function(){var r=t.getHeadOfQueue(e)!==n;if(t.logger.debug("[MSERenderer][".concat(e,"][").concat(o,"] Appended segment to buffer [url=").concat(s,"]")),r){var i=t.segmentQueues[e][0],u=i?i.getUrl():"none";t.logger.debug("[MSERenderer][".concat(e,"][").concat(o,"] Skipping removal of [url=").concat(s,"] ")+"from segment queue as the queue head has unexpectedly changed to [url=".concat(u,"]"))}else t.segmentQueues[e].shift();t.drmService&&t.hasDataInSourceBuffers()&&!(0,T.isSwitchingBufferBlocks)((0,l.getSourceStore)(t.context))&&t.drmService.signalInitDataShouldBeAvailable()})):(t.logger.debug("[MSERenderer][".concat(e,"][").concat(o,"] Segment ").concat(n.getUrl()," no longer part of the queue - skipping appendage")),Promise.resolve()):Promise.reject(i.SOURCE_BUFFER_APPEND_STATUS.FAILURE)})).catch((function(r){if(t.logger.debug("[MSERenderer][".concat(e,"][").concat(o,"] Adding segment from queue to buffer failed"),r),r===i.SOURCE_BUFFER_APPEND_STATUS.FAILURE&&t.trackRendererError(n),t.mse&&r===i.SOURCE_BUFFER_APPEND_STATUS.QUOTA_EXCEEDED){t.Mv.set(e,!0);var s=t.Nv.get(e);return s||(s=new m.Deferred,t.Nv.set(e,s)),t.mse.addOneUpdateEndCallback(e,s.resolve).then((function(){t.Nv.delete(e),t.context.logger.debug("Appending segment after quota has been exceeded...")})),s.promise.then((function(){return t.processSegmentQueues()}))}return t.mse?t.mse.queueActionOnBuffer(e,(function(){return t.processSegmentQueues()})):Promise.reject(r)}))},e.prototype.cancelSetCurrentTimeDelayed=function(){this.setCurrentTimeDelayedContext&&(this.context.logger.debug("Cancelling delayed set currentTime to ".concat(this.setCurrentTimeDelayedContext.time)),this.setCurrentTimeDelayedContext.unsubscribeFromSourceStore(),this.setCurrentTimeDelayedContext.deferred.reject("cancelled seek"),this.setCurrentTimeDelayedContext=void 0)},e.prototype.qw=function(e){var t=this;this.segmentQueueMimeTypes.forEach((function(r){t.segmentQueues[r]=t.segmentQueues[r].filter((function(t){return t.getPlaybackTime()+t.getDuration()>=e})),t.updateRendererRangesInStore(r),t.Mv.set(r,!1)})),this.Nv.forEach((function(e){return e.reject()})),this.Nv.clear()},e.prototype.resolvePendingEndOfStream=function(){this.Ev&&(this.Ev.resolve(),this.Ev=void 0)},e.prototype.setCurrentTimeInternal=function(e){var t=this;if(!this.mse)return Promise.reject("Couldn't set current time, MSE is not open");(function(e){var t=!1;return e.forEach((function(e){return t=t||function(e){return e}(e)})),t})(this.Mv)&&this.qw(e);var r=this.mse.waitForBuffers().then((function(){return t.waitingForSeekedPromise})).then((function(){if(t.setCurrentTimeContext){if(t.setCurrentTimeContext.time!==e)return Promise.reject("A newer setting of change time has been scheduled.")}else t.setCurrentTimeContext={time:e,isInitialSeek:!1,promise:r};var n=t.adjustTimeToNextCommonBufferStart(e);return isNaN(n)?t.rw(e):n})).then((function(e){var r,n,i,o,s=null!==(n=null===(r=t.video)||void 0===r?void 0:r.currentTime)&&void 0!==n?n:0,u=!t.isPaused();return(null===(i=t.setCurrentTimeContext)||void 0===i?void 0:i.isInitialSeek)&&u&&s>e?(t.logger.debug("Skip initial seek to ".concat(e," as playback has started and is already at ").concat(s)),o=Promise.resolve(s)):(t.logger.debug("set time on video element to ".concat(e)),o=t.seekOnVideoElement(e)),o.then((function(e){return t.resolvePendingEndOfStream(),e})).catch((function(r){return t.handleVideoSetCurrentTimeError(e,r)})).finally((function(){t.waitingForSeekedPromise=null,t.setCurrentTimeContext=void 0,t.savedCurrentTime=0}))}));return r},e.prototype.rw=function(e){var t=this;this.context.logger.debug("Delaying seek, waiting for data in buffer for time ".concat(e));var r=(0,l.getSourceStore)(this.context);if(!r)return Promise.reject(new Error("No source store available"));var n=new m.Deferred,i=(0,g.subscribe)(r)((function(e){return(0,M.getBufferState)(e)}),(function(){var e;null===(e=t.setCurrentTimeDelayedContext)||void 0===e||e.reevaluateDataInBuffer()}),(function(e,t){return Boolean((null==e?void 0:e.isLoadingRangeFinished)&&!(null==t?void 0:t.isLoadingRangeFinished))}));return this.setCurrentTimeDelayedContext={time:e,reevaluateDataInBuffer:function(){var r=t.adjustTimeToNextCommonBufferStart(e);isNaN(r)?t.context.logger.debug("Re-evaluated delayed seek to ".concat(e,": Cannot yet resolve, waiting for data in buffer"),{video:t.getBufferedRanges("video/mp4"),audio:t.getBufferedRanges("audio/mp4"),adjustedTime:r}):(i(),t.context.logger.debug("Re-evaluated delayed seek to ".concat(e,": Resolving with seek target ").concat(r)),t.setCurrentTimeDelayedContext=void 0,n.resolve(r))},deferred:n,unsubscribeFromSourceStore:i},n.promise},e.prototype.handleVideoSetCurrentTimeError=function(e,t){return this.logger.debug("failed to set current time",t),this.waitingForSeekedPromise=null,this.setCurrentTimeInternal(e)},e.prototype.seekOnVideoElement=function(e){var t=this;return this.waitingForSeekedPromise=new Promise((function(r,n){t.video?(t.video.currentTime=e,r(t.video.currentTime)):n("No video reference")})),this.waitingForSeekedPromise},e.prototype.saveCurrentTime=function(){this.setCurrentTimeContext?this.savedCurrentTime=this.setCurrentTimeContext.time:this.savedCurrentTime=this.getCurrentVideoTime()},e.prototype.sw=function(e){var t=this;return void 0===e&&(e=this.getCurrentTime()),this.shutdown(!1).then((function(){return t.ready()})).then((function(){t.Dv.forEach((function(e,r){t.addBuffer(e,r)||(t.context.logger.debug("Failed to create source buffer ".concat(e)),t.Dv.remove(e))}))})).then((function(){t.setCurrentTime(e).then((function(){var e,r;return(null===(r=null===(e=t.context.serviceManager)||void 0===e?void 0:e.get(u.ServiceName.PlayerStateService))||void 0===r?void 0:r.isPlaying())?t.play():Promise.resolve()}))}))},e.prototype.tw=function(e){var t,r=this,n=b.MimeTypeHelper.getMediaType(e);this.segmentQueueMimeTypes.forEach((function(e){var t;b.MimeTypeHelper.getMediaType(e)===n&&(delete r.segmentQueues[e],null===(t=(0,l.getSourceStore)(r.context))||void 0===t||t.dispatch((0,R.setRendererRanges)(e,[])))})),this.segmentQueues[e]=[],null===(t=(0,l.getSourceStore)(this.context))||void 0===t||t.dispatch((0,R.setRendererRanges)(e,[]))},e.prototype.changeBufferType=function(e,t,r){var n=this;if(this.Dv.update(e,t),this.tw(e),this.mse&&this.mse.isChangeTypeSupported()){var i=!(r&&(0,v.getCapabilities)()[f.CapabilityKey.isEdgeChromium]);return this.mse.changeBufferType(e,t,i).then((function(){var r;return(r={})[e]=t,r})).catch((function(r){return n.logger.debug("Failed to change buffer type to ".concat(e," ").concat(t,":"),r),n.sw().then((function(){return n.Dv.entries()}))}))}return this.sw().then((function(){return n.Dv.entries()}))},e.prototype.shouldContinueBuffering=function(){var e,t;return null!==(t=null===(e=this.mse)||void 0===e?void 0:e.shouldContinueBuffering)&&void 0!==t&&t},e}();t.MSERenderer=U},80354:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.findNextRangeForGap=function(e,t){for(var r=!1,i=1/0,o=0;o<t.length;o++){var s=t.start(o),u=t.end(o),a=e+2*n.Ranges.TIME_FUDGE_FACTOR;if(r&&!isFinite(i)){i=s;break}s<e&&u>e&&a>u&&(r=!0)}return{isNearEndOfBufferedRange:r,nextRangeStart:i}};var n=r(82889)},82889:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Ranges=void 0;var r=function(){function e(){}return e.filterRanges=function(t,r){var n=[];if(t&&t.length)for(var i=0;i<t.length;i++)r(t.start(i),t.end(i))&&n.push([t.start(i),t.end(i)]);return e.createTimeRanges(n)},e.createTimeRangesObj=function(e){return void 0===e||0===e.length?{length:0,start:function(){return 0},end:function(){return 0}}:{length:e.length,start:function(t){return e[t][0]},end:function(t){return e[t][1]}}},e.createTimeRanges=function(t,r){return Array.isArray(t)?e.createTimeRangesObj(t):void 0===t||void 0===r?e.createTimeRangesObj():e.createTimeRangesObj([[t,r]])},e.findNextRange=function(t,r){return e.filterRanges(t,(function(t,n){return t-e.TIME_FUDGE_FACTOR>=r&&n-t>e.MIN_RANGE_DURATION}))},e.findGaps=function(t,r){if(t.length<2)return e.createTimeRanges();for(var n=[],i=1;i<t.length;i++){var o=t.end(i-1),s=t.start(i);s-o>r&&n.push([o,s])}return e.createTimeRanges(n)},e.findRangeForTime=function(t,r){return e.filterRanges(t,(function(e,t){return e<=r&&t>=r}))},e.TIME_FUDGE_FACTOR=1/30,e.MIN_RANGE_DURATION=.2,e}();t.Ranges=r},98331:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.GapHandler=void 0;var n=r(3714),i=r(7387),o=r(77753),s=r(87827),u=r(21513),a=r(85434),c=r(15487),d=r(60877),f=r(88844),h=r(19274),l=r(80354),v=r(82889),g=[h.MediaElementEvent.seeking,h.MediaElementEvent.seeked,h.MediaElementEvent.pause,h.MediaElementEvent.playing,h.MediaElementEvent.error],p=function(){function e(e){var t,r,i=this;this.kT=!1,this.play=function(){i.lT=Date.now()},this.pT=function(){if(!i.aT.isDisposed&&void 0!==i.bT){var e=i.bT.paused,t=i.bT.seeking,r=i.GT(i.bT.currentTime),n=i.oT(),o=i.nT();e||t&&!r||n||(i.dT++,o||i.qT())}},this.qT=function(){var e,t=i.aT.store.getState();if((0,o.isInstanceState)(t)&&i.bT){var r=(0,s.getPlayerState)(t);((0,s.getIsSeeking)(r)||(null===(e=i.bT)||void 0===e?void 0:e.seeking))&&!i.GT(i.bT.currentTime)||i.DT()}},this.rT=function(){i.DT()},this.sT=function(){i.jT=void 0},this.wT=function(){if(i.gT=Date.now(),i.bT&&!i.bT.paused&&!i.bT.seeking){i.iT||(i.mT(),i.iT=!0);var e=i.aT.renderer.getCurrentTime(!0);if(i.tT(e))i.vT();else{var t=i.aT.renderer.getVideoElementBufferedRanges();if(t.length>1&&!i.jT){var r=i.aT.settings.MIN_SIZE_FOR_GAP_SKIPPING;i.jT=function(e,t,r){for(var n=0;n<e.length-1;n++){var i=e[n].end,o=e[n+1].start;if(i>t&&o>i&&o-i>=r)return{start:i,end:o}}}(t,e,r)}else i.uT(e)?(i.cT++,i.qT()):e===i.eT?i.cT++:(i.cT=0,i.dT=0,i.eT=e)}}},this.xT=function(){i.cT=0,i.dT=0,(0,f.clearTimeoutIfDefined)(i.fT),i.fT=-1},this.yT=function(e){if(i.bT&&!i.kT){var t=i.aT.renderer.getVideoElementBufferedRanges().sort((function(e,t){return e.start-t.start})),r=i.aT.renderer.getCurrentTime(!0),n=m(t,r);if(i.cT=0,i.dT=0,i.fT=-1,void 0!==n&&r===e){var o=n.start;i.aT.logger.debug("Skipping gap from ".concat(r," to ").concat(o)),i.zT(r,o)}}},this.aT=e,this.bT=e.videoElement,this.gT=0,this.cT=0,this.dT=0,this.lT=0,this.iT=!1,this.jT=void 0,null===(t=this.bT)||void 0===t||t.addEventListener(h.MediaElementEvent.timeupdate,this.wT),null===(r=this.bT)||void 0===r||r.addEventListener(h.MediaElementEvent.play,this.play),this.aT.eventHandler.on(n.PlayerEvent.Seek,this.sT)}return e.prototype.mT=function(){var e,t,r;null===(e=this.bT)||void 0===e||e.addEventListener(h.MediaElementEvent.waiting,this.qT),null===(t=this.bT)||void 0===t||t.addEventListener(h.MediaElementEvent.stalled,this.rT);for(var n=0,i=g;n<i.length;n++){var o=i[n];null===(r=this.bT)||void 0===r||r.addEventListener(o,this.xT)}this.hT=window.setInterval(this.pT,250)},e.prototype.nT=function(){return Date.now()-this.lT<500},e.prototype.oT=function(){return Date.now()-this.gT<=1e3},e.prototype.tT=function(e){return!(!this.jT||this.kT)&&(function(e,t){return e>t.start&&e<t.end}(e,this.jT)||function(e,t,r){return!(e<=0)&&(r.start>t&&r.start-e<=t)}(this.aT.settings.PROACTIVE_GAP_SKIP_DISTANCE_SECONDS,e,this.jT)||function(e,t){return e>t.end&&(0,d.shouldResetCurrentTimeAfterBufferUnderrun)()}(e,this.jT))},e.prototype.uT=function(e){return 5===this.cT&&e===this.eT},e.prototype.vT=function(){if(this.bT&&this.jT){var e=this.aT.renderer.getCurrentTime(!0),t=Math.max(e+.01,this.jT.end);this.aT.logger.debug("Skipping gap proactively from ".concat(e," to ").concat(t)),this.zT(e,t)}},e.prototype.zT=function(e,t){var r=this;this.kT=!0,this.jT=void 0,this.AT(e,t).then((function(){return r.aT.renderer.setCurrentTime(t+v.Ranges.TIME_FUDGE_FACTOR)})).then((function(t){return r.aT.logger.debug("Jumped buffer gap from ".concat(e," to ").concat(t))})).catch((function(n){return r.aT.logger.debug("Failed to skip buffer gap from ".concat(e," to ").concat(t),n)})).finally((function(){r.kT=!1,r.jT=void 0}))},e.prototype.AT=function(e,t){if(!(0,u.getCapabilities)().isTizen)return Promise.resolve();var r=this.BT();if(void 0===r)return Promise.resolve();var n=m(this.aT.renderer.getBufferedRanges(r).sort((function(e,t){return e.start-t.start})),e);return t!==(null==n?void 0:n.start)?(this.aT.logger.debug("Clearing video data from ".concat(e," to ").concat(t," to ensure gap can be skipped")),this.aT.renderer.removeData(r,e,t)):Promise.resolve()},e.prototype.BT=function(){var e;return null===(e=this.aT.segmentInfoService)||void 0===e?void 0:e.getSegmentControllerMimeTypes().find((function(e){return a.MimeTypeHelper.isVideo(e)}))},e.prototype.CT=function(e,t,r){for(var n=v.Ranges.findGaps(e,r),i=0;i<n.length;i++){var o=n.start(i),s=n.end(i);if(t-o<4&&t-o>2)return{start:o,end:s}}},e.prototype.DT=function(){if(!(this.fT>-1)&&this.iT&&this.bT){var e=this.bT.buffered,t=this.bT.currentTime,r=v.Ranges.findNextRange(e,t),n=this.aT.settings.MIN_SIZE_FOR_GAP_SKIPPING;if(0===r.length){var i=this.CT(e,t,n);if(i)return this.aT.logger.debug("Encountered a gap in video from ".concat(i.start," to ").concat(i.end,". Seeking to ").concat(t,"...")),this.dT=0,void this.HT(t);var o=(0,l.findNextRangeForGap)(t,e),s=o.isNearEndOfBufferedRange,u=o.nextRangeStart;return s&&isFinite(u)?(this.aT.logger.debug("Playback stalled because of a very small gap. Seeking to ".concat(u,"...")),this.dT=0,void this.HT(u)):void(this.dT>10&&(this.dT=0,this.ET(t,this.bT)))}if(!function(e,t,r){if(0===r)return!1;var n=v.Ranges.findNextRange(e,t);if(0===n.length)return!1;var i=v.Ranges.findRangeForTime(e,t),o=i.length?i.end(0):t;return n.start(0)-o<r}(e,t,n)){var a=r.start(0)-t;this.aT.logger.debug("setTimer: stopped at: ".concat(t,", setting timer for: ").concat(a,", seeking to: ").concat(r.start(0))),this.fT=window.setTimeout(this.yT.bind(this),a,this.aT.renderer.getCurrentTime(!0))}}},e.prototype.ET=function(e,t){this.aT.logger.debug("currentTime not advancing from ".concat(e," although the video element is neither paused nor seeking")),this.FT(e,t),t.eventHandler.triggerEvent(h.MediaElementEvent.currenttimenotadvancing)},e.prototype.FT=function(e,t){if(e>t.duration&&!(0,u.getCapabilities)().isSafari)this.HT(t.duration);else if(this.aT.settings.QJY_BROWSER_WORKAROUND||(0,u.getCapabilities)().isTizen||(0,c.isWebOs2022OrNewer)())this.HT(e+.01);else{var r=(0,u.getCapabilities)()[i.CapabilityKey.isPlayStation5];this.HT(e,r)}},e.prototype.GT=function(e){if(!this.bT)return!1;for(var t=this.bT.buffered,r=0;r<t.length;r++)if(t.end(r)===e)return!0;return!1},e.prototype.shutdown=function(){var e,t,r,i,o;null===(e=this.bT)||void 0===e||e.removeEventListener(h.MediaElementEvent.waiting,this.qT),null===(t=this.bT)||void 0===t||t.removeEventListener(h.MediaElementEvent.stalled,this.rT),null===(r=this.bT)||void 0===r||r.removeEventListener(h.MediaElementEvent.timeupdate,this.wT),null===(i=this.bT)||void 0===i||i.removeEventListener(h.MediaElementEvent.play,this.play),this.aT.eventHandler.off(n.PlayerEvent.Seek,this.sT);for(var s=0,u=g;s<u.length;s++){var a=u[s];null===(o=this.bT)||void 0===o||o.removeEventListener(a,this.xT)}(0,f.clearIntervalIfDefined)(this.hT),this.xT()},e.prototype.HT=function(e,t){if(void 0===t&&(t=!1),this.bT&&(this.bT.currentTime!==e||t))try{this.bT.currentTime=e}catch(t){this.aT.logger.debug("GapHandler failed to set currentTime on video element to ".concat(e),t)}},e}();function m(e,t){return e.find((function(e){return e.start-v.Ranges.TIME_FUDGE_FACTOR>=t}))}t.GapHandler=p}},function(e){return function(){return e(e.s=21586)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.abr=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player.abr=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[744],{4865:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.BlockBasedRateMeasurementRule=void 0;var r=i(46151),o=i(33436),a=i(70850),s=i(59406),u=1e6,l=function(t){function e(e,i){var n,r,o=t.call(this,e,i)||this,s=e.config;return o.Sdb=e.settings,o.Rdb=i,o.Vdb=16e5,null!=(null===(n=s.adaptation)||void 0===n?void 0:n.maxStartupBitrate)&&(o.Vdb=a.Util.extractBitrateFromString("max",s.adaptation.maxStartupBitrate)),null!=(null===(r=s.adaptation)||void 0===r?void 0:r.startupBitrate)&&(o.Tdb=a.Util.extractBitrateFromString("min",s.adaptation.startupBitrate)),o.Wdb={bytes:0,time:0},o.Udb=[],o}return n(e,t),e.calcRateInBps=function(t,e){return 8*t/e},e.prototype.Xdb=function(t){var i=this.Udb.pop();if((null==i?void 0:i.bytes)===u&&(this.Udb.push(i),i=void 0),i||(i={bytes:0,time:0,rateInBps:0}),i.bytes+t.bytes<=u){var n=i.bytes+t.bytes,r=i.time+t.time;this.Udb.push({bytes:n,time:r,rateInBps:e.calcRateInBps(n,r)})}else{var o=(u-i.bytes)/t.bytes;i.bytes+=t.bytes*o,i.time+=t.time*o,i.rateInBps=e.calcRateInBps(i.bytes,i.time),this.Udb.push(i);for(var a=t.bytes*(1-o),s=t.time*(1-o);a>u;){var l=s/(a/u);this.Udb.push({bytes:u,time:l,rateInBps:e.calcRateInBps(u,l)}),a-=u,s-=l}this.Udb.push({bytes:a,time:s,rateInBps:e.calcRateInBps(a,s)})}},e.prototype.Ydb=function(t){if(t&&!isNaN(t.bytes)){var e=this.Wdb;if(e.bytes===t.bytes&&e.time===t.time)return;this.Wdb=t,this.Xdb(t),this.Udb.length>40&&this.Udb.shift(),this.bdb()}},e.prototype.Zdb=function(t,i){var n,r=-t;null!=i&&(r=-t-i,n=-i);var o=this.Udb.slice(r,n);if(0===o.length)return 0;var a=o.reduce((function(t,e){return{bytes:t.bytes+e.bytes,time:t.time+e.time,rateInBps:t.rateInBps+e.rateInBps}}));return a.rateInBps=e.calcRateInBps(a.bytes,a.time),a.rateInBps},e.prototype.adb=function(){if(null==this.Tdb)return null;this.Vdb=Number.MAX_VALUE;var t=this.Tdb;return t*=1+this.Sdb.RATE_SAFETY_MARGIN_PERCENTAGE/100,t+=8,isNaN(t)?null:(this.context.logger.insane("use startup bitrate from configuration ".concat(t)),{bytes:c(t),time:1})},e.prototype.addSample=function(){if(this.instanceState){var t=(0,r.getMetricsState)(this.instanceState),e=(0,r.getMetricsLastEntry)(t,this.Rdb,o.MetricType.DownloadInformation);if(!e||!e.value||!e.value.bytes){var i=this.adb();if(i&&(e={value:i}),!e||!e.value||!e.value.bytes){e=e||{};var n=this.cdb();n>0&&(e.value={bytes:c(n),time:1})}e&&e.value||(e=(0,r.getMetricsLastEntry)(t,"default",o.MetricType.DownloadInformation));var a=1/0;e&&e.value&&!isNaN(e.value.bytes)&&!isNaN(e.value.time)&&(a=e.value.bytes/e.value.time),a>this.Vdb&&(e.value=e.value||{},e.value.bytes=c(this.Vdb),e.value.time=1)}this.Ydb(e.value)}},e.prototype.getStatus=function(t){0===this.Udb.length&&this.addSample();var e=this.Zdb(t),i=this.Zdb(t,1);return{value:e,result:e>1.1*i?s.Rules.SHOULD_SWITCH_UP:e<.9*i?s.Rules.SHOULD_SWITCH_DOWN:s.Rules.SHOULD_STAY}},e.prototype.bdb=function(){if(this.instanceState){var t=(0,r.getMetricsHistoryFromInstanceState)(this.instanceState,this.Rdb,o.MetricType.DownloadInformation).slice(-3).map((function(t){return Math.round(8*t.value.bytes/t.value.time)}));this.context.storedConfig.set("b",t),this.context.storedConfig.set("b_t",Date.now())}},e.prototype.cdb=function(){var t=this.context.storedConfig.get("b")||[];return Math.round(t.reduce((function(t,e){return t+e}),0)/t.length)||-1},e.prototype.shutdown=function(){},e.prototype.setStartupPhase=function(){},e.prototype.dispose=function(){},e}(s.AdaptationRule);function c(t){return t/8}e.BlockBasedRateMeasurementRule=l},7290:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.WishLogic=void 0;var r=i(44468),o=i(70962),a=i(46151),s=i(33436),u=i(85434),l=i(88844),c=i(11958),d=i(59113),h=i(59406),p=i(70238),f=i(7676),v=i(47577),g=1e-4,b=1e-4,y=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.context=e,n.mimeType=i,n.Hcb=[],n.Icb=[],n.Jcb=0,n.Ocb(),n.Gcb=e.settings.WISH_ABR_PARAMS,n}return n(e,t),Object.defineProperty(e.prototype,"Kcb",{get:function(){var t,e=u.MimeTypeHelper.isVideo(this.mimeType)?r.MediaType.Video:r.MediaType.Audio,i=null!==(t=this.context.internalPlayer.bufferApi.getLevel(r.BufferType.ForwardDuration,e).level)&&void 0!==t?t:0;return i>this.context.bufferSettings.getTargetLevel(r.BufferType.ForwardDuration,e)+this.Jcb?0:i},enumerable:!1,configurable:!0}),e.prototype.Ocb=function(){var t=this.context.settings.WISH_ABR_PARAMS.BITRATE_MODIFIER_FUNCTION_TYPE,e=this.context.settings.WISH_ABR_PARAMS.TARGET_BUFFER_FACTOR,i=this.context.settings.WISH_ABR_PARAMS.TARGET_BITRATE_FACTOR;if(!["log","linear"].includes(t)){var n=o.WishDefaultConfig.BITRATE_MODIFIER_FUNCTION_TYPE;this.context.logger.warn("WISH: invalid bitrate function type: ".concat(t,", falling back to default (").concat(n,")")),this.context.settings.WISH_ABR_PARAMS.BITRATE_MODIFIER_FUNCTION_TYPE=n}if(e>1||e<g){var r=Math.min(Math.max(e,g),1);this.context.logger.warn("WISH: invalid xi value: ".concat(e,", falling back to closest valid value: ").concat(r)),this.context.settings.WISH_ABR_PARAMS.TARGET_BUFFER_FACTOR=r}if(i<b){var a=Math.max(i,b);this.context.logger.warn("WISH: invalid delta value: ".concat(i,", falling back to closest valid value: ").concat(a)),this.context.settings.WISH_ABR_PARAMS.TARGET_BITRATE_FACTOR=a}},e.prototype.getRepresentationForRateMeasurement=function(t){void 0===t&&(t=p.SwitchingAggressiveness.Mid);var e=this.context.bufferSettings.getForwardTargetLevel(),i=this.rateMeasurementRule.getStatus(t,this.Kcb/e),n=this.getCurrentBitrate(i),r=(0,f.adjustRateToSafetyMargin)(n,this.context.settings.RATE_SAFETY_MARGIN_PERCENTAGE);return this.findRepresentationForBitrate(r)},e.prototype.Pcb=function(){var t=this.context.store.getState();return(t?(0,a.getMetricsHistoryFromInstanceState)(t,this.mimeType,s.MetricType.DownloadInformation):[]).filter((function(t){return Boolean(t.value)})).length>2},e.prototype.addSample=function(t){(function(t){return null!=t.segmentDuration})(t)&&(this.rateMeasurementRule.addSample(),this.timeToFirstByteMeasurementRule.addSample(),t.segmentDuration!==this.Jcb&&(this.Jcb=t.segmentDuration,this.Qcb()))},e.prototype.selectRepresentationID=function(t,e){var i;this.updateAvailableRepresentations(e),this.checkStartupPhase({value:this.Kcb,result:h.Rules.SHOULD_STAY});var n=this.Scb(),r=null===(i=n.rep)||void 0===i?void 0:i._internalId,o=n.index;return this.Icb.push(this.Hcb[o]),this.Icb.length>20&&(this.Icb=this.Icb.slice(-10)),this.lastSegmentInfo=t,this.lastRepresentation=n.rep,this.lastRateMeasurement=this.getCurrentBitrate(this.rateMeasurementRule.getStatus()),this.lastDownloadCancelled=!1,this.previousRequestProgress=void 0,r},e.prototype.getCurrentBitrateMeasurement=function(){return this.rateMeasurementRule.getStatus().value},e.prototype.setAdaptationSet=function(t){this.availableRepresentations=t.Representation,this.monitoringMimeType=this.getMonitoringMimeType(),this.lastDownloadCancelled=!1,this.previousRequestProgress=void 0;var e=this.getAvailableRepresentations().map((function(t){return(0,f.toKbps)(t._bandwidth)}));this.Hcb=(0,v.applyQualityFunction)(e,this.Gcb.BITRATE_MODIFIER_FUNCTION_TYPE),this.Qcb()},e.prototype.findRepresentationForBitrate=function(t,e){var i,n=(0,d.findQualityForBitrate)(t,this.getAvailableRepresentations().map((function(t){return{rep:t,bitrate:t._bandwidth}})));return null!==(i=null==n?void 0:n.rep)&&void 0!==i?i:this.getLowestRepresentation()},e.prototype.setStartupPhase=function(){this.startupPhase=!0,(0,l.clearTimeoutIfDefined)(this.startupPhaseTimerID),this.startupPhaseTimerID=void 0},e.prototype.shutdown=function(){var t,e;this.lastRateMeasurement=0,this.lastDownloadCancelled=!1,this.previousRequestProgress=void 0,null===(t=this.rateMeasurementRule)||void 0===t||t.shutdown(),null===(e=this.timeToFirstByteMeasurementRule)||void 0===e||e.shutdown()},e.prototype.dispose=function(){var t,e;this.shutdown(),null===(t=this.rateMeasurementRule)||void 0===t||t.dispose(),null===(e=this.timeToFirstByteMeasurementRule)||void 0===e||e.dispose(),this.lastRepresentation=void 0,this.availableRepresentations=[],this.monitoringMimeType="",this.Hcb=[],this.Jcb=0,this.Icb=[]},e.prototype.Qcb=function(){if((0,v.canUseWishAlgorithm)(this.Hcb,this.Jcb)){var t=this.getAvailableRepresentations().map((function(t){return(0,f.toKbps)(t._bandwidth)})),e=u.MimeTypeHelper.isVideo(this.mimeType)?r.MediaType.Video:r.MediaType.Audio,i=this.context.bufferSettings.getTargetLevel(r.BufferType.ForwardDuration,e);this.Lcb=(0,v.computeAlpha)(this.Gcb,t,this.Hcb,this.Jcb,i),this.Mcb=(0,v.computeBeta)(this.Gcb,this.Lcb,i,this.Jcb),this.Ncb=(0,v.computeGamma)(this.Lcb,this.Mcb)}},e.prototype.Rcb=function(t,e,i,n){var r=(0,v.determineBandwidthCost)(t._bandwidth,n),o=(0,v.determineBufferCost)(r,this.Jcb,this.Kcb),a=(0,v.determineQualityCost)(this.Hcb,e,i);return this.Lcb*r+this.Mcb*o+this.Ncb*a},e.prototype.isStartupBitrateInEffect=function(){var t,e,i=Boolean(null===(t=this.context.config.adaptation)||void 0===t?void 0:t.startupBitrate),n=Boolean(null===(e=this.context.config.adaptation)||void 0===e?void 0:e.maxStartupBitrate);return(i||n)&&!this.Pcb()},e.prototype.Scb=function(){var t=this;if(this.startupPhase&&(this.isStartupBitrateInEffect()||this.Gcb.USE_RATE_BASED_SELECTION_ON_SEEKING)){var e=this.getRepresentationForRateMeasurement(),i=this.getAvailableRepresentations().indexOf(e);return{rep:e,index:-1!==i?i:0}}if(this.Kcb<this.Jcb||!(0,v.canUseWishAlgorithm)(this.Hcb,this.Jcb))return{rep:this.getAvailableRepresentations()[0],index:0};var n=(0,v.getAverageSelectedQuality)(this.Icb,10),r=this.rateMeasurementRule.getStatus(5,.325).value,o=this.getCurrentBitrate(this.rateMeasurementRule.getStatus()),a=Math.min(r,o),s=this.getAvailableRepresentations()[0]._bandwidth,u=Math.max(1.1*r,s),l=this.getAvailableRepresentations().filter((function(t){return t._bandwidth<=u})).map((function(e,i){return{rep:e,index:i,cost:t.Rcb(e,i,n,a)}})).sort((function(t,e){return t.cost-e.cost}));return{rep:l[0].rep,index:l[0].index}},e}(c.CancellableAdaptationLogic);e.WishLogic=y},7676:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.toMbps=e.toKbps=e.findMaximum=e.findMinimum=void 0,e.getMaxStartupBitrateFromConfig=function(t){var e,i=null===(e=t.config)||void 0===e?void 0:e.adaptation;if(!i)return 0;var r=function(t){return t.maxStartupBitrate?n.Util.extractBitrateFromString("max",t.maxStartupBitrate):1/0}(i);return!isNaN(r)&&isFinite(r)?r:0},e.getStartupBitrateFromConfig=function(t){var e,i=null===(e=t.config)||void 0===e?void 0:e.adaptation,r=t.settings;if(!i||!r)return 0;var o=i.startupBitrate||0;if(!o)return 0;var a=function(t,e){var i=n.Util.extractBitrateFromString("min",t);return i*=1+e/100,i+=8}(o,r.RATE_SAFETY_MARGIN_PERCENTAGE);return!isNaN(a)&&isFinite(a)?a:0},e.findExtremum=r,e.hasTotalBytes=function(t){return void 0!==t.totalBytes},e.adjustRateToSafetyMargin=function(t,e){return t*(1-e/100)};var n=i(70850);function r(t,e){return t[t.reduce((function(i,n,r){return e(t[i],t[r])?i:r}),0)]}var o=function(t){return t};e.findMinimum=function(t,e){return void 0===e&&(e=o),r(t,(function(t,i){return e(t)<e(i)}))},e.findMaximum=function(t,e){return void 0===e&&(e=o),r(t,(function(t,i){return e(t)>e(i)}))},e.toKbps=function(t){return t/Math.pow(2,10)},e.toMbps=function(t){return t/Math.pow(2,20)}},11958:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.CancellableAdaptationLogic=void 0;var r=i(80813),o=i(4131),a=i(21281),s=i(46151),u=i(33436),l=i(23068),c=i(81723),d=i(39185),h=i(45199),p=i(17006),f=i(70238),v=i(7676),g=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.shouldDownloadBeCancelled=function(t,e){var i,r,a=null!==(i=t.elapsedTime)&&void 0!==i?i:-1,s=null===(r=n.edb)||void 0===r?void 0:r.isPaused(),u=n.isStartupBitrateInEffect(),l=function(t){var e,i=null!==(e=t.elapsedTime)&&void 0!==e?e:-1;return i<0?0:i-b(t)}(t),c=n.fdb(e),d=(0,o.hasLoadedData)(t),h=d?l>n.context.settings.MIN_EFFECTIVE_SEGMENT_DOWNLOAD_TIME:a>n.context.settings.MIN_EFFECTIVE_SEGMENT_DOWNLOAD_TIME;return!(s||u||c||!h)&&n.rdb(t,l,d,a)},n.monitoringMimeType=n.getMonitoringMimeType(),n.timeToFirstByteMeasurementRule=new h.TimeToFirstByteMeasurementRule(n.context,n.monitoringMimeType),n.rateMeasurementRule=new d.SegmentBasedRateMeasurementRule(n.context,n.monitoringMimeType),n}return n(e,t),Object.defineProperty(e.prototype,"ddb",{get:function(){return this.context.serviceManager.get(r.ServiceName.ManifestService,this.context.sourceContext.sourceIdentifier)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"edb",{get:function(){return this.context.serviceManager.get(r.ServiceName.PlayerStateService)},enumerable:!1,configurable:!0}),e.prototype.isStartupBitrateInEffect=function(){var t,e=this.context.store.getState(),i=e?(0,s.getMetricsHistoryFromInstanceState)(e,this.mimeType,u.MetricType.DownloadInformation):[],n=Boolean(null===(t=this.context.config.adaptation)||void 0===t?void 0:t.startupBitrate),r=i.filter((function(t){return Boolean(t.value)})).length>0;return n&&!r},e.prototype.fdb=function(t){return!!t&&this.getLowestRepresentation()._internalId.equals(t)},e.prototype.gdb=function(){var t,e,i=[null===(t=this.context.internalPlayer)||void 0===t?void 0:t.getAudioBufferLength(),null===(e=this.context.internalPlayer)||void 0===e?void 0:e.getVideoBufferLength()].filter(l.isDefined);return Math.min.apply(Math,i)},e.prototype.estimateTimeToFirstByte=function(t){var e;switch(void 0===t&&(t=0),e=0!==t?this.timeToFirstByteMeasurementRule.estimateStatus(t,5,.2).value:this.timeToFirstByteMeasurementRule.getStatus(5,.2).value,function(t){var e,i;return null!==(i=null===(e=t.adaptation)||void 0===e?void 0:e.rttEstimationMethod)&&void 0!==i?i:a.RttEstimationMethod.WeightedAverage}(this.context.config)){case a.RttEstimationMethod.Median:return e.median;case a.RttEstimationMethod.WeightedAverage:default:return e.standardDeviation>e.mean?e.mean+e.standardDeviation:e.weightedAverage}},e.prototype.hdb=function(t,e,i,n,r,o){var a,l,c,d,h,f,v,g=n*e/i+r,b=null!==(l=null===(a=this.ddb)||void 0===a?void 0:a.isManifestFetchRequired(t))&&void 0!==l&&l,m=!this.idb(t),_=null!==(c=null==o?void 0:o.hlsDependentSegments)&&void 0!==c&&c,R=null!==(h=null===(d=this.ddb)||void 0===d?void 0:d.getRepresentationById(t))&&void 0!==h?h:null,S=Boolean(this.lastRepresentation)&&null!==(null===(f=this.lastRepresentation)||void 0===f?void 0:f._id)&&(null===(v=this.lastRepresentation)||void 0===v?void 0:v.arrayIndex)!==(null==R?void 0:R.arrayIndex),T=this.context.store.getState(),w=g;if(w+=function(t,e,i){var n=t?(0,s.getMetricsState)(t):{};return y((0,s.getMetricsHistory)(n,e,u.MetricType.DecryptionTime),i)+y((0,s.getMetricsHistory)(n,e,u.MetricType.TransmuxingTime),i)}(T,this.mimeType,t),_&&S&&(w*=2),m&&(w+=r),b){var M=function(t){var e=t?(0,s.getMetricsState)(t):{};return function(t){var e=(0,s.getMetricsHistory)(t,"default",u.MetricType.DownloadInformation).slice(-3).map((function(t){return t.value.time}));return(0,p.calculateExponentialWeightedAverage)(e,.8)}(e)+function(t){var e=(0,s.getMetricsHistory)(t,"default",u.MetricType.ProcessingTime).slice(-3).map((function(t){return t.value}));return(0,p.calculateExponentialWeightedAverage)(e,.8)}(e)}(T);w+=Math.max(M,r)}return w},e.prototype.isDownloadFeasible=function(t,e,i,n,r,o,a){var s=1-this.context.settings.DOWNLOAD_DURATION_SAFETY_MARGIN,u=this.context.settings.MAXIMUM_DOWNLOAD_DURATION_MULTIPLIER-s,l=this.context.bufferSettings.getForwardTargetLevel(),c=n*(s+Math.min(a,l)*u/l);return this.hdb(t,n,e,i,o,{hlsDependentSegments:r})<=c},e.prototype.idb=function(t){var e,i,n=this.context.store.getState(),r=n?(0,s.getMetricsHistoryFromInstanceState)(n,this.mimeType,u.MetricType.CachedInitSegments):[];return 0===r.length?null!==(i=null===(e=this.ddb)||void 0===e?void 0:e.hasSelfInitialisingSegments())&&void 0!==i&&i:r.some((function(e){var i=e.hasOwnProperty("value")&&e.value.hasOwnProperty("internalRepId")?e.value.internalRepId:null;return null!==i&&i.equals(t)}))},e.prototype.jdb=function(t,e,i){var n=this;void 0===i&&(i=this.estimateTimeToFirstByte());var r=this.availableRepresentations.filter((function(t){var e;return n.lastRepresentation&&!t._internalId.equals(null===(e=n.lastRepresentation)||void 0===e?void 0:e._internalId)}));return Math.min.apply(Math,r.map((function(r){var o;return n.hdb(r._internalId,null!==(o=n.lastSegmentInfo?n.lastSegmentInfo.segmentDuration:e)&&void 0!==o?o:0,t,r._bandwidth,i,n.lastSegmentInfo)})))},e.prototype.kdb=function(t){var e,i,n,r,o,a,s=null!==(e=t.elapsedTime)&&void 0!==e?e:0,u=(null===(i=this.previousRequestProgress)||void 0===i?void 0:i.url)===t.url?(t.loadedBytes-(null!==(r=null===(n=this.previousRequestProgress)||void 0===n?void 0:n.loadedBytes)&&void 0!==r?r:0))/(s-(null!==(a=null===(o=this.previousRequestProgress)||void 0===o?void 0:o.elapsedTime)&&void 0!==a?a:0)):-1;return this.previousRequestProgress=t,u},e.prototype.ldb=function(t,e){var i,n=e?b(t):null!==(i=t.elapsedTime)&&void 0!==i?i:0;return this.estimateTimeToFirstByte(n)},e.prototype.mdb=function(t){return void 0===t&&(t=4),this.lastRepresentation?this.lastRepresentation._bandwidth/8*t*1.2:0},e.prototype.ndb=function(t,e){var i=(0,o.hasLoadedData)(t),n=i?this.kdb(t):0,r=i&&(0,v.hasTotalBytes)(t)?t.totalBytes-t.loadedBytes:this.mdb(t.segmentDuration);return Math.min(r/(e/8),n>0?r/n:1/0)},e.prototype.odb=function(t,e,i){if((0,o.hasLoadedData)(t))return t.loadedBytes/e*8;var n=this.context.bufferSettings.getForwardTargetLevel(),r=this.rateMeasurementRule.getStatus(f.SwitchingAggressiveness.Mid,i/n);return this.getCurrentBitrate(r)},e.prototype.pdb=function(t,e,i,n,r){var o=this.ndb(n,i);return o>e&&o>r&&e<=r+t},e.prototype.qdb=function(t,e,i,n){var r,o;if(null!==(o=null===(r=this.edb)||void 0===r?void 0:r.isPlay())&&void 0!==o&&o)return!1;var a=function(t){return t.getStatus(5,.2).value.mean}(this.timeToFirstByteMeasurementRule);return n>Math.max(t,3*a)&&e<=i+t},e.prototype.rdb=function(t,e,i,n){var r,o,a,s=this.gdb(),u=this.odb(t,e,s),l=this.ldb(t,i),c=null!==(a=null!==(r=t.segmentDuration)&&void 0!==r?r:null===(o=this.lastSegmentInfo)||void 0===o?void 0:o.segmentDuration)&&void 0!==a?a:0,d=this.jdb(u,c,l);if(i?this.pdb(c,s,u,t,d):this.qdb(c,s,d,n)){var h=(0,v.hasTotalBytes)(t)?(t.loadedBytes/t.totalBytes*100).toFixed(1):void 0;return this.context.logger.debug("Cancelling download after ".concat(n.toFixed(2),"s, bw: ").concat((0,v.toKbps)(u).toFixed(2),"kbps, buffer: ").concat(s.toFixed(2),"s, ").concat(i?"".concat(h,"% progress"):"headers not received")),this.lastDownloadCancelled=!0,this.lastRateMeasurement=u,!0}return!1},e}(c.BaseAdaptationLogic);function b(t){var e,i,n,r,o=null!==(i=null===(e=t.responseTiming)||void 0===e?void 0:e.openedTimestamp)&&void 0!==i?i:-1,a=null!==(r=null===(n=t.responseTiming)||void 0===n?void 0:n.headersReceivedTimestamp)&&void 0!==r?r:-1;return o<0||a<0?0:a-o}function y(t,e){var i=t.filter((function(t){return t.value.representationId.equals(e)})).slice(-3).map((function(t){return t.value.time}));return(0,p.calculateExponentialWeightedAverage)(i,.8)}e.CancellableAdaptationLogic=g},17006:function(t,e){function i(t){return t.length>0?t.reduce((function(t,e){return t+e}),0)/t.length:0}Object.defineProperty(e,"__esModule",{value:!0}),e.calculateExponentialWeightedAverage=void 0,e.calculateMean=i,e.calculateStandardDeviation=function(t,e){if(void 0===e&&(e=i(t)),t.length<2)return 0;var n=t.reduce((function(t,i){return t+Math.pow(i-e,2)}),0),r=1/(t.length-1)*n;return Math.sqrt(r)},e.calculateMedian=function(t){var e=t.slice(0).sort((function(t,e){return t-e}));return 0===e.length?0:e.length%2==1?e[Math.floor(e.length/2)]:.5*(e[e.length/2-1]+e[e.length/2])},e.calculateExponentialWeightedAverage=function(t,i,n){return void 0===n&&(n=t.length-1),0===t.length||n<0?0:0===n||0===i?t[n]:i*t[n]+(1-i)*(0,e.calculateExponentialWeightedAverage)(t,i,n-1)}},19119:function(t,e){function i(t){return t&&t.clientWidth&&t.clientHeight?{width:t.clientWidth*devicePixelRatio,height:t.clientHeight*devicePixelRatio}:null}Object.defineProperty(e,"__esModule",{value:!0}),e.AdaptToPlayerResolution=function(t,e,n){var r,o=function(t,e){var n=e.getVideoElement();if(!n)return null;var r=n.parentElement,o=r&&r.querySelector("#bitmovinplayer-vr-canvas");return t?{width:screen.width*devicePixelRatio,height:screen.height*devicePixelRatio}:i(n)||o&&i(o)||r&&i(r)}(n,t);if(!o)return e;var a=null!==(r=t.getAvailableVideoQualities())&&void 0!==r?r:[],s=a.find((function(t){return t.id===e}));if(!s)return e;var u=function(t,e,i){return t.filter((function(t){var n=t.bitrate<=e,r=function(t,e){var i=e.width/e.height;return t.width/t.height<i?e.width>=t.width:e.height>=t.height}(i,t);return n&&r}))}(a,s.bitrate,o);return 0===u.length?e:u[function(t){var e=t.findIndex((function(e){return e.width>t[0].width&&e.height>t[0].height}))-1;return Math.max(0,e)}(u)].id}},20066:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.BufferFillRateRule=void 0;var r=i(89927),o=i(88844),a=i(59406),s=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.Ldb=e.bufferSettings,n.Mdb=!0,n.Odb=[],n}return n(e,t),e.prototype.Pdb=function(){if(0===this.Odb.length)return NaN;var t=this.Odb[this.Odb.length-1],e=t.bufferTargetLevel;if(this.Mdb){var i=t.bufferLevel,n=this.Odb[this.Odb.length-2],r=0;n&&(r=n.bufferLevel),i>=t.bufferTargetLevel||r>i?(this.logger.insane("startup phase is over"),this.Mdb=!1):e=i}return e},e.prototype.Qdb=function(t){isNaN(t)&&(t=this.Ldb.getForwardTargetLevel());for(var e,i=Date.now()-(0,r.toMilliSeconds)(t),n=0,o=0,a=0;a<this.Odb.length;a++)(e=this.Odb[a]).timestamp>=i&&(n+=e.bufferLevel-o),o=e.bufferLevel;return((n/=this.Pdb())<-1||n>1)&&this.logger.insane("buffer is changing too fast, fill rate should be between -1 and 1, but is "+n),isNaN(n)?1:n},e.prototype.addSample=function(t){var e=this;this.Ndb||(this.Ndb=window.setTimeout((function(){e.logger.insane("buffer fill rate startup phase is over (timeout)"),e.Mdb=!1}),(0,r.toMilliSeconds)(this.Ldb.getForwardTargetLevel()))),this.Odb.push(t),t.timestamp-this.Odb[0].timestamp>6e4&&this.Odb.shift()},e.prototype.getStatus=function(t){var e=this.Qdb(t),i=a.Rules.SHOULD_STAY;return e>.7?i=a.Rules.SHOULD_SWITCH_UP:e<-.5&&(i=a.Rules.SHOULD_SWITCH_DOWN),{value:e,result:i}},e.prototype.setStartupPhase=function(){this.Mdb=!0},e.prototype.shutdown=function(){(0,o.clearTimeoutIfDefined)(this.Ndb),this.Ndb=void 0},e.prototype.dispose=function(){this.shutdown(),this.Odb=[]},e}(a.AdaptationRule);e.BufferFillRateRule=s},24296:function(t,e,i){var n=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.LowLatencyAbr=void 0;var r=i(80813),o=i(46151),a=i(33436),s=i(59113),u=i(28922),l=i(7676),c=i(82873),d=i(50265),h=i(52902),p=function(){function t(t,e){this.context=t,this.mimeType=e,this.Ucb=new d.RateLimitedCancelCheck}return Object.defineProperty(t.prototype,"Vcb",{get:function(){return this.context.serviceManager.get(r.ServiceName.ManifestService,this.context.sourceContext.sourceIdentifier)},enumerable:!1,configurable:!0}),t.prototype.Wcb=function(t){for(var e,i=[],r=1;r<arguments.length;r++)i[r-1]=arguments[r];this.context.logger&&(e=this.context.logger).debug.apply(e,n(["[".concat("LL-ABR","][").concat(this.mimeType,"] ").concat(t)],i,!1))},t.prototype.Xcb=function(){var t=(0,o.getMetricsHistoryFromInstanceState)(this.context.store.getState(),this.mimeType,a.MetricType.ChunkedDownloadInformation),e=this.Ycb();return(0,c.getBandwidth)(t.slice(-e))},t.prototype.Ycb=function(){var t,e=null===(t=this.context.config.adaptation)||void 0===t?void 0:t.qualityStabilityBalance,i=Math.ceil(20*e);return Math.max(1,i)},t.prototype.Zcb=function(t){var e,i,n,r,o=f(null!==(n=null===(i=null===(e=this.Vcb)||void 0===e?void 0:e.getAdaptationSet(t))||void 0===i?void 0:i.Representation)&&void 0!==n?n:[]);return null!==(r=null==o?void 0:o._internalId.equals(t))&&void 0!==r&&r},t.prototype.getCurrentBitrateMeasurement=function(){var t,e;return null!==(e=null===(t=this.Xcb())||void 0===t?void 0:t.rateBps)&&void 0!==e?e:0},t.prototype.selectRepresentationID=function(t,e){var i,n,r,s;if(e&&0!==e.length){var l,d=this.Xcb();if(this.Wcb("current bandwidth",d),!d)return null===(i=f(e))||void 0===i?void 0:i._internalId;if(d.type===c.BandwidthValueType.Accurate&&(l=null!==(n=this.findRepresentationForBitrate(d.rateBps,e))&&void 0!==n?n:void 0,this.Wcb("accurate value, selecting ",null==l?void 0:l._bandwidth)),d.type===c.BandwidthValueType.Estimated){var h=null===(r=(0,o.getMetricsLastEntry)((0,o.getMetricsState)(this.context.store.getState()),this.mimeType,a.MetricType.ChunkedDownloadInformation).value)||void 0===r?void 0:r.representationBitrate;void 0!==h&&(l=(0,u.findNextHigherBitrateRepresentation)(e,h),this.Wcb("estimated value, currently on ".concat(h,", selecting ").concat(null==l?void 0:l._bandwidth)))}return l?l._internalId:null===(s=f(e))||void 0===s?void 0:s._internalId}},t.prototype.findRepresentationForBitrate=function(t,e){var i,n;if(!e||e.length<1)return null;var r=null===(i=(0,s.findQualityForBitrate)(t,e.map((function(t){return{rep:t,bitrate:t._bandwidth}}))))||void 0===i?void 0:i.rep;return null!==(n=null!=r?r:f(e))&&void 0!==n?n:null},t.prototype.shouldDownloadBeCancelled=function(t,e){if(this.Ucb.shouldExecuteCancelCheck(t)){if(this.Zcb(e))return!1;var i=(0,h.shouldCancelDownload)(t);return i&&this.Wcb("Cancelling segment download, current download rate is significantly lower than segment bitrate"),i}return!1},t.prototype.addSample=function(t){},t.prototype.setAdaptationSet=function(t){},t.prototype.setStartupPhase=function(){},t.prototype.shutdown=function(){},t.prototype.dispose=function(){this.shutdown()},t}();function f(t){return(0,l.findMinimum)(null!=t?t:[],(function(t){return t._bandwidth}))}e.LowLatencyAbr=p},28922:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.findNextHigherBitrateRepresentation=function(t,e){for(var i,n,r=0,o=t;r<o.length;r++){var a=o[r];a._bandwidth>e&&(void 0===i||a._bandwidth<i._bandwidth)&&(i=a),(void 0===n||a._bandwidth>n._bandwidth)&&(n=a)}return null!=i?i:n}},39185:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.SegmentBasedRateMeasurementRule=void 0;var r=i(46151),o=i(33436),a=i(89927),s=i(70850),u=i(17006),l=i(7676),c=i(59406),d=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.Yeb=-1,n.Zeb=.1,n.aeb=!0,n}return n(e,t),e.getBitrateFromPerformanceAPI=function(){if(!performance||"function"!=typeof performance.getEntriesByName)return 0;var t=0,e=0;return performance.getEntriesByType("resource").filter(h).forEach((function(i){t+=8*i.transferSize,e+=(0,a.toSeconds)(i.duration-(i.responseStart-i.requestStart))})),t>0&&e>0?t/e:0},e.prototype.beb=function(t,e,i){var n;void 0===e&&(e=1),void 0===i&&(i=0);var r=-t-i;return n=0!==i?this.samples.slice(r,-i):this.samples.slice(r),(0,u.calculateExponentialWeightedAverage)(n,1-e)},e.validateDownloadInfo=function(t){if(Boolean(t)&&Boolean(t.value)){var e=Boolean(t.value.bytes),i=!isNaN(t.value.time),n=void 0!==t.value.timeToFirstByte&&!isNaN(t.value.timeToFirstByte);return e&&i&&n}return!1},e.prototype.ceb=function(t){if(!this.instanceState)return 0;var i=(0,r.getMetricsLastEntry)((0,r.getMetricsState)(this.instanceState),t,o.MetricType.DownloadInformation),n=e.validateDownloadInfo(i),a=n&&this.Yeb<i.time;return a&&isFinite(i.time)&&(this.Yeb=i.time),n&&a?p(i,this.context.settings.MAX_ALLOWED_BANDWIDTH_ESTIMATION):n&&!a?-1:0},e.prototype.deb=function(){var t=[],i=this.feb();i>0&&t.push(i);var n=this.ceb("default");n>0&&t.push(n);var r=Math.min.apply(Math,t);return r>0&&isFinite(r)?r:e.getBitrateFromPerformanceAPI()},e.prototype.addSample=function(){var t=this.ceb(this.mimeType),e=0;this.aeb&&(e=function(t,e){var i=(0,l.getStartupBitrateFromConfig)(t),n=(0,l.getMaxStartupBitrateFromConfig)(t);return n=e>0?Math.min(n,e):n,i||n||0}(this.context,t),this.aeb=!1),0===(e=e||t||0)&&(e=this.deb()),e>0&&(this.samples.push(e),this.samples.length>this.maxHistorySize&&this.samples.splice(0,this.samples.length-this.maxHistorySize)),t>0&&this.eeb()},e.prototype.getStatus=function(t,e){void 0===t&&(t=1),void 0===e&&(e=1),0===this.samples.length&&this.addSample();var i=this.beb(t,e),n=this.beb(t,e,1);return{value:i,result:i>n*(1+this.Zeb)?c.Rules.SHOULD_SWITCH_UP:i<n*(1-this.Zeb)?c.Rules.SHOULD_SWITCH_DOWN:c.Rules.SHOULD_STAY}},e.prototype.eeb=function(){if(this.instanceState){var t=(0,r.getMetricsHistoryFromInstanceState)(this.instanceState,this.mimeType,o.MetricType.DownloadInformation).filter(e.validateDownloadInfo).slice(-3).map((function(t){return p(t)}));this.context.storedConfig.set("b",t),this.context.storedConfig.set("b_t",Date.now())}},e.prototype.feb=function(){var t=this,e=(this.context.storedConfig.get("b")||[]).map((function(e){return f(e,t.context.settings.MAX_ALLOWED_BANDWIDTH_ESTIMATION)}));return Math.round(e.reduce((function(t,e){return t+e}),0)/e.length)||0},e.prototype.shutdown=function(){},e.prototype.setStartupPhase=function(){},e.prototype.dispose=function(){},e}(c.AdaptationRule);function h(t){return t.transferSize>0&&!/^https?:\/\/localhost(:\d+)?(\/|$)/.test(t.name)}function p(t,e){var i;void 0===e&&(e=1/0);var n=t.value.time-(null!==(i=t.value.timeToFirstByte)&&void 0!==i?i:0);return f(8*t.value.bytes/n,e)}function f(t,e){var i=s.Util.extractBitrateFromString("max",e);return Math.min(t,i)}e.SegmentBasedRateMeasurementRule=d},39201:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.BufferLogic=void 0;var n=i(85434),r=i(96533),o=function(){function t(t,e,i,r){this.context=t,this.mimeType=e,this.minSelectableBitrate=i,this.maxSelectableBitrate=r,this.ucb=[],this.qcb=n.MimeTypeHelper.getMediaType(this.mimeType),this.tcb={timestamp:Date.now(),bufferLevel:0,bufferTargetLevel:0}}return t.prototype.vcb=function(t){t&&(this.ucb=t)},t.prototype.wcb=function(){return(0,r.findLowestPossibleBandwidthFromRepresentations)(this.ucb,this.minSelectableBitrate)},t.prototype.xcb=function(){var t;return null===(t=this.findRepresentationForBitrate(this.maxSelectableBitrate))||void 0===t?void 0:t._bandwidth},t.prototype.ycb=function(){return this.context.bufferSettings.getForwardTargetLevel(this.qcb)},t.prototype.zcb=function(){var t=this.wcb(),e=this.xcb();return this.scb=this.ycb(),function(t,e,i){var n=[];0===e&&(e=t);var r=2*Math.floor(.1*i),o=8*Math.floor(.1*i);o<=r&&(o=Math.floor(.9*i)),r<=1&&(r=1);for(var a=(e-t)/(o-r),s=t-a*r,u=0;u<r;u++)n[u]=t;for(u=r;u<o;u++)n[u]=Math.floor(a*u+s);for(u=o;u<=i;u++)n[u]=e;return n}(t,e||t,this.scb)},t.prototype.Acb=function(){var t=this.ycb();this.scb!==t&&(this.rcb=this.zcb())},t.prototype.findRepresentationForBitrate=function(t,e){return this.vcb(e),(0,r.getMatchingRepresentationByBandwidth)(this.ucb,t)},t.prototype.Bcb=function(){var t,e=this.ycb(),i=this.tcb.bufferLevel;return(i=Math.floor(i))>e&&(i=e),t=this.rcb.hasOwnProperty(i)?this.rcb[i]:this.rcb[0],this.findRepresentationForBitrate(t)},t.prototype.selectRepresentationID=function(t,e){this.vcb(e);var i=this.Bcb();return this.Acb(),i._internalId},t.prototype.setAdaptationSet=function(t){this.vcb(t.Representation),this.rcb=this.zcb()},t.prototype.shouldDownloadBeCancelled=function(){return!1},t.prototype.setStartupPhase=function(){},t.prototype.shutdown=function(){},t.prototype.addSample=function(t){this.tcb=t},t.prototype.dispose=function(){this.rcb=[]},t.prototype.getCurrentBitrateMeasurement=function(){return 0},t}();e.BufferLogic=o},43008:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasBitrate=function(t){return null!=t.bitrate},e.hasBitrateBounds=function(t){return null!=t.minBitrate&&null!=t.maxBitrate}},43829:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadRateRule=void 0;var r=i(89927),o=i(59406),a=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.sdb=[],n}return n(e,t),e.prototype.tdb=function(t){void 0===t&&(t=this.context.bufferSettings.getForwardTargetLevel());var e=Date.now()-(0,r.toMilliSeconds)(t),i=this.sdb.filter((function(t){return t.timestamp>=e}));if(0===i.length)return 1;var n=0;return i.forEach((function(t,e){var o=i[e-1],a=t.segmentDuration,s=a/8,u=Math.min(t.bufferLevel/t.bufferTargetLevel,1),l=Math.max(t.segmentDownloadDuration,s),c=u*(a/l)+a/(o?Math.max(t.timestamp-o.timestamp,s):(0,r.toMilliSeconds)(Math.max(a,l)))*(1-u);n=t.downloadCancelled?n-c:n+c})),n/i.length},e.prototype.addSample=function(t){(function(t){return null!=t.segmentDuration&&null!=t.segmentDownloadDuration})(t)&&(this.sdb.push(t),t.timestamp-this.sdb[0].timestamp>6e4&&this.sdb.shift())},e.prototype.getStatus=function(t,e){var i=this.tdb(t),n=o.Rules.SHOULD_STAY;return i>1.7?n=o.Rules.SHOULD_SWITCH_UP:i<.5&&(n=o.Rules.SHOULD_SWITCH_DOWN),{value:i,result:n}},e.prototype.setStartupPhase=function(){},e.prototype.shutdown=function(){},e.prototype.dispose=function(){this.shutdown(),this.sdb=[]},e}(o.AdaptationRule);e.DownloadRateRule=a},45199:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var n,r=0,o=e.length;r<o;r++)!n&&r in e||(n||(n=Array.prototype.slice.call(e,0,r)),n[r]=e[r]);return t.concat(n||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.TimeToFirstByteMeasurementRule=void 0;var o=i(46151),a=i(33436),s=i(17006),u=i(59406),l=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.geb=-1,n}return n(e,t),e.prototype.heb=function(t){if(!this.instanceState)return 0;var e=(0,o.getMetricsLastEntry)((0,o.getMetricsState)(this.instanceState),t,a.MetricType.DownloadInformation),i=Boolean(e)&&Boolean(e.value),n=i&&void 0!==e.value.timeToFirstByte&&!isNaN(e.value.timeToFirstByte),r=i&&this.geb<e.time;return r&&isFinite(e.time)&&(this.geb=e.time),n&&r?e.value.timeToFirstByte:n&&!r?-1:0},e.prototype.addSample=function(){var t=this.heb(this.mimeType),e=this.heb("default"),i=t||e||0;if(i>0)for(this.samples.push(i);this.samples.length>this.maxHistorySize;)this.samples.shift()},e.prototype.ieb=function(t){var e=-t;return t>0?this.samples.slice(e):[]},e.prototype.jeb=function(t,e){var i=(0,s.calculateMean)(t),n=(0,s.calculateExponentialWeightedAverage)(t,e),r=(0,s.calculateStandardDeviation)(t,i);return{value:{median:(0,s.calculateMedian)(t),mean:i,weightedAverage:n,standardDeviation:r},result:u.Rules.SHOULD_STAY}},e.prototype.getStatus=function(t,e){return void 0===t&&(t=1),void 0===e&&(e=1),this.jeb(this.ieb(t),e)},e.prototype.estimateStatus=function(t,e,i){void 0===e&&(e=1),void 0===i&&(i=1);var n=r(r([],this.ieb(e-1),!0),[t],!1);return this.jeb(n,i)},e.prototype.setStartupPhase=function(){},e.prototype.shutdown=function(){},e.prototype.dispose=function(){},e}(u.AdaptationRule);e.TimeToFirstByteMeasurementRule=l},47577:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.applyQualityFunction=function(t,e){switch(e){case"linear":var i=t[t.length-1];return t.map((function(t){return function(t,e){return t/e}(t,i)}));case"log":var n=t[0];return t.map((function(t){return function(t,e){return Math.log(t/e)}(t,n)}))}},e.computeAlpha=function(t,e,i,n,r){switch(t.BITRATE_MODIFIER_FUNCTION_TYPE){case"linear":return function(t,e,i,n){var r=t.TARGET_BITRATE_FACTOR,o=t.TARGET_BUFFER_FACTOR,a=i,s=e[0],u=e[e.length-2];return 1/(1+(o*n-a)/i+Math.exp(3-2*s-u)/r)}(t,i,n,r);case"log":return function(t,e,i,n){var r=t.TARGET_BITRATE_FACTOR,o=t.TARGET_BUFFER_FACTOR,a=i,s=e[0],u=e[e.length-1];return 1/(1+(o*n-a)/i+2*u*u/(r*s*e[e.length-2]))}(t,e,n,r)}},e.computeBeta=function(t,e,i,n){return e*((t.TARGET_BUFFER_FACTOR*i-n)/n)},e.computeGamma=function(t,e){return 1-t-e},e.determineBandwidthCost=function(t,e){return e?t/e:1},e.determineBufferCost=function(t,e,i){return i<=e?1/0:t*(e/(i-e))},e.determineQualityCost=function(t,e,i){var n=t[t.length-1],r=t[0],o=t[e];return Math.exp(n+i-2*o)/Math.exp(2*n-2*r)},e.getAverageSelectedQuality=function(t,e){if(0===t.length)return 0;var i=t.slice(-e);return i.reduce((function(t,e){return t+e}))/i.length},e.canUseWishAlgorithm=function(t,e){return!(t.length<=1||!e)}},48968:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.BufferFillRateLogic=void 0;var r=i(46151),o=i(33436),a=i(88844),s=i(81723),u=i(4865),l=i(20066),c=i(64463),d=i(70238),h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.Ybb={},e.Zbb=0,e.shouldDownloadBeCancelled=function(t,i){var n,r;return 0!==(null===(n=e.lastRepresentation)||void 0===n?void 0:n.arrayIndex)&&e.fbb()._id!==(null===(r=e.lastRepresentation)||void 0===r?void 0:r._id)&&(e.lastDownloadCancelled=!0,!0)},e}return n(e,t),e.prototype.getRepresentationForRateMeasurement=function(t){void 0===t&&(t=d.SwitchingAggressiveness.Mid);var e=this.Ybb.rateMeasurement.getStatus(t),i=this.context.settings.RATE_SAFETY_MARGIN_PERCENTAGE/100,n=e.value*(1-i);return this.findRepresentationForBitrate(n)},e.prototype.addSample=function(t){Object.values(this.Ybb).forEach((function(e){return e.addSample(t)}))},e.prototype.bbb=function(t){var e=this.switchDown(d.SwitchingAggressiveness.VeryHigh);return this.context.logger.insane("connection dropped more than half, use aggressive adaptation [last="+this.lastRateMeasurement/1024+"kbps, current="+t/1024+"], using "+e._id),e},e.calcEstimatedDownloadDuration=function(t,e,i,n){var r=parseFloat((i*t/e).toFixed(2));return n&&(r*=2),1.1*r},e.prototype.cbb=function(t,i,n,r,o){var a=e.calcEstimatedDownloadDuration(n,t,i,o);return a<r||a<=n},e.prototype.dbb=function(t,e,i,n){var r,o,a,s,u=null==t?void 0:t.hlsDependentSegments;if(u&&null!==(null===(r=this.lastRepresentation)||void 0===r?void 0:r._id)&&(null===(o=this.lastRepresentation)||void 0===o?void 0:o.arrayIndex)!==e.arrayIndex){var l=Math.min.apply(null,this.availableRepresentations.map((function(t){return Number(t._bandwidth)}))),c=Number(e._bandwidth);if(!(isFinite(c)&&c===l||this.cbb(i,e._bandwidth,t.segmentDuration,n,u))){for(var d=!1,h=null!==(a=e.arrayIndex)&&void 0!==a?a:-1;h>=0;h--){var p=this.availableRepresentations[h];if(this.cbb(i,p._bandwidth,t.segmentDuration,n,u)){this.context.logger.insane("fall back to "+p.arrayIndex),e=p,d=!0;break}}d||(this.context.logger.insane("keep old rep for now, not switching from "+(null===(s=this.lastRepresentation)||void 0===s?void 0:s.arrayIndex)+" to "+e.arrayIndex),e=this.useLastRepresentation())}}return e},e.prototype.ebb=function(t){var e,i=this.lastRateMeasurement>0&&2*t<=this.lastRateMeasurement;return i&&(null===(e=this.lastRepresentation)||void 0===e?void 0:e._id)?1.5*t<this.lastRepresentation._bandwidth:i},e.prototype.fbb=function(t){var e,i,n=this.context.store.getState();n&&(i=(0,r.getMetricsState)(n));var a,s=this.Ybb.bufferFillState.getStatus(),u=this.Ybb.bufferFillRate.getStatus(),l=this.Ybb.rateMeasurement.getStatus(1).value,c=null!=i&&this.context.bufferSettings.getForwardTargetLevel()>i.default.bufferLogicActivationThreshold,h=this.ebb(l);this.checkStartupPhase(s),a=h?this.bbb(l):this.getRepresentationForNormalChange(u,s,c);var p=(0,r.getMetricsLastEntry)(null!=i?i:{},this.mimeType,o.MetricType.StalledSeconds).value;return p>this.Zbb?(this.Zbb=p,this.switchDown(d.SwitchingAggressiveness.MidHigh)):(a=this.dbb(t,a,l,s.value),this.lastRateMeasurement=l,this.lastDownloadCancelled&&void 0!==a.arrayIndex&&void 0!==(null===(e=this.lastRepresentation)||void 0===e?void 0:e.arrayIndex)&&a.arrayIndex>=this.lastRepresentation.arrayIndex&&(a=this.getOneRepresentationLower(),this.lastDownloadCancelled=!1),a)},e.prototype.selectRepresentationID=function(t,e){return this.updateAvailableRepresentations(e),this.lastRepresentation=this.fbb(t),this.lastRepresentation._internalId},e.prototype.setAdaptationSet=function(t){this.updateAvailableRepresentations(t.Representation),this.lastRepresentation?this.lastRepresentation=this.findRepresentationForBitrate(this.lastRepresentation._bandwidth):this.lastRepresentation={_id:null,_bandwidth:0,arrayIndex:-1},this.abb=this.getMonitoringMimeType(),this.Ybb.bufferFillRate=this.Ybb.bufferFillRate||new l.BufferFillRateRule(this.context,this.abb),this.Ybb.bufferFillState=this.Ybb.bufferFillState||(0,c.BufferFillStateRule)(this.context,this.abb),this.Ybb.rateMeasurement=this.Ybb.rateMeasurement||new u.BlockBasedRateMeasurementRule(this.context,this.abb)},e.prototype.getCurrentBitrateMeasurement=function(){return this.getCurrentBitrate(this.Ybb.rateMeasurement.getStatus())},e.prototype.getAvailableRepresentations=function(){return this.availableRepresentations},e.prototype.setStartupPhase=function(){this.startupPhase=!0,(0,a.clearTimeoutIfDefined)(this.startupPhaseTimerID),this.startupPhaseTimerID=void 0,Object.values(this.Ybb).forEach((function(t){return t.setStartupPhase()}))},e.prototype.shutdown=function(){(0,a.clearTimeoutIfDefined)(this.startupPhaseTimerID),this.startupPhaseTimerID=void 0,this.lastDownloadCancelled=!1,Object.values(this.Ybb).forEach((function(t){return t.shutdown()}))},e.prototype.dispose=function(){this.shutdown(),Object.values(this.Ybb).forEach((function(t){return t.dispose()})),this.Ybb={},this.lastRepresentation=void 0,this.availableRepresentations=[],this.abb=""},e}(s.BaseAdaptationLogic);e.BufferFillRateLogic=h},49024:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.createAdaptationLogic=function(t,e,i,l){var c=i.minBitrate,d=i.maxBitrate;return void 0===l&&(l=n.AdaptationLogicType.DOWNLOAD_PREDICTION),t.logger.debug("Using adaptation logic ".concat(l)),l===n.AdaptationLogicType.LOW_LATENCY?new s.LowLatencyAbr(t,e):l===n.AdaptationLogicType.WISH?new u.WishLogic(t,e):l===n.AdaptationLogicType.DOWNLOAD_PREDICTION?new a.DownloadPredictionLogic(t,e):l===n.AdaptationLogicType.BUFFER_FILL_RATE?new r.BufferFillRateLogic(t,e):new o.BufferLogic(t,e,c||0,d||1/0)};var n=i(21281),r=i(48968),o=i(39201),a=i(85696),s=i(24296),u=i(7290)},49541:function(t,e,i){e.X=void 0;var n=i(85434),r=i(70850),o=i(89498),a=i(83429),s=function(){function t(t){this.context=t,this.oy=new Map}return t.prototype.py=function(t){if(t){if(!this.oy.has(t)){var e=function(t,e){var i={minBitrate:0,maxBitrate:1/0};return n.MimeTypeHelper.isVideo(t)?(i.minBitrate=Number(e.MIN_SELECTABLE_VIDEO_BITRATE)||i.minBitrate,i.maxBitrate=Number(e.MAX_SELECTABLE_VIDEO_BITRATE)||i.maxBitrate):n.MimeTypeHelper.isAudio(t)&&(i.minBitrate=Number(e.MIN_SELECTABLE_AUDIO_BITRATE)||i.minBitrate,i.maxBitrate=Number(e.MAX_SELECTABLE_AUDIO_BITRATE)||i.maxBitrate),i}(t,this.context.settings);this.oy.set(t,new o.AdaptationHandler(this.context,t,e))}return this.oy.get(t)}},t.prototype.selectRepresentation=function(t,e,i){var n,r;return void 0===e&&(e={}),null!==(r=null===(n=this.py(t))||void 0===n?void 0:n.selectRepresentationID(e,i))&&void 0!==r?r:void 0},t.prototype.isAuto=function(t){var e,i;return null===(i=null===(e=this.py(t))||void 0===e?void 0:e.isAuto())||void 0===i||i},t.prototype.shouldDownloadBeCancelled=function(t,e,i){var n,r;return null!==(r=null===(n=this.py(t))||void 0===n?void 0:n.shouldDownloadBeCancelled(e,i))&&void 0!==r&&r},t.prototype.selectQualityBasedOnBitrateMeasurement=function(t,e){var i=this.qy(),n=null;i||(n=r.Util.generateUniqueId(),i=this.py(n));var o=null==i?void 0:i.selectQualityBasedOnBitrateMeasurement(t,e);return n&&this.release(n),o||t[0]},t.prototype.qy=function(){var t=void 0;return this.oy.forEach((function(e,i){t&&!n.MimeTypeHelper.isVideo(i)||(t=e)})),t},t.prototype.setAdaptationSetId=function(t,e){var i;null===(i=this.py(t))||void 0===i||i.setAdaptationSetId(e)},t.prototype.setFixedRepresentation=function(t,e){var i;null===(i=this.py(t))||void 0===i||i.setFixedRepresentation(e)},t.prototype.getCurrentRepresentationId=function(t){var e,i;return null!==(i=null===(e=this.py(t))||void 0===e?void 0:e.getFixedRepresentation())&&void 0!==i?i:null},t.prototype.setStartupPhase=function(t){var e;null===(e=this.py(t))||void 0===e||e.setStartupPhase()},t.prototype.shutdown=function(t){var e;null===(e=this.py(t))||void 0===e||e.shutdown()},t.prototype.addSample=function(t,e){var i;null===(i=this.py(t))||void 0===i||i.addSample(e)},t.prototype.getUserSelectedRepresentation=function(t,e,i){return(0,a.getUserSelectedRepresentation)(this.context,t,e,i)},t.prototype.release=function(t){var e;null===(e=this.oy.get(t))||void 0===e||e.dispose(),this.oy.delete(t)},t.prototype.dispose=function(){this.oy.forEach((function(t){return t.dispose()})),this.oy.clear()},t}();e.X=s},50265:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.RateLimitedCancelCheck=void 0;var i=function(){function t(){this.udb=0}return t.prototype.shouldExecuteCancelCheck=function(t){if(void 0===t.segmentDuration||void 0===t.elapsedTime)return!1;this.vdb(t)&&(this.udb=0);var e=this.udb+.2;if(t.elapsedTime>=t.segmentDuration*e){var i=t.elapsedTime/t.segmentDuration;return this.udb=.2*Math.floor(i/.2),!0}return!1},t.prototype.vdb=function(t){return t.elapsedTime<this.udb*t.segmentDuration},t}();e.RateLimitedCancelCheck=i},52902:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.shouldCancelDownload=function(t){var e=t.responseTiming;if(!e)return!1;var i=e.progressTimestamp-e.headersReceivedTimestamp,r=(0,n.bytesToBits)(t.loadedBytes)/i,o=1-(0,n.bytesToBits)(t.loadedBytes)/(t.representationBitrate*t.segmentDuration);return r<t.representationBitrate*o};var n=i(33004)},59113:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.findQualityForBitrate=function(t,e){if(e&&0!==e.length)return o.invalidate(),e.reduce((function(e,i){var n=o(i),r=o(e);return r>t||n>t?n>r?e:i:n>r?i:e}))};var n=i(84568),r=i(43008),o=(0,n.memoize)((function(t){return(0,r.hasBitrate)(t)&&t.bitrate>0?t.bitrate:(0,r.hasBitrateBounds)(t)?(t.maxBitrate+t.minBitrate)/2:0}))},59406:function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),e.AdaptationRule=e.Rules=void 0,function(t){t.SHOULD_SWITCH_UP="SWITCH_UP",t.SHOULD_STAY="STAY",t.SHOULD_SWITCH_DOWN="SWITCH_DOWN"}(i||(e.Rules=i={}));var n=function(){function t(t,e){this.context=t,this.samples=[],this.mimeType=e,this.logger=t.logger,this.Settings=t.settings,this.maxHistorySize=this.Settings.DEFAULT_ADAPTATION_RULE_HISTORY_SIZE}return Object.defineProperty(t.prototype,"instanceState",{get:function(){var t;return null===(t=this.context.store)||void 0===t?void 0:t.getState()},enumerable:!1,configurable:!0}),t.prototype.estimateStatus=function(t,e,i){return this.getStatus(e,i)},t}();e.AdaptationRule=n},64463:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.BufferFillStateRule=function(t,e){var i,s,u=!0,l={timestamp:Date.now(),bufferTargetLevel:(null===(i=n.DefaultSettings.TARGET_BUFFER_LEVEL.video)||void 0===i?void 0:i.forwardduration)||0,bufferLevel:0},c=function(){(0,o.clearTimeoutIfDefined)(s),s=void 0};return{addSample:function(e){s||(s=window.setTimeout((function(){u=!1}),(0,r.toMilliSeconds)(t.bufferSettings.getForwardTargetLevel()))),l=e},getStatus:function(){var t;return l.bufferLevel>.8*l.bufferTargetLevel?(t=a.Rules.SHOULD_SWITCH_UP,u&&(u=!1,(0,o.clearTimeoutIfDefined)(s))):t=l.bufferLevel<.4*l.bufferTargetLevel?a.Rules.SHOULD_SWITCH_DOWN:a.Rules.SHOULD_STAY,u&&(t=a.Rules.SHOULD_STAY),{value:l.bufferLevel,result:t}},setStartupPhase:function(){u=!0},shutdown:c,dispose:function(){c()}}};var n=i(70962),r=i(89927),o=i(88844),a=i(59406)},70238:function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),e.SwitchingAggressiveness=void 0,function(t){t[t.Conservative=10]="Conservative",t[t.VeryLow=8]="VeryLow",t[t.Low=7]="Low",t[t.LowMid=6]="LowMid",t[t.Mid=5]="Mid",t[t.MidHigh=4]="MidHigh",t[t.High=3]="High",t[t.VeryHigh=2]="VeryHigh",t[t.Extreme=1]="Extreme"}(i||(e.SwitchingAggressiveness=i={}))},76344:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.AdaptationModuleDefinition=void 0;var n=i(62756),r=i(98154),o=i(7676);e.AdaptationModuleDefinition={name:n.ModuleName.ABR,module:function(){return{AdaptationService:i(49541).X,AdaptToPlayerResolution:i(19119).AdaptToPlayerResolution,AdaptationUtils:o,AdaptationApiFactory:r.AdaptationApiFactory}},dependencies:[n.ModuleName.EngineBitmovin]},e.default=e.AdaptationModuleDefinition},81723:function(t,e,i){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAdaptationLogic=void 0;var r=i(46151),o=i(85434),a=i(89927),s=i(88844),u=i(59113),l=i(59406),c=i(70238),d=i(7676),h=function(){function t(t,e){this.context=t,this.mimeType=e,this.lastRateMeasurement=0,this.availableRepresentations=[],this.startupPhase=!0,this.lastDownloadCancelled=!1}return t.prototype.getMonitoringMimeType=function(){var t=null,e=this.context.store.getState();return e&&(t=Object.keys((0,r.getMetricsState)(e)).find(o.MimeTypeHelper.isVideo)),null!=t?t:this.mimeType},t.prototype.updateAvailableRepresentations=function(t){t&&(this.availableRepresentations=t.map((function(t,e){return n(n({},t),{arrayIndex:e})})))},t.prototype.getAvailableRepresentations=function(){var t,e=this;return this.lastDownloadCancelled&&(null===(t=this.lastRepresentation)||void 0===t?void 0:t._bandwidth)?this.availableRepresentations.filter((function(t){var i=t._bandwidth;return e.lastRepresentation&&i<e.lastRepresentation._bandwidth})):this.availableRepresentations},t.prototype.findRepresentationForBitrate=function(t,e){var i,n;return this.updateAvailableRepresentations(e),null!==(n=null===(i=(0,u.findQualityForBitrate)(t,this.getAvailableRepresentations().map((function(t){return{rep:t,bitrate:Number(t._bandwidth)}}))))||void 0===i?void 0:i.rep)&&void 0!==n?n:this.getLowestRepresentation()},t.prototype.checkStartupPhase=function(t){this.startupPhase&&this.Kdb(t)},t.prototype.getLowestRepresentation=function(){return(0,d.findMinimum)(this.availableRepresentations,(function(t){return t._bandwidth}))},t.prototype.Kdb=function(t){var e=this,i=this.context.bufferSettings.getForwardTargetLevel();this.startupPhaseTimerID||(this.startupPhaseTimerID=window.setTimeout((function(){e.context.logger.insane("startup phase timed out... moving to normal adaptation"),e.startupPhase=!1,e.startupPhaseTimerID=void 0}),(0,a.toMilliSeconds)(i))),t.value>=.5*i&&(this.context.logger.insane("startup is over as steady phase has been reached... moving to normal adaptation"),(0,s.clearTimeoutIfDefined)(this.startupPhaseTimerID),this.startupPhase=!1,this.startupPhaseTimerID=void 0)},t.prototype.getRepresentationForNormalChange=function(t,e,i){return this.startupPhase||!i?this.getRepresentationForRateMeasurement(c.SwitchingAggressiveness.Mid):this.getRepresentationToSwitchTo(e.result,t.result)},t.prototype.getCurrentBitrate=function(t){return this.lastDownloadCancelled?this.lastRateMeasurement:t.value},t.prototype.getRepresentationToSwitchTo=function(t,e){if(this.lastDownloadCancelled)return this.switchDown(c.SwitchingAggressiveness.VeryHigh);switch(t){case l.Rules.SHOULD_SWITCH_UP:return this.ifFillStateHigh(e);case l.Rules.SHOULD_STAY:return this.ifFillStateMid(e);case l.Rules.SHOULD_SWITCH_DOWN:return this.ifFillStateLow(e);default:return this.context.logger.insane("unknown fill state result, keep the current representation"),this.useLastRepresentation()}},t.prototype.switchUp=function(t){var e;if(void 0===t&&(t=c.SwitchingAggressiveness.Conservative),void 0!==(null===(e=this.lastRepresentation)||void 0===e?void 0:e.arrayIndex)&&this.lastRepresentation.arrayIndex>=this.availableRepresentations.length-1)return this.lastRepresentation;var i=this.getRepresentationForRateMeasurement(t);return this.lastRepresentation&&Number(i._bandwidth)<=Number(this.lastRepresentation._bandwidth)?this.lastRepresentation:(this.context.logger.insane("switching up to "+i._id),i)},t.prototype.switchDown=function(t){var e,i,n,r;if(void 0===t&&(t=c.SwitchingAggressiveness.VeryHigh),void 0!==(null===(e=this.lastRepresentation)||void 0===e?void 0:e.arrayIndex)&&(null===(i=this.lastRepresentation)||void 0===i?void 0:i.arrayIndex)<1&&null!==(null===(n=this.lastRepresentation)||void 0===n?void 0:n._id))return this.context.logger.insane(this.mimeType+" is already on the lowest quality, can not switch to lower quality."),this.lastRepresentation;var o=this.getRepresentationForRateMeasurement(t);return this.lastRepresentation&&(!o||o._bandwidth>=(null===(r=this.lastRepresentation)||void 0===r?void 0:r._bandwidth))?(o=this.getOneRepresentationLower(),this.context.logger.insane("step-wise switch down to "+o._id)):this.context.logger.insane("switching down to "+o._id),o},t.prototype.stay=function(){var t;return null!==(t=this.lastRepresentation)&&void 0!==t?t:this.getLowestRepresentation()},t.prototype.ifFillStateHigh=function(t){switch(t){case l.Rules.SHOULD_SWITCH_UP:return this.switchUp(c.SwitchingAggressiveness.VeryHigh);case l.Rules.SHOULD_STAY:return this.switchUp(c.SwitchingAggressiveness.High);case l.Rules.SHOULD_SWITCH_DOWN:return this.stay();default:return this.context.logger.insane("unknown fill rate result, keep the current representation"),this.stay()}},t.prototype.ifFillStateMid=function(t){switch(t){case l.Rules.SHOULD_SWITCH_UP:return this.switchUp(c.SwitchingAggressiveness.Mid);case l.Rules.SHOULD_STAY:return this.stay();case l.Rules.SHOULD_SWITCH_DOWN:return this.switchDown(c.SwitchingAggressiveness.High);default:return this.context.logger.insane("unknown fill rate result, keep the current representation"),this.stay()}},t.prototype.ifFillStateLow=function(t){switch(t){case l.Rules.SHOULD_SWITCH_UP:return this.stay();case l.Rules.SHOULD_STAY:return this.switchDown(c.SwitchingAggressiveness.High);case l.Rules.SHOULD_SWITCH_DOWN:return this.switchDown(c.SwitchingAggressiveness.VeryHigh);default:return this.context.logger.insane("unknown fill rate result, keep the current representation"),this.stay()}},t.prototype.useLastRepresentation=function(){var t;return(null===(t=this.lastRepresentation)||void 0===t?void 0:t._id)?this.lastRepresentation:this.getLowestRepresentation()},t.prototype.getOneRepresentationLower=function(){var t,e,i=Math.max(0,(null!==(e=null===(t=this.lastRepresentation)||void 0===t?void 0:t.arrayIndex)&&void 0!==e?e:0)-1);return this.availableRepresentations[i]},t}();e.BaseAdaptationLogic=h},82873:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.BandwidthValueType=void 0,e.getBandwidth=function(t){if(0!==t.length){for(var e=t.length,r=e-1;r>=0;r--){var o=t[r].value,a=o.downloadRate,s=o.segmentBitrate;if(void 0===s||a<s*n)return{rateBps:a,type:i.Accurate}}return{rateBps:t[e-1].value.downloadRate,type:i.Estimated}}};var i,n=.9;!function(t){t.Accurate="accurate",t.Estimated="estimated"}(i||(e.BandwidthValueType=i={}))},83429:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.getUserSelectedRepresentation=function(t,e,i,a){var s,u,l,c=function(t,e){return r.MimeTypeHelper.isAudio(t)?null==e?void 0:e.onAudioAdaptation:r.MimeTypeHelper.isVideo(t)?null==e?void 0:e.onVideoAdaptation:void 0}(e,t.config.adaptation);if(c){var d=t.serviceManager.maybeCall(n.ServiceName.ManifestService,(function(t){return t.getAdaptationSet(i)}),null,t.sourceContext.sourceIdentifier),h=null!==(s=null==d?void 0:d.Representation.map((function(t){return{bandwidth:t._bandwidth,id:t._id}})))&&void 0!==s?s:[],p={suggested:a.representationId,isAd:t.sourceContext.isAd,representations:h},f=null!==(u=(0,o.safeUserCallback)((function(){return c(p)}),t.logger))&&void 0!==u?u:void 0;return f&&(null===(l=t.logger)||void 0===l||l.debug("[".concat(e,"] user has overridden adaptation suggestion! suggested: ").concat(a.representationId,", user: ")+"".concat(f))),function(t,e,i){return t.serviceManager.maybeCall(n.ServiceName.ManifestService,(function(t){return e&&t.getRepresentation(e,i)}),void 0,t.sourceContext.sourceIdentifier)||void 0}(t,i,f)}};var n=i(80813),r=i(85434),o=i(70850)},85696:function(t,e,i){var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.DownloadPredictionLogic=void 0;var o=i(13531),a=i(70962),s=i(46151),u=i(88844),l=i(11958),c=i(64463),d=i(43829),h=i(70238),p=i(7676),f=function(t){function e(e,i){var n=t.call(this,e,i)||this;return n.Ccb=new d.DownloadRateRule(n.context,n.monitoringMimeType),n.Dcb=(0,c.BufferFillStateRule)(n.context,n.monitoringMimeType),n}return n(e,t),e.prototype.getRepresentationForRateMeasurement=function(t){void 0===t&&(t=h.SwitchingAggressiveness.Mid);var e=this.context.bufferSettings.getForwardTargetLevel(),i=this.Dcb.getStatus().value,n=this.rateMeasurementRule.getStatus(t,i/e),r=this.getCurrentBitrate(n),o=(0,p.adjustRateToSafetyMargin)(r,this.context.settings.RATE_SAFETY_MARGIN_PERCENTAGE);return this.findRepresentationForBitrate(o)},e.prototype.getCurrentBitrateMeasurement=function(){var t=this.getCurrentBitrate(this.rateMeasurementRule.getStatus());return(0,p.adjustRateToSafetyMargin)(t,this.context.settings.RATE_SAFETY_MARGIN_PERCENTAGE)},e.prototype.addSample=function(t){this.Ccb.addSample(t),this.Dcb.addSample(t),this.rateMeasurementRule.addSample(),this.timeToFirstByteMeasurementRule.addSample()},e.prototype.Ecb=function(t,e,i,n,r){var o=this;if(!t.segmentDuration||this.isStartupBitrateInEffect())return e;this.lastSegmentInfo=t;var a=this.availableRepresentations.filter((function(t){return t._bandwidth<=e._bandwidth}));if(0===a.length)return this.availableRepresentations[0];var s=r.value||0,u=(0,p.adjustRateToSafetyMargin)(i,this.context.settings.RATE_SAFETY_MARGIN_PERCENTAGE),l=a.filter((function(e){var i;return o.isDownloadFeasible(e._internalId,u,e._bandwidth,null!==(i=t.segmentDuration)&&void 0!==i?i:0,!1,n,s)}));return 0===l.length?a[0]:l[l.length-1]},e.prototype.Fcb=function(t,e,i){var n,r;this.updateAvailableRepresentations(i);var o=this.Dcb.getStatus(),u=this.Ccb.getStatus(),l=this.context.bufferSettings.getForwardTargetLevel(),c=this.estimateTimeToFirstByte();this.checkStartupPhase(o);var d=this.context.store.getState(),h=l>(null!==(r=null===(n=(d?(0,s.getMetricsState)(d):{}).default)||void 0===n?void 0:n.bufferLogicActivationThreshold)&&void 0!==r?r:a.DefaultSettings.BUFFER_LOGIC_ACTIVATION_THRESHOLD),p=this.getRepresentationForNormalChange(u,o,h);return e&&(p=this.Ecb(e,p,t,c,o)),p},e.prototype.selectRepresentationID=function(t,e){var i,n,r,a,s=this.rateMeasurementRule.getStatus(),u=this.getCurrentBitrate(s),l=this.Fcb(u,t,e);return this.lastRepresentation&&!(null===(n=null===(i=this.lastRepresentation)||void 0===i?void 0:i._internalId)||void 0===n?void 0:n.equals(null==l?void 0:l._internalId))&&this.context.logger.isLevelEnabled(o.LogLevel.INSANE)&&this.context.logger.insane("Switching from ".concat(null===(r=this.lastRepresentation)||void 0===r?void 0:r._internalId.representationId," to ").concat(null==l?void 0:l._internalId.representationId," (currentRate: ").concat((0,p.toMbps)(u).toFixed(2)+"mbps",", fillState: ").concat(this.Dcb.getStatus().value.toFixed(2),", fillRate: ").concat(this.Ccb.getStatus().value.toFixed(2),")")),this.lastRepresentation=l,this.lastRateMeasurement=u,this.lastDownloadCancelled=!1,this.previousRequestProgress=void 0,null===(a=this.lastRepresentation)||void 0===a?void 0:a._internalId},e.prototype.setAdaptationSet=function(t){this.updateAvailableRepresentations(t.Representation),this.lastRepresentation=this.lastRepresentation?r({},this.findRepresentationForBitrate(this.lastRepresentation._bandwidth)):void 0,this.monitoringMimeType=this.getMonitoringMimeType(),this.previousRequestProgress=void 0},e.prototype.setStartupPhase=function(){var t,e,i,n;this.startupPhase=!0,(0,u.clearTimeoutIfDefined)(this.startupPhaseTimerID),this.startupPhaseTimerID=void 0,null===(t=this.Ccb)||void 0===t||t.setStartupPhase(),null===(e=this.Dcb)||void 0===e||e.setStartupPhase(),null===(i=this.rateMeasurementRule)||void 0===i||i.setStartupPhase(),null===(n=this.timeToFirstByteMeasurementRule)||void 0===n||n.setStartupPhase()},e.prototype.shutdown=function(){var t,e,i,n;(0,u.clearTimeoutIfDefined)(this.startupPhaseTimerID),this.startupPhaseTimerID=void 0,this.lastDownloadCancelled=!1,this.previousRequestProgress=void 0,null===(t=this.Ccb)||void 0===t||t.shutdown(),null===(e=this.Dcb)||void 0===e||e.shutdown(),null===(i=this.rateMeasurementRule)||void 0===i||i.shutdown(),null===(n=this.timeToFirstByteMeasurementRule)||void 0===n||n.shutdown()},e.prototype.dispose=function(){var t,e,i,n;this.shutdown(),null===(t=this.Ccb)||void 0===t||t.dispose(),null===(e=this.Dcb)||void 0===e||e.dispose(),null===(i=this.rateMeasurementRule)||void 0===i||i.dispose(),null===(n=this.timeToFirstByteMeasurementRule)||void 0===n||n.dispose(),this.lastRepresentation=void 0,this.availableRepresentations=[],this.monitoringMimeType=""},e}(l.CancellableAdaptationLogic);e.DownloadPredictionLogic=f},89498:function(t,e,i){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AdaptationHandler=void 0;var r=i(80813),o=i(98714),a=i(49859),s=i(91678),u=i(33436),l=i(86897),c=i(93204),d=i(79721),h=i(85434),p=i(23068),f=i(70850),v=i(46057),g=i(47151),b=i(79505),y=i(49024),m=i(19119),_=i(59113),R=i(7676),S=1/0,T=function(){function t(t,e,i){var n,r,o=this;this.context=t,this.mimeType=e,this.constraints=i,this.sU=!1,this.uU=function(t){var e;return void 0===t&&(t=null===(e=o.qU)||void 0===e?void 0:e.getState()),t?(0,a.getPreferredBitrate)((0,a.getAdaptationState)(t),o.mimeType):null},this.jU=(0,y.createAdaptationLogic)(this.context,this.mimeType,{minBitrate:this.constraints.minBitrate,maxBitrate:this.constraints.maxBitrate},null===(r=null===(n=this.context.config)||void 0===n?void 0:n.adaptation)||void 0===r?void 0:r.logic),this.nU=this.JU(this.oU),this.BU()}return Object.defineProperty(t.prototype,"qU",{get:function(){var t=this.context.sourceContext.sourceIdentifier;return this.context.serviceManager.get(r.ServiceName.SourceStoreService,t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"tU",{get:function(){var t=this.context.sourceContext.sourceIdentifier;return this.context.serviceManager.get(r.ServiceName.ManifestService,t)},enumerable:!1,configurable:!0}),t.prototype.vU=function(t,e,i){var n,r;return t?this.nU:e&&null!==(r=null===(n=this.jU.findRepresentationForBitrate(e,i))||void 0===n?void 0:n._internalId)&&void 0!==r?r:null},t.prototype.wU=function(t,e){var i,n=this.xU(),r=this.uU();return n||r?this.vU(n,r,e):null!==(i=this.jU.selectRepresentationID(t,e))&&void 0!==i?i:null},t.prototype.xU=function(){return!this.isAuto()&&Boolean(this.CU(this.nU,this.zU()))},t.prototype.yU=function(t){this.kU=t},t.prototype.zU=function(){var t,e,i;return null!==(i=null===(e=null===(t=this.tU)||void 0===t?void 0:t.getAdaptationSet(this.oU))||void 0===e?void 0:e.Representation)&&void 0!==i?i:[]},t.prototype.selectRepresentationID=function(t,e){void 0===t&&(t={});var i=this.DU(null!=e?e:this.zU()),n=this.wU(t,i);return n&&this.yU(n),this.kU},t.prototype.AU=function(){var t=this,e=Boolean(this.mU);this.qU&&!e&&(this.mU=(0,c.subscribe)(this.qU)(l.getBufferStateMap,(function(e){var i,n,r=null==e?void 0:e[t.mimeType];if(r){var a=r.rendererRanges;a&&a.length>0&&(null===(i=t.qU)||void 0===i||i.dispatch((0,o.clearPreferredBitrateForMimeTypeAction)(t.mimeType)),null===(n=t.mU)||void 0===n||n.call(t),t.mU=void 0)}})))},t.prototype.BU=function(){var t=this;this.qU&&(this.uU()&&this.AU(),this.lU=(0,c.subscribe)(this.qU)(this.uU,(function(){return t.AU()}),(function(t){return Boolean(t)})))},t.prototype.CU=function(t,e){var i;return e?e.find((function(e){return e._internalId.equals(t)})):null===(i=this.tU)||void 0===i?void 0:i.getRepresentationById(t)},t.prototype.DU=function(t){var e=this;this.GU();var i=this.context.config.adaptation.resolution,n=i.minSelectableVideoHeight,r=i.maxSelectableVideoHeight,o=i.minSelectableVideoWidth,a=i.maxSelectableVideoWidth,s=t.filter((function(t){return!!w(t._bandwidth,e.constraints.minBitrate,e.constraints.maxBitrate)&&(!(0,p.isVideoRepresentation)(t)||w(t._width,o,a)&&w(t._height,n,r))}));if(s.length>0)return s;this.context.logger.debug("No selectable representations found for mimeType ".concat(this.mimeType," within the given bitrate/resolution constraints! Falling back to alternative selection."));var u=this.EU(t);return u?[u]:t},t.prototype.EU=function(t){var e=0!==this.constraints.minBitrate,i=this.constraints.maxBitrate!==S;return e?(0,R.findMaximum)(t,(function(t){return t._bandwidth})):i?(0,R.findMinimum)(t,(function(t){return t._bandwidth})):h.MimeTypeHelper.isVideo(this.mimeType)?this.FU(t):void 0},t.prototype.FU=function(t){var e=this.context.config.adaptation.resolution,i=e.minSelectableVideoHeight,n=e.maxSelectableVideoHeight,r=e.minSelectableVideoWidth,o=e.maxSelectableVideoWidth,a=t.filter(p.isVideoRepresentation);return 0!==i?(0,R.findMaximum)(a,(function(t){return t._height})):n!==1/0?(0,R.findMinimum)(a,(function(t){return t._height})):0!==r?(0,R.findMaximum)(a,(function(t){return t._width})):o!==1/0?(0,R.findMinimum)(a,(function(t){return t._width})):void 0},t.prototype.GU=function(){h.MimeTypeHelper.isVideo(this.mimeType)&&(this.context.config.adaptation.limitToPlayerSize&&!this.sU?this.IU():!this.context.config.adaptation.limitToPlayerSize&&this.sU&&this.HU())},t.prototype.HU=function(){this.sU=!1,this.context.config.adaptation.onVideoAdaptation=this.rU},t.prototype.IU=function(){var t=this;this.sU=!0;var e=this.context.config.adaptation.onVideoAdaptation;this.rU=e,this.context.config.adaptation.onVideoAdaptation=e&&"function"==typeof e?function(i){var n,r,o;return i.suggested=(0,m.AdaptToPlayerResolution)(t.context.internalPlayer,i.suggested,null!==(r=null===(n=t.pU)||void 0===n?void 0:n.isFullscreen())&&void 0!==r&&r)||i.suggested,null!==(o=(0,f.safeUserCallback)((function(){return e(i)}),t.context.logger))&&void 0!==o?o:i.suggested}:function(e){var i,n;return(0,m.AdaptToPlayerResolution)(t.context.internalPlayer,e.suggested,null!==(n=null===(i=t.pU)||void 0===i?void 0:i.isFullscreen())&&void 0!==n&&n)||e.suggested}},t.prototype.JU=function(t){return t?new b.RepresentationId(t,"auto"):new b.RepresentationId(new g.AdaptationSetId(d.DEFAULT_PERIOD_ID,this.mimeType),"auto")},t.prototype.KU=function(t){var e,i={id:t._id,bitrate:t._bandwidth,width:t._width,height:t._height};null===(e=this.context.store)||void 0===e||e.dispatch((0,s.addMetricsValue)(this.mimeType,u.MetricType.DownloadedAdaptationSet,i))},t.prototype.LU=function(){var t,e,i=this;if(this.tU){var r=this.tU.getAdaptationSet(this.oU);if(r){var o=n(n({},r),{Representation:this.DU(r.Representation),_minBandwidth:Math.max(null!==(t=r._minBandwidth)&&void 0!==t?t:0,this.constraints.minBitrate),_maxBandwidth:Math.min(null!==(e=r._maxBandwidth)&&void 0!==e?e:S,this.constraints.maxBitrate)});this.jU.setAdaptationSet(o),(0,v.yieldToMain)().then((function(){return i.KU(o)}))}}else this.context.logger.debug("Could not update adaptation set in AdaptationHandler!")},t.prototype.MU=function(t){return this.oU&&t&&this.tU?this.tU.getRepresentation(this.oU,t):null},t.prototype.NU=function(){if(this.nU){var t=this.nU.representationId;this.nU=this.JU(this.oU);var e=this.MU(t);e&&(this.nU=e._internalId)}else this.nU=this.JU(this.oU)},t.prototype.setAdaptationSetId=function(t){t||this.context.logger.debug("newAdaptationSetId is ".concat(t)),this.oU=t,this.NU(),this.LU()},t.prototype.setFixedRepresentation=function(t){var e;if("auto"===t)this.nU=new b.RepresentationId(this.oU,"auto");else if(this.oU){var i=null===(e=this.tU)||void 0===e?void 0:e.getRepresentation(this.oU,t);i&&(this.nU=i._internalId,this.selectRepresentationID())}},t.prototype.getFixedRepresentation=function(){return this.kU},t.prototype.isAuto=function(){return"auto"===this.nU.representationId},t.prototype.shouldDownloadBeCancelled=function(t,e){var i,n,r,o,a,s,u,l=null!==(n=null===(i=this.context.config.adaptation)||void 0===i?void 0:i.disableDownloadCancelling)&&void 0!==n&&n,c=null!==(a=null===(o=null===(r=this.tU)||void 0===r?void 0:r.getAdaptationSet(this.oU))||void 0===o?void 0:o.Representation)&&void 0!==a?a:[],d=1===c.length,h=c.some((function(t){return Boolean(t._bandwidth)}));if(!this.isAuto()||l||d||!h)return!1;var p=function(t){if(!(0,R.hasTotalBytes)(t))return 1/0;var e=function(t){var e,i=null!==(e=t.elapsedTime)&&void 0!==e?e:0;return t.loadedBytes>0&&i>0?8*t.loadedBytes/1024/i:0}(t);return e>0?8*t.totalBytes/1024/e:1/0}(t),f=(null!==(u=null===(s=t.responseTiming)||void 0===s?void 0:s.doneTimestamp)&&void 0!==u?u:0)>0,v=!!t.segmentDuration&&p>1.5*t.segmentDuration;return!(f||!v)&&!function(t){return!!(0,R.hasTotalBytes)(t)&&t.loadedBytes>=.9*t.totalBytes}(t)&&this.jU.shouldDownloadBeCancelled(t,e)},t.prototype.setStartupPhase=function(){this.jU.setStartupPhase()},t.prototype.addSample=function(t){this.jU.addSample(n({timestamp:Date.now()},t))},t.prototype.shutdown=function(){this.jU.shutdown()},t.prototype.dispose=function(){var t,e;this.shutdown(),this.jU.dispose(),null===(t=this.lU)||void 0===t||t.call(this),null===(e=this.mU)||void 0===e||e.call(this)},t.prototype.selectQualityBasedOnBitrateMeasurement=function(t,e){if(e)return(0,_.findQualityForBitrate)(e,t);var i=this.uU();if(i)return(0,_.findQualityForBitrate)(i,t);var n=this.DU(this.zU());if(this.xU()){var r=this.CU(this.kU,n);if(r)return(0,_.findQualityForBitrate)(r._bandwidth,t)}return(0,_.findQualityForBitrate)(this.jU.getCurrentBitrateMeasurement(),t)},t}();function w(t,e,i){return t>=e&&t<=i}e.AdaptationHandler=T},98154:function(t,e,i){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AdaptationApiFactory=void 0;var r=i(23068),o=function(){function t(){}return t.create=function(t){var e=t.getLogger(),i=function(t){e.debug("[ABR] ".concat(t))};return{setConfig:function(e){i("Updating adaptation config with ".concat(JSON.stringify(e))),(0,r.isNumber)(e.qualityStabilityBalance)&&function(e){if(e<0||e>1)i("Failed to set qualityStabilityBalance to ".concat(e,", valid range is 0 to 1"));else{var n=t.getConfig(!0).adaptation;n&&(n.qualityStabilityBalance=e,i("Updated qualityStabilityBalance to ".concat(e)))}}(e.qualityStabilityBalance),e.resolution&&function(e){var n=e.maxSelectableVideoHeight,r=e.maxSelectableVideoWidth,o=e.minSelectableVideoHeight,s=e.minSelectableVideoWidth,u=t.getConfig(!0).adaptation.resolution;a(n)&&(u.maxSelectableVideoHeight=n),a(r)&&(u.maxSelectableVideoWidth=r),a(o)&&(u.minSelectableVideoHeight=o),a(s)&&(u.minSelectableVideoWidth=s),i("Updated resolution boundaries to ".concat(JSON.stringify(u)))}(e.resolution),(0,r.isBoolean)(e.limitToPlayerSize)&&function(e){var n=t.getConfig(!0).adaptation;n&&(n.limitToPlayerSize=e,i("Updated limitToPlayerSize to ".concat(e)))}(e.limitToPlayerSize)},getConfig:function(){var e=t.getConfig(!0).adaptation,i=e.qualityStabilityBalance,r=e.resolution,o=e.limitToPlayerSize;return{qualityStabilityBalance:i,resolution:n({},r),limitToPlayerSize:o}}}},t}();function a(t){return(0,r.isNumber)(t)&&t>=0}e.AdaptationApiFactory=o}},function(t){return function(){return t(t.s=76344)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.drm=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.player=e.bitmovin.player||{},e.bitmovin.player.drm=t())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[766],{4358:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__rest||function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var i=0;for(r=Object.getOwnPropertySymbols(e);i<r.length;i++)t.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(e,r[i])&&(n[r[i]]=e[r[i]])}return n};Object.defineProperty(t,"__esModule",{value:!0}),t.getInitialLicenseState=void 0,t.addLicense=function(e){return(0,o.createAction)(a.LicenseActionType.AddLicense,e)},t.updateLicense=function(e){return(0,o.createAction)(a.LicenseActionType.UpdateLicense,e)},t.removeLicense=function(e){return(0,o.createAction)(a.LicenseActionType.RemoveLicense,e)},t.resetLicense=function(e){return(0,o.createAction)(a.LicenseActionType.ResetLicense,e)},t.resetLicenses=function(){return(0,o.createAction)(a.LicenseActionType.ResetLicenses)},t.clearLicenseStorage=function(){return(0,o.createAction)(a.LicenseActionType.ClearLicenseStorage)},t.initializeLicenseStorage=function(e){return(0,o.createAction)(a.LicenseActionType.InitializeLicenseStorage,{storageHandler:e})},t.setPersistentState=function(e){return(0,o.createAction)(a.LicenseActionType.SetPersistentState,e)},t.setMediaKeyStatus=function(e,t,n,r){return(0,o.createAction)(a.LicenseActionType.SetMediaKeyStatus,{keySystemKind:e,keyUuid:t,status:n,initDataStr:r})},t.loadLicences=c,t.maybeStoreLicences=function(e,t){e&&((0,s.clearTimeoutIfDefined)(d),d=window.setTimeout((function(){return function(e,t){try{var n=e.drmData,o={};Object.keys(n).forEach((function(e){o[e]={},Object.entries(n[e]).forEach((function(t){var n=t[0],s=t[1],u=void 0===s?{}:s,d=(u.license,u.initData,i(u,["license","initData"]));delete d.publicId,o[e][n]=r(r({},d),{hasLicense:!1,isPending:!1,wasRequested:!1,mediaKeyStatus:a.MediaKeyStatus.Unknown})}))}));var s=JSON.stringify(r(r({},e),{drmData:o}));t.set(u,s)}catch(e){}}(e,t)})))},t.getLicenseInfoKey=function(e){return btoa(e)};var o=n(35267),s=n(88844),a=n(56068),u="bitmovinplayer_licenseStorage",d=-1;function c(e){try{var t=e.get(u);return JSON.parse(t)||{}}catch(e){return{}}}t.getInitialLicenseState=function(e){var t=c(e);return r({inPersistentState:!1,drmData:{}},t)}},6234:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseInitData=function(e){if(!e||e.byteLength<i.ISOBMFFConstants.BOX_SIZE_LENGTH+i.ISOBMFFConstants.BOX_TYPE_LENGTH)return[];var t=0,n=e instanceof Uint8Array?e.buffer:e,r=new DataView(n),o=[];do{var s=r.getUint32(t),u=n.slice(t,t+s);t+=s;var d=a(u);d&&o.push(d)}while(t<e.byteLength);return o};var r=n(25811),i=n(51682),o=n(74853),s=n(70233);function a(e){var t={},n=new DataView(e),a=i.ISOBMFFConstants.BOX_SIZE_LENGTH,u=o.ArrayHelper.extractAsciiString(n,a,i.ISOBMFFConstants.BOX_TYPE_LENGTH);if(a+=i.ISOBMFFConstants.BOX_TYPE_LENGTH,"pssh"!==u)return null;var d=n.getUint8(a);a+=i.ISOBMFFConstants.FULL_BOX_VERSION_LENGTH+i.ISOBMFFConstants.FULL_BOX_FLAGS_LENGTH;var c=o.ArrayHelper.extractHexString(n,a,i.ISOBMFFConstants.PSSH_SYSTEM_ID_LENGTH);if(a+=i.ISOBMFFConstants.PSSH_SYSTEM_ID_LENGTH,t.systemIDraw=c,t.systemID="urn:uuid:".concat(s.FormatHelper.beautifyUUID(c)),r.DRMSchemeIDURIs.hasOwnProperty(t.systemID)&&(t.systemName=r.DRMSchemeIDURIs[t.systemID]),d>0){var l=n.getUint32(a);a+=i.ISOBMFFConstants.PSSH_KID_COUNT_LENGTH,t.kid=[];for(var p=0;p<l;p++)t.kid.push(o.ArrayHelper.extractHexString(n,a,i.ISOBMFFConstants.PSSH_KID_LEN)),a+=i.ISOBMFFConstants.PSSH_KID_LEN}return t.initData=e,t.initDataStr=o.ArrayHelper.arrayBufferToAsciiString(e,!0),t}},24109:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.FairplayHandler=t.SupportedFairplayKeySystems=void 0;var i,o,s=n(40306),a=n(3336),u=n(4129),d=n(57456),c=n(29669),l=n(74853),p=n(88844),y=n(19274);!function(e){e[e.MEDIA_KEYERR_DOMAIN=6]="MEDIA_KEYERR_DOMAIN"}(i||(i={})),function(e){e.FPS_1="com.apple.fps.1_0"}(o||(t.SupportedFairplayKeySystems=o={}));var f=function(){function e(t,n,r){var o=this;this.to=function(e){if(o.eo){o.fo=!0;var t=e.initData,n=o.yo(t);if(o.po(t),o.ko)o.wo(n,t);else{var r=o.eo.serverCertificate;if(r)return r instanceof ArrayBuffer==0?void o.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_CERTIFICATE_ERROR,void 0,"The provided `AppleFairplayDRMConfig.serverCertificate` is not of type `ArrayBuffer`.")):(o.ko=o.vo(r),void o.wo(n,t));o.so().then((function(e){o.ko=o.vo(e.body),o.wo(n,t)})).catch((function(e){o.Zo.logger.debug("Error while loading the certificate ",e)})),o.no()}}else o.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_MISSING_CONFIGURATION,void 0,"A FairPlay DRM config is required to play this source, but none was provided."))},this.xo=function(e,t){o.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.NETWORK_FAILED_CERTIFICATE_REQUEST,{responseCode:e.status,responseText:e.statusText,serverResponse:e.body,reason:t.message},"Failed to load the FairPlay certificate: ".concat(e.status," ").concat(e.statusText,".")))},this.Bo=function(){(0,p.clearTimeoutIfDefined)(o.lo)},this.Co=function(t,n){o.fo=!0;var r=t.message,i=t.target,l=o.eo,p=l.withCredentials,y=void 0!==p&&p,f=l.licenseResponseType,h=void 0===f?c.HttpResponseType.TEXT:f,g=l.maxLicenseRequestRetries,v=l.headers,m=l.prepareMessage,E=d.XhrHelper.mergeHeaders({"Content-Type":"application/x-www-form-urlencoded"},v),S=o.qo(g),b=new u.DefaultContentLoader(o.Zo,{maxRetries:S,requestType:c.HttpRequestType.DRM_LICENSE_FAIRPLAY});t.messageBase64Encoded=e.base64EncodeUint8Array(r);var M="function"==typeof m?m(t,i):"spc=".concat(encodeURIComponent(t.messageBase64Encoded),"&assetId=").concat(i.contentId),D=o.uo(n);D&&"string"==typeof D?b.load(D,c.HttpRequestMethod.POST,h,M,E,y).then((function(e){o.Do(e,i)})).catch(o.Eo):(o.fo=!1,o.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_NO_LICENSE_SERVER_URL_PROVIDED,{licenseServer:D},"No valid license server URL was provided through the FairPlay DRM config.")))},this.Do=function(t,n){if(o.fo=!1,"function"!=typeof o.eo.prepareLicenseAsync){var r=t.body;"function"==typeof o.eo.prepareLicense?r=o.eo.prepareLicense(r):(r=r.trim()).startsWith("<ckc>")&&r.endsWith("</ckc>")&&(r=r.slice(5,-6));var i=r;"string"==typeof r&&(i=e.base64DecodeUint8Array(r)),n.update(i)}else o.eo.prepareLicenseAsync(t.body).then((function(e){n.update(e)})).catch((function(e){o.Zo.logger.log(e),o.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_CERTIFICATE_ERROR,{reason:e},"Unable to parse the certificate: `AppleFairplayDRMConfig.prepareLicenseAsync` failed."))}))},this.Eo=function(e){o.fo=!1,o.Zo.logger.debug("The license request failed."),o.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_FAILED_LICENSE_REQUEST,{responseCode:e.status,responseText:e.statusText,serverResponse:e.body},void 0,o.ao))},this.Fo=function(e){o.fo=!1,o.Zo.logger.debug("A decryption key error was encountered"),o.Zo.logger.debug(e);var t=e.target,n=t?t.error:{},r=n.code,u=n.systemCode,d=o.ho&&o.Zo.settings.FAIRPLAY_IGNORE_DUPLICATE_INIT_DATA_KEY_ERRORS;r===i.MEDIA_KEYERR_DOMAIN&&1212433232===u?o.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_RESTRICTED_OUTPUT,void 0,void 0,o.ao)):d?o.Zo.logger.debug("Ignoring key error as duplicate needkey events have been tracked"):o.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_KEY_ERROR,{code:r,systemCode:u}))},this.Go=function(){o.Zo.logger.debug("Decryption key was added to session.")},this.isLicenseRequestOngoing=function(){return o.fo},this.Zo=t,this.ao=t.sourceContext.sourceIdentifier,this.bo=t.settings,this.co=n,this.eo=r,this.fo=!1,this.go=[],this.ho=!1,this.jo=null,this.io=null,r&&r.hasOwnProperty("certificateURL")&&(this.mo=r.certificateURL),this.co.drmHandler=this,this.co.addEventListener(y.MediaElementEvent.webkitneedkey,this.to),this.co.addEventListener(y.MediaElementEvent.error,this.Bo)}return e.prototype.no=function(){var e=this;(0,p.clearTimeoutIfDefined)(this.lo),this.lo=window.setTimeout((function(){e.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_CERTIFICATE_ERROR,void 0,"The FairPlay certificate request was not completed within the default network timeout of ".concat(e.bo.XHR_TIMEOUT," seconds.")))}),1e3*this.bo.XHR_TIMEOUT)},e.stringToArray=function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),r=0,i=e.length;r<i;r++)n[r]=e.charCodeAt(r);return n},e.base64DecodeUint8Array=function(e){for(var t=window.atob(e),n=t.length,r=new Uint8Array(new ArrayBuffer(n)),i=0;i<n;i++)r[i]=t.charCodeAt(i);return r},e.base64EncodeUint8Array=function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="",r=0;r<e.length;){var i=e[r++],o=r<e.length?e[r++]:Number.NaN,s=r<e.length?e[r++]:Number.NaN,a=i>>2,u=(3&i)<<4|o>>4,d=(15&o)<<2|s>>6,c=63&s;isNaN(o)?d=c=64:isNaN(s)&&(c=64),n+=t.charAt(a)+t.charAt(u)+t.charAt(d)+t.charAt(c)}return n},e.prototype.oo=function(e,t,n,r){void 0===r&&(r=null),n.addEventListener(e,(function(e){return t(e,r)}),!1)},e.prototype.po=function(e){var t=l.ArrayHelper.arrayBufferToAsciiString(e.buffer,!1);this.go.includes(t)?(this.Zo.logger.debug("Observed duplicate need key event with initData",t),this.ho=!0):this.go.push(t)},e.prototype.qo=function(e){var t=parseInt("".concat(e));return isFinite(t)?t:3},e.prototype.ro=function(){var e=this.eo.maxCertificateRequestRetries;return new u.DefaultContentLoader(this.Zo,{onFailure:this.xo,maxRetries:this.qo(e),requestType:c.HttpRequestType.DRM_CERTIFICATE_FAIRPLAY})},e.prototype.so=function(){var e=this,t=this.eo,n=t.withCredentials,i=void 0!==n&&n,o=t.certificateHeaders,s=r({},o);return this.io=this.ro(),new Promise((function(t,n){e.io.load(e.mo,c.HttpRequestMethod.GET,c.HttpResponseType.ARRAYBUFFER,null,s,i).then((function(e){return t(e)})).catch((function(e){return n(e)})).finally((function(){e.io=null}))}))},e.prototype.uo=function(e){var t=l.ArrayHelper.arrayBufferToAsciiString(e.buffer,!1);if(this.eo&&this.eo.hasOwnProperty("LA_URL"))return this.Zo.logger.debug("licenseServerUrl (config param): "+this.eo.LA_URL),this.eo.LA_URL;if(/skd:\/\//.test(t)){var n="function"==typeof this.eo.getLicenseServerUrl?this.eo.getLicenseServerUrl(t.substring(t.indexOf("skd:"))):t.substring(t.indexOf("skd:")+4);return this.Zo.logger.debug("licenseServerUrl: "+n),n}return null},e.prototype.vo=function(e){var t="function"==typeof this.eo.prepareCertificate;try{return t?new Uint8Array(this.eo.prepareCertificate(e)):new Uint8Array(e)}catch(e){return void this.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_CERTIFICATE_ERROR,{reason:e},"There was an error during the processing of the certificate: ".concat(t?"`AppleFairplayDRMConfig.prepareCertificate` failed":"the obtained certificate is invalid",".")))}},e.prototype.wo=function(e,t){(0,p.clearTimeoutIfDefined)(this.lo);var n=this.zo(t,e,this.ko);if(this.jo||this.Ao(),this.co.webkitKeys||this.co.webkitSetMediaKeys(new WebKitMediaKeys(this.jo)),this.co.webkitKeys){var r=this.co.webkitKeys.createSession("video/mp4",n);r?(r.contentId=e,this.oo("webkitkeymessage",this.Co,r,t),this.oo("webkitkeyadded",this.Go,r),this.oo("webkitkeyerror",this.Fo,r)):this.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_KEY_SESSION_INITIALIZATION_FAILED,void 0,"Unable to initialize DRM key session: `webkitKeys.createSession` failed."))}else this.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_MEDIA_KEY_INITIALIZATION_FAILED,void 0,"Unable to initialize the DRM media keys: the video element does not support WebKit keys."))},e.prototype.yo=function(e){var t=l.ArrayHelper.arrayBufferToAsciiString(e.buffer,!1);if("function"==typeof this.eo.prepareContentId)t=this.eo.prepareContentId(t);else{var n=t.indexOf("?");t=n<0?"":t.substring(n+1)}return this.Zo.logger.debug("contentId: "+t),t},e.prototype.zo=function(t,n,r){var i="string"==typeof n?e.stringToArray(n):n,o=0,s=new ArrayBuffer(t.byteLength+4+i.byteLength+4+r.byteLength),a=new DataView(s);new Uint8Array(s,o,t.byteLength).set(t),o+=t.byteLength,a.setUint32(o,i.byteLength,!0),o+=4;var u=this.eo.useUint16InitData?new Uint16Array(s,o,i.length):new Uint8Array(s,o,i.byteLength);return u.set(i),o+=u.byteLength,a.setUint32(o,r.byteLength,!0),o+=4,new Uint8Array(s,o,r.byteLength).set(r),new Uint8Array(s,0,s.byteLength)},e.prototype.Ao=function(){var e=Object.keys(o).map((function(e){return o[e]}));this.jo=e.find((function(e){return WebKitMediaKeys.isTypeSupported(e,"video/mp4")}))||null,this.jo||this.Zo.eventHandler.fireError(new a.PlayerError(s.ErrorCode.DRM_KEY_SYSTEM_NOT_SUPPORTED,{supportedKeySystem:e},"FairPlay DRM is not supported on this platform."))},e.prototype.destroy=function(){this.co.drmHandler=null,this.co.removeEventListener(y.MediaElementEvent.webkitneedkey,this.to),this.co.removeEventListener(y.MediaElementEvent.error,this.Bo),this.jo=null,this.ko=null,this.go=[],this.mo=null,this.ho=!1},e.prototype.dispose=function(){var e;this.destroy(),(0,p.clearTimeoutIfDefined)(this.lo),null===(e=this.io)||void 0===e||e.cancel(),this.bo=null,this.jo=null,this.ko=null,this.mo=null},e}();t.FairplayHandler=f},24273:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.EMEWrapper=void 0;var r=n(57387),i=n(84568),o="DOMException: Unsupported keySystem",s=[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.4d401e"'}]},{initDataTypes:["cenc"],videoCapabilities:void 0,audioCapabilities:void 0}],a=function(){function e(){this.IO=document.createElement("video"),this.JO=(0,i.memoize)(this.YP.bind(this),(function(e,t,n){return String((0,r.calcHash)(JSON.stringify({keySystem:e,audioCapabilities:t,videoCapabilities:n})))}))}return e.prototype.isSupported=function(e){var t;return"function"==typeof window.WebKitMediaKeys?this.UP(e):"function"==typeof window.navigator.requestMediaKeySystemAccess?this.VP(e).then((function(e){return e.keySystem})):"function"==typeof window.MSMediaKeys?this.WP(e):"function"==typeof(null===(t=this.IO)||void 0===t?void 0:t.webkitGenerateKeyRequest)?this.XP(e):Promise.reject(o)},e.prototype.UP=function(e){var t,n;return(null===(n=(t=window.WebKitMediaKeys).isTypeSupported)||void 0===n?void 0:n.call(t,e))?Promise.resolve(e):Promise.reject(o)},e.prototype.VP=function(e,t){void 0===t&&(t=s);try{return window.navigator.requestMediaKeySystemAccess(e,t)}catch(e){return Promise.reject(e)}},e.prototype.WP=function(e){var t,n;return(null===(n=(t=window.MSMediaKeys).isTypeSupported)||void 0===n?void 0:n.call(t,e))?Promise.resolve(e):Promise.reject(o)},e.prototype.XP=function(e){var t;return(null===(t=this.IO)||void 0===t?void 0:t.canPlayType("video/mp4",e))?Promise.resolve(e):Promise.reject(o)},e.prototype.getSupportedCapabilities=function(e,t,n){return this.JO(e,t,n)},e.prototype.YP=function(e,t,n){if("function"==typeof window.navigator.requestMediaKeySystemAccess){var r=[{initDataTypes:["cenc"],audioCapabilities:t,videoCapabilities:n},{initDataTypes:["cenc"],videoCapabilities:void 0,audioCapabilities:void 0}];return window.navigator.requestMediaKeySystemAccess(e,r).then((function(e){var r,i,o=e.getConfiguration();return{audioCapabilities:null!==(r=null==o?void 0:o.audioCapabilities)&&void 0!==r?r:t,videoCapabilities:null!==(i=null==o?void 0:o.videoCapabilities)&&void 0!==i?i:n}})).catch((function(){return{audioCapabilities:t,videoCapabilities:n}}))}return Promise.resolve({audioCapabilities:t,videoCapabilities:n})},e.prototype.dispose=function(){this.IO=null,this.JO.invalidate()},e}();t.EMEWrapper=a},25271:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PrimeTime=void 0;var r=n(40306),i=n(3336),o=n(4129),s=n(29669),a=function(){function e(e,t){var n=this;this.context=e,this.D7=function(e,t){n.context.logger.debug("PrimeTime license request failed: ".concat(t.name,". Response:"),e.body),n.context.eventHandler.fireError(new i.PlayerError(r.ErrorCode.DRM_FAILED_LICENSE_REQUEST,{statusCode:e.status,statusText:e.statusText,serverResponse:e.body},"Failed to load the PrimeTime DRM license: ".concat(e.status," ").concat(e.statusText,"."),n.A7))},this.A7=e.sourceContext.sourceIdentifier,this.B7=t,e.logger.debug("Using DRM key system: PrimeTime"),this.C7=new o.DefaultContentLoader(e,{onFailure:this.D7,maxRetries:t.maxLicenseRequestRetries,retryDelay:t.licenseRequestRetryDelay,requestType:s.HttpRequestType.DRM_LICENSE_PRIMETIME})}return e.prototype.handleLicenseRequest=function(t){var n,r,i=t.message;switch(this.B7.headers&&Object.keys(this.B7.headers).length>0&&(n=this.B7.headers),t.messageType){case e.INDIVIDUALIZATION_REQUEST:r=this.B7.indivURL||this.B7.LA_URL;break;case e.LICENSE_REQUEST:case e.LICENSE_RELEASE:r=this.B7.LA_URL;break;default:this.context.logger.debug("unknown license request type, assuming license-request"),r=this.B7.LA_URL}return this.C7.load(r,s.HttpRequestMethod.POST,s.HttpResponseType.ARRAYBUFFER,i,n,this.B7.withCredentials,"application/json")},e.prototype.prepareLicense=function(e){return new Uint8Array(e)},e.prototype.getCDMData=function(){return null},e.prototype.getKeyUuidsFromInitData=function(e){return[]},e.prototype.getIdentifierFromInitData=function(e){return e},e.prototype.getMediaKeySystemConfiguration=function(){var e=this.B7.mediaKeySystemConfig;return"object"==typeof e?e:{}},e.prototype.dispose=function(){this.B7=null,this.C7.dispose(),this.C7=null},e.INDIVIDUALIZATION_REQUEST="individualization-request",e.LICENSE_REQUEST="license-request",e.LICENSE_RELEASE="license-release",e}();t.PrimeTime=a},29173:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DRMManager=void 0;var i=n(66790),o=n(40306),s=n(3336),a=n(20213),u=n(33468),d=n(48488),c=n(15971),l=n(74853),p=n(34841),y=n(70581),f=n(92656),h=n(58857),g=n(84344),v=function(){function e(e){var t=this;this.vn=function(){return Promise.all([t.sn.promise,t.tn.promise]).then(t.Mo).catch((function(){}))},this.wn=function(e){return t.addInitData(e)},this.isLicenseRequestOngoing=function(){return!(!t.emeHandler||"function"!=typeof t.emeHandler.isLicenseRequestOngoing)&&t.emeHandler.isLicenseRequestOngoing()},this.Ko=function(e,n){if(t.context.logger.debug("DRM license request failed",JSON.stringify(e)),e.response!==f.EMPTY_KEY_MESSAGE)return e.hasOwnProperty("statusCode")&&"postponed"===e.statusCode?(t.context.logger.debug("postponed license acquisition ("+e.licenseRequestId+") as there is currently a license being requested"),void t.licenseStorage.resetLicense(t.usedKeySystem.kind,e.initDataStr)):void(t.usedKeySystem.kind?(t.licenseStorage.addLicense(t.usedKeySystem.kind,{initDataStr:e.initDataStr}),n.forEach((function(e){return t.context.store.dispatch((0,d.trackDrmKidError)(e))}))):t.context.logger.debug("key system info not available, probably has already been shut down due to an error"))},this.Lo=function(e){t.usedKeySystem.kind&&t.licenseStorage.addLicense(t.usedKeySystem.kind,e)},this.Mo=function(){Boolean(t.usedKeySystem.kind)&&!t.rn&&t.context.eventHandler.fireError(new s.PlayerError(o.ErrorCode.DRM_INIT_DATA_MISSING,{drmKeySystem:t.usedKeySystem.kind},"No init data was found in the manifest or the segments for the used key system."))},this.context=e,this.emeHandler=null,this.qn=!1,this.licenseStorage=new h.LicenseStorage(this.context),this.context.videoElement.drmHandler=this,this.rn=!1,this.sn=new p.Deferred,this.sn.promise.catch((function(){})),this.tn=new p.Deferred,this.usedKeySystem={kind:null,uid:null}}return e.prototype.shutdown=function(){var e;return this.un=!0,this.licenseStorage.dispose(),this.context.videoElement.drmHandler=null,this.qn=!1,this.usedKeySystem={kind:null,uid:null},this.rn=!1,this.sn.reject(),null===(e=(0,c.getSourceStore)(this.context))||void 0===e||e.dispatch((0,d.resetUsedKeySystem)()),null===this.emeHandler?Promise.resolve():(this.emeHandler.setWaitingForKeyListener(null),this.emeHandler.unload())},e.prototype.xn=function(){var e=this;this.licenseStorage.getEntriesWithoutLicense().filter((function(t){return t.systemName!==e.usedKeySystem.kind})).forEach((function(t){return e.licenseStorage.remove(t.initDataStr)}))},e.prototype.yn=function(){this.licenseStorage.getEntriesWithoutLicense().some((function(e){return e.initData}))&&(this.rn=!0)},e.prototype.zn=function(){var e=this;this.licenseStorage.getEntriesWithoutLicense().filter((function(e){return e.initData&&!e.initDataStr})).forEach((function(t){var n=e.emeHandler.getIdentifierFromInitData(l.ArrayHelper.arrayBufferToAsciiString(t.initData));e.licenseStorage.updateInitData(r(r({},t),{initDataStr:n}))}))},e.prototype.setConfig=function(e,t){var n=this,r=(0,u.getRelevantKeySystemMap)(e);return(0,g.resolveDRMSystem)(r,e,this.context).then((function(e){var r;if(n.un)return n.context.logger.debug("Shutdown in progress - prevented resolving DRM system!"),Promise.reject(new Error(i.DrmSetupError.CANCELLED));n.usedKeySystem=e.keySystem,n.qn=!0,null===(r=(0,c.getSourceStore)(n.context))||void 0===r||r.dispatch((0,d.setUsedKeySystem)(n.usedKeySystem)),n.emeHandler=e.emeHandler.instance,n.emeHandler.setEncryptedListener(n.wn),n.emeHandler.setWaitingForKeyListener(n.vn);var o=n.emeHandler.load(e.keySystem.instance,e.keySystem.uid,e.config,t);return n.xn(),n.yn(),n.zn(),n.requestMissingLicenses(),n.sn.resolve(),o.then((function(){return e.emeHandler.kind}))})).catch((function(e){return n.context.logger.debug("Error while loading EME handler: ".concat(null==e?void 0:e.message),e),null!==n.emeHandler&&n.emeHandler.unload(),n.sn.reject(),Promise.reject(e)}))},e.prototype.requestMissingLicenses=function(){var e=this;this.qn&&this.usedKeySystem.kind&&this.licenseStorage.getEntriesWithoutLicense().forEach((function(t){var n=t.initData,r=t.initDataStr,i=t.sessionId,o=t.systemName,s=t.wasRequested,a=t.isPending;o===e.usedKeySystem.kind?n?s||(e.licenseStorage.setRequested(r,o),e.emeHandler.requestLicense(n,r,i).then(e.Lo).catch((function(n){return e.Ko(n,t.keyIds)}))):a||e.licenseStorage.setPending(r,o):e.licenseStorage.remove(r)}))},e.prototype.preprocessInitDataStr=function(e){var t;return e.initDataStr?null===(t=this.emeHandler)||void 0===t?void 0:t.getIdentifierFromInitData(e.initDataStr):void 0},e.prototype.hasOngoingLicenseRequests=function(e){return this.licenseStorage.hasOngoingLicenseRequests(e)},e.prototype.hasUsableMediaKey=function(e){return this.emeHandler instanceof y.UnprefixedEMEHandler?this.licenseStorage.hasUsableOrPendingMediaKey(e,this.usedKeySystem.kind):this.licenseStorage.hasLicense(e,this.usedKeySystem.kind)},e.prototype.addInitData=function(e){var t,n;if(e&&(!this.usedKeySystem.kind||e.systemName===this.usedKeySystem.kind)){var i=this.preprocessInitDataStr(e),o=this.usedKeySystem.kind||e.systemName,s=i?this.licenseStorage.getLicense(i,o):void 0;(null==s?void 0:s.initData)||(e.initDataStr=i,e.kid=null!==(n=null===(t=this.emeHandler)||void 0===t?void 0:t.getKeyUuidsFromInitData(e.initData))&&void 0!==n?n:[],s?this.licenseStorage.updateInitData(r(r({},s),{systemName:o,initData:e.initData,initDataStr:e.initDataStr,keyIds:e.kid})):this.licenseStorage.add(e),this.rn=this.rn||Boolean(this.usedKeySystem.kind&&e.initData)),this.requestMissingLicenses()}},e.prototype.getUsedKeySystemKind=function(){return this.usedKeySystem.kind},e.prototype.getUsedKeySystemUid=function(){return this.usedKeySystem.uid},e.prototype.reInitializeEmeHandler=function(){var e;null===(e=this.emeHandler)||void 0===e||e.reInitialize()},e.prototype.signalInitDataShouldBeAvailable=function(){this.tn.resolve()},e.prototype.prepareForMseShutdown=function(){var e,t,n;return null!==(n=null===(t=null===(e=this.emeHandler)||void 0===e?void 0:e.prepareForMseShutdown)||void 0===t?void 0:t.call(e))&&void 0!==n?n:Promise.resolve()},e.prototype.suspend=function(){var e,t;return null!==(t=null===(e=this.emeHandler)||void 0===e?void 0:e.suspend())&&void 0!==t?t:Promise.resolve()},e.prototype.renewLicense=function(e){var t,n;if((null===(t=this.usedKeySystem)||void 0===t?void 0:t.kind)!==u.KeySystemKind.PLAYREADY)return this.context.logger.debug("RenewLicense is only supported for playready."),Promise.reject(a.WarningCode.DRM_LICENSE_RENEWAL_FAILED);if(!(null===(n=this.emeHandler)||void 0===n?void 0:n.disposeSessionForInitData))return this.context.logger.debug("RenewLicense is not supported for the current EME."),Promise.reject(a.WarningCode.DRM_LICENSE_RENEWAL_FAILED);var r=this.licenseStorage.findLicenseForPublicId(e,this.usedKeySystem.kind);return r?this.No(r.initDataStr):(this.context.logger.debug("Could not find active drm session for "+e),Promise.reject(a.WarningCode.DRM_LICENSE_RENEWAL_FAILED))},e.prototype.isUsingUnprefixedEmeHandler=function(){return!!this.emeHandler&&this.emeHandler instanceof y.UnprefixedEMEHandler},e.prototype.No=function(e){var t=this;return this.licenseStorage.resetLicense(this.usedKeySystem.kind,e),this.emeHandler.disposeSessionForInitData(e).then((function(){return t.requestMissingLicenses()})).catch((function(n){return t.context.eventHandler.dispatchEvent(a.PlayerEvent.Warning,new a.PlayerWarning(a.WarningCode.DRM_LICENSE_RENEWAL_FAILED,null,{keyIds:e.split(";"),error:n})),Promise.reject(n)}))},e}();t.DRMManager=v},30665:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.removeFromObject=t.memoOne=t.not=t.or=t.and=void 0,t.and=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.reduce((function(e,n){return e&&n.apply(void 0,t)}),!0)}},t.or=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return e.reduce((function(e,n){return e||n.apply(void 0,t)}),!1)}},t.not=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(void 0,t)}};var n=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0};t.memoOne=function(e,t){var r,i=null,o=void 0!==t?t:n;return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return null!==i&&o(t,i)||(r=e.apply(void 0,t),i=t),r}},t.removeFromObject=function(e,t){return Object.keys(e).filter((function(e){return!t.includes(e)})).reduce((function(t,n){return t[n]=e[n],t}),Object.create(null))}},31884:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.TVKey=void 0;var i=n(40306),o=n(3336),s=n(4129),a=n(29669),u=n(74853),d=n(67579),c=n(92378),l=function(){function e(e,t){var n=this;this.context=e,this.tvkeyConfig=t,this.F7=function(e,t){n.context.logger.debug("TVKey license request failed: ".concat(t.name,". Response:"),e.body),n.context.eventHandler.fireError(new o.PlayerError(i.ErrorCode.DRM_FAILED_LICENSE_REQUEST,{responseCode:e.status,responseText:e.statusText,serverResponse:e.body},"Failed to load the TVKey DRM license: ".concat(e.status," ").concat(e.statusText,"."),n.context.sourceContext.sourceIdentifier))},e.logger.debug("Using DRM key system: TVKey"),this.E7=new s.DefaultContentLoader(e,{onFailure:this.F7,maxRetries:t.maxLicenseRequestRetries,requestType:a.HttpRequestType.DRM_LICENSE_TVKEY})}return e.prototype.G7=function(e){if("function"==typeof this.tvkeyConfig.prepareMessage)return this.tvkeyConfig.prepareMessage(e);var t=new Uint8Array(e.message),n=u.ArrayHelper.convertBufferSourceToUTF8(t);return'{"OttLicenseRequestMessage":'.concat(n,"}")},e.prototype.H7=function(){var e=this.tvkeyConfig.headers||{};return r({"Content-Type":"application/json"},e)},e.prototype.handleLicenseRequest=function(e){if(!this.tvkeyConfig.LA_URL)return Promise.reject(new Error("No LA URL given"));var t=this.G7(e),n=this.H7();return this.E7.load(this.tvkeyConfig.LA_URL,a.HttpRequestMethod.POST,a.HttpResponseType.TEXT,t,n,this.tvkeyConfig.withCredentials,"application/json")},e.prototype.prepareLicense=function(e){return"function"==typeof this.tvkeyConfig.prepareLicense?this.tvkeyConfig.prepareLicense(e):"string"==typeof e?u.ArrayHelper.stringToArrayWithoutEncoding(e):new Uint8Array(e)},e.prototype.getCDMData=function(){return null},e.prototype.getKeyUuidsFromInitData=function(e){return(0,c.parseKidsFromTVKeyPssh)(e,this.context.logger)},e.prototype.getIdentifierFromInitData=function(e){try{var t=u.ArrayHelper.stringToArrayWithoutEncoding(e),n=(0,c.parseKidsFromTVKeyPssh)(t.buffer,this.context.logger);return n.length?n.join(";"):e}catch(t){return this.context.logger.debug("Failed to extract key IDs for TVKey identifier:",t),e}},e.prototype.getMediaKeySystemConfiguration=function(){var e;return r({persistentState:d.MediaKeySystemConfig.PersistentState.Optional,sessionTypes:[d.MediaKeySystemConfig.SessionType.Temporary]},null!==(e=this.tvkeyConfig.mediaKeySystemConfig)&&void 0!==e?e:{})},e.prototype.dispose=function(){this.E7.dispose()},e}();t.TVKey=l},34079:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createDrmApi=function(e,t){return new(function(){function n(){}return n.prototype.renewLicense=function(n){var i=e();if(!i)return t.debug("Unable to renew license, since there is no source loaded."),Promise.reject("NoSourceLoaded");var o=i.get(r.ServiceName.DrmService);return o?o.renewLicense(n):(t.debug("No DRM source loaded, ignoring renewLicense call"),Promise.reject("NoDrmSource"))},n}())};var r=n(80813)},35987:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.allSettledPromises=function(e){if(!e||!Array.isArray(e))return Promise.reject("The passed argument is not an array");var t=[],n=e.length>0,r=Promise.resolve(null);return e.forEach((function(e,i){r=r.then((function(){return e})).then((function(e){t[i]=e,n=!1})).catch((function(){t[i]=void 0}))})),r.then((function(){return n?Promise.reject(t):t}))}},47272:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DRMModuleDefinition=void 0;var r=n(62756),i=n(67579),o=n(88559),s=n(34079),a=n(29173),u=n(93101),d=n(70581),c=n(80680),l=n(24109),p=n(92656),y=n(4358),f=n(55327),h=n(78763),g=n(6234);t.DRMModuleDefinition={name:r.ModuleName.DRM,module:{DrmService:u.DrmService,DRMManager:a.DRMManager,FairplayHandler:l.FairplayHandler,PlayReady:p.PlayReady,DRMDetectorService:h.DRMDetectorService,WebKitPrefixedEMEHandler:c.WebKitPrefixedEMEHandler,UnprefixedEMEHandler:d.UnprefixedEMEHandler,parseInitData:g.parseInitData,getLicenseState:f.getLicenseState,getLicenseInfoKey:y.getLicenseInfoKey,createDrmApi:s.createDrmApi,ContentProtectionHelper:o.ContentProtectionHelper},exports:{MediaKeySystemConfig:i.MediaKeySystemConfig}},t.default=t.DRMModuleDefinition},49988:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.ProtoBufWireType=void 0,t.parseProtoBufMessage=function(e){for(var t=h(e)?new Uint8Array(e).buffer:e,n=[],r=new l(t);r.hasNext();){var i=f(r);if(!i)break;var o=g(i,r);o&&n.push(o)}return n},t.getFieldsByFieldNumber=function(e,t){return e.filter((function(e){return e.fieldNumber===t}))},t.findFieldByFieldNumber=function(e,t){return e.find((function(e){return e.fieldNumber===t}))},t.isLengthLimitedProtoBufField=function(e){return void 0!==e&&e.wireType===r.LengthLimited&&h(e.value)};var r,i=127,o=128,s=7,a=7,u=3,d=8,c=4;!function(e){e[e.VarInt=0]="VarInt",e[e.Bit64=1]="Bit64",e[e.LengthLimited=2]="LengthLimited",e[e.StartGroup=3]="StartGroup",e[e.EndGroup=4]="EndGroup",e[e.Bit32=5]="Bit32"}(r||(t.ProtoBufWireType=r={}));var l=function(){function e(e){this.Idb=0,this.Jdb=new Uint8Array(e)}return e.prototype.hasNext=function(){return this.Idb<this.Jdb.byteLength},e.prototype.getNext=function(){if(this.hasNext()){var e=this.Jdb[this.Idb];return this.Idb++,e}},e.prototype.reset=function(){this.Idb=0},e}();function p(e){var t,n=[];do{if(void 0===(t=e.getNext()))break;n.push(t&i)}while(t&o);return n.reduce((function(e,t,n){return e+(t<<n*s)}),0)}function y(e,t){for(var n=[],r=0;r<t;r++){var i=e.getNext();if(void 0===i)break;n.push(i)}return n}function f(e){var t=p(e);if(void 0!==t)return{wireType:t&a,fieldNumber:t>>u}}function h(e){return Array.isArray(e)&&e.every((function(e){return"number"==typeof e}))}function g(e,t){switch(e.wireType){case r.VarInt:return n(n({},e),{value:p(t)});case r.Bit64:return n(n({},e),{value:y(t,d)});case r.LengthLimited:var i=p(t);if(!i)return;return n(n({},e),{value:y(t,i)});case r.Bit32:return n(n({},e),{value:y(t,c)});case r.StartGroup:case r.EndGroup:default:return}}},51063:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseWidevineLicenseRequestProtoBuf=function(e){var t=L(e,r.LicenseRequest);if(t){var n=(0,a.findFieldByFieldNumber)(t,c);if((0,a.isLengthLimitedProtoBufField)(n)){var i=(0,a.parseProtoBufMessage)(n.value),s=(0,a.findFieldByFieldNumber)(i,l);if((0,a.isLengthLimitedProtoBufField)(s)){var u=(0,a.parseProtoBufMessage)(s.value),d=(0,a.findFieldByFieldNumber)(u,p),f=(0,a.findFieldByFieldNumber)(u,y);if((0,a.isLengthLimitedProtoBufField)(f)&&(0,a.isLengthLimitedProtoBufField)(d)){var h=o.ArrayHelper.arrayBufferToBase64(new Uint8Array(f.value).buffer),g=I((0,a.parseProtoBufMessage)(d.value));if(g)return{requestId:h,requestedKeyIds:g}}}}}},t.parseWidevineLicenseResponseProtoBuf=function(e){var t=L(e,r.License);if(t){var n=(0,a.findFieldByFieldNumber)(t,h);if((0,a.isLengthLimitedProtoBufField)(n)){var i=(0,a.parseProtoBufMessage)(n.value),u=(0,a.findFieldByFieldNumber)(i,g);if((0,a.isLengthLimitedProtoBufField)(u)){var d=o.ArrayHelper.arrayBufferToBase64(new Uint8Array(u.value).buffer),c=function(e){return(0,a.getFieldsByFieldNumber)(e,v).filter(a.isLengthLimitedProtoBufField).map((function(e){return(0,a.parseProtoBufMessage)(e.value)})).filter(D)}(t);if(0!==c.length){var l=function(e){for(var t=[],n=0,r=e;n<r.length;n++){var i=r[n],o=(0,a.findFieldByFieldNumber)(i,m);if(!(0,a.isLengthLimitedProtoBufField)(o))return;t.push(s.FormatHelper.bytesToUUID(new Uint8Array(o.value).buffer))}return t}(c);if(l&&function(e){return e.every((function(e){return"string"==typeof e}))}(l))return{requestId:d,returnedKeyIds:l}}}}}},t.parseKidsFromWidevinePssh=function(e){var t=function(e){var t=new DataView(e.buffer);if(!(t.byteLength<=b)){if(1===t.getUint8(b)&&t.byteLength>S){var n=t.getUint32(S);return e.buffer.slice(28+n*M)}return e.buffer.slice(28)}}(new Uint8Array(e));if(!t)return[];var n=I((0,a.parseProtoBufMessage)(t));return null!=n?n:[]};var r,i,o=n(74853),s=n(70233),a=n(49988),u=4,d=2,c=2,l=1,p=1,y=3,f=2,h=1,g=1,v=3,m=1,E=1,S=27,b=8,M=16;function D(e){var t=(0,a.findFieldByFieldNumber)(e,u);return(null==t?void 0:t.value)===i.Content}function L(e,t){var n=(0,a.parseProtoBufMessage)(e);if(function(e,t){return function(e){var t=(0,a.findFieldByFieldNumber)(e,E);if("number"==typeof(null==t?void 0:t.value))return null==t?void 0:t.value}(e)===t}(n,t))return function(e){var t=(0,a.findFieldByFieldNumber)(e,d);if((0,a.isLengthLimitedProtoBufField)(t))return(0,a.parseProtoBufMessage)(t.value)}(n)}function I(e){var t=(0,a.getFieldsByFieldNumber)(e,f).filter(a.isLengthLimitedProtoBufField).filter((function(e){return e.value.length===M}));if(0!==t.length)return t.map((function(e){return s.FormatHelper.bytesToUUID(new Uint8Array(e.value).buffer)}))}!function(e){e[e.LicenseRequest=1]="LicenseRequest",e[e.License=2]="License"}(r||(r={})),function(e){e[e.Content=2]="Content"}(i||(i={}))},55327:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getLicenseState=void 0,t.verifyKeysAreUsableOrPendingOnAnyLicense=function(e,t,n){var i=(0,r.getAllLicensesForKeySystem)(t,n).flatMap((function(e){return e.keyIds}));return e.filter((function(e){return i.includes(e)})).map((function(e){return(0,r.hasMatchingLicenseInfoForKeySystem)(e,(0,r.getKeySystemMap)(n,t),r.isMediaKeyStatusUnknownOrPendingOrUsable)})).every((function(e){return!0===e}))};var r=n(58857);t.getLicenseState=function(e){return e.drmLicenses}},56068:function(e,t){var n,r;Object.defineProperty(t,"__esModule",{value:!0}),t.MediaKeyStatus=t.LicenseActionType=void 0,function(e){e.AddLicense="@instance/license/add",e.UpdateLicense="@instance/license/update",e.RemoveLicense="@instance/license/remove",e.ResetLicense="@instance/license/reset",e.ResetLicenses="@instance/license/reset-all",e.SetMediaKeyStatus="@instance/license/setMediaKeyStatus",e.SetPersistentState="@instance/license/setPersistentState",e.ClearLicenseStorage="@instance/license/clearLicenseStorage",e.InitializeLicenseStorage="@instance/license/initializeLicenseStorage"}(n||(t.LicenseActionType=n={})),function(e){e.Unknown="unknown",e.Usable="usable",e.Expired="expired",e.Released="released",e.Pending="status-pending",e.OutputRestricted="output-restricted",e.OutputDownscaled="output-downscaled",e.InternalError="internal-error"}(r||(t.MediaKeyStatus=r={}))},58857:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.hasMatchingLicenseInfoForKeySystem=t.LicenseStorage=void 0,t.isMediaKeyStatusUnknownOrPendingOrUsable=function(e){return e.mediaKeyStatus===d.MediaKeyStatus.Usable||e.mediaKeyStatus===d.MediaKeyStatus.Pending||e.mediaKeyStatus===d.MediaKeyStatus.Unknown},t.getKeySystemMap=y,t.getAllLicensesForKeySystem=f;var i=n(3714),o=n(93204),s=n(4358),a=n(91921),u=n(55327),d=n(56068),c=function(){function e(e){var t=this;this.BO=1,this.CO=function(e){t.zO.store.dispatch((0,s.resetLicenses)())},this.FO=function(){return u.getLicenseState(t.zO.store.getState())},this.GO=function(e){t.zO.store.dispatch(e)},this.zO=e,this.zO.store.hasReducer("drmLicenses")||(this.zO.store.addReducer("drmLicenses",a.LicenseReducer),this.zO.store.dispatch((0,s.initializeLicenseStorage)(e.storedConfig))),this.DO(),this.CO=this.CO.bind(this),window.addEventListener("beforeunload",this.CO)}return e.prototype.DO=function(){var e=this;this.AO=(0,o.subscribe)(this.zO.store)((function(e){return u.getLicenseState(e)}),(function(t){return e.EO(t)}))},e.prototype.EO=function(e){(0,s.maybeStoreLicences)(e,this.zO.storedConfig)},e.prototype.add=function(e){var t=e.systemName,n=e.initData,r=e.initDataStr;if(!t||!r||this.getLicense(r,t))return!1;var i={hasLicense:!1,initData:n,initDataStr:r,license:null,isPending:!1,systemName:t,wasRequested:!1,keyIds:e.kid,mediaKeyStatus:d.MediaKeyStatus.Unknown,usedByPlayerId:this.zO.internalPlayerID};return this.GO((0,s.addLicense)({systemName:t,licenseInfo:i,initDataStr:r})),!0},e.prototype.addLicense=function(e,t){var n=t.initDataStr,o=t.license,a=t.response,u=t.sessionInfo,d=void 0===u?{}:u;if(o||a||t.restoredFromPersistentLicense){var c=this.getLicense(n,e),l=r(r(r({},c||{}),d),{isPending:!1,hasLicense:!0,license:o||null,usedByPlayerId:this.zO.internalPlayerID});l.publicId||(l.publicId=String(this.BO++)),this.zO.eventHandler.dispatchEvent(i.PlayerEvent.DrmLicenseAdded,{license:{id:l.publicId,keyIds:l.initDataStr.split(";"),keySystemString:e}});var p={licenseInfo:l,initDataStr:n,systemName:e};return this.GO(c?(0,s.updateLicense)(p):(0,s.addLicense)(p))}this.GO((0,s.removeLicense)({initDataStr:n,systemName:e}))},e.prototype.findLicenseForPublicId=function(e,t){var n,r=this.FO().drmData[t];return Object.keys(r).forEach((function(t){r[t].publicId===e&&(n=r[t])})),n},e.prototype.getEntriesWithoutLicense=function(){var e=this.FO().drmData;return Object.values(e).flatMap((function(e){return Object.values(e)})).filter((function(e){return!e.hasLicense&&!e.wasRequested}))},e.prototype.getLicense=function(e,t){var n=this.FO(),r=(0,s.getLicenseInfoKey)(e);return n.drmData[t]&&n.drmData[t][r]},e.prototype.getAllLicensesForKeySystem=function(e){return f(e,this.FO())},e.prototype.HO=function(e,t,n){var i=this.getLicense(e,t);i&&this.GO((0,s.updateLicense)({initDataStr:e,licenseInfo:n(r({},i)),systemName:t}))},e.prototype.setRequested=function(e,t){this.HO(e,t,(function(e){return r(r({},e),{wasRequested:!0})}))},e.prototype.hasLicense=function(e,n){return(0,t.hasMatchingLicenseInfoForKeySystem)(e,y(this.FO(),n),l)},e.prototype.hasUsableOrPendingMediaKey=function(e,n){return(0,t.hasMatchingLicenseInfoForKeySystem)(e,y(this.FO(),n),p)},e.prototype.hasOngoingLicenseRequests=function(e){return this.getAllLicensesForKeySystem(e).some((function(e){return!e.hasLicense&&e.wasRequested}))},e.prototype.setKeyIds=function(e,t,n){this.HO(e,t,(function(e){return r(r({},e),{keyIds:n})}))},e.prototype.setPending=function(e,t){this.HO(e,t,(function(e){return r(r({},e),{isPending:!0})}))},e.prototype.resetLicense=function(e,t){var n=this.getLicense(t,e)||{},i=r(r({},n),{keyIds:[],isPending:!1,hasLicense:!1,license:null,expiration:null,sessionId:null,wasRequested:!1});this.GO((0,s.resetLicense)({systemName:e,initDataStr:t,licenseInfo:i}))},e.prototype.remove=function(e){this.GO((0,s.removeLicense)({initDataStr:e}))},e.prototype.updateInitData=function(e){var t=e.initDataStr,n=e.systemName;this.GO((0,s.updateLicense)({initDataStr:t,licenseInfo:e,systemName:n}))},e.prototype.dispose=function(){this.zO.store.getState().drmLicenses&&!this.zO.store.getState().drmLicenses.inPersistentState?this.zO.store.dispatch((0,s.clearLicenseStorage)()):this.zO.store.dispatch((0,s.resetLicenses)()),this.AO&&this.AO(),window.removeEventListener("beforeunload",this.CO)},e}();function l(e){return e.hasLicense}function p(e){return e.mediaKeyStatus===d.MediaKeyStatus.Usable||e.mediaKeyStatus===d.MediaKeyStatus.Pending}function y(e,t){var n;return null!==(n=null==e?void 0:e.drmData[t])&&void 0!==n?n:{}}function f(e,t){var n=t.drmData[e];return n?Object.values(n):[]}t.LicenseStorage=c,t.hasMatchingLicenseInfoForKeySystem=function(e,t,n){return Object.values(t).some((function(t){return t.keyIds.includes(e)&&n(t)}))}},67579:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.MediaKeySystemConfig=void 0,function(e){!function(e){e.Required="required",e.Optional="optional"}(e.PersistentState||(e.PersistentState={})),function(e){e.Optional="optional",e.NotAllowed="not-allowed"}(e.DistinctiveIdentifier||(e.DistinctiveIdentifier={})),function(e){e.Temporary="temporary",e.PersistentLicense="persistent-license"}(e.SessionType||(e.SessionType={}))}(n||(t.MediaKeySystemConfig=n={}))},70581:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.UnprefixedEMEHandler=void 0,t.isUnprefixedEmeHandlerSupported=function(e){return window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess(e,[{initDataTypes:["cenc"],audioCapabilities:[{contentType:'audio/mp4;codecs="mp4a.40.2"'}],videoCapabilities:[{contentType:'video/mp4;codecs="avc1.4d401e"'}]},{initDataTypes:["cenc"],videoCapabilities:void 0,audioCapabilities:void 0}]):Promise.reject("no requestMediaKeySystemAccess call available")};var o,s=n(66790),a=n(40306),u=n(3336),d=n(25926),c=n(4224),l=n(3714),p=n(33468),y=n(48488),f=n(21513),h=n(74853),g=n(34841),v=n(70233),m=n(15487),E=n(19274),S=n(67579),b=n(92656),M=n(4358),D=n(55327),L=n(56068),I=n(6234);!function(e){e.KeyMessage="message",e.KeyStatusChange="keystatuseschange"}(o||(o={}));var R=function(){function e(e){var t=this;this.gp=function(e,n){if(!t.Zp)return t.closeSession(e),Promise.resolve(n);var r=t.Vp.get(e);return r&&(r.loaded=!0),t.context.logger.debug("drm license response base64:",btoa(h.ArrayHelper.arrayBufferToAsciiString(n.body,!0))),t.op(n.body,e).then((function(){return t.context.logger.debug("keySession updated successfully"),n})).catch((function(e){return t.context.logger.warn("update() failed. reason: "+e),Promise.reject(e)}))},this.encryptedEventHandler=function(e){e&&t.processMediaEncryptedEvent(e)},this.pp=function(e){t.context.logger.debug("waiting for key..."),t.Yp&&t.Yp()},this.tp=function(e,n){switch(e){case L.MediaKeyStatus.Usable:t.context.logger.debug("key ".concat(n," is now usable"));break;case L.MediaKeyStatus.Expired:t.context.logger.debug("key ".concat(n," has expired."));break;case L.MediaKeyStatus.Pending:t.context.logger.debug("key ".concat(n," does not have a status yet, still pending"));break;case L.MediaKeyStatus.OutputRestricted:t.context.logger.debug("key ".concat(n," has restricted the output"));break;default:t.context.logger.debug("Status of key ".concat(n," changed to ").concat(e))}},this.up=function(e){var n;t.context.logger.debug("key status change...");var r=e.target,i=t.Vp.get(r),o=t.sp(r.keyStatuses),s=Object.values(o),a=Object.keys(o);if(i){var u=i.initDataStr;t.context.logger.debug("key session init data",u),t.wp(o,btoa(u)),t.hasExpiredKeys(s)&&(t.closeSession(r),t.Vp.delete(r),null===(n=t.context.store)||void 0===n||n.dispatch((0,M.removeLicense)({initDataStr:u})),t.context.logger.debug("Session key expired. Closing session ".concat(r.sessionId)));var d=!(!t.context.settings.CHECK_ALL_DRM_LICENSES_FOR_KID||!t.cp)&&(0,D.verifyKeysAreUsableOrPendingOnAnyLicense)(a,(0,p.keySystemUidToKind)(t.Up),(0,D.getLicenseState)(t.cp));if(a.length>0&&d)t.context.logger.debug("all known keys of session either pending or still usable");else if(s.includes(L.MediaKeyStatus.OutputRestricted)){var c=Object.keys(o).filter((function(e){return o[e]===L.MediaKeyStatus.OutputRestricted}));t.vp(c,r,u)}}else t.context.logger.debug("failed to handle key status change, key session was removed",r)},this.context=e,this.Io=e.sourceContext.sourceIdentifier,this.Vp=new Map,this.Wp=[],this.Xp=!1,this.Jo=null}return Object.defineProperty(e.prototype,"video",{get:function(){return this.context.videoElement},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"cp",{get:function(){return this.context.store.getState()},enumerable:!1,configurable:!0}),e.prototype.dp=function(e,t){var n=this,r=[],i=[];return t&&2===t.length&&(r=t[0]||[],i=t[1]||[]),e.hasOwnProperty("initDataTypes")||(e.initDataTypes=["cenc"]),e.hasOwnProperty("distinctiveIdentifier")||(e.distinctiveIdentifier="optional"),e.videoCapabilities&&e.videoCapabilities.length<1&&delete e.videoCapabilities,e.audioCapabilities&&e.audioCapabilities.length<1&&delete e.audioCapabilities,r&&r.length>0&&(e.audioCapabilities=e.audioCapabilities||[],e.audioCapabilities=e.audioCapabilities.concat(r),(this.ap.audioRobustness||""===this.ap.audioRobustness)&&e.audioCapabilities.forEach((function(e){e.robustness=n.ap.audioRobustness}))),i&&i.length>0&&(e.videoCapabilities=e.videoCapabilities||[],e.videoCapabilities=e.videoCapabilities.concat(i),(this.ap.videoRobustness||""===this.ap.videoRobustness)&&e.videoCapabilities.forEach((function(e){e.robustness=n.ap.videoRobustness}))),this.context.logger.debug("Prepared the MediaKeySystemConfig:",e),e},e.prototype.ep=function(e,t){void 0===t&&(t=!1);var n=r({},this.dp(this.Ho.getMediaKeySystemConfiguration(),e));return(t||(0,f.default)().getState().capabilities.isTizen)&&(n.sessionTypes=[S.MediaKeySystemConfig.SessionType.Temporary]),[n,{initDataTypes:["cenc"],videoCapabilities:void 0,audioCapabilities:void 0,distinctiveIdentifier:n.distinctiveIdentifier,persistentState:n.persistentState,sessionTypes:n.sessionTypes}]},e.prototype.fp=function(e){var t=this,n=this.ep(e);return window.navigator.requestMediaKeySystemAccess(this.Up,n).catch((function(){var n=t.ep(e,!0);return window.navigator.requestMediaKeySystemAccess(t.Up,n)})).then((function(e){var n=e.getConfiguration();return t.context.store.dispatch((0,M.setPersistentState)(t.ip(n))),t.Jo=n,e.createMediaKeys()}))},e.prototype.hp=function(e,t){var n=this;if(this.Ho){this.Xp=!0;var i=t.message,o=t.target,s=this.Vp.get(o);s&&(s.expiration=o.expiration);var a=2===i.byteLength,u=btoa(h.ArrayHelper.arrayBufferToAsciiString(i,!0));this.context.logger.debug("drm license request base64:",u),this.Ho.handleLicenseRequest(t).then(this.gp.bind(this,o)).then((function(t){!a&&e.resolve(r(r({},t),{session:o,wasLicenseRestored:!1}))})).catch((function(t){n.context.logger.debug("license request failed, destroying keySession:"),n.closeSession(o),n.Vp.delete(o),e.reject(t)}))}else e.reject("session destroyed")},e.prototype.ip=function(e){var t=e||this.Jo||{},n=t.persistentState,r=t.sessionTypes,i=void 0===r?[]:r;return n===S.MediaKeySystemConfig.PersistentState.Required&&i.includes(S.MediaKeySystemConfig.SessionType.PersistentLicense)},e.prototype.jp=function(e,t,n){var r=this.video.mediaKeysObject,i=this.ip()?r.createSession(S.MediaKeySystemConfig.SessionType.PersistentLicense):r.createSession(),o={expiration:null,initData:e,initDataStr:t,loaded:!1,onKeyMessage:n};return this.Vp.set(i,o),i},e.prototype.kp=function(e,t,n,r){var i=this;this.context.logger.debug("load stored session with sessionId: ".concat(n));var s=this.hp.bind(this,r),a=this.jp(e,t,s);return a.addEventListener(o.KeyStatusChange,this.up),a.addEventListener(o.KeyMessage,s),a.load(n).then((function(e){if(!e)return i.context.logger.debug("stored session: ".concat(a.sessionId," not loaded")),void i.Vp.delete(a);i.context.logger.debug("stored session: ".concat(a.sessionId," succesfully loaded")),r.resolve({session:a,wasLicenseRestored:!0})})).catch((function(e){i.context.logger.debug("stored session: ".concat(a.sessionId," not loaded"),e),r.reject(e),i.Vp.delete(a)})),r.promise},e.prototype.lp=function(e,t,n){var r=this,i=this.hp.bind(this,n),s=this.jp(e,t,i);return s.addEventListener(o.KeyStatusChange,this.up),s.addEventListener(o.KeyMessage,i),s.generateRequest("cenc",e).catch((function(e){r.Vp.delete(s),n.reject(e),r.context.eventHandler.fireError(new u.PlayerError(a.ErrorCode.DRM_KEY_SESSION_INITIALIZATION_FAILED,{reason:e,licenseInitDataString:t},"Unable to initialize DRM key session: `MediaKeySession.generateRequest` failed."))})),n.promise},e.prototype.setMediaKeys=function(e){var t=this,n=new g.Deferred;return this.video.mediaKeysPromise=(this.video.mediaKeysPromise||Promise.resolve()).then((function(){var r=t.video.setMediaKeys(e)||Promise.resolve();return n.resolve(r),r.then((function(){return t.context.logger.debug("MediaKeys ".concat(null===e?"reset":"set"," successfully"))})).catch((function(e){return t.context.logger.debug("Could not set MediaKeys:",e),Promise.reject(e)}))})),n.promise},e.prototype.mp=function(e){e||this.context.eventHandler.dispatchEvent(l.PlayerEvent.Warning,new d.PlayerWarning(c.WarningCode.DRM_SERVER_CERTIFICATE_NOT_SUPPORTED))},e.prototype.onServerCertificateSetFailed=function(e,t,n){n.reason=t instanceof Error?t.message:"unknown error",this.context.eventHandler.fireError(new u.PlayerError(a.ErrorCode.DRM_CERTIFICATE_ERROR,n,"Unable to setup the key system: `MediaKeys.setServerCertificate` failed."))},e.prototype.np=function(e,t){var n=this;this.ap.serverCertificate&&e&&e.setServerCertificate(this.ap.serverCertificate).then((function(e){return n.mp(e)})).catch((function(r){return n.onServerCertificateSetFailed(e,r,t)}))},e.prototype.setupKeySystem=function(e){var t=this,n={drmCapabilities:e,keySystem:this.Up,eme:"unprefixed"};return this.fp(e).then((function(e){return n.createdMediaKeys=e,null===t.Up?(t.context.logger.debug("EMEHandler was unloaded during key-system creation"),Promise.reject(new Error(s.DrmSetupError.CANCELLED))):(t.video.mediaKeysObject=e,t.np(e,n),t.setMediaKeys(e))})).catch((function(e){var r;return(null==e?void 0:e.message)!==s.DrmSetupError.CANCELLED&&(n.reason=null!==(r=null==e?void 0:e.message)&&void 0!==r?r:e,t.context.eventHandler.fireError(new u.PlayerError(a.ErrorCode.DRM_MEDIA_KEY_INITIALIZATION_FAILED,n,"Unable to initialize the DRM key system with the specified combinations."))),Promise.reject(e)}))},e.prototype.op=function(e,t){return this.Xp=!1,e&&this.Ho?(this.Wp.includes(t)||this.Wp.push(t),t.update(this.Ho.prepareLicense(e))):Promise.reject()},e.prototype.processMediaEncryptedEvent=function(e){var t=this;this.context.logger.debug("encrypted event for initData: "+String.fromCharCode.apply(null,new Uint8Array(e.initData)));var n=(0,I.parseInitData)(e.initData);n&&n.length&&this.bp&&n.forEach((function(e){return t.bp(e)}))},e.prototype.hasExpiredKeys=function(e){return e.some((function(e){return e===L.MediaKeyStatus.Expired}))},e.prototype.qp=function(e){var t=e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer);return(0,p.keySystemUidToKind)(this.Up)===p.KeySystemKind.PLAYREADY&&(0,m.isEdge)()&&b.PlayReady.kidToCENC(t),v.FormatHelper.bytesToUUID(t)},e.prototype.rp=function(e,t){var n="",r="";return"string"==typeof e?(n=this.qp(t),r=String(e)):"string"==typeof t?(n=this.qp(e),r=String(t)):this.context.logger.debug("could not parse key id and status",typeof e,typeof t),[n,r]},e.prototype.sp=function(e){var t=this,n={};return e.forEach((function(e,r){var i=t.rp(e,r),o=i[0],s=i[1];n[o]=s})),n},e.prototype.vp=function(e,t,n){var r,i=this;this.context.eventHandler.dispatchEvent(l.PlayerEvent.Warning,new d.PlayerWarning(c.WarningCode.DRM_RESTRICTED_OUTPUT,"Output restricted for "+e.join(", "))),e.forEach((function(e){var t;return null===(t=i.context.store)||void 0===t?void 0:t.dispatch((0,y.trackDrmKidError)(e))})),this.closeSession(t),this.Vp.delete(t),null===(r=this.context.store)||void 0===r||r.dispatch((0,M.removeLicense)({initDataStr:n}))},e.prototype.wp=function(e,t){var n=this;Object.keys(e).forEach((function(r){var i,o,s=e[r];null===(i=n.context.store)||void 0===i||i.dispatch((0,M.setMediaKeyStatus)((0,p.keySystemUidToKind)(n.Up),r,s,t)),s===L.MediaKeyStatus.InternalError&&(null===(o=n.context.store)||void 0===o||o.dispatch((0,y.trackDrmKidError)(r))),n.tp(s,r)}))},e.prototype.unload=function(){var e,t=this,n=[];this.Vp.forEach((function(e,t){return n.push(t)})),this.video.removeEventListener(E.MediaElementEvent.waitingforkey,this.pp),this.video.removeEventListener(E.MediaElementEvent.encrypted,this.encryptedEventHandler);var r=n.map((function(e){var n=t.closeSession(e);return t.Wp.includes(e)?n:Promise.resolve()}));this.Ho=null,this.Vp=new Map,this.Wp=[],this.Up=null,this.Yp=null,this.video.mediaKeysObject=null;var o=null===(e=this.Zp)||void 0===e?void 0:e.catch((function(e){return t.context.logger.debug("Caught key system promise rejection:",e)})).finally((function(){return t.Zp=void 0}));return Promise.all(i(i([],r,!0),[o],!1)).then((function(){return t.setMediaKeys(null).catch((function(e){t.context.logger.debug("couldn't remove media keys!",e)}))})).catch((function(e){t.context.logger.debug("couldn't close key session!",e)}))},e.prototype.closeSession=function(e){var t=this,n=this.Vp.get(e);return n&&(e.removeEventListener(o.KeyStatusChange,this.up),e.removeEventListener(o.KeyMessage,n.onKeyMessage)),Promise.race([e.closed,e.close()]).catch((function(e){t.context.logger.debug("couldn't close session on unload",e)}))},e.prototype.load=function(e,t,n,r){return this.Ho=e,this.Up=t,this.ap=n[(0,p.keySystemUidToKind)(t)],this.video.addEventListener(E.MediaElementEvent.encrypted,this.encryptedEventHandler),this.video.addEventListener(E.MediaElementEvent.waitingforkey,this.pp),this.Zp=this.setupKeySystem(r),this.Zp},e.prototype.xp=function(e){var t=!1;return this.Vp.forEach((function(n){return t=t||n.initData===e})),t},e.prototype.reInitialize=function(){this.video.eventHandler.hasEventHandler(E.MediaElementEvent.encrypted,this.encryptedEventHandler)||this.video.addEventListener(E.MediaElementEvent.encrypted,this.encryptedEventHandler),this.video.eventHandler.hasEventHandler(E.MediaElementEvent.waitingforkey,this.pp)||this.video.addEventListener(E.MediaElementEvent.waitingforkey,this.pp)},e.prototype.yp=function(e){if(!this.cp)return!1;for(var t=(0,p.keySystemUidToKind)(this.Up),n=(0,D.getLicenseState)(this.cp).drmData[t],r=0,i=Object.keys(n);r<i.length;r++){var o=n[i[r]];if(o.sessionId===e)return void 0===o.usedByPlayerId||o.usedByPlayerId===this.context.internalPlayerID}return!1},e.prototype.zp=function(e,t,n,r){return e?this.xp(e)?(r.reject({message:"session for requested initData already present"}),r.promise):n&&this.ip()&&this.yp(n)?this.kp(e,t,n,r):this.lp(e,t,r):(r.reject({message:"no initData provided for license request"}),r.promise)},e.prototype.Ap=function(){return new g.Deferred},e.prototype.requestLicense=function(e,t,n){var r=this;this.Xp=!0,this.context.logger.debug("request a new license for ".concat(t," ..."));var i=this.Ap();return this.Zp.then((function(){return null===r.video.mediaKeysObject?Promise.reject(new Error(s.DrmSetupError.CANCELLED)):r.zp(e,t,n,i)})).then((function(e){r.Xp=!1;var n=e.session,i=void 0===n?{}:n;return{initDataStr:t,license:e.wasLicenseRestored?null:e.body,sessionInfo:{sessionId:i.sessionId,expiration:i.expiration},restoredFromPersistentLicense:e.wasLicenseRestored}})).catch((function(e){return r.Xp=!1,Promise.reject({response:e,initDataStr:t})}))},e.prototype.getKeyUuidsFromInitData=function(e){var t,n;return null!==(n=null===(t=this.Ho)||void 0===t?void 0:t.getKeyUuidsFromInitData(e))&&void 0!==n?n:[]},e.prototype.getIdentifierFromInitData=function(e){return this.Ho?this.Ho.getIdentifierFromInitData(e):e},e.prototype.isLicenseRequestOngoing=function(){return this.Xp},e.prototype.setWaitingForKeyListener=function(e){this.Yp=e},e.prototype.setEncryptedListener=function(e){this.bp=e},e.prototype.suspend=function(){return Promise.resolve()},e.prototype.disposeSessionForInitData=function(e){var t=this,n=[];return this.Vp.forEach((function(r,i){r.initDataStr===e&&(n.push(t.closeSession(i).then((function(){t.context.logger.debug("Closed session "+i.sessionId)}))),t.Wp=t.Wp.filter((function(e){return e.sessionId!==i.sessionId})),t.Vp.delete(i))})),n.length<1?Promise.reject("Unable to find an existing drm session for "+e):Promise.all(n)},e}();t.UnprefixedEMEHandler=R},78763:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.DRMDetectorService=void 0;var o=n(33468),s=n(74853),a=n(15487),u=n(35987),d=n(24273),c=function(){function e(){this.gq=new d.EMEWrapper}return e.prototype.isSupported=function(e){return this.gq?this.gq.isSupported(e):Promise.reject("No supported EME available")},e.prototype.getSupported=function(){var e=this,t=Object.keys(o.KeySystemMap).flatMap((function(e){return o.KeySystemMap[e]}));return(0,u.allSettledPromises)(t.map((function(t){return e.isSupported(t).catch((function(){return""}))}))).then((function(e){return e.filter((function(e){return e}))}))},e.prototype.getSupportedCapabilities=function(e,t,n){var o;if(p(t)){var a=l(t).map((function(e){return r(r({},e),{contentType:e.contentType.replace("ac-3","ec-3")})}));a=a.filter((function(e){return!(0,s.contains)(t,e)})),o=i(i([],t,!0),a,!0)}else o=t;return this.gq.getSupportedCapabilities(e,o,n).then((function(e){if(p(t)){var n=e.audioCapabilities;e.audioCapabilities=function(e){var t=e.filter((function(e){var t;return null===(t=e.contentType)||void 0===t?void 0:t.includes("ec-3")})).map((function(e){return r(r({},e),{contentType:e.contentType.replace("ec-3","ac-3")})})).filter((function(t){return!(0,s.contains)(e,t)}));return i(i([],e,!0),t,!0)}(n),e.audioCapabilities=e.audioCapabilities.filter((function(e){return(0,s.contains)(t,e,(function(e,t){return e.contentType===t.contentType}))}))}return e}))},e.prototype.dispose=function(){this.gq.dispose()},e}();function l(e){return e.filter((function(e){var t;return null===(t=e.contentType)||void 0===t?void 0:t.includes("ac-3")}))}function p(e){return l(e).length>0&&(0,a.isTizen)()&&(0,a.getTizenVersion)().major>=a.TIZEN_2018_MAJOR_VERSION}t.DRMDetectorService=c},80680:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebKitPrefixedEMEHandler=void 0,t.isWebkitPrefixedEmeHandlerSupported=function(e,t){return"function"==typeof e.getWrappedElement().webkitGenerateKeyRequest&&"function"==typeof e.canPlayType&&e.canPlayType("video/mp4",t)?Promise.resolve({keySystem:t}):Promise.reject("DOMException: Unsupported keySystem")};var r,i,o=n(40306),s=n(3336),a=n(34841),u=n(19274),d=n(6234);!function(e){e[e.Domain=6]="Domain"}(r||(r={})),function(e){e[e.HDCP=1212433232]="HDCP"}(i||(i={}));var c=function(){function e(e){var t=this;this.Ip=function(e){if(t.context.logger.debug("key needed..."),t.Cp&&t.Cp(),e){var n=(0,d.parseInitData)(e.initData);n&&n.length&&t.Fp&&t.invokeEncryptedListener(e.initData,n)}},this.context=e,this.Dp=e.sourceContext.sourceIdentifier,this.video=e.videoElement,this.Ep=[],this.Hp=[]}return e.prototype.invokeEncryptedListener=function(e,t){var n=this;t.forEach((function(e){return n.Fp(e)}))},e.prototype.Jp=function(e,t,n){this.Ep.includes(n)&&this.Ep.splice(this.Ep.indexOf(n)),this.context.logger.debug("keySystem: "+this.selectedKeySystem+", license: "+e+", KID: "+t+", sessionId: "+n),this.video.webkitAddKey(this.selectedKeySystem,e,t,n)},e.prototype.Kp=function(e,t,n){this.Bp=!1,null!==e?this.Jp(this.keySystem.prepareLicense(e),t,n):this.context.logger.debug("Empty license response")},e.prototype.Lp=function(e,t){null!==e&&e.deferred.reject();var n=t.target||{},a=n.error||n.errorCode||{},u=a.code,d=a.systemCode;this.context.logger.debug("A decryption key error was encountered:",{error:a,code:u,systemCode:d}),u===r.Domain&&d===i.HDCP?this.context.eventHandler.fireError(new s.PlayerError(o.ErrorCode.DRM_RESTRICTED_OUTPUT,void 0,void 0,this.Dp)):this.context.eventHandler.fireError(new s.PlayerError(o.ErrorCode.DRM_KEY_ERROR,{code:u,systemCode:d}))},e.prototype.Mp=function(e,t){this.context.logger.debug("key added for kid ".concat(e.kid)),Boolean(e)&&Boolean(e.license)&&e.deferred.resolve(e.license),Boolean(e)&&Boolean(e.onKeyError)&&this.video.removeEventListener(u.MediaElementEvent.webkitkeyerror,e.onKeyError)},e.prototype.Np=function(e,t){var n=this,r=t.sessionId;t.kid=e.kid,this.Ep.includes(r)?this.context.logger.debug("Session ".concat(r," already handled, ignoring...")):(this.Ep.push(r),this.Bp=!0,this.keySystem.handleLicenseRequest(t).then((function(t){n.Kp(t.body,t.kid||e.initData,r),e.license=t})).catch((function(t){return e.deferred.reject(t)})))},e.prototype.Op=function(e,t){var n=this,r={kid:t,initData:e,deferred:new a.Deferred};return this.Hp.push(r.deferred),r.onKeyError=this.Lp.bind(this,r),r.onKeyAdded=this.Mp.bind(this,r),r.onKeyMessage=this.Np.bind(this,r),this.video.addEventListener(u.MediaElementEvent.webkitkeyerror,r.onKeyError),this.video.addEventListener(u.MediaElementEvent.webkitkeyadded,r.onKeyAdded),this.video.addEventListener(u.MediaElementEvent.webkitkeymessage,r.onKeyMessage),this.video.webkitGenerateKeyRequest(this.selectedKeySystem,new Uint8Array(e)),r.deferred.promise.finally((function(){n.video.removeEventListener(u.MediaElementEvent.webkitkeyerror,r.onKeyError),n.video.removeEventListener(u.MediaElementEvent.webkitkeyadded,r.onKeyAdded),n.video.removeEventListener(u.MediaElementEvent.webkitkeymessage,r.onKeyMessage),n.Pp(r.deferred)})),r.deferred.promise},e.prototype.Pp=function(e){var t=this.Hp.findIndex((function(t){return t===e}));this.Hp.splice(t,1)},e.prototype.unload=function(){return this.Gp&&this.video.removeEventListener(u.MediaElementEvent.webkitkeyerror,this.Gp),this.Hp.forEach((function(e){e.reject("unloading the WebKITPrefixedEMEHandler")})),this.Hp=[],this.video.removeEventListener(u.MediaElementEvent.webkitneedkey,this.Ip),this.selectedKeySystem=null,this.keySystem=null,this.Cp=null,Promise.resolve()},e.prototype.load=function(e,t){return this.keySystem=e,this.selectedKeySystem=t,this.Gp&&this.video.removeEventListener(u.MediaElementEvent.webkitkeyerror,this.Gp),this.Gp=this.Lp.bind(this,null),this.video.addEventListener(u.MediaElementEvent.webkitneedkey,this.Ip),this.video.addEventListener(u.MediaElementEvent.webkitkeyerror,this.Gp),Promise.resolve()},e.prototype.reInitialize=function(){},e.prototype.requestLicense=function(e,t){var n=this;return this.Bp=!0,this.context.logger.debug("request a new license for "+t+"..."),this.Op(e).then((function(e){return n.Bp=!1,{initDataStr:t,license:e.body}})).catch((function(e){return n.Bp=!1,Promise.reject({initDataStr:t,statusCode:e.status,response:e})}))},e.prototype.getKeyUuidsFromInitData=function(e){var t,n;return null!==(n=null===(t=this.keySystem)||void 0===t?void 0:t.getKeyUuidsFromInitData(e))&&void 0!==n?n:[]},e.prototype.getIdentifierFromInitData=function(e){return this.keySystem?this.keySystem.getIdentifierFromInitData(e):e},e.prototype.isLicenseRequestOngoing=function(){return this.Bp},e.prototype.setWaitingForKeyListener=function(e){this.Cp=e},e.prototype.setEncryptedListener=function(e){this.Fp=e},e.prototype.suspend=function(){return Promise.resolve()},e}();t.WebKitPrefixedEMEHandler=c},81982:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.Widevine=void 0;var i=n(40306),o=n(3336),s=n(25926),a=n(4224),u=n(3714),d=n(4129),c=n(29669),l=n(48488),p=n(67579),y=n(51063),f=function(){function e(e,t){var n=this;this.context=e,this.M7=function(e,t){n.context.logger.debug("Widevine license request failed: ".concat(t.name,". Response:"),e.body),n.J7.retryOtherKeysOnForbiddenLicense&&403===e.status?n.context.eventHandler.dispatchEvent(u.PlayerEvent.Warning,new s.PlayerWarning(a.WarningCode.DRM_FAILED_LICENSE_REQUEST,"License access forbidden.",{responseCode:e.status,responseText:e.statusText,serverResponse:e.body})):n.context.eventHandler.fireError(new o.PlayerError(i.ErrorCode.DRM_FAILED_LICENSE_REQUEST,{responseCode:e.status,responseText:e.statusText,serverResponse:e.body},"Failed to load the Widevine DRM license: ".concat(e.status," ").concat(e.statusText,"."),n.I7))},this.I7=e.sourceContext.sourceIdentifier,this.J7=t,this.L7=new Map,e.logger.debug("Using DRM key system: Widevine"),this.K7=new d.DefaultContentLoader(e,{onFailure:this.M7,maxRetries:t.maxLicenseRequestRetries,requestType:c.HttpRequestType.DRM_LICENSE_WIDEVINE})}return e.prototype.N7=function(e){return"function"==typeof this.J7.prepareMessage?this.J7.prepareMessage(e):e.message},e.prototype.O7=function(){return this.J7.headers&&Object.keys(this.J7.headers).length>0?this.J7.headers:void 0},e.prototype.P7=function(e){var t=(0,y.parseWidevineLicenseRequestProtoBuf)(e);void 0!==t&&this.L7.set(t.requestId,t.requestedKeyIds)},e.prototype.handleLicenseRequest=function(e){if(!this.J7.LA_URL)return Promise.reject("no LA URL given");var t=this.N7(e),n=this.O7();return this.P7(t),this.K7.load(this.J7.LA_URL,c.HttpRequestMethod.POST,c.HttpResponseType.ARRAYBUFFER,t,n,this.J7.withCredentials,"application/json")},e.prototype.Q7=function(e){var t;if("function"==typeof this.J7.prepareLicense){var n=this.J7.prepareLicense({license:e});return null!==(t=null==n?void 0:n.license)&&void 0!==t?t:void 0}},e.prototype.R7=function(e){var t=new Uint8Array(e),n=this.Q7(t);return null!=n?n:t},e.prototype.S7=function(e){this.context.logger.debug("No DRM license received for key ID ".concat(e)),this.context.store.dispatch((0,l.trackDrmKidError)(e))},e.prototype.T7=function(e){var t,n=this,r=(0,y.parseWidevineLicenseResponseProtoBuf)(e);void 0!==r&&(null!==(t=this.L7.get(r.requestId))&&void 0!==t?t:[]).filter((function(e){return!r.returnedKeyIds.includes(e)})).forEach((function(e){return n.S7(e)}))},e.prototype.prepareLicense=function(e){return this.T7(e),this.R7(e)},e.prototype.getCDMData=function(){return null},e.prototype.getKeyUuidsFromInitData=function(e){return(0,y.parseKidsFromWidevinePssh)(e)},e.prototype.getIdentifierFromInitData=function(e){return e},e.prototype.getMediaKeySystemConfiguration=function(){var e,t=this.J7.mediaKeySystemConfig,n=null===(e=null==t?void 0:t.sessionTypes)||void 0===e?void 0:e.includes(p.MediaKeySystemConfig.SessionType.PersistentLicense),i={persistentState:p.MediaKeySystemConfig.PersistentState.Optional,sessionTypes:n?[p.MediaKeySystemConfig.SessionType.PersistentLicense]:[p.MediaKeySystemConfig.SessionType.Temporary]};return"object"==typeof t?r(r({},i),t):i},e.prototype.dispose=function(){this.J7=null,this.K7.dispose(),this.K7=null,this.L7.clear()},e}();t.Widevine=f},84344:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)},i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.mergeKeySystemPriorities=t.resolveDRMSystem=t.instantiateDRMSystem=void 0,t.resolveUsedDRMSystem=S;var o=n(80813),s=n(33468),a=n(70962),u=n(67579),d=n(92656),c=n(25271),l=n(31884),p=n(81982),y=n(99921),f=n(30665),h=function(e,t){var n=function(e){return"boolean"==typeof e},o=function(e){return"number"==typeof e&&e!==1/0&&e!==-1/0&&!isNaN(e)},u=Object.keys(t).filter((function(n){return!!t[n]&&n in e})).reduce((function(e,i){return e[i]=r(r({},t[i]),{licenseRequestRetryDelay:o(t[i].licenseRequestRetryDelay)?Math.max(0,t[i].licenseRequestRetryDelay):a.DefaultSettings.DRM_RETRY_DELAY,maxLicenseRequestRetries:o(t[i].maxLicenseRequestRetries)?Math.floor(Math.max(0,t[i].maxLicenseRequestRetries)):a.DefaultSettings.DRM_MAX_RETRIES,withCredentials:n(t[i].withCredentials)?t[i].withCredentials:a.DefaultSettings.DRM_WITH_CREDENTIALS}),e}),Object.create(null)),d=function(e){var t=[s.KeySystemKind.FAIRPLAY,s.KeySystemKind.PLAYREADY,s.KeySystemKind.PRIMETIME,s.KeySystemKind.WIDEVINE,s.KeySystemKind.TVKEY],n=(Array.isArray(e)?e.filter((function(e){return t.includes(e)})):[]).reduce((function(e,t){return e.includes(t)||e.push(t),e}),[]),r=[s.KeySystemKind.PLAYREADY,s.KeySystemKind.FAIRPLAY,s.KeySystemKind.TVKEY,s.KeySystemKind.WIDEVINE,s.KeySystemKind.PRIMETIME].filter((function(e){return!n.includes(e)}));return i(i([],n,!0),r,!0)}(t.preferredKeySystems);return r(r({},u),{preferredKeySystems:d})},g=function(e,t){var n=Object.keys(e).flatMap((function(t){return e[t].map((function(e){return{kind:t,uid:e}}))}));return t.flatMap((function(e){var t=e.kind;return n.map((function(e){return{emeHandler:{kind:t},keySystem:e}}))}))},v=function(e,t){var n,r,i,o=(0,f.or)((function(e){return e.keySystem.kind===s.KeySystemKind.FAIRPLAY}),(function(e){return!!t.playready&&!!t.playready.customData&&e.keySystem.kind===s.KeySystemKind.PLAYREADY&&e.emeHandler.kind===y.EMEHandlerKind.UNPREFIXED})),a=(0,f.or)((function(e){return!!t.playready&&e.keySystem.kind===s.KeySystemKind.PLAYREADY}),(function(e){return!!t.primetime&&e.keySystem.kind===s.KeySystemKind.PRIMETIME}),(function(e){return!!t.widevine&&e.keySystem.kind===s.KeySystemKind.WIDEVINE}),(function(e){return!!t.tvkey&&e.keySystem.kind===s.KeySystemKind.TVKEY})),d=e.filter((0,f.and)((0,f.not)(o),a));return(null===(i=null===(r=null===(n=t.playready)||void 0===n?void 0:n.mediaKeySystemConfig)||void 0===r?void 0:r.sessionTypes)||void 0===i?void 0:i.includes(u.MediaKeySystemConfig.SessionType.PersistentLicense))?d.filter((function(e){return e.keySystem.uid!==s.KeySystemMap[s.KeySystemKind.PLAYREADY][1]})):d},m=function(e,t){var n=function(e,t){return t.weight-e.weight},r=function(e){return e.wrapped},i=function(e,t){return function(n){var r=t(n),i=e.findIndex((function(e){return e===r}));return{weight:-1!==i?e.length-i:i,wrapped:n}}},o=i([y.EMEHandlerKind.WEBOS_2017_UNPREFIXED,y.EMEHandlerKind.WEBOS_UNPREFIXED,y.EMEHandlerKind.WEBOS_WEBKIT_PREFIXED,y.EMEHandlerKind.PLAYSTATION_4,y.EMEHandlerKind.UNPREFIXED,y.EMEHandlerKind.TIZEN,y.EMEHandlerKind.WEBKIT_PREFIXED,y.EMEHandlerKind.MS_PREFIXED],(function(e){return e.emeHandler.kind})),s=i(e,(function(e){return e.keySystem.kind}));return t.map(s).sort(n).map(r).reduce((function(e,t){var n=e[e.length-1];return void 0!==n&&n[n.length-1].keySystem.kind===t.keySystem.kind?n.push(t):e.push([t]),e}),[]).flatMap((function(e){return e.map(o).sort(n).map(r)}))},E=function(e,t,n){switch(e){case s.KeySystemKind.FAIRPLAY:throw new Error("Can not create Fairplay instance");case s.KeySystemKind.PLAYREADY:return new d.PlayReady(n,t.playready);case s.KeySystemKind.PRIMETIME:return new c.PrimeTime(n,t.primetime);case s.KeySystemKind.WIDEVINE:return new p.Widevine(n,t.widevine);case s.KeySystemKind.TVKEY:return new l.TVKey(n,t.tvkey);default:throw new Error("Could not create KeySystem ".concat(e))}};function S(e,n,r){r.logger.debug("Resolving DRM key system...",{keySystemMap:e,config:n});var i=h(e,n),o=(0,y.allEMEHandlers)(r).filter((function(e){return e.isAvailable})),a=(0,t.mergeKeySystemPriorities)(e,n),u=g(a,o),d=v(u,i),c=m(i.preferredKeySystems,d),l=function(e){if(0===e.length){var t=Object.keys(n).filter((function(e){return Object.values(s.KeySystemKind).includes(e)})).join(", ");return Promise.reject("Unable to find a valid DRM key system! The provided DRM key system configurations [".concat(t,"] are not supported."))}var i=e[0],a=e.slice(1);r.logger.debug("Checking support for DRM key system",JSON.stringify(i));var u=o.find((function(e){return e.kind===i.emeHandler.kind}));return u?u.isSupported(i.keySystem.uid).then((function(){return i})).catch((function(){return l(a)})):l(a)};return l(c)}t.instantiateDRMSystem=function(e,t,n){return r(r({},e),{config:t,emeHandler:r(r({},e.emeHandler),{instance:(0,y.createEMEHandlerInstance)(e.emeHandler.kind,n)}),keySystem:r(r({},e.keySystem),{instance:E(e.keySystem.kind,t,n)})})},t.resolveDRMSystem=function(e,n,r){var i=h(e,n),a=r.serviceManager.get(o.ServiceName.DrmService);return(a?a.getResolvedKeySystemFromSourceConfig():Promise.resolve(null)).then((function(o){return o&&0===Object.values(s.KeySystemKind).filter((function(e){return!(e in o.config)&&e in i})).length?(0,t.instantiateDRMSystem)(o,i,r):S(e,n,r).then((function(e){return(0,t.instantiateDRMSystem)(e,i,r)}))}))},t.mergeKeySystemPriorities=function(e,t){for(var n,r,i={fairplay:[],playready:[],primetime:[],widevine:[],tvkey:[]},o=function(e,o){if(!e||!Object.values(s.KeySystemKind).some((function(t){return t===e})))return"continue";var a=e,u=null!==(r=null===(n=null==t?void 0:t[a])||void 0===n?void 0:n.keySystemPriority)&&void 0!==r?r:[];i[a]=u;var d=o.filter((function(e){return!u.includes(e)}));i[a]=i[a].concat(d)},a=0,u=Object.entries(e);a<u.length;a++){var d=u[a];o(d[0],d[1])}return i}},86558:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MSPrefixedEMEHandler=void 0,t.isMsPrefixedEmeHandlerSupported=function(e){return window.MSMediaKeys&&"function"==typeof MSMediaKeys.isTypeSupported&&MSMediaKeys.isTypeSupported(e)?Promise.resolve({keySystem:e}):Promise.reject("DOMException: Unsupported keySystem")};var r,i=n(40306),o=n(3336),s=n(34841),a=n(70850),u=n(19274),d=n(6234);!function(e){e.KeyMessage="mskeymessage",e.KeyAdded="mskeyadded",e.KeyError="mskeyerror"}(r||(r={}));var c=function(){function e(e){var t=this;this.h6=function(){if(t.T6)return Promise.reject("EME handler destroyed");if(t.f6.readyState===HTMLMediaElement.HAVE_NOTHING)return a.Util.delay(250,t.h6);if(t.f6.msKeys)return t.U6.logger.debug("session already created"),Promise.resolve();try{t.e6=new MSMediaKeys(t.V6),t.f6.msSetMediaKeys(t.e6)}catch(e){return t.W6.fireError(new o.PlayerError(i.ErrorCode.DRM_MEDIA_KEY_INITIALIZATION_FAILED,{keySystem:t.V6,eme:"msPrefixed",error:e},"Unable to initialize the DRM media keys: `msSetMediaKeys` failed.")),Promise.reject(e)}return Promise.resolve()},this.s7=function(e){if(t.U6.logger.debug("onKeyNeeded"),t.Y6&&t.Y6(),e){var n=(0,d.parseInitData)(e.initData);n&&n.length&&t.b6&&n.forEach((function(e){return t.b6(e)}))}},this.U6=e,this.T6=!1,this.a6=[],this.X6=!1,this.W6=this.U6.eventHandler}return Object.defineProperty(e.prototype,"f6",{get:function(){return this.U6.videoElement},enumerable:!1,configurable:!0}),e.getVideoErrorNameFromError=function(e,t){for(var n in e)if((n.indexOf("MEDIA_ERR_")>-1||n.indexOf("MEDIA_KEYERR_")>-1)&&e[n]===t)return n;return"UNKNOWN"},e.getHexFromCode=function(e){return isFinite(e)?(e<0&&(e=4294967295+e+1),"0x"+e.toString(16).toUpperCase()):null},e.prototype.g6=function(t,n){if(this.X6=!1,null!==t&&t.deferred.reject(),n&&n.target&&n.target.error){this.f6.removeEventListener(u.MediaElementEvent.error,this.c6);var r=n.target.error,s=Number(r.code),a=Number(r.systemCode),d=Number(r.msExtendedCode),c=e.getVideoErrorNameFromError(r,s),l=e.getHexFromCode(a),p=e.getHexFromCode(d)||l,y=i.ErrorCode[i.ErrorCode.DRM_KEY_ERROR]+" - "+c+" (code: "+s+"), "+p;this.W6.fireError(new o.PlayerError(i.ErrorCode.DRM_KEY_ERROR,{code:s,systemCode:a},y))}},e.prototype.t7=function(e,t){var n=this,r=t.target.sessionId;this.d6[r]=t.target,this.X6=!0,this.U6.logger.debug("("+e.id+") onKeyMessage",JSON.stringify(t)),this.S6.handleLicenseRequest(t).then((function(t){n.U6.logger.debug("license available ("+e.id+")"),n.x7(t.body,r,e.id),e.license=t,n.X6=!1})).catch((function(t){n.U6.logger.debug("license request failed ("+e.id+")"),e.deferred.reject(t),n.X6=!1}))},e.prototype.u7=function(e,t){this.U6.logger.debug("key added for request ID ".concat(e.id)),Boolean(e)&&Boolean(e.license)?(this.U6.logger.debug("license request successful ("+e.id+")"),e.deferred.resolve(e.license)):e.deferred.resolve({response:"automatically added by EME",licenseRequestId:e.id}),this.X6=!1},e.prototype.v7=function(e){var t=this.S6.getCDMData();return t?this.f6.msKeys.createSession("video/mp4",e,new Uint8Array(t)):this.f6.msKeys.createSession("video/mp4",e)},e.prototype.w7=function(e){var t=this,n={deferred:new s.Deferred,id:a.Util.generateUniqueId()};return e?(this.Z6.then((function(){t.f6.msKeys?t.X6?n.deferred.reject({status:"postponed",licenseRequestId:n.id}):(0===e.byteLength&&t.U6.logger.log("no init data"),t.X6=!0,t.U6.logger.debug("create key session ("+n.id+") ..."),n.onKeyError=t.g6.bind(t,n),n.onKeyAdded=t.u7.bind(t,n),n.onKeyMessage=t.t7.bind(t,n),n.session=t.v7(new Uint8Array(e)),n.session.addEventListener(r.KeyError,n.onKeyError,!1),n.session.addEventListener(r.KeyAdded,n.onKeyAdded,!1),n.session.addEventListener(r.KeyMessage,n.onKeyMessage,!1),t.a6.push(n)):t.U6.logger.debug("video.keys not available.")})),n.deferred.promise):Promise.reject("no init data ("+n.id+")")},e.prototype.x7=function(e,t,n){this.X6=!1,e&&(this.U6.logger.debug("updating keySession ("+n+")"),this.d6[t].update(this.S6.prepareLicense(e)))},e.prototype.setWaitingForKeyListener=function(e){this.Y6=e},e.prototype.setEncryptedListener=function(e){this.b6=e},e.prototype.load=function(e,t){var n=this;return this.S6=e,this.V6=t,this.T6=!1,this.d6={},this.Z6=this.h6(),this.Z6.then((function(){n.c6&&n.f6.removeEventListener(u.MediaElementEvent.error,n.c6),n.c6=n.g6.bind(n,null),n.f6.addEventListener(u.MediaElementEvent.error,n.c6)})).catch((function(){})),this.f6.addEventListener(u.MediaElementEvent.msneedkey,this.s7),this.Z6},e.prototype.reInitialize=function(){this.f6.eventHandler.hasEventHandler(u.MediaElementEvent.msneedkey,this.s7)||this.f6.addEventListener(u.MediaElementEvent.msneedkey,this.s7),null==this.f6.msKeys?this.f6.msSetMediaKeys(this.e6):this.U6.logger.debug("Unable to reuse msKeys object as there already is an existing one on the video.")},e.prototype.y7=function(e){var t=e.getElementsByTagName("KID");if(!t)return null;for(var n="",r=0;r<t.length;r++){var i=t[r];i&&i.childNodes&&i.childNodes.length>0?n+=i.childNodes[0].nodeValue+";":i&&i.hasAttribute("value")?n+=i.getAttribute("value")+";":i&&i.hasAttribute("VALUE")?n+=i.getAttribute("VALUE")+";":this.U6.logger.debug("could not parse PlayReady KID",i)}return n.split(";")[0]||null},e.prototype.z7=function(e){var t=new RegExp("p[\0]+l[\0]+a[\0]+y[\0]+r[\0]+e[\0]+a[\0]+d[\0]+y","gi"),n=new RegExp("w[\0]+r[\0]+m[\0]+h[\0]+e[\0]+a[\0]+d[\0]+e[\0]+r","gi"),r=t.test(e)||n.test(e);if(!e.includes("<")||!r)return e;for(var i=e.slice(e.indexOf("<")),o="",s=0;s<i.length;s+=2)o+=i[s];try{var a=new DOMParser;return this.y7(a.parseFromString(o,"application/xml"))||e}catch(t){return this.U6.logger.debug("could not parse PlayReady PSSH XML, could be another cdm..."),e}},e.prototype.getKeyUuidsFromInitData=function(e){var t,n;return null!==(n=null===(t=this.S6)||void 0===t?void 0:t.getKeyUuidsFromInitData(e))&&void 0!==n?n:[]},e.prototype.getIdentifierFromInitData=function(e){return this.S6?this.S6.getIdentifierFromInitData(e):this.z7(e)},e.prototype.requestLicense=function(e,t){var n=this;return this.U6.logger.debug("request a new license for "+t+"..."),this.Z6.then((function(){return n.U6.logger.debug("keySystem is ready, sending license request..."),n.w7(e).then((function(e){return{initDataStr:t,license:e.body,response:e.response,licenseRequestId:e.licenseRequestId}})).catch((function(e){return Promise.reject({initDataStr:t,statusCode:e.status,licenseRequestId:e.licenseRequestId,response:e})}))})).catch((function(e){return Promise.reject(e)}))},e.prototype.isLicenseRequestOngoing=function(){return this.X6},e.prototype.unload=function(){var e=this;this.T6=!0,this.f6.removeEventListener(u.MediaElementEvent.msneedkey,this.s7),this.f6.removeEventListener(u.MediaElementEvent.error,this.c6),this.a6.forEach((function(t){try{var n=t.session;n.removeEventListener(r.KeyError,t.onKeyError),n.removeEventListener(r.KeyAdded,t.onKeyAdded),n.removeEventListener(r.KeyMessage,t.onKeyMessage)}catch(t){e.U6.logger.debug("Could not destroy license request context",t)}}));var t=Object.keys(this.d6||{}).map((function(t){return Promise.resolve(e.d6[t].close())}));return this.d6={},this.S6=null,this.V6=null,this.a6=[],this.Z6=null,this.Y6=null,this.e6=null,Promise.all(t).catch((function(t){return e.U6.logger.debug("couldn't close key session!",t),Promise.resolve(null)}))},e.prototype.suspend=function(){return Promise.resolve()},e}();t.MSPrefixedEMEHandler=c},88559:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ContentProtectionHelper=void 0;var i=n(25811),o=n(51682),s=n(33468),a=n(74853),u=n(70233),d=n(92656),c="_cenc:default_KID",l=function(){function e(){}return e.extractUint32FromString=function(e,t){return(e.charCodeAt(t)<<24)+(e.charCodeAt(t+1)<<16)+(e.charCodeAt(t+2)<<8)+e.charCodeAt(t+3)},e.parseKeyIds=function(e){var t=d.PlayReady.parseWrmHeader(e,4);if(!t||!t.length)return[];var n=d.PlayReady.extractKeyIdsFromPlayReadyHeaders(t);return n&&n.length?n.map((function(e){return function(e){var t=a.ArrayHelper.stringToArrayWithoutEncoding(atob(e));return d.PlayReady.kidToCENC(t),a.ArrayHelper.arrayBufferToAsciiString(t.buffer)}(e)})):[]},e.getFirstKeyId=function(e){if(!e||!e.length)return null;for(var t=0,n=e;t<n.length;t++){var r=f(n[t]);if(r&&r.length)return r[0]}return null},e.writeKeySystemId=function(e,t,n){return e.setUint32(t,parseInt(n.substring(0,8),16)),t+=4,e.setUint32(t,parseInt(n.substring(8,16),16)),t+=4,e.setUint32(t,parseInt(n.substring(16,24),16)),t+=4,e.setUint32(t,parseInt(n.substring(24,32),16)),t+4},e.writeKeyIds=function(t,n,r){return t.setUint32(n,r.length),n+=4,r.forEach((function(r){t.setUint32(n,e.extractUint32FromString(r,0)),n+=4,t.setUint32(n,e.extractUint32FromString(r,4)),n+=4,t.setUint32(n,e.extractUint32FromString(r,8)),n+=4,t.setUint32(n,e.extractUint32FromString(r,12)),n+=4})),n},e.extractKeySystemIdFromUri=function(e){return e.replace(/-/g,"").split(":")[2]},e.wrapInPsshBox=function(e,t){var n=a.ArrayHelper.stringToArrayWithoutEncoding(atob(e)),r=this.parseKeyIds(n),i=r.length>0,s=o.ISOBMFFConstants.BOX_SIZE_LENGTH+o.ISOBMFFConstants.BOX_TYPE_LENGTH+o.ISOBMFFConstants.FULL_BOX_VERSION_LENGTH+o.ISOBMFFConstants.FULL_BOX_FLAGS_LENGTH+o.ISOBMFFConstants.PSSH_SYSTEM_ID_LENGTH+o.ISOBMFFConstants.PSSH_DATA_SIZE;i&&(s+=o.ISOBMFFConstants.PSSH_KID_COUNT_LENGTH+r.length*o.ISOBMFFConstants.PSSH_KID_LEN);var u=this.extractKeySystemIdFromUri(t),d=s+n.byteLength,c=new Uint8Array(d),l=new DataView(c.buffer),p=0;if(l.setUint32(p,d),p+=4,l.setUint32(p,1886614376),p+=4,l.setUint8(p,i?1:0),p+=1,p+=3,!u||32!==u.length)return a.ArrayHelper.arrayBufferToAsciiString(n.buffer);p=this.writeKeySystemId(l,p,u),i&&(p=this.writeKeyIds(l,p,r)),l.setUint32(p,n.length),p+=4;for(var y=0;y<n.byteLength;y++)l.setUint8(p+y,n[y]);return btoa(a.ArrayHelper.arrayBufferToAsciiString(c.buffer))},e.parseBoxSize=function(e){return new DataView(e.buffer,0).getUint32(0)},e.parseBoxType=function(e){var t=new DataView(e.buffer,4);return String.fromCharCode(t.getUint8(0))+String.fromCharCode(t.getUint8(1))+String.fromCharCode(t.getUint8(2))+String.fromCharCode(t.getUint8(3))},e.isValidPsshBox=function(e){var t=a.ArrayHelper.stringToArrayWithoutEncoding(atob(e)),n=this.parseBoxSize(t),r=this.parseBoxType(t);return n===t.byteLength&&"pssh"===r},e.extractKidsFromPSSHBox=function(e){if(!e||e.byteLength<3)return[];var t=8,n=[],r=new DataView(e);if(r.getUint8(t)<=0)return[];t+=20;var i=r.getUint32(t);t+=4;for(var o=0;o<i;o++){for(var s="",a=t;a<t+16;a++)s+=("00"+r.getUint8(a).toString(16)).slice(-2);t+=16,n.push(u.FormatHelper.beautifyUUID(s))}return n},e.parseContentProtection=function(t,n){var r=function(e){if(i.DRMSchemeIDURIs[e])return e;var t=(0,s.keySystemUidToKind)(e);return(0,i.keySystemNameToSchemeUri)(t)}(t.keyformat);if(!r)return null;e.isValidPsshBox(n)||(n=e.wrapInPsshBox(n,r));var o={schemeIdUri:r,pssh:n};return t.keyid&&(o.defaultKid=t.keyid),o},e.parseContentProtectionDescriptors=function(e){return e.filter(p).map(y)},e}();function p(e){var t;return i.DRMSchemeIDURIs.hasOwnProperty(null===(t=null==e?void 0:e._schemeIdUri)||void 0===t?void 0:t.toLowerCase())}function y(e){var t,n={schemeIdUri:e._schemeIdUri.toLowerCase(),name:i.DRMSchemeIDURIs[e._schemeIdUri.toLowerCase()]};"cenc"===n.name&&"string"==typeof e[c]&&(n.defaultKid=e[c].toLowerCase());var o=(null===(t=e.pssh)||void 0===t?void 0:t.length)>0?e.pssh:function(e,t){return(null==e?void 0:e.length)>0?e.map((function(e){return{__text:l.wrapInPsshBox(e.__text,t)}})):[]}(e.pro,e._schemeIdUri);return o.length>0&&(n.pssh=[],n.kids=[],n.psshData=[]),o.forEach((function(e){var t=atob(e.__text),i=a.ArrayHelper.stringToArrayWithoutEncoding(t).buffer,o=l.extractKidsFromPSSHBox(i);n.pssh.push(t),n.psshData.push(i),n.kids=r(r([],n.kids,!0),o,!0)})),n}function f(e){var t=e._schemeIdUri.toLowerCase(),n=i.DRMSchemeIDURIs[t];return"cenc"===n&&"string"==typeof e[c]?[e[c].toLowerCase()]:"playready"===n&&e.pro&&e.pro.length?function(e){var t=h(e,"pro");return l.parseKeyIds(t).map((function(e){return u.FormatHelper.bytesToUUID(a.ArrayHelper.stringToArrayWithoutEncoding(e))}))}(e):function(e){var t=h(e,"pssh");return l.extractKidsFromPSSHBox(t.buffer)}(e)}function h(e,t){var n=function(e,t){var n,r,i=null!==(n=e[t])&&void 0!==n?n:null;if(!i)return"";var o=null!==(r=i[0])&&void 0!==r?r:null;return o?o.__text:""}(e,t);return a.ArrayHelper.stringToArrayWithoutEncoding(atob(n))}t.ContentProtectionHelper=l},91921:function(e,t,n){var r,i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.LicenseReducer=void 0;var o=n(33468),s=n(3793),a=n(4358),u=n(56068),d={drmData:{},inPersistentState:!1};function c(e,t,n){var r,o=(0,a.getLicenseInfoKey)(t),s=i(i({},e),{drmData:i({},e.drmData)});return n?(e.drmData[n]?s.drmData[n]=i(i({},e.drmData[n]),((r={})[o]=i({},e.drmData[n][o]),r)):s.drmData[n]={},s):s}function l(e,t){var n,r=t.initDataStr,o=t.licenseInfo,s=t.systemName,u=c(e,r,s),d=(0,a.getLicenseInfoKey)(r),l=e.drmData[s]&&e.drmData[s][d]||{};return u.drmData[s]=i(i({},e.drmData[s]),((n={})[d]=i(i({},l),o),n)),u}t.LicenseReducer=(0,s.default)(d,((r={})[u.LicenseActionType.AddLicense]=function(e,t){return l(e,t.payload)},r[u.LicenseActionType.UpdateLicense]=function(e,t){return l(e,t.payload)},r[u.LicenseActionType.RemoveLicense]=function(e,t){return function(e,t){var n=t.initDataStr,r=null,i=(0,a.getLicenseInfoKey)(n);return Object.keys(e.drmData).forEach((function(t){if(t){var s=(r=c(r||e,n,o.KeySystemKind[t])).drmData[t];r.drmData[t]=s?Object.keys(s).filter((function(e){return i!==e})).reduce((function(e,t){return e[t]=s[t],e}),{}):{}}})),r||e}(e,t.payload)},r[u.LicenseActionType.ResetLicense]=function(e,t){return l(e,t.payload)},r[u.LicenseActionType.ResetLicenses]=function(e){return function(e){var t={};return Object.keys(e.drmData).forEach((function(n){n&&(t[n]={},Object.entries(e.drmData[n]).forEach((function(e){var r=e[0],o=e[1];t[n][r]=i(i({},o),{keyIds:[],license:null,hasLicense:!1,isPending:!1,wasRequested:!1,initData:null,usedByPlayerId:void 0})})))})),{inPersistentState:e.inPersistentState,drmData:t}}(e)},r[u.LicenseActionType.SetPersistentState]=function(e,t){var n=t.payload;return i(i({},e),{inPersistentState:n})},r[u.LicenseActionType.ClearLicenseStorage]=function(){return d},r[u.LicenseActionType.InitializeLicenseStorage]=function(e,t){var n=t.payload;return(0,a.getInitialLicenseState)(n.storageHandler)},r[u.LicenseActionType.SetMediaKeyStatus]=function(e,t){var n,r=t.payload,o=r.keySystemKind,s=r.keyUuid,a=r.status,u=r.initDataStr,d=e.drmData[o];if(!(null==d?void 0:d[u]))return e;var c=i({},d),l=c[u];return l.keyIds.includes(s)&&(c[u]=i(i({},l),{mediaKeyStatus:a})),i(i({},e),{drmData:i(i({},e.drmData),(n={},n[o]=c,n))})},r))},92378:function(e,t,n){var r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return e.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseKidsFromTVKeyPssh=function(e,t){try{var n=(0,u.parseInitData)(e).flatMap((function(e){return function(e,t){var n,s=null!==(n=e.kid)&&void 0!==n?n:[],a=function(e,t){var n=e.initData,r=new DataView(n),s=function(e){var t=new DataView(e),n=i.ISOBMFFConstants.BOX_SIZE_LENGTH+i.ISOBMFFConstants.BOX_TYPE_LENGTH+i.ISOBMFFConstants.FULL_BOX_VERSION_LENGTH+i.ISOBMFFConstants.FULL_BOX_FLAGS_LENGTH+i.ISOBMFFConstants.PSSH_SYSTEM_ID_LENGTH;if(t.getUint8(i.ISOBMFFConstants.BOX_SIZE_LENGTH+i.ISOBMFFConstants.BOX_TYPE_LENGTH)>0){var r=t.getUint32(n);n+=i.ISOBMFFConstants.PSSH_KID_COUNT_LENGTH+r*i.ISOBMFFConstants.PSSH_KID_LEN}return n}(n),a=r.getUint32(s),u=s+i.ISOBMFFConstants.PSSH_DATA_SIZE;if(a<=0||u+a>n.byteLength)return t.debug("Invalid Nagra data size"),[];var d=new Uint8Array(n,u,a),c=o.ArrayHelper.convertBufferSourceToUTF8(d),l=JSON.parse(atob(c));return"string"==typeof l.keyId?[l.keyId]:[]}(e,t);return r(r([],s,!0),a,!0)}(e,t)})),s=n.map(d);return(0,a.removeDuplicates)(s)}catch(e){return t.debug("Failed to parse key IDs from TVKey PSSH data:",e),[]}};var i=n(51682),o=n(74853),s=n(70233),a=n(70850),u=n(6234),d=function(e){return e.includes("-")?e:s.FormatHelper.beautifyUUID(e)}},92656:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayReady=t.EMPTY_KEY_MESSAGE=void 0;var i=n(40306),o=n(3336),s=n(4129),a=n(57456),u=n(29669),d=n(51682),c=n(74853),l=n(70233),p=n(67579),y="<WRMHEADER";function f(e){var t="string"==typeof e?(new DOMParser).parseFromString(e,"application/xml"):e;if(!t)return null;var n=t.getElementsByTagName("LA_URL");return n.length>0?n.item(0).textContent:null}t.EMPTY_KEY_MESSAGE="KeyMessageWasEmpty";var h=function(){function e(e,t){var n=this;this.context=e,this.Tp=function(e,t){n.context.logger.debug("PlayReady license request failed: ".concat(t.name,". Response:"),e.body),n.context.eventHandler.fireError(new o.PlayerError(i.ErrorCode.DRM_FAILED_LICENSE_REQUEST,{statusCode:e.status,statusText:e.statusText,serverResponse:e.body},"Failed to load the PlayReady DRM license: ".concat(e.status," ").concat(e.statusText,"."),n.Qp))},this.Qp=e.sourceContext.sourceIdentifier,this.Rp=t,e.logger.debug("Using DRM key system: PlayReady"),this.Sp=new s.DefaultContentLoader(e,{onFailure:this.Tp,maxRetries:t.maxLicenseRequestRetries,retryDelay:t.licenseRequestRetryDelay,requestType:u.HttpRequestType.DRM_LICENSE_PLAYREADY})}return e.getPlaintextChallengeText=function(e,t){var n=e.getElementsByTagName("Challenge")[0];if(n.hasOwnProperty("innerHTML"))return'<Challenge xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols/messages">'+n.innerHTML+"</Challenge>";var r=t.indexOf("<Challenge"),i=t.indexOf("</Challenge>")+12;return t.substring(r,i)},e.prototype.eq=function(n){var r,s=n.message.buffer||n.message,a=this.Rp.hasOwnProperty("utf8message")&&this.Rp.utf8message,u=c.ArrayHelper.arrayBufferToAsciiString(s,a);if(0===u.length)return this.context.logger.debug("MediaKeyMessageEvent contained an empty message, skipping"),t.EMPTY_KEY_MESSAGE;this.context.logger.debug(u);var d=(new DOMParser).parseFromString(u,"application/xml");if(d.getElementsByTagName("Challenge")[0])if(this.Rp.hasOwnProperty("plaintextChallenge")&&this.Rp.plaintextChallenge)r='<?xml version="1.0" encoding="UTF-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsd="http://www.w3.org/2001/XMLSchema" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"><soap:Body><AcquireLicense xmlns="http://schemas.microsoft.com/DRM/2007/03/protocols"><challenge>'+e.getPlaintextChallengeText(d,u)+"</challenge></AcquireLicense></soap:Body></soap:Envelope>";else{var l=d.getElementsByTagName("Challenge")[0].childNodes[0].nodeValue;l&&(r=window.atob(l))}else this.context.logger.log("TODO: playready update needed, not implemented yet");var p={},y=u.match(/<HttpHeaders>.*<\/HttpHeaders>/);if(y&&1===y.length){var h=y[0].match(/<name>([^<]+?)<\/name>/g),g=y[0].match(/<value>([^<]+?)<\/value>/g);if(null===h||null===g||h.length!==g.length)return this.context.eventHandler.fireError(new o.PlayerError(i.ErrorCode.DRM_PLAYREADY_INVALID_HEADER_KEY_VALUE_PAIR,{headerNameListEmpty:null===h,headerValueListEmpty:null===g,headerPairLengthMismatch:(null==h?void 0:h.length)!==(null==g?void 0:g.length)},"An invalid key/value pair was encountered while parsing the PlayReady license request headers.")),null;for(var v=0;v<h.length;v++)p[h[v].replace(/<\/?name>/g,"")]=g[v].replace(/<\/?value>/g,"")}return{challenge:r,laURL:this.Rp.LA_URL||n.destinationURL||n.defaultURL||f(d)||f(r),headers:p}},e.prototype.handleLicenseRequest=function(e){var n=this.eq(e);if(n===t.EMPTY_KEY_MESSAGE)return Promise.reject(t.EMPTY_KEY_MESSAGE);if(!n||!n.laURL)return Promise.reject("no LA URL given");if(!("forceSSL"in this.Rp)||this.Rp.forceSSL){var r=document.createElement("a");r.href=n.laURL,r.protocol="https:",n.laURL=r.href}return n.headers=a.XhrHelper.mergeHeaders(n.headers,this.Rp.headers||{}),this.Sp.load(n.laURL,u.HttpRequestMethod.POST,u.HttpResponseType.ARRAYBUFFER,n.challenge,n.headers,this.Rp.withCredentials)},e.prototype.prepareLicense=function(e){try{return new Uint8Array(e)}catch(e){return this.context.eventHandler.fireError(new o.PlayerError(i.ErrorCode.DRM_KEY_ERROR,{reason:"Unable to construct a Uint8Array from the license response"})),null}},e.prototype.getCDMData=function(){if(this.Rp&&this.Rp.customData){for(var t=[],n=0;n<this.Rp.customData.length;++n)t.push(this.Rp.customData.charCodeAt(n)),t.push(0);var r=String.fromCharCode.apply(null,t);r=btoa(r);var i=e.PRCDMData.replace("%PROACTIVE%",Boolean(this.Rp.proactiveLicense)+"").replace("%CUSTOMDATA%",r),o=[];for(n=0;n<i.length;++n)o.push(i.charCodeAt(n)),o.push(0);return new Uint8Array(o).buffer}return null},e.getPlayreadyRecordsFromWrmHeader=function(e,t){for(var n=0,r=[],i=c.ArrayHelper.sparseArrayBufferToAsciiString(e.buffer,2,t);n<i.length;){var o=i.indexOf(y,n),s=i.indexOf("WRMHEADER>",o);if(o>=0&&s>o&&n<s){var a=t+2*o,u=t+2*s+20;r.push({type:1,value:e.buffer.slice(a,u)}),n=s}else n=i.length}return r},e.getPlayReadyRecordsFromPlayreadyObject=function(e,t){var n=t+4,r=[],i=new DataView(e.buffer),o=i.getUint16(n,!0);n+=2;for(var s=0;s<o;s++){var a=i.getUint16(n,!0);n+=2;var u=i.getUint16(n,!0);n+=2;var d={type:a,value:e.buffer.slice(n,n+u)};r.push(d),n+=u}return r},e.isValidPlayReadyObject=function(e,t){var n=new DataView(e.buffer,t);return!(n.getUint32(0,!0)>n.byteLength)&&y.split("").map((function(e){return e.charCodeAt(0)})).some((function(e,t){return n.getUint16(t,!0)!==e}))},e.getPlayReadyRecords=function(e,t){return this.isValidPlayReadyObject(e,t)?this.getPlayReadyRecordsFromPlayreadyObject(e,t):this.getPlayreadyRecordsFromWrmHeader(e,t)},e.parsePlayReadyRecord=function(e,t){if(1!==e.type)return null;try{return(new DOMParser).parseFromString(c.ArrayHelper.sparseArrayBufferToAsciiString(e.value),"application/xml")}catch(n){return null!==t&&t.logger.debug("could not parse PlayReady PSSH XML",n,e),null}},e.parseWrmHeader=function(e,t,n){var r=this;return void 0===n&&(n=null),this.getPlayReadyRecords(e,t).map((function(e){return r.parsePlayReadyRecord(e,n)})).filter((function(e){return null!==e}))},e.prototype.fq=function(e){var t=c.ArrayHelper.stringToArrayWithoutEncoding(e);return this.parsePlayReadyInitDataBuffer(t.buffer)},e.prototype.parsePlayReadyInitDataBuffer=function(t){for(var n=new DataView(t),r="",i=d.ISOBMFFConstants.BOX_SIZE_LENGTH,o=0;o<d.ISOBMFFConstants.BOX_TYPE_LENGTH;o++){var s=n.getInt8(i+o);r+=String.fromCharCode(s)}if("pssh"===r){i+=d.ISOBMFFConstants.BOX_TYPE_LENGTH;var a=n.getUint8(i);i+=d.ISOBMFFConstants.FULL_BOX_VERSION_LENGTH+d.ISOBMFFConstants.FULL_BOX_FLAGS_LENGTH+d.ISOBMFFConstants.PSSH_SYSTEM_ID_LENGTH,a>0&&(i+=4+n.getUint32(i)*d.ISOBMFFConstants.PSSH_KID_LEN),i+=4}return e.parseWrmHeader(new Uint8Array(t),i,this.context)},e.extractKeyIdsFromPlayReadyHeaders=function(e,t){for(var n=[],r=0;r<e.length;r++){var i=e[r].getElementsByTagName("KID");if(i&&i.length>0)for(var o=0;o<i.length;o++){var s=i[o];s&&s.childNodes&&s.childNodes.length>0?n.push(s.childNodes[0].nodeValue):s&&s.hasAttribute("value")?n.push(s.getAttribute("value")):s&&s.hasAttribute("VALUE")?n.push(s.getAttribute("VALUE")):t&&t.logger.debug("could not parse PlayReady KID",s)}}return n},e.prototype.getKeyUuidsFromInitData=function(t){return e.extractKeyIdsFromPlayReadyHeaders(this.parsePlayReadyInitDataBuffer(t),this.context).map((function(e){return atob(e)})).map((function(e){return c.ArrayHelper.stringToArrayWithoutEncoding(e)})).map((function(t){var n=new Uint8Array(t);return e.kidToCENC(n),n})).map((function(e){return l.FormatHelper.bytesToUUID(e)}))},e.prototype.getIdentifierFromInitData=function(t){if(!t.includes("<"))return t;var n=this.fq(t),r=e.extractKeyIdsFromPlayReadyHeaders(n,this.context);return r&&r.length>0?r.join(";"):t},e.prototype.getMediaKeySystemConfiguration=function(){var e=this.Rp.mediaKeySystemConfig,t={persistentState:p.MediaKeySystemConfig.PersistentState.Optional,sessionTypes:[p.MediaKeySystemConfig.SessionType.Temporary]};return"object"==typeof e?r(r({},t),e):t},e.swapBytes=function(e,t,n){var r=e[n];e[n]=e[t],e[t]=r},e.kidToCENC=function(t){e.swapBytes(t,0,3),e.swapBytes(t,1,2),e.swapBytes(t,4,5),e.swapBytes(t,6,7)},e.prototype.dispose=function(){this.Rp=null,this.Sp.dispose(),this.Sp=null},e.PRCDMData='<PlayReadyCDMData type="LicenseAcquisition"><LicenseAcquisition version="1.0" Proactive="%PROACTIVE%"><CustomData encoding="base64encoded">%CUSTOMDATA%</CustomData></LicenseAcquisition></PlayReadyCDMData>',e}();t.PlayReady=h},93101:function(e,t,n){var r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.DrmService=void 0;var i=n(66790),o=n(33468),s=n(7387),a=n(21513),u=n(93204),d=n(34841),c=n(46057),l=n(97115),p=n(55327),y=n(84344),f=n(99921),h=function(){function e(e){this.context=e,this.Qo=new d.Deferred,this.Ro=!1,this.Uo=Promise.resolve()}return e.prototype.Vo=function(){var e=this;this.Yo().then((function(){return e.Po=(0,l.createDrmManager)(e.context)}))},e.prototype.canReuseEmeHandler=function(){var e=this.So;return e===f.EMEHandlerKind.UNPREFIXED||e===f.EMEHandlerKind.MS_PREFIXED},e.prototype.reInitializeEmeHandler=function(){return this.Po.reInitializeEmeHandler()},e.prototype.resolveDrmSystemFromSourceConfig=function(e){var t=this;if(!this.To){var n=(0,o.getRelevantKeySystemMap)(e);this.To=(0,c.yieldToMain)().then((function(){return(0,y.resolveUsedDRMSystem)(n,e,t.context)})).then((function(n){return t.context.logger.debug("Early DRM key system resolved",n),r(r({},n),{config:e})})).catch((function(e){return t.context.logger.debug("Early DRM key system resolving failed:",e),null}))}},e.prototype.setDrmConfig=function(e){this.Oo=e,this.Qo=new d.Deferred,this.Ro=!1,this.Vo()},e.prototype.updateDrmConfig=function(e,t){var n=this;return this.Ro?this.Qo.promise:(this.Oo=r(r({},this.Oo),e),this.Ro=!0,this.Po.setConfig(this.Oo,t).then((function(e){n.So=e,n.Qo.resolve()})).catch((function(e){n.Ro=!1,n.Qo.reject(e)})).finally((function(){return n.Qo.promise})))},e.prototype.addInitData=function(e){var t=this;this.Po&&this.Qo.promise.then((function(){var n;return null===(n=t.Po)||void 0===n?void 0:n.addInitData(e)})).catch((function(e){(null==e?void 0:e.message)!==i.DrmSetupError.CANCELLED&&t.context.logger.debug("Adding DRM init data failed: ".concat(null==e?void 0:e.message),e)}))},e.prototype.renewLicense=function(e){var t,n;return null!==(n=null===(t=this.Po)||void 0===t?void 0:t.renewLicense(e))&&void 0!==n?n:Promise.reject("No active drm manager")},e.prototype.getUsedKeySystemKind=function(){var e;return(null===(e=this.Po)||void 0===e?void 0:e.getUsedKeySystemKind())||null},e.prototype.getUsedKeySystemUid=function(){var e;return(null===(e=this.Po)||void 0===e?void 0:e.getUsedKeySystemUid())||null},e.prototype.getUsedOrEarlyResolvedKeySystemUid=function(){var e=this.getUsedKeySystemUid();return e?Promise.resolve(e):this.To?this.To.then((function(e){var t;return null!==(t=null==e?void 0:e.keySystem.uid)&&void 0!==t?t:null})):Promise.resolve(null)},e.prototype.getResolvedKeySystemFromSourceConfig=function(){return this.To||Promise.resolve(null)},e.prototype.waitForPendingLicenseRequests=function(e){var t=this,n=function(){var n,r;return null!==(r=null===(n=t.Po)||void 0===n?void 0:n.hasOngoingLicenseRequests(e))&&void 0!==r&&r};if(!n())return Promise.resolve();this.context.logger.debug("Waiting for pending DRM license requests to complete");var r=new d.Deferred,i=(0,u.subscribe)(this.context.store)((function(e){return p.getLicenseState(e)}),(function(){n()||(i(),r.resolve())}));return r.promise},e.prototype.Wo=function(e){var t,n=this;if(null===(t=this.Po)||void 0===t?void 0:t.hasUsableMediaKey(e))return Promise.resolve();var r=new d.Deferred,i=(0,u.subscribe)(this.context.store)((function(e){return p.getLicenseState(e)}),(function(){var t;(null===(t=n.Po)||void 0===t?void 0:t.hasUsableMediaKey(e))&&(n.context.logger.debug("DRM license added for key ID ".concat(e)),i(),r.resolve())}));return this.Po&&this.Po.requestMissingLicenses(),r.promise},e.prototype.Xo=function(e){var t,n,r,i=this.getUsedKeySystemKind()===o.KeySystemKind.PLAYREADY,u=(0,a.getCapabilities)()[s.CapabilityKey.isEdge],d=null!==(n=null===(t=this.Po)||void 0===t?void 0:t.isUsingUnprefixedEmeHandler())&&void 0!==n&&n,c=i&&u&&d,l=e.hasDrmKid()?e.getDrmKid():void 0;return!(!this.Ro||void 0===l||!c||(null===(r=this.Po)||void 0===r?void 0:r.hasUsableMediaKey(l)))},e.prototype.maybeWaitForDrmLicense=function(e,t){var n=this,r=!e.isInit()||e.isSelfInit(),i=this.Xo(e),o=void 0!==t&&Object.keys(t).length>0,s=e.hasDrmKid()?e.getDrmKid():void 0;return o&&i&&r&&void 0!==s?(this.context.logger.debug("Deferring appendage of ".concat(e.getUrl()," as DRM license for key ID ").concat(s," has not yet been requested")),e.getDrmInitData().forEach((function(e){return n.addInitData(e)})),this.Wo(s)):Promise.resolve()},e.prototype.preprocessInitDataStr=function(e){return this.Po.preprocessInitDataStr(e)},e.prototype.signalInitDataShouldBeAvailable=function(){this.Po.signalInitDataShouldBeAvailable()},Object.defineProperty(e.prototype,"shutdownPromise",{get:function(){return this.Uo},enumerable:!1,configurable:!0}),e.prototype.Yo=function(){var e=this;return this.Po&&(this.Uo=this.Uo.then((function(){var t;return null===(t=e.Po)||void 0===t?void 0:t.shutdown().catch((function(t){e.context.logger.debug("Couldn't shut down DRMManager ".concat(t))}))}))),this.Uo},e.prototype.shutdownIfNeeded=function(e){return e&&this.canReuseEmeHandler()?Promise.resolve():this.release()},e.prototype.release=function(){var e=this;return this.Oo=null,this.Yo().then((function(){return e.Po=null}))},e.prototype.prepareForMseShutdown=function(){var e,t;return null!==(t=null===(e=this.Po)||void 0===e?void 0:e.prepareForMseShutdown())&&void 0!==t?t:Promise.resolve()},e.prototype.suspend=function(){var e,t;return null!==(t=null===(e=this.Po)||void 0===e?void 0:e.suspend())&&void 0!==t?t:Promise.resolve()},e.prototype.dispose=function(){this.release()},e.prototype.isDrmConfigSet=function(){return Boolean(this.Oo)},e}();t.DrmService=h},97115:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createDrmManager=function(e){return(0,i.getCapabilities)()[r.CapabilityKey.isTizen]&&o.ModuleManager.has(s.ModuleName.Tizen)?o.ModuleManager.get(s.ModuleName.Tizen).createTizenDRMManager(e):(0,i.getCapabilities)()[r.CapabilityKey.isWebOS]&&o.ModuleManager.has(s.ModuleName.Webos)?new(o.ModuleManager.get(s.ModuleName.Webos).getWebosDrmManagerConstructor())(e):new a.DRMManager(e)};var r=n(7387),i=n(21513),o=n(88052),s=n(62756),a=n(29173)},99921:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.createEMEHandlerInstance=t.allEMEHandlers=t.EMEHandlerKind=void 0;var r,i=n(21513),o=n(15487),s=n(88052),a=n(62756),u=n(86558),d=n(70581),c=n(80680);!function(e){e.MS_PREFIXED="MS_PREFIXED",e.WEBOS_UNPREFIXED="WEBOS_UNPREFIXED",e.WEBOS_WEBKIT_PREFIXED="WEBOS_WEBKIT_PREFIXED",e.WEBOS_2017_UNPREFIXED="WEBOS_2017_UNPREFIXED",e.UNPREFIXED="UNPREFIXED",e.PLAYSTATION_4="PLAYSTATION_4",e.TIZEN="TIZEN",e.WEBKIT_PREFIXED="WEBKIT_PREFIXED"}(r||(t.EMEHandlerKind=r={}));var l=function(e){return(0,d.isUnprefixedEmeHandlerSupported)(e)},p=function(e){return(0,u.isMsPrefixedEmeHandlerSupported)(e)},y=function(e){return function(t){return(0,c.isWebkitPrefixedEmeHandlerSupported)(e.videoElement,t)}};t.allEMEHandlers=function(e){return[{kind:r.UNPREFIXED,isAvailable:!0,isSupported:l},{kind:r.WEBOS_UNPREFIXED,isAvailable:(0,i.getCapabilities)().isWebOS&&s.ModuleManager.has(a.ModuleName.Webos),isSupported:l},{kind:r.WEBOS_2017_UNPREFIXED,isAvailable:(0,i.getCapabilities)().isWebOS&&(0,o.isWebOs2017)()&&s.ModuleManager.has(a.ModuleName.Webos),isSupported:l},{kind:r.WEBOS_WEBKIT_PREFIXED,isAvailable:(0,i.getCapabilities)().isWebOS&&s.ModuleManager.has(a.ModuleName.Webos),isSupported:y(e)},{kind:r.MS_PREFIXED,isAvailable:!0,isSupported:p},{kind:r.PLAYSTATION_4,isAvailable:(0,i.getCapabilities)().isPlayStation4&&s.ModuleManager.has(a.ModuleName.PlayStation4),isSupported:l},{kind:r.TIZEN,isAvailable:(0,i.getCapabilities)().isTizen&&s.ModuleManager.has(a.ModuleName.Tizen),isSupported:y(e)},{kind:r.WEBKIT_PREFIXED,isAvailable:!0,isSupported:y(e)}]},t.createEMEHandlerInstance=function(e,t){switch(e){case r.MS_PREFIXED:return new u.MSPrefixedEMEHandler(t);case r.WEBOS_UNPREFIXED:return new(s.ModuleManager.get(a.ModuleName.Webos).getWebosUnprefixedEmeHandlerConstructor())(t);case r.WEBOS_2017_UNPREFIXED:return new(s.ModuleManager.get(a.ModuleName.Webos).getWebos2017UnprefixedEmeHandlerConstructor())(t);case r.WEBOS_WEBKIT_PREFIXED:return new(s.ModuleManager.get(a.ModuleName.Webos).getWebosWebkitPrefixedEmeHandlerConstructor())(t);case r.TIZEN:return new(s.ModuleManager.get(a.ModuleName.Tizen).getTizenEMEHandlerConstructor())(t);case r.PLAYSTATION_4:return new(s.ModuleManager.get(a.ModuleName.PlayStation4).getPlayStation4EMEHandlerConstructor())(t);case r.UNPREFIXED:return new d.UnprefixedEMEHandler(t);case r.WEBKIT_PREFIXED:return new c.WebKitPrefixedEMEHandler(t);default:throw new Error("Could not create EMEHandler")}}}},function(e){return function(){return e(e.s=47272)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["container-mp4"]=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player["container-mp4"]=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[270],{12392:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.MP4Decrypter=void 0;var r=i(97441),s=i(74853),n=i(70233),a=i(2992),o=i(88052),h=i(62756),f=function(){function t(t,e,i){this.cx=t,this.dx=e,this.fx=!1,this.kx=i,this.ex=[]}return t.prototype.parseInitSegment=function(t){var e=this;this.fx=!1;for(var i=r.ISOBoxer.parseBuffer(t),o=i._raw.buffer,h=function(t){var e=[],i=[];i.push.apply(i,t.list("moov.pssh")),i.push.apply(i,t.list("moof.pssh"));for(var r=0,s=i;r<s.length;r++){var n=s[r];n.kids&&n.kids.length>0&&e.push.apply(e,n.kids)}return e}(i),f=0,_=h;f<_.length;f++){var u=_[f];this.lx(u)}var d=i.get("moov.trak.mdia.minf.stbl.stsd").entries[0];return d.list("sinf").forEach((function(t){var r=t.get("frma"),o=t.get("schm"),h=t.get("schi.tenc");if(r&&h&&o){for(var f=0;f<4;++f)i._raw.setUint8(d._offset+4+f,r.codingname.charCodeAt(f));e.ix=h.default_is_encrypted,e.jx=h.default_iv_size,e.hx=h.default_kid,e.fx=!0;var _=s.ArrayHelper.arrayBufferToAsciiString(n.FormatHelper.hexToBytes(e.hx).buffer,!0);e.lx(_)}(0,a.rewriteMp4BoxType)(t,"free")})),Promise.resolve(o)},t.prototype.lx=function(t){this.ex.includes(t)||this.ex.push(t)},t.prototype.getKeyIds=function(){return this.ex},t.prototype.addKeys=function(t){for(var e=function(t){var e=i.dx.find((function(e){return e.kid===t.kid}));e?e.key=t.key:i.dx.push(t)},i=this,r=0,s=t;r<s.length;r++)e(s[r])},t.prototype.getKey=function(){if(this.gx)return this.gx;var t;for(var e in this.dx)if(this.dx.hasOwnProperty(e)&&this.dx[e].hasOwnProperty("key")&&this.dx[e].hasOwnProperty("kid")&&this.dx[e].kid===this.hx){t=this.dx[e].key;break}return void 0===t&&(t=this.dx[0].key),"string"==typeof t?this.gx=n.FormatHelper.hexToBytes(t).buffer:t instanceof Uint8Array?this.gx=t.buffer:this.gx=t,this.gx},t.prototype.decryptDataSegment=function(t){if(!this.getKey())return this.cx.logger.debug("MP4Decrypter.decryptSegment: Error decrypting AES-128 encrypted content"),Promise.reject("Error decrypting AES-128 encrypted content");if(!1===this.isEncrypted())return this.cx.logger.debug("MP4Decrypter.decryptSegment: NO ENCRYPTED CONTENT"),Promise.reject("NO ENCRYPTED CONTENT");for(var e=r.ISOBoxer.parseBuffer(t,{iv_size:this.jx}),i=new _(e),s=[],n=0;n<i.getSampleCount();++n)s.push(this.mx(t,i,n));return Promise.all(s).then((function(){return function(t){[t.uuidBox,t.sencBox,t.saioBox,t.saizBox,t.seigBox,t.sbgpBox].forEach((function(t){t&&(0,a.rewriteMp4BoxType)(t,"free")}))}(i),t}))},t.prototype.mx=function(t,e,i){var r=e.sampleToOffset(i),s=e.sampleToSize(i,1),n=e.getSampleEncodeInfo(i);return n.iv?function(t,e,i,r,s){var n;if(!((null!==(n=s.subsample_count)&&void 0!==n?n:0)>0&&s.subsamples))return function(t,e,i,r){var s=e.slice(i,i+r);return t.decrypt(s).then((function(t){new Uint8Array(e).set(new Uint8Array(t),i)}))}(t,e,i,r);var a=function(t,e,i){if(!i.subsamples)return[];for(var r=[],s=0,n=i.subsamples;s<n.length;s++){var a=n[s];e+=a.bytes_of_clear_data;var o=a.bytes_of_encrypted_data;if(o>0){var h=new Uint8Array(t,e,o);r.push(h),e+=o}}return r}(e,i,s);return function(t,e){var i=function(t){for(var e=t.reduce((function(t,e){return t+e.byteLength}),0),i=new Uint8Array(e),r=0,s=0,n=t;s<n.length;s++){var a=n[s];i.set(a,r),r+=a.byteLength}return i.buffer}(e);return t.decrypt(i).then((function(t){for(var i=0,r=0,s=e;r<s.length;r++){var n=s[r],a=new Uint8Array(t,i,n.byteLength);n.set(a),i+=n.byteLength}}))}(t,a)}(new(0,o.ModuleManager.get(h.ModuleName.Crypto).CryptoApi)(this.cx,"AES-CTR",this.getKey(),n.iv,this.kx),t,r,s,n):(this.cx.logger.debug("MP4Decrypter.decryptSegment: NO INITIAL VECTOR PROVIDED"),Promise.reject("NO INITIAL VECTOR PROVIDED"))},t.prototype.isEncrypted=function(){return this.fx},t}();e.MP4Decrypter=f;var _=function(){function t(t){var e=t.get("moof.traf");this.trunBox=e.get("trun"),this.sencBox=e.get("senc"),this.uuidBox=e.get("uuid"),this.saizBox=e.get("saiz"),this.saioBox=e.get("saio"),this.seigBox=e.get("seig"),this.sbgpBox=e.get("sbgp"),this.mdatOffset=t.get("mdat")._offset+8}return t.prototype.getSampleSizeTable=function(){return this.trunBox.samples},t.prototype.getSampleCount=function(){return this.getSampleSizeTable().length},t.prototype.getSampleEncodeInfo=function(t){return this.sencBox.samples[t]},t.prototype.sampleToOffset=function(t){return this.mdatOffset+this.sampleToSize(0,t)},t.prototype.sampleToSize=function(t,e){for(var i,r=this.getSampleSizeTable(),s=0,n=t;n<t+e;n++)s+=null!==(i=r[n].sample_size)&&void 0!==i?i:0;return s},t}()},24014:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.MP4EncryptionParser=void 0;var r=i(40306),s=i(3336),n=i(13531),a=i(25811),o=i(51682),h=i(74853),f=i(70233),_=i(85434),u=i(15487),d=function(){function t(t){var e=this;this.px={stsd:function(t){var i;switch(t+=o.ISOBMFFConstants.FULL_BOX_VERSION_LENGTH+o.ISOBMFFConstants.FULL_BOX_FLAGS_LENGTH,e.nx[0]){case"vide":i=e.px.encv;break;case"soun":i=e.px.enca;break;case"hint":case"meta":case"auxv":e.ox.logger.debug("handler type "+e.nx[0]+" not yet supported");break;default:e.ox.logger.debug("invalid handler type "+e.nx[0])}return i?t+=4:(e.ox.logger.debug("unsupported handler type "+e.nx[0]),-1)},encv:function(t){return t+78},enca:function(t){return t+28}},this.ox=t}return t.prototype.qx=function(t,e){var i=t.getUint32(e);return i<=0?null:i},t.prototype.rx=function(t,e){for(var i="",r=0;r<o.ISOBMFFConstants.BOX_TYPE_LENGTH;r++){var s=t.getInt8(e+r);i+=String.fromCharCode(s)}return i},t.prototype.sx=function(t,e){for(var i,r,s=0,n=e,a=[],h=new DataView(t);s+3<h.byteLength;){if(r=this.qx(h,s),i=this.rx(h,s+o.ISOBMFFConstants.BOX_SIZE_LENGTH),null===r)return this.ox.logger.debug("size is 0, maybe an error, or the largesize should be parsed. Returning with null."),[];if(i!==n[0])s+=r;else{if(n.length<=1)a.push(t.slice(s,s+r));else{var f=s;if(s+=o.ISOBMFFConstants.BOX_SIZE_LENGTH+o.ISOBMFFConstants.BOX_TYPE_LENGTH,this.px.hasOwnProperty(i)){var _=this.px[i](s);-1!==_&&(s=_)}var u=s-f;u=r-u;var d=t.slice(s,s+u),p=this.sx(d,e.slice(1));p&&(a=a.concat(p)),s=f}s+=r}}return a.length>0?a:[]},t.prototype.tx=function(t){for(var e=this.sx(t,["moov","trak","mdia","hdlr"]),i=[],r=0;r<e.length;r++){var s=new DataView(e[r]),n=o.ISOBMFFConstants.BOX_SIZE_LENGTH+o.ISOBMFFConstants.BOX_TYPE_LENGTH;n+=o.ISOBMFFConstants.FULL_BOX_VERSION_LENGTH+o.ISOBMFFConstants.FULL_BOX_FLAGS_LENGTH,n+=4,i.push(this.rx(s,n))}return i},t.prototype.ux=function(t){if(!t||!(t instanceof ArrayBuffer)||t.byteLength<1)return null;var e=new DataView(t),i=o.ISOBMFFConstants.BOX_SIZE_LENGTH+o.ISOBMFFConstants.BOX_TYPE_LENGTH;i+=o.ISOBMFFConstants.FULL_BOX_VERSION_LENGTH+o.ISOBMFFConstants.FULL_BOX_FLAGS_LENGTH+3+1;for(var r="",s=0;s<16;s++)r+=f.FormatHelper.intToHex(e.getUint8(i+s));return r},t.prototype.parseDefaultKIDFromBuffer=function(t,e){var i;this.nx=this.tx(t),i=_.MimeTypeHelper.isVideo(e)?["moov","trak","mdia","minf","stbl","stsd","encv","sinf","schi","tenc"]:["moov","trak","mdia","minf","stbl","stsd","enca","sinf","schi","tenc"];var r=this.sx(t,i);if(!r||r.length<1)return null;for(var s=[],n=0;n<r.length;n++){var a=this.ux(r[n]);null!==a&&s.push(a)}return this.ox.logger.debug("default KID extracted: "+s),s},t.prototype.vx=function(t){return h.ArrayHelper.arrayBufferToAsciiString(t,!0)},t.prototype.Gy=function(t){if(!t||!(t instanceof ArrayBuffer)||t.byteLength<3)return this.ox.logger.debug("could not parse pssh data from box"),null;this.ox.logger.isLevelEnabled(n.LogLevel.DEBUG)&&this.ox.logger.debug(this.vx(t));var e={},i=new DataView(t),r=0;r+=o.ISOBMFFConstants.BOX_SIZE_LENGTH+o.ISOBMFFConstants.BOX_TYPE_LENGTH;var s=i.getUint8(r);r+=o.ISOBMFFConstants.FULL_BOX_VERSION_LENGTH+o.ISOBMFFConstants.FULL_BOX_FLAGS_LENGTH;for(var _="",u=0;u<o.ISOBMFFConstants.PSSH_SYSTEM_ID_LENGTH;u++)_+=f.FormatHelper.intToHex(i.getUint8(r)),r++;if(e.systemIDraw=_,e.systemID="urn:uuid:".concat(f.FormatHelper.beautifyUUID(_)),a.DRMSchemeIDURIs.hasOwnProperty(e.systemID)&&(e.systemName=a.DRMSchemeIDURIs[e.systemID]),s>0){var d=i.getUint32(r);for(r+=4,e.kid=[],u=0;u<d;u++){var p=h.ArrayHelper.extractHexString(i,r,o.ISOBMFFConstants.PSSH_KID_LEN);r+=o.ISOBMFFConstants.PSSH_KID_LEN,e.kid.push(p)}}return e.initData=t.slice(0),e.initDataStr=this.vx(e.initData),e},t.prototype.parsePsshBox=function(t){if(t.getMimeType().indexOf("mp4")<0)return null;var e=t.getData();if(!(e&&e instanceof ArrayBuffer))return null;var i=[];if(i=(i=i.concat(this.sx(e,["moov","pssh"]))).concat(this.sx(e,["moof","pssh"])),t.isEncrypted()&&!i.length&&t.isInit()&&(0,u.isTizen2016)())return this.ox.eventHandler.fireError(new s.PlayerError(r.ErrorCode.SEGMENT_PSSH_DATA_MISSING)),[];var n=[];if(Array.isArray(i))for(var a=0;a<i.length;a++){var o=this.Gy(i[a]);null!==o&&n.push(o)}return n},t}();e.MP4EncryptionParser=d},32951:function(t,e,i){var r=this&&this.__spreadArray||function(t,e,i){if(i||2===arguments.length)for(var r,s=0,n=e.length;s<n;s++)!r&&s in e||(r||(r=Array.prototype.slice.call(e,0,s)),r[s]=e[s]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.MP4Parser=void 0,e.getVideoSamples=function(t,e,i,r){var s=(0,u.getCodecTag)(e);return b(t.moof,t.mdat,e,r).map((function(t){var e=t;return e.nalus=function(t,e,i){void 0===i&&(i=[]);for(var r=u.AVC_CODEC_TAGS.includes(e)?S:I,s=U+r,n=[],a=0;a+s<t.byteLength;){var o=Math.min(t.getUint32(a),t.byteLength-a-s);if(a+=4,0!==o){var h=u.AVC_CODEC_TAGS.includes(e)?31&t.getUint8(a):t.getUint8(a)>>1&63;if(a+=r,0===i.length||i.includes(h)){var f={type:h,data:new DataView(t.buffer,t.byteOffset+a,o-r)};O(f),n.push(f)}a+=o-r}}return n}(t.data,s,i),e}))},e.getTrackSamples=b,e.removeEmulationPreventionThreeBytes=O,e.getMp4Fragments=function(t){var e=t.getParsedData().fetchAll("moof"),i=t.getParsedData().fetchAll("mdat");return e.length===i.length?e.map((function(t,e){return{moof:t,mdat:i[e]}})):[]},e.parseTfdtBoxOffsets=function(t){var e=B(t.getData()).fetchAll("tfdt");return e?e.map((function(t){return t._raw.byteOffset})):[]},e.getTrackId=function(t,e){var i=e.get("moof.traf.tfhd");return i?i.track_ID?i.track_ID:(t.log("Track fragment header has no track_ID field. This does not look like a valid mp4."),-1):(t.log("Cannot extract trackID from data fragment."),-1)},e.parseBuffer=B,e.parsePlaybackTime=function(t,e){var i=D(t).get("moof.traf.tfdt");P(t,e);var r=t.getTimescale();return i&&void 0!==r?i.baseMediaDecodeTime/r:void 0===r?NaN:void 0},e.parseSegmentData=w,e.isValidMp4=function(t){var e=D(t),i=(t.isInit()?["ftyp","moov"]:["moof","mdat"]).every((function(t){return Boolean(e.fetch(t))})),r=e.boxes[e.boxes.length-1],s=(r?r.size+r._offset:0)===t.getData().byteLength,n=!e._incomplete;return i&&s&&n},e.getCodecFromSegment=function(t){var e=w(t);return function(t){var e=T(t);if(!e)return null;var i=e.entries.find((function(t){return r(r([],h.VisualSampleEntryTypes.Avc,!0),h.VisualSampleEntryTypes.Hvc,!0).includes(t.type)}));return i?h.VisualSampleEntryTypes.Avc.includes(i.type)?function(t){var e=t.get("avcC");return e&&0!==e.sps.length?t.type+"."+d.FormatHelper.bytesToHex(new Uint8Array(e.sps[0].splice(1,3))):null}(i):h.VisualSampleEntryTypes.Hvc.includes(i.type)?(0,u.assembleHvcCodecString)(i.type,i.get("hvcC")):null:null}(e)||function(t){var e=T(t);if(!e)return null;var i=e.entries[0],r=(i.get("esds")||{}).decoderConfig;return r?i.type+"."+r.objectProfileIndication.toString(16)+"."+r.decoderConfigDescriptor.audioObjectType:null}(e)};var s=i(97441),n=i(40306),a=i(3336),o=i(13531),h=i(1001),f=i(51682),_=i(74853),u=i(34047),d=i(70233),p=i(85434),c=i(2992),l=i(23068),g=i(88052),m=i(62756),y=i(78246),v=8,x=function(){function t(t,e,i){void 0===i&&(i=s.ISOBoxer),this.context=t,this.mp4EncryptionParser=e,this.isoBoxer=i,this.Hy=g.ModuleManager.get(m.ModuleName.Crypto,!1)}return t.prototype.parseSegment=function(t){"mp4"===p.MimeTypeHelper.extractContainerType(t.getMimeType())?(t.isInit()?this.Ny(t):this.Py(t),t.setDrmInitData(this.Iy(t))):this.context.logger.debug("Skipping parsing of a non MP4 segment")},t.prototype.Iy=function(t){var e=this,i=this.mp4EncryptionParser.parsePsshBox(t);return this.context.logger.isLevelEnabled(o.LogLevel.DEBUG)&&(null==i||i.forEach((function(t){return e.context.logger.debug("initData found: ".concat(t.initDataStr))}))),Array.isArray(i)&&i.length>0?i:[]},t.prototype.Jy=function(t){var e=t.getParsedData().get("moov.mvex.trex");if(e){var i={defaultSampleSize:e.default_sample_size,defaultSampleDuration:e.default_sample_duration};t.updateParserMetadata(i),this.context.logger.debug("default sample duration for "+t.getMimeType()+" : "+i.defaultSampleDuration)}},t.prototype.Ky=function(t){var e=t.getParsedData().get("moof.traf.sgpd");if(e){var i=function(t){return String.fromCharCode(t._raw.getUint8(12),t._raw.getUint8(13),t._raw.getUint8(14),t._raw.getUint8(15))}(e);if("seig"===i){var r=function(t){var e=1===C(t)?20:16;return t._raw.getUint32(e)}(e);if(!(r<1)){var s=function(t){var e=C(t),i=F(t),r=1===e?24:20;return 1===e&&0===i?t._raw.getUint32(r):i}(e),n=function(t){var e=C(t),i=F(t),r=1===e&&0===i?28:24;return(t._raw.getUint16(r)<<16)+t._raw.getUint8(r+2)}(e),a=function(t){var e=C(t),i=F(t),r=1===e&&0===i?31:27;return t._raw.getUint8(r)}(e),o=function(t){for(var e=C(t),i=F(t),r=1===e&&0===i?32:28,s=new Uint8Array(16),n=0;n<16;n++)s[n]=t._raw.getUint8(r+n);return d.FormatHelper.bytesToUUID(s)}(e);this.context.logger.debug("Parsed SGPD/SEIG, entries(".concat(r,"), key ID(").concat(o,"), IV size(").concat(a,"), isEncrypted(").concat(Boolean(n),"), descriptor length(").concat(s,")")),t.setDrmKid(o)}}}},t.prototype.Ly=function(t){var e=this.mp4EncryptionParser.parseDefaultKIDFromBuffer(t.getData(),t.getMimeType()),i=(null==e?void 0:e.length)?e.pop():void 0,r=t.getParsedData().get("moov.trak.mdia.minf.stbl.stsd.encv.sinf.schi.tenc")||t.getParsedData().get("moov.trak.mdia.minf.stbl.stsd.enca.sinf.schi.tenc");r&&(t.updateParserMetadata({ivSize:r.default_iv_size}),t.setEncrypted(!0)),i&&t.setDrmKid(d.FormatHelper.beautifyUUID(i))},t.prototype.My=function(t){var e=t.get("elst");return!(e&&e.entries.length>0&&e.entries[0].media_time<0)},t.prototype.Ny=function(t){var e=w(t,{},this.isoBoxer);e?(this.Ly(t),P(t,this.context.logger),this.Jy(t),this.context.settings.IGNORE_MP4_EDTS_BOX&&this.Oy(e)):this.context.eventHandler.fireError(new a.PlayerError(n.ErrorCode.SOURCE_EMPTY_SEGMENT,{mimeType:t.getMimeType(),segmentUrl:t.getUrl()},"The player has encountered an init segment that is unexpectedly empty."))},t.prototype.Oy=function(t){var e=t.get("moov.trak.edts");e&&!this.My(e)&&(this.context.logger.debug("Found unsupported edts box, dropping it!"),(0,c.rewriteMp4BoxType)(e,"free"))},t.prototype.Py=function(e){var i,r,s=0,n=e.getSegmentInfo();(null==n?void 0:n.presentationTimeOffset)&&(s=n.presentationTimeOffset);var a=this.Sy(e);e.isSelfInit()&&this.Jy(e),this.Ky(e),this.Ly(e),e.setEncrypted(null!==(r=null===(i=e.getInitSegment())||void 0===i?void 0:i.isEncrypted())&&void 0!==r&&r),function(t){t.getParsedData().fetch("senc")&&t.setEncrypted(!0)}(e),P(e,this.context.logger),this.Ry(e,s,a),this.Qy(e),this.context.settings.PARSE_EMSG_BOXES&&e.setInbandEvents(this.Vy(e,s)),e.setLastSegment(this.Wy(e));var o=t.getProducerReferenceTime(e);o&&(n.wallClockTime=o)},t.prototype.Qy=function(t){var e=this.Ty(t);if(e){var i=Math.abs(t.getDuration()-e);i>.5&&this.context.logger.debug("Segment duration is off by "+i+", corrected from "+t.getDuration()+" to "+e),t.setDuration(e)}},t.prototype.Ry=function(t,e,i){var r=i.fetchAll("tfdt"),s=r[0],n=r.map((function(t){return t._offset}));if(s){var a=t.getTimescale();t.setTFDTBoxOffsets(n),t.setBaseMediaDecodeTime(s.baseMediaDecodeTime),t.setPresentationTimeOffset(e),void 0===a?this.context.logger.debug("Could not set playback time - segment is missing timescale."):t.setPlaybackTime(s.baseMediaDecodeTime/a-e)}},t.prototype.Sy=function(t){return w(t,{iv_size:t.getIvSize()||v},this.isoBoxer)},t.prototype.Ty=function(t){var e=this,i=t.getTimescale();return p.MimeTypeHelper.isAV(t.getMimeType())?void 0===i?(this.context.logger.debug("Could not parse segment duration - segment is missing timescale."),null):t.getParsedData().list("moof.traf").reduce((function(i,r){return i+e.Uy(r,t.getDefaultSampleDuration())}),0)/i:null},t.prototype.Uy=function(t,e){var i,r=t.get("trun");if(!r)return this.context.logger.insane("Media segment is missing trun box!"),0;var s=t.get("tfhd"),n=s?s.default_sample_duration:null,a=null===(i=r.samples)||void 0===i?void 0:i.reduce((function(t,i){return t+(i.sample_duration||n||e||0)}),0);return null!=a?a:0},t.prototype.Vy=function(t,e){var i=this.Sy(t),r=function(t,e,i){var r=e.fetch("sidx"),s=0,n=t.getTimescale();if(void 0===n)return 0;if(r&&r.earliest_presentation_time)s=r.earliest_presentation_time/n;else{var a=e.fetch("tfdt");a&&a.baseMediaDecodeTime&&(s=a.baseMediaDecodeTime/n)}return(0,l.isNumber)(s)?s-=i:s=0,s}(t,i,e);return i.fetchAll("emsg").map((function(t){return{schemeIdUri:t.scheme_id_uri,value:t.value,presentationTime:M(t,r,e),eventDuration:t.event_duration/t.timescale,id:String(t.id),messageData:_.ArrayHelper.convertBufferSourceToUTF8(t.message_data)}}))},t.parseFourCharsText=function(t,e){for(var i="",r=0;r<4;r++){var s=t.getInt8(e+r);i+=String.fromCharCode(s)}return i},t.prototype.Wy=function(e){var i=e.getData();if(!i||i.byteLength<4)return!1;for(var r=new DataView(i),s=0;s+3<r.byteLength;){var n=r.getUint32(s);if(n<=0)return!1;if("styp"===t.parseFourCharsText(r,s+4)){s+=8,s+=8;for(var a=void 0;s<n;)if(a=t.parseFourCharsText(r,s),s+=4,"lmsg"===a)return this.context.logger.debug("lmsg found, this should be the last segment in this stream"),!0;break}s+=n}return!1},t.getProducerReferenceTime=function(t){var e=t.getParsedData().fetch("prft");if(!e)return null;var i=1e3*e.ntp_timestamp_seconds;return i+=Math.round(e.ntp_timestamp_seconds_fraction/Math.pow(2,32)*1e3),(0,y.ntpToUnix)(i)},t}();function b(t,e,i,r){var s,n,a,o=t.get("traf"),h=o.get("tfhd"),_=o.get("trun"),u=null!==(s=h.base_data_offset)&&void 0!==s?s:t._offset,d=null!==(n=_.data_offset)&&void 0!==n?n:0;return(null===(a=null==_?void 0:_.samples)||void 0===a?void 0:a.length)?_.samples.map((function(t){var s=t.sample_size||h.default_sample_size||i.getDefaultSampleSize();s>_._raw.buffer.byteLength&&(s=_._raw.buffer.byteLength-(u+d),r.warn("trun.samples.sample_size (".concat(t.sample_size,") is bigger than the available buffer length:").concat(_._raw.buffer.byteLength,". Adjusting to remaining bytes:").concat(s))),1!==_.sample_count||t.sample_size||(s=e.size-function(t){return t.hasOwnProperty("largesize")?f.ISOBMFFConstants.BOX_HEADER_LENGTH_LARGE:f.ISOBMFFConstants.BOX_HEADER_LENGTH_REGULAR}(e));var n={duration:t.sample_duration||h.default_sample_duration||i.getDefaultSampleDuration(),size:s,compositionTimeOffset:t.sample_composition_time_offset||0,data:new DataView(_._raw.buffer,u+d,s)};return d+=s,n})):[]}e.MP4Parser=x;var U=4,S=1,I=2;function O(t){for(var e=[],i=1;i<t.data.byteLength-2;)0===t.data.getUint8(i)&&0===t.data.getUint8(i+1)&&3===t.data.getUint8(i+2)?(e.push(i+2),i+=3):i++;if(0!==e.length){for(var r=new DataView(new ArrayBuffer(t.data.byteLength-e.length)),s=0,n=0;s<r.byteLength;s++,n++)e[0]===n&&(e.shift(),n++),r.setUint8(s,t.data.getInt8(n));t.data=r}}function B(t,e,i){return void 0===e&&(e={}),void 0===i&&(i=s.ISOBoxer),i.parseBuffer(t,e)}function w(t,e,i){if(void 0===e&&(e={}),void 0===i&&(i=s.ISOBoxer),!t.getParsedData()){var r=B(t.getData(),e,i);t.setParsedData(r)}return t.getParsedData()}function T(t){return t.get("moov.trak.mdia.minf.stbl.stsd")}function D(t,e){return void 0===e&&(e=s.ISOBoxer),w(t,{iv_size:t.getIvSize()||v},e)}function P(t,e){var i=t.getParsedData().get("moov.trak.mdia.mdhd");if(i){var r=i.timescale;t.setTimescale(r),e.debug("timescale for ".concat(t.getMimeType()," is ").concat(r))}}function C(t){return t._raw.getUint8(8)}function F(t){return 1===C(t)?t._raw.getUint32(16):0}function M(t,e,i){return 1===t.version?t.presentation_time/t.timescale-i:e+t.presentation_time_delta/t.timescale}},37910:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerMp4ModuleDefinition=void 0;var r=i(62756),s=i(51700),n=i(12392),a=i(24014),o=i(32951);e.ContainerMp4ModuleDefinition={name:r.ModuleName.ContainerMP4,module:{MP4Parser:o.MP4Parser,MP4Decrypter:n.MP4Decrypter,MP4EncryptionParser:a.MP4EncryptionParser,CmafChunkParser:s.CmafChunkParser,getMp4Fragments:o.getMp4Fragments,getVideoSamples:o.getVideoSamples,parseTfdtBoxOffsets:o.parseTfdtBoxOffsets,getTrackId:o.getTrackId,parseBuffer:o.parseBuffer,parsePlaybackTime:o.parsePlaybackTime,isValidMp4:o.isValidMp4,getCodecFromSegment:o.getCodecFromSegment,getTrackSamples:o.getTrackSamples}},e.default=e.ContainerMp4ModuleDefinition},51700:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.CmafChunkParser=void 0;var r=i(74853),s=function(){function t(t){this.ax=t,this.bx=new ArrayBuffer(0)}return t.parseIsoBoxType=function(t,e){return String.fromCharCode(t[e])+String.fromCharCode(t[e+1])+String.fromCharCode(t[e+2])+String.fromCharCode(t[e+3])},t.prototype.appendData=function(t){this.bx=r.ArrayHelper.concatBuffers(this.bx,t)},t.prototype.getCompleteChunks=function(){var e=t.findCompleteCmafChunks(this.bx);if(0===e.length)return null;this.ax.logger.insane("Found ".concat(e.length," CMAF chunks"));var i=e[e.length-1].end,r=this.bx.slice(0,i);return this.bx=this.bx.slice(i),r},t.findCompleteCmafChunks=function(e){if(!e||e.byteLength<8)return[];for(var i=new DataView(e),r=[],s=["moof","mdat"],n=0,a=[],o=0;o+8<e.byteLength;){var h=i.getUint32(o),f=t.parseIsoBoxType(new Uint8Array(e),o+4);if(0===h)break;o+h<=e.byteLength&&(a.push(f),f===s[0]&&s.shift(),0===s.length&&(r.push({start:n,end:o+h,boxes:a}),s=["moof","mdat"],n=o+h+1,a=[])),o+=h}return r},t.prototype.reset=function(){this.bx.byteLength>0&&this.ax.logger.debug("CMAF chunk parser discarded ".concat(this.bx.byteLength," bytes")),this.bx=new ArrayBuffer(0)},t}();e.CmafChunkParser=s},78246:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ntpToUnix=function(t){return t+i};var i=new Date(Date.UTC(1900,0,1)).getTime()},97441:function(t,e){var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var s in e=arguments[i])Object.prototype.hasOwnProperty.call(e,s)&&(t[s]=e[s]);return t},i.apply(this,arguments)};function r(t){return void 0===t&&(t=0),{offset:t}}function s(t){return 0===t.length?null:t[0]}function n(t,e){var i=e.indexOf("."),r=[];if(-1===i)for(var s=0;s<t.length;s++)t[s].type===e&&r.push(t[s]);else{var n=e.substring(0,i),a=e.substring(i+1);for(s=0;s<t.length;s++)t[s].type===n&&(r=r.concat(t[s].list(a)))}return r}function a(t,i){t.forEach((function(t){e.ISOBox.prototype._boxParsers[t]=i}))}function o(t,e){return t._cursor.offset-t._raw.byteOffset+e<=t.size}Object.defineProperty(e,"__esModule",{value:!0}),e.ISOBox=e.ISOFile=e.ISOBoxer=void 0,e.ISOBoxer={parseBuffer:function(t,i){return void 0===i&&(i={}),new e.ISOFile(t,i).parse()}},e.ISOFile=function(t,e){void 0===e&&(e={}),this.options=i({},e),this.options.iv_size=e.iv_size||8,t&&(this._raw=new DataView(t)),this._cursor=r(),this.boxes=[]},e.ISOFile.prototype.fetch=function(t){var e=this.fetchAll(t,!0);return e.length?e[0]:null},e.ISOFile.prototype.fetchAll=function(t,i){var r=[];return e.ISOFile._sweep.call(this,t,r,i),r},e.ISOFile.prototype.parse=function(){for(this._cursor.offset=0,this.boxes=[];this._cursor.offset<this._raw.byteLength;){var t=e.ISOBox.parse(this);if(void 0===t.type)break;this.boxes.push(t)}return this},e.ISOFile._sweep=function(t,i,r){for(var s in this.type&&this.type===t&&i.push(this),this.boxes){if(i.length&&r)return;e.ISOFile._sweep.call(this.boxes[s],t,i,r)}},e.ISOFile.prototype.get=function(t){return s(this.list(t))},e.ISOFile.prototype.list=function(t){return n(this.boxes,t)},e.ISOBox=function(){this._cursor=r()},e.ISOBox.parse=function(t){var i=new e.ISOBox;return i._offset=t._cursor.offset,i._root=t._root?t._root:t,i._raw=t._raw,i._parent=t,i._parseBox(),t._cursor.offset=i._raw.byteOffset+i._raw.byteLength,i},e.ISOBox.prototype.list=function(t){return n(this.boxes||this.entries||[],t)},e.ISOBox.prototype.get=function(t){return s(this.list(t))},e.ISOBox.prototype._readUint64=function(){var t=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset),e=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset+4);return t*Math.pow(2,32)+e},e.ISOBox.prototype._readInt64=function(){var t=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset),e=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset+4);return t*Math.pow(2,32)+e},e.ISOBox.prototype._readInt=function(t){var e=null;switch(t){case 8:e=this._raw.getInt8(this._cursor.offset-this._raw.byteOffset);break;case 16:e=this._raw.getInt16(this._cursor.offset-this._raw.byteOffset);break;case 32:e=this._raw.getInt32(this._cursor.offset-this._raw.byteOffset);break;case 64:e=this._readInt64()}return this._cursor.offset+=t>>3,e},e.ISOBox.prototype._readUint=function(t){var e=null;switch(t){case 8:e=this._raw.getUint8(this._cursor.offset-this._raw.byteOffset);break;case 16:e=this._raw.getUint16(this._cursor.offset-this._raw.byteOffset);break;case 24:e=(this._raw.getUint16(this._cursor.offset-this._raw.byteOffset)<<8)+this._raw.getUint8(this._cursor.offset-this._raw.byteOffset+2);break;case 32:e=this._raw.getUint32(this._cursor.offset-this._raw.byteOffset);break;case 64:e=this._readUint64()}return this._cursor.offset+=t>>3,e},e.ISOBox.prototype._readUintArray=function(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=this._readUint(t);return i},e.ISOBox.prototype._readFP=function(t){return this._readInt(2*t)/Math.pow(2,t)},e.ISOBox.prototype._readString=function(t){for(var e="",i=0;i<t;i++){var r=this._readUint(8);e+=String.fromCharCode(r)}return e},e.ISOBox.prototype._readHex=function(t){for(var e=[],i=0;i<t;i++){var r=this._readUint(8);e.push((r>>>4).toString(16)),e.push((15&r).toString(16))}return e.join("")},e.ISOBox.prototype._readUUID=function(){return this._readUintArray(8,16)},e.ISOBox.prototype._readTerminatedString=function(){for(var t="";;){var e=this._readUint(8);if(0==e)break;t+=String.fromCharCode(e)}return t},e.ISOBox.prototype._readTemplate=function(t){return this._readUint(t/2)+this._readUint(t/2)/Math.pow(2,t/2)},e.ISOBox.prototype._parseBox=function(){if(this._cursor.offset=this._offset,this._offset+8>this._raw.buffer.byteLength)this._root._incomplete=!0;else{switch(this.size=this._readUint(32),this.type=this._readString(4),1===this.size&&(this.largesize=this._readUint(64)),"uuid"===this.type&&(this.usertype=this._readUUID()),this.size){case 0:this._raw=new DataView(this._raw.buffer,this._offset,this._raw.byteLength-this._cursor.offset);break;case 1:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.largesize);break;default:this._offset+this.size>this._raw.buffer.byteLength?(this._incomplete=!0,this._root._incomplete=!0):this._raw=new DataView(this._raw.buffer,this._offset,this.size)}!this._incomplete&&this._boxParsers[this.type]&&this._boxParsers[this.type].call(this)}},e.ISOBox.prototype._parseFullBox=function(){this.version=this._readUint(8),this.flags=this._readUint(24)},e.ISOBox.prototype._createDataView=function(){return new DataView(this._raw.buffer,this._cursor.offset,this._raw.byteLength-(this._cursor.offset-this._offset))},e.ISOBox.prototype._boxParsers={},a(["moov","trak","tref","mdia","minf","stbl","edts","dinf","sinf","mvex","moof","traf","mfra","udta","meco","strk","vttc","schi"],(function(){for(this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(e.ISOBox.parse(this))})),e.ISOBox.prototype._boxParsers.elst=function(){this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];for(var t=1;t<=this.entry_count;t++){var i=new e.ISOBox;1===this.version?(i.segment_duration=this._readUint(64),i.media_time=this._readInt(64)):(i.segment_duration=this._readUint(32),i.media_time=this._readInt(32)),i.media_rate_integer=this._readInt(16),i.media_rate_fraction=this._readInt(16),this.entries.push(i)}},e.ISOBox.prototype._boxParsers.emsg=function(){this._parseFullBox(),0===this.version?(this.scheme_id_uri=this._readTerminatedString(),this.value=this._readTerminatedString(),this.timescale=this._readUint(32),this.presentation_time_delta=this._readUint(32),this.event_duration=this._readUint(32),this.id=this._readUint(32)):(this.timescale=this._readUint(32),this.presentation_time=this._readUint(64),this.event_duration=this._readUint(32),this.id=this._readUint(32),this.scheme_id_uri=this._readTerminatedString(),this.value=this._readTerminatedString()),this.message_data=this._createDataView()},a(["free","mdat"],(function(){this.data=this._createDataView()})),a(["ftyp","styp"],(function(){for(this.major_brand=this._readString(4),this.minor_versions=this._readUint(32),this.compatible_brands=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.compatible_brands.push(this._readString(4))})),e.ISOBox.prototype._boxParsers.hdlr=function(){this._parseFullBox(),this.pre_defined=this._readUint(32),this.handler_type=this._readString(4),this.reserved=[this._readUint(32),this._readUint(32),this._readUint(32)],this.name=this._readTerminatedString()},e.ISOBox.prototype._boxParsers.mdhd=function(){this._parseFullBox(),1==this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32));var t=this._readUint(16);this.pad=t>>15,this.language=String.fromCharCode(96+(t>>10&31),96+(t>>5&31),96+(31&t)),this.pre_defined=this._readUint(16)},e.ISOBox.prototype._boxParsers.mfhd=function(){this._parseFullBox(),this.sequence_number=this._readUint(32)},e.ISOBox.prototype._boxParsers.mvhd=function(){this._parseFullBox(),1===this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.timescale=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.timescale=this._readUint(32),this.duration=this._readUint(32)),this.rate=this._readTemplate(32),this.volume=this._readTemplate(16),this.reserved1=this._readUint(16),this.reserved2=[this._readUint(32),this._readUint(32)],this.matrix=[];for(var t=0;t<9;t++)this.matrix.push(this._readTemplate(32));for(this.pre_defined=[],t=0;t<6;t++)this.pre_defined.push(this._readUint(32));this.next_track_ID=this._readUint(32)},e.ISOBox.prototype._boxParsers.sidx=function(){this._parseFullBox(),this.reference_ID=this._readUint(32),this.timescale=this._readUint(32),0===this.version?(this.earliest_presentation_time=this._readUint(32),this.first_offset=this._readUint(32)):(this.earliest_presentation_time=this._readUint(64),this.first_offset=this._readUint(64)),this.reserved=this._readUint(16),this.reference_count=this._readUint(16),this.references=[];for(var t=0;t<this.reference_count;t++){var e={},i=this._readUint(32);e.reference_type=i>>31&1,e.referenced_size=2147483647&i,e.subsegment_duration=this._readUint(32);var r=this._readUint(32);e.starts_with_SAP=r>>31&1,e.SAP_type=r>>28&7,e.SAP_delta_time=268435455&r,this.references.push(e)}},e.ISOBox.prototype._boxParsers.ssix=function(){this._parseFullBox(),this.subsegment_count=this._readUint(32),this.subsegments=[];for(var t=0;t<this.subsegment_count;t++){var e={};e.ranges_count=this._readUint(32),e.ranges=[];for(var i=0;i<e.ranges_count;i++){var r={};r.level=this._readUint(8),r.range_size=this._readUint(24),e.ranges.push(r)}this.subsegments.push(e)}},e.ISOBox.prototype._boxParsers.tfdt=function(){this._parseFullBox(),1===this.version?this.baseMediaDecodeTime=this._readUint(64):this.baseMediaDecodeTime=this._readUint(32)},e.ISOBox.prototype._boxParsers.tfhd=function(){this._parseFullBox(),this.track_ID=this._readUint(32),1&this.flags?(this.base_data_offset_present=!0,this.base_data_offset=this._readUint(64)):131072&this.flags&&(this.default_base_is_moof=!0),2&this.flags&&(this.sample_description_offset=this._readUint(32)),8&this.flags&&(this.default_sample_duration=this._readUint(32)),16&this.flags&&(this.default_sample_size=this._readUint(32)),32&this.flags&&(this.default_sample_flags=this._readUint(32))},e.ISOBox.prototype._boxParsers.tkhd=function(){this._parseFullBox(),1===this.version?(this.creation_time=this._readUint(64),this.modification_time=this._readUint(64),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(64)):(this.creation_time=this._readUint(32),this.modification_time=this._readUint(32),this.track_ID=this._readUint(32),this.reserved1=this._readUint(32),this.duration=this._readUint(32)),this.reserved2=[this._readUint(32),this._readUint(32)],this.layer=this._readUint(16),this.alternate_group=this._readUint(16),this.volume=this._readTemplate(16),this.reserved3=this._readUint(16),this.matrix=[];for(var t=0;t<9;t++)this.matrix.push(this._readTemplate(32));this.width=this._readTemplate(32),this.height=this._readTemplate(32)},e.ISOBox.prototype._boxParsers.trun=function(){this._parseFullBox(),this.sample_count=this._readUint(32),1&this.flags&&(this.data_offset_present=!0,this.data_offset=this._readInt(32)),4&this.flags&&(this.first_sample_flags=this._readUint(32)),this.samples=[];for(var t=0;t<this.sample_count;t++){var e={};256&this.flags&&(e.sample_duration=this._readUint(32)),512&this.flags&&(e.sample_size=this._readUint(32)),1024&this.flags&&(e.sample_flags=this._readUint(32)),2048&this.flags&&(0==this.version?e.sample_composition_time_offset=this._readUint(32):e.sample_composition_time_offset=this._readInt(32)),this.samples.push(e)}},e.ISOBox.prototype._boxParsers.trex=function(){this._parseFullBox(),this.track_ID=this._readUint(32),this.default_sample_description_index=this._readUint(32),this.default_sample_duration=this._readUint(32),this.default_sample_size=this._readUint(32),this.default_sample_flags=this._readUint(32)},e.ISOBox.prototype._boxParsers.stsd=function(){for(this._parseFullBox(),this.entry_count=this._readUint(32),this.entries=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.entries.push(e.ISOBox.parse(this))},e.ISOBox.prototype._boxParsers.encv=function(){for(this._readHex(6),this.data_reference_index=this._readUint(16),this._readUint(16),this._readUint(16),this._readUint(32),this._readUint(32),this._readUint(32),this.width=this._readUint(16),this.height=this._readUint(16),this.horizresolution=this._readTemplate(32),this.vertresolution=this._readTemplate(32),this._readUint(32),this.frame_count=this._readUint(16),this._readUint(8),this.compressor_name=this._readString(4),this.depth=this._readUint(16),this._readUint(16),this._readHex(27),this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(e.ISOBox.parse(this))},a(["enca","mp4a"],(function(){for(this._readHex(6),this.data_reference_index=this._readUint(16),this._readUint(32),this._readUint(32),this.channel_count=this._readUint(16),this.sample_size=this._readUint(16),this._readUint(16),this._readUint(16),this.sample_rate=this._readUint(32)>>>16,this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(e.ISOBox.parse(this))})),a(["avc1","hvc1","hev1"],(function(){this._readUint(32),this._readUint(16),this.data_reference_index=this._readUint(16),this.version=this._readUint(16),this.revision_level=this._readUint(16),this.vendor=this._readUint(32),this.temporal_quality=this._readUint(32),this.spatial_quality=this._readUint(32),this.width=this._readUint(16),this.height=this._readUint(16),this.horizontal_resolution=this._readTemplate(32),this.vertical_resolution=this._readTemplate(32),this.data_size=this._readUint(32),this.frame_count=this._readUint(16);var t=this._readUint(8);this.compressor_name="";for(var i=0;i<31;i++){var r=this._readUint(8);i<t&&(this.compressor_name+=String.fromCharCode(r))}for(this.depth=this._readUint(16),this._readInt(16),this.boxes=[];this._cursor.offset-this._raw.byteOffset<this._raw.byteLength;)this.boxes.push(e.ISOBox.parse(this))})),e.ISOBox.prototype._boxParsers.avcC=function(){this.configuration_version=this._readUint(8),this.avc_profile_indication=this._readUint(8),this.profile_compatibility=this._readUint(8),this.avc_level_indication=this._readUint(8);var t=this._readUint(8);this.complete_representation=t>>>7&1,this.length_size_minus_one=3&t,this.num_sps=31&this._readUint(8),this.sps=[];for(var e=0;e<this.num_sps;++e)this.sps.push(this._readUintArray(8,this._readUint(16)));for(this.num_pps=31&this._readUint(8),this.pps=[],e=0;e<this.num_pps;++e)this.pps.push(this._readUintArray(8,this._readUint(16)))},e.ISOBox.prototype._boxParsers.hvcC=function(){var t;this.configurationVersion=this._readUint(8),t=this._readUint(8),this.general_profile_space=t>>>6,this.general_tier_flag=t>>>5&1,this.general_profile_idc=31&t,this.general_profile_compatibility_flags=this._readUint(32),this.general_constraint_indicator_flags_bytes=[];for(var e=0;e<6;e++)this.general_constraint_indicator_flags_bytes[e]=this._readUint(8);this.general_level_idc=this._readUint(8),this.min_spatial_segmentation_idc=4095&this._readUint(16),this.parallelismType=3&this._readUint(8),this.chroma_format_idc=3&this._readUint(8),this.bit_depth_luma_minus8=7&this._readUint(8),this.bit_depth_chroma_minus8=7&this._readUint(8),this.avgFrameRate=this._readUint(16),t=this._readUint(8),this.constantFrameRate=t>>>6,this.numTemporalLayers=t>>>3&7,this.temporalIdNested=t>>>2&1,this.lengthSizeMinusOne=3&t,this.numOfArrays=this._readUint(8)},e.ISOBox.prototype._boxParsers.esds=function(){this._parseFullBox(),this._readUint(16),this.esId=this._readUint(16),this.streamPriority=31&this._readUint(8),this._readUint(16),this.decoderConfig={},this.decoderConfig.objectProfileIndication=this._readUint(8),this.decoderConfig.streamType=this._readUint(8)>>>2&63,this.decoderConfig.bufferSize=this._readUint(24),this.decoderConfig.maxBitrate=this._readUint(32),this.decoderConfig.avgBitrate=this._readUint(32),this.decoderConfig.decoderConfigDescriptor={},this.decoderConfig.decoderConfigDescriptor.tag=this._readUint(8),this.decoderConfig.decoderConfigDescriptor.length=this._readUint(8);var t=this._readUint(8),e=this._readUint(8),i=this.decoderConfig.decoderConfigDescriptor;i.audioObjectType=t>>>3&31,i.samplingFrequencyIndex=(7&t)<<1|e>>>7&1,i.channelConfiguration=e>>>3&15},e.ISOBox.prototype._boxParsers.tenc=function(){this._parseFullBox(),this.default_is_encrypted=1===this._readUint(24),this.default_iv_size=this._readUint(8),this.default_kid=this._readHex(16)},e.ISOBox.prototype._boxParsers.senc=function(){var t=this;this._parseFullBox(),this.sample_count=this._readUint(32),this.samples=Array.apply(null,Array(this.sample_count)).map((function(e){return function(t){if(o(t,t._root.options.iv_size)){var e={iv:t._readHex(t._root.options.iv_size)};return t.flags&&(e=function(t,e){return o(t,2)?(e.subsample_count=t._readUint(16),e.subsamples=Array.apply(null,Array(e.subsample_count)).map((function(e){return function(t){return o(t,6)?{bytes_of_clear_data:t._readUint(16),bytes_of_encrypted_data:t._readUint(32)}:{bytes_of_clear_data:0,bytes_of_encrypted_data:0}}(t)})),e):i(i({},e),{subsample_count:0,subsamples:[]})}(t,e)),e}t.samples=[]}(t)}))},e.ISOBox.prototype._boxParsers.frma=function(){this.codingname=this._readString(4)},e.ISOBox.prototype._boxParsers.schm=function(){this._parseFullBox(),this.scheme_type=this._readString(4),this.scheme_version=this._readUint(32),1&this.flags&&(this.scheme_uri=this._readUint(8))},e.ISOBox.prototype._boxParsers.saiz=function(){if(this._parseFullBox(),1&this.flags&&(this.aux_info_type=this._readUint(32),this.aux_info_type_parameter=this._readUint(32)),this.default_sample_info_size=this._readUint(8),this.sample_count=this._readUint(32),0===this.default_sample_info_size){this.sample_info_size=[];for(var t=0;t<this.sample_count;++t)this.sample_info_size.push(this._readUint(8))}},e.ISOBox.prototype._boxParsers.pssh=function(){if(this._parseFullBox(),this.system_id=this._readUUID(),this.version>0){this.kid_count=this._readUint(32),this.kids=[];for(var t=0;t<this.kid_count;++t)this.kids.push(this._readString(16))}this.data_size=this._readUint(32),this.data=new DataView(this._raw.buffer,this._cursor.offset,this.data_size)},e.ISOBox.prototype._boxParsers.prft=function(){this._parseFullBox(),this.reference_track_ID=this._readUint(32),this.ntp_timestamp_seconds=this._readUint(32),this.ntp_timestamp_seconds_fraction=this._readUint(32),0===this.version?this.media_time=this._readUint(32):this.media_time=this._readUint(64)}}},function(t){return function(){return t(t.s=37910)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["container-ts"]=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player["container-ts"]=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[858],{21332:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ContainerTsModuleDefinition=void 0;var n=i(62756),a=i(67889);e.ContainerTsModuleDefinition={name:n.ModuleName.ContainerTS,module:function(){return{WebWorkerTransmuxer:i(77869).WebWorkerTransmuxer,TransmuxerWorker:a.TransmuxerWorkerClass}}},e.default=e.ContainerTsModuleDefinition},67889:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TransmuxerWorkerClass=void 0,e.TransmuxerWorkerClass=i(72387)},72387:function(t,e,i){t.exports=function(){return i(90040)('!function(){var t={41:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.installWorkerPolyfills=function(){Array.prototype.includes||n.ArrayIncludesPolyfill.polyfill(),String.prototype.includes||r.StringIncludesPolyfill.polyfill(),String.prototype.startsWith||s.StringStartsWithPolyfill.polyfill(),String.prototype.endsWith||a.StringEndsWithPolyfill.polyfill()};var n=i(499),a=i(878),r=i(205),s=i(829)},48:function(t){!function(){t.exports=function(){"use strict";var t,e,i,n,a,r,s,o,d,p,h,l,c,u,f,g,m,y,_,b,S,v,T,w,k,C,P,E,A,x,U,M,O,D,I,L,B,R,G,W=Math.pow(2,32),F=W;(function(){var t;if(k={avc1:[],avcC:[],hvc1:[],hvcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],mvex:[],mvhd:[],pasp:[],sdtp:[],smhd:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],styp:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[]},"undefined"!=typeof Uint8Array){for(t in k)k.hasOwnProperty(t)&&(k[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);C=new Uint8Array(["i".charCodeAt(0),"s".charCodeAt(0),"o".charCodeAt(0),"m".charCodeAt(0)]),E=new Uint8Array(["a".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),A=new Uint8Array(["h".charCodeAt(0),"v".charCodeAt(0),"c".charCodeAt(0),"1".charCodeAt(0)]),P=new Uint8Array([0,0,0,1]),x=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),U=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]),M={video:x,audio:U},I=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),D=new Uint8Array([0,0,0,0,0,0,0,0]),L=new Uint8Array([0,0,0,0,0,0,0,0]),B=L,R=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),G=L,O=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0])}})(),t=function(t){var e,i,n=[],a=0;for(e=1;e<arguments.length;e++)n.push(arguments[e]);for(e=n.length;e--;)a+=n[e].byteLength;for(i=new Uint8Array(a+8),new DataView(i.buffer,i.byteOffset,i.byteLength).setUint32(0,i.byteLength),i.set(t,4),e=0,a=8;e<n.length;e++)i.set(n[e],a),a+=n[e].byteLength;return i},i=function(){return t(k.dinf,t(k.dref,I))},n=function(e){return t(k.esds,new Uint8Array([0,0,0,0,3,25,0,0,0,4,17,64,21,0,6,0,0,0,218,192,0,0,218,192,5,2,e.audioobjecttype<<3|e.samplingfrequencyindex>>>1,e.samplingfrequencyindex<<7|e.channelcount<<3,6,1,2]))},a=function(e){var i,n,a;for(a=0;a<e.length;a++)if("video"===(n=e[a]).type){i={avc:E,hevc:A}[n.codec];break}return t(k.ftyp,C,P,C,i||E)},y=function(e){return t(k.hdlr,M[e])},r=function(e){return t(k.mdat,e)},m=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,2,0,0,0,3,0,1,95,144,e.duration>>>24&255,e.duration>>>16&255,e.duration>>>8&255,255&e.duration,85,196,0,0]);return e.samplerate&&(i[12]=e.samplerate>>>24&255,i[13]=e.samplerate>>>16&255,i[14]=e.samplerate>>>8&255,i[15]=255&e.samplerate),t(k.mdhd,i)},g=function(e){return t(k.mdia,m(e),y(e.type),o(e))},s=function(e){return t(k.mfhd,new Uint8Array([0,0,0,0,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e]))},o=function(e){return t(k.minf,"video"===e.type?t(k.vmhd,O):t(k.smhd,D),i(),b(e))},d=function(e,i){for(var n=[],a=i.length;a--;)n[a]=v(i[a]);return t.apply(null,[k.moof,s(e)].concat(n))},p=function(e){for(var i=e.length,n=[];i--;)n[i]=u(e[i]);return t.apply(null,[k.moov,l(4294967295)].concat(n).concat(h(e)))},h=function(e){for(var i=e.length,n=[];i--;)n[i]=T(e[i]);return t.apply(null,[k.mvex].concat(n))},l=function(e){var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,2,0,1,95,144,(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return t(k.mvhd,i)},_=function(e){var i,n,a=e.samples||[],r=new Uint8Array(4+a.length);for(n=0;n<a.length;n++)i=a[n].flags,r[n+4]=i.dependsOn<<4|i.isDependedOn<<2|i.hasRedundancy;return t(k.sdtp,r)},b=function(e){return t(k.stbl,S(e),t(k.stts,G),t(k.stsc,B),t(k.stsz,R),t(k.stco,L))},e=function(){return t(k.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192]))},c=function(e,i){return t(k.pasp,new Uint8Array([(4278190080&e)>>24,(16711680&e)>>16,(65280&e)>>8,255&e,(4278190080&i)>>24,(16711680&i)>>16,(65280&i)>>8,255&i]))},function(){var i,a;S=function(e){return t(k.stsd,new Uint8Array([0,0,0,0,0,0,0,1]),"video"===e.type?i(e):a(e))},i=function(i){var n,a,r=i.sps||[],s=i.parsedSps||{},o=i.pps||[],d=i.vps||[],p=[],h=[],l=[];for(n=0;n<r.length;n++)p.push((65280&r[n].byteLength)>>>8),p.push(255&r[n].byteLength),p=p.concat(Array.prototype.slice.call(r[n]));for(n=0;n<o.length;n++)h.push((65280&o[n].byteLength)>>>8),h.push(255&o[n].byteLength),h=h.concat(Array.prototype.slice.call(o[n]));for(n=0;n<d.length;n++)l.push(d[n].byteLength>>>8&255),l.push(255&d[n].byteLength),l=l.concat(Array.prototype.slice.call(d[n]));var u=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,(65280&s.width)>>8,255&s.width,(65280&s.height)>>8,255&s.height,0,72,0,0,0,72,0,0,0,0,0,0,0,1,19,118,105,100,101,111,106,115,45,99,111,110,116,114,105,98,45,104,108,115,0,0,0,0,0,0,0,0,0,0,0,0,0,24,255,255]);if("avc"===i.codec)return a=[k.avc1,u,t(k.avcC,new Uint8Array([1,s.profileIdc,s.profileCompatibility,s.levelIdc,255].concat([r.length],p,[o.length],h))),e()],i.sarRatio&&a.push(c(i.sarRatio[0],i.sarRatio[1])),t.apply(null,a);if("hevc"===i.codec){var f,g=s.sps_max_sub_layers_minus1+1,m=s.sps_temporal_id_nesting_flag,y=61440|s.min_spatial_segmentation_idc,_=new DataView(new ArrayBuffer(2)),b=new DataView(new ArrayBuffer(2)),S=new DataView(new ArrayBuffer(2));return _.setUint16(0,d.length),b.setUint16(0,r.length),S.setUint16(0,o.length),f=new Uint8Array([1,s.general_profile_space<<6|s.general_tier_flag<<5|s.general_profile_idc,s.general_profile_compatibility_flags>>>24&255,s.general_profile_compatibility_flags>>>16&255,s.general_profile_compatibility_flags>>>8&255,255&s.general_profile_compatibility_flags,s.general_constraint_indicator_flags_bytes[0],s.general_constraint_indicator_flags_bytes[1],s.general_constraint_indicator_flags_bytes[2],s.general_constraint_indicator_flags_bytes[3],s.general_constraint_indicator_flags_bytes[4],s.general_constraint_indicator_flags_bytes[5],s.general_level_idc,y>>>8&255,255&y,252,252|s.chroma_format_idc,248|s.bit_depth_luma_minus8,248|s.bit_depth_chroma_minus8,0,0,g<<3|m<<2|3,3].concat([160,_.getUint8(0),_.getUint8(1)],l).concat([161,b.getUint8(0),b.getUint8(1)],p).concat([162,S.getUint8(0),S.getUint8(1)],h)),t(k.hvc1,u,t(k.hvcC,f),e())}},a=function(e){return t(k.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,(65280&e.channelcount)>>8,255&e.channelcount,(65280&e.samplesize)>>8,255&e.samplesize,0,0,0,0,(65280&e.samplerate)>>8,255&e.samplerate,0,0]),n(e))}}(),f=function(e){var i=new Uint8Array([0,0,0,7,0,0,0,0,0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,0,(4278190080&e.duration)>>24,(16711680&e.duration)>>16,(65280&e.duration)>>8,255&e.duration,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,(65280&e.width)>>8,255&e.width,0,0,(65280&e.height)>>8,255&e.height,0,0]);return t(k.tkhd,i)},v=function(e){var i,n,a,r,s,o;return i=t(k.tfhd,new Uint8Array([0,0,0,58,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0])),s=Math.floor(e.baseMediaDecodeTime/F),o=Math.floor(e.baseMediaDecodeTime%F),n=t(k.tfdt,new Uint8Array([1,0,0,0,s>>>24&255,s>>>16&255,s>>>8&255,255&s,o>>>24&255,o>>>16&255,o>>>8&255,255&o])),"audio"===e.type?(a=w(e,92),t(k.traf,i,n,a)):(r=_(e),a=w(e,r.length+92),t(k.traf,i,n,a,r))},u=function(e){return e.duration=e.duration||4294967295,t(k.trak,f(e),g(e))},T=function(e){var i=new Uint8Array([0,0,0,0,(4278190080&e.id)>>24,(16711680&e.id)>>16,(65280&e.id)>>8,255&e.id,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]);return"video"!==e.type&&(i[i.length-1]=0),t(k.trex,i)},function(){var e,i,n;n=function(t,e){var i=0,n=0,a=0,r=0;return t.length&&(void 0!==t[0].duration&&(i=1),void 0!==t[0].size&&(n=2),void 0!==t[0].flags&&(a=4),void 0!==t[0].compositionTimeOffset&&(r=8)),[0,0,i|n|a|r,1,(4278190080&t.length)>>>24,(16711680&t.length)>>>16,(65280&t.length)>>>8,255&t.length,(4278190080&e)>>>24,(16711680&e)>>>16,(65280&e)>>>8,255&e]},i=function(e,i){var a,r,s,o,d,p;i+=20+16*(o=e.samples||[]).length,s=n(o,i),(r=new Uint8Array(s.length+16*o.length)).set(s),a=s.length;var h=0;for(p=0;p<o.length;p++)h+=(d=o[p]).duration,r[a++]=(4278190080&d.duration)>>>24,r[a++]=(16711680&d.duration)>>>16,r[a++]=(65280&d.duration)>>>8,r[a++]=255&d.duration,r[a++]=(4278190080&d.size)>>>24,r[a++]=(16711680&d.size)>>>16,r[a++]=(65280&d.size)>>>8,r[a++]=255&d.size,r[a++]=d.flags.isLeading<<2|d.flags.dependsOn,r[a++]=d.flags.isDependedOn<<6|d.flags.hasRedundancy<<4|d.flags.paddingValue<<1|d.flags.isNonSyncSample,r[a++]=61440&d.flags.degradationPriority,r[a++]=15&d.flags.degradationPriority,r[a++]=(4278190080&d.compositionTimeOffset)>>>24,r[a++]=(16711680&d.compositionTimeOffset)>>>16,r[a++]=(65280&d.compositionTimeOffset)>>>8,r[a++]=255&d.compositionTimeOffset;return e.segmentDuration=h,t(k.trun,r)},e=function(e,i){var a,r,s,o,d,p;i+=20+8*(o=e.samples||[]).length,s=n(o,i),(a=new Uint8Array(s.length+8*o.length)).set(s),r=s.length;var h=0;for(p=0;p<o.length;p++)h+=(d=o[p]).duration,a[r++]=(4278190080&d.duration)>>>24,a[r++]=(16711680&d.duration)>>>16,a[r++]=(65280&d.duration)>>>8,a[r++]=255&d.duration,a[r++]=(4278190080&d.size)>>>24,a[r++]=(16711680&d.size)>>>16,a[r++]=(65280&d.size)>>>8,a[r++]=255&d.size;return e.segmentDuration=h,t(k.trun,a)},w=function(t,n){return"audio"===t.type?e(t,n):i(t,n)}}();var N={ftyp:a,mdat:r,moof:d,moov:p,initSegment:function(t){var e,i=a(t),n=p(t);return(e=new Uint8Array(i.byteLength+n.byteLength)).set(i),e.set(n,i.byteLength),e}};var z=function(t,e,i){return t(i={path:e,exports:{},require:function(t,e){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==e&&i.path)}},i.exports),i.exports}((function(t){function e(){return t.exports=e=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},t.exports.__esModule=!0,t.exports.default=t.exports,e.apply(this,arguments)}t.exports=e,t.exports.__esModule=!0,t.exports.default=t.exports})),j=function(){this.init=function(){var t={};this.on=function(e,i){t[e]||(t[e]=[]),t[e]=t[e].concat(i)},this.off=function(e,i){var n;return!!t[e]&&(n=t[e].indexOf(i),t[e]=t[e].slice(),t[e].splice(n,1),n>-1)},this.trigger=function(e){var i,n,a,r;if(i=t[e])if(2===arguments.length)for(a=i.length,n=0;n<a;++n)i[n].call(this,arguments[1]);else{for(r=[],n=arguments.length,n=1;n<arguments.length;++n)r.push(arguments[n]);for(a=i.length,n=0;n<a;++n)i[n].apply(this,r)}},this.dispose=function(){t={}}}};j.prototype.pipe=function(t){return this.on("data",(function(e){t.push(e)})),this.on("done",(function(e){t.flush(e)})),this.on("partialdone",(function(e){t.partialFlush(e)})),this.on("endedtimeline",(function(e){t.endTimeline(e)})),this.on("reset",(function(e){t.reset(e)})),t},j.prototype.push=function(t){this.trigger("data",t)},j.prototype.flush=function(t){this.trigger("done",t)},j.prototype.partialFlush=function(t){this.trigger("partialdone",t)},j.prototype.endTimeline=function(t){this.trigger("endedtimeline",t)},j.prototype.reset=function(t){this.trigger("reset",t)};var V,Y,H,X,q,K,Z,$,J=j,Q=function(t,e){var i=function(){return{size:0,flags:{isLeading:0,dependsOn:1,isDependedOn:0,hasRedundancy:0,degradationPriority:0,isNonSyncSample:1}}}();return i.dataOffset=e,i.compositionTimeOffset=t.pts-t.dts,i.duration=t.duration,i.size=4*t.length,i.size+=t.byteLength,t.keyFrame&&(i.flags.dependsOn=2,i.flags.isNonSyncSample=0),i},tt=function(t){var e,i,n=[],a=[];for(a.byteLength=0,a.nalCount=0,a.duration=0,n.byteLength=0,e=0;e<t.length;e++)"access_unit_delimiter_rbsp"===(i=t[e]).nalUnitType?(n.length&&(n.duration=i.dts-n.dts,a.byteLength+=n.byteLength,a.nalCount+=n.length,a.duration+=n.duration,a.push(n)),(n=[i]).byteLength=i.data.byteLength,n.pts=i.pts,n.dts=i.dts):("slice_layer_without_partitioning_rbsp_idr"===i.nalUnitType&&(n.keyFrame=!0),n.duration=i.dts-n.dts,n.byteLength+=i.data.byteLength,n.push(i));return a.length&&(!n.duration||n.duration<=0)&&(n.duration=a[a.length-1].duration),a.byteLength+=n.byteLength,a.nalCount+=n.length,a.duration+=n.duration,a.push(n),a},et=function(t){var e,i,n=[],a=[];for(n.byteLength=0,n.nalCount=0,n.duration=0,n.pts=t[0].pts,n.dts=t[0].dts,a.byteLength=0,a.nalCount=0,a.duration=0,a.pts=t[0].pts,a.dts=t[0].dts,e=0;e<t.length;e++)(i=t[e]).keyFrame?(n.length&&(a.push(n),a.byteLength+=n.byteLength,a.nalCount+=n.nalCount,a.duration+=n.duration),(n=[i]).nalCount=i.length,n.byteLength=i.byteLength,n.pts=i.pts,n.dts=i.dts,n.duration=i.duration):(n.duration+=i.duration,n.nalCount+=i.length,n.byteLength+=i.byteLength,n.push(i));return a.length&&n.duration<=0&&(n.duration=a[a.length-1].duration),a.byteLength+=n.byteLength,a.nalCount+=n.nalCount,a.duration+=n.duration,a.push(n),a},it=function(t){var e;return!t[0][0].keyFrame&&t.length>1&&(e=t.shift(),t.byteLength-=e.byteLength,t.nalCount-=e.nalCount,t[0][0].dts=e.dts,t[0][0].pts=e.pts,t[0][0].duration+=e.duration),t},nt=function(t,e){var i,n,a,r,s,o=e||0,d=[];for(i=0;i<t.length;i++)for(r=t[i],n=0;n<r.length;n++)s=r[n],o+=(a=Q(s,o)).size,d.push(a);return d},at=function(t){var e,i,n,a,r,s,o=0,d=t.byteLength,p=t.nalCount,h=new Uint8Array(d+4*p),l=new DataView(h.buffer);for(e=0;e<t.length;e++)for(a=t[e],i=0;i<a.length;i++)for(r=a[i],n=0;n<r.length;n++)s=r[n],l.setUint32(o,s.data.byteLength),o+=4,h.set(s.data,o),o+=s.data.byteLength;return h},rt=[33,16,5,32,164,27],st=[33,65,108,84,1,2,4,8,168,2,4,8,17,191,252],ot=function(t){for(var e=[];t--;)e.push(0);return e},dt=function(){if(!V){var t={96e3:[rt,[227,64],ot(154),[56]],88200:[rt,[231],ot(170),[56]],64e3:[rt,[248,192],ot(240),[56]],48e3:[rt,[255,192],ot(268),[55,148,128],ot(54),[112]],44100:[rt,[255,192],ot(268),[55,163,128],ot(84),[112]],32e3:[rt,[255,192],ot(268),[55,234],ot(226),[112]],24e3:[rt,[255,192],ot(268),[55,255,128],ot(268),[111,112],ot(126),[224]],16e3:[rt,[255,192],ot(268),[55,255,128],ot(268),[111,255],ot(269),[223,108],ot(195),[1,192]],12e3:[st,ot(268),[3,127,248],ot(268),[6,255,240],ot(268),[13,255,224],ot(268),[27,253,128],ot(259),[56]],11025:[st,ot(268),[3,127,248],ot(268),[6,255,240],ot(268),[13,255,224],ot(268),[27,255,192],ot(268),[55,175,128],ot(108),[112]],8e3:[st,ot(268),[3,121,16],ot(47),[7]]};V=function(t){return Object.keys(t).reduce((function(e,i){return e[i]=new Uint8Array(t[i].reduce((function(t,e){return t.concat(e)}),[])),e}),{})}(t)}return V},pt=9e4;K=function(t,e){return Y(q(t,e))},Z=function(t,e){return H(X(t),e)},$=function(t,e,i){return X(i?t:t-e)};var ht=pt,lt=(Y=function(t){return t*pt},H=function(t,e){return t*e},X=function(t){return t/pt},q=function(t,e){return t/e},K),ct=Z,ut=$,ft=function(t,e,i,n){var a,r,s,o,d=0,p=0,h=0,l=0;if(e.length&&(a=lt(t.baseMediaDecodeTime,t.samplerate),d=Math.ceil(ht/(t.samplerate/1024)),i&&n&&(p=a-Math.max(i,n),l=(h=Math.floor(p/d))*d),!(h<1||l>ht/2))){for((r=dt()[t.samplerate])||(r=e[0].data),s=0;s<h;s++)o=e[0],e.splice(0,0,{data:r,dts:o.dts-d,pts:o.pts-d});return t.baseMediaDecodeTime-=Math.floor(ct(l,t.samplerate)),l}},gt=function(t){var e,i,n=[];for(e=0;e<t.length;e++)i=t[e],n.push({size:i.data.byteLength,duration:1024});return n},mt=function(t){var e,i,n=0,a=new Uint8Array(function(t){var e,i=0;for(e=0;e<t.length;e++)i+=t[e].data.byteLength;return i}(t));for(e=0;e<t.length;e++)i=t[e],a.set(i.data,n),n+=i.data.byteLength;return a},yt=ht,_t=function(t){delete t.minSegmentDts,delete t.maxSegmentDts,delete t.minSegmentPts,delete t.maxSegmentPts},bt=function(t,e){var i,n=t.minSegmentDts;return e||(n-=t.timelineStartInfo.dts),i=t.timelineStartInfo.baseMediaDecodeTime,i+=n,i=Math.max(0,i),"audio"===t.type&&(i*=t.samplerate/yt,i=Math.floor(i)),i},St=function(t,e){"number"==typeof e.pts&&(void 0===t.timelineStartInfo.pts&&(t.timelineStartInfo.pts=e.pts),void 0===t.minSegmentPts?t.minSegmentPts=e.pts:t.minSegmentPts=Math.min(t.minSegmentPts,e.pts),t.timelineStartInfo.minSegmentPts=t.minSegmentPts,void 0===t.maxSegmentPts?t.maxSegmentPts=e.pts:t.maxSegmentPts=Math.max(t.maxSegmentPts,e.pts)),"number"==typeof e.dts&&(void 0===t.timelineStartInfo.dts&&(t.timelineStartInfo.dts=e.dts),void 0===t.minSegmentDts?t.minSegmentDts=e.dts:t.minSegmentDts=Math.min(t.minSegmentDts,e.dts),void 0===t.maxSegmentDts?t.maxSegmentDts=e.dts:t.maxSegmentDts=Math.max(t.maxSegmentDts,e.dts))},vt=function(t){for(var e=0,i=[],n=0,a=0;e<t.byteLength&&128!==t[e];){for(;255===t[e];)n+=255,e++;for(n+=t[e++];255===t[e];)a+=255,e++;a+=t[e++];var r=String.fromCharCode(t[e+3],t[e+4],t[e+5],t[e+6]);4===n&&"GA94"===r&&i.push({payloadType:n,payloadSize:a,payload:t.subarray(e,e+a)}),e+=a,n=0,a=0}return i},Tt=function(t){return 181!==t.payload[0]||49!=(t.payload[1]<<8|t.payload[2])||"GA94"!==String.fromCharCode(t.payload[3],t.payload[4],t.payload[5],t.payload[6])||3!==t.payload[7]?null:t.payload.subarray(8,t.payload.length-1)},wt=function(t,e){var i,n,a,r,s=[];if(!(64&e[0]))return s;for(n=31&e[0],i=0;i<n;i++)r={type:3&e[2+(a=3*i)],pts:t},4&e[a+2]&&(r.ccData=e[a+3]<<8|e[a+4],s.push(r));return s},kt=4,Ct=function t(e){e=e||{},t.prototype.init.call(this),this.parse708captions_="boolean"!=typeof e.parse708captions||e.parse708captions,this.captionPackets_=[],this.ccStreams_=[new Bt(0,0),new Bt(0,1),new Bt(1,0),new Bt(1,1)],this.parse708captions_&&(this.cc708Stream_=new Ut({captionServices:e.captionServices})),this.reset(),this.ccStreams_.forEach((function(t){t.on("data",this.trigger.bind(this,"data")),t.on("partialdone",this.trigger.bind(this,"partialdone")),t.on("done",this.trigger.bind(this,"done"))}),this),this.parse708captions_&&(this.cc708Stream_.on("data",this.trigger.bind(this,"data")),this.cc708Stream_.on("partialdone",this.trigger.bind(this,"partialdone")),this.cc708Stream_.on("done",this.trigger.bind(this,"done")))};(Ct.prototype=new J).push=function(t){var e=this;"sei_rbsp"===t.nalUnitType&&vt(t.escapedRBSP).filter((function(t){return t.payloadType===kt})).map(Tt).forEach((function(i){i&&(e.captionPackets_=e.captionPackets_.concat(wt(t.pts,i)))}))},Ct.prototype.flushCCStreams=function(t){this.ccStreams_.forEach((function(e){return"flush"===t?e.flush():e.partialFlush()}),this)},Ct.prototype.flushStream=function(t){this.captionPackets_.length?(this.captionPackets_.forEach((function(t,e){t.presortIndex=e})),this.captionPackets_.sort((function(t,e){return t.pts===e.pts?t.presortIndex-e.presortIndex:t.pts-e.pts})),this.captionPackets_.forEach((function(t){t.type<2?this.dispatchCea608Packet(t):this.dispatchCea708Packet(t)}),this),this.captionPackets_.length=0,this.flushCCStreams(t)):this.flushCCStreams(t)},Ct.prototype.flush=function(){return this.flushStream("flush")},Ct.prototype.partialFlush=function(){return this.flushStream("partialFlush")},Ct.prototype.reset=function(){this.latestDts_=null,this.ignoreNextEqualDts_=!1,this.numSameDts_=0,this.activeCea608Channel_=[null,null],this.ccStreams_.forEach((function(t){t.reset()}))},Ct.prototype.dispatchCea608Packet=function(t){this.setsTextOrXDSActive(t)?this.activeCea608Channel_[t.type]=null:this.setsChannel1Active(t)?this.activeCea608Channel_[t.type]=0:this.setsChannel2Active(t)&&(this.activeCea608Channel_[t.type]=1),null!==this.activeCea608Channel_[t.type]&&this.ccStreams_[(t.type<<1)+this.activeCea608Channel_[t.type]].push(t)},Ct.prototype.setsChannel1Active=function(t){return 4096==(30720&t.ccData)},Ct.prototype.setsChannel2Active=function(t){return 6144==(30720&t.ccData)},Ct.prototype.setsTextOrXDSActive=function(t){return 256==(28928&t.ccData)||4138==(30974&t.ccData)||6186==(30974&t.ccData)},Ct.prototype.dispatchCea708Packet=function(t){this.parse708captions_&&this.cc708Stream_.push(t)};var Pt={127:9834,4128:32,4129:160,4133:8230,4138:352,4140:338,4144:9608,4145:8216,4146:8217,4147:8220,4148:8221,4149:8226,4153:8482,4154:353,4156:339,4157:8480,4159:376,4214:8539,4215:8540,4216:8541,4217:8542,4218:9168,4219:9124,4220:9123,4221:9135,4222:9126,4223:9121,4256:12600},Et=function(t){return 32<=t&&t<=127||160<=t&&t<=255},At=function(t){this.windowNum=t,this.reset()};At.prototype.reset=function(){this.clearText(),this.pendingNewLine=!1,this.winAttr={},this.penAttr={},this.penLoc={},this.penColor={},this.visible=0,this.rowLock=0,this.columnLock=0,this.priority=0,this.relativePositioning=0,this.anchorVertical=0,this.anchorHorizontal=0,this.anchorPoint=0,this.rowCount=1,this.virtualRowCount=this.rowCount+1,this.columnCount=41,this.windowStyle=0,this.penStyle=0},At.prototype.getText=function(){return this.rows.join("\\n")},At.prototype.clearText=function(){this.rows=[""],this.rowIdx=0},At.prototype.newLine=function(t){for(this.rows.length>=this.virtualRowCount&&"function"==typeof this.beforeRowOverflow&&this.beforeRowOverflow(t),this.rows.length>0&&(this.rows.push(""),this.rowIdx++);this.rows.length>this.virtualRowCount;)this.rows.shift(),this.rowIdx--},At.prototype.isEmpty=function(){return 0===this.rows.length||1===this.rows.length&&""===this.rows[0]},At.prototype.addText=function(t){this.rows[this.rowIdx]+=t},At.prototype.backspace=function(){if(!this.isEmpty()){var t=this.rows[this.rowIdx];this.rows[this.rowIdx]=t.substr(0,t.length-1)}};var xt=function(t,e,i){this.serviceNum=t,this.text="",this.currentWindow=new At(-1),this.windows=[],this.stream=i,"string"==typeof e&&this.createTextDecoder(e)};xt.prototype.init=function(t,e){this.startPts=t;for(var i=0;i<8;i++)this.windows[i]=new At(i),"function"==typeof e&&(this.windows[i].beforeRowOverflow=e)},xt.prototype.setCurrentWindow=function(t){this.currentWindow=this.windows[t]},xt.prototype.createTextDecoder=function(t){if("undefined"==typeof TextDecoder)this.stream.trigger("log",{level:"warn",message:"The `encoding` option is unsupported without TextDecoder support"});else try{this.textDecoder_=new TextDecoder(t)}catch(e){this.stream.trigger("log",{level:"warn",message:"TextDecoder could not be created with "+t+" encoding. "+e})}};var Ut=function t(e){e=e||{},t.prototype.init.call(this);var i,n=this,a=e.captionServices||{},r={};Object.keys(a).forEach((function(t){i=a[t],/^SERVICE/.test(t)&&(r[t]=i.encoding)})),this.serviceEncodings=r,this.current708Packet=null,this.services={},this.push=function(t){3===t.type?(n.new708Packet(),n.add708Bytes(t)):(null===n.current708Packet&&n.new708Packet(),n.add708Bytes(t))}};Ut.prototype=new J,Ut.prototype.new708Packet=function(){null!==this.current708Packet&&this.push708Packet(),this.current708Packet={data:[],ptsVals:[]}},Ut.prototype.add708Bytes=function(t){var e=t.ccData,i=e>>>8,n=255&e;this.current708Packet.ptsVals.push(t.pts),this.current708Packet.data.push(i),this.current708Packet.data.push(n)},Ut.prototype.push708Packet=function(){var t=this.current708Packet,e=t.data,i=null,n=null,a=0,r=e[a++];for(t.seq=r>>6,t.sizeCode=63&r;a<e.length;a++)n=31&(r=e[a++]),7==(i=r>>5)&&n>0&&(i=r=e[a++]),this.pushServiceBlock(i,a,n),n>0&&(a+=n-1)},Ut.prototype.pushServiceBlock=function(t,e,i){var n,a=e,r=this.current708Packet.data,s=this.services[t];for(s||(s=this.initService(t,a));a<e+i&&a<r.length;a++)n=r[a],Et(n)?a=this.handleText(a,s):24===n?a=this.multiByteCharacter(a,s):16===n?a=this.extendedCommands(a,s):128<=n&&n<=135?a=this.setCurrentWindow(a,s):152<=n&&n<=159?a=this.defineWindow(a,s):136===n?a=this.clearWindows(a,s):140===n?a=this.deleteWindows(a,s):137===n?a=this.displayWindows(a,s):138===n?a=this.hideWindows(a,s):139===n?a=this.toggleWindows(a,s):151===n?a=this.setWindowAttributes(a,s):144===n?a=this.setPenAttributes(a,s):145===n?a=this.setPenColor(a,s):146===n?a=this.setPenLocation(a,s):143===n?s=this.reset(a,s):8===n?s.currentWindow.backspace():12===n?s.currentWindow.clearText():13===n?s.currentWindow.pendingNewLine=!0:14===n?s.currentWindow.clearText():141===n&&a++},Ut.prototype.extendedCommands=function(t,e){var i=this.current708Packet.data[++t];return Et(i)&&(t=this.handleText(t,e,{isExtended:!0})),t},Ut.prototype.getPts=function(t){return this.current708Packet.ptsVals[Math.floor(t/2)]},Ut.prototype.initService=function(t,e){var i,n,a=this;return(i="SERVICE"+t)in this.serviceEncodings&&(n=this.serviceEncodings[i]),this.services[t]=new xt(t,n,a),this.services[t].init(this.getPts(e),(function(e){a.flushDisplayed(e,a.services[t])})),this.services[t]},Ut.prototype.handleText=function(t,e,i){var n,a,r=i&&i.isExtended,s=i&&i.isMultiByte,o=this.current708Packet.data,d=r?4096:0,p=o[t],h=o[t+1],l=e.currentWindow;return e.textDecoder_&&!r?(s?(a=[p,h],t++):a=[p],n=e.textDecoder_.decode(new Uint8Array(a))):n=function(t){var e=Pt[t]||t;return 4096&t&&t===e?"":String.fromCharCode(e)}(d|p),l.pendingNewLine&&!l.isEmpty()&&l.newLine(this.getPts(t)),l.pendingNewLine=!1,l.addText(n),t},Ut.prototype.multiByteCharacter=function(t,e){var i=this.current708Packet.data,n=i[t+1],a=i[t+2];return Et(n)&&Et(a)&&(t=this.handleText(++t,e,{isMultiByte:!0})),t},Ut.prototype.setCurrentWindow=function(t,e){var i=7&this.current708Packet.data[t];return e.setCurrentWindow(i),t},Ut.prototype.defineWindow=function(t,e){var i=this.current708Packet.data,n=i[t],a=7&n;e.setCurrentWindow(a);var r=e.currentWindow;return n=i[++t],r.visible=(32&n)>>5,r.rowLock=(16&n)>>4,r.columnLock=(8&n)>>3,r.priority=7&n,n=i[++t],r.relativePositioning=(128&n)>>7,r.anchorVertical=127&n,n=i[++t],r.anchorHorizontal=n,n=i[++t],r.anchorPoint=(240&n)>>4,r.rowCount=15&n,n=i[++t],r.columnCount=63&n,n=i[++t],r.windowStyle=(56&n)>>3,r.penStyle=7&n,r.virtualRowCount=r.rowCount+1,t},Ut.prototype.setWindowAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],a=e.currentWindow.winAttr;return n=i[++t],a.fillOpacity=(192&n)>>6,a.fillRed=(48&n)>>4,a.fillGreen=(12&n)>>2,a.fillBlue=3&n,n=i[++t],a.borderType=(192&n)>>6,a.borderRed=(48&n)>>4,a.borderGreen=(12&n)>>2,a.borderBlue=3&n,n=i[++t],a.borderType+=(128&n)>>5,a.wordWrap=(64&n)>>6,a.printDirection=(48&n)>>4,a.scrollDirection=(12&n)>>2,a.justify=3&n,n=i[++t],a.effectSpeed=(240&n)>>4,a.effectDirection=(12&n)>>2,a.displayEffect=3&n,t},Ut.prototype.flushDisplayed=function(t,e){for(var i=[],n=0;n<8;n++)e.windows[n].visible&&!e.windows[n].isEmpty()&&i.push(e.windows[n].getText());e.endPts=t,e.text=i.join("\\n\\n"),this.pushCaption(e),e.startPts=t},Ut.prototype.pushCaption=function(t){""!==t.text&&(this.trigger("data",{startPts:t.startPts,endPts:t.endPts,text:t.text,stream:"cc708_"+t.serviceNum}),t.text="",t.startPts=t.endPts)},Ut.prototype.displayWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var a=0;a<8;a++)i&1<<a&&(e.windows[a].visible=1);return t},Ut.prototype.hideWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var a=0;a<8;a++)i&1<<a&&(e.windows[a].visible=0);return t},Ut.prototype.toggleWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var a=0;a<8;a++)i&1<<a&&(e.windows[a].visible^=1);return t},Ut.prototype.clearWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var a=0;a<8;a++)i&1<<a&&e.windows[a].clearText();return t},Ut.prototype.deleteWindows=function(t,e){var i=this.current708Packet.data[++t],n=this.getPts(t);this.flushDisplayed(n,e);for(var a=0;a<8;a++)i&1<<a&&e.windows[a].reset();return t},Ut.prototype.setPenAttributes=function(t,e){var i=this.current708Packet.data,n=i[t],a=e.currentWindow.penAttr;return n=i[++t],a.textTag=(240&n)>>4,a.offset=(12&n)>>2,a.penSize=3&n,n=i[++t],a.italics=(128&n)>>7,a.underline=(64&n)>>6,a.edgeType=(56&n)>>3,a.fontStyle=7&n,t},Ut.prototype.setPenColor=function(t,e){var i=this.current708Packet.data,n=i[t],a=e.currentWindow.penColor;return n=i[++t],a.fgOpacity=(192&n)>>6,a.fgRed=(48&n)>>4,a.fgGreen=(12&n)>>2,a.fgBlue=3&n,n=i[++t],a.bgOpacity=(192&n)>>6,a.bgRed=(48&n)>>4,a.bgGreen=(12&n)>>2,a.bgBlue=3&n,n=i[++t],a.edgeRed=(48&n)>>4,a.edgeGreen=(12&n)>>2,a.edgeBlue=3&n,t},Ut.prototype.setPenLocation=function(t,e){var i=this.current708Packet.data,n=i[t],a=e.currentWindow.penLoc;return e.currentWindow.pendingNewLine=!0,n=i[++t],a.row=15&n,n=i[++t],a.column=63&n,t},Ut.prototype.reset=function(t,e){var i=this.getPts(t);return this.flushDisplayed(i,e),this.initService(e.serviceNum,t)};var Mt={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,304:174,305:176,306:189,307:191,308:8482,309:162,310:163,311:9834,312:224,313:160,314:232,315:226,316:234,317:238,318:244,319:251,544:193,545:201,546:211,547:218,548:220,549:252,550:8216,551:161,552:42,553:39,554:8212,555:169,556:8480,557:8226,558:8220,559:8221,560:192,561:194,562:199,563:200,564:202,565:203,566:235,567:206,568:207,569:239,570:212,571:217,572:249,573:219,574:171,575:187,800:195,801:227,802:205,803:204,804:236,805:210,806:242,807:213,808:245,809:123,810:125,811:92,812:94,813:95,814:124,815:126,816:196,817:228,818:214,819:246,820:223,821:165,822:164,823:9474,824:197,825:229,826:216,827:248,828:9484,829:9488,830:9492,831:9496},Ot=function(t){return t=Mt[t]||t,String.fromCharCode(t).replace(/[\\x00]/g,"")},Dt=[4352,4384,4608,4640,5376,5408,5632,5664,5888,5920,4096,4864,4896,5120,5152],It=function(){for(var t=[],e=15;e--;)t.push("");return t},Lt=function(){for(var t=[],e=15;e--;)t[e]=0;return t},Bt=function t(e,i,n){t.prototype.init.call(this),this.field_=e||0,this.dataChannel_=i||0,this.name_="CC"+(1+(this.field_<<1|this.dataChannel_)),this.setConstants(),this.reset(),this.push=function(t){var e,i,n,a,r;if((e=32639&t.ccData)!==this.lastControlCode_){if(4096==(61440&e)?this.lastControlCode_=e:e!==this.PADDING_&&(this.lastControlCode_=null),n=e>>>8,a=255&e,e!==this.PADDING_)if(e===this.RESUME_CAPTION_LOADING_)this.mode_="popOn";else if(e===this.END_OF_CAPTION_)this.mode_="popOn",this.clearFormatting(t.pts),this.flushDisplayed(t.pts),i=this.displayed_,this.displayed_=this.nonDisplayed_,this.nonDisplayed_=i,i=this.displayedIndent_,this.displayedIndent_=this.nonDisplayedIndent_,this.nonDisplayedIndent_=i,this.startPts_=t.pts;else if(e===this.ROLL_UP_2_ROWS_)this.rollUpRows_=2,this.setRollUp(t.pts);else if(e===this.ROLL_UP_3_ROWS_)this.rollUpRows_=3,this.setRollUp(t.pts);else if(e===this.ROLL_UP_4_ROWS_)this.rollUpRows_=4,this.setRollUp(t.pts);else if(e===this.CARRIAGE_RETURN_)this.clearFormatting(t.pts),this.flushDisplayed(t.pts),this.shiftRowsUp_(),this.startPts_=t.pts;else if(e===this.BACKSPACE_)"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1);else if(e===this.ERASE_DISPLAYED_MEMORY_)this.flushDisplayed(t.pts),this.displayed_=It(),this.displayedIndent_=Lt();else if(e===this.ERASE_NON_DISPLAYED_MEMORY_)this.nonDisplayed_=It(),this.nonDisplayedIndent_=Lt();else if(e===this.RESUME_DIRECT_CAPTIONING_)"paintOn"!==this.mode_&&(this.flushDisplayed(t.pts),this.displayed_=It(),this.displayedIndent_=Lt()),this.mode_="paintOn",this.startPts_=t.pts;else{if(!Boolean(this.mode_))return;if(this.isSpecialCharacter(n,a))r=Ot((n=(3&n)<<8)|a),this[this.mode_](t.pts,r),this.column_++;else if(this.isExtCharacter(n,a))"popOn"===this.mode_?this.nonDisplayed_[this.row_]=this.nonDisplayed_[this.row_].slice(0,-1):this.displayed_[this.row_]=this.displayed_[this.row_].slice(0,-1),r=Ot((n=(3&n)<<8)|a),this[this.mode_](t.pts,r),this.column_++;else if(this.isMidRowCode(n,a))this.clearFormatting(t.pts),this[this.mode_](t.pts," "),this.column_++,14&~a||this.addFormatting(t.pts,["i"]),1&~a||this.addFormatting(t.pts,["u"]);else if(this.isOffsetControlCode(n,a)){var s=3&a;this.column_+=s,this.incrementIdentation(s)}else if(this.isPAC(n,a)){var o=Dt.indexOf(7968&e);"rollUp"===this.mode_&&(o-this.rollUpRows_+1<0&&(o=this.rollUpRows_-1),this.setRollUp(t.pts,o)),o!==this.row_&&(this.clearFormatting(t.pts),this.changeRow(o)),1&a&&-1===this.formatting_.indexOf("u")&&this.addFormatting(t.pts,["u"]),16&~e||(this.column_=4*((14&e)>>1),"popOn"===this.mode_?this.nonDisplayedIndent_[this.row_]=this.column_:"rollUp"===this.mode_&&(this.displayedIndent_[this.row_]=this.column_)),this.isColorPAC(a)&&(14&~a||this.addFormatting(t.pts,["i"]))}else this.isNormalChar(n)&&(r=Ot(n),0!==a&&(r+=Ot(a)),this[this.mode_](t.pts,r),this.column_+=r.length)}}else this.lastControlCode_=null}};Bt.prototype=new J,Bt.prototype.flushDisplayed=function(t){for(var e=0;e<this.displayed_.length;e++){var i=this.displayed_[e];i&&i.length&&this.trigger("data",{startPts:this.startPts_,endPts:t,text:i,stream:this.name_,position:{row:e,column:this.displayedIndent_[e]}})}},Bt.prototype.reset=function(){this.mode_="popOn",this.topRow_=0,this.startPts_=0,this.displayed_=It(),this.nonDisplayed_=It(),this.displayedIndent_=Lt(),this.nonDisplayedIndent_=Lt(),this.lastControlCode_=null,this.column_=0,this.row_=14,this.rollUpRows_=2,this.formatting_=[]},Bt.prototype.setConstants=function(){0===this.dataChannel_?(this.BASE_=16,this.EXT_=17,this.CONTROL_=(20|this.field_)<<8,this.OFFSET_=23):1===this.dataChannel_&&(this.BASE_=24,this.EXT_=25,this.CONTROL_=(28|this.field_)<<8,this.OFFSET_=31),this.PADDING_=0,this.RESUME_CAPTION_LOADING_=32|this.CONTROL_,this.END_OF_CAPTION_=47|this.CONTROL_,this.ROLL_UP_2_ROWS_=37|this.CONTROL_,this.ROLL_UP_3_ROWS_=38|this.CONTROL_,this.ROLL_UP_4_ROWS_=39|this.CONTROL_,this.CARRIAGE_RETURN_=45|this.CONTROL_,this.RESUME_DIRECT_CAPTIONING_=41|this.CONTROL_,this.BACKSPACE_=33|this.CONTROL_,this.ERASE_DISPLAYED_MEMORY_=44|this.CONTROL_,this.ERASE_NON_DISPLAYED_MEMORY_=46|this.CONTROL_,this.TAB_OFFSET_1_=33,this.TAB_OFFSET_2_=34,this.TAB_OFFSET_3_=35},Bt.prototype.isSpecialCharacter=function(t,e){return t===this.EXT_&&e>=48&&e<=63},Bt.prototype.isExtCharacter=function(t,e){return(t===this.EXT_+1||t===this.EXT_+2)&&e>=32&&e<=63},Bt.prototype.isMidRowCode=function(t,e){return t===this.EXT_&&e>=32&&e<=47},Bt.prototype.isOffsetControlCode=function(t,e){return t===this.OFFSET_&&e>=this.TAB_OFFSET_1_&&e<=this.TAB_OFFSET_3_},Bt.prototype.isPAC=function(t,e){return t>=this.BASE_&&t<this.BASE_+8&&e>=64&&e<=127},Bt.prototype.isColorPAC=function(t){return t>=64&&t<=79||t>=96&&t<=127},Bt.prototype.isNormalChar=function(t){return t>=32&&t<=127},Bt.prototype.setRollUp=function(t,e){if("rollUp"!==this.mode_&&(this.row_=14,this.mode_="rollUp",this.flushDisplayed(t),this.nonDisplayed_=It(),this.displayed_=It(),this.displayedIndent_=Lt(),this.nonDisplayedIndent_=Lt()),void 0!==e&&e!==this.row_)for(var i=0;i<this.rollUpRows_;i++)this.displayed_[e-i]=this.displayed_[this.row_-i],this.displayed_[this.row_-i]="";void 0===e&&(e=this.row_),this.topRow_=e-this.rollUpRows_+1},Bt.prototype.addFormatting=function(t,e){this.formatting_=this.formatting_.concat(e);var i=e.reduce((function(t,e){return t+"<"+e+">"}),"");this[this.mode_](t,i)},Bt.prototype.clearFormatting=function(t){if(this.formatting_.length){var e=this.formatting_.reverse().reduce((function(t,e){return t+"</"+e+">"}),"");this.formatting_=[],this[this.mode_](t,e)}},Bt.prototype.popOn=function(t,e){var i=this.nonDisplayed_[this.row_];i+=e,this.nonDisplayed_[this.row_]=i},Bt.prototype.rollUp=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},Bt.prototype.shiftRowsUp_=function(){var t;for(t=0;t<this.topRow_;t++)this.displayed_[t]="";for(t=this.row_+1;t<15;t++)this.displayed_[t]="";for(t=this.topRow_;t<this.row_;t++)this.displayed_[t]=this.displayed_[t+1];this.displayed_[this.row_]=""},Bt.prototype.paintOn=function(t,e){var i=this.displayed_[this.row_];i+=e,this.displayed_[this.row_]=i},Bt.prototype.changeRow=function(t){if("rollUp"===this.mode_){var e=this.row_-this.topRow_+1;this.topRow_=t-e+1;var i=this.displayed_,n=this.displayedIndent_;this.displayed_=It(),this.displayedIndent_=Lt();for(var a=0;a<e;a++)t-a>=0&&(this.displayed_[t-a]=i[this.row_-a],this.displayedIndent_[t-a]=n[this.row_-a])}this.row_=t},Bt.prototype.incrementIdentation=function(t){"popOn"===this.mode_?this.nonDisplayedIndent_[this.row_]+=t:"rollUp"===this.mode_&&(this.displayedIndent_[this.row_]+=t)};var Rt={CaptionStream:Ct,Cea608Stream:Bt,Cea708Stream:Ut},Gt={H264_STREAM_TYPE:27,H265_STREAM_TYPE:36,ADTS_STREAM_TYPE:15,METADATA_STREAM_TYPE:21},Wt=4294967296,Ft="shared",Nt=function(t,e){var i=1;for(t>e&&(i=-1);Math.abs(e-t)>Wt;)t+=8589934592*i;return t},zt=function t(e){var i,n;t.prototype.init.call(this),this.type_=e||Ft,this.push=function(t){this.type_!==Ft&&t.type!==this.type_||(void 0===t.dts&&void 0===t.pts||(void 0===n&&(n=t.dts),t.dts=Nt(t.dts,n),t.pts=Nt(t.pts,n),i=t.dts),this.trigger("data",t))},this.flush=function(){n=i,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.discontinuity=function(){n=void 0,i=void 0},this.reset=function(){this.discontinuity(),this.trigger("reset")}};zt.prototype=new J;var jt,Vt=zt,Yt=Wt,Ht=function(t,e,i){if(!t)return-1;for(var n=i;n<t.length;n++)if(t[n]===e)return n;return-1},Xt=0,qt=3,Kt=function(t,e,i){var n,a="";for(n=e;n<i;n++)a+="%"+("00"+t[n].toString(16)).slice(-2);return a},Zt=function(t,e,i){var n=decodeURIComponent(Kt(t,e,i));return"\\0"===n[n.length-1]&&(n=n.slice(0,-1)),n},$t=function(t,e,i){return unescape(Kt(t,e,i))},Jt=function(t){return t[0]<<21|t[1]<<14|t[2]<<7|t[3]},Qt=function(t){return t.data[0]===qt?Zt:t.data[0]===Xt?$t:void 0},te={APIC:function(t){var e,i,n=1;t.data[0]===qt&&((e=Ht(t.data,0,n))<0||(t.mimeType=$t(t.data,n,e),n=e+1,t.pictureType=t.data[n],n++,(i=Ht(t.data,0,n))<0||(t.description=Zt(t.data,n,i),n=i+1,"--\\x3e"===t.mimeType?t.url=$t(t.data,n,t.data.length):t.pictureData=t.data.subarray(n,t.data.length))))},"T*":function(t){var e=Qt(t);e&&(t.value=e(t.data,1,t.data.length).replace(/\\0*$/,""),t.data=t.value,t.values=t.value.split("\\0"))},TXXX:function(t){var e,i=Qt(t);i&&-1!==(e=Ht(t.data,0,1))&&(t.description=i(t.data,1,e),t.value=i(t.data,e+1,t.data.length).replace(/\\0*$/,""),t.data=t.value)},"W*":function(t){t.url=$t(t.data,0,t.data.length).replace(/\\0.*$/,"")},WXXX:function(t){var e;t.data[0]===qt&&-1!==(e=Ht(t.data,0,1))&&(t.description=Zt(t.data,1,e),t.url=$t(t.data,e+1,t.data.length).replace(/\\0.*$/,""))},PRIV:function(t){var e;for(e=0;e<t.data.length;e++)if(0===t.data[e]){t.owner=$t(t.data,0,e);break}t.privateData=t.data.subarray(e+1),t.data=t.privateData}},ee={parseId3Frames:function(t){var e,i=10,n=0,a=[];if(!(t.length<10||t[0]!=="I".charCodeAt(0)||t[1]!=="D".charCodeAt(0)||t[2]!=="3".charCodeAt(0))){n=Jt(t.subarray(6,10)),n+=10,64&t[5]&&(i+=4,i+=Jt(t.subarray(10,14)),n-=Jt(t.subarray(16,20)));do{if((e=Jt(t.subarray(i+4,i+8)))<1)break;var r={id:String.fromCharCode(t[i],t[i+1],t[i+2],t[i+3]),data:t.subarray(i+10,i+e+10)};r.key=r.id,te[r.id]?te[r.id](r):"T"===r.id[0]?te["T*"](r):"W"===r.id[0]&&te["W*"](r),a.push(r),i+=10,i+=e}while(i<n);return a}},parseSyncSafeInteger:Jt,frameParsers:te};(jt=function(t){var e,i={descriptor:t&&t.descriptor},n=0,a=[],r=0;if(jt.prototype.init.call(this),this.dispatchType=Gt.METADATA_STREAM_TYPE.toString(16),i.descriptor)for(e=0;e<i.descriptor.length;e++)this.dispatchType+=("00"+i.descriptor[e].toString(16)).slice(-2);this.push=function(t){var e,i,s,o,d;if("timed-metadata"===t.type)if(t.dataAlignmentIndicator&&(r=0,a.length=0),0===a.length&&(t.data.length<10||t.data[0]!=="I".charCodeAt(0)||t.data[1]!=="D".charCodeAt(0)||t.data[2]!=="3".charCodeAt(0)))this.trigger("log",{level:"warn",message:"Skipping unrecognized metadata packet"});else if(a.push(t),r+=t.data.byteLength,1===a.length&&(n=ee.parseSyncSafeInteger(t.data.subarray(6,10)),n+=10),!(r<n)){for(e={data:new Uint8Array(n),frames:[],pts:a[0].pts,dts:a[0].dts},d=0;d<n;)e.data.set(a[0].data.subarray(0,n-d),d),d+=a[0].data.byteLength,r-=a[0].data.byteLength,a.shift();i=10,64&e.data[5]&&(i+=4,i+=ee.parseSyncSafeInteger(e.data.subarray(10,14)),n-=ee.parseSyncSafeInteger(e.data.subarray(16,20)));do{if((s=ee.parseSyncSafeInteger(e.data.subarray(i+4,i+8)))<1){this.trigger("log",{level:"warn",message:"Malformed ID3 frame encountered. Skipping remaining metadata parsing."});break}if((o={id:String.fromCharCode(e.data[i],e.data[i+1],e.data[i+2],e.data[i+3]),data:e.data.subarray(i+10,i+s+10)}).key=o.id,ee.frameParsers[o.id]?ee.frameParsers[o.id](o):"T"===o.id[0]?ee.frameParsers["T*"](o):"W"===o.id[0]&&ee.frameParsers["W*"](o),"com.apple.streaming.transportStreamTimestamp"===o.owner){var p=o.data,h=(1&p[3])<<30|p[4]<<22|p[5]<<14|p[6]<<6|p[7]>>>2;h*=4,h+=3&p[7],o.timeStamp=h,void 0===e.pts&&void 0===e.dts&&(e.pts=o.timeStamp,e.dts=o.timeStamp),this.trigger("timestamp",o)}e.frames.push(o),i+=10,i+=s}while(i<n);this.trigger("data",e)}}}).prototype=new J;var ie,ne,ae,re,se=jt,oe=Yt,de=Vt,pe=188;(ne=function(){var t=new Uint8Array(pe),e=0;ne.prototype.init.call(this),this.push=function(i){var n,a=0,r=pe;for(e?((n=new Uint8Array(i.byteLength+e)).set(t.subarray(0,e)),n.set(i,e),e=0):n=i;r<n.byteLength;)71!==n[a]||71!==n[r]?(a++,r++):(this.trigger("data",n.subarray(a,r)),a+=pe,r+=pe);a<n.byteLength&&(t.set(n.subarray(a),0),e=n.byteLength-a)},this.flush=function(){e===pe&&71===t[0]&&(this.trigger("data",t),e=0),this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")},this.reset=function(){e=0,this.trigger("reset")}}).prototype=new J,(ae=function(){var t,e,i,n;ae.prototype.init.call(this),n=this,this.packetsWaitingForPmt=[],this.programMapTable=void 0,t=function(t,n){var a=0;n.payloadUnitStartIndicator&&(a+=t[a]+1),"pat"===n.type?e(t.subarray(a),n):i(t.subarray(a),n)},e=function(t,e){e.section_number=t[7],e.last_section_number=t[8],n.pmtPid=(31&t[10])<<8|t[11],e.pmtPid=n.pmtPid},i=function(t,e){var i,a;if(1&t[5]){for(n.programMapTable={video:null,audio:null,"timed-metadata":{}},i=3+((15&t[1])<<8|t[2])-4,a=12+((15&t[10])<<8|t[11]);a<i;){var r=t[a],s=(31&t[a+1])<<8|t[a+2];[Gt.H264_STREAM_TYPE,Gt.H265_STREAM_TYPE].indexOf(r)>-1&&null===n.programMapTable.video?n.programMapTable.video={pid:s,streamType:r,codec:he[r]}:r===Gt.ADTS_STREAM_TYPE&&null===n.programMapTable.audio?n.programMapTable.audio={pid:s,streamType:r,codec:he[r]}:r===Gt.METADATA_STREAM_TYPE&&(n.programMapTable["timed-metadata"][s]=r),a+=5+((15&t[a+3])<<8|t[a+4])}e.programMapTable=n.programMapTable}},this.push=function(e){var i={},n=4;if(i.payloadUnitStartIndicator=!!(64&e[1]),i.pid=31&e[1],i.pid<<=8,i.pid|=e[2],(48&e[3])>>>4>1&&(n+=e[n]+1),0===i.pid)i.type="pat",t(e.subarray(n),i),this.trigger("data",i);else if(i.pid===this.pmtPid)for(i.type="pmt",t(e.subarray(n),i),this.trigger("data",i);this.packetsWaitingForPmt.length;)this.processPes_.apply(this,this.packetsWaitingForPmt.shift());else void 0===this.programMapTable?this.packetsWaitingForPmt.push([e,n,i]):this.processPes_(e,n,i)},this.processPes_=function(t,e,i){this.programMapTable.video&&i.pid===this.programMapTable.video.pid?i.streamType=this.programMapTable.video.streamType:this.programMapTable.audio&&i.pid===this.programMapTable.audio.pid?i.streamType=this.programMapTable.audio.streamType:i.streamType=this.programMapTable["timed-metadata"][i.pid],i.type="pes",i.data=t.subarray(e),i.data.length>0&&this.trigger("data",i)}}).prototype=new J,ae.STREAM_TYPES={h264:27,adts:15},(re=function(){var t,e=this,i=!1,n={data:[],size:0},a={data:[],size:0},r={data:[],size:0},s={video:!1,audio:!1,metadata:!1},o={video:[],audio:[],"timed-metadata":[]},d=!0,p=function(t,e,i){var n,a=new Uint8Array(t.size),r={type:e,codec:t.codec},d=0,p=0,h=!1;if(t.data.length&&!(t.size<9)){for(r.trackId=t.data[0].pid,d=0;d<t.data.length;d++)n=t.data[d],a.set(n.data,p),p+=n.data.byteLength;if(function(t,e){var i,n=t[0]<<16|t[1]<<8|t[2];e.data=new Uint8Array,1===n&&(e.packetLength=6+(t[4]<<8|t[5]),e.dataAlignmentIndicator=!!(4&t[6]),192&(i=t[7])&&(e.pts=(14&t[9])<<27|(255&t[10])<<20|(254&t[11])<<12|(255&t[12])<<5|(254&t[13])>>>3,e.pts*=4,e.pts+=(6&t[13])>>>1,e.dts=e.pts,64&i&&(e.dts=(14&t[14])<<27|(255&t[15])<<20|(254&t[16])<<12|(255&t[17])<<5|(254&t[18])>>>3,e.dts*=4,e.dts+=(6&t[18])>>>1)),s[e.type]||(e.dts>e.pts?e.dts=0:s[e.type]=!0),e.data=t.subarray(9+t[8]))}(a,r),h="video"===e||r.packetLength<=t.size,(i||h)&&(t.size=0,t.data.length=0),h)o[e].push(r);else{var l=new ArrayBuffer(t.size),c=0;t.data.forEach((function(t){var e=t.data;t.data=new Uint8Array(l,c,e.length),t.data.set(e),c+=t.data.length}))}}};re.prototype.init.call(this),this.push=function(s){({pat:function(){},pes:function(){var t,e;switch(s.streamType){case Gt.H264_STREAM_TYPE:case Gt.H265_STREAM_TYPE:(t=n).codec=he[s.streamType],e="video";break;case Gt.ADTS_STREAM_TYPE:e="audio",(t=a).codec=he[s.streamType];break;case Gt.METADATA_STREAM_TYPE:t=r,e="timed-metadata";break;default:return}s.payloadUnitStartIndicator&&p(t,e,!0),t.data.push(s),t.size+=s.data.byteLength},pmt:function(){var n={type:"metadata",tracks:[]};null!==(t=s.programMapTable).video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video.pid,codec:t.video.codec,type:"video"}),null!==t.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio.pid,codec:t.audio.codec,type:"audio"}),i=!0,e.trigger("data",n)}})[s.type]()},this.reset=function(){n.size=0,n.data.length=0,a.size=0,a.data.length=0,this.trigger("reset")},this.flushStreams_=function(){p(n,"video"),p(a,"audio"),p(r,"timed-metadata"),d&&o.video.length>0&&o.audio.length>0&&(d=!1,this.handleInitialRollover_()),o.video.forEach((function(t){e.trigger("data",t)})),o.audio.forEach((function(t){e.trigger("data",t)})),o["timed-metadata"].forEach((function(t){e.trigger("data",t)})),o.video=[],o.audio=[],o["timed-metadata"]=[]},this.handleInitialRollover_=function(){var t=o.video[0].dts>o.video[o.video.length-1].dts,e=o.audio[0].dts>o.audio[o.audio.length-1].dts;if(e&&!t)for(;0<o.audio.length&&o.audio[0].dts>oe;)o.audio[0].dts=o.audio[0].pts=0;else if(!e&&t)for(;0<o.video.length&&o.video[0].dts>oe;)o.video[0].dts=o.video[0].pts=0},this.flush=function(){if(!i&&t){var n={type:"metadata",tracks:[]};null!==t.video&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.video.pid,codec:t.video.codec,type:"video"}),null!==t.audio&&n.tracks.push({timelineStartInfo:{baseMediaDecodeTime:0},id:+t.audio.pid,codec:t.audio.codec,type:"audio"}),e.trigger("data",n)}i=!1,this.flushStreams_(),this.trigger("done")}}).prototype=new J;var he=((ie={})[Gt.H264_STREAM_TYPE]="avc",ie[Gt.H265_STREAM_TYPE]="hevc",ie[Gt.ADTS_STREAM_TYPE]="adts",ie),le={PAT_PID:0,MP2T_PACKET_LENGTH:pe,TransportPacketStream:ne,TransportParseStream:ae,ElementaryStream:re,TimestampRolloverStream:de,CaptionStream:Rt.CaptionStream,Cea608Stream:Rt.Cea608Stream,Cea708Stream:Rt.Cea708Stream,MetadataStream:se};for(var ce in Gt)Gt.hasOwnProperty(ce)&&(le[ce]=Gt[ce]);var ue,fe=le,ge=ht,me=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];(ue=function(t){var e,i=0;ue.prototype.init.call(this),this.skipWarn_=function(t,e){this.trigger("log",{level:"warn",message:"adts skiping bytes "+t+" to "+e+" in frame "+i+" outside syncword"})},this.push=function(n){var a,r,s,o,d,p=0;if(t||(i=0),"audio"===n.type){var h;for(e&&e.length?(s=e,(e=new Uint8Array(s.byteLength+n.data.byteLength)).set(s),e.set(n.data,s.byteLength)):e=n.data;p+7<e.length;)if(255===e[p]&&240==(246&e[p+1])){if("number"==typeof h&&(this.skipWarn_(h,p),h=null),r=2*(1&~e[p+1]),a=(3&e[p+3])<<11|e[p+4]<<3|(224&e[p+5])>>5,d=(o=1024*(1+(3&e[p+6])))*ge/me[(60&e[p+2])>>>2],e.byteLength-p<a)break;this.trigger("data",{pts:n.pts+i*d,dts:n.dts+i*d,sampleCount:o,audioobjecttype:1+(e[p+2]>>>6&3),channelcount:(1&e[p+2])<<2|(192&e[p+3])>>>6,samplerate:me[(60&e[p+2])>>>2],samplingfrequencyindex:(60&e[p+2])>>>2,samplesize:16,data:e.subarray(p+7+r,p+a)}),i++,p+=a}else"number"!=typeof h&&(h=p),p++;"number"==typeof h&&(this.skipWarn_(h,p),h=null),e=e.subarray(p)}},this.flush=function(){i=0,this.trigger("done")},this.reset=function(){e=void 0,this.trigger("reset")},this.endTimeline=function(){e=void 0,this.trigger("endedtimeline")}}).prototype=new J;var ye,_e,be,Se=ue,ve=function(t){var e=t.byteLength,i=0,n=0;this.length=function(){return 8*e},this.bitsAvailable=function(){return 8*e+n},this.loadWord=function(){var a=t.byteLength-e,r=new Uint8Array(4),s=Math.min(4,e);if(0===s)throw new Error("no bytes available");r.set(t.subarray(a,a+s)),i=new DataView(r.buffer).getUint32(0),n=8*s,e-=s},this.skipBits=function(t){var a;n>t?(i<<=t,n-=t):(t-=n,t-=8*(a=Math.floor(t/8)),e-=a,this.loadWord(),i<<=t,n-=t)},this.readBits=function(t){var a=Math.min(n,t),r=i>>>32-a;return(n-=a)>0?i<<=a:e>0&&this.loadWord(),(a=t-a)>0?r<<a|this.readBits(a):r},this.skipLeadingZeros=function(){var t;for(t=0;t<n;++t)if(i&2147483648>>>t)return i<<=t,n-=t,t;return this.loadWord(),t+this.skipLeadingZeros()},this.skipUnsignedExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.skipExpGolomb=function(){this.skipBits(1+this.skipLeadingZeros())},this.readUnsignedExpGolomb=function(){var t=this.skipLeadingZeros();return this.readBits(t+1)-1},this.readExpGolomb=function(){var t=this.readUnsignedExpGolomb();return 1&t?1+t>>>1:-1*(t>>>1)},this.readBoolean=function(){return 1===this.readBits(1)},this.readUnsignedByte=function(){return this.readBits(8)},this.loadWord()},Te=[{chroma_format_idc:0,separate_colour_plane_flag:0,SubWidthC:1,SubHeightC:1},{chroma_format_idc:1,separate_colour_plane_flag:0,SubWidthC:2,SubHeightC:2},{chroma_format_idc:2,separate_colour_plane_flag:0,SubWidthC:2,SubHeightC:1},{chroma_format_idc:3,separate_colour_plane_flag:0,SubWidthC:1,SubHeightC:1},{chroma_format_idc:4,separate_colour_plane_flag:1,SubWidthC:1,SubHeightC:1}],we=function(t,e,i,n){var a,r=0;if(i[e]=0,0!==e&&(r=t.readBits(1)),r)for(e===n&&t.skipUnsignedExpGolomb(),t.skipBits(1),t.skipUnsignedExpGolomb(),a=0;a<=i[e-1];a++)t.readBits(1)||t.skipBits(1);else{var s=t.readUnsignedExpGolomb(),o=t.readUnsignedExpGolomb();for(a=0;a<s;a++)t.skipUnsignedExpGolomb(),t.skipBits(1);for(a=0;a<o;a++)t.skipUnsignedExpGolomb(),t.skipBits(1)}},ke=function(t,e,i,n){for(var a=0;a<i;a++)t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),n&&(t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb()),t.skipBits(1)},Ce=function(t,e){var i=0;return t.readBits(1)&&255===t.readUnsignedByte()&&t.skipBits(32),t.readBits(1)&&t.skipBits(1),t.readBits(1)&&(t.skipBits(4),t.readBits(1)&&t.skipBits(24)),t.readBits(1)&&(t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb()),t.skipBits(3),t.readBits(1)&&(t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb()),t.readBits(1)&&(t.skipBits(64),t.readBits(1)&&t.skipUnsignedExpGolomb(),t.readBits(1)&&function(t,e,i){var n=0,a=0,r=0;e&&(a=t.readBits(1),r=t.readBits(1),(a||r)&&((n=t.readBits(1))&&t.skipBits(19),t.skipBits(8),n&&t.skipBits(4),t.skipBits(15)));for(var s=0;s<=i;s++){var o=1,d=0,p=0;t.readBits(1)||(o=t.readBits(1)),o?t.skipUnsignedExpGolomb():d=t.readBits(1),d||(p=t.readUnsignedExpGolomb()),a&&ke(t,0,p+1,n),r&&ke(t,0,p+1,n)}}(t,1,e)),t.readBits(1)&&(t.skipBits(3),i=t.readUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb(),t.skipUnsignedExpGolomb()),{min_spatial_segmentation_idc:i}},Pe=function(t){var e,i,n=new ve(t),a=[],r=0,s=0,o=0,d=0,p=0,h=0,l=(i=n.readUnsignedByte())>>>1&7,c=1&i,u=function(t,e,i){var n,a,r,s,o,d,p,h=[],l=0,c=0;if(e)for(r=(a=t.readUnsignedByte())>>>6&3,s=a>>>5&1,o=31&a,d=t.readBits(32),n=0;n<6;n++)h.push(t.readUnsignedByte());for(p=t.readUnsignedByte(),n=0;n<i;n++)l|=t.readBits(1)<<n,c|=t.readBits(1)<<n;if(i>0)for(n=i;n<8;n++)t.skipBits(2);for(n=0;n<i;n++)l&1<<n&&t.skipBits(88),c&1<<n&&t.skipBits(8);return{general_profile_space:r,general_tier_flag:s,general_profile_idc:o,general_profile_compatibility_flags:d,general_constraint_indicator_flags_bytes:h,general_level_idc:p}}(n,1,l);n.skipUnsignedExpGolomb();var f=n.readUnsignedExpGolomb();3===f&&(r=n.readBits(1));var g=n.readUnsignedExpGolomb(),m=n.readUnsignedExpGolomb();n.readBits(1)&&(s=n.readUnsignedExpGolomb(),o=n.readUnsignedExpGolomb(),d=n.readUnsignedExpGolomb(),p=n.readUnsignedExpGolomb());var y=n.readUnsignedExpGolomb(),_=n.readUnsignedExpGolomb(),b=n.readUnsignedExpGolomb();for(e=n.readBits(1)?0:l;e<=l;e++)n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb();n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb(),n.readBits(1)&&n.readBits(1)&&function(t){for(var e=0;e<4;e++)for(var i=3===e?3:1,n=0;n<6;n+=i)if(t.readBits(1))t.skipUnsignedExpGolomb();else{e>1&&t.readExpGolomb();for(var a=Math.min(64,1<<4+(e<<1)),r=0;r<a;r++)t.readExpGolomb()}}(n),n.skipBits(1),n.skipBits(1),n.readBits(1)&&(n.skipBits(8),n.skipUnsignedExpGolomb(),n.skipUnsignedExpGolomb(),n.skipBits(1));var S,v=n.readUnsignedExpGolomb();for(e=0;e<v;e++)we(n,e,a,v);if(n.readBits(1)){var T=n.readUnsignedExpGolomb();for(e=0;e<T;e++)n.skipBits(b+4),n.skipBits(1)}for(n.skipBits(2),n.readBits(1)&&(h=Ce(n,l).min_spatial_segmentation_idc),e=0;e<Te.length;e++){var w=Te[e];w.chroma_format_idc===f&&w.separate_colour_plane_flag===r&&(S=w)}return{width:g-S.SubWidthC*(o+s),height:m-S.SubHeightC*(p+d),general_profile_space:u.general_profile_space,general_tier_flag:u.general_tier_flag,general_profile_idc:u.general_profile_idc,general_profile_compatibility_flags:u.general_profile_compatibility_flags,general_constraint_indicator_flags_bytes:u.general_constraint_indicator_flags_bytes,general_level_idc:u.general_level_idc,min_spatial_segmentation_idc:h,chroma_format_idc:f,bit_depth_luma_minus8:y,bit_depth_chroma_minus8:_,sps_max_sub_layers_minus1:l,sps_temporal_id_nesting_flag:c}};(_e=function(){var t,e,i=0;_e.prototype.init.call(this),this.push=function(n){var a;e?((a=new Uint8Array(e.byteLength+n.data.byteLength)).set(e),a.set(n.data,e.byteLength),e=a):e=n.data;for(var r=e.byteLength;i<r-3;i++)if(1===e[i+2]){t=i+5;break}for(;t<r;)switch(e[t]){case 0:if(0!==e[t-1]){t+=2;break}if(0!==e[t-2]){t++;break}i+3!==t-2&&this.trigger("data",e.subarray(i+3,t-2));do{t++}while(1!==e[t]&&t<r);i=t-2,t+=3;break;case 1:if(0!==e[t-1]||0!==e[t-2]){t+=3;break}this.trigger("data",e.subarray(i+3,t-2)),i=t-2,t+=3;break;default:t+=3}e=e.subarray(i),t-=i,i=0},this.reset=function(){e=null,i=0,this.trigger("reset")},this.flush=function(){e&&e.byteLength>3&&this.trigger("data",e.subarray(i+3)),e=null,i=0,this.trigger("done")},this.endTimeline=function(){this.flush(),this.trigger("endedtimeline")}}).prototype=new J,be={100:!0,110:!0,122:!0,244:!0,44:!0,83:!0,86:!0,118:!0,128:!0,138:!0,139:!0,134:!0},(ye=function(){var t,e,i,n,a,r,s,o,d=new _e;ye.prototype.init.call(this),t=this,this.push=function(t){"video"===t.type&&(e=t.trackId,i=t.codec,n=t.pts,a=t.dts,d.push(t))},d.on("data",(function(o){var d={trackId:e,pts:n,dts:a,data:o,nalUnitTypeCode:"avc"===i?31&o[0]:o[0]>>>1&63};if("avc"===i){switch(d.nalUnitTypeCode){case 5:d.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 6:d.nalUnitType="sei_rbsp",d.escapedRBSP=r(o.subarray(1));break;case 7:d.nalUnitType="seq_parameter_set_rbsp",d.escapedRBSP=r(o.subarray(1)),d.config=s(d.escapedRBSP);break;case 8:d.nalUnitType="pic_parameter_set_rbsp";break;case 9:d.nalUnitType="access_unit_delimiter_rbsp"}0!==d.nalUnitTypeCode&&t.trigger("data",d)}else if("hevc"===i){switch(d.nalUnitTypeCode){case 19:case 20:d.nalUnitType="slice_layer_without_partitioning_rbsp_idr";break;case 39:d.nalUnitType="sei_rbsp",d.escapedRBSP=r(o.subarray(2));break;case 32:d.nalUnitType="vid_parameter_set_rbsp";break;case 33:d.nalUnitType="seq_parameter_set_rbsp",d.escapedRBSP=r(o.subarray(2)),d.config=Pe(d.escapedRBSP);break;case 34:d.nalUnitType="pic_parameter_set_rbsp";break;case 35:d.nalUnitType="access_unit_delimiter_rbsp"}t.trigger("data",d)}})),d.on("done",(function(){t.trigger("done")})),d.on("partialdone",(function(){t.trigger("partialdone")})),d.on("reset",(function(){t.trigger("reset")})),d.on("endedtimeline",(function(){t.trigger("endedtimeline")})),this.flush=function(){d.flush()},this.partialFlush=function(){d.partialFlush()},this.reset=function(){d.reset()},this.endTimeline=function(){d.endTimeline()},o=function(t,e){var i,n=8,a=8;for(i=0;i<t;i++)0!==a&&(a=(n+e.readExpGolomb()+256)%256),n=0===a?n:a},r=function(t){for(var e,i,n=t.byteLength,a=[],r=1;r<n-2;)0===t[r]&&0===t[r+1]&&3===t[r+2]?(a.push(r+2),r+=2):r++;if(0===a.length)return t;e=n-a.length,i=new Uint8Array(e);var s=0;for(r=0;r<e;s++,r++)s===a[0]&&(s++,a.shift()),i[r]=t[s];return i},s=function(t){var e,i,n,a,r,s,d,p,h,l,c,u,f=0,g=0,m=0,y=0,_=[1,1];if(i=(e=new ve(t)).readUnsignedByte(),a=e.readUnsignedByte(),n=e.readUnsignedByte(),e.skipUnsignedExpGolomb(),be[i]&&(3===(r=e.readUnsignedExpGolomb())&&e.skipBits(1),e.skipUnsignedExpGolomb(),e.skipUnsignedExpGolomb(),e.skipBits(1),e.readBoolean()))for(c=3!==r?8:12,u=0;u<c;u++)e.readBoolean()&&o(u<6?16:64,e);if(e.skipUnsignedExpGolomb(),0===(s=e.readUnsignedExpGolomb()))e.readUnsignedExpGolomb();else if(1===s)for(e.skipBits(1),e.skipExpGolomb(),e.skipExpGolomb(),d=e.readUnsignedExpGolomb(),u=0;u<d;u++)e.skipExpGolomb();if(e.skipUnsignedExpGolomb(),e.skipBits(1),p=e.readUnsignedExpGolomb(),h=e.readUnsignedExpGolomb(),0===(l=e.readBits(1))&&e.skipBits(1),e.skipBits(1),e.readBoolean()&&(f=e.readUnsignedExpGolomb(),g=e.readUnsignedExpGolomb(),m=e.readUnsignedExpGolomb(),y=e.readUnsignedExpGolomb()),e.readBoolean()&&e.readBoolean()){switch(e.readUnsignedByte()){case 1:_=[1,1];break;case 2:_=[12,11];break;case 3:_=[10,11];break;case 4:_=[16,11];break;case 5:_=[40,33];break;case 6:_=[24,11];break;case 7:_=[20,11];break;case 8:_=[32,11];break;case 9:_=[80,33];break;case 10:_=[18,11];break;case 11:_=[15,11];break;case 12:_=[64,33];break;case 13:_=[160,99];break;case 14:_=[4,3];break;case 15:_=[3,2];break;case 16:_=[2,1];break;case 255:_=[e.readUnsignedByte()<<8|e.readUnsignedByte(),e.readUnsignedByte()<<8|e.readUnsignedByte()]}_&&(_[0],_[1])}return{profileIdc:i,levelIdc:n,profileCompatibility:a,width:16*(p+1)-2*f-2*g,height:(2-l)*(h+1)*16-2*m-2*y,sarRatio:_}}}).prototype=new J;var Ee,Ae={H26XStream:ye,NalByteStream:_e},xe=function(t,e){var i=t[e+6]<<21|t[e+7]<<14|t[e+8]<<7|t[e+9];return i=i>=0?i:0,(16&t[e+5])>>4?i+20:i+10},Ue=function t(e,i){return e.length-i<10||e[i]!=="I".charCodeAt(0)||e[i+1]!=="D".charCodeAt(0)||e[i+2]!=="3".charCodeAt(0)?i:t(e,i+=xe(e,i))},Me=function(t){var e=Ue(t,0);return t.length>=e+2&&!(255&~t[e])&&!(240&~t[e+1])&&16==(22&t[e+1])},Oe=xe,De=function(t,e){var i=(224&t[e+5])>>5,n=t[e+4]<<3;return 6144&t[e+3]|n|i};(Ee=function(){var t=new Uint8Array,e=0;Ee.prototype.init.call(this),this.setTimestamp=function(t){e=t},this.push=function(i){var n,a,r,s,o=0,d=0;for(t.length?(s=t.length,(t=new Uint8Array(i.byteLength+s)).set(t.subarray(0,s)),t.set(i,s)):t=i;t.length-d>=3;)if(t[d]!=="I".charCodeAt(0)||t[d+1]!=="D".charCodeAt(0)||t[d+2]!=="3".charCodeAt(0))if(255&~t[d]||240&~t[d+1])d++;else{if(t.length-d<7)break;if(d+(o=De(t,d))>t.length)break;r={type:"audio",data:t.subarray(d,d+o),pts:e,dts:e,trackId:9999},this.trigger("data",r),d+=o}else{if(t.length-d<10)break;if(d+(o=Oe(t,d))>t.length)break;a={type:"timed-metadata",data:t.subarray(d,d+o)},this.trigger("data",a),d+=o}n=t.length-d,t=n>0?t.subarray(d):new Uint8Array},this.reset=function(){t=new Uint8Array,this.trigger("reset")},this.endTimeline=function(){t=new Uint8Array,this.trigger("endedtimeline")}}).prototype=new J;var Ie,Le,Be,Re,Ge=Ee,We=["audioobjecttype","channelcount","samplerate","samplingfrequencyindex","samplesize","baseMediaDecodeTime","segmentDuration"],Fe=["width","height","sarRatio","baseMediaDecodeTime","segmentDuration"],Ne=Ae.H26XStream,ze=Me,je=ht,Ve=function(t,e){e.stream=t,this.trigger("log",e)},Ye=function(t,e){for(var i=Object.keys(e),n=0;n<i.length;n++){var a=i[n];"headOfPipeline"!==a&&e[a].on&&e[a].on("log",Ve.bind(t,a))}},He=function(t,e){var i;if(t.length!==e.length)return!1;for(i=0;i<t.length;i++)if(t[i]!==e[i])return!1;return!0},Xe=function(t,e,i,n,a,r){return{start:{dts:t,pts:t+(i-e)},end:{dts:t+(n-e),pts:t+(a-i)},prependedContentDuration:r,baseMediaDecodeTime:t}};(Le=function(t,e){var i,n=[],a=0,r=1/0;i=(e=e||{}).firstSequenceNumber||0,Le.prototype.init.call(this),this.push=function(e){St(t,e),t&&We.forEach((function(i){t[i]=e[i]})),n.push(e)},this.setVideoBaseMediaDecodeTime=function(t){r=t},this.setAudioAppendStart=function(t){a=t},this.flush=function(){var s,o,d,p,h,l;0!==n.length?(t.baseMediaDecodeTime=bt(t,e.keepOriginalTimestamps),l=ft(t,n,a,r),t.samples=gt(n),o=N.mdat(mt(n)),s=N.moof(i,[t]),d=new Uint8Array(s.byteLength+o.byteLength),i++,d.set(s),d.set(o,s.byteLength),_t(t),p=Math.ceil(1024*je/t.samplerate),n.length&&(h=n.length*p,this.trigger("segmentTimingInfo",Xe(lt(t.baseMediaDecodeTime,t.samplerate),n[0].dts,n[0].pts,n[0].dts+h,n[0].pts+h,l||0)),this.trigger("timingInfo",{start:n[0].pts,end:n[0].pts+h})),n=[],this.trigger("data",{track:t,boxes:d}),this.trigger("done","AudioSegmentStream")):this.trigger("done","AudioSegmentStream")},this.reset=function(){_t(t),n=[],this.trigger("reset")}}).prototype=new J,(Ie=function(t,e){var i,n,a,r,s=[],o=[];i=(e=e||{}).firstSequenceNumber||0,Ie.prototype.init.call(this),delete t.minPTS,this.gopCache_=[],this.push=function(e){St(t,e),"seq_parameter_set_rbsp"!==e.nalUnitType||n||(n=e.config,t.sps=[e.data],t.parsedSps=n,Fe.forEach((function(e){t[e]=n[e]}),this)),"pic_parameter_set_rbsp"!==e.nalUnitType||a||(a=e.data,t.pps=[e.data]),"vid_parameter_set_rbsp"!==e.nalUnitType||r||(r=e.data,t.vps=[e.data]),s.push(e)},this.flush=function(){for(var n,a,r,d,p,h,l,c,u=0;s.length&&"access_unit_delimiter_rbsp"!==s[0].nalUnitType;)s.shift();if(0===s.length)return this.resetStream_(),void this.trigger("done","VideoSegmentStream");if(n=tt(s),(r=et(n))[0][0].keyFrame?t.isCurrentSegmentStartingWithKeyframe=!0:(a=this.getGopForFusion_(s[0],t),t.isCurrentSegmentStartingWithKeyframe=!1,a?(u=a.duration,r.unshift(a),r.byteLength+=a.byteLength,r.nalCount+=a.nalCount,r.pts=a.pts,r.dts=a.dts,r.duration+=a.duration):r=it(r)),o.length){var f;if(!(f=e.alignGopsAtEnd?this.alignGopsAtEnd_(r):this.alignGopsAtStart_(r)))return this.gopCache_.unshift({gop:r.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.resetStream_(),void this.trigger("done","VideoSegmentStream");_t(t),r=f}St(t,r),t.samples=nt(r),p=N.mdat(at(r)),t.baseMediaDecodeTime=bt(t,e.keepOriginalTimestamps),this.trigger("processedGopsInfo",r.map((function(t){return{pts:t.pts,dts:t.dts,byteLength:t.byteLength}}))),l=r[0],c=r[r.length-1],this.trigger("segmentTimingInfo",Xe(t.baseMediaDecodeTime,l.dts,l.pts,c.dts+c.duration,c.pts+c.duration,u)),this.trigger("timingInfo",{start:r[0].pts,end:r[r.length-1].pts+r[r.length-1].duration}),this.gopCache_.unshift({gop:r.pop(),pps:t.pps,sps:t.sps}),this.gopCache_.length=Math.min(6,this.gopCache_.length),s=[],this.trigger("baseMediaDecodeTime",t.baseMediaDecodeTime),this.trigger("timelineStartInfo",t.timelineStartInfo),d=N.moof(i,[t]),h=new Uint8Array(d.byteLength+p.byteLength),i++,h.set(d),h.set(p,d.byteLength),this.trigger("data",{track:t,boxes:h}),this.resetStream_(),this.trigger("done","VideoSegmentStream")},this.reset=function(){this.resetStream_(),s=[],this.gopCache_.length=0,o.length=0,this.trigger("reset")},this.resetStream_=function(){_t(t),n=void 0,a=void 0},this.getGopForFusion_=function(e){var i,n,a,r,s,o,d=1/0;for(o=0;o<this.gopCache_.length;o++)r=(s=this.gopCache_[o]).gop,t.pps&&s.pps&&He(t.pps[0],s.pps[0])&&t.sps&&s.sps&&He(t.sps[0],s.sps[0])&&(r.dts<t.timelineStartInfo.dts&&(a=t.timelineStartInfo.dts-t.timelineStartInfo.baseMediaDecodeTime,r.dts<a)||(i=e.dts-r.dts-r.duration)>=-1e4&&i<=45e3&&(!n||d>i)&&(n=s,d=i));return n?n.gop:null},this.alignGopsAtStart_=function(t){var e,i,n,a,r,s,d,p;for(r=t.byteLength,s=t.nalCount,d=t.duration,e=i=0;e<o.length&&i<t.length&&(n=o[e],a=t[i],n.pts!==a.pts);)a.pts>n.pts?e++:(i++,r-=a.byteLength,s-=a.nalCount,d-=a.duration);return 0===i?t:i===t.length?null:((p=t.slice(i)).byteLength=r,p.duration=d,p.nalCount=s,p.pts=p[0].pts,p.dts=p[0].dts,p)},this.alignGopsAtEnd_=function(t){var e,i,n,a,r,s,d;for(e=o.length-1,i=t.length-1,r=null,s=!1;e>=0&&i>=0;){if(n=o[e],a=t[i],n.pts===a.pts){s=!0;break}n.pts>a.pts?e--:(e===o.length-1&&(r=i),i--)}if(!s&&null===r)return null;if(0===(d=s?i:r))return t;var p=t.slice(d),h=p.reduce((function(t,e){return t.byteLength+=e.byteLength,t.duration+=e.duration,t.nalCount+=e.nalCount,t}),{byteLength:0,duration:0,nalCount:0});return p.byteLength=h.byteLength,p.duration=h.duration,p.nalCount=h.nalCount,p.pts=p[0].pts,p.dts=p[0].dts,p},this.alignGopsWith=function(t){o=t}}).prototype=new J,(Re=function(t,e){this.numberOfTracks=0,this.metadataStream=e,void 0!==(t=t||{}).remux?this.remuxTracks=!!t.remux:this.remuxTracks=!0,"boolean"==typeof t.keepOriginalTimestamps?this.keepOriginalTimestamps=t.keepOriginalTimestamps:this.keepOriginalTimestamps=!1,this.pendingTracks=[],this.videoTrack=null,this.pendingBoxes=[],this.pendingCaptions=[],this.pendingMetadata=[],this.pendingBytes=0,this.emittedTracks=0,Re.prototype.init.call(this),this.push=function(t){return t.text?this.pendingCaptions.push(t):t.frames?this.pendingMetadata.push(t):(this.pendingTracks.push(t.track),this.pendingBytes+=t.boxes.byteLength,"video"===t.track.type&&(this.videoTrack=t.track,this.pendingBoxes.push(t.boxes)),void("audio"===t.track.type&&(this.audioTrack=t.track,this.pendingBoxes.unshift(t.boxes))))}}).prototype=new J,Re.prototype.flush=function(t){var e,i,n,a,r=0,s={captions:[],captionStreams:{},metadata:[],info:{}},o=0,d=0;if(this.pendingTracks.length<this.numberOfTracks){if("VideoSegmentStream"!==t&&"AudioSegmentStream"!==t)return;if(this.remuxTracks)return;if(0===this.pendingTracks.length)return this.emittedTracks++,void(this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0))}if(this.videoTrack?(o=this.videoTrack.timelineStartInfo.pts,d=this.videoTrack.timelineStartInfo.baseMediaDecodeTime,Fe.forEach((function(t){s.info[t]=this.videoTrack[t]}),this),s.info.codec=this.videoTrack.codec,s.info.sps=this.videoTrack.parsedSps?z({},this.videoTrack.parsedSps):null,s.info.startsWithKeyframe=this.videoTrack.isCurrentSegmentStartingWithKeyframe,s.info.trackId=this.videoTrack.id,s.info.timelineStartInfo=this.videoTrack.timelineStartInfo):this.audioTrack&&(o=this.audioTrack.timelineStartInfo.pts,d=this.audioTrack.timelineStartInfo.baseMediaDecodeTime,We.forEach((function(t){s.info[t]=this.audioTrack[t]}),this),s.info.trackId=this.audioTrack.id,s.info.timelineStartInfo=this.audioTrack.timelineStartInfo,s.info.startsWithKeyframe=!0),this.videoTrack||this.audioTrack){for(1===this.pendingTracks.length?s.type=this.pendingTracks[0].type:s.type="combined",this.emittedTracks+=this.pendingTracks.length,n=N.initSegment(this.pendingTracks),s.initSegment=new Uint8Array(n.byteLength),s.initSegment.set(n),s.data=new Uint8Array(this.pendingBytes),a=0;a<this.pendingBoxes.length;a++)s.data.set(this.pendingBoxes[a],r),r+=this.pendingBoxes[a].byteLength;for(a=0;a<this.pendingCaptions.length;a++)(e=this.pendingCaptions[a]).startTime=ut(e.startPts+d,o,this.keepOriginalTimestamps),e.endTime=ut(e.endPts+d,o,this.keepOriginalTimestamps),s.captionStreams[e.stream]=!0,s.captions.push(e);for(a=0;a<this.pendingMetadata.length;a++)(i=this.pendingMetadata[a]).cueTime=ut(i.pts+d,o,this.keepOriginalTimestamps),s.metadata.push(i);for(s.metadata.dispatchType=this.metadataStream.dispatchType,this.pendingTracks.length=0,this.videoTrack=null,this.pendingBoxes.length=0,this.pendingCaptions.length=0,this.pendingBytes=0,this.pendingMetadata.length=0,this.trigger("data",s),a=0;a<s.captions.length;a++)e=s.captions[a],this.trigger("caption",e);for(a=0;a<s.metadata.length;a++)i=s.metadata[a],this.trigger("id3Frame",i)}this.emittedTracks>=this.numberOfTracks&&(this.trigger("done"),this.emittedTracks=0)},Re.prototype.setRemux=function(t){this.remuxTracks=t},(Be=function(t){var e,i,n=this;Be.prototype.init.call(this),t=t||{},this.baseMediaDecodeTime=t.baseMediaDecodeTime||0,this.activeCaptionStream=null,this.setupAacPipeline=function(){var a={};return this.aacTransmuxPipeline=a,a.type="aac",a.hasFlushed=!0,a.metadataStream=new fe.MetadataStream,a.aacStream=new Ge,a.audioTimestampRolloverStream=new fe.TimestampRolloverStream("audio"),a.timedMetadataTimestampRolloverStream=new fe.TimestampRolloverStream("timed-metadata"),a.adtsStream=new Se,a.coalesceStream=new Re(t,a.metadataStream),a.headOfPipeline=a.aacStream,a.aacStream.pipe(a.audioTimestampRolloverStream).pipe(a.adtsStream),a.aacStream.pipe(a.timedMetadataTimestampRolloverStream).pipe(a.metadataStream).pipe(a.coalesceStream),a.metadataStream.on("timestamp",(function(t){a.aacStream.setTimestamp(t.timeStamp)})),a.aacStream.on("data",(function(r){"timed-metadata"!==r.type&&"audio"!==r.type||a.audioSegmentStream||(i=i||{timelineStartInfo:{baseMediaDecodeTime:n.baseMediaDecodeTime},codec:"adts",type:"audio",id:9999},a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new Le(i,t),a.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),a.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e}))})),a.coalesceStream.on("data",this.trigger.bind(this,"data")),a.coalesceStream.on("done",this.trigger.bind(this,"done")),Ye(this,a),a},this.setupTsPipeline=function(){var a={};return this.tsTransmuxPipeline=a,a.type="ts",a.hasFlushed=!0,a.metadataStream=new fe.MetadataStream,a.packetStream=new fe.TransportPacketStream,a.parseStream=new fe.TransportParseStream,a.elementaryStream=new fe.ElementaryStream,a.timestampRolloverStream=new fe.TimestampRolloverStream,a.adtsStream=new Se,a.h26xStream=new Ne,a.captionStream=new fe.CaptionStream(t),a.coalesceStream=new Re(t,a.metadataStream),a.headOfPipeline=a.packetStream,this.activeCaptionStream=a.captionStream,a.packetStream.pipe(a.parseStream).pipe(a.elementaryStream).pipe(a.timestampRolloverStream),a.timestampRolloverStream.pipe(a.h26xStream),a.timestampRolloverStream.pipe(a.adtsStream),a.timestampRolloverStream.pipe(a.metadataStream).pipe(a.coalesceStream),a.h26xStream.pipe(a.captionStream).pipe(a.coalesceStream),a.elementaryStream.on("data",(function(r){var s;if("metadata"===r.type){for(s=r.tracks.length;s--;)e||"video"!==r.tracks[s].type?i||"audio"!==r.tracks[s].type||(i=r.tracks[s],e&&!t.keepOriginalTimestamps?i.timelineStartInfo=e.timelineStartInfo:i.timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime):(e=r.tracks[s]).timelineStartInfo.baseMediaDecodeTime=n.baseMediaDecodeTime;e&&!a.videoSegmentStream&&(a.coalesceStream.numberOfTracks++,a.videoSegmentStream=new Ie(e,t),a.videoSegmentStream.on("log",n.getLogTrigger_("videoSegmentStream")),a.videoSegmentStream.on("timelineStartInfo",(function(e){i&&a.audioSegmentStream&&!t.keepOriginalTimestamps&&(i.timelineStartInfo=e)})),a.videoSegmentStream.on("processedGopsInfo",n.trigger.bind(n,"gopInfo")),a.videoSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"videoSegmentTimingInfo")),a.videoSegmentStream.on("baseMediaDecodeTime",(function(t){i&&a.audioSegmentStream&&a.audioSegmentStream.setVideoBaseMediaDecodeTime(t)})),a.videoSegmentStream.on("timingInfo",n.trigger.bind(n,"videoTimingInfo")),a.h26xStream.pipe(a.videoSegmentStream).pipe(a.coalesceStream)),i&&!a.audioSegmentStream&&(a.coalesceStream.numberOfTracks++,a.audioSegmentStream=new Le(i,t),a.audioSegmentStream.on("log",n.getLogTrigger_("audioSegmentStream")),a.audioSegmentStream.on("timingInfo",n.trigger.bind(n,"audioTimingInfo")),a.audioSegmentStream.on("segmentTimingInfo",n.trigger.bind(n,"audioSegmentTimingInfo")),a.adtsStream.pipe(a.audioSegmentStream).pipe(a.coalesceStream)),n.trigger("trackinfo",{hasAudio:!!i,hasVideo:!!e})}})),a.coalesceStream.on("data",this.trigger.bind(this,"data")),a.coalesceStream.on("id3Frame",(function(t){t.dispatchType=a.metadataStream.dispatchType,n.trigger("id3Frame",t)})),a.coalesceStream.on("caption",this.trigger.bind(this,"caption")),a.coalesceStream.on("done",this.trigger.bind(this,"done")),Ye(this,a),a},this.setBaseMediaDecodeTime=function(n){t.keepOriginalTimestamps||(this.baseMediaDecodeTime=n),this.getAllPipelines().forEach((function(a){i&&(i.timelineStartInfo.dts=void 0,i.timelineStartInfo.pts=void 0,t.keepOriginalTimestamps||(i.timelineStartInfo.baseMediaDecodeTime=n),_t(i),a.audioTimestampRolloverStream&&a.audioTimestampRolloverStream.discontinuity()),e&&(a.videoSegmentStream&&(a.videoSegmentStream.gopCache_=[]),e.timelineStartInfo.dts=void 0,e.timelineStartInfo.pts=void 0,t.keepOriginalTimestamps||(e.timelineStartInfo.baseMediaDecodeTime=n),_t(e),a.captionStream&&a.captionStream.reset()),a.timestampRolloverStream&&a.timestampRolloverStream.discontinuity()}))},this.setAudioAppendStart=function(t){this.getAllPipelines().forEach((function(e){i&&e.audioSegmentStream&&e.audioSegmentStream.setAudioAppendStart(t)}))},this.setRemux=function(e){t.remux=e,this.getAllPipelines().forEach((function(t){t.coalesceStream&&t.coalesceStream.setRemux(e)}))},this.alignGopsWith=function(t){e&&this.tsTransmuxPipeline.videoSegmentStream&&this.tsTransmuxPipeline.videoSegmentStream.alignGopsWith(t)},this.getLogTrigger_=function(t){var e=this;return function(i){i.stream=t,e.trigger("log",i)}},this.push=function(t){var e;ze(t)?(this.aacTransmuxPipeline=this.aacTransmuxPipeline||this.setupAacPipeline(),e=this.aacTransmuxPipeline):(this.tsTransmuxPipeline=this.tsTransmuxPipeline||this.setupTsPipeline(),e=this.tsTransmuxPipeline),e.hasFlushed=!1,e.headOfPipeline.push(t)},this.flush=function(){this.getAllPipelines().filter((function(t){return!t.hasFlushed})).forEach((function(t){t.hasFlushed=!0,t.headOfPipeline.flush()}))},this.endTimeline=function(){this.getAllPipelines().forEach((function(t){t.headOfPipeline&&t.headOfPipeline.endTimeline()}))},this.reset=function(){this.getAllPipelines().forEach((function(t){t.headOfPipeline&&t.headOfPipeline.reset()}))},this.resetCaptions=function(){this.tsTransmuxPipeline&&this.tsTransmuxPipeline.captionStream.reset()},this.getAllPipelines=function(){return[this.tsTransmuxPipeline,this.aacTransmuxPipeline].filter((function(t){return Boolean(t)}))}}).prototype=new J;var qe={Transmuxer:Be,VideoSegmentStream:Ie,AudioSegmentStream:Le,AUDIO_PROPERTIES:We,VIDEO_PROPERTIES:Fe,CaptionStream:fe.CaptionStream,generateSegmentTimingInfo:Xe};return{generator:N,Transmuxer:qe.Transmuxer,AudioSegmentStream:qe.AudioSegmentStream,VideoSegmentStream:qe.VideoSegmentStream,CaptionStream:qe.CaptionStream}}()}()},205:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringIncludesPolyfill=void 0,e.StringIncludesPolyfill=function(){return{polyfill:function(){String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}}}}()},226:function(t,e,i){"use strict";var n=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function n(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(n.prototype=i.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.TransmuxerMessageHandler=e.MP2TS_TIMESCALE=void 0,e.getContext=function(){return a||p()};var a,r=i(48),s=i(599),o=i(741),d=i(956);function p(){var t=new o.WebWorkerContext(h);return onmessage=t.onMessageCallback,t}e.MP2TS_TIMESCALE=9e4;var h=function(t){function i(i,n){var a=t.call(this,i,n)||this;return a.b=!1,a.push=function(t){a.c=t.data,a.a.push(new Uint8Array(t.data))},a.flush=function(){a.a.flush()},a.initCaptionParser=function(){a.a.setupTsPipeline(),a.g()},a.pushCaptions=function(t){a.e((function(e){a.b=!1,t.data.forEach((function(t){return e.push(t)}))}))},a.flushCaptions=function(){a.e((function(t){return t.flush()}))},a.resetCaptions=function(){a.e((function(t){return t.reset()}))},a.setTimestampOffset=function(t){var i=t.offset;a.a.setBaseMediaDecodeTime(Math.round(i*e.MP2TS_TIMESCALE))},a.setAudioAppendStart=function(t){a.a.setAudioAppendStart(t.appendStart*e.MP2TS_TIMESCALE,t.trackId)},a.reset=function(){a.d()},a.dispose=function(){a.a&&a.a.dispose()},a.f=function(t){t.on("data",(function(t){var e=t.data;a.runsInWebWorker?t.data=e.buffer:t.data=e.buffer.slice(0),t.captions=t.captions.map(d.assembleCaption),a.postMessageFunction({action:"data",segment:t,byteOffset:e.byteOffset,byteLength:e.byteLength},[t.data])})),t.on("done",(function(){a.c&&a.postMessageFunction({action:"done",what:"transmuxing",originalSegment:a.c},[a.c])}))},a.g=function(){a.e((function(t){t.on("data",(function(t){a.postMessageFunction({action:"caption",caption:(0,d.assembleCaption)(t)})})),t.on("done",(function(){a.b||(a.b=!0,a.postMessageFunction({action:"done",what:"captions"}))}))}))},a.d(),a}return n(i,t),i.prototype.d=function(){this.dispose(),this.a=new r.Transmuxer({remux:!1}),this.f(this.a)},i.prototype.e=function(t){var e,i=null===(e=this.a)||void 0===e?void 0:e.activeCaptionStream;i&&t(i)},i}(s.MessageHandler);e.TransmuxerMessageHandler=h,"undefined"==typeof window&&(a=p())},499:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayIncludesPolyfill=void 0,e.ArrayIncludesPolyfill=function(){return{polyfill:function(){Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError(\'"this" is null or not defined\');var i=Object(this),n=i.length>>>0;if(0===n)return!1;var a=0|e,r=Math.max(a>=0?a:n-Math.abs(a),0);function s(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}for(;r<n;){if(s(i[r],t))return!0;r++}return!1}})}}}()},599:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var i=function(){return function(t,e){this.runsInWebWorker=t,this.postMessageFunction=e}}();e.MessageHandler=i},741:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebWorkerContext=void 0;var n=i(41),a=function(){return function(t){var e=this;this.i="undefined"==typeof window,this.onmessage=null,this.j=function(t,i){e.i?postMessage(t,i):"function"==typeof e.onmessage&&setTimeout((function(){e.onmessage({data:t})}),0)},this.postMessage=function(t){setTimeout((function(){e.onMessageCallback({data:t})}),0)},this.terminate=function(){},this.onMessageCallback=function(t){t.data.action&&t.data&&e.h[t.data.action]&&e.h[t.data.action](t.data)},this.i&&(0,n.installWorkerPolyfills)(),this.h=new t(this.i,this.j)}}();e.WebWorkerContext=a},829:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringStartsWithPolyfill=void 0,e.StringStartsWithPolyfill=function(){return{polyfill:function(){String.prototype.startsWith=function(t,e){var i=e>0?0|e:0;return this.substring(i,i+t.length)===t}}}}()},878:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringEndsWithPolyfill=void 0,e.StringEndsWithPolyfill=function(){return{polyfill:function(){String.prototype.endsWith=function(t,e){if(null==t)return!1;var i=this.length;return null!=e&&(i=Math.min(e,this.length)),this.substring(i-t.length,i)===t}}}}()},956:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.assembleCaption=function(t){return{start:a(t)?t.startTime:t.startPts/n.MP2TS_TIMESCALE,end:a(t)?t.endTime:t.endPts/n.MP2TS_TIMESCALE,text:t.text,channel:t.stream,position:t.position}};var n=i(226);function a(t){return"startTime"in t}}},e={};!function i(n){var a=e[n];if(void 0!==a)return a.exports;var r=e[n]={exports:{}};return t[n].call(r.exports,r,r.exports,i),r.exports}(226)}();',i.p+"6adf5b0325225f0a1fe4.worker.js")}},77869:function(t,e,i){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,n=arguments.length;i<n;i++)for(var a in e=arguments[i])Object.prototype.hasOwnProperty.call(e,a)&&(t[a]=e[a]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.WebWorkerTransmuxer=void 0,e.isRawAAC=A;var a=i(66790),r=i(40306),s=i(3336),o=i(80813),d=i(15971),p=i(74853),h=i(34047),l=i(34841),u=i(70233),c=i(85434),f=i(88052),g=i(62756),m=i(87187),y=i(67889),_=9e4,v=95443.7176888889,S=function(){function t(e,i){var n=this;this.gw=[],this.kw={},this.lw={},this.yx=!1,this.Ax=function(){n.resetCaptionParser()},this.Hx=function(e){e.data=t.makeSegmentSelfInitializing(e.initSegment,e.data);var i={id3:t.getId3Metadata(e),closedCaptions:e.captions};n.jw.push({segment:e,metadata:i})},this.Ox=function(t){var e,i=n.gw.shift();if(i){if(i.mp2tsSegment.setData(t),n.ew.logger.debug("Transmuxed",i.mp2tsSegment.getUrl()),n.jw.length<1||0===Object.keys(n.jw[0].segment.info).length)return i.rejectFn(a.TransmuxingRejectionReason.INVALID_TS_SEGMENT),void n.Nx();if(i.mp2tsSegment.getSegmentInfo().discardData||i.discard)n.Nx();else{n.Px(i),n.jw.sort((function(t,e){return t.segment.info.trackId-e.segment.info.trackId}));var r=n.jw.map((function(t){return t.metadata})),s=null===(e=n.ew.config.tweaks)||void 0===e?void 0:e.parse_cea_708_caption;r.forEach((function(t){t.closedCaptions=t.closedCaptions.filter((function(t){return s?t.channel.includes("708"):!t.channel.includes("708")}))}));var o=n.Kx(n.jw,i.mp2tsSegment);n.yx&&o.length>1&&(n.ew.logger.debug("Discarding muxed audio from video segment since there is a separate audio playlist."),o=o.filter((function(t){var e=t[0];return t[1],c.MimeTypeHelper.isVideo(e.getMimeType())}))),o.forEach((function(t){var e,i=t[0],a=t[1];c.MimeTypeHelper.isAudio(i.getMimeType())&&(null===(e=n.hw)||void 0===e||e.postMessage({action:"setAudioAppendStart",appendStart:b(a,i),trackId:a.segment.info.trackId}))})),i.resolveFn({originalSegment:i.mp2tsSegment,transmuxedSegments:o.map((function(t){var e=t[0];return t[1],e})),metadata:r}),n.Nx()}}},this.Xx=function(e){if("done"!==e.data.action||"transmuxing"===e.data.what){var i=n.iw[e.data.action];for(var a in i)if(i.hasOwnProperty(a))if("data"===e.data.action){var r=t.postProcessSegment(e.data.segment);i[a].call(n.hw,r)}else"done"===e.data.action&&i[a].call(n.hw,e.data.originalSegment)}},this.ew=e,this.fw=!1,this.yx=i;try{this.hw=new y.TransmuxerWorkerClass,this.hw&&(this.hw.onmessage=this.Xx)}catch(t){this.ew.eventHandler.fireError(new s.PlayerError(r.ErrorCode.PLAYBACK_HLS_COULD_NOT_LOAD_TRANSMUXER,{error:t},"There was an error during the transmuxer initialization."))}this.iw={},this.jw=[],this.Wx("data",this.Hx),this.Wx("done",this.Ox)}return t.prototype.setShouldExpectSeparateAvSegments=function(t){this.yx=t},t.prototype.waitForInitializationForDiscontinuity=function(t){return this.Qx(t).promise},t.prototype.isSetupForDiscontinuity=function(t){return this.xx===t},t.prototype.transmuxSegment=function(t){var e=this;return this.zx(t).then((function(){return e.Ex(t)}))},t.prototype.zx=function(t){var e,i,n=t.getSegmentInfo().discontinuitySequenceNumber;if(null==n||null==t.getCodec())return Promise.resolve();if(c.MimeTypeHelper.isVideo(t.getMimeType())||!this.yx)return Promise.resolve();if(this.isSetupForDiscontinuity(n))return Promise.resolve();var a=null===(e=(0,d.getSourceState)(this.ew))||void 0===e?void 0:e.hls,r=null!==(i=null==a?void 0:a.discontinuitySequenceTiming)&&void 0!==i?i:{},s=Object.keys(r).filter((function(t){return c.MimeTypeHelper.isAV(t)})),o=f.ModuleManager.get(g.ModuleName.HLS).selectors.areDiscontinuitiesMisaligned;return a&&o(a,s,t.getDuration())?(this.ew.logger.debug("[Transmuxer] Skipping delayed transmuxer initialization for disco ".concat(n," as discontinuities are misaligned")),Promise.resolve()):(this.ew.logger.debug("[Transmuxer] Awaiting video segment to complete initialization for discontinuity ".concat(n)),this.waitForInitializationForDiscontinuity(n))},t.prototype.Bx=function(){var t=f.ModuleManager.get(g.ModuleName.HLS);this.wx=new t.DiscontinuitySequenceNumberTracker(c.MimeTypeHelper.isVideo),this.wx.subscribe(this.Ax)},t.prototype.Cx=function(t){this.wx||this.Bx(),this.wx.trackSegment(t)},t.prototype.Dx=function(){var t=this.ew.sourceContext.sourceIdentifier,e=!1;return this.ew.serviceManager.maybeCall(o.ServiceName.ManifestService,(function(t){e=Boolean(t.getManifest()&&t.isHlsManifest()&&f.ModuleManager.has(g.ModuleName.HLS))}),null,t),e},t.prototype.Ex=function(t){var e=this;return new Promise((function(i,n){var a={resolveFn:i,rejectFn:n,mp2tsSegment:t,discard:!1};e.gw.push(a),e.fw||(e.fw=!0,e.Gx(a))}))},t.prototype.Fx=function(t){return!(!c.MimeTypeHelper.isAudio(t.getMimeType())||this.yx)&&A(t.getData())},t.prototype.Gx=function(t){this.ew.logger.debug("Transmuxing "+t.mp2tsSegment.getUrl()),this.Dx()&&this.Cx(t.mp2tsSegment);var e=t.mp2tsSegment.getSegmentInfo(),i=this.Fx(t.mp2tsSegment),n=e.discontinuitySequenceNumber;if((i||!this.isSetupForDiscontinuity(n))&&null!=e.startTime){var a=e.startTime;i?this.ew.logger.debug("[Transmuxer] Applying startTime offset to raw AAC, BMDT: ".concat(a," (").concat(a*_,")")):this.ew.logger.debug("[Transmuxer] Initializing disco ".concat(n,", BMDT: ").concat(a," (").concat(a*_,")")),this.xx=n,this.Tx(a)}this.Ux(t.mp2tsSegment.getData()),this.Vx()},t.makeSegmentSelfInitializing=function(t,e){return p.ArrayHelper.append(t,e)},t.prototype.Ix=function(t){return t.sps?function(t){return"avc"===t.codec}(t)?"avc1.".concat(u.FormatHelper.intToHex(t.sps.profileIdc)).concat(u.FormatHelper.intToHex(t.sps.profileCompatibility)).concat(u.FormatHelper.intToHex(t.sps.levelIdc)):function(t){return"hevc"===t.codec}(t)?(0,h.assembleHvcCodecString)("hvc1",n(n({},t.sps),{general_profile_compatibility_flags:T(t.sps.general_profile_compatibility_flags,32)})):null:null},t.prototype.Jx=function(t){return"mp4a.40."+t.audioobjecttype},t.prototype.Kx=function(t,e){var i=this;return t.map((function(t){var a;i.ew.logger.debug("Got transmuxed "+t.segment.type,e.getUrl());var r=t.segment.type,s=t.segment.info,o="video"===r?_:s.samplerate,d=e.getSegmentInfo().presentationTimeOffset;a="video"===r?i.Ix(s):i.Jx(s),i.Lx(t,e);var p=new m.Segment(t.segment.data.buffer,r+"/mp4",a,e.getPeriodId(),e.getDuration(),m.SegmentInitType.SELF_INIT,t.segment.info.startsWithKeyframe,e.getNetworkRequestSize(),e.getRepresentationId());return p.setTimescale(o),p.setUrl(e.getUrl()),p.setSegmentInfo(n(n({},e.getSegmentInfo()),{mimeType:p.getMimeType()})),p.setBaseMediaDecodeTime(s.baseMediaDecodeTime),void 0!==d?(p.setPresentationTimeOffset(d),p.setPlaybackTime(s.baseMediaDecodeTime/o-d)):p.setPlaybackTime(NaN),p.setDuration(i.Mx(s,o,e.getDuration())),[p,t]}))},t.prototype.Lx=function(t,e){var i=this.ew.serviceManager.get(o.ServiceName.SourceStoreService,this.ew.sourceContext.sourceIdentifier),n=f.ModuleManager.get(g.ModuleName.HLS,!1);if(i&&n){var a=t.segment.info.timelineStartInfo.minSegmentPts%8589934592,r=e.getPlaybackTime()-a/_,s=r+95443.7176888889;i.dispatch(n.actions.setTimestampRolloverPositions(s,r))}},t.prototype.Mx=function(t,e,i){var n=t.segmentDuration/e;if(n){var a=Math.abs(i-n);return a>.1&&this.ew.logger.debug("Segment duration is off by ".concat(a,", corrected from ").concat(i," to ").concat(n)),n}return i},t.prototype.Nx=function(){if(this.jw=[],this.gw.length>0){var t=this.gw[0];this.Gx(t)}else this.fw=!1},t.prototype.Px=function(t){var e=t.mp2tsSegment.getSegmentInfo().discontinuitySequenceNumber;if(void 0!==e){if(void 0===this.kw[e]){var i=this.jw[0].segment.info.timelineStartInfo;this.kw[e]=(i.baseMediaDecodeTime-i.pts)/_}this.Rx(e),this.Rx(-1),this.Sx((function(t){return t<e}))}},t.prototype.Qx=function(t){return this.lw[t]||(this.lw[t]=new l.Deferred),this.lw[t]},t.prototype.Rx=function(t){void 0!==t&&this.Qx(t).resolve()},t.prototype.Sx=function(t){var e=this;void 0===t&&(t=function(){return!0}),Object.entries(this.lw).forEach((function(i){var n=i[0],r=i[1];!r.hasSettled&&t(Number(n))&&(e.ew.logger.debug("[Transmuxer] Rejecting unresolved disco initialization ".concat(n)),r.reject(a.TransmuxingRejectionReason.TRANSMUXING_ABORTED),delete e.lw[Number(n)])}))},t.prototype.getTimestampMappingOffset=function(t){var e,i=null===(e=t.getSegmentInfo())||void 0===e?void 0:e.discontinuitySequenceNumber,n=this.kw[i];if(void 0!==i&&void 0!==n)return n+Math.floor((t.getPlaybackTime()-n)/v)*v},t.prototype.discardCurrentJobs=function(t){return c.MimeTypeHelper.isVideo(t)&&(this.Sx(),this.lw={}),this.isTransmuxing()?this.gw.filter((function(e){return e.mp2tsSegment.getMimeType()===t})).map((function(t){return t.discard=!0,{mp2tsSegment:t.mp2tsSegment}})):[]},t.prototype.Tx=function(t){var e;null===(e=this.hw)||void 0===e||e.postMessage({action:"setTimestampOffset",offset:t})},t.prototype.Ux=function(t){var e;null===(e=this.hw)||void 0===e||e.postMessage({action:"push",data:t},[t])},t.prototype.Vx=function(){var t;null===(t=this.hw)||void 0===t||t.postMessage({action:"flush"})},t.prototype.resetCaptionParser=function(){var t;this.ew.logger.debug("Resetting caption parser..."),null===(t=this.hw)||void 0===t||t.postMessage({action:"resetCaptions"})},t.prototype.hasActiveJobs=function(){return this.fw&&this.gw.some((function(t){return!1===t.discard}))},t.prototype.hasDelayedAudioSegments=function(){return Object.values(this.lw).some((function(t){return!t.hasSettled}))},t.prototype.isTransmuxing=function(){return this.fw},t.prototype.isTransmuxingSegmentsForPeriod=function(t){return this.gw.some((function(e){return t===e.mp2tsSegment.getPeriodId()}))},t.prototype.reset=function(){this.ew.logger.debug("Resetting transmuxer..."),this.xx=void 0,this.wx&&this.wx.reset()},t.prototype.dispose=function(){var t;this.hw&&(this.iw={},this.gw=[],this.jw=[],this.hw.postMessage({action:"dispose"}),this.hw.terminate(),this.hw=null),this.reset(),this.Sx(),null===(t=this.wx)||void 0===t||t.dispose(),this.lw={},this.kw={}},t.prototype.Wx=function(t,e){this.iw.hasOwnProperty(t)||(this.iw[t]=[]),this.iw[t].push(e)},t.getId3Frame=function(t){if(t&&t.key&&t.data){var e={key:t.key,data:""};return"TXXX"===t.key&&"string"==typeof t.data?(e.info=t.description,e.data=t.data):"PRIV"===t.key?(e.info=t.owner,e.data=t.data):"WXXX"===t.key&&"string"==typeof t.data?(e.info=t.description,t.url&&(e.data=t.url)):e.data=t.data,e.data instanceof Uint8Array&&(e.data=p.ArrayHelper.getArray(e.data)),e}},t.getId3Metadata=function(e){if(!e.hasOwnProperty("metadata")||!Array.isArray(e.metadata))return[];for(var i=[],n=0;n<e.metadata.length;n++){for(var a={frames:[]},r=0;r<e.metadata[n].frames.length;r++){var s=t.getId3Frame(e.metadata[n].frames[r]);s&&(a.frames.push(s),a[s.key]=s.data)}i.push({presentationTime:e.metadata[n].cueTime,data:a})}return i},t.postProcessSegment=function(t){if(t)return t.data=new Uint8Array(t.data),t},t}();function b(t,e){var i=e.getTimescale();if(void 0===i)return NaN;var n=t&&t.segment.info,a=n&&n.segmentDuration>0?n.segmentDuration/i:e.getDuration();return e.getBaseMediaDecodeTime()/i+a}function T(t,e){for(var i=[],n=0;n<e;n++)i.push(t>>>n&1);return parseInt(i.join(""),2)}e.WebWorkerTransmuxer=S;var w=4,k=[73,68,51],x=255,C=240,P=240;function A(t){var e=new Uint8Array(t);return!(e.length<w||e[0]===k[0]&&e[1]===k[1]&&e[2]===k[2]||e[0]!==x||(e[1]&C)!==P)}}},function(t){return function(){return t(t.s=21332)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(n,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.xml=t():(n.bitmovin=n.bitmovin||{},n.bitmovin.player=n.bitmovin.player||{},n.bitmovin.player.xml=t())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[962],{15872:function(n,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.XMLModuleDefinition=void 0;var r=e(62756),i=e(78442),o=e(89214),u=e(89214);t.XMLModuleDefinition={name:r.ModuleName.XML,module:{parseXML:u.parseXML,parseJSONtoXML:i.parseJSONtoXML,setLogger:o.setLogger}},t.default=t.XMLModuleDefinition},54663:function(n,t,e){e.r(t),e.d(t,{SaxXMLParserWrapper:function(){return y},decode:function(){return s}});var r=String.fromCharCode,i=Object.prototype.hasOwnProperty,o=/&#(\d+);|&#x([0-9a-f]+);|&(\w+);/gi,u={amp:"&",apos:"'",gt:">",lt:"<",quot:'"'};function a(n,t,e,o){return o?i.call(u,o)?u[o]:"&"+o+";":r(t||parseInt(e,16))}function s(n){return n.length>3&&-1!==n.indexOf("&")?n.replace(o,a):n}Object.keys(u).forEach((function(n){u[n.toUpperCase()]=u[n]}));var f="http://www.w3.org/2001/XMLSchema-instance",c="xsi",l="xsi:type",d="non-whitespace outside of root node";function p(n){return new Error(n)}function g(n){return"missing namespace for prefix <"+n+">"}function b(n){return{get:n,enumerable:!0}}function h(n){var t,e={};for(t in n)e[t]=n[t];return e}function m(n){return n+"$uri"}function x(){return{line:0,column:0}}function _(n){throw n}function y(n){if(!this)return new y(n);var t,e,r,i,o,u,a,v,O,k=n&&n.proxy,C=n&&n.attributeNamePrefix||"",A=function(n){return C+n},M=_,w=x,j=!1,L=!1,X=null,T=!1;function q(n){n instanceof Error||(n=p(n)),X=n,M(n,w)}function E(n){o&&(n instanceof Error||(n=p(n)),o(n,w))}this.on=function(n,s){if("function"!=typeof s)throw p("required args <name, cb>");switch(n){case"openTag":e=s;break;case"text":t=s;break;case"closeTag":r=s;break;case"error":M=s;break;case"warn":o=s;break;case"cdata":i=s;break;case"attention":v=s;break;case"question":a=s;break;case"comment":u=s;break;default:throw p("unsupported event: "+n)}return this},this.ns=function(n){if(void 0===n&&(n={}),"object"!=typeof n)throw p("required args <nsMap={}>");var t,e={};for(t in n)e[t]=n[t];return e[f]=c,L=!0,O=e,this},this.parse=function(n){if("string"!=typeof n)throw p("required args <xml=string>");return X=null,function(n){var o,f,c,p,x,_,y,C,M,X,N,S=L?[]:null,P=L?function(n){var t,e,r={};for(t in n)r[e=n[t]]=e,r[m(e)]=t;return r}(O):null,D=[],W=0,z=!1,J=!1,F=0,I=0,Q="",R=0;function U(){if(null!==N)return N;var n,t,e,r,i,o,u,a,f,c,d,p=L&&P.xmlns,b=L&&j?[]:null,x=R,_=Q,y=_.length,v={},k={},C=function(n,t){return v[A(n)]=t};n:for(;x<y;x++)if(f=!1,!(32===(c=_.charCodeAt(x))||c<14&&c>8)){for((c<65||c>122||c>90&&c<97)&&95!==c&&58!==c&&(E("illegal first char attribute name"),f=!0),d=x+1;d<y;d++)if(!((c=_.charCodeAt(d))>96&&c<123||c>64&&c<91||c>47&&c<59||46===c||45===c||95===c)){if(32===c||c<14&&c>8){E("missing attribute value"),x=d;continue n}if(61===c)break;E("illegal attribute name char"),f=!0}if("xmlns:xmlns"===(a=_.substring(x,d))&&(E("illegal declaration of xmlns"),f=!0),34===(c=_.charCodeAt(d+1)))-1===(d=_.indexOf('"',x=d+2))&&-1!==(d=_.indexOf("'",x))&&(E("attribute value quote missmatch"),f=!0);else if(39===c)-1===(d=_.indexOf("'",x=d+2))&&-1!==(d=_.indexOf('"',x))&&(E("attribute value quote missmatch"),f=!0);else for(E("missing attribute value quotes"),f=!0,d+=1;d<y&&!(32===(c=_.charCodeAt(d+1))||c<14&&c>8);d++);for(-1===d&&(E("missing closing quotes"),d=y,f=!0),f||(o=_.substring(x,d)),x=d;d+1<y&&!(32===(c=_.charCodeAt(d+1))||c<14&&c>8);d++)x===d&&(E("illegal character after attribute end"),f=!0);if(x=d+1,!f)if(a in k)E("attribute <"+a+"> already defined");else if(k[a]=!0,L)if(j){if(null!==(i="xmlns"===a?"xmlns":120===a.charCodeAt(0)&&"xmlns:"===a.substr(0,6)?a.substr(6):null)){if(n=s(o),t=m(i),!(u=O[n])){if("xmlns"===i||t in P&&P[t]!==n)do{u="ns"+W++}while(void 0!==P[u]);else u=i;O[n]=u}P[i]!==u&&(r||(P=h(P),r=!0),P[i]=u,"xmlns"===i&&(P[m(u)]=n,p=u),P[t]=n),C(a,o);continue}b.push(a,o)}else-1!==(c=a.indexOf(":"))?(e=P[a.substring(0,c)])?((a=p===e?a.substr(c+1):e+a.substr(c))===l&&(-1!==(c=o.indexOf(":"))?(e=o.substring(0,c),o=(e=P[e]||e)+o.substring(c)):o=p+":"+o),C(a,o)):E(g(a.substring(0,c))):C(a,o);else C(a,o)}if(j)for(x=0,y=b.length;x<y;x++){if(a=b[x++],o=b[x],-1!==(c=a.indexOf(":"))){if(!(e=P[a.substring(0,c)])){E(g(a.substring(0,c)));continue}(a=p===e?a.substr(c+1):e+a.substr(c))===l&&(-1!==(c=o.indexOf(":"))?(e=o.substring(0,c),o=(e=P[e]||e)+o.substring(c)):o=p+":"+o)}C(a,o)}return N=v}for(w=function(){for(var t,e,r=/(\r\n|\r|\n)/g,i=0,o=0,u=0,a=I;F>=u&&(t=r.exec(n))&&!((a=t[0].length+t.index)>F);)i+=1,u=a;return-1==F?(o=a,e=n.substring(I)):0===I?e=n.substring(I,F):(o=F-u,e=-1==I?n.substring(F):n.substring(F,I+1)),{data:e,line:i,column:o}},k&&(X=Object.create({},{name:b((function(){return C})),originalName:b((function(){return M})),attrs:b(U),ns:b((function(){return P}))}));-1!==I;){if(-1===(F=60===n.charCodeAt(I)?I:n.indexOf("<",I)))return D.length?q("unexpected end of file"):0===I?q("missing start tag"):void(I<n.length&&n.substring(I).trim()&&E(d));if(I!==F)if(D.length){if(t&&(t(n.substring(I,F),s,w),T))return}else if(n.substring(I,F).trim()&&(E(d),T))return;if(33===(x=n.charCodeAt(F+1))){if(91===(p=n.charCodeAt(F+2))&&"CDATA["===n.substr(F+3,6)){if(-1===(I=n.indexOf("]]>",F)))return q("unclosed cdata");if(i&&(i(n.substring(F+9,I),w),T))return;I+=3;continue}if(45===p&&45===n.charCodeAt(F+3)){if(-1===(I=n.indexOf("--\x3e",F)))return q("unclosed comment");if(u&&(u(n.substring(F+4,I),s,w),T))return;I+=3;continue}}if(63!==x){for(f=F+1;;f++){if(_=n.charCodeAt(f),isNaN(_))return I=-1,q("unclosed tag");if(34===_)f=-1!==(p=n.indexOf('"',f+1))?p:f;else if(39===_)f=-1!==(p=n.indexOf("'",f+1))?p:f;else if(62===_){I=f;break}}if(33!==x){if(N={},47===x){if(z=!1,J=!0,!D.length)return q("missing open tag");if(f=C=D.pop(),p=F+2+f.length,n.substring(F+2,p)!==f)return q("closing tag mismatch");for(;p<I;p++)if(!(32===(x=n.charCodeAt(p))||x>8&&x<14))return q("close tag")}else{if(47===n.charCodeAt(I-1)?(f=C=n.substring(F+1,I-1),z=!0,J=!0):(f=C=n.substring(F+1,I),z=!0,J=!1),!(x>96&&x<123||x>64&&x<91||95===x||58===x))return q("illegal first char nodeName");for(p=1,c=f.length;p<c;p++)if(!((x=f.charCodeAt(p))>96&&x<123||x>64&&x<91||x>47&&x<59||45===x||95===x||46==x)){if(32===x||x<14&&x>8){C=f.substring(0,p),N=null;break}return q("invalid nodeName")}J||D.push(C)}if(L){if(o=P,z&&(J||S.push(o),null===N&&(j=-1!==f.indexOf("xmlns",p))&&(R=p,Q=f,U(),j=!1)),M=C,-1!==(x=C.indexOf(":"))){if(!(y=P[C.substring(0,x)]))return q("missing namespace on <"+M+">");C=C.substr(x+1)}else y=P.xmlns;y&&(C=y+":"+C)}if(z&&(R=p,Q=f,e&&(k?e(X,s,J,w):e(C,U,s,J,w),T)))return;if(J){if(r&&(r(k?X:C,s,z,w),T))return;L&&(P=z?o:S.pop())}I+=1}else{if(v&&(v(n.substring(F,I+1),s,w),T))return;I+=1}}else{if(-1===(I=n.indexOf("?>",F)))return q("unclosed question");if(a&&(a(n.substring(F,I+2),w),T))return;I+=2}}}(n),w=x,T=!1,X},this.stop=function(){T=!0}}},78442:function(n,t){var e=this&&this.__spreadArray||function(n,t,e){if(e||2===arguments.length)for(var r,i=0,o=t.length;i<o;i++)!r&&i in t||(r||(r=Array.prototype.slice.call(t,0,i)),r[i]=t[i]);return n.concat(r||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseJSONtoXML=f;var r=["__prefix","__text","__cdata"];function i(n){return r.includes(n)}function o(n){return n.length>0&&""!==n.join("")}function u(n,t,e){return function(n,t,e){var r="";return e?(r+="<".concat(e),r+=n.length>0?" ".concat(n.join(" ")):"",r+=t?">":"/>"):r}(t,o(n),e)+function(n,t){var e="";return o(n)&&(e+=n.join(""),e+=t?"</".concat(t,">"):""),e}(n,e)}function a(n){return"<![CDATA[".concat(n,"]]>")}function s(n,t){return t.map((function(t){return"string"==typeof t?u(""!==t?[t]:[],[],n):f(t,n)}))}function f(n,t){var r=function(n){for(var t=function(n){return Object.keys(n).filter(i)}(n),e=null,r=[],o=0,u=t;o<u.length;o++){var s=u[o];"__prefix"===s&&(e=n[s]),"__text"===s&&r.push(n[s]),"__cdata"===s&&n[s].forEach((function(n){r.push(a(n))}))}return[e,r]}(n),o=r[0],c=r[1],l=function(n){for(var t=function(n){return Object.keys(n).filter((function(n){return!n.startsWith("_")}))}(n),e=[],r=0,i=t;r<i.length;r++){var o=i[r],u=n[o];"string"!=typeof u?u instanceof Array?e.push.apply(e,s(o,u)):"object"==typeof u&&e.push(f(u,o)):e.push("<".concat(o,">").concat(u,"</").concat(o,">"))}return e}(n),d=function(n){return function(n){return Object.keys(n).filter((function(n){return n.startsWith("_")&&!i(n)}))}(n).map((function(t){return"".concat(t.replace("_",""),'="').concat(n[t],'"')}))}(n),p=t;return p&&o&&(p="".concat(o,":").concat(t)),u(e(e([],c,!0),l,!0),d,p)}},89214:function(n,t,e){Object.defineProperty(t,"__esModule",{value:!0}),t.sanitizeXML=d,t.setLogger=function(n){s=n},t.parseXML=function(n,t){a=a||new i.SaxXMLParserWrapper({attributeNamePrefix:"_"});var e,u=d(n),p={},g=t.useArrayRepresentationForChildren?f:c;return a.on(r.TagOpened,(function(n,e,r,i){var o=function(n,t){var e=t();if(!n.includes(":"))return[n,e];var r=n.split(":"),i=r[0],o=r[1];return e.__prefix=i,[o,e]}(n,e),u=o[0],a=o[1];!function(n,t,e){e&&(n._media&&(n._media=t(n._media)),n._initialization&&(n._initialization=t(n._initialization)))}(a,r,t.decodeEntities),p=g(p,u,a,i)})),a.on(r.TagClosed,(function(n){p=function(n){var t=n.parent;return delete n.parent,function(n,t){if(l(t)&&null!=t.key)if(n[t.key]!==t){if(n[t.key].constructor===Array){var e=n[t.key].indexOf(t);n[t.key][e]=t.__text}}else n[t.key]=t.__text}(t,n),delete n.key,t}(p)})),a.on(r.Text,(function(n,e){!function(n,t){n.__text=t.trim(),o(n)}(p,t.decodeEntities?e(n):n)})),a.on(r.CData,(function(n){null==p.__cdata?p.__cdata=[n]:p.__cdata.push(n),o(p)})),a.on(r.Error,(function(n){e=new Error("XML parsing failed: ".concat(n instanceof Error?n.message:String(n))),s&&s.debug(e.message),a.stop(),p={}})),a.parse(u),e?{success:!1,error:e}:{success:!0,parsed:p}};var r,i=e(54663);function o(n){n.toString=function(){return(this.__text?this.__text:"")+(this.__cdata?this.__cdata:"")}}function u(n,t){t&&2===Object.keys(n).length&&(n.__text="",o(n))}!function(n){n.TagOpened="openTag",n.TagClosed="closeTag",n.Text="text",n.Error="error",n.Warning="warn",n.CData="cdata",n.Attention="attention",n.Question="question",n.Comment="comment"}(r||(r={}));var a,s,f=function(n,t,e,r){return e.parent=n,e.key=t,n.parent||n.key||n[t]?n[t]?(n[t].push(e),e):(u(e,r),n[t]=[e],e):(n[t]=e,e)},c=function(n,t,e,r){return e.parent=n,e.key=t,n[t]?n[t].constructor===Array?(n[t].push(e),e):(n[t]=[n[t],e],e):(u(e,r),n[t]=e,e)},l=function(n){return null!=n.__text&&3===Object.keys(n).length};function d(n){return n.replace(/>\s+</g,"><").replace(/[\n|\r]+/g," ").trim()}}},function(n){return function(){return n(n.s=15872)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.dash=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.player=e.bitmovin.player||{},e.bitmovin.player.dash=t())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[367],{4771:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n,r){var o=e.match(/(\$((RepresentationID)|(Bandwidth)|(Time)|(Number(%([\d]*[A-Za-z]))?)|())\$)/g),s=null!=n,a=t.hasOwnProperty("_bandwidth"),u=null!=r;function l(e){if(0===e.indexOf("Number")&&s){if(e.indexOf("%")>-1){var i=function(e){var t=parseInt(e.substring(0,e.length-1)),n=e[e.length-1].toLowerCase(),i=0!==e[e.length-1].indexOf(n);return[0===n.indexOf("o")?8:0===n.indexOf("x")?16:(n.indexOf("d"),10),t,i]}(e.substring(e.indexOf("%")+1)),o=i[0],l=i[1],p=i[2];return function(e,t){for(;e.length<t;)e="0"+e;return e}(function(e,t){return t?e.toUpperCase():e.toLowerCase()}(n.toString(o),p),l)}return String(n)}return 0===e.indexOf("RepresentationID")?t._internalId.representationId:0===e.indexOf("Bandwidth")&&a?String(t._bandwidth):0===e.indexOf("Time")&&u?String(r):""===e?"$":void 0}var p=[].concat(o).filter((function(e){return e})).map((function(e){return e.substring(1,e.length-1)})).map((function(e){return[e,l(e)]})).filter((function(e){return e[1].length>0})).reduce((function(e,t){var n=t[0],i=t[1];return e.replace("$".concat(n,"$"),i)}),e);return(0,i.forceReallocation)(p)};var i=n(20649)},12054:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentTemplateMPDHandler=void 0,t.getTimescaleFromTemplate=f;var r=n(80813),o=n(77179),s=n(89927),a=n(23068),u=n(58313),l=n(16197),p=n(54053),h=n(96693),d=n(4771),c=function(){function e(e){this.context=e,this.settings=e.settings,this.manifestService=e.serviceManager.get(r.ServiceName.ManifestService,e.sourceContext.sourceIdentifier),this.time=0}return e.prototype.getStartNumber=function(){var e=this.getTemplate(this.currentRepresentationId);return e&&e.hasOwnProperty("_startNumber")?parseInt(e._startNumber):1},e.prototype.Cr=function(){var e=this.getTemplate(this.currentRepresentationId);return e&&e._endNumber?parseInt(e._endNumber):NaN},e.prototype.setAdaptationSetId=function(e,t,n){void 0===t&&(t=null),void 0===n&&(n={isManifestUpdate:!1}),this.currentAdaptationSetId=e,this.currentRepresentationId=t;var i=!this.currentRepresentationId||Boolean(this.manifestService.getRepresentationById(this.currentRepresentationId)),r=this.manifestService.getAdaptationSet(this.currentAdaptationSetId);this.currentRepresentationId&&i||(this.currentRepresentationId=r.Representation[0]._internalId),this.getTemplate(this.currentRepresentationId)?this.Br||this.setIndex(this.getStartNumber()):this.context.logger.debug("No template found in SegmentTemplateMPDHandler."),this.resolvePendingSegmentInfoRequests()},e.prototype.getCurrentPeriod=function(){return this.manifestService.getPeriod(this.currentRepresentationId||this.currentAdaptationSetId)},e.prototype.setRepresentationId=function(e){return!!this.manifestService.getRepresentationById(e)&&(this.currentRepresentationId=e,!0)},e.prototype.getInitSegmentInfo=function(e){var t=this.getTemplate(e),n=this.manifestService.getRepresentationById(e);return(0,h.isInitializationStringNode)(t)?(0,h.provideSegmentInfoFromInitializationProperty)(t,n):null},e.prototype.Dr=function(){var e=this.getTemplate(this.currentRepresentationId);return parseFloat(e._availabilityTimeOffset)||0},e.prototype.Er=function(e){var t=this.getExpectedPresentationTime(e);return t-=this.Dr(),(0,s.toMilliSeconds)(t+this.getSegmentDuration()+this.settings.LIVE_EDGE_DISTANCE)},e.prototype.getTemplate=function(e){var t=this.manifestService.getRepresentationById(e);if(null==t?void 0:t.SegmentTemplate)return t.SegmentTemplate[0]},e.prototype.Fr=function(){var e;return(null===(e=this.getCurrentPeriod())||void 0===e?void 0:e.start)||0},e.prototype.isExpectedSegmentPlaybackTimeExceedingPeriodDuration=function(e){var t=this.Cr();if(isFinite(t))return e>t;var n=this.getCurrentPeriod(),i=Boolean(null==n?void 0:n._duration)?n.start+n.duration:1/0;return this.getExpectedPresentationTime(e)>=i},e.prototype.checkIfSegmentAvailable=function(e){return this.Er(e)<=Date.now()},e.prototype.getNextSegmentInfo_=function(){var e={isInitSegment:!1,presentationTimeOffset:this.getTimestampOffset()},t=this.getTemplate(this.currentRepresentationId);if(!t||!t._media||!this.manifestService.representationExists(this.currentRepresentationId))return null;if(this.manifestService.isLive()){var n=this.checkIfSegmentAvailable(this.Br),i=this.isExpectedSegmentPlaybackTimeExceedingPeriodDuration(this.Br);if(!n||i)return null;e.wallClockTime=this.Er(this.Br)-(0,s.toMilliSeconds)(this.getSegmentDuration())}var r=this.manifestService.getRepresentationById(this.currentRepresentationId);return e.periodId=null==r?void 0:r._internalId.periodId,e.url=(0,d.default)(t._media,r,this.Br,this.time),e.segmentNumber=this.Br,e.startTime=this.getExpectedPresentationTime(this.Br),this.setIndex(this.Br+1),e},e.prototype.getNextSegmentInfo=function(e){var t=this.getNextSegmentInfo_();return t?Promise.resolve(t):this.queueSegmentInfoRequest({time:e})},e.prototype.queueSegmentInfoRequest=function(e){var t=this;return this.pendingSegmentInfoRequest?Promise.reject("fail"):new Promise((function(n,r){t.pendingSegmentInfoRequest=i(i({},e),{resolve:n,reject:r})}))},e.prototype.resolvePendingSegmentInfoRequests=function(){if(this.pendingSegmentInfoRequest){var e=this.getNextSegmentInfo_(),t=this.isExpectedSegmentPlaybackTimeExceedingPeriodDuration(this.Br);e?(this.pendingSegmentInfoRequest.resolve(e),this.pendingSegmentInfoRequest=null):t&&(this.pendingSegmentInfoRequest.reject(p.SegmentInfoError.SEGMENT_EXCEEDING_PERIOD_DURATION),this.pendingSegmentInfoRequest=null)}},e.prototype.getSegmentInfos=function(e){var t=this,n={};return this.manifestService.getAdaptationSet(this.currentRepresentationId).Representation.forEach((function(i){var r,o,s,a=i._internalId,l=t.getTemplate(a),p=[],h=t.getSeekableRange().end-t.getSeekableRange().start,c=0,f=t.manifestService.isLive();f?(s=t.time-h,r=t.Br-h/t.getSegmentDuration(),o=t.Br):(s=l._presentationTimeOffset||0,r=0,o=parseInt(r+h/t.getSegmentDuration()));for(var g=r;g<=o;g++){var m={};m.duration=t.getSegmentDuration(),m.startTime=f?t.getExpectedPresentationTime(g):c*t.getSegmentDuration();var v=(0,d.default)(l._media,i,r+c,s+c*t.getSegmentDuration());m.url=e?u.URLHelper.concatBaseUrlWithPartial(e,v):v,m.url=u.URLHelper.appendQueryParametersToUrl(m.url,t.settings.QUERY_PARAMETERS),p.push(m),c++}n[a.representationId]=p})),n},e.prototype.getSubtitleUrl=function(){var e=this.manifestService.getRepresentationById(this.currentRepresentationId).BaseURL[0];return e.url||e},e.prototype.Gr=function(){var e=this.getTemplate(this.currentRepresentationId);return e&&e.hasOwnProperty("_liveEdgeNumber")},e.prototype.Hr=function(){if(this.Gr()){var e=this.getTemplate(this.currentRepresentationId);return parseInt(e._liveEdgeNumber)}},e.prototype.getSegmentDuration=function(){var e=this.getTemplate(this.currentRepresentationId),t=Number(null==e?void 0:e._duration),n=Number(null==e?void 0:e._timescale);return isNaN(t)?1:isNaN(n)?t:t/n},e.prototype.seekTo=function(e){e>-1&&this.setIndex(this.Ir(e))},e.prototype.getTimescale=function(){return f(this.getTemplate(this.currentRepresentationId))},e.prototype.getExpectedPresentationTime=function(e){var t=this.Fr();return(e-this.getStartNumber())*this.getSegmentDuration()+t},e.prototype.Ir=function(e){var t=this.getSegmentDuration(),n=this.Fr(),i=Math.max(e-n-t/2,0);return Math.floor(i/t)+this.getStartNumber()},e.prototype.getActualTimeShiftBufferDepth=function(){var e=this.Jr();return e.end-e.start},e.prototype.Jr=function(){var e=(0,o.getStartTimeOffset)(this.Kr().getState()),t=this.manifestService.getMediaPresentationDuration()||1/0;return this.manifestService.isLive()?this.Mr(t):this.Lr(e,t)},e.prototype.Kr=function(){return this.context.serviceManager.get(r.ServiceName.SourceStoreService,this.context.sourceContext.sourceIdentifier)},e.prototype.Lr=function(e,t){return{start:e,end:isFinite(t)?e+t:0}},e.prototype.Mr=function(e){var t=(this.manifestService.getFirstPeriod()||{start:0}).start,n=-1*this.manifestService.getTimeShiftBufferDepthSeconds(),i=(0,s.toSeconds)(Date.now()-this.manifestService.getAvailabilityStartTime()),r=Math.min(n,i),o=this.getLiveEdgeTime();return{start:Math.max(t,o-r),end:o}},e.prototype.getSeekableRange=function(){var e=this.Jr();if(this.manifestService.isLive()){var t=this.manifestService.getDesiredDistanceToLiveEdge();e.end=Math.max(e.end-t,e.start)}return e},e.prototype.hasNext=function(e){var t=this.isExpectedSegmentPlaybackTimeExceedingPeriodDuration(this.Br),n=Math.ceil(e/this.getSegmentDuration())+this.getStartNumber()-1;return!t&&this.Br<=n},e.prototype.getTimestampOffset=function(){var e=this.getCurrentPeriod(),t=0,n=this.getTemplate(this.currentRepresentationId);return n&&n._presentationTimeOffset&&(t=n._presentationTimeOffset/this.getTimescale()),e&&(t-=e.start),t},e.prototype.Nr=function(e,t){var n=this.manifestService.getPeriod(e)||this.getCurrentPeriod();return this.manifestService.isLastPeriod(e.periodId)?n&&(0,a.isNumber)(n.duration)&&isFinite(n.duration)?n.duration:n&&n.start?(0,s.toSeconds)(t)-n.start:this.manifestService.calculateCumulativePeriodDuration(e.periodId):this.manifestService.getPeriodDuration(e.periodId)},e.prototype.Or=function(e){var t=Date.now(),n=(0,s.toSeconds)(t-this.manifestService.getRequestTimestamp());return this.Gr()?this.Hr()+Math.floor(n/this.getSegmentDuration()):this.manifestService.isLive()&&Boolean(this.manifestService.getManifest()._availabilityStartTime)?Math.floor(this.Nr(e,t)/this.getSegmentDuration()+this.getStartNumber()):this.getStartNumber()},e.prototype.Pr=function(e){return Math.max(this.Or(e),this.getStartNumber())},e.prototype.getIndex=function(){return this.Br},e.prototype.setIndex=function(e){this.Br=e},e.prototype.getLiveEdgeTime=function(){return(0,s.toSeconds)(Date.now())},e.prototype.timeShift=function(e,t){if(void 0===t&&(t=this.currentRepresentationId.periodId),this.manifestService.isLive()){var n=this.Br,i=this.Pr(new l.PeriodId(t));0===e?(this.setIndex(i),this.context.logger.debug("timeShift changes index from "+n+" to "+this.Br+" [back to live edge]")):(this.setIndex(i+Math.floor(e/this.getSegmentDuration())),this.Br<this.getStartNumber()&&this.setIndex(this.getStartNumber()),this.context.logger.debug("timeShift changes index from "+n+" to "+this.Br))}},e.prototype.updateRepresentation=function(e){return this.currentRepresentationId=e,Promise.resolve(e)},e.prototype.isSegmentInfoLoaded=function(e){return!0},e.prototype.rewindOneSegment=function(){return this.setIndex(this.Br-1),this.Br<this.getStartNumber()&&(this.context.logger.debug("Template number is smaller than start number, probably a discontinuity. Using start number."),this.setIndex(this.getStartNumber())),!0},e.prototype.getPendingSegmentInfoRequest=function(){return this.pendingSegmentInfoRequest},e.prototype.setPendingSegmentInfoRequest=function(e){this.pendingSegmentInfoRequest=e},e.prototype.canSwitchRepresentation=function(e){return!0},e.prototype.getLatestTimeForPossibleSwitch=function(e){return e},e.prototype.adjustTimeToNextSegmentStart=function(e){return e},e.prototype.dispose=function(){this.settings=null,this.manifestService=null,this.currentRepresentationId=null,this.currentAdaptationSetId=null,this.pendingSegmentInfoRequest=null},e.prototype.setTimestampOffset=function(e,t){},e}();function f(e){return e&&null!=e._timescale&&parseInt(e._timescale)||1}t.SegmentTemplateMPDHandler=c},31439:function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentTimelineMPDHandler=void 0;var o=n(74853),s=n(89927),a=n(58313),u=n(54053),l=n(4771),p=n(12054),h=n(39761),d=function(e){function t(t){var n=e.call(this,t)||this;return n.Wr=0,n.Xr=null,n.Yr=[],n.Zr=!0,n.dr=!1,n.ar=1,n.br=0,n.cr=0,n}return i(t,e),t.prototype.setAdaptationSetId=function(t,n,i){void 0===n&&(n=null),void 0===i&&(i={isPeriodSwitch:!1,isManifestUpdate:!1}),this.currentAdaptationSetId=t,this.currentRepresentationId=n;var r=!this.currentRepresentationId||Boolean(this.manifestService.getRepresentationById(this.currentRepresentationId)),o=this.manifestService.getAdaptationSet(this.currentAdaptationSetId);this.currentRepresentationId&&r||(this.currentRepresentationId=o.Representation[0]._internalId);var s=this.getTemplate(this.currentRepresentationId);s?(this.setTimeline(s,i.isPeriodSwitch),this.getIndex()||e.prototype.setIndex.call(this,this.getStartNumber())):this.context.logger.debug("No template found in SegmentTemplateMPDHandler."),this.resolvePendingSegmentInfoRequests()},t.prototype.setRepresentationId=function(e){if(this.manifestService.getRepresentationById(e)){this.currentRepresentationId=e;var t=this.getTemplate(this.currentRepresentationId);return t&&this.setTimeline(t),!0}return!1},t.prototype.er=function(e){return null!=(null==e?void 0:e.start)&&isFinite(e.start)?e.start:0},t.prototype.fr=function(){this.manifestService.isLive()&&this.Zr&&(this.dr||this.timeShift(0),this.Zr=!1)},t.prototype.gr=function(e){return!(null==e?void 0:e._media)||!this.manifestService.representationExists(this.currentRepresentationId)},t.prototype.hr=function(e){var t=this.Yr[this.Wr];t&&(e.wallClockTime=(0,s.toMilliSeconds)(t.ot/this.ar-this.getTimestampOffset()))},t.prototype.getNextSegmentInfo_=function(){var t,n,i={isInitSegment:!1,presentationTimeOffset:this.getTimestampOffset()},r=this.getTemplate(this.currentRepresentationId);if(this.gr(r))return null;if(this.fr(),!(this.Yr.length>0&&this.Wr<this.Yr.length))return null;var o=this.Yr[this.Wr];e.prototype.setIndex.call(this,o.i),this.time=o.ot,i.duration=o.duration,i.mediaPresentationTime=o.t,i.segmentNumber=o.i;var s=null!==(n=null===(t=this.getCurrentPeriod())||void 0===t?void 0:t.start)&&void 0!==n?n:0;if(i.startTime=o.playbackTime+s,this.manifestService.isLive()){if(this.isExpectedSegmentPlaybackTimeExceedingPeriodDuration(this.Wr))return null;this.hr(i)}var a=this.manifestService.getRepresentationById(this.currentRepresentationId);return a?(i.periodId=null==a?void 0:a._internalId.periodId,i.url=(0,l.default)(r._media,a,this.getIndex(),this.time),e.prototype.setIndex.call(this,this.getIndex()+1),this.Wr++,i):null},t.prototype.getNextSegmentInfo=function(e){var t=this.getNextSegmentInfo_();return t?Promise.resolve(t):this.queueSegmentInfoRequest({time:e})},t.prototype.queueSegmentInfoRequest=function(e){var t=this;return this.pendingSegmentInfoRequest?Promise.reject("fail"):new Promise((function(n,i){t.pendingSegmentInfoRequest=r(r({},e),{resolve:n,reject:i})}))},t.prototype.resolvePendingSegmentInfoRequests=function(){if(this.pendingSegmentInfoRequest){var e=this.getNextSegmentInfo_();if(e)this.pendingSegmentInfoRequest.resolve(e),this.pendingSegmentInfoRequest=null;else if(!this.manifestService.isSmoothManifest()){var t=this.getCurrentPeriod();if(isFinite(t.duration)){var n=this.getTimelineDuration(),i=n/this.getTimelineLength(),r=t.start+n,o=t.duration-i/2;isFinite(o)&&r>=o&&(this.pendingSegmentInfoRequest.reject(u.SegmentInfoError.PERIOD_COMPLETE),this.pendingSegmentInfoRequest=null)}}}},t.prototype.getSegmentInfos=function(e){var t=this,n={};return this.manifestService.getAdaptationSet(this.currentRepresentationId).Representation.forEach((function(i){var r,o,s=i._internalId,u=t.getTemplate(s),p=[],h=t.getSeekableRange().end-t.getSeekableRange().start,d=0,c=t.manifestService.isLive();c?(r=Math.ceil(t.getIndex()-h/t.getSegmentDuration()),o=t.getIndex()):(r=0,o=Math.floor(r+h/t.getSegmentDuration()));for(var f=r;f<=o;f++){var g={};g.duration=t.getSegmentDuration(),g.startTime=c?t.getExpectedPresentationTime(f):d*t.getSegmentDuration();var m=(0,l.default)(u._media,i,r+d,t.getSegmentTime(d));g.url=e?a.URLHelper.concatBaseUrlWithPartial(e,m):m,g.url=a.URLHelper.appendQueryParametersToUrl(g.url,t.settings.QUERY_PARAMETERS),p.push(g),d++}n[s.representationId]=p})),n},t.prototype.getSubtitleUrl=function(){var e=this.manifestService.getRepresentationById(this.currentRepresentationId).BaseURL[0];return e.url||e},t.prototype.getSegmentDuration=function(){return this.getSegmentDurationCurrentElement()},t.prototype.seekTo=function(t){if(t>-1){var n=this.er(this.getCurrentPeriod());this.dr=!1,isFinite(n)&&(t-=n);for(var i=1;i<this.Yr.length;i++)if(this.Yr[i].playbackTime>t)return this.Wr=i-1,e.prototype.setIndex.call(this,this.Yr[this.Wr].i),this.Zr=!1,this.getIndex();this.Wr=Math.max(this.Yr.length-1,0)}return e.prototype.setIndex.call(this,this.Yr[this.Wr].i),this.getIndex()},t.prototype.getExpectedPresentationTime=function(e){var t,n;return(null!==(n=null===(t=this.getCurrentPeriod())||void 0===t?void 0:t.start)&&void 0!==n?n:0)+this.Yr[e].playbackTime},t.prototype.hasNext=function(e){if(this.Wr<this.Yr.length){var t=this.Yr[0].t,n=this.Yr[this.Wr];if(this.isExpectedSegmentPlaybackTimeExceedingPeriodDuration(this.Wr))return!1;if(n)return n.t-t<=e*this.ar}return!1},t.prototype.getTimestampOffset=function(){var e=this.getCurrentPeriod(),t=this.br/this.ar;return e&&(t-=e.start),t},t.prototype.setIndex=function(t){if(e.prototype.setIndex.call(this,t),this.Yr&&this.Yr.length>0)for(var n=0;n<this.Yr.length;n++)this.Yr[n].i===t&&(this.Wr=n)},t.prototype.getLiveEdgeTime=function(){if(!this.manifestService.isLive())return-1;var t=this.manifestService.getLastPeriod(),n=this.getCurrentPeriod();if(null==t||(null==n?void 0:n._id)===t._id)return this.er(n)+this.ir()/this.ar;var i=(0,h.getFirstAvSegmentTemplateFromPeriod)(t);return(null==i?void 0:i.SegmentTimeline)?this.er(t)+(0,h.calculateTimelineEnd)(i):e.prototype.getLiveEdgeTime.call(this)},t.prototype.ir=function(){if(!this.Yr.length)return 0;var e=this.Yr[this.Yr.length-1];return e.t+e.d},t.prototype.timeShift=function(t,n){if(this.manifestService.isLive()&&!(this.Yr.length<1)){this.dr=!1;for(var i=this.Yr[0].t,r=this.ir(),o=t*this.ar,s=Math.max(this.cr,this.settings.MIN_TIMELINE_LIVE_OFFSET)*this.ar,a=Math.max(i+s,r+o),u=this.Yr.length-1;u>=0;u--)if(this.Yr[u].t<=a){this.Wr=u;break}(this.Wr>=this.Yr.length||this.Wr<=0)&&(this.context.logger.debug("timeline index ran out of bounds on timeShift, falling back to 0"),this.Wr=0),this.context.logger.debug("timeShift changes index to "+this.Wr),this.Zr=!1,e.prototype.setIndex.call(this,this.Yr[this.Wr].i)}},t.prototype.updateRepresentation=function(e){return this.currentRepresentationId=e,Promise.resolve(e)},t.prototype.isSegmentInfoLoaded=function(e){return!0},t.prototype.rewindOneSegment=function(){return this.Wr--,this.Wr<0&&(this.context.logger.debug("Timeline array index is smaller than 0, probably a discontinuity. Using 0."),this.Wr=0),!0},t.prototype.jr=function(e,t){for(var n,i={entries:[],latestTime:0,latestOriginalTime:0,lastPreviousTimelineEntryIndex:0,index:this.getStartNumber()},r=0,o=0,s=0,a=e;s<a.length;s++)for(var u=0,l=null!==(n=a[s].S)&&void 0!==n?n:[];u<l.length;u++){var p=l[u],d=(0,h.parseStringToNumber)(p._r),f=parseInt(p._d);if(p.hasOwnProperty("_t")){var g=(0,h.parseStringToNumber)(p._t);i.latestOriginalTime=g,i.latestTime=g-this.br}for(;i.latestTime+f<=0&&d>=0;)this.context.logger.debug("Negative timeline entry detected, discarding segment. Time: ".concat(i.latestTime,", presentationTimeOffset: ").concat(this.br,".")),i.latestTime+=f,i.latestOriginalTime+=f,d--;for(var m=this.mr(i,t,f,d),v=0;v<m.length;v++)m[v].i=i.index+v;r+=m.length,c(i,m,f);var y=d-m.length+1;o+=y,c(i,this.lr(i,y,f),f)}return this.kr(r,o),i.entries},t.prototype.kr=function(e,t){var n;this.context.logger.debug("[SegmentTimeline][".concat(null===(n=this.currentRepresentationId)||void 0===n?void 0:n.representationId,"] Re-using ").concat(e," entries, adding ").concat(t," new entries"))},t.prototype.lr=function(e,t,n){for(var i=[],r=0;r<t;r++){var o=e.latestTime+n*r,s={d:n,t:o,ot:e.latestOriginalTime+n*r,i:e.index+r,playbackTime:o/this.ar,duration:n/this.ar};i.push(s)}return i},t.prototype.mr=function(e,t,n,i){var r=(0,o.findIndexWithin)(t,e.lastPreviousTimelineEntryIndex,t.length,(function(t){return t.t===e.latestTime&&t.d===n}));if(-1===r)return[];var s=function(e,t,n,i){for(var r=e[t].t,o=i;o>0;o--){var s=t+o,a=e[s],u=r+n*o;if(a&&a.t===u&&a.d===n)return s}return t}(t,r,n,i);return e.lastPreviousTimelineEntryIndex=s,t.slice(r,s+1)},t.prototype.getTimelineDuration=function(){var e=this;return this.Yr&&this.Yr.length>0&&isFinite(this.ar)?this.Yr.reduce((function(t,n){return t+n.d/e.ar}),0):0},t.prototype.getTimelineLength=function(){return this.Yr?this.Yr.length:0},t.prototype.setTimeline=function(e,t){void 0===t&&(t=!1);var n=e.SegmentTimeline;if(this.dr=this.dr||Boolean(t),n&&this.Xr!==n){this.Xr=n;var i=this.nr(),r=this.getTimescale();this.ar=r,this.br=parseFloat(String(e._presentationTimeOffset))||0;var o=this.jr(n,this.Yr);o.length>0&&(this.cr=o[0].d/r),this.ys(o,r,i),this.Yr=o}},t.prototype.nr=function(){return this.Yr&&this.Yr.length>0?this.ar:this.getTimescale()},t.prototype.ys=function(t,n,i){var r,o=!1;if(this.Yr&&this.Yr.length>0?r=(o=this.Wr>=this.Yr.length)?this.Yr[this.Yr.length-1]:this.Yr[this.Wr]:(this.Wr=0,e.prototype.setIndex.call(this,0)),r)for(var s=t.length-1;s>=0;s--)if(m(t[s],n,r,i)){this.Wr=s+(o?1:0),e.prototype.setIndex.call(this,t[s].i+(o?1:0));break}},t.prototype.getSegmentTime=function(e){return this.Yr[e]&&this.Yr[e].hasOwnProperty("t")?this.Yr[e].t:0},t.prototype.getSegmentDurationCurrentElement=function(){var e=this.Yr[this.Wr];return e?e.d/this.ar:1},t.prototype.dispose=function(){this.settings=null,this.Yr=[]},t}(p.SegmentTemplateMPDHandler);function c(e,t,n){var i;(i=e.entries).push.apply(i,t),e.latestTime+=n*t.length,e.latestOriginalTime+=n*t.length,e.index+=t.length}t.SegmentTimelineMPDHandler=d;var f=Math.pow(10,8);function g(e){return Math.round(e*f)/f}function m(e,t,n,i){var r=g(e.t/t),o=g(r+e.d/t),s=g(n.t/i);return r<=s&&s<o}},39761:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getFirstAvSegmentTemplateFromPeriod=function(e){var t,n=e.AdaptationSet.find((function(e){return i.MimeTypeHelper.isAV(e._mimeType)})),r=null===(t=null==n?void 0:n.Representation[0])||void 0===t?void 0:t.SegmentTemplate;return null==r?void 0:r[0]},t.calculateTimelineEnd=function(e){for(var t,n,i=parseFloat(String(e._presentationTimeOffset))||0,s=(0,r.getTimescaleFromTemplate)(e),a=0,u=0,l=null!==(t=e.SegmentTimeline)&&void 0!==t?t:[];u<l.length;u++)for(var p=0,h=null!==(n=l[u].S)&&void 0!==n?n:[];p<h.length;p++){var d=h[p],c=o(d._r),f=parseInt(d._d);d.hasOwnProperty("_t")&&(a=Math.max(0,o(d._t)-i)),a+=f*(c+1)}return a/s},t.parseStringToNumber=o;var i=n(85434),r=n(12054);function o(e,t){return void 0===t&&(t=0),e?parseInt(e):t}},44908:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.MPDLoader=void 0;var o=n(40306),s=n(3336),a=n(80813),u=n(3714),l=n(4129),p=n(85625),h=n(77401),d=n(57456),c=n(29669),f=n(91678),g=n(33436),m=n(89927),v=n(58313),y=n(78340),S=function(){function e(e,t){var n=this;this.Dq=0,this.Lq=function(e){return n.vq.serviceManager.maybeCall(a.ServiceName.ManifestCachingService,(function(t){return t.cacheHttpResponse(e,e.url)}),null,n.wq.sourceIdentifier),e.body?n.Mq(e):(n.Bq.load(null,null).catch((function(){})),null)},this.Nq=function(e,t){n.Eq=function(e,t,n){if((null==t?void 0:t.name)===h.RequestError.Canceled)return null;if((null==t?void 0:t.name)===h.RequestError.TimedOut)return new s.PlayerError(o.ErrorCode.NETWORK_MANIFEST_DOWNLOAD_TIMEOUT,I(e),"Failed to load DASH manifest: the request timed out.",n);var i=(null==e?void 0:e.status)===XMLHttpRequest.UNSENT?"Failed to load the DASH manifest due to CORS restrictions or because the client is offline.":"Failed to load DASH manifest: ".concat(e.status," ").concat(e.statusText,".");return new s.PlayerError(o.ErrorCode.SOURCE_COULD_NOT_LOAD_MANIFEST,I(e),i,n)}(e,t,n.wq.sourceIdentifier)},this.vq=e,this.wq=t,this.Cq=e.settings,this.yq=new y.MPDParser(e,t),this.xq=!1,this.Fq=e.eventHandler,this.Aq=[];var i={onFailure:this.Nq,maxRetries:this.Cq.MAX_MPD_RETRIES,requestType:c.HttpRequestType.MANIFEST_DASH,resetRetriesWhenOffline:!1};this.Bq=new l.DefaultContentLoader(e,i)}return e.prototype.Gq=function(e,t){if(this.xq)return null;var n=e.trim();return this.Hq(n,t)},e.prototype.Hq=function(e,t){var n,i=this.vq.serviceManager.get(a.ServiceName.ManifestCachingService,this.wq.sourceIdentifier),o=null!==(n=null==i?void 0:i.getParsedManifest(this.zq))&&void 0!==n?n:this.Iq(e,t);return o?(null==i||i.cacheParsedManifest(o,this.zq),this.Aq=o.BaseURL?r(r([],o.Location,!0),o.BaseURL.map((function(e){return e.url})),!0):o.Location,this.zq=this.Aq[0],o):null},e.prototype.Iq=function(e,t){return this.yq.parse(e,this.zq,t)},e.prototype.Jq=function(){this.Bq&&this.Bq.cancel(),this.xq=!0,this.zq=null},e.prototype.dispose=function(){this.Jq(),this.Bq.dispose(),this.yq&&(this.yq.dispose(),this.yq=null),this.Cq=null},e.prototype.load=function(e){var t=this;this.zq=null!=e?e:this.zq;var n=this.zq;return this.Eq=null,e&&(this.xq=!1),n?this.Kq(n).then((function(e){return t.Lq(e)})).then((function(e){return t.zq!==n&&t.Aq.includes(t.zq)&&(t.vq.logger.debug("Switched manifest location to ".concat(t.zq)),t.vq.eventHandler.dispatchEvent(u.PlayerEvent.ContentLocationChanged,{sourceLocationId:n,targetLocationId:t.zq,reason:u.ContentLocationChangedReason.Failover})),e})).catch((function(e){return t.xq||(null==e?void 0:e.message)===h.RequestError.Canceled?Promise.reject():(t.vq.logger.debug("Error during loading: "+t.zq+": ",e),Promise.reject(e))})):(this.vq.eventHandler.fireError(new s.PlayerError(o.ErrorCode.SOURCE_INVALID,void 0,"Cannot load the manifest: no URL was provided.")),Promise.reject("No manifest url provided"))},e.prototype.Kq=function(e){var t,n=this,i=this.vq.serviceManager.maybeCall(a.ServiceName.ManifestCachingService,(function(t){return t.getHttpResponse(e)}),null,this.wq.sourceIdentifier);if(i)return Promise.resolve(i);var r=null===(t=this.wq.source.options)||void 0===t?void 0:t.manifestWithCredentials;return this.Bq.load(e,c.HttpRequestMethod.GET,null,null,null,r,p.ManifestMimeType.Dash).catch((function(e){return n.Dq++,n.Dq<n.Aq.length?(n.zq=v.URLHelper.replaceCdn(n.zq,n.Aq[n.Dq]),n.Kq(n.zq)):(n.vq.logger.debug("no base url left, all tried"),n.Eq&&n.Fq.fireError(n.Eq),n.Eq=null,Promise.reject(e))}))},e.prototype.updateRepresentation=function(e){return Promise.resolve(e)},e.prototype.stopRepresentationUpdate=function(e){return Promise.resolve()},e.prototype.Mq=function(e){var t,n,r,o,s=null!==(t=e.elapsedTime)&&void 0!==t?t:0;(0,d.isDownloadTimeInformationValid)(e)&&(this.vq.logger.debug("Downloaded manifest in: ".concat(s.toFixed(2),", TTFB: ").concat(null===(n=e.timeToFirstByte)||void 0===n?void 0:n.toFixed(2))),this.vq.store.dispatch((0,f.addMetricsValue)("default",g.MetricType.DownloadInformation,{bytes:e.length,time:s,timeToFirstByte:e.timeToFirstByte}))),this.zq=e.url;var a=i({},this.Gq(e.body,(0,m.toSeconds)(Math.round(s))));return a._currentLoadingUrl=this.zq,"dynamic"===a._type&&!0===(null===(o=null===(r=this.vq)||void 0===r?void 0:r.settings)||void 0===o?void 0:o.INFINITE_RETRIES_FOR_LIVE)&&this.Bq.setResetRetriesWhenOffline(!0),a},e}();function I(e){return{url:e.url,statusCode:e.status,statusText:e.statusText}}t.MPDLoader=S},63889:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentBaseMPDHandler=void 0;var r=n(80813),o=n(56481),s=n(4129),a=n(29669),u=n(79721),l=n(84568),p=n(58313),h=n(88052),d=n(62756),c=n(13422),f=n(59707),g=n(96693),m=function(){function e(e){var t=this;this.context=e,this.Qq=0,this.Sq=-1,this.cq=(0,l.memoize)(this.zr.bind(this),(function(e,t){return t._internalId.representationId})),this.dq=function(e){var n=i({},t.Zq.getRepresentationById(t.Vq));return t.cq(e,n).then((function(e){var i;if(t.bq.dispatch((0,f.setRepresentationSegmentIndexAction)(n._internalId,e)),t.bq.dispatch((0,f.setRepresentationIsLoadingAction)(n._internalId,!1)),e||(t.bq.dispatch((0,f.setRepresentationSegmentIndexParsingErrorAction)(n._internalId,!0)),t.context.logger.warn("Error parsing SegmentIndex for representation with id ".concat(null===(i=t.Vq)||void 0===i?void 0:i.key()))),t.Sq>=0){var r=t.Sq;t.Sq=-1,t.seekTo(r)}return t.Yq=null,t.Vq})).catch((function(e){throw t.cq.invalidate(),e}))},this.or=function(e){return t.Yq=null,t.context.logger.warn("Getting segment index failed for representation with id ".concat(t.Vq.key()," (Error: ").concat(JSON.stringify(e),")")),Promise.reject(JSON.stringify(e))},this.sr=function(e){return t.Xq?Promise.reject("fail"):new Promise((function(n,r){t.Xq=i(i({},e),{resolve:n,reject:r})}))},this.Oq=e.settings;var n=e.sourceContext.sourceIdentifier;this.Zq=e.serviceManager.get(r.ServiceName.ManifestService,n);var o=this.Zq.getFirstPeriod()||{_id:u.DEFAULT_PERIOD_ID};this.Pq=o._id;var p=this.Oq.MAX_RETRIES;this.Wq=new s.DefaultContentLoader(e,{maxRetries:p,retryDelay:this.Oq.RETRY_DELAY,requestType:a.HttpRequestType.MEDIA_SEGMENTINDEX}),this.bq=e.serviceManager.get(r.ServiceName.SourceStoreService,n)}return e.prototype.pr=function(e){var t,n,i=this.Zq.getRepresentationById(e);if(i&&i.segmentIndex){var r=this.Zq.getPeriodDuration(this.Pq);isFinite(r)&&(n=r/i.segmentIndex.references.length);var o=this.Zq.getMediaPresentationDuration();0!==o&&(isFinite(o)&&(t=o/i.segmentIndex.references.length),n||(n=t)),i.segmentIndex&&(t=i.segmentIndex.references[0].duration/i.segmentIndex.timescale,n||(n=t))}return n},e.prototype.qr=function(){var e,t,n=this.Zq.getRepresentationById(this.Tq);if(null===(t=null===(e=null==n?void 0:n.segmentIndex)||void 0===e?void 0:e.references)||void 0===t?void 0:t.length){var i=n.segmentIndex.timescale||1,r=n.segmentIndex.references[this.Qq].time/i,o=this.getTimestampOffset(),s={url:"",byteRange:n.segmentIndex.references[this.Qq].byteRange,periodId:n._internalId.periodId,presentationTimeOffset:o,startTime:r-o};return this.Qq++,this.Rq=Math.floor(this.Qq*this.getSegmentDuration())+this.wr(),s}},e.prototype.getInitSegmentInfo=function(e){var t=this.Zq.getRepresentationById(e);return t&&t.SegmentBase&&t.BaseURL?i(i({},this.rr(t)),{codecs:(0,c.getCodecsFromAdaptationSet)(this.Zq.getAdaptationSet(e))}):null},e.prototype.rr=function(e){var t,n=e.SegmentBase[0];return(0,g.isInitializationNode)(n)?(0,g.provideSegmentInfoFromInitializationNodeProperty)(n,e):e.segmentIndex?(0,g.isIndexRangeNode)(n)?(0,g.provideSegmentInfoFromIndexRangeProperty)(n,e):null:(this.context.logger.debug("SegmentIndex for representation ".concat(null===(t=e._internalId)||void 0===t?void 0:t.key()," not parsed yet!")),null)},e.prototype.resolvePendingSegmentInfoRequests=function(){if(this.Xq){var e=this.qr();e&&(this.Xq.resolve(e),this.Xq=null)}},e.prototype.setAdaptationSetId=function(e){this.Uq=e,this.aq=e.adaptationSetId.split("-")[0],this.tr(),this.resolvePendingSegmentInfoRequests()},e.prototype.tr=function(){var e,t=this,n=this.Zq.getRepresentationById(this.Tq);n&&(e=n._bandwidth);var i=this.Zq.getMatchingRepresentationsByBandwidth(this.Uq,e),r=this.Tq?i.find((function(e){return e._internalId===t.Tq})):null,o=null!=r?r:i[0];this.Tq=o._internalId,this.Pq=this.Tq.periodId,o.segmentIndex||(this.updateRepresentation(this.Tq),o=this.Zq.getRepresentationById(o._internalId)),o.hasOwnProperty("SegmentBase")&&o.SegmentBase.length>1&&this.context.logger.debug("Representation ".concat(o._id," has more than one SegmentBase! Taking the first one."))},e.prototype.setRepresentationId=function(e){return!!this.Zq.getRepresentationById(e)&&(this.Tq=e,this.seekTo(this.Rq),!0)},e.prototype.getSegmentInfos=function(){var e=this.getSeekableRange();return this.ur(e)},e.prototype.ur=function(e){var t=this,n={};return this.Zq.getAdaptationSet(this.Uq).Representation.forEach((function(i){var r=i._id;if(n[r]=[],1===i.BaseURL.length){var o=i.BaseURL[0].url;n[r].push({url:p.URLHelper.appendQueryParametersToUrl(o,t.Oq.QUERY_PARAMETERS)})}else for(var s=0;s<i.BaseURL.length;s++)o=p.URLHelper.appendQueryParametersToUrl(i.BaseURL[s].url,t.Oq.QUERY_PARAMETERS),n[r].push({url:o});n[r].forEach((function(t){t.duration=e.end-e.start,t.startTime=e.start}))})),n},e.prototype.getNextSegmentInfo=function(e){var t=this.qr();return t?Promise.resolve(t):this.sr({time:e})},e.prototype.getSubtitleUrl=function(){var e=this.Zq.getAvailableBaseURLsForRepresentation(this.Tq);return e?e[0]:null},e.prototype.getStartNumber=function(){},e.prototype.getLiveEdgeTime=function(){return-1},e.prototype.getActualTimeShiftBufferDepth=function(){return this.Zq.getTimeShiftBufferDepthSeconds()},e.prototype.vr=function(){var e,t=this;return this.Zq.getRepresentationById(this.Tq)&&(e=this.pr(this.Tq)),e<0&&(e=this.Zq.getAdaptationSet(this.Uq).Representation.map((function(e){return t.pr(e._internalId)})).find((function(e){return e>0}))),isFinite(e)?[e,!0]:[1,!1]},e.prototype.getSegmentDuration=function(){return this.vr()[0]},e.prototype.hasNext=function(){this.resolvePendingSegmentInfoRequests();var e=this.Zq.getRepresentationById(this.Tq);if(e){if(e.segmentIndex)return this.Qq<e.segmentIndex.references.length;if(!this.isSegmentInfoLoaded(this.Tq))return!0}return!1},e.prototype.wr=function(){var e,t,n;return null!==(n=null===(t=null===(e=this.Zq)||void 0===e?void 0:e.findPeriod(this.Pq))||void 0===t?void 0:t.start)&&void 0!==n?n:0},e.prototype.seekTo=function(e){var t,n;this.Rq=e;var i=this.vr(),r=i[0],o=i[1];if((r<0||!o)&&(this.Sq=e),r>0&&o&&e>-1){var s=Math.max(e-this.wr(),0),a=null===(t=this.Zq)||void 0===t?void 0:t.getRepresentationById(this.Tq);this.Tq&&a&&(this.setIndex(Math.floor(s/r)),this.context.logger.debug("seekTo: ".concat(e,", new index: ").concat(this.Qq," (representationId: ").concat(null===(n=this.Tq)||void 0===n?void 0:n.key(),", ").concat(a._mimeType,")")))}},e.prototype.getTimestampOffset=function(){var e=this.Zq.findPeriod(this.Pq),t=this.Zq.getRepresentationById(this.Tq),n=t&&t.SegmentBase?t.SegmentBase[0]:null,i=0;if(n&&n.hasOwnProperty("_presentationTimeOffset")&&n.hasOwnProperty("_timescale")){var r=n.hasOwnProperty("_timescale")?parseInt(n._timescale):1;i=parseInt(n._presentationTimeOffset)/r}return e&&(i-=e.start),i},e.prototype.getIndex=function(){return this.Qq},e.prototype.setIndex=function(e){this.Qq=e},e.prototype.timeShift=function(e){},e.prototype.updateRepresentation=function(e){var t=this;if(this.isSegmentInfoLoaded(e))return this.context.logger.debug("Skipping updateRepresentation, SIDX info already loaded"),Promise.resolve(e);if(this.Yq)return this.Yq.catch((function(){})).then((function(){return t.updateRepresentation(e)}));var n=void 0,i=void 0,r=this.Zq.getRepresentationById(e);if(r){if(this.Wq.isLoading())return;this.context.logger.debug("Going to load segment index (Representation Id: ".concat(null==e?void 0:e.key(),")")),n=(0,g.extractBaseUrlFromRepresentation)(r),i=r.SegmentBase[0]._indexRange;var o=parseInt(i.split("-")[1])+1;return this.bq.dispatch((0,f.setRepresentationAnchorPointAction)(r._internalId,o)),this.Vq=e,this.Yq=this.Wq.load(n,a.HttpRequestMethod.GET,a.HttpResponseType.ARRAYBUFFER,null,{Range:"bytes="+i}).then((function(e){return t.dq(e.body)})).catch(this.or)}return this.context.logger.log("Getting segment index failed (Invalid Representation Id: ".concat(null==e?void 0:e.key(),")")),Promise.reject(null)},e.prototype.isSegmentInfoLoaded=function(e){return this.Zq.isSegmentInfoLoaded(e)},e.prototype.rewindOneSegment=function(){return this.Qq--,!(this.Qq<0&&(this.context.logger.debug("SegmentBase array index is smaller than 0, probably a discontinuity. Using 0."),this.setIndex(0),1))},e.prototype.getSeekableRange=function(){return{start:0,end:this.Zq.getMediaPresentationDuration()}},e.prototype.getPendingSegmentInfoRequest=function(){return this.Xq},e.prototype.setPendingSegmentInfoRequest=function(e){this.Xq=e},e.prototype.canSwitchRepresentation=function(e){return!0},e.prototype.getLatestTimeForPossibleSwitch=function(e){return e},e.prototype.adjustTimeToNextSegmentStart=function(e){return e},e.prototype.dispose=function(){this.Oq=null,this.Zq=null,this.Tq=null,this.bq=null,this.Wq=(0,o.dispose)(this.Wq),this.Xq=null,this.cq=null},e.prototype.setTimestampOffset=function(e,t){},e.prototype.xr=function(){return this.context.serviceManager.get(r.ServiceName.SegmentService).get(this.aq).getSegment(this.getInitSegmentInfo(this.Vq)).then((function(e){return e.read()})).then((function(e){return e.value}))},e.prototype.yr=function(e,t){return this.xr().then((function(n){var i=h.ModuleManager.get(d.ModuleName.ContainerWebM).WebMSegmentIndex,r=h.ModuleManager.get(d.ModuleName.ContainerWebM).WebMInitFile,o=new i(e),s=new r(n.getData()).segment.segmentInfo,a=function(e,t,n){for(var i=e.cues.flatMap((function(e){return e.cuePoints})),r=new Array(i.length),o=t-function(e){var t=e.cues&&e.cues[0],n=t&&t.cuePoints&&t.cuePoints[0],i=n&&n.trackPositions&&n.trackPositions[0];return i&&i.clusterPosition||0}(e),s=i.length-1;s>=0;s--)r[s]={time:i[s].time,byteRange:{start:o+i[s].trackPositions[0].clusterPosition}},s===i.length-1?r[s].duration=n-r[s].time:(r[s].byteRange.end=r[s+1].byteRange.start-1,r[s].duration=r[s+1].time-r[s].time);return r}(o,parseInt(t.SegmentBase[0]._indexRange.split("-")[1])+1,s.getDuration()/s.getTimecodeScale());return{timescale:s.getTimecodeScale(),references:a}}))},e.prototype.zr=function(e,t){return"webm"===this.aq.split("/")[1]?this.yr(e,t):Promise.resolve(this.Ar(e,t.anchorPoint))},e.prototype.Ar=function(e,t){if(!e||!t)return this.context.logger.debug("Error parsing SegmentIndex: Wrong Parameters"),null;var n=h.ModuleManager.get(d.ModuleName.ContainerMP4).parseBuffer(e).boxes.find((function(e){return"sidx"===e.type}));return n?{timescale:n.timescale,references:v(n.references,n.first_offset+t,n.earliest_presentation_time)}:(this.context.logger.debug("Error parsing SegmentIndex: No sidx box found"),null)},e}();function v(e,t,n){for(var i=[],r=0,o=e;r<o.length;r++){var s=o[r],a=s.referenced_size,u=s.subsegment_duration,l=t,p=l+a-1;i.push({byteRange:{start:l,end:p},time:n,duration:u}),t+=a,n+=u}return i}t.SegmentBaseMPDHandler=m},66759:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.DASHModuleDefinition=void 0;var i=n(62756),r=n(96693),o=n(44908),s=n(4771),a=n(63889),u=n(12054),l=n(31439),p={isIndexRangeNode:r.isIndexRangeNode,isInitializationNode:r.isInitializationNode,isInitializationStringNode:r.isInitializationStringNode},h={provideSegmentInfoFromInitializationProperty:r.provideSegmentInfoFromInitializationProperty,provideSegmentInfoFromInitializationNodeProperty:r.provideSegmentInfoFromInitializationNodeProperty,provideSegmentInfoFromIndexRangeProperty:r.provideSegmentInfoFromIndexRangeProperty};t.DASHModuleDefinition={name:i.ModuleName.DASH,module:function(){return{MPDLoader:o.MPDLoader,SegmentBaseMPDHandler:a.SegmentBaseMPDHandler,SegmentTemplateMPDHandler:u.SegmentTemplateMPDHandler,SegmentTimelineMPDHandler:l.SegmentTimelineMPDHandler,replaceAllPlaceholders:s.default,initSegmentInfoSourceDetectors:p,initSegmentInfoProviders:h}},dependencies:[i.ModuleName.EngineBitmovin,i.ModuleName.XML]},t.default=t.DASHModuleDefinition},78340:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__runInitializers||function(e,t,n){for(var i=arguments.length>2,r=0;r<t.length;r++)n=i?t[r].call(e,n):t[r].call(e);return i?n:void 0},o=this&&this.__esDecorate||function(e,t,n,i,r,o){function s(e){if(void 0!==e&&"function"!=typeof e)throw new TypeError("Function expected");return e}for(var a,u=i.kind,l="getter"===u?"get":"setter"===u?"set":"value",p=!t&&e?i.static?e:e.prototype:null,h=t||(p?Object.getOwnPropertyDescriptor(p,i.name):{}),d=!1,c=n.length-1;c>=0;c--){var f={};for(var g in i)f[g]="access"===g?{}:i[g];for(var g in i.access)f.access[g]=i.access[g];f.addInitializer=function(e){if(d)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(e||null))};var m=(0,n[c])("accessor"===u?{get:h.get,set:h.set}:h[l],f);if("accessor"===u){if(void 0===m)continue;if(null===m||"object"!=typeof m)throw new TypeError("Object expected");(a=s(m.get))&&(h.get=a),(a=s(m.set))&&(h.set=a),(a=s(m.init))&&r.unshift(a)}else(a=s(m))&&("field"===u?r.unshift(a):h[l]=a)}p&&Object.defineProperty(p,i.name,h),d=!0};Object.defineProperty(t,"__esModule",{value:!0}),t.BaseURL=t.MPDParser=void 0,t.mergeCommonAttributes=T,t.parseFraction=_;var s=n(25926),a=n(4224),u=n(3714),l=n(20213),p=n(69957),h=n(44468),d=n(34047),c=n(52424),f=n(68922),g=n(85434),m=n(58313),v=n(88052),y=n(62756),S=new RegExp("_(.*:)?label","i"),I=["__text","_byteRange","_serviceLocation","_availabilityTimeOffset","_availabilityTimeComplete"],R=function(){var e,t,n=[];return e=function(){function t(e,t){this.nQ=r(this,n),this.nQ=e,this.oQ=t,this.pQ=e.renderer;var i=v.ModuleManager.get(y.ModuleName.XML);this.qQ=i.parseXML,this.rQ=i.parseJSONtoXML}return t.prototype.sQ=function(e,t){return(0,f.applyLabeling)({source:this.oQ.source,context:this.nQ,streamType:h.StreamType.Dash,labelingType:e},t)},t.prototype.tQ=function(e){var t,n,i,r=null!==(i=null===(n=null===(t=e.Label)||void 0===t?void 0:t[0])||void 0===n?void 0:n.value)&&void 0!==i?i:e._label,o={mimeType:e._mimeType,lang:e._lang};return this.sQ(f.LabelingType.Tracks,o)||r},t.prototype.uQ=function(e,t){var n,i,r,o=null!==(r=null===(i=null===(n=t.Label)||void 0===n?void 0:n[0])||void 0===i?void 0:i.value)&&void 0!==r?r:t._label,s={id:t._id,mimeType:e,bitrate:t._bandwidth,qualityRanking:t._qualityRanking,width:t._width,height:t._height,frameRate:t._framerate};return this.sQ(f.LabelingType.Qualities,s)||o},t.prototype.vQ=function(e){var t=this,n=0;for(var i in e)if(e.hasOwnProperty(i)){if("Accessibility"===i&&this.wQ(e,e[i]),"EssentialProperty"===i&&x(e[i]))return this.nQ.logger.debug("Ignoring trickplay track ".concat(e._id," from Period ").concat(e._periodId)),null;"Label"===i&&(e.Label=q(e[i])),"SegmentTemplate"===i&&this.xQ(e[i]),"SegmentTemplate"===i||0===i.indexOf("_")||Array.isArray(e[i])||(e[i]=[e[i]]),"Representation"===i&&(e[i]=e[i].filter((function(i){var r,o,s=i._mimeType||e._mimeType;if(i._mimeType=i._mimeType||e._mimeType,s&&(s=s.toLowerCase()),"AudioChannelConfiguration"in e){var a=e.AudioChannelConfiguration;null!==(r=(o=i).AudioChannelConfiguration)&&void 0!==r||(o.AudioChannelConfiguration=a)}T(i,e),b(i),P(i),"string"==typeof i._bandwidth&&(i._bandwidth=parseFloat(i._bandwidth)),i.Label&&(i.Label=q(i.Label)),i.SegmentTemplate&&t.xQ(i.SegmentTemplate);var u=i._codecs||e._codecs;if(s&&(0===s.indexOf("application")||0===s.indexOf("text")||0===s.indexOf("image")||s.indexOf("mp2t")>=0))n++,i._label=t.uQ(s,i);else if(s&&u){if(i._codecs=u,!d.CodecStringHelper.isSupportedByRenderer(t.pQ,s,u))return t.nQ.logger.debug("Representation not supported ("+s+'; codecs="'+u+'")'),!1;n++,i._label=t.uQ(s,i)}return!0})))}return n>0?(!e.hasOwnProperty("_mimeType")&&e.Representation[0].hasOwnProperty("_mimeType")&&(e._mimeType=e.Representation[0]._mimeType),e._label=this.tQ(e),e.Representation.sort((function(e,t){return e._bandwidth-t._bandwidth})),e):(this.nQ.logger.debug("AdaptationSet ".concat(e._id," from Period ").concat(e._periodId," has no supported representations")),null)},t.prototype.wQ=function(t,n){t.ClosedCaptionLabels={};var i=e.filterAccessibilityTagsByScheme(n,"urn:scte:dash:cc:cea-608:2015");e.extractLabelGroups(i).forEach((function(e,n){var i=e.split("="),r=2===i.length?[i[0],i[1]]:["CC"+n,e],o=r[0],s=r[1];t.ClosedCaptionLabels[o]={label:s,lang:s}}))},t.prototype.xQ=function(e){e.forEach((function(e){var t,n;if(e.hasOwnProperty("SegmentTimeline")){var i=Number(null!==(t=e._timescale)&&void 0!==t?t:"1");null===(n=e.SegmentTimeline)||void 0===n||n.forEach((function(e){var t=e.S.reduce((function(e,t){var n;return e+Number(t._d)*(Number(null!==(n=t._r)&&void 0!==n?n:"0")+1)}),0);e.totalDuration=t/i}))}}))},t.filterAccessibilityTagsByScheme=function(e,t){return e&&e.length>0?e.filter((function(e){return e._schemeIdUri===t})):[]},t.extractLabelGroups=function(e){var t=[];return e.forEach((function(e){if(e._value){var n=e._value.split(";");t.push.apply(t,n)}})),t},t.prototype.yQ=function(e,t){for(var n=0;n<e.length;n++)if("string"==typeof t&&e[n].url===t||"object"==typeof t&&e[n].url===t.url)return!0;return!1},t.prototype.zQ=function(e,t,n,i){var r;Array.isArray(e.BaseURL)||(e.BaseURL=[e.BaseURL]);for(var o=[],s=0;s<e.BaseURL.length;s++){if((r=new L).customAttributes=[],null!=t&&(r.parentIds={},void 0!==t[0]&&null!==t[0]&&(r.parentIds.PeriodID=t[0]),void 0!==t[1]&&null!==t[1]&&(r.parentIds.AdaptationSetID=t[1]),void 0!==t[2]&&null!==t[2]&&(r.parentIds.RepresentationID=t[2])),"string"==typeof e.BaseURL[s])r.url=e.BaseURL[s];else if("object"==typeof e.BaseURL[s])for(var a in e.BaseURL[s].hasOwnProperty("__text")&&(r.url=e.BaseURL[s].__text),e.BaseURL[s].hasOwnProperty("_serviceLocation")&&(r.serviceLocation=e.BaseURL[s]._serviceLocation),e.BaseURL[s].hasOwnProperty("_byteRange")&&(r.serviceLocation=e.BaseURL[s]._byteRange),e.BaseURL[s].hasOwnProperty("_availabilityTimeOffset")&&(r.serviceLocation=e.BaseURL[s]._availabilityTimeOffset),e.BaseURL[s].hasOwnProperty("_availabilityTimeComplete")&&(r.serviceLocation=e.BaseURL[s]._availabilityTimeComplete),e.BaseURL[s])if(e.BaseURL[s].hasOwnProperty(a)&&0===a.indexOf("_")&&-1===I.indexOf(a)){var u={};u[a.substring(1)]=e.BaseURL[s][a],r.customAttributes.push(u)}o.push(r)}for(e.BaseURL=[],s=0;s<o.length;s++){var l=o[s];if(m.URLHelper.isUrlAbsolute(l))this.yQ(e.BaseURL,l)||(l.isAbsolute=!0,i.push(l),e.BaseURL.push(l));else for(var p=0;p<n.length;p++){var h=n[p].toString();"/"!==n[p].url[n[p].url.length-1]&&(h+="/");var d=m.URLHelper.concatUrlParts(h,l);this.yQ(e.BaseURL,d)||((r=new L).url=d,r.parentIds={},void 0!==t[0]&&null!==t[0]&&(r.parentIds.PeriodID=t[0]),void 0!==t[1]&&null!==t[1]&&(r.parentIds.AdaptationSetID=t[1]),void 0!==t[2]&&null!==t[2]&&(r.parentIds.RepresentationID=t[2]),r.serviceLocation=l.serviceLocation||n[p].serviceLocation,r.byteRange=l.byteRange||n[p].byteRange,r.availabilityTimeOffset=l.availabilityTimeOffset||n[p].availabilityTimeOffset,r.availabilityTimeComplete=l.availabilityTimeComplete||n[p].availabilityTimeComplete,e.BaseURL.push(r),i.push(r))}}return i},t.prototype.AQ=function(e,t,n){var i=[];if(t=t||[],n=n||[],"object"!=typeof e)return e;for(var r in e.hasOwnProperty("BaseURL")&&(i=this.zQ(e,n,t,i)),i.length<1&&(i=t),e)if(e.hasOwnProperty(r))if("object"==typeof e[r]&&0!==r.indexOf("_")){Array.isArray(e[r])||(e[r]=[e[r]]);for(var o=0;o<e[r].length;o++)if("BaseURL"!==r){var s=e[r][o]._id||o+"";e[r][o]=this.AQ(e[r][o],i,n.concat([s])),"Representation"!==r||e[r][o].hasOwnProperty("BaseURL")||(e[r][o].BaseURL=i)}}else 0!==r.indexOf("_")||!S.test(r)&&"_streamName"!==r||(e._label=e[r],"_label"!==r&&delete e[r]);return e},t.prototype.BQ=function(e){var t=c.DurationConverter.getDurationInSec(e._timeShiftBufferDepth);return(t=isNaN(t)?Number.NEGATIVE_INFINITY:-t)>0&&t<this.nQ.bufferSettings.getForwardTargetLevel()&&(t=this.nQ.bufferSettings.getForwardTargetLevel()),t},t.fillInMissingIds=function(e){Array.isArray(e.Period)||(e.Period=[e.Period]);for(var t,n=[],i=[],r=[],o=[],s=[],a=[],u=e.Period,l=0;l<u.length;l++){u[l].hasOwnProperty("_id")&&u[l]._id?n.push(u[l]._id):o.push(u[l]),Array.isArray(u[l].AdaptationSet)||(u[l].AdaptationSet=[u[l].AdaptationSet]);for(var p=u[l].AdaptationSet,h=0;h<p.length;h++){p[h].hasOwnProperty("_id")&&p[h]._id?i.push(p[h]._id):s.push(p[h]),p[h]._periodId=u[l]._id,Array.isArray(p[h].Representation)||(p[h].Representation=[p[h].Representation]);for(var d=p[h].Representation,c=0;c<d.length;c++)d[c].hasOwnProperty("_id")&&d[c]._id?r.push(d[c]._id):a.push(d[c])}}var f=0;for(t=0;t<o.length;t++){do{f++}while(-1!==n.indexOf(""+f));o[t]._id=""+f,o[t].AdaptationSet.forEach((function(e){e._periodId=o[t]._id})),n.push(""+f)}for(f=0,t=0;t<s.length;t++){do{f++}while(-1!==i.indexOf(""+f));s[t]._id=""+f,i.push(""+f)}for(f=0,t=0;t<a.length;t++){do{f++}while(-1!==r.indexOf(""+f));a[t]._id=""+f,r.push(""+f)}},t.prototype.CQ=function(e){return"dynamic"===e._type&&(e._timeShiftBufferDepth=this.BQ(e)),e},t.prototype.DQ=function(e){return e._publishTime&&(e._publishTime=new Date(e._publishTime).getTime()),e},t.prototype.EQ=function(e,t){return e.hasOwnProperty("Location")?Array.isArray(e.Location)||(e.Location=[e.Location]):e.Location=[t],e},t.prototype.FQ=function(e){e.hasOwnProperty("BaseURL")&&!Array.isArray(e.BaseURL)&&(e.BaseURL=[e.BaseURL]);for(var t=[],n=0;n<e.Location.length;n++){var i=e.Location[n],r=new L;r.url=m.URLHelper.removeLastPathPart(i),t.push(r)}return this.AQ(e,t,null)},t.prototype.GQ=function(e,t){t._start?t.start=c.DurationConverter.getDurationInSec(t._start):(t.start=e.start+e.duration,t._start="PT"+t.start+"S")},t.prototype.HQ=function(e){for(var t={start:0,duration:0,_start:"PT0S",_duration:"PT0S"},n=0;n<e.Period.length;n++){var i=e.Period[n];this.GQ(t,i),i._duration?i.duration=c.DurationConverter.getDurationInSec(i._duration):(e.Period[n+1]?i.duration=(c.DurationConverter.getDurationInSec(e.Period[n+1]._start)||0)-i.start:e._mediaPresentationDuration?i.duration=(c.DurationConverter.getDurationInSec(e._mediaPresentationDuration)||0)-i.start:i.duration=1/0,i._duration="PT"+i.duration+"S"),this.nQ.logger.debug("period ".concat(n," (id=").concat(i._id,"): ").concat(i.start,"-").concat(i.start+i.duration)),e.Period[n]=i,t=i}return e},t.prototype.IQ=function(e){var t,n,i=this,r=[],o=[],l=c.DurationConverter.getDurationInSec(e._mediaPresentationDuration);return e.Period.forEach((function(p,h){t=c.DurationConverter.getDurationInSec(p._start),n=c.DurationConverter.getDurationInSec(p._duration),isNaN(t)&&0===o.length&&"static"===e._type&&(t=0),isNaN(t)&&o.length>0&&!isNaN(parseFloat(o[o.length-1].start))&&!isNaN(parseFloat(o[o.length-1].duration))&&(t=o[o.length-1].start+o[o.length-1].duration),isNaN(t)&&h===e.Period.length-1&&!isNaN(l)&&(n=l-t),o.length>0&&isNaN(parseFloat(o[o.length-1].duration))&&!isNaN(t)&&(o[o.length-1].duration=t-o[o.length-1].start),o.push({start:t,duration:n});var d=function(e){if(p.hasOwnProperty(e)&&["BaseURL","AdaptationSet","EventStream"].includes(e))if(Array.isArray(p[e])||(p[e]=[p[e]]),"AdaptationSet"===e){var t=p[e].map((function(e){var t=e._mimeType;return!t&&e.Representation.length>0&&(t=e.Representation[0]._mimeType),g.MimeTypeHelper.extractContentType(t)})).filter((function(e,t,n){return n.indexOf(e)===t}));p[e]=p[e].map((function(e){T(e,p);var t=i.vQ(e);return null!==t&&!t.hasOwnProperty("ContentProtection")&&t.Representation[0].hasOwnProperty("ContentProtection")&&(t.ContentProtection=t.Representation[0].ContentProtection),t})).filter((function(e){return Boolean(e)})),t.filter((function(e){return"audio"===e||"video"===e})).forEach((function(t){!p[e].some((function(e){return e._mimeType.includes(t)}))&&i.nQ.eventHandler.dispatchEvent(u.PlayerEvent.Warning,new s.PlayerWarning(a.WarningCode.SOURCE_CODEC_OR_FILE_FORMAT_NOT_SUPPORTED))})),p[e].length<1&&r.push(h)}else"EventStream"===e&&p[e].filter((function(e){return e.Event})).forEach((function(e){e.Event.forEach((function(e){e.rawXmlRepresentation=i.rQ({event:e})}))}))};for(var f in p)d(f)})),r.length>0&&"static"===e._type&&this.JQ(r,o,l,e),e=this.HQ(e)},t.prototype.JQ=function(e,t,n,i){for(var r,o,s;!isNaN(parseInt(r=e.pop()));){if(o=t[r].start,s=t[r].duration,!isNaN(o)&&!isNaN(s)){isNaN(n)||(n-=s,i._mediaPresentationDuration="PT"+n+"S");for(var a=r+1;a<t.length;a++)isNaN(parseFloat(t[a].start))||(t[a].start=t[a].start-s,i.Period[a]._start="PT"+t[a].start+"S")}t.splice(r,1),i.Period.splice(r,1)}},t.parseUTCTimingInformation=function(e){e.hasOwnProperty("UTCTiming")&&!Array.isArray(e.UTCTiming)&&(e.UTCTiming=[e.UTCTiming]);var t=[];return(e.UTCTiming||[]).filter((function(e){return e.hasOwnProperty("_schemeIdUri")&&"string"==typeof e._schemeIdUri})).forEach((function(e){var n={schemeIdUri:e._schemeIdUri,value:""};"string"==typeof e._value&&(n.value=e._value),t.push(n)})),t.length>0?e.UTCTiming=t:delete e.UTCTiming,e},t.prototype.parse=function(t,n,i){var r,o=this.qQ(t,{decodeEntities:!0});if(!1===o.success)throw new l.PlayerError(l.ErrorCode.SOURCE_MANIFEST_INVALID,{errorMessage:o.error.message},"DASH manifest is not a valid XML");var s=o.parsed.MPD;return s._requestTimestamp=Date.now(),s._downloadTime=i,s._type=null!==(r=s._type)&&void 0!==r?r:"static",e.fillInMissingIds(s),s=this.CQ(s),s=this.DQ(s),s=this.EQ(s,n),s=this.FQ(s),s=this.IQ(s),(s=e.parseUTCTimingInformation(s))&&s.Period&&0!==s.Period.length?(s.originalDashManifest=t,s):(this.nQ.eventHandler.fireError(new l.PlayerError(l.ErrorCode.SOURCE_MANIFEST_INVALID)),null)},t.prototype.dispose=function(){this.pQ=null},t}(),function(){var i="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;t=[(0,p.trackPerformance)("MPDParser.parse")],o(e,null,t,{kind:"method",name:"parse",static:!1,private:!1,access:{has:function(e){return"parse"in e},get:function(e){return e.parse}},metadata:i},null,n),i&&Object.defineProperty(e,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})}(),e}();function T(e,t){if(e&&t){var n=["SegmentBase","SegmentList","SegmentTemplate"];n.forEach((function(r){var o=Array.isArray(e[r])&&e[r][0],s=Array.isArray(t[r])&&t[r][0],a=n.find((function(t){return e[t]}));s&&o?e[r]=[i(i({},t[r][0]),e[r][0])]:s&&!a&&(e[r]=t[r])}))}}function _(e){var t=e.split("/");return parseInt(t[0])/(parseInt(t[1])||1)}function b(e){"string"==typeof e._audioSamplingRate&&(e._audioSamplingRate=parseFloat(e._audioSamplingRate))}function P(e){"string"==typeof e._height&&(e._height=parseFloat(e._height)),"string"==typeof e._width&&(e._width=parseFloat(e._width)),"string"==typeof e._frameRate&&(e._frameRate=_(e._frameRate))}function q(e){return"string"==typeof e?[{value:e}]:Array.isArray(e)?e.map((function(e){return{id:e._id,lang:e._lang,value:e.toString()}})):[]}function x(e){var t;return"http://dashif.org/guidelines/trickmode"===(null===(t=null==e?void 0:e[0])||void 0===t?void 0:t._schemeIdUri)}t.MPDParser=R;var L=function(){function e(){this.url=null,this.parentIds=null,this.serviceLocation=null,this.byteRange=null,this.availabilityTimeOffset=null,this.availabilityTimeComplete=null,this.isAbsolute=!1,this.customAttributes=null}return e.prototype.toString=function(){return this.url?""+this.url:""},e}();t.BaseURL=L},96693:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.isInitializationStringNode=function(e){return(0,r.isObject)(e)&&null!=e._initialization},t.isInitializationNode=function(e){return(0,r.isObject)(e)&&Array.isArray(e.Initialization)&&e.Initialization.length>0},t.isIndexRangeNode=function(e){return(0,r.isObject)(e)&&null!=e._indexRange},t.provideSegmentInfoFromInitializationProperty=function(e,t){var n=(0,a.default)(e._initialization,t),r=o.URLHelper.concatBaseUrlWithPartial(u(t),n);return i(i({},(0,s.createInitSegmentInfoBase)(t)),{url:r,mediaURL:n})},t.extractBaseUrlFromRepresentation=u,t.provideSegmentInfoFromInitializationNodeProperty=function(e,t){var n=e.Initialization[0],r=function(e,t){return e._sourceURL?e._sourceURL:u(t)}(n,t),a=o.URLHelper.concatBaseUrlWithPartial(u(t),r),l=function(e){var t,n,i=null!==(n=null===(t=e._range)||void 0===t?void 0:t.split("-").map((function(e){return parseInt(e)})))&&void 0!==n?n:[];return i.length>1?{start:i[0],end:i[1]}:null}(n);return i(i({},(0,s.createInitSegmentInfoBase)(t)),{url:a,mediaURL:r,byteRange:l})},t.provideSegmentInfoFromIndexRangeProperty=function(e,t){var n=u(t),r={start:0,end:parseInt(e._indexRange.split("-")[0])-1};return i(i({},(0,s.createInitSegmentInfoBase)(t)),{url:n,mediaURL:n,byteRange:r})};var r=n(94685),o=n(58313),s=n(65439),a=n(4771);function u(e){return e.BaseURL?o.URLHelper.urlObjectToString(e.BaseURL[0]):""}}},function(e){return function(){return e(e.s=66759)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.hls=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.player=e.bitmovin.player||{},e.bitmovin.player.hls=t())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[458],{1945:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SEGMENT_TAGS=void 0,t.parseVariant=function(e,n){void 0===n&&(n={});for(var i={version:1,allowCache:!0,hasM3u:!0,endList:!1,segments:[],dateRange:[],skippedSegmentsCount:0,targetDuration:0,totalDuration:0,mediaSequence:0},r=[],s=0;s<e.length;s++){var c=(0,a.removeTrailingWhitespaces)(e[s]);if(""!==c)if((0,a.isCustomTag)(c))(0,a.handleCustomTag)(i,r,c);else{var d=(0,o.parseTag)(c);if(t.SEGMENT_TAGS.includes(d.name))return(0,a.parseSegments)(e.slice(s),r,i,n),u(i),i;l(i,d,r)}}return u(i),i},t.resolvePlaylistTag=l;var r=n(3714),a=n(73577),o=n(41908),s=n(5707);function u(e){var t;"EVENT"===e.playlistType&&(e.discontinuitySequence=null!==(t=e.discontinuitySequence)&&void 0!==t?t:0)}function l(e,t,n){switch(t.name){case"EXT-X-VERSION":e.version=Number(t.value);break;case"EXT-X-START":e.start=(0,s.generateStartAttributes)(t);break;case"EXT-X-INDEPENDENT-SEGMENTS":e.independentSegments=!0;break;case"EXT-X-TARGETDURATION":t.value&&(e.targetDuration=parseInt(t.value));break;case"EXT-X-MEDIA-SEQUENCE":t.value&&(e.mediaSequence=parseInt(t.value));break;case"EXT-X-DISCONTINUITY-SEQUENCE":t.value&&(e.discontinuitySequence=parseInt(t.value));break;case"EXT-X-PLAYLIST-TYPE":e.playlistType="EVENT"===t.value?"EVENT":"VOD";break;case"EXT-X-PART-INF":e.partInfo=(0,s.generatePartInfoTag)(t.attributes);break;case"EXT-X-ALLOW-CACHE":e.allowCache="NO"!==t.value;break;case"EXT-X-SERVER-CONTROL":e.serverControl=(0,s.generateServerControlTag)(t);break;case"EXT-X-DATERANGE":e.dateRange.push((0,s.generateDateRange)(t));break;case"EXT-X-ENDLIST":e.endList=!0;break;case"EXTM3U":break;default:n.push(i({type:r.MetadataType.CUSTOM},t)),(0,a.addCustomTagToPlaylistTagList)(e,t)}}t.SEGMENT_TAGS=["EXTINF","EXT-X-BYTERANGE","EXT-X-DISCONTINUITY","EXT-X-PROGRAM-DATE-TIME","EXT-X-KEY","EXT-X-GAP","EXT-X-BITRATE","EXT-X-PART","EXT-X-MAP","EXT-X-CUE-OUT-CONT","EXT-X-CUE-OUT","EXT-X-CUE-IN","EXT-X-SCTE35","EXT-X-SKIP"]},5671:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setSegmentInfos=function(e,t){return(0,i.createAction)(r.SegmentInfoMapActionType.SetSegmentInfos,{qualityPath:e,updatedEntry:t})},t.updateSegmentInfos=function(e,t){return(0,i.createAction)(r.SegmentInfoMapActionType.UpdateSegmentInfos,{qualityPath:e,updatedEntry:t})};var i=n(35267),r=n(49713)},5707:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.generateRendition=function(e){var t,n,r;return{name:e.name,attributes:i(i({},e.attributes),{TYPE:null===(t=e.attributes)||void 0===t?void 0:t.TYPE,"GROUP-ID":null===(n=e.attributes)||void 0===n?void 0:n["GROUP-ID"],NAME:null===(r=e.attributes)||void 0===r?void 0:r.NAME})}},t.generateStartAttributes=function(e){var t,n;return(null===(t=e.attributes)||void 0===t?void 0:t.hasOwnProperty("TIME-OFFSET"))&&(n={timeOffset:Number(e.attributes["TIME-OFFSET"]),precise:"YES"===e.attributes.PRECISE}),e.attributes&&n&&n.hasOwnProperty("timeOffset")&&(e.attributes["TIME-OFFSET"]=n.timeOffset,e.attributes.PRECISE=n.precise),n},t.generatePartInfoTag=function(e){return{targetDuration:parseFloat(e["PART-TARGET"])}},t.generateServerControlTag=function(e){var t={canBlockReload:!1};return e.attributes?(e.attributes["CAN-SKIP-UNTIL"]&&(t.canSkipUntil=parseFloat(e.attributes["CAN-SKIP-UNTIL"])),void 0!==t.canSkipUntil&&e.attributes["CAN-SKIP-DATERANGES"]&&(t.canSkipDateRanges="YES"===e.attributes["CAN-SKIP-DATERANGES"]),e.attributes["HOLD-BACK"]&&(t.holdBack=parseFloat(e.attributes["HOLD-BACK"])),e.attributes["PART-HOLD-BACK"]&&(t.partHoldBack=parseFloat(e.attributes["PART-HOLD-BACK"])),e.attributes["CAN-BLOCK-RELOAD"]&&(t.canBlockReload="YES"===e.attributes["CAN-BLOCK-RELOAD"]),t):t},t.generateSkipTag=function(e){var t={skippedSegments:0,recentlyRemovedDateranges:[]};return e.attributes?(e.attributes["SKIPPED-SEGMENTS"]&&(t.skippedSegments=parseInt(e.attributes["SKIPPED-SEGMENTS"])),e.attributes["RECENTLY-REMOVED-DATERANGES"]&&(t.recentlyRemovedDateranges=e.attributes["RECENTLY-REMOVED-DATERANGES"].split("\t")),t):t},t.generatePartTag=function(e,t){var n={uri:(0,s.forceReallocation)(e.URI),duration:parseFloat(e.DURATION)};if("YES"===e.INDEPENDENT&&(n.independent=!0),e.BYTERANGE){var i=e.BYTERANGE.split("@"),r=parseInt(i[0]),a=parseInt(i[1]);isNaN(a)&&(a=(null==t?void 0:t.byteRange)?t.byteRange.end+1:0),n.byteRange={start:a,end:a+r-1}}return"YES"===e.GAP&&(n.gap=!0),n},t.generatePreloadHintTag=function(e,t){if("PART"===e.TYPE){var n={uri:(0,s.forceReallocation)(e.URI),duration:t,isPreloadHint:!0};return(i=u(e))&&(n.byteRange=i),{part:n}}if("MAP"===e.TYPE){var i,r={url:(0,s.forceReallocation)(e.URI)};return(i=u(e))&&(r.byteRange=i),{init:r}}return{}},t.generateStreamInfTag=function(e,t){var n,r,a,o,s,u={name:e.name,uri:t,attributes:i(i({},e.attributes),{BANDWIDTH:null===(n=e.attributes)||void 0===n?void 0:n.BANDWIDTH})};return(null===(r=e.attributes)||void 0===r?void 0:r.RESOLUTION)&&(u.attributes.RESOLUTION=f(e)),(null===(a=e.attributes)||void 0===a?void 0:a.BANDWIDTH)&&(u.attributes.BANDWIDTH=parseInt(e.attributes.BANDWIDTH)),(null===(o=e.attributes)||void 0===o?void 0:o["AVERAGE-BANDWIDTH"])&&(u.attributes["AVERAGE-BANDWIDTH"]=parseInt(e.attributes["AVERAGE-BANDWIDTH"])),(null===(s=e.attributes)||void 0===s?void 0:s["PROGRAM-ID"])&&(u.attributes["PROGRAM-ID"]=parseInt(e.attributes["PROGRAM-ID"])),u.id=l(u.attributes),u},t.generateVariantPlaylistId=l,t.generateSessionKeyTag=function(e){d(e)},t.generateIFrameStreamInfTag=function(e){var t,n,i;(null===(t=e.attributes)||void 0===t?void 0:t.BANDWIDTH)&&(e.attributes.BANDWIDTH=parseInt(e.attributes.BANDWIDTH)),(null===(n=e.attributes)||void 0===n?void 0:n["AVERAGE-BANDWIDTH"])&&(e.attributes["AVERAGE-BANDWIDTH"]=parseInt(e.attributes["AVERAGE-BANDWIDTH"],10)),(null===(i=e.attributes)||void 0===i?void 0:i.RESOLUTION)&&(e.attributes.RESOLUTION=f(e))},t.generateSegmentEntrySkeleton=function(){return{uri:"",duration:0,mediaSequence:0}},t.generateCueTag=function(e,t){var n={type:t};if(e.attributes){var i=[];for(var r in e.attributes)if(e.attributes.hasOwnProperty(r)){var a=e.attributes[r]?"".concat(r,"=").concat(e.attributes[r]):r;i.push(a)}n.attributes=i}return n},t.generateDateRange=function(e){var t={type:o.MetadataType.DATERANGE};if(e.attributes){t.clientAttributes={};var n=e.attributes;for(var i in n)if(n.hasOwnProperty(i)){var r=c(i,n[i]);i.startsWith("X-")?t.clientAttributes[(0,s.kebabCaseToCamelCase)(i.substring(2))]=r:t[(0,s.kebabCaseToCamelCase)(i)]=r}}return t.duration&&(t.duration=Number(t.duration)),t.plannedDuration&&(t.plannedDuration=Number(t.plannedDuration)),t.endOnNext&&(t.endOnNext=!0),t},t.generateKeyTag=function(e){var t;if(d(e),e.attributes&&"NONE"!==e.attributes.METHOD&&e.attributes.URI){var n={method:null!==(t=a.HlsEncryptionMethods.find((function(t){return t===e.attributes.METHOD})))&&void 0!==t?t:a.HlsEncryptionMethod.AES_128,uri:(0,s.forceReallocation)(e.attributes.URI)};return void 0!==e.attributes.IV&&(n.iv=e.attributes.IV),e.attributes.KEYFORMAT&&(n.keyformat=(0,s.forceReallocation)(e.attributes.KEYFORMAT)),e.attributes.KEYFORMATVERSIONS&&(n.keyformatversions=(0,s.forceReallocation)(e.attributes.KEYFORMATVERSIONS)),e.attributes.KEYID&&(n.keyid=(0,s.forceReallocation)(e.attributes.KEYID)),n}},t.generateByteRangeTag=function(e,t){var n;if(e.value){var i=e.value.split("@"),r=i[0],a=i[1],o={length:parseInt(r||"0")};if(a)o.offset=parseInt(a);else{var s=t[t.length-1];(null==s?void 0:s.byterange)&&(o.offset=(null!==(n=s.byterange.offset)&&void 0!==n?n:0)+s.byterange.length)}return o}},t.generateMapTag=function(e,t){var n,i;if(null===(n=e.attributes)||void 0===n?void 0:n.URI){var a={url:(0,s.forceReallocation)(e.attributes.URI)};if(null===(i=e.attributes)||void 0===i?void 0:i.BYTERANGE){var o=e.attributes.BYTERANGE.split("@"),u=o[0],l=o[1];a.byteRange={start:parseInt(l),end:parseInt(l)+parseInt(u)-1}}return t.keys.length>0&&(a.keys=r([],t.keys,!0),t.keyInUse=!0),a}},t.generateCustomTag=function(e){try{e=(0,s.forceReallocation)(e);var t=/^#([^:=]*)([:=])?(.*)$/.exec(e);if(!(null==t?void 0:t[1]))return;var n={name:t[1]},i="";if("="===t[2]&&t[3])i=t[3];else if(":"===t[2]&&t[3]){var r=m.exec(t[3]);r&&"="===r[2]&&r[3]?n.attributes=function(e){for(var t=e.split(p),n=t.length,i={};n--;)if(""!==t[n]){var r=g.exec(t[n]);if(r){var a=r.slice(1),o=a[0],s=a[1];i[o.trim()]=s.trim().replace(h,"$1")}}return i}(t[3]):i=t[3]}return i&&(n.value=i.replace(v,"$1")),n}catch(e){return}};var a=n(66790),o=n(3714),s=n(20649);function u(e){var t=parseInt(e["BYTERANGE-START"]),n=parseInt(e["BYTERANGE-END"]);if(!isNaN(t)||!isNaN(n))return{start:isNaN(t)?0:t,end:isNaN(n)?Math.pow(2,53)-1:n}}function l(e){var t="";return e.RESOLUTION&&(t+=e.RESOLUTION.height+"_"),t+e.BANDWIDTH}function c(e,t){var n=(0,s.forceReallocation)(t);return function(e){return["X-RESUME-OFFSET","X-PLAYOUT-LIMIT"].includes(e)}(e)?Number(n):function(e){return["X-SNAP","X-RESTRICT"].includes(e)}(e)?n.split(","):n}function d(e){var t;if(null===(t=e.attributes)||void 0===t?void 0:t.IV){var n=e.attributes.IV;(n.startsWith("0x")||n.startsWith("0X"))&&(e.attributes.IV=n.substring(2))}}function f(e){var t,n={width:0,height:0},i=null===(t=e.attributes)||void 0===t?void 0:t.RESOLUTION.split("x");return i[0]&&(n.width=parseInt(i[0])),i[1]&&(n.height=parseInt(i[1])),n}var p=/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/,g=/([^=]*)=(.*)/,h=/^['"](.*)['"]$/,v=/^['"](.*)['"]$/g,m=/^([^:="]*)([:=])?(.*)$/},8251:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DiscontinuitySequenceNumberTracker=void 0;var n=function(){function e(e){this.gm=e,this.im=[],this.reset()}return e.prototype.jm=function(e){var t=this;this.im.forEach((function(n){return n(t.hm,e)}))},e.prototype.trackSegment=function(e){if(this.gm(e.getMimeType())&&!e.isInit()){var t=e.getSegmentInfo(),n=null==t?void 0:t.discontinuitySequenceNumber,i=isFinite(this.hm),r=this.hm!==n;i&&r&&this.jm(n),this.hm=n}},e.prototype.subscribe=function(e){this.im.push(e)},e.prototype.unsubscribe=function(e){var t=this.im.indexOf(e);t<0||this.im.splice(t,1)},e.prototype.reset=function(){this.hm=-1/0},e.prototype.dispose=function(){this.reset(),this.im=[]},e}();t.DiscontinuitySequenceNumberTracker=n},14447:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.M3u8Loader=t.HlsQueryParamNames=void 0,t.getParsedManifest=D;var r,a=n(40306),o=n(3336),s=n(80813),u=n(56481),l=n(3714),c=n(4129),d=n(77401),f=n(57456),p=n(29669),g=n(98714),h=n(91678),v=n(33436),m=n(85434),S=n(89927),y=n(58313),T=n(14302),E=n(87222),_=n(36193),O=n(59707),I=n(60729),b=n(16661),R=n(15617),A=n(30234),N=n(67113),M=n(95212),P=n(18146);function D(e,t,n){var i=n.url,r=n.manifestText,a=e.serviceManager.maybeCall(s.ServiceName.ManifestCachingService,(function(e){return e.getParsedManifest(i)}),null,t.sourceIdentifier);return a?Promise.resolve(a):(0,A.parseHlsManifest)(e,r)}!function(e){e.MediaSequenceNumber="_HLS_msn",e.PartIndex="_HLS_part",e.Skip="_HLS_skip"}(r||(t.HlsQueryParamNames=r={}));var C=function(){function e(e,t){var n=this;this.Jn={},this.updateRepresentation=function(e){var t=n.jn(e,e.Uri);n.En.logger.debug("M3u8Loader: updateRepresentation (".concat(t,")"));var i=n.Jn[e._id];return n.ln(i,t).then((function(t){return n.fn(t,e)})).then((function(e){var t,r,a=n.nn(),o=!0===(null===(r=null===(t=n.En)||void 0===t?void 0:t.settings)||void 0===r?void 0:r.INFINITE_RETRIES_FOR_LIVE);return a&&o&&i.setResetRetriesWhenOffline(!0),e})).catch((function(t){return n.kn(t,e)}))},this.mn=function(e,t){n.Kn||(n.Ln=t.name,n.En.logger.debug("Failed to load playlist: ".concat(e.url," - ").concat(t.name)))},this.En=e,this.Fn=t,this.Mn=[],this.Nn=[],this.Hn={},this.Kn=!1,this.Pn=new N.M3u8DashManifest(e,t),this.In=this.on(p.HttpRequestType.MANIFEST_HLS_MASTER),this.Qn=e.serviceManager.get(s.ServiceName.SourceStoreService,t.sourceIdentifier)}return e.prototype.load=function(e){var t=this;return this.Kn=!1,this.Ln=null,this.ln(this.In,e).then((function(e){return t.Rn(e)})).then((function(e){return t.Pn.updateBaseUrl(e.url),t.Sn(e),t.Xn(e)})).then((function(e){return t.en(e),t.Tn()})).then((function(){return t.Pn.getManifest()})).catch((function(e){var n=e instanceof Error?e.message:void 0;return t.Kn||n===d.RequestError.Canceled?Promise.reject():e instanceof o.PlayerError||e instanceof Error?Promise.reject(e):Promise.reject(t.pn(e))})).finally((function(){var e;return null===(e=t.On)||void 0===e?void 0:e.signalLoadingFinished()}))},e.prototype.Rn=function(e){var t=this;if(this.Kn)return Promise.reject(new Error("The loading of the HLS source was cancelled."));var n=e.body;if(void 0===n)return Promise.reject(new Error("Cannot parse the playlist: content is empty."));var r={manifestText:n,url:e.url};return D(this.En,this.Fn,r).then((function(n){return(0,A.isValidHlsPlaylist)(n)?(t.Wn(e,n),(0,A.ensureMasterPlaylist)(t.En,n,e.url)):Promise.reject(new Error("Cannot parse master playlist: invalid format."))})).then((function(t){return i(i({},t),{rawString:n,url:e.url})})).catch((function(e){return Promise.reject(new o.PlayerError(a.ErrorCode.SOURCE_MANIFEST_INVALID,{errorMessage:e.message},"HLS manifest is not a valid M3U playlist"))}))},e.prototype.Sn=function(e){var t=this.Pn.extractBackupStreams(e);t.every((function(e){return Object.keys(e).length<=1}))||(this.On=new R.HlsBackupStreamsHandler(this.En,t,this.updateRepresentation))},e.prototype.Tn=function(){var e=this,t=this.Qn.getState(),n=this.Pn.getManifest().Period[0],i=(0,E.findAdaptationSetOfMimeType)(m.MimeType.VideoMp4,n,{sourceState:t}),r=(0,E.findAdaptationSetOfMimeType)(m.MimeType.AudioMp4,n,{sourceState:t,playbackConfig:this.En.config.playback}),s=[];return i&&s.push(this.Un(i)),r&&s.push(this.Un(r)),Promise.all(s).catch((function(t){return t instanceof o.PlayerError?Promise.reject(t):e.Ln===d.RequestError.TimedOut||t===d.RequestError.TimedOut?Promise.reject(new o.PlayerError(a.ErrorCode.NETWORK_MANIFEST_DOWNLOAD_TIMEOUT,{error:t},"Failed to load the HLS variant playlists: the request timed out.")):Promise.reject(new o.PlayerError(a.ErrorCode.SOURCE_HLS_STREAM_ERROR,{error:t},"There was an error while retrieving the variant playlists."))}))},e.prototype.Un=function(e){var t=this,n=this.Vn(e.Representation,e._mimeType,e);if(!n){var i="No ".concat(e._mimeType," variants/renditions available");return this.En.logger.log(i),Promise.reject(new o.PlayerError(a.ErrorCode.SOURCE_MANIFEST_INVALID,{reason:i},i))}return this.updateRepresentation(n).then((function(e){return t.Qn.dispatch((0,g.setPreferredBitrateForMimeTypeAction)(n._mimeType,n._bandwidth)),t.Qn.dispatch((0,_.setRepresentationIdAction)(n._internalId)),e})).catch((function(i){var r,a;return t.En.logger.debug("Representation ".concat(n._id," failed, dropping it"),null!==(r=null==i?void 0:i.message)&&void 0!==r?r:i),e.Representation=e.Representation.filter((function(e){return e!==n})),e.Representation.length>0?t.Un(e):(t.En.logger.log("All ".concat(e._mimeType," variants/renditions failed"),null!==(a=null==i?void 0:i.message)&&void 0!==a?a:i),Promise.reject(i))}))},e.prototype.Vn=function(e,t,n){return this.En.serviceManager.maybeCall(s.ServiceName.AdaptationService,(function(i){i.setAdaptationSetId(n._mimeType,n._internalId);var r=i.selectRepresentation(t,{},e);return e.find((function(e){return e._internalId.equals(r)}))}))},e.prototype.updateAdaptationSet=function(e){var t=this,n=this.Pn.findAdaptationSet(e);return n?Promise.all(n.Representation.map((function(e){var n=t.on(p.HttpRequestType.MANIFEST_HLS_VARIANT);return t.ln(n,e.Uri).then((function(n){return t.fn(n,e)})).then((function(e){t.Qn.dispatch((0,O.updateRepresentationAction)(e))}))}))):Promise.reject("Could not find data")},e.prototype.Wn=function(e,t){this.En.serviceManager.maybeCall(s.ServiceName.ManifestCachingService,(function(n){n.cacheHttpResponse(e,e.url),n.cacheParsedManifest(t,e.url)}),null,this.Fn.sourceIdentifier)},e.prototype.Xn=function(e){var t=this,n=(0,A.getTracksWithUnknownCodecs)(e),i=n.audioTracksWithoutCodecs,r=n.videoTracksWithoutCodecs;return 0===i.length&&0===r.length?Promise.resolve(e):(this.En.logger.debug("Codecs are missing in master playlist - probing them from segments now"),this.cn(e,i).then((function(){return t.dn(e,r)})).then((function(){return e})).catch((function(e){var n;if(e instanceof o.PlayerError)return Promise.reject(e);var i="Codec verification failed",r=null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e;t.En.logger.debug(i,e);var s=t.Ln===d.RequestError.TimedOut?a.ErrorCode.NETWORK_MANIFEST_DOWNLOAD_TIMEOUT:a.ErrorCode.SOURCE_MANIFEST_INVALID;return Promise.reject(new o.PlayerError(s,{reason:r},i))})))},e.prototype.Yn=function(e,t){var n=this,i=e.url,r=e.body;if(void 0===r)return Promise.reject("Cannot parse codec, empty manifest response");var a={url:t,manifestText:r};return D(this.En,this.Fn,a).then((function(r){var a=(0,P.calculateUpdateIntervalInSeconds)(n.En,r),o=Date.now()+(0,S.toMilliSeconds)(a);n.En.serviceManager.maybeCall(s.ServiceName.ManifestCachingService,(function(t){t.cacheHttpResponse(e,i,o),t.cacheParsedManifest(r,i,o)}),null,n.Fn.sourceIdentifier);var u=r.segments,l=!r.endList,c=r.mediaSequence,d=P.PlaylistUtils.getBaseUrl(n.Pn.getBaseUrl(),t);return new b.CodecDetector(n.En).probeCodecs(u,l,d,c)}))},e.prototype.Zn=function(e){var t=e.map((function(e,t){return{bitrate:e.attributes.BANDWIDTH,id:t}}));return this.En.serviceManager.maybeCall(s.ServiceName.AdaptationService,(function(n){var i=n.selectQualityBasedOnBitrateMeasurement(t);return e[i.id]}))},e.prototype.an=function(e,t){var n=this,i=new c.DefaultContentLoader(this.En,{requestType:p.HttpRequestType.MANIFEST_HLS_VARIANT,onFailure:this.mn});return this.bn(i,e).then((function(t){return n.Yn(t,e)})).then((function(n){return(0,A.updateMissingCodecsForPlaylists)(n,t,e)}))},e.prototype.bn=function(e,t){var n=this;return this.ln(e,t).catch((function(i){var r;n.En.logger.debug("Representation failed to load during codec probing ".concat(t));var a=null===(r=n.On)||void 0===r?void 0:r.getNextBackupUriForCodecProbing(t);return a?(n.En.logger.debug("Attempting to continue codec probing using backup stream ".concat(a)),n.bn(e,a)):Promise.reject(i)}))},e.prototype.cn=function(e,t){var n=this,i=t.shift();if(!(null==i?void 0:i.attributes.URI))return Promise.resolve();var r=y.URLHelper.getAbsoluteUrl(i.attributes.URI,this.Pn.getBaseUrl());return this.an(r,e).then((function(){return n.cn(e,t)}))},e.prototype.dn=function(e,t){if(0===t.length)return Promise.resolve();var n=this.Zn(t),i=y.URLHelper.getAbsoluteUrl(n.uri,this.Pn.getBaseUrl());return this.an(i,e)},e.prototype.en=function(e){var t,n=this;void 0===this.Gn&&(this.Gn=e),this.Pn.onMasterPlaylistAvailable(e);var i=this.Pn.getAllVariantRepresentions();i.forEach((function(e){n.Jn[e._id]=n.on(p.HttpRequestType.MANIFEST_HLS_VARIANT)})),null===(t=this.On)||void 0===t||t.populateBackupStreamsMap(i)},e.prototype.fn=function(e,t){var n=this;if(this.Kn)return Promise.reject(T.REPRESENTATION_UPDATE_CANCEL);var i=e.url,u=e.body;if(!u)return Promise.reject(new o.PlayerError(a.ErrorCode.SOURCE_MANIFEST_INVALID,void 0,"Cannot parse the playlist: the body of the response is empty."));var l=Date.now(),c={url:i,manifestText:u};return D(this.En,this.Fn,c).then((function(c){var d,f;c.uri=(0,y.removeQueryParameters)(i,Object.values(r)),c.requestTimestamp=l;var p=M.M3u8Validator.checkForError(c);if(p)return Promise.reject(new o.PlayerError(a.ErrorCode.SOURCE_MANIFEST_INVALID,{M3u8ValidatorError:p},"The parsed media playlist is invalid: ".concat(p)));c.start=null!==(d=c.start)&&void 0!==d?d:n.Gn.start;var g=t._mimeType;n.Hn[g]=(0,A.createDiscontinuitySequences)(c,null!==(f=n.Hn[g])&&void 0!==f?f:[]);var m=n.gn(n.Hn[g],Boolean(c.endList));c.segments=m.flatMap((function(e){return e.segments}));var T=n.Pn.onMediaLoaded(u,t,c);c.endList&&n.En.serviceManager.maybeCall(s.ServiceName.ManifestCachingService,(function(t){t.cacheHttpResponse(e,i),t.cacheParsedManifest(c,i)}),null,n.Fn.sourceIdentifier);var E=(0,S.toSeconds)(Date.now()-l);return n.En.store.dispatch((0,h.addMetricsValue)("default",v.MetricType.ProcessingTime,E)),n.En.logger.insane("Parsed playlist in: ".concat(null==E?void 0:E.toFixed(2))),T})).catch((function(e){if(e instanceof o.PlayerError)return Promise.reject(e);var t="Failed to parse the media playlist",n=e instanceof Error?e.message:t;return Promise.reject(new o.PlayerError(a.ErrorCode.SOURCE_MANIFEST_INVALID,{errorMessage:n},t))}))},e.prototype.gn=function(e,t){return e.filter((function(n,i){var r=!t&&i===e.length-1,a=n.segments.reduce((function(e,t){return e+t.duration}),0);return!!(0===i&&a>0||r)||a>0}))},e.prototype.stop=function(){var e=this;this.Mn.forEach((function(t){return e.En.eventHandler.off(l.PlayerEvent.Play,t)})),this.Nn.forEach((function(t){return e.En.eventHandler.off(l.PlayerEvent.Paused,t)})),this.Mn=[],this.Nn=[],this.hn(),this.Kn=!0},e.prototype.hn=function(){var e=this;this.In.cancel(),Object.keys(this.Jn).forEach((function(t){e.Jn[t].dispose(),delete e.Jn[t]}))},e.prototype.stopRepresentationUpdate=function(e){var t,n=this.Jn[e._id];return(null==n?void 0:n.isLoading())?(this.En.logger.debug("M3u8Loader: stopping ongoing representation update (".concat(e.Uri,")")),n.cancel(),(null!==(t=n.getResponse())&&void 0!==t?t:Promise.resolve()).catch((function(){})).then((function(){}))):Promise.resolve()},e.prototype.jn=function(e,t){var n,i={},a=(0,P.getLastMediaSequenceAndPartIndex)(e);return(0,I.isPlayingLowLatencyHls)(this.En)&&(0,P.canMakeBlockingPlaylistReload)(e,this.En.settings)&&a&&(i[r.MediaSequenceNumber]=String(a.mediaSequence),i[r.PartIndex]=String(a.partIndex+1)),Boolean(null===(n=this.En.config.live)||void 0===n?void 0:n.incrementalManifestUpdates)&&(0,P.canPerformDeltaUpdate)(e)&&(i[r.Skip]=(0,P.isDeltaUpdateV2Supported)(e)?"v2":"YES"),y.URLHelper.appendQueryParametersToUrl(t,i)},e.prototype.kn=function(e,t){var n,i=this;return this.Kn||(null==e?void 0:e.message)===d.RequestError.Canceled?Promise.reject(T.REPRESENTATION_UPDATE_CANCEL):(this.En.logger.debug("M3u8Loader: updateRepresentation failed (".concat(t.Uri,")"),null!==(n=null==e?void 0:e.message)&&void 0!==n?n:e),this.switchToBackupStream(t).then((function(e){var t;return e[0]||Promise.reject(null!==(t=i.Ln)&&void 0!==t?t:d.RequestError.Failed)})).catch((function(t){return i.Ln===d.RequestError.TimedOut?Promise.reject(d.RequestError.TimedOut):Object.values(R.BackupStreamErrors).includes(t)&&e instanceof o.PlayerError?Promise.reject(e):Promise.reject(t===T.REPRESENTATION_UPDATE_CANCEL?t:d.RequestError.Failed)})))},e.prototype.switchToBackupStream=function(e,t){return this.On?this.On.switchToBackupStream(e,t):Promise.reject(R.BackupStreamErrors.NO_BACKUP_STREAMS)},e.prototype.isSwitchingToBackupStreams=function(){var e,t;return null!==(t=null===(e=this.On)||void 0===e?void 0:e.isCurrentlySwitchingToBackupStreams())&&void 0!==t&&t},e.prototype.ln=function(e,t){var n;if(!t){var i=new o.PlayerError(a.ErrorCode.SOURCE_INVALID,void 0,"Cannot load the playlist: no URL was provided.");return this.En.eventHandler.fireError(i),Promise.reject(i)}var r=this.En.serviceManager.maybeCall(s.ServiceName.ManifestCachingService,(function(e){return e.getHttpResponse(t)}),null,this.Fn.sourceIdentifier);if(r)return Promise.resolve(r);var u=null===(n=this.Fn.source.options)||void 0===n?void 0:n.manifestWithCredentials;return e.load(t,p.HttpRequestMethod.GET,null,null,null,u)},e.prototype.nn=function(){return this.En.serviceManager.maybeCall(s.ServiceName.ManifestService,(function(e){return e.isLive()}),!1,this.En.sourceContext.sourceIdentifier)},e.prototype.on=function(e){var t,n,i=this,r=!0===(null===(n=null===(t=this.En)||void 0===t?void 0:t.settings)||void 0===n?void 0:n.INFINITE_RETRIES_FOR_LIVE),a=this.nn();return new c.DefaultContentLoader(this.En,{onSuccess:function(e,t){var n,r;i.Ln=null,(0,f.isDownloadTimeInformationValid)(e)&&(i.En.logger.debug("Downloaded playlist in: ".concat(null===(n=e.elapsedTime)||void 0===n?void 0:n.toFixed(2),", TTFB: ").concat(null===(r=e.timeToFirstByte)||void 0===r?void 0:r.toFixed(2))),i.En.store.dispatch((0,h.addMetricsValue)("default",v.MetricType.DownloadInformation,{bytes:e.length,time:e.elapsedTime,timeToFirstByte:e.timeToFirstByte})))},onFailure:this.mn,maxRetries:this.En.settings.MAX_MPD_RETRIES,requestType:e,resetRetriesWhenOffline:a&&r})},e.prototype.pn=function(e){if(this.Ln===d.RequestError.TimedOut)return new o.PlayerError(a.ErrorCode.NETWORK_MANIFEST_DOWNLOAD_TIMEOUT,L(e),"Failed to load HLS playlist: the request timed out.",this.Fn.sourceIdentifier);var t=(null==e?void 0:e.status)===XMLHttpRequest.UNSENT?"Failed to load the HLS playlist due to CORS restrictions or because the client is offline.":"Failed to load HLS playlist: ".concat(null==e?void 0:e.status," ").concat(null==e?void 0:e.statusText,".");return new o.PlayerError(a.ErrorCode.SOURCE_COULD_NOT_LOAD_MANIFEST,L(e),t,this.Fn.sourceIdentifier)},e.prototype.dispose=function(){var e,t=this;this.stop(),this.Pn=(0,u.dispose)(this.Pn),this.Gn=null,this.Ln=null,this.In.dispose(),null===(e=this.On)||void 0===e||e.dispose(),Object.keys(this.Jn).forEach((function(e){return t.Jn[e].dispose()})),this.Jn=null},e}();function L(e){return{url:e.url,statusCode:e.status,statusText:e.statusText}}t.M3u8Loader=C},15617:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HlsBackupStreamsHandler=t.BackupStreamErrors=void 0;var r,a=n(80813),o=n(3714),s=n(43446),u=n(15971),l=n(85434),c=n(15014),d=n(14302),f=n(59707),p=n(62198),g=n(90919),h=n(18146),v=n(73315);!function(e){e.ALL_PENALIZED="ALL_PENALIZED",e.LOADING_FAILED="LOADING_FAILED",e.NO_BACKUP_STREAMS="NO_BACKUP_STREAMS"}(r||(t.BackupStreamErrors=r={}));var m=function(){function e(e,t,n){this.context=e,this.backupStreamInfo=t,this.updateRepresentation=n,this.sN={},this.tN={},this.uN=!1,this.vN=!1,this.wN=e.serviceManager.get(a.ServiceName.ManifestService,e.sourceContext.sourceIdentifier),this.xN=this.context.serviceManager.get(a.ServiceName.ManifestUpdateSchedulingService,this.context.sourceContext.sourceIdentifier)}return e.prototype.populateBackupStreamsMap=function(e){var t;this.sN=function(e,t){var n,i=((n={})[l.MimeType.AudioMp4]={},n[l.MimeType.VideoMp4]={},n);return t.forEach((function(t){var n,r=t._mimeType===l.MimeType.AudioMp4?null!==(n=t._name)&&void 0!==n?n:l.MimeType.AudioMp4:l.MimeType.VideoMp4,a=e.find((function(e){return Object.values(e).find((function(e){return e[r]===t.Uri}))}));a&&(i[t._mimeType][t._id]=T(a,r))})),i}(this.backupStreamInfo,e),null===(t=(0,u.getSourceStore)(this.context))||void 0===t||t.dispatch((0,v.setContentLocationId)(String(0)))},e.prototype.isCurrentlySwitchingToBackupStreams=function(){return this.vN},e.prototype.signalLoadingFinished=function(){this.uN=!0},e.prototype.switchToBackupStream=function(e,t){var n,i,a=this,s=null!==(i=null===(n=this.sN[e._mimeType])||void 0===n?void 0:n[e._id])&&void 0!==i?i:{};if(Object.keys(s).length<=1)return Promise.reject(r.NO_BACKUP_STREAMS);var l=this.RO(e._mimeType),c=(null==l?void 0:l._id)===e._id&&(null==l?void 0:l.Uri)!==e.Uri,f=function(e,t){var n,i;if(!t)return!0;var r=null===(i=null===(n=e.SegmentList)||void 0===n?void 0:n[0])||void 0===i?void 0:i.SegmentURL;return!!r&&-1!==(0,g.findSegmentUrlIndexWithinSegmentList)(t,r)}(e,t);if(c||!f)return this.context.logger.debug("Ignoring outdated failover request for ".concat(e._mimeType," rep ").concat(e._id),{hasPlaylistUriChanged:c,isSegmentInPlaylist:f}),Promise.resolve([l]);var p=y(s,e.Uri);if(void 0===p)return this.context.logger.debug("Could not find the failing rep in the current list of backup streams.",{id:e._id,uri:e.Uri,backupStreams:s}),Promise.reject(r.NO_BACKUP_STREAMS);this.yN(p),this.zN();var h=this.QO(Object.keys(s),p);return void 0===h?(this.context.logger.debug("No other backup stream is available: all penalized."),Promise.reject(r.ALL_PENALIZED)):(this.context.logger.debug("Starting failover from stream ".concat(p," to ").concat(h)),this.KO(e,p,h).then((function(e){var t,n,i,r=y(s,null!==(n=null===(t=e[0])||void 0===t?void 0:t.Uri)&&void 0!==n?n:"");return a.context.logger.debug("Successfully completed failover to stream index ".concat(r)),void 0!==r&&(null===(i=(0,u.getSourceStore)(a.context))||void 0===i||i.dispatch((0,v.setContentLocationId)(String(r))),a.context.eventHandler.dispatchEvent(o.PlayerEvent.ContentLocationChanged,{sourceLocationId:p,targetLocationId:r,reason:o.ContentLocationChangedReason.Failover})),e})).catch((function(e){return e===d.REPRESENTATION_UPDATE_CANCEL?Promise.reject(e):(a.context.logger.debug("Failover from stream ".concat(p," to ").concat(h," failed")),Promise.reject(r.LOADING_FAILED))})))},e.prototype.yN=function(e){this.context.logger.debug("Penalizing stream ".concat(e," for ").concat(this.context.settings.HLS_BACKUP_STREAM_PENALTY_DURATION,"s")),this.tN[e]=s.TimingUtil.getHiResTimestamp()},e.prototype.zN=function(){var e=this,t=s.TimingUtil.getHiResTimestamp();Object.keys(this.tN).forEach((function(n){var i=e.tN[n];t-i>=e.context.settings.HLS_BACKUP_STREAM_PENALTY_DURATION&&(e.context.logger.debug("Depenalizing stream ".concat(n)),delete e.tN[n])}))},e.prototype.KO=function(e,t,n){var i=this,r=[e],a=e._mimeType===l.MimeType.AudioMp4?this.RO(l.MimeType.VideoMp4):this.RO(l.MimeType.AudioMp4);a&&this.uN&&r.push(a);var o=r.map((function(e){return i.LO(e,n).catch((function(n){var r;return n!==d.REPRESENTATION_UPDATE_CANCEL&&(i.context.logger.debug("Failed to rotate URL for rep ".concat(e._id,": ").concat(null!==(r=null==n?void 0:n.message)&&void 0!==r?r:n)),i.MO(e,t)),Promise.reject(n)}))}));return this.vN=!0,Promise.all(o).finally((function(){return i.vN=!1}))},e.prototype.LO=function(e,t){var n=this,i=(0,u.getSourceStore)(this.context);if(!i)return Promise.resolve(e);this.PO(e,t,i);var r=(0,p.getManifest)(i.getState());if(!r)return Promise.resolve(e);var a=e._internalId,o=(0,c.findRepresentation)(r,a);return e.Uri===(null==o?void 0:o.Uri)?(this.context.logger.debug("Current ".concat(e._mimeType," rep ").concat(e._id," does not need update")),Promise.resolve(e)):(this.context.logger.debug("Rotating URL for rep ".concat(e._id," from ").concat(e.Uri," to ").concat(o.Uri)),this.NO(e).then((function(){return n.updateRepresentation(o)})).then((function(e){return n.OO(e),e})))},e.prototype.MO=function(e,t){var n=(0,u.getSourceStore)(this.context);n&&(this.PO(e,t,n),this.context.logger.debug("Restoring URL for rep ".concat(e._id," to ").concat(e.Uri)),this.OO(e))},e.prototype.NO=function(e){var t;return(null===(t=this.wN)||void 0===t?void 0:t.isLive())&&this.xN?this.xN.stopRepresentationUpdates(e):Promise.resolve()},e.prototype.OO=function(e){var t,n;(null===(t=this.wN)||void 0===t?void 0:t.isLive())&&(null===(n=this.xN)||void 0===n||n.scheduleRepresentationUpdate(e))},e.prototype.PO=function(e,t,n){var r,a=this;null===(r=this.wN)||void 0===r||r.getAllRepresentations().filter((function(t){return t._mimeType===e._mimeType})).forEach((function(r){var o,s,u,l,c=null!==(s=null===(o=a.sN[r._mimeType])||void 0===o?void 0:o[r._id])&&void 0!==s?s:{},d=null!==(u=r._name)&&void 0!==u?u:r._mimeType,p=null===(l=c[t])||void 0===l?void 0:l[d];if(p&&r.Uri!==p){var g=i(i({},r),{Uri:p,BaseURL:[{url:S(p,n.getState())}],SegmentList:r.SegmentList?[i(i({},r.SegmentList[0]),{SegmentURL:[]})]:r.SegmentList,_requestTimestamp:r._id!==e._id?0:r._requestTimestamp});n.dispatch((0,f.updateRepresentationAction)(g))}}))},e.prototype.QO=function(e,t){for(var n=Number(t)||0,i=1;i<=e.length;i++){var r=(n+i)%e.length;if(void 0===this.tN[r])return String(r)}},e.prototype.RO=function(e){var t,n,i=this.context.serviceManager.get(a.ServiceName.AdaptationService),r=null!==(t=null==i?void 0:i.getCurrentRepresentationId(e))&&void 0!==t?t:void 0;return null===(n=this.wN)||void 0===n?void 0:n.getRepresentationById(r)},e.prototype.getNextBackupUriForCodecProbing=function(e){var t,n,i,r,a,o=function(t){return Object.values(t).includes(e)},s=null!==(t=this.backupStreamInfo.find((function(e){return Object.values(e).some(o)})))&&void 0!==t?t:{},u=null!==(n=Object.keys(s).find((function(e){return o(s[e])})))&&void 0!==n?n:"",l=null!==(i=s[u])&&void 0!==i?i:{},c=null!==(r=Object.keys(l).find((function(t){return l[t]===e})))&&void 0!==r?r:"";return null===(a=T(s,c)[Number(u)+1])||void 0===a?void 0:a[c]},e.prototype.dispose=function(){this.tN={}},e}();function S(e,t){var n,i,r,a,o=t&&null!==(a=null===(r=null===(i=null===(n=(0,p.getManifest)(t))||void 0===n?void 0:n.BaseURL)||void 0===i?void 0:i[0])||void 0===r?void 0:r.url)&&void 0!==a?a:"";return h.PlaylistUtils.getBaseUrl(o,e)}function y(e,t){return Object.keys(e).find((function(n){return Object.values(e[n]).includes(t)}))}function T(e,t){var n={},i=[];for(var r in e){var a=e[r][t];i.includes(a)||(i.push(a),n[r]=e[r])}return n}t.HlsBackupStreamsHandler=m},16661:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CodecDetector=void 0,t.extractCodecFromTsSegment=p,t.extractCodecFromMp4Segment=g,t.mergeSegmentCodecs=h,t.isFmp4Segment=v;var i=n(66790),r=n(3336),a=n(4129),o=n(74853),s=n(58313),u=n(88052),l=n(62756),c=n(95880),d=n(18146),f=function(){function e(e){this.oN=e,this.pN=new a.DefaultContentLoader(this.oN)}return e.prototype.qN=function(e){return this.oN.segmentPrefetchingService&&(this.oN.segmentPrefetchingService.hasPrefetchedSegment(e)?this.oN.segmentPrefetchingService.getPrefetchedSegment(e):this.oN.segmentPrefetchingService.fetch(e))||Promise.reject()},e.prototype.probeCodecs=function(e,t,n,a,o){var u=this;void 0===o&&(o=t?e.length-1:0);var l=e.slice(),c=t?l.pop():l.shift();if(!c)return Promise.reject(new Error("Could not load any segment"));var f,p=c.init,g=void 0!==p,h=(0,s.extractOrigin)(n),v=s.URLHelper.buildAbsoluteUrl(n,h,g?p.url:c.uri),m=g?p.keys:c.keys,S=function(e,t,n,i){for(var r,a=0,o=e;a<o.length;a++){var s=o[a];r=(0,d.generateSegmentEncryptionInfo)(s,t,n,i)}return r}(null!=m?m:[],n,h,a+o);(null==S?void 0:S.method)===i.HlsEncryptionMethod.AES_128&&(f=S);var y=function(e,t,n){return{url:e,key:n,byteRange:(0,d.parseSegmentByteRange)(t.byterange),mimeType:"unknown/mp4",internalRepresentationId:null,isInitSegment:Boolean(t.init),preventDownloadCanceling:!0}}(v,c,f);return this.qN(y).then((function(e){return u.rN(e)})).catch((function(e){if(e instanceof r.PlayerError)return Promise.reject(e);u.oN.logger.debug("Codec probing from segment failed",e);var i=t?o-1:o+1;return u.probeCodecs(l,t,n,a,i)})).then((function(e){return u.oN.logger.debug("Probed codec is",e),e}))},e.prototype.rN=function(e){return v(e)?g(e):p(e,this.oN)},e}();function p(e,t){if(!u.ModuleManager.has(l.ModuleName.ContainerTS))return Promise.reject(new c.PlayerModuleMissingError(l.ModuleName.ContainerTS));var n=function(e){return new(u.ModuleManager.get(l.ModuleName.ContainerTS).WebWorkerTransmuxer)(e,!1)}(t);return n.transmuxSegment(e).then((function(t){var n=h(t.transmuxedSegments);if(!n)throw"couldn't detect codec for ".concat(e.getMimeType());return n})).finally((function(){n.dispose()}))}function g(e){if(!u.ModuleManager.has(l.ModuleName.ContainerMP4))return Promise.reject(new c.PlayerModuleMissingError(l.ModuleName.ContainerMP4));var t=u.ModuleManager.get(l.ModuleName.ContainerMP4).getCodecFromSegment(e);return t?Promise.resolve(t):Promise.reject("couldn't detect codec for ".concat(e.getMimeType()))}function h(e){for(var t="",n=0,i=e;n<i.length;n++){var r=i[n];if(!r.getCodec())return null;t+=(""===t?"":",")+r.getCodec()}return t}function v(e){for(var t=e.getData(),n=new DataView(t,0,t.byteLength),i=[],r=0;r+8<n.byteLength;){var a=n.getUint32(r);if(0===a)break;var s=o.ArrayHelper.extractAsciiString(n,r+4,4);i.push(s),r+=a}return e.isInit()?["ftyp","moov"].every((function(e){return i.includes(e)})):["moof","mdat"].every((function(e){return i.includes(e)}))}t.CodecDetector=f},17051:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.M3u8RepresentationFactory=void 0;var i=n(66790),r=n(44468),a=n(34047),o=n(68922),s=n(58313),u=n(92778),l=n(18146),c=function(){function e(e,t){this.Fbb=e,this.Gbb=t}return e.prototype.create=function(e,t,n,r,a){if(void 0===a&&(a=!0),!e)return null;var o=this.Hbb(e,r);if(t===i.RepresentationType.AUDIO)o=this.Jbb(e,o,n,r);else if(t===i.RepresentationType.VIDEO)o=this.Ibb(e,o,n,r,a);else{if(t!==i.RepresentationType.SUBTITLE)return null;o=this.Kbb(e,o,n,r)}var s=this.Lbb(o);return s&&(o._label=s),o},e.prototype.Hbb=function(e,t){var n=e.uri||e.URI;n&&!s.URLHelper.isUrlAbsolute(n)&&(n=s.URLHelper.concatBaseUrlWithPartial(t,n));var i={_id:"",_mimeType:"",_bandwidth:0,_codecs:"",_hls:{requestTimestamp:0},BaseURL:null,SegmentList:[{SegmentURL:[],entries:[],totalDuration:0}],Uri:n};return e.NAME&&(i._label=e.NAME),i},e.prototype.Ibb=function(e,t,n,i,r){var o=t;if(o._mimeType="video/"+n,o._width=0,o._height=0,o.BaseURL=[{url:l.PlaylistUtils.getBaseUrl(i,e.uri)}],o._bandwidth=e.attributes["AVERAGE-BANDWIDTH"]||e.attributes.BANDWIDTH,o._bandwidth||(o._bandwidth=this.Fbb.settings.MIN_SELECTABLE_VIDEO_BITRATE),o._bandwidth=Number(o._bandwidth),e.attributes.CODECS){var s=a.CodecStringHelper.getExtractedCodecStrings(e.attributes.CODECS);a.CodecStringHelper.hasOldAvc1CodecFormat(s.video)&&(s.video=a.CodecStringHelper.convertAvc1ToAvcotiCodecFormat(s.video)),r?s.video&&s.audio?o._codecs=s.video+","+s.audio:s.video&&!s.audio?o._codecs=s.video:!s.video&&s.audio&&(o._codecs=s.audio):o._codecs=s.video}return e.attributes["FRAME-RATE"]&&(o._frameRate=parseFloat(e.attributes["FRAME-RATE"])),e.attributes.RESOLUTION&&(o._width=e.attributes.RESOLUTION.width,o._height=e.attributes.RESOLUTION.height,o._id+=e.attributes.RESOLUTION.height+"_"),o._id+=e.attributes.BANDWIDTH,o},e.prototype.Jbb=function(e,t,n,i){var r,a,o,s=t;if(s._id=e.NAME+" "+e["GROUP-ID"]||"",s._mimeType="audio/"+n,s._codecs=e.CODECS||(null===(r=e.attributes)||void 0===r?void 0:r.CODECS),s._name=e.NAME||"",s._groupId=e["GROUP-ID"]||"",s._label=s._name+" "+s._groupId,s._bandwidth=null!==(o=null!==(a=e["AVERAGE-BANDWIDTH"])&&void 0!==a?a:e.BANDWIDTH)&&void 0!==o?o:0,s.BaseURL=[{url:l.PlaylistUtils.getBaseUrl(i,e.URI||e.uri)}],e.CHANNELS){var c=e.CHANNELS.split("/")[0];s.AudioChannelConfiguration=[{_schemeIdUri:u.DashSchemeUri.AudioChannelConfig,_value:c}]}return s},e.prototype.Kbb=function(e,t,n,i){var r=t;return r._id=e.NAME,r._mimeType="application/"+n,r._codecs="wvtt",r._name=e.NAME||"",r.BaseURL=[{url:l.PlaylistUtils.getBaseUrl(i,e.URI)}],r._hls.isForced="YES"===e.FORCED,r},e.prototype.Lbb=function(e){var t={id:e._id,mimeType:e._mimeType,width:e._width,height:e._height,bitrate:e._bandwidth};return(0,o.applyLabeling)({source:this.Gbb.source,context:this.Fbb,streamType:r.StreamType.Hls,labelingType:o.LabelingType.Qualities},t)},e}();t.M3u8RepresentationFactory=c},18146:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlaylistUtils=t.isMediaPlaylist=t.isMasterPlaylist=void 0,t.calculateUpdateIntervalInSeconds=function(e,t){if(!d.isLive(t))return 1/0;var n=t.segments[t.segments.length-1];if(void 0!==n){if((0,l.isPlayingLowLatencyHls)(e)){var i=function(e,t){var n,i,r=t.parts;return r&&r.length>0?r[r.length-1].duration:null!==(i=null===(n=e.partInfo)||void 0===n?void 0:n.targetDuration)&&void 0!==i?i:void 0}(t,n);if(void 0!==i)return i}return Math.max(e.settings.MINIMUM_ALLOWED_UPDATE_PERIOD,n.duration)}return e.settings.MINIMUM_ALLOWED_UPDATE_PERIOD},t.parseSegmentByteRange=function(e){var t,n;if(e)return{start:null!==(t=e.offset)&&void 0!==t?t:0,end:(null!==(n=e.offset)&&void 0!==n?n:0)+e.length-1}},t.generateSegmentEncryptionInfo=function(e,t,n,o){if(e.method===r.HlsEncryptionMethod.NONE)return e;var s=i(i({},e),{uri:u.URLHelper.buildAbsoluteUrl(t,n,e.uri)});return s.iv=s.iv?(0,a.forceReallocation)(s.iv):function(e){var t=e.length;return t>=32?e:"00000000000000000000000000000000".substring(0,32-t)+e}(String(o)),s},t.getLastMediaSequenceAndPartIndex=g,t.canMakeBlockingPlaylistReload=function(e,t){var n,i,r=Boolean(null===(i=null===(n=e._hls)||void 0===n?void 0:n.serverControl)||void 0===i?void 0:i.canBlockReload),a=g(e),o=p(e)<=function(e,t){var n,i=null===(n=e._hls)||void 0===n?void 0:n.partTargetDuration;return i?i*t.LL_HLS_MAX_PLAYLIST_AGE_FOR_BLOCKING_REQUEST_IN_PART_TARGET_MULTIPLES:-1}(e,t);return r&&void 0!==a&&o},t.canPerformDeltaUpdate=function(e){var t,n,i=null===(n=null===(t=e._hls)||void 0===t?void 0:t.serverControl)||void 0===n?void 0:n.canSkipUntil;return void 0!==i&&!(p(e)>i/2)},t.isDeltaUpdateV2Supported=function(e){var t,n;return void 0!==(null===(n=null===(t=e._hls)||void 0===t?void 0:t.serverControl)||void 0===n?void 0:n.canSkipUntil)&&!0===e._hls.serverControl.canSkipDateRanges},t.calcNumberOfSegmentsToDrop=function(e,t,n){return 0===e.length?0:0===t.length?e.length:t[0]._mediaSequence-e[0]._mediaSequence-n},t.addNewSegments=function(e,t){if(0!==t.length)if(0!==e.length){var n=e[e.length-1],r=t[t.length-1]._mediaSequence-n._mediaSequence,a=(0,o.findFromEnd)(t,(function(e){return e._mediaSequence===n._mediaSequence})),s=i(i({},n),a);if(h(s),e[e.length-1]=s,0!==r){var u=t.slice(-r);u.forEach(h),function(e,t,n){t.forEach((function(t){n.forEach((function(n){return function(e,t,n){t[e]&&!n[e]&&(n[e]=t[e])}(n,e,t)}))}))}(s,u,["_init","_key"]),void 0!==n._playbackTime&&function(e,t){var n=t;e.forEach((function(e){void 0===e._playbackTime&&(e._playbackTime=n),n=e._playbackTime+e._duration}))}(u,n._playbackTime+n._duration),e.push.apply(e,u)}}else e.push.apply(e,t)},t.isDeltaPlaylist=function(e){return e.skippedSegmentsCount>0};var r=n(66790),a=n(20649),o=n(74853),s=n(89927),u=n(58313),l=n(60729),c=n(93187);t.isMasterPlaylist=function(e){return"playlists"in e},t.isMediaPlaylist=function(e){return!(0,t.isMasterPlaylist)(e)};var d=function(){function e(){}return e.createDiscontinuitySequences=function(e,t){var n=e.segments.filter((function(e){return e.duration>0})),i=this.getStartingDiscontinuity(e,n,t),r={id:i,segments:[],duration:0},a=[r];return n.forEach((function(e,t){void 0!==e.discontinuity&&(i++,0===t?r.id=i:(r={id:i,duration:0,segments:[]},a.push(r))),e.discontinuitySequenceNumber=i,r.segments.push(e),r.duration+=e.duration})),a},e.getStartingDiscontinuity=function(t,n,i){var r=t.discontinuitySequence;return null==r&&(r=0!==i.length&&e.isLive(t)?this.findCurrentDiscontinuitySequenceNumber(n,i):0),r},e.findCurrentDiscontinuitySequenceNumber=function(e,t){for(var n=[],i=0,r=0;r<t.length-1;r++)i+=t[r].segments.length,n.push(i);var a=[];return e.forEach((function(e,t){void 0!==e.discontinuity&&a.push(t)})),0===n.length?t[0]?t[0].id:0:0===a.length?t[t.length-1].id:a.length!==n.length?a.length>n.length?t[0].id:t[1].id:this.findFirstPeriodByIndexTracking(n,a,t)},e.findFirstPeriodByIndexTracking=function(e,t,n){if(e[0]>t[0])return n[0].id;if(e[0]<t[0]){for(var i=e[0]-t[0],r=0,a=0;a<e.length;a++)e[a]+i<t[0]&&r++;return n[r].id}var o=function(){return e.every((function(e,n){return e===t[n]}))};if(o())return n[0].id;for(var s=1;e.length>0;){for(e.shift(),a=0;a<e.length;a++)e[a]--;if(o())break;s++}return n[s].id},e.extrapolateProgramDateTime=function(e){var t=null;if(e.find((function(e,n){return e.dateTime&&(t=n),void 0!==e.dateTime})),null!==t){var n;for(n=t-1;n>=0;n--){var i=e[n+1].dateTime,r=Math.ceil((0,s.toMilliSeconds)(e[n].duration));e[n].dateTime=new Date(i.getTime()-r)}for(n=t+1;n<e.length;n++){var a=e[n-1].dateTime,o=Math.ceil((0,s.toMilliSeconds)(e[n-1].duration));e[n].dateTime=new Date(a.getTime()+o)}}},e.isLive=function(e){return!0!==e.endList},e.getProgramDateTimeFromSegmentUrl=function(e,t){if(e.indexOf("akamaihd.net")>-1){var n=e.match(/segment(\d{9})/);if(n&&2===n.length){var i=parseInt(n[1])*Math.round((0,s.toMilliSeconds)(t));return new Date(i)}}return null},e.correctStartOffsetToBounds=function(e,t){return e>0&&e>t?t:e<0&&Math.abs(e)>t?-t:e},e.getImpreciseStartOffsetFromStartOfPlaylist=function(e){for(var t=e.start.timeOffset,n=0,i=0;i<e.segments.length-1&&t-e.segments[i+1].duration>0;i++){var r=e.segments[i].duration;t-=r,n+=r}return n},e.getImpreciseStartOffsetFromEndOfPlaylist=function(e){for(var t=Math.abs(e.start.timeOffset),n=0,i=e.segments.length-1;i>=0&&f(t,1)>0;i--)t-=e.segments[i].duration,n+=f(e.segments[i].duration,2);return e.totalDuration-n},e.getImpreciseStartOffset=function(t){return t.start.timeOffset>=0?e.getImpreciseStartOffsetFromStartOfPlaylist(t):e.getImpreciseStartOffsetFromEndOfPlaylist(t)},e.getStartOffsetCloseToPlaylistEnd=function(t,n){var i=t.start.timeOffset;return i=(i=e.correctStartOffsetToBounds(i,t.totalDuration))<0?-f(Math.abs(i),2):f(i,2),Math.max(n,i)},e.getStartOffset=function(t){var n=t.start.timeOffset;return(n=e.correctStartOffsetToBounds(n,t.totalDuration))<0&&(n+=t.totalDuration),t.start.precise||(n=e.getImpreciseStartOffset(t)),Number(n.toFixed(2))},e.getBaseUrl=function(e,t){var n=e;return n=u.URLHelper.removeUrlParameters(n),!(t=u.URLHelper.removeLastPathPart(t))||t.indexOf("/")<0?e:u.URLHelper.concatUrlParts(n,t)},e}();function f(e,t){return Math.floor(e*Math.pow(10,t))/Math.pow(10,t)}function p(e){var t;return(null===(t=null==e?void 0:e._hls)||void 0===t?void 0:t.requestTimestamp)?(0,s.toSeconds)(Date.now()-e._hls.requestTimestamp):1/0}function g(e){var t,n,i=null===(t=e.SegmentList)||void 0===t?void 0:t[0].SegmentURL,r=null==i?void 0:i[i.length-1],a=null!==(n=null==r?void 0:r._parts)&&void 0!==n?n:[];if(r&&0!==a.length){if((a=a.filter((function(e){return!e.isPreloadHint}))).length>0)return{mediaSequence:r._mediaSequence,partIndex:a.length-1};var o=null==i?void 0:i[i.length-2];if((null==o?void 0:o._parts)&&0!==o._parts.length)return{mediaSequence:o._mediaSequence,partIndex:o._parts.length-1}}}function h(e){var t;e._media=(0,a.forceReallocation)(e._media),null===(t=e._metadata)||void 0===t||t.forEach((function(e){return(0,c.forceReallocateStringProps)(e)}))}t.PlaylistUtils=d},23512:function(e,t,n){"use strict";var i,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},a=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.HlsReducer=void 0,t.extrapolateSegmentStartTime=function(e,t,n){var i=a([],e,!0);return i[t]=r({},i[t]),i[t].startTime=n,function(e,t){for(var n=t-1;n>=0;n--)e[n]=r({},e[n]),e[n].startTime=e[n+1].startTime-e[n].duration}(i,t),function(e,t){for(var n=t+1;n<e.length;n++)e[n]=r({},e[n]),e[n].startTime=e[n-1].startTime+e[n-1].duration}(i,t),i};var o=n(3793),s=n(45861);t.HlsReducer=(0,o.default)(function(){return{masterPlaylist:{string:""},defaultLanguages:{},discontinuitySequenceTiming:{},presentationTimeOffsets:{},timestampRolloverPositions:{previous:-1,next:-1}}}(),((i={})[s.HlsActionType.SetMasterPlaylistString]=function(e,t){return function(e,t){return e.masterPlaylist.string?e:r(r({},e),{masterPlaylist:{string:t}})}(e,t.payload)},i[s.HlsActionType.SetPlaylistType]=function(e,t){return function(e,t){return r(r({},e),{playlistType:t})}(e,t.payload)},i[s.HlsActionType.SetIsLowLatencyPlaylist]=function(e,t){return function(e,t){return r(r({},e),{isLowLatencyPlaylist:t})}(e,t.payload)},i[s.HlsActionType.SetEndlist]=function(e,t){return function(e,t){return r(r({},e),{endlist:t})}(e,t.payload)},i[s.HlsActionType.SetDefaultLanguages]=function(e,t){return function(e,t){var n={},i={};return t.media.forEach((function(e){var t=Boolean(e.attributes);if(t){var r=e.attributes,a=r.TYPE,o=r.LANGUAGE;Boolean(o)&&null!=o&&(t&&"YES"===e.attributes.DEFAULT&&!n[a]&&(n[a]={name:e.attributes.NAME,language:o}),"YES"===e.attributes.AUTOSELECT&&!i[a]&&(i[a]={name:e.attributes.NAME,language:o}))}})),r(r({},e),{defaultLanguages:r(r({},i),n)})}(e,t.payload)},i[s.HlsActionType.SetCustomTags]=function(e,t){return function(e,t){var n=t;return r(r({},e),{customTags:n.tags})}(e,t.payload)},i[s.HlsActionType.SetDiscoTimings]=function(e,t){return function(e,t){var n,i=t.mimeType,a=t.discoTimings;return r(r({},e),{discontinuitySequenceTiming:r(r({},e.discontinuitySequenceTiming),(n={},n[i]=a,n))})}(e,t.payload)},i[s.HlsActionType.SetPresentationTimeOffset]=function(e,t){return function(e,t){var n,i=t.discoSequenceNumber,a=t.presentationTimeOffset;return r(r({},e),{presentationTimeOffsets:r(r({},e.presentationTimeOffsets),(n={},n[i]=a,n))})}(e,t.payload)},i[s.HlsActionType.SetTimestampRolloverPositions]=function(e,t){return function(e,t){return r(r({},e),{timestampRolloverPositions:t})}(e,t.payload)},i[s.HlsActionType.SetContentLocationId]=function(e,t){return function(e,t){return r(r({},e),{contentLocationId:t.locationId})}(e,t.payload)},i))},30234:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isValidHlsPlaylist=function(e){return(0,l.isMasterPlaylist)(e)&&function(e){return e.playlists.length>0}(e)||(0,l.isMediaPlaylist)(e)&&function(e){return e.segments.length>0}(e)},t.getPeriod=function(e){return(0,o.getManifest)(e.getState()).Period[0]},t.parseHlsManifest=d,t.ensureMasterPlaylist=function(e,t,n){return(0,l.isMasterPlaylist)(t)?Promise.resolve(t):(e.logger.debug("HLS manifest is not a master playlist but a variant. Using master playlist template!"),d(e,["#EXTM3U","#EXT-X-STREAM-INF:PROGRAM-ID=1,BANDWIDTH=0",n].join("\n")).then((function(e){if(!(0,l.isMasterPlaylist)(e))throw new Error("Template is not of type HLS MasterPlaylist");return e})))},t.parsePlaylistInWorker=f,t.createDiscontinuitySequences=function(e,t){var n=l.PlaylistUtils.createDiscontinuitySequences(e,t);return n.forEach((function(e,t){l.PlaylistUtils.extrapolateProgramDateTime(e.segments),e.indexOfFirstSegment=0===t?0:n[t-1].indexOfLastSegment+1,e.indexOfLastSegment=e.indexOfFirstSegment+e.segments.length-1})),n},t.getTracksWithUnknownCodecs=function(e){return{audioTracksWithoutCodecs:e.media.filter((function(t){var n,i=t.attributes;if("AUDIO"!==i.TYPE||void 0===i.URI||void 0!==i.CODECS)return!1;var a=e.playlists.find((function(e){return e.attributes.AUDIO===i["GROUP-ID"]}));if(void 0===a||a.uri===i.URI)return!1;var o=null===(n=a.attributes.CODECS)||void 0===n?void 0:n.split(",");return void 0===o||o.every((function(e){return!r.CodecStringHelper.isAudioCodec(e)}))})),videoTracksWithoutCodecs:e.playlists.filter((function(e){return void 0===e.attributes.CODECS}))}},t.updateMissingCodecsForPlaylists=function(e,t,n){!function(e,t){t.forEach((function(t){return t.attributes.CODECS=function(e,t){var n=Object.keys(r.CodecStringHelper.getExtractedCodecStrings(e)),i=r.CodecStringHelper.getExtractedCodecStrings(t),a=Object.keys(i).filter((function(e){return!n.includes(e)})).map((function(e){return i[e]})).join(",");return a&&0!==a.length?function(e,t){return"string"!=typeof e||0===e.length?t:e+","+t}(e,a):e}(t.attributes.CODECS,e)}))}(e,p(t,n))},t.findAllOrMatchingVariants=p;var i=n(69957),r=n(34047),a=n(58313),o=n(62198),s=n(50962),u=n(37432),l=n(18146),c=n(97123);function d(e,t){var n={parsePartTags:(0,s.isLowLatencyConfigured)(e)&&e.settings.LL_HLS},r=e.settings.HLS_PARSE_MANIFEST_IN_WORKER?f(t,e.logger,n):function(e,t){try{(0,i.trackPerformanceStart)("HlsPlaylist.parsePlaylist");var n=(0,u.parsePlaylist)(e,t);return(0,i.trackPerformanceEnd)("HlsPlaylist.parsePlaylist"),Promise.resolve(n)}catch(e){return Promise.reject(e)}}(t,n);return r.then((function(t){if("playlists"in t){var n=t.playlists.filter((function(t){return t.attributes.BANDWIDTH>=e.settings.HLS_AUDIO_ONLY_THRESHOLD_BITRATE}));t.playlists=n.length?n:t.playlists}return t}))}function f(e,t,n){return c.WebWorkerParser.getInstance(t).parsePlaylist(e,n)}function p(e,t){var n,i=function(e){return e.playlists||[]}(e),r=i.some((function(e){return a.URLHelper.isSubUrl(t,e.uri)})),o=function(e,t){var n=function(e){return e.media||[]}(e);return n.find((function(e){var n;return a.URLHelper.isSubUrl(t,null===(n=e.attributes)||void 0===n?void 0:n.URI)}))}(e,t);if(!r&&o){var s=null===(n=o.attributes)||void 0===n?void 0:n["GROUP-ID"];if(s)return i.filter((function(e){var t,n;return(null===(t=e.attributes)||void 0===t?void 0:t.AUDIO)===s||(null===(n=e.attributes)||void 0===n?void 0:n.VIDEO)===s}))}return i}},36848:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.uniqueRenditions=function(e){var t=[];return e.forEach((function(e){var n=t.findIndex((function(t){return(0,i.compareValues)(e,t,["GROUP-ID","NAME","TYPE"])}));if(-1!==n){var r=t[n];"YES"===e.DEFAULT&&"YES"!==r.DEFAULT&&(t[n]=e)}else t.push(e)})),t};var i=n(19541)},37432:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parsePlaylist=function(e,t){void 0===t&&(t={});var n=-1===e.indexOf("#EXTINF")?i.Master:i.Media,d=e.replace(u,"\n").trim().split(/\n+/m),f=(0,r.removeTrailingWhitespaces)(d[0]);if(!l.test(f))throw new Error("Playlist parsing failed: missing #EXTM3U tag");if(n===i.Media)return(0,o.parseVariant)(d,t);for(var p,g=[],h=[],v=[],m=1,S=!0,y=!1,T=!0,E=0;E<d.length;E++){var _=(0,r.removeTrailingWhitespaces)(d[E]),O=d[E+1];if((0,r.isCustomTag)(_))c(g,_);else if(T)T=!1;else{var I=(0,a.parseTag)(_);switch(I.name){case"EXT-X-STREAM-INF":v.push((0,s.generateStreamInfTag)(I,(0,r.removeTrailingWhitespaces)(O))),T=!0;break;case"EXT-X-MEDIA":var b=(0,s.generateRendition)(I);h.push(b),g.push(b);break;case"EXT-X-VERSION":m=Number(I.value);break;case"EXT-X-START":p=(0,s.generateStartAttributes)(I),g.push(I);break;case"EXT-X-ALLOW-CACHE":S="YES"===I.value||void 0===I.value;break;case"EXT-X-INDEPENDENT-SEGMENTS":y=!0,g.push(I);break;case"EXT-X-I-FRAME-STREAM-INF":(0,s.generateIFrameStreamInfTag)(I),g.push(I);break;case"EXT-X-SESSION-DATA":default:g.push(I);break;case"EXT-X-SESSION-KEY":(0,s.generateSessionKeyTag)(I),g.push(I)}}}var R={version:m,allowCache:S,independentSegments:y,hasM3u:!0,media:h,playlists:v,tags:g=g.concat(v)};return p&&(R.start=p),R};var i,r=n(73577),a=n(41908),o=n(1945),s=n(5707),u=/\r\n|\r(?=[^\n]|$)/gm,l=/^#EXTM3U($|[ \t\n])/m;function c(e,t){var n=(0,s.generateCustomTag)(t);n&&e.push(n)}!function(e){e.Master="master",e.Media="media"}(i||(i={}))},39297:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TextParser=void 0;var n=/[ \t]+/gm,i=function(){function e(e){this.data=e,this.P6=0}return e.prototype.Q6=function(){return this.P6===this.data.length},e.prototype.skipWhitespace=function(){this.readRegex(n)},e.prototype.readRegex=function(e){var t=this.R6(e);if(!this.Q6()&&void 0!==t&&t.position===this.P6)return this.P6+=t.length,t.results},e.prototype.R6=function(e){e.lastIndex=this.P6;var t=e.exec(this.data);if(null!==t)return{position:t.index,length:t[0].length,results:t}},e}();t.TextParser=i},41908:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseTag=function(e){var t,n=r.exec(e);if(!n)throw new Error("Invalid tag "+e);var s,u=n[1],l=n[2],c={};if(l){var d=new i.TextParser(l),f=void 0,p=d.readRegex(a);for(p&&(s=null!==(t=p[1])&&void 0!==t?t:p[2]);f=d.readRegex(o);){var g=f[1],h=f[2]||f[3];if(g.includes(",")){var v=g.split(","),m=v[0];g=v[1].trim(),c[m]=void 0}c[g]=h,d.skipWhitespace()}}return{name:u,attributes:c,value:s}};var i=n(39297),r=/^#(EXT[^:]*)(?::(.*))?$/,a=/^(?:"([^"]*)"|([^,=]+))(?:,|$)/g,o=/([^=]+)=*(?:"([^"]*)"|([^",]*))(?:,|$)/g},42594:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.createNewMapEntry=s,t.updateMapEntry=function(e,t,n){var a=e.segmentInfos,l=a.findIndex((function(e){return function(e,t){var n=e.url===t.uri,i=e.discontinuitySequenceNumber===t.discontinuitySequenceNumber,r=!e.byteRange&&!t.byterange,a=e.byteRange&&t.byterange&&e.byteRange.start===t.byterange.offset&&e.byteRange.end===t.byterange.offset+t.byterange.length;return n&&i&&(a||r)}(e,t.segments[0])}));if(-1===l)return s(t,n);var c=a.length-l,d=t.segments.length-c;if(0!==l||0!==d){var f=t.segments.slice(-d).map((function(e){return u(e,n)})),p=function(e){var t=e[e.length-1];if(void 0!==t.startTime&&void 0!==t.duration)return t.startTime+t.duration}(a);return null!=p&&(0,o.forwardExtrapolateSegmentStartTime)(f,{index:0,startTime:p}),{qualityInfo:i(i({},e.qualityInfo),{lastUpdateTimestamp:Date.now()}),segmentInfos:r(r([],a.slice(l),!0),f,!0)}}return e};var a=n(23068),o=n(47596);function s(e,t){var n=e.segments.map((function(e){return u(e,t)}));return{qualityInfo:{lastUpdateTimestamp:Date.now()},segmentInfos:n}}function u(e,t){var n,i={url:e.uri,isInitSegment:!1,internalRepresentationId:t._internalId,isDiscontinuityStart:e.discontinuity,discontinuitySequenceNumber:e.discontinuitySequenceNumber,duration:e.duration,startTime:e.startTime,periodId:t._internalId.periodId,key:e.key,metadata:null!==(n=e.metadata)&&void 0!==n?n:[],mimeType:t._mimeType,bitrate:t._bandwidth,codecs:t._codecs};return e.byterange&&(i.byteRange={start:e.byterange.offset,end:e.byterange.offset+e.byterange.length}),e.init&&(i.init=e.init),e.dateTime&&(i.dateTime=e.dateTime),(0,a.isVideoRepresentation)(t)&&(i.height=t._height,i.width=t._width,i.frameRate=t._frameRate),i}},45861:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.HlsActionType=void 0,function(e){e.SetMasterPlaylistString="@instance/hls/setmasterplayliststring",e.SetPlaylistType="@instance/hls/setplaylisttype",e.SetIsLowLatencyPlaylist="@instance/hls/setislowlatencyplaylist",e.SetEndlist="@instance/hls/setendlist",e.SetDefaultLanguages="@instance/hls/setsefaultlanguages",e.SetCustomTags="@instance/hls/setsustomtags",e.SetDiscoTimings="@instance/hls/setdiscotimings",e.SetPresentationTimeOffset="@instance/hls/setpresentationtimeoffset",e.SetTimestampRolloverPositions="@instance/hls/settimestamprolloverpositions",e.SetContentLocationId="@instance/hls/setcontentlocationid"}(n||(t.HlsActionType=n={}))},47596:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.StartTimeExtrapolationDirection=void 0,t.extrapolateStartTime=function(e,t,n){void 0===n&&(n=i.Bidirectional),n===i.Backward?l(e,t):(n===i.Forward||l(e,t),u(e,t))},t.forwardExtrapolateSegmentStartTime=u,t.backwardExtrapolateSegmentStartTime=l,t.getStartTimeExtrapolationReferencePoint=function(e,t,n){var i,a;if(t.endList)return{index:0,startTime:(0,r.getStartTimeOffset)(n)};var u=e.segmentInfos[0];if(null==u?void 0:u.dateTime)return{index:0,startTime:(0,o.toSeconds)(u.dateTime.getTime())};var l=(0,s.getMostRecentlyRefreshedQuality)(n);if(l){var d=c(e,l);if(d)return d}return{index:0,startTime:null!==(a=null===(i=null==l?void 0:l.segmentInfos[0])||void 0===i?void 0:i.startTime)&&void 0!==a?a:(0,o.toSeconds)(t.requestTimestamp)-t.totalDuration}},t.getStartTimeViaDiscontinuityBoundaries=c,t.findDiscontinuityBoundary=d,t.hasDiscontinuityBoundary=f;var i,r=n(77179),a=n(74853),o=n(89927),s=n(72498);function u(e,t){var n=t.index,i=t.startTime;e[n].startTime=i;for(var r=n+1;r<e.length;r++)e[r].startTime=e[r-1].startTime+e[r-1].duration}function l(e,t){var n=t.index,i=t.startTime;e[n].startTime=i;for(var r=n-1;r>=0;r--)e[r].startTime=e[r+1].startTime-e[r].duration}function c(e,t){if(f(e.segmentInfos)&&f(t.segmentInfos)){var n=t.segmentInfos[t.segmentInfos.length-1],i=d(t.segmentInfos,n.discontinuitySequenceNumber),r=t.segmentInfos[i],a=d(e.segmentInfos,r.discontinuitySequenceNumber);if(null!=a)return{index:a,startTime:r.startTime}}}function d(e,t){return f(e)?(0,a.findIndexFromEnd)(e,(function(e){return Boolean(e.isDiscontinuityStart)&&e.discontinuitySequenceNumber===t})):-1}function f(e){if(!e.length)return!1;if(e[0].isDiscontinuityStart)return!0;var t=e[0],n=e[e.length-1];return t.discontinuitySequenceNumber!==n.discontinuitySequenceNumber}!function(e){e.Backward="backward",e.Forward="forward",e.Bidirectional="Bidirectional"}(i||(t.StartTimeExtrapolationDirection=i={}))},52610:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getTimingInfoFromSegmentList=function(e){return e.reduce((function(e,t,n,i){var r=t._discontinuitySequenceNumber,a=t._playbackTime;if(void 0===e.discoTimings[r]){e.discoTimings[r]={startTime:a,endTime:1/0};var o=e.discoTimings[r-1];o&&(o.endTime=a)}return n===i.length-1&&(e.discoTimings[r].endTime=a+t._duration),e.totalDuration+=t._duration,e}),{totalDuration:0,discoTimings:{}})}},56727:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HlsTimelineTracker=void 0;var i=n(80813),r=n(87827),a=n(15971),o=n(93204),s=n(90919),u=n(61895),l=function(){function e(e,t){var n=this;this.Bn=!1,this.km=e,this.pm=-1,this.lm=t,this.mm=this.km.serviceManager.get(i.ServiceName.PlayerStateService),this.nm=(0,o.subscribe)(this.km.store)((function(e){return(0,r.getTargetPlaybackTime)((0,r.getPlayerState)(e))}),(function(){return n.An=!0}),(function(e){return-1!==e}));var s=(0,a.getSourceStore)(this.km);s&&(this.om=(0,o.subscribe)(s)((function(e){return e&&(0,u.getContentLocationId)((0,u.getHlsState)(e))}),(function(){return n.Bn=!0}),(function(e,t){return e!==t})))}return e.prototype.reset=function(){this.pm=-1,this.Bn=!1},e.prototype.isGapVerificationNeeded=function(){return this.Bn&&-1!==this.pm},e.prototype.isSeekTargetVerificationNeeded=function(){return this.An&&-1===this.pm},e.prototype.trackPlaybackTime=function(e){var t,n=null===(t=e.getSegmentInfo())||void 0===t?void 0:t.duration,i=e.getDuration();this.pm=e.getPlaybackTime()+Math.max(i,null!=n?n:i)},e.prototype.checkForTimelineGap=function(e,t,n){var i;if(this.pm>=0)return this.Bn=!1,this.Cn(e,t,n);var r=(null===(i=this.mm)||void 0===i?void 0:i.seekingOrTimeshifting)?this.mm.targetPlaybackTime:-1;return this.An&&r>-1?(this.An=!1,this.Dn(r,e,t,n)):{hasGap:!1}},e.prototype.Cn=function(e,t,n){var i=function(e,t){var n,i=null===(n=e.getSegmentInfo())||void 0===n?void 0:n.startTime,r=e.getPlaybackTime();return void 0===i||Math.abs(r-i)>e.getDuration()+t?r:Math.min(r,i)}(e,this.lm);if(function(e,t,n){return e>=t&&e<=n}(this.pm,i-this.lm,i+e.getDuration()))return{hasGap:!1};var r={hasGap:!1},a=e.getPlaybackTime()-this.pm,o=t.SegmentList?t.SegmentList[0].SegmentURL:[],u=(0,s.findSegmentUrlIndexWithinSegmentList)(e.getSegmentInfo(),o),l=u>=0?u:n,g=l;if(a>0)(h=d(g=f(a,o,l)))||(this.km.logger.debug("Could not handle gap on playlist switch, reached lower boundary of segment list"),g=0),r=c(!0,a,h,g);else if(a<0){var h;(h=d(g=p(a,o,l)))||(this.km.logger.debug("Could not handle gap on playlist switch, reached upper boundary of segment list"),g=o.length),r=c(!0,a,h,g)}return g===l&&r.hasGap&&(this.km.logger.debug("Ignoring gap as calculated new segment index did not change"),r.hasGap=!1),r},e.prototype.Dn=function(e,t,n,i){var r=n.SegmentList?n.SegmentList[0].SegmentURL:[],a=t.getPlaybackTime(),o=t.getPlaybackTime()+t.getDuration();this.km.logger.debug("HLS seek target verification",{seekTarget:e,segmentStartTime:a,segmentEndTime:o});var u,l,g,h=(0,s.findSegmentUrlIndexWithinSegmentList)(t.getSegmentInfo(),r);return h=h>=0?h:i,e<a?((g=d(u=f(l=a-e,r,h)))||(u=0),this.km.logger.debug("Target segment starts too late, corrected segment index from ".concat(h," to ").concat(u)),c(!0,l,g,u)):e>o?((g=d(u=p(l=o-e,r,h)))||(u=r.length),this.km.logger.debug("Target segment ends too early, corrected segment index from ".concat(h," to ").concat(u)),c(!0,l,g,u)):{hasGap:!1}},e.prototype.dispose=function(){var e;null===(e=this.om)||void 0===e||e.call(this),this.nm(),this.Bn=!1,this.An=!1,this.pm=-1},e}();function c(e,t,n,i){return{hasGap:e,gapSizeSec:t,couldHandle:n,correctedIndex:i}}function d(e){return e>=0&&isFinite(e)}function f(e,t,n){for(;e>.001;){if(n<=0)return-1;e-=t[n-1]._duration,n--}return n}function p(e,t,n){for(;e<-.001;)if(e+=t[n]._duration,++n>=t.length)return 1/0;return n}t.HlsTimelineTracker=l},57778:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.HlsParsing=t.M3u8Translator=void 0;var r,a=n(66790),o=n(34047),s=n(79721),u=n(84568),l=n(85434),c=n(89927),d=n(58313),f=n(70850),p=n(88052),g=n(62756),h=n(34795),v=n(47151),m=n(36848),S=n(17051),y=n(18146),T=new RegExp(/^data:text\/plain.*;base64.*,(.+)/),E=function(){function e(e,t){this.o6=0,this.p6=!1,this.O6=(0,u.memoize)((function(e){var t=T.exec(e);return null!==t&&2===t.length?t[1]:null})),this.l6=e,this.m6=t,this.n6=new S.M3u8RepresentationFactory(e,t)}return e.prototype.updateBaseUrl=function(e){this.q6=d.URLHelper.removeLastPathPart(e)},e.prototype.getBaseUrl=function(){var e;return null!==(e=this.q6)&&void 0!==e?e:""},e.prototype.r6=function(e,t){for(var n={},i={_schemeIdUri:"urn:scte:dash:cc:cea-"+t+":2015",_value:""},r=0;r<e.length;r++){var a=e[r]["INSTREAM-ID"];n[a]={lang:e[r].LANGUAGE||e[r].NAME||a,label:e[r].NAME||e[r].LANGUAGE||a},i._value.length>0&&(i._value+=";"),i._value+="708"===t?a.substring(7)+"=lang:":a+"=",i._value+=e[r].LANGUAGE}return{closedCaptionLabel:n,accessibility:i}},e.prototype.s6=function(e){if(!e)return{closedCaptionLabel:null,accessibility:[]};var t=this.r6(e.cea608,"608"),n=this.r6(e.cea708,"708"),i=[],r=null;return t.accessibility._value&&(i.push(t.accessibility),r=t.closedCaptionLabel),n.accessibility._value&&i.push(n.accessibility),{closedCaptionLabel:r,accessibility:i}},e.prototype.t6=function(e,t,n,i,r){for(var o=[],s=1/0,u=0,l=1/0,c=0,d=1/0,f=0,p="video/"+i,g=0,h=e;g<h.length;g++){var m=h[g];if(m.uri){var S=this.n6.create(m,a.RepresentationType.VIDEO,i,this.q6,this.p6);o.push(S),s=Math.min(s,S._height),u=Math.max(u,S._height),l=Math.min(l,S._width),c=Math.max(c,S._width),d=Math.min(d,S._bandwidth),f=Math.max(f,S._bandwidth)}}o.sort((function(e,t){return e._bandwidth-t._bandwidth}));var y={Representation:o,ContentComponent:[{_id:"video",_contentType:"video"}],_id:String(this.o6),_group:null,_mimeType:p,_internalId:new v.AdaptationSetId(n,String(this.o6++)),_minBandwidth:d,_maxBandwidth:f,_minHeight:s,_maxHeight:u,_minWidth:l,_maxWidth:c,isTransmuxingRequired:!0};r&&Object.keys(r).forEach((function(e){r[e].entries.filter((function(e){return!e.URI})).forEach((function(e){y.ContentComponent.push({_id:e.NAME,_contentType:"audio",_lang:e.LANGUAGE})}))}));var T=this.s6(t);T.closedCaptionLabel&&(y.ClosedCaptionLabels=T.closedCaptionLabel),T.accessibility.length>0&&(y.Accessibility=T.accessibility);var E=this.x6(y);return E&&"string"==typeof E&&(y._label=E),y},e.prototype.u6=function(e,t,n,i){for(var r=[],o=0,s=e;o<s.length;o++){var u=s[o];if(u.uri){var l=this.n6.create(u,a.RepresentationType.AUDIO,i,this.q6,this.p6);r.push(l)}}r.sort((function(e,t){return e._bandwidth-t._bandwidth}));var c={Representation:r,_id:String(this.o6),_group:null,_mimeType:"audio/"+i,_internalId:new v.AdaptationSetId(n,String(this.o6++)),_minBandwidth:1/0,_maxBandwidth:0,isTransmuxingRequired:!0},d=this.s6(t);d.closedCaptionLabel&&(c.ClosedCaptionLabels=d.closedCaptionLabel),d.accessibility.length>0&&(c.Accessibility=d.accessibility);var f=this.x6(c);return f&&"string"==typeof f&&(c._label=f),c},e.prototype.v6=function(e,t,n){var i=this,r=this.l6.settings.IGNORE_HLS_AUDIO_GROUPS,o=0,s=[],u=function(t){return{Representation:[],_id:String(i.o6),_internalId:new v.AdaptationSetId(e,String(i.o6++)),_mimeType:"audio/"+n,_minBandwidth:1/0,_maxBandwidth:-1,_lang:t,_group:String(o++),isTransmuxingRequired:!0}};return Object.keys(t).forEach((function(e){var o,l,c,d=t[e],f=d.entries.find((function(e){return e.LANGUAGE&&"und"!==e.LANGUAGE}));f&&(l=f.LANGUAGE),r||(c=u(l));for(var p=(0,m.uniqueRenditions)(d.entries.filter((function(e){return e.URI}))),g=0,h=p;g<h.length;g++){var v=h[g];r&&(c=u(l));var S=i.n6.create(v,a.RepresentationType.AUDIO,n,i.q6,i.p6);c.Representation.push(S),c._minBandwidth=Math.min(c._minBandwidth,S._bandwidth),c._maxBandwidth=Math.max(c._maxBandwidth,S._bandwidth);var y=v.CHARACTERISTICS;if(y&&0===y.indexOf(i.l6.settings.HLS_VR_CHARACTERISTICS_UTI)&&(c.Role=[{_schemeIdUri:i.l6.settings.VR_SCHEME_ID_URI,_value:y.substring(i.l6.settings.HLS_VR_CHARACTERISTICS_UTI.length)}]),!c._label){var T=i.x6(c);T&&"string"==typeof T?c._label=T:S._name?c._label=S._name:c._label=e}r&&c.Representation.length>0&&s.push(c),c.Representation.sort((function(e,t){return e._bandwidth-t._bandwidth}))}!function(e){e.forEach((function(e,t){e._bandwidth=128e3+32e3*t}))}(null!==(o=null==c?void 0:c.Representation)&&void 0!==o?o:[]),!r&&c.Representation.length>0&&s.push(c)})),s},e.prototype.w6=function(e,t,n){var i=this,r=0;return Object.values(t).filter((function(e){return e.URI})).map((function(t){var o={Representation:[],_id:String(i.o6),_internalId:new v.AdaptationSetId(e,String(i.o6++)),_mimeType:"application/mp4",_lang:t.LANGUAGE,_group:""+r++,_isFragmented:!0},s=i.n6.create(t,a.RepresentationType.SUBTITLE,n,i.q6,i.p6);o.Representation.push(s);var u=i.x6(o);return u&&"string"==typeof u?o._label=u:s._name?o._label=s._name:o._label=t.LANGUAGE,o}))},e.prototype.x6=function(e){var t={mimeType:e._mimeType,lang:e._lang};return e._label&&(t.label=e._label),this.y6()(t)},e.prototype.y6=function(){var e,t=this.l6.sourceContext,n=t&&t.source&&t.source.labeling;return(null===(e=null==n?void 0:n.hls)||void 0===e?void 0:e.tracks)?"function"!=typeof n.hls.tracks?this.z6:(0,f.safeUserCallback)((function(){return n.hls.tracks}),this.l6.logger):this.z6},e.prototype.z6=function(){return null},e.prototype.extractBackupStreams=function(e){for(var t,n=[],i=null!==(t=this.q6)&&void 0!==t?t:"",r=e.playlists,a={},o=this.l6.settings.ENABLE_HLS_CONTENT_STEERING,s=b(e.tags.find((function(e){return"EXT-X-CONTENT-STEERING"===e.name})),{},o),u=0;u<r.length;u++){var l={},c=r[u],d=b(c,l,o);this.A6(l,c,e.media,i,d);for(var f=u+1;f<r.length;f++){var p=r[f];if(O(c,p)){var g=b(p,l,o);this.A6(l,p,e.media,i,g);var h=g===s;h&&r.splice(u,1,p),I(a,c.attributes.AUDIO,p.attributes.AUDIO,h),r.splice(f,1),f--}}n.push(l)}return this.l6.settings.IGNORE_HLS_AUDIO_GROUPS||(e.media=e.media.filter((function(e){return!a[e.attributes["GROUP-ID"]]}))),n},e.prototype.A6=function(e,t,n,i,r){this.l6.settings.DISABLE_HLS_BACKUP_STREAM_FAILOVER||(e[r]=function(e,t,n){var i={};return i[l.MimeType.VideoMp4]=d.URLHelper.getAbsoluteUrl(e.uri,n),e.attributes.AUDIO&&function(e,t,n){return e.filter((function(e){return _(e.attributes)&&e.attributes["GROUP-ID"]===t&&e.attributes.URI})).map((function(e){var t;return{id:e.attributes.NAME,url:d.URLHelper.getAbsoluteUrl(null!==(t=e.attributes.URI)&&void 0!==t?t:"",n)}}))}(t,e.attributes.AUDIO,n).forEach((function(e){i[e.id]=e.url})),i}(t,n,i))},e.prototype.createDashManifestSkeleton=function(e){var t=e;return this.B6(t),this.E6(t),this.p6=this.L6(t),{BaseURL:[{url:this.q6}],Period:[this.K6(t,s.DEFAULT_PERIOD_ID)],_hasIndependentSegments:e.independentSegments,_isHls:!0,isInitialized:!1}},e.prototype.B6=function(e){var t=this;e.playlists.forEach((function(e){if(e.attributes.CODECS){var n=o.CodecStringHelper.getExtractedCodecStrings(e.attributes.CODECS);if(!n.video&&n.unknown&&(e.attributes.RESOLUTION||e.attributes["FRAME-RATE"])){var i=o.CodecStringHelper.extractCodec(n.unknown);t.l6.logger.debug("Assuming unknown codec ".concat(i," is video")),o.CodecStringHelper.addCodec("video",i)}}}))},e.prototype.C6=function(e,t){return o.CodecStringHelper.getMimeTypeForCodecString(e.attributes.CODECS)===t},e.prototype.D6=function(e){var t=this,n=e.playlists.some((function(e){return t.C6(e,"video")})),i=e.playlists.some((function(e){return t.C6(e,"audio")}));n&&i&&(e.playlists=e.playlists.filter((function(e){return t.C6(e,"video")})))},e.prototype.E6=function(e){this.D6(e)},e.prototype.F6=function(e,t){void 0===t&&(t=!1);var n=o.CodecStringHelper.getExtractedCodecStrings(e.attributes.CODECS);return n.video?(o.CodecStringHelper.hasOldAvc1CodecFormat(n.video)&&(n.video=o.CodecStringHelper.convertAvc1ToAvcotiCodecFormat(n.video)),t?n.video:n.video.split(".")[0]):null},e.prototype.G6=function(e,t){void 0===t&&(t=!1);var n=o.CodecStringHelper.getExtractedCodecStrings(e.attributes.CODECS);return n.audio?t?n.audio:n.audio.split(".")[0]:null},e.prototype.H6=function(e){var t=this;return e.map((function(e){return t.F6(e)})).filter((function(e,t,n){return e&&n.indexOf(e)===t}))},e.prototype.I6=function(e){var t=this;return e.map((function(e){return t.G6(e)})).filter((function(e,t,n){return e&&n.indexOf(e)===t}))},e.prototype.J6=function(e){var t=this.H6(e),n=this.I6(e);if(0===t.length&&0===n.length)return{unknown:e};if(0===t.length){var i={};return n.forEach((function(t){i[t]=e.filter((function(e){var n;return null===(n=e.attributes.CODECS)||void 0===n?void 0:n.includes(t)}))})),i}var r={};return t.forEach((function(t){r[t]=e.filter((function(e){var n;return null===(n=e.attributes.CODECS)||void 0===n?void 0:n.includes(t)}))})),r},e.prototype.K6=function(t,n){var i=this,a={_id:n,_duration:"PT0S",duration:0,AdaptationSet:[]},s=r.extractMediaRenditions(t,this.l6.settings.IGNORE_HLS_AUDIO_GROUPS,(function(e){if(null!=e.attributes.CODECS){var t=function(e){return e.split(",").map((function(e){return o.CodecStringHelper.hasOldAvc1CodecFormat(e)?o.CodecStringHelper.convertAvc1ToAvcotiCodecFormat(e):e})).join(",")}(e.attributes.CODECS),n=o.CodecStringHelper.getExtractedCodecStrings(t).video;return!!n&&i.l6.renderer.isMediaTypeSupported("video/mp4",n)}return!0})),u=this.J6(t.playlists),l=Object.keys(u),c=l.filter((function(e){return o.CodecStringHelper.isVideoCodec(e)})).map((function(e){return i.t6(u[e],s.captions,a._id,h.ContainerFormat.MP4,s.audio)})).filter((function(t){return t.Representation=t.Representation.reduce((function(t,n){var r=e.isRepresentationSupported(n,i.l6.renderer),a=Boolean(t.find((function(e){return e.Uri===n.Uri})));return r&&!a&&t.push(n),t}),[]),t.Representation.length>0})),d=this.v6(a._id,s.audio,h.ContainerFormat.MP4).filter((function(t){return t.Representation=t.Representation.filter((function(t){return e.isRepresentationSupported(t,i.l6.renderer)})),t.Representation.length>0})).concat(l.filter((function(e){return o.CodecStringHelper.isAudioCodec(e)})).map((function(e){return i.u6(u[e],s.captions,a._id,h.ContainerFormat.MP4)}))),f=this.w6(a._id,s.subtitles,h.ContainerFormat.MP4);return a.AdaptationSet=[].concat(c,d,f),p.ModuleManager.has(g.ModuleName.Thumbnail)&&(a.AdaptationSet=p.ModuleManager.get(g.ModuleName.Thumbnail).extendAdaptationSets(a.AdaptationSet,t,this.q6)),a},e.isRepresentationSupported=function(e,t){var n=!e._mimeType.includes("audio")&&!e._mimeType.includes("video");if(!e._codecs||n)return!0;var i=o.CodecStringHelper.getExtractedCodecStrings(e._codecs);return Object.keys(i).every((function(e){return o.CodecStringHelper.isSupportedByRenderer(t,e+"/mp4",i[e])}))},e.prototype.L6=function(e){var t=e.media.filter((function(e){return _(e.attributes)}));return!t.length||t.some((function(e){return!e.attributes.URI}))},e.prototype.M6=function(e,t,n,i,r){for(var a,o=function(e){null!==s.O6(e.uri)?(void 0!==t.find((function(t){return!Object.keys(e).some((function(n){return e[n]!==t[n]}))}))||t.push(e),t.length>0&&(a=void 0)):a=(0,y.generateSegmentEncryptionInfo)(e,n,i,r)},s=this,u=0,l=null!=e?e:[];u<l.length;u++)o(l[u]);return a},e.prototype.translateSegmentList=function(e,t){var n,r,a,o=t.segments,s=[],u=[],l=null!==(a=null===(r=null===(n=e.BaseURL)||void 0===n?void 0:n[0])||void 0===r?void 0:r.url)&&void 0!==a?a:"",f="";l&&(f=(0,d.extractOrigin)(l)),this.O6.invalidate();for(var p=0,g=function(e){l&&(e.uri=d.URLHelper.buildAbsoluteUrl(l,f,e.uri));var n=h.M6(e.keys,u,l,f,e.mediaSequence);e.init&&(e.init.url=d.URLHelper.buildAbsoluteUrl(l,f,e.init.url),e.init.key=h.M6(e.init.keys,u,l,f,e.mediaSequence));var r={_media:e.uri,_duration:e.duration,_mediaSequence:e.mediaSequence,_discontinuitySequenceNumber:e.discontinuitySequenceNumber,_metadata:[]};R(r,"_discontinuity",e.discontinuity),R(r,"_key",n),R(r,"_init",e.init),R(r,"_dateTime",e.dateTime),R(r,"_byteRange",(0,y.parseSegmentByteRange)(e.byterange)),R(r,"_playbackTime",function(e,t,n){var i;return e.endList?(null!==(i=e.startTime)&&void 0!==i?i:0)+t:n?(0,c.toSeconds)(n.getTime()):void 0}(t,p,e.dateTime)),["cueTag","scte35","customTags"].filter((function(t){return e.hasOwnProperty(t)})).forEach((function(t){return r._metadata=r._metadata.concat(e[t])})),e.parts&&(r._parts=e.parts.map((function(e){return i(i({},e),{uri:d.URLHelper.buildAbsoluteUrl(l,f,e.uri)})}))),s.push(r),p+=e.duration},h=this,v=0,m=o;v<m.length;v++)g(m[v]);return{entries:s,contentProtectionInfos:this.N6(u)}},e.prototype.N6=function(e){var t=this,n=[];return e.forEach((function(e){var i=function(e,t){return p.ModuleManager.has(g.ModuleName.DRM)?p.ModuleManager.get(g.ModuleName.DRM).ContentProtectionHelper.parseContentProtection(e,t):null}(e,t.O6(e.uri));i?n.push(i):t.l6.logger.debug("Encountered unknown/unsupported DRM scheme:",e.keyformat)})),n},e.prototype.dispose=function(){this.q6=null,this.O6.invalidate()},e}();function _(e){return"AUDIO"===e.TYPE}function O(e,t){var n,i,r,a,o=e.attributes.BANDWIDTH===t.attributes.BANDWIDTH,s=(null===(n=e.attributes.RESOLUTION)||void 0===n?void 0:n.height)===(null===(i=t.attributes.RESOLUTION)||void 0===i?void 0:i.height)&&(null===(r=e.attributes.RESOLUTION)||void 0===r?void 0:r.width)===(null===(a=t.attributes.RESOLUTION)||void 0===a?void 0:a.width),u=e.attributes.CODECS===t.attributes.CODECS;return o&&s&&u}function I(e,t,n,i){t&&n&&t!==n&&(e[i?t:n]=!0)}function b(e,t,n){var i,r;return n&&null!==(r=null===(i=null==e?void 0:e.attributes)||void 0===i?void 0:i["PATHWAY-ID"])&&void 0!==r?r:String(Object.keys(t).length)}function R(e,t,n){void 0!==n&&(e[t]=n)}t.M3u8Translator=E,function(e){function t(e,t){var n={};return e.forEach((function(e){var i=t[e["GROUP-ID"]]||t[Object.keys(t)[0]];e["AVERAGE-BANDWIDTH"]=i[0]["AVERAGE-BANDWIDTH"],e.BANDWIDTH=i[0].BANDWIDTH,e.CODECS=i[0].CODECS;var r=e["AVERAGE-BANDWIDTH"]||e.BANDWIDTH,a=Object.keys(n).find((function(t){var i,r,a=n[t].entries[0];return(null==a?void 0:a.NAME)===e.NAME&&o.CodecStringHelper.canSwitchBetweenAudioCodecs(null!==(i=null==a?void 0:a.CODECS)&&void 0!==i?i:"",null!==(r=e.CODECS)&&void 0!==r?r:"")}));if(a&&n[a]){var s=n[a];s.entries.push(e),s.MIN_BANDWIDTH=Math.min(s.MIN_BANDWIDTH,r),s.MAX_BANDWIDTH=Math.max(s.MAX_BANDWIDTH,r)}else{var u=e.CODECS?"".concat(e.NAME," (").concat(e.CODECS,")"):e.NAME;n[u]={entries:[e],MIN_BANDWIDTH:r,MAX_BANDWIDTH:r}}})),n}function n(e){var t={};return e.forEach((function(e){return t[e.NAME]=e})),t}function i(e){var t={cea608:[],cea708:[]};return e.forEach((function(e){e["INSTREAM-ID"]&&0===e["INSTREAM-ID"].indexOf("CC")?t.cea608.push(e):e["INSTREAM-ID"]&&0===e["INSTREAM-ID"].indexOf("SERVICE")&&t.cea708.push(e)})),t}function r(e){var t=function(e){var t={};return e.forEach((function(e){var n=e.attributes.AUDIO;t[n]||(t[n]=[]);var i={"AVERAGE-BANDWIDTH":e.attributes["AVERAGE-BANDWIDTH"],BANDWIDTH:e.attributes.BANDWIDTH,CODECS:void 0};e.attributes.CODECS&&e.attributes.CODECS.indexOf(",")>-1&&(i.CODECS=function(e){return e.attributes.CODECS.split(",").find((function(e){return o.CodecStringHelper.isAudioCodec(e)}))}(e)),t[n].push(i)})),t}(e);return function(e){Object.values(e).forEach((function(e){e.sort((function(e,t){return e.BANDWIDTH-t.BANDWIDTH}))}))}(t),t}e.extractMediaRenditions=function(e,a,o){var s=e.playlists.filter(o),u=e.media.map((function(e){return e.attributes})),l=r(s),c=u.filter((function(e){var t=l[e["GROUP-ID"]];return _(e)&&(a||t)})),d=u.filter((function(e){return"SUBTITLES"===e.TYPE})),f=u.filter((function(e){return"CLOSED-CAPTIONS"===e.TYPE}));return{audio:t(c,l),subtitles:n(d),captions:i(f)}},e.getPropertiesForAudioGroups=r}(r||(t.HlsParsing=r={}))},61895:function(e,t){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};function i(e){var t={};return Object.keys(e).forEach((function(n){var i;Object.keys(null!==(i=e[n])&&void 0!==i?i:{}).forEach((function(i){t[i]=function(n,i){var r,a,o,s,u,l,c,d,f,p;return{startTime:Math.max(null!==(o=null===(a=null===(r=e[i])||void 0===r?void 0:r[n])||void 0===a?void 0:a.startTime)&&void 0!==o?o:-1/0,null!==(u=null===(s=t[n])||void 0===s?void 0:s.startTime)&&void 0!==u?u:-1/0),endTime:Math.min(null!==(d=null===(c=null===(l=e[i])||void 0===l?void 0:l[n])||void 0===c?void 0:c.endTime)&&void 0!==d?d:1/0,null!==(p=null===(f=t[n])||void 0===f?void 0:f.endTime)&&void 0!==p?p:1/0)}}(i,n)}))})),t}Object.defineProperty(t,"__esModule",{value:!0}),t.getContentLocationId=t.getPresentationTimeOffset=t.getMergedDiscontinuityTimings=t.getFirstDiscoSequenceTiming=t.getDiscoSequenceTimings=t.getDiscoSequenceTiming=t.getCustomTags=t.getDefaultLanguages=t.getEndlist=t.getIsLowLatencyPlaylist=t.getPlaylistType=void 0,t.getHlsState=function(e){return e.hls},t.computeMergedDiscontinuityTimings=i,t.areDiscontinuitiesMisaligned=function(e,t,n){if(void 0===n&&(n=2),t.length<=1||!e.discontinuitySequenceTiming)return!1;var r=function(e,t){return t.reduce((function(t,n){return n in e&&(t[n]=e[n]),t}),{})}(e.discontinuitySequenceTiming,t),a=i(r);return 1!==Object.keys(a).length&&!Object.keys(a).every((function(e,i){var o=a[e];return t.every((function(t){var s,u=null===(s=r[t])||void 0===s?void 0:s[e];if(!u)return!0;var l=Math.abs(u.startTime-o.startTime),c=Math.abs(u.endTime-o.endTime);return 0===i?c<=n:i===Object.keys(a).length-1?l<=n:l<=n&&c<=n}))}))},t.getPlaylistType=function(e){return e.playlistType},t.getIsLowLatencyPlaylist=function(e){return e.isLowLatencyPlaylist},t.getEndlist=function(e){return e.endlist},t.getDefaultLanguages=function(e){return e.defaultLanguages},t.getCustomTags=function(e){return e.customTags},t.getDiscoSequenceTiming=function(e,t,i){var r,a;return(null===(a=null===(r=e.discontinuitySequenceTiming)||void 0===r?void 0:r[t])||void 0===a?void 0:a[i])?n({},e.discontinuitySequenceTiming[t][i]):null},t.getDiscoSequenceTimings=function(e,t){var i;return(null===(i=e.discontinuitySequenceTiming)||void 0===i?void 0:i[t])?n({},e.discontinuitySequenceTiming[t]):null},t.getFirstDiscoSequenceTiming=function(e){var n,i=(0,t.getMergedDiscontinuityTimings)(e);return null!==(n=i[Object.keys(i)[0]])&&void 0!==n?n:{startTime:0,endTime:0}},t.getMergedDiscontinuityTimings=function(e){var t;return i(null!==(t=e.discontinuitySequenceTiming)&&void 0!==t?t:{})},t.getPresentationTimeOffset=function(e,t){return e.presentationTimeOffsets[t]},t.getContentLocationId=function(e){return e.contentLocationId}},62903:function(e,t,n){e.exports=function(){return n(90040)('!function(){"use strict";var e={12:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.initialStartOptions=void 0,t.initializeStartTimeOffset=function(){return o(t.initialStartOptions.startTimeOffset)},t.setStartTimeOffset=o;var i=n(5267),r=n(5934);function o(e){return(0,i.createAction)(r.StartOptionsActionKey.SetStartTimeOffset,{startTimeOffset:e})}t.initialStartOptions={startTimeOffset:0}},233:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.FormatHelper=void 0;var n=function(){function e(){}return e.hexToBytes=function(e){var t=e.length;1&t&&(e="0"+e,t++);for(var n=new Uint8Array(t>>1),i=0;i<t;i+=2)n[i>>1]=parseInt(e.substring(i,i+2),16);return n},e.bytesToHex=function(e){e instanceof ArrayBuffer&&(e=new Uint8Array(e));for(var t="",n=0;n<e.byteLength;n++){var i=(255&e[n]).toString(16);i.length<2&&(t+="0"),t+=i}return t},e.bytesToUUID=function(e){return this.beautifyUUID(this.bytesToHex(e))},e.beautifyUUID=function(e){return e.slice(0,8)+"-"+e.slice(8,12)+"-"+e.slice(12,16)+"-"+e.slice(16,20)+"-"+e.slice(20)},e.intToHex=function(e){return("00"+e.toString(16)).slice(-2)},e.base64UrlEncode=function(e){return window.btoa(e).replace(/\\+/g,"-").replace(/\\//g,"_").replace(/=/g,"")},e.base64UrlDecode=function(e){return window.atob((e+"===".slice((e.length+3)%4)).replace(/-/g,"+").replace(/_/g,"/"))},e}();t.FormatHelper=n},306:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorCode=void 0,function(e){e[e.UNKNOWN=1e3]="UNKNOWN",e[e.API_NOT_AVAILABLE=1001]="API_NOT_AVAILABLE",e[e.SETUP_ERROR=1100]="SETUP_ERROR",e[e.SETUP_NO_HTML_ELEMENT=1101]="SETUP_NO_HTML_ELEMENT",e[e.SETUP_MISSING_CONFIGURATION=1102]="SETUP_MISSING_CONFIGURATION",e[e.SETUP_LICENSE_ERROR=1103]="SETUP_LICENSE_ERROR",e[e.SETUP_MISSING_DOMAIN_LICENSE_WHITELIST=1104]="SETUP_MISSING_DOMAIN_LICENSE_WHITELIST",e[e.SETUP_MISSING_DOMAIN_LICENSE_ALLOWLIST=1104]="SETUP_MISSING_DOMAIN_LICENSE_ALLOWLIST",e[e.SETUP_MISSING_LICENSE_WHITELIST=1105]="SETUP_MISSING_LICENSE_WHITELIST",e[e.SETUP_MISSING_LICENSE_ALLOWLIST=1105]="SETUP_MISSING_LICENSE_ALLOWLIST",e[e.SETUP_INVALID_LICENSE_SERVER=1106]="SETUP_INVALID_LICENSE_SERVER",e[e.SETUP_INVALID_IMPRESSION_SERVER=1107]="SETUP_INVALID_IMPRESSION_SERVER",e[e.SETUP_NO_RENDERING_ENGINE=1108]="SETUP_NO_RENDERING_ENGINE",e[e.SETUP_UNSUPPORTED_PROTOCOL=1113]="SETUP_UNSUPPORTED_PROTOCOL",e[e.SOURCE_ERROR=1200]="SOURCE_ERROR",e[e.SOURCE_INVALID=1201]="SOURCE_INVALID",e[e.SOURCE_MANIFEST_INVALID=1202]="SOURCE_MANIFEST_INVALID",e[e.SOURCE_NO_SUPPORTED_TECHNOLOGY=1203]="SOURCE_NO_SUPPORTED_TECHNOLOGY",e[e.SOURCE_STREAM_TYPE_NOT_SUPPORTED=1204]="SOURCE_STREAM_TYPE_NOT_SUPPORTED",e[e.SOURCE_FORCED_TECHNOLOGY_NOT_SUPPORTED=1205]="SOURCE_FORCED_TECHNOLOGY_NOT_SUPPORTED",e[e.SOURCE_NO_STREAM_FOUND_FOR_SUPPORTED_TECHNOLOGY=1206]="SOURCE_NO_STREAM_FOUND_FOR_SUPPORTED_TECHNOLOGY",e[e.SOURCE_EMPTY_SEGMENT=1207]="SOURCE_EMPTY_SEGMENT",e[e.SOURCE_COULD_NOT_LOAD_MANIFEST=1208]="SOURCE_COULD_NOT_LOAD_MANIFEST",e[e.SOURCE_PROGRESSIVE_STREAM_ERROR=1209]="SOURCE_PROGRESSIVE_STREAM_ERROR",e[e.SOURCE_HLS_STREAM_ERROR=1210]="SOURCE_HLS_STREAM_ERROR",e[e.SOURCE_ENCRYPTION_METHOD_NOT_SUPPORTED=1211]="SOURCE_ENCRYPTION_METHOD_NOT_SUPPORTED",e[e.SOURCE_INVALID_H264_CODEC=7043]="SOURCE_INVALID_H264_CODEC",e[e.PLAYBACK_ERROR=1300]="PLAYBACK_ERROR",e[e.PLAYBACK_VIDEO_DECODING_ERROR=1301]="PLAYBACK_VIDEO_DECODING_ERROR",e[e.PLAYBACK_HLS_COULD_NOT_LOAD_TRANSMUXER=1304]="PLAYBACK_HLS_COULD_NOT_LOAD_TRANSMUXER",e[e.NETWORK_ERROR=1400]="NETWORK_ERROR",e[e.NETWORK_MANIFEST_DOWNLOAD_TIMEOUT=1401]="NETWORK_MANIFEST_DOWNLOAD_TIMEOUT",e[e.NETWORK_SEGMENT_DOWNLOAD_TIMEOUT=1402]="NETWORK_SEGMENT_DOWNLOAD_TIMEOUT",e[e.NETWORK_PROGRESSIVE_STREAM_DOWNLOAD_TIMEOUT=1403]="NETWORK_PROGRESSIVE_STREAM_DOWNLOAD_TIMEOUT",e[e.NETWORK_FAILED_CERTIFICATE_REQUEST=1404]="NETWORK_FAILED_CERTIFICATE_REQUEST",e[e.DRM_ERROR=2e3]="DRM_ERROR",e[e.DRM_MISSING_CONFIGURATION=2001]="DRM_MISSING_CONFIGURATION",e[e.DRM_NO_LICENSE_SERVER_URL_PROVIDED=2002]="DRM_NO_LICENSE_SERVER_URL_PROVIDED",e[e.DRM_FAILED_LICENSE_REQUEST=2003]="DRM_FAILED_LICENSE_REQUEST",e[e.DRM_KEY_SIZE_NOT_SUPPORTED=2005]="DRM_KEY_SIZE_NOT_SUPPORTED",e[e.DRM_NO_KEY_SYSTEM=2006]="DRM_NO_KEY_SYSTEM",e[e.DRM_KEY_SESSION_INITIALIZATION_FAILED=2007]="DRM_KEY_SESSION_INITIALIZATION_FAILED",e[e.DRM_MEDIA_KEY_INITIALIZATION_FAILED=2008]="DRM_MEDIA_KEY_INITIALIZATION_FAILED",e[e.DRM_KEY_ERROR=2009]="DRM_KEY_ERROR",e[e.DRM_KEY_SYSTEM_NOT_SUPPORTED=2010]="DRM_KEY_SYSTEM_NOT_SUPPORTED",e[e.DRM_CERTIFICATE_ERROR=2011]="DRM_CERTIFICATE_ERROR",e[e.DRM_PLAYREADY_INVALID_HEADER_KEY_VALUE_PAIR=2012]="DRM_PLAYREADY_INVALID_HEADER_KEY_VALUE_PAIR",e[e.DRM_RESTRICTED_OUTPUT=2013]="DRM_RESTRICTED_OUTPUT",e[e.DRM_INIT_DATA_MISSING=2015]="DRM_INIT_DATA_MISSING",e[e.VR_ERROR=2100]="VR_ERROR",e[e.VR_INCOMPATIBLE_PLAYER_TECHNOLOGY=2101]="VR_INCOMPATIBLE_PLAYER_TECHNOLOGY",e[e.MODULE_ERROR=3e3]="MODULE_ERROR",e[e.MODULE_INVALID_DEFINITION=3001]="MODULE_INVALID_DEFINITION",e[e.MODULE_INVALID_DEFINITION_DEPENDENCY=3002]="MODULE_INVALID_DEFINITION_DEPENDENCY",e[e.MODULE_MISSING=3003]="MODULE_MISSING",e[e.MODULE_DEPENDENCY_MISSING=3004]="MODULE_DEPENDENCY_MISSING",e[e.MODULE_REMOVED=3005]="MODULE_REMOVED",e[e.MODULE_ADVERTISING_ERROR=3100]="MODULE_ADVERTISING_ERROR",e[e.SEGMENT_PSSH_DATA_MISSING=4e3]="SEGMENT_PSSH_DATA_MISSING"}(n||(t.ErrorCode=n={}))},430:function(e,t,n){var i,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)},o=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ReachableDomainsReducer=void 0;var a=n(3793),s=n(2027);t.ReachableDomainsReducer=(0,a.default)({domains:[]},((i={})[s.ReachableDomainsActionType.AddDomain]=function(e,t){return function(e,t){return r(r({},e),{domains:e.domains.includes(t)?e.domains:o(o([],e.domains,!0),[t],!1)})}(e,t.payload)},i))},649:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.kebabCaseToCamelCase=function(e){return e.split("-").map((function(e,t){return 0===t?e.toLowerCase():e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()})).join("")},t.forceReallocation=function(e){return e?(0,i.isFirefox)()?JSON.parse(JSON.stringify(e)):(" "+e).slice(1):""};var i=n(5487)},729:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isPlayingLowLatencyHls=function(e){var t;if(!(0,a.isLowLatencyConfigured)(e)||!e.settings.LL_HLS)return!1;var n=(0,i.getSourceState)(e);if(!n)return!1;var s=r.ModuleManager.get(o.ModuleName.HLS,!1);if(!s)return!1;var u=s.selectors,l=u.getHlsState,c=u.getIsLowLatencyPlaylist,d=l(n);return!!d&&null!==(t=c(d))&&void 0!==t&&t};var i=n(5971),r=n(8052),o=n(2756),a=n(962)},813:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ServiceName=void 0,function(e){e.AdaptationService="AdaptationService",e.DrmDetectorService="DrmDetectorService",e.DrmService="DrmService",e.HeartbeatService="HeartbeatService",e.LiveLatencyService="LiveLatencyService",e.ManifestCachingService="ManifestCachingService",e.ManifestLoadingService="ManifestLoadingService",e.ManifestService="ManifestService",e.ManifestUpdateSchedulingService="ManifestUpdateSchedulingService",e.MetadataParsedService="MetadataParsedService",e.PlayerStateService="PlayerStateService",e.SegmentService="SegmentService",e.SourceStoreService="SourceStoreService",e.StallTimeTrackerService="StallTimeTrackerService",e.StartOffsetService="StartOffsetService",e.StreamTimeService="StreamTimeService",e.SubtitleService="SubtitleService",e.SynchronizedTimeService="SynchronizedTimeService",e.ThumbnailService="ThumbnailService",e.TimedMetadataService="TimedMetadataService",e.SgaiService="SgaiService"}(n||(t.ServiceName=n={}))},827:function(e,t){function n(e){return[e.url,e.mediaURL].filter(Boolean)}function i(e,t){return null==e?null==t:null!=t&&e.start===t.start&&e.end===t.end}Object.defineProperty(t,"__esModule",{value:!0}),t.isIdenticalSegmentInfo=function(e,t){if(void 0!==e.mediaSequence&&void 0!==t.mediaSequence)return e.mediaSequence===t.mediaSequence;var r=function(e,t){var i=n(e),r=n(t);return i.some((function(e){return r.includes(e)}))}(e,t),o=i(e.byteRange,t.byteRange),a=e.discontinuitySequenceNumber===t.discontinuitySequenceNumber;return r&&o&&a},t.isIdenticalInitSegmentInfo=function(e,t){var n=(null==e?void 0:e.url)===(null==t?void 0:t.url),r=i(null==e?void 0:e.byteRange,null==t?void 0:t.byteRange);return n&&r}},829:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringStartsWithPolyfill=void 0,t.StringStartsWithPolyfill=function(){return{polyfill:function(){String.prototype.startsWith=function(e,t){var n=t>0?0|t:0;return this.substring(n,n+e.length)===e}}}}()},962:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isLowLatencyConfigured=function(e){var t=e.serviceManager.get(i.ServiceName.LiveLatencyService);return(null==t?void 0:t.isConfigured())||!1};var i=n(813)},1513:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.default=d,t.getCapabilities=function(){return function(e){return e.capabilities}(d().getState())},t.getReachableDomains=function(){return function(e){return e.reachableDomains}(d().getState())};var i,r=n(1829),o=n(4638),a=(n(8774),n(1683),n(430)),s=n(9541),u=n(1674),l=new s.ReducerTree;l.set("capabilities",o.CapabilityReducer).set("reachableDomains",a.ReachableDomainsReducer);var c=function(){var e=[(0,u.addStoreServiceDecoration)(l)];return(0,r.createStore)((function(){return{}}),r.compose.apply(void 0,e))};function d(){return i||(i=c()),i}},1674:function(e,t){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.addStoreServiceDecoration=void 0,t.addStoreServiceDecoration=function(e){return function(t){return function(){var i=function(){return e.buildReducer()},r=t(i()),o=function(){return r.replaceReducer(i())};return o(),n(n({},r),{addReducer:function(t,n){e.set(t,n),o()},getReducer:function(t){return e.get(t)},removeReducer:function(t){e.delete(t),o()},hasReducer:function(t){return e.has(t)}})}}}},1683:function(e,t){function n(e){Object.freeze(e);var t="function"==typeof e,i=Object.prototype.hasOwnProperty;return Object.getOwnPropertyNames(e).forEach((function(r){!i.call(e,r)||t&&("caller"===r||"callee"===r||"arguments"===r)||null===e[r]||"object"!=typeof e[r]&&"function"!=typeof e[r]||Object.isFrozen(e[r])||n(e[r])})),e}Object.defineProperty(t,"__esModule",{value:!0}),t.freeze=void 0,t.deepFreeze=n;var i=function(e){var t=e.getState();(function(e){return null!==e&&"object"==typeof e})(t)&&n(t)};t.freeze=function(e){return i(e),function(t){return function(n){i(e);try{return t(n)}finally{i(e)}}}}},1829:function(e,t,n){function i(e){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i(e)}function r(e,t,n){return(t=function(e){var t=function(e){if("object"!=i(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var n=t.call(e,"string");if("object"!=i(n))return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==i(t)?t:t+""}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function a(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}n.r(t),n.d(t,{__DO_NOT_USE__ActionTypes:function(){return c},applyMiddleware:function(){return v},bindActionCreators:function(){return h},combineReducers:function(){return p},compose:function(){return g},createStore:function(){return d},legacy_createStore:function(){return f}});var u=function(){return"function"==typeof Symbol&&Symbol.observable||"@@observable"}(),l=function(){return Math.random().toString(36).substring(7).split("").join(".")},c={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function d(e,t,n){var i;if("function"==typeof t&&"function"==typeof n||"function"==typeof n&&"function"==typeof arguments[3])throw new Error(s(0));if("function"==typeof t&&void 0===n&&(n=t,t=void 0),void 0!==n){if("function"!=typeof n)throw new Error(s(1));return n(d)(e,t)}if("function"!=typeof e)throw new Error(s(2));var r=e,o=t,a=[],l=a,f=!1;function p(){l===a&&(l=a.slice())}function S(){if(f)throw new Error(s(3));return o}function h(e){if("function"!=typeof e)throw new Error(s(4));if(f)throw new Error(s(5));var t=!0;return p(),l.push(e),function(){if(t){if(f)throw new Error(s(6));t=!1,p();var n=l.indexOf(e);l.splice(n,1),a=null}}}function g(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(s(7));if(void 0===e.type)throw new Error(s(8));if(f)throw new Error(s(9));try{f=!0,o=r(o,e)}finally{f=!1}for(var t=a=l,n=0;n<t.length;n++)(0,t[n])();return e}return g({type:c.INIT}),(i={dispatch:g,subscribe:h,getState:S,replaceReducer:function(e){if("function"!=typeof e)throw new Error(s(10));r=e,g({type:c.REPLACE})}})[u]=function(){var e,t=h;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(s(11));function n(){e.next&&e.next(S())}return n(),{unsubscribe:t(n)}}})[u]=function(){return this},e},i}var f=d;function p(e){for(var t=Object.keys(e),n={},i=0;i<t.length;i++){var r=t[i];"function"==typeof e[r]&&(n[r]=e[r])}var o,a=Object.keys(n);try{!function(e){Object.keys(e).forEach((function(t){var n=e[t];if(void 0===n(void 0,{type:c.INIT}))throw new Error(s(12));if(void 0===n(void 0,{type:c.PROBE_UNKNOWN_ACTION()}))throw new Error(s(13))}))}(n)}catch(e){o=e}return function(e,t){if(void 0===e&&(e={}),o)throw o;for(var i=!1,r={},u=0;u<a.length;u++){var l=a[u],c=n[l],d=e[l],f=c(d,t);if(void 0===f)throw t&&t.type,new Error(s(14));r[l]=f,i=i||f!==d}return(i=i||a.length!==Object.keys(e).length)?r:e}}function S(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"==typeof e)return S(e,t);if("object"!=typeof e||null===e)throw new Error(s(16));var n={};for(var i in e){var r=e[i];"function"==typeof r&&(n[i]=S(r,t))}return n}function g(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce((function(e,t){return function(){return e(t.apply(void 0,arguments))}}))}function v(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(e){return function(){var n=e.apply(void 0,arguments),i=function(){throw new Error(s(15))},r={getState:n.getState,dispatch:function(){return i.apply(void 0,arguments)}},o=t.map((function(e){return e(r)}));return i=g.apply(void 0,o)(n.dispatch),a(a({},n),{},{dispatch:i})}}}},1908:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parseTag=function(e){var t,n=r.exec(e);if(!n)throw new Error("Invalid tag "+e);var s,u=n[1],l=n[2],c={};if(l){var d=new i.TextParser(l),f=void 0,p=d.readRegex(o);for(p&&(s=null!==(t=p[1])&&void 0!==t?t:p[2]);f=d.readRegex(a);){var S=f[1],h=f[2]||f[3];if(S.includes(",")){var g=S.split(","),v=g[0];S=g[1].trim(),c[v]=void 0}c[S]=h,d.skipWhitespace()}}return{name:u,attributes:c,value:s}};var i=n(9297),r=/^#(EXT[^:]*)(?::(.*))?$/,o=/^(?:"([^"]*)"|([^,=]+))(?:,|$)/g,a=/([^=]+)=*(?:"([^"]*)"|([^",]*))(?:,|$)/g},1945:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SEGMENT_TAGS=void 0,t.parseVariant=function(e,n){void 0===n&&(n={});for(var i={version:1,allowCache:!0,hasM3u:!0,endList:!1,segments:[],dateRange:[],skippedSegmentsCount:0,targetDuration:0,totalDuration:0,mediaSequence:0},r=[],s=0;s<e.length;s++){var c=(0,o.removeTrailingWhitespaces)(e[s]);if(""!==c)if((0,o.isCustomTag)(c))(0,o.handleCustomTag)(i,r,c);else{var d=(0,a.parseTag)(c);if(t.SEGMENT_TAGS.includes(d.name))return(0,o.parseSegments)(e.slice(s),r,i,n),u(i),i;l(i,d,r)}}return u(i),i},t.resolvePlaylistTag=l;var r=n(3714),o=n(3577),a=n(1908),s=n(5707);function u(e){var t;"EVENT"===e.playlistType&&(e.discontinuitySequence=null!==(t=e.discontinuitySequence)&&void 0!==t?t:0)}function l(e,t,n){switch(t.name){case"EXT-X-VERSION":e.version=Number(t.value);break;case"EXT-X-START":e.start=(0,s.generateStartAttributes)(t);break;case"EXT-X-INDEPENDENT-SEGMENTS":e.independentSegments=!0;break;case"EXT-X-TARGETDURATION":t.value&&(e.targetDuration=parseInt(t.value));break;case"EXT-X-MEDIA-SEQUENCE":t.value&&(e.mediaSequence=parseInt(t.value));break;case"EXT-X-DISCONTINUITY-SEQUENCE":t.value&&(e.discontinuitySequence=parseInt(t.value));break;case"EXT-X-PLAYLIST-TYPE":e.playlistType="EVENT"===t.value?"EVENT":"VOD";break;case"EXT-X-PART-INF":e.partInfo=(0,s.generatePartInfoTag)(t.attributes);break;case"EXT-X-ALLOW-CACHE":e.allowCache="NO"!==t.value;break;case"EXT-X-SERVER-CONTROL":e.serverControl=(0,s.generateServerControlTag)(t);break;case"EXT-X-DATERANGE":e.dateRange.push((0,s.generateDateRange)(t));break;case"EXT-X-ENDLIST":e.endList=!0;break;case"EXTM3U":break;default:n.push(i({type:r.MetadataType.CUSTOM},t)),(0,o.addCustomTagToPlaylistTagList)(e,t)}}t.SEGMENT_TAGS=["EXTINF","EXT-X-BYTERANGE","EXT-X-DISCONTINUITY","EXT-X-PROGRAM-DATE-TIME","EXT-X-KEY","EXT-X-GAP","EXT-X-BITRATE","EXT-X-PART","EXT-X-MAP","EXT-X-CUE-OUT-CONT","EXT-X-CUE-OUT","EXT-X-CUE-IN","EXT-X-SCTE35","EXT-X-SKIP"]},2027:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ReachableDomainsActionType=void 0,function(e){e.AddDomain="adddomain"}(n||(t.ReachableDomainsActionType=n={}))},2424:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.DurationConverter=void 0;var n=function(){function e(){}return e.getDurationInSec=function(e){if("string"!=typeof e)return NaN;var t=/^([-])?P(([\\d.]*)Y)?(([\\d.]*)M)?(([\\d.]*)D)?(T)?(([\\d.]*)H)?(([\\d.]*)M)?(([\\d.]*|Infinity)S)?/.exec(e);if(t){var n=Boolean(t[1]),i=12*parseFloat(t[2]||"0")*30*24*60*60,r=30*parseFloat(t[4]||"0")*24*60*60,o=24*parseFloat(t[6]||"0")*60*60,a=60*parseFloat(t[9]||"0")*60,s=60*parseFloat(t[11]||"0"),u=parseFloat(t[13]||"0");if("T"===t[8]&&void 0===(t[9]||t[11]||t[13]))return NaN;var l=i+r+o+a+s+u;return n&&(l=-l),l}return NaN},e}();t.DurationConverter=n},2498:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.getMostRecentlyRefreshedQuality=t.getSegmentInfos=t.getSegmentMapEntry=void 0,t.getSegmentMapEntry=function(e,t){return null==e?void 0:e.segmentInfoMap[t]},t.getSegmentInfos=function(e,n){var i,r;return null!==(r=null===(i=(0,t.getSegmentMapEntry)(e,n))||void 0===i?void 0:i.segmentInfos)&&void 0!==r?r:[]},t.getMostRecentlyRefreshedQuality=function(e){if(e)return Object.values(e.segmentInfoMap).filter((function(e){return null!=e.qualityInfo.lastUpdateTimestamp})).sort((function(e,t){var n=e.qualityInfo.lastUpdateTimestamp;return t.qualityInfo.lastUpdateTimestamp-n}))[0]}},2756:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleName=void 0,function(e){e.VR="VR",e.XML="XML",e.Smooth="Smooth",e.AdvertisingCore="AdvertisingCore",e.Advertising="Advertising",e.AdvertisingIma="Advertising",e.AdvertisingBitmovin="Advertising",e.AdvertisingOmSdk="AdvertisingOmSdk",e.SGAI="SGAI",e.Polyfill="Polyfill",e.Patch="Patch",e.RemoteControl="RemoteControl",e.RendererMse="RendererMSE",e.EngineNative="EngineNative",e.EngineBitmovin="EngineBitmovin",e.ABR="ABR",e.Crypto="Crypto",e.HLS="HLS",e.DRM="DRM",e.DASH="DASH",e.ContainerTS="ContainerTS",e.ContainerMP4="ContainerMP4",e.ContainerWebM="ContainerWebM",e.Subtitles="Subtitles",e.SubtitlesTTML="SubtitlesTTML",e.SubtitlesWebVTT="SubtitlesWebVTT",e.SubtitlesCEA608="SubtitlesCEA608",e.SubtitlesNative="SubtitlesNative",e.Style="Style",e.Thumbnail="Thumbnail",e.ThumbnailImp="Thumbnail",e.UI="UI",e.Tizen="Tizen",e.Webos="webos",e.Vidaa="vidaa",e.LowLatency="LowLatency",e.ServiceWorkerClient="ServiceWorkerClient",e.Envivio="Envivio",e.PlayStation5="PlayStation5",e.PlayStation4="PlayStation4",e.EngineWebRtc="EngineWebRtc",e.ReactNative="ReactNative"}(n||(t.ModuleName=n={}))},2886:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerType=void 0,function(e){e.Html5="html5",e.Native="native",e.WebRtc="webrtc",e.Unknown="unknown"}(n||(t.PlayerType=n={}))},3066:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentListMPDHandler=t.PHANTOM_SEGMENT_URL=void 0,t.assignSegmentStartTimesFromHlsRepresentation=T,t.copyPropValues=I,t.getMatchingPart=R;var r=n(6790),o=n(813),a=n(7179),s=n(649),u=n(4853),l=n(2424),c=n(9927),d=n(3068),f=n(8052),p=n(2756),S=n(827),h=n(2498),g=n(729),v=n(4053),E=n(5439);t.PHANTOM_SEGMENT_URL="PHANTOM-SEGMENT";var y=function(){function e(e){this.d=e,this.e=e.sourceContext,this.g=e.settings,this.f=e.logger,this.m=e.serviceManager.get(o.ServiceName.ManifestService,this.e.sourceIdentifier),this.l=0,this.o={},this.n=NaN}return Object.defineProperty(e.prototype,"p",{get:function(){return this.d.serviceManager.get(o.ServiceName.PlayerStateService)},enumerable:!1,configurable:!0}),e.prototype.q=function(e,t){var n;if(!e)return null;var o={isInitSegment:!1,url:e._media,duration:e._duration,internalRepresentationId:t,periodId:t.periodId};if(e._key&&e._key.method!==r.HlsEncryptionMethod.NONE&&(o.key=e._key),void 0!==e._playbackTime&&(o.startTime=e._playbackTime),e._dateTime&&(o.dateTime=e._dateTime),e._metadata&&(o.metadata=e._metadata),e._byteRange&&(o.byteRange=e._byteRange),e._init&&(o.init=e._init,(null===(n=e._init.key)||void 0===n?void 0:n.method)===r.HlsEncryptionMethod.NONE&&(o.init=i({},o.init),delete o.init.key)),void 0!==e._mediaSequence&&(o.mediaSequence=e._mediaSequence),void 0!==e._discontinuitySequenceNumber&&(o.discontinuitySequenceNumber=e._discontinuitySequenceNumber),e._parts){var a=o.dateTime;o.parts=e._parts.map((function(e){var t=function(e,t){var n={url:e.uri,duration:e.duration,isInitSegment:!1,internalRepresentationId:t.internalRepresentationId,isPreloadHint:Boolean(e.isPreloadHint),isIndependent:Boolean(e.independent)};return e.byteRange&&(n.byteRange=e.byteRange),t.key&&(n.key=t.key),t.init&&(n.init=t.init),(0,d.isDefined)(t.mediaSequence)&&(n.mediaSequence=t.mediaSequence),(0,d.isDefined)(t.discontinuitySequenceNumber)&&(n.discontinuitySequenceNumber=t.discontinuitySequenceNumber),n}(e,o);return a&&(t.dateTime=a,t.startTime=(0,c.toSeconds)(a.getTime()),a=new Date(a.getTime()+(0,c.toMilliSeconds)(e.duration))),t}))}return o},e.prototype.r=function(e,t,n){if(t.SegmentURL.length<1)return e.entries=[],e.totalDuration=0,e.entries.length;for(var i=this.q(t.SegmentURL[0],n),r=0,o=0,a=0;a<e.entries.length;a++){var s=e.entries[a];if((0,S.isIdenticalSegmentInfo)(s,i))break;r+=s.duration,e.entries.splice(a,1),a--,o++,this.i.equals(n)&&this.rewindOneSegment()}return e.totalDuration-=r,o},e.prototype.s=function(e,t,n){for(var i=[],r=e.entries[e.entries.length-1],o=0,a=t.SegmentURL.length-1;a>=0;a--){var s=this.q(t.SegmentURL[a],n);if(r&&(0,S.isIdenticalSegmentInfo)(r,s)){if(_(r)){var u=O(r,s);e.totalDuration+=u}break}r&&(0,S.isIdenticalInitSegmentInfo)(r.init,s.init)&&(s.init=r.init),isNaN(s.duration)&&(s.duration=e.maximumSegmentDuration),s.duration/=e.timescale,o+=s.duration,i.push(s)}return e.totalDuration+=o,i.reverse(),e.entries=e.entries.concat(i),i.length},e.prototype.t=function(e,t){var n,i,r=t.SegmentList,o=t._internalId.representationId,a=null===(n=this.i)||void 0===n?void 0:n.equals(t._internalId),s=null===(i=null==r?void 0:r[0])||void 0===i?void 0:i.SegmentURL.length;if(!a||s){e.Uri&&e.Uri!==t.Uri&&this.u(e,null==r?void 0:r[0],a),e.Uri=t.Uri,e.timescale=1,e.maximumSegmentDuration=1,e.startNumber=1;for(var u=function(n){var i=r[n];if(i.hasOwnProperty("_duration")&&(e.maximumSegmentDuration=Number(i._duration)),["_timescale","_startNumber","_presentationTimeOffset"].filter((function(e){return i.hasOwnProperty(e)})).forEach((function(t){return e[t.substr(1)]=i[t]})),l.v(e,i,t),i.hasOwnProperty("SegmentURL")){var a=l.r(e,i,t._internalId),s=l.s(e,i,t._internalId);l.w(t._mimeType,o,a,s),l.m.isHlsManifest()?T(e.entries,t._internalId,l.m):l.x(e,t._internalId)}},l=this,c=0;c<r.length;c++)u(c)}},e.prototype.u=function(e,t,n){var i,r,o,a,s,l;if(this.m.isLive()&&n){var c=null!==(o=null===(r=null===(i=e.entries)||void 0===i?void 0:i[0])||void 0===r?void 0:r.mediaSequence)&&void 0!==o?o:1/0,d=(null!==(s=null===(a=null==t?void 0:t.SegmentURL[0])||void 0===a?void 0:a._mediaSequence)&&void 0!==s?s:0)-c,f=function(e){var t,n,i=e.totalDuration/(null!==(n=null===(t=e.entries)||void 0===t?void 0:t.length)&&void 0!==n?n:1);return Math.ceil(24/i)}(e);!isNaN(d)&&d>0&&d<f&&this.X(d)}(0,u.clearArray)(null!==(l=e.entries)&&void 0!==l?l:[])},e.prototype.v=function(e,t,n){var i,r=null===(i=f.ModuleManager.get(p.ModuleName.DASH,!1))||void 0===i?void 0:i.initSegmentInfoSourceDetectors.isInitializationNode;(null==r?void 0:r(t))?e.init=f.ModuleManager.get(p.ModuleName.DASH,!1).initSegmentInfoProviders.provideSegmentInfoFromInitializationNodeProperty(t,n):delete e.init},e.prototype.w=function(e,t,n,i){(n>0||i>0)&&this.f.debug("[".concat(e,"][").concat(t,"] Updated segment list, removed ").concat(n," segments and added ").concat(i," segments"))},e.prototype.x=function(e,t){var n=this.pb(t),i=0;e.entries.forEach((function(e){var t;e.startTime=n+i,i+=null!==(t=e.duration)&&void 0!==t?t:0}))},e.prototype.extrapolateStartTimesFromDiscontinuityStarts=function(e){var t,n,i,r,o=null===(n=null===(t=this.y())||void 0===t?void 0:t.getState())||void 0===n?void 0:n.hls;if(o){var a=e.getRepresentationId().representationId,s=this.getSegmentListEntries(this.i),u=f.ModuleManager.get(p.ModuleName.HLS).selectors,l=u.getDiscoSequenceTimings,c=u.getMergedDiscontinuityTimings,d=function(e,t){for(var n=e[0].discontinuitySequenceNumber,i=1;i<e.length;i++){var r=e[i].discontinuitySequenceNumber;if(r!==n){var o=m(t,r);if(null!=o)return{index:i,discontinuityStartTime:o}}}return null}(s,null!==(i=l(o,e.getMimeType()))&&void 0!==i?i:c(o));if(!d){var S=null===(r=this.Y())||void 0===r?void 0:r.start;if(void 0===S)return;d={index:0,discontinuityStartTime:S},this.f.debug("Could not find discontinuity boundary with start time, using period start time ".concat(S))}this.f.debug("Assigning segment start times for rep ".concat(a," from discontinuity at index ").concat(d.index," with time ").concat(d.discontinuityStartTime)),s[d.index].startTime=d.discontinuityStartTime;for(var h=d.index-1;h>=0;h--)s[h].startTime=s[h+1].startTime-s[h+1].duration;for(h=d.index+1;h<s.length;h++)s[h].startTime=s[h-1].startTime+s[h-1].duration}},e.prototype.y=function(){return this.d.serviceManager.get(o.ServiceName.SourceStoreService,this.d.sourceContext.sourceIdentifier)},e.prototype.z=function(e,t){for(var n=-1,i=this.getSegmentListEntries(t),r=i.length-1;r>=0;r--)if((0,S.isIdenticalSegmentInfo)(i[r],e)){n=r;break}return n},e.prototype.A=function(e){var t,n=this,i=null===(t=this.m)||void 0===t?void 0:t.getAdaptationSet(e);i&&i.Representation.forEach((function(e){var t=n.o[e._internalId.key()];if(t||(t=n.E(e._internalId.key())),e.hasOwnProperty("SegmentList")&&(n.t(t,e),f.ModuleManager.has(p.ModuleName.DASH))){var i=f.ModuleManager.get(p.ModuleName.DASH).initSegmentInfoSourceDetectors.isInitializationNode;if(!t.hasOwnProperty("init")&&e.hasOwnProperty("SegmentBase")&&e.SegmentBase&&i(e.SegmentBase[0])){var r=f.ModuleManager.get(p.ModuleName.DASH).initSegmentInfoProviders.provideSegmentInfoFromInitializationNodeProperty;t.init=r(e.SegmentBase[0],e)}}}))},e.prototype.B=function(){var e,t,n=this,i=null===(e=this.d.serviceManager.get(o.ServiceName.SourceStoreService,this.e.sourceIdentifier).getState().activeTracks)||void 0===e?void 0:e[this.j.adaptationSetId];if((null===(t=null==i?void 0:i.selectedRepresentationId)||void 0===t?void 0:t.periodId)===this.j.periodId)return i.selectedRepresentationId;if(this.i){var r=this.m.getRepresentation(this.j,this.i.representationId);if(r)return r._internalId}return(this.C((function(e){return n.isSegmentInfoLoaded(e._internalId)}))||this.C())._internalId},e.prototype.C=function(e){return this.m.getMatchingRepresentationByBandwidth(this.j,this.F(),e)},e.prototype.D=function(){var e=this.j.equals(this.i),t=!this.i||Boolean(this.m.getRepresentationById(this.i));return!this.i||!e||!t},e.prototype.setAdaptationSetId=function(e){this.j=e,this.A(this.j);var t,n=this.m.isLive(),i=0;this.D()&&(this.i=this.B());var r=this.o[this.i.key()];if(r||(r=this.E(this.i.key())),r&&n&&r.entries&&r.entries.length>0){var o=r.entries.length-1;this.h>o&&(i=this.h-o),this.h=Math.min(o,this.h||0),this.h=Math.max(0,this.h),t=r.entries[this.h]}if(this.h=this.h||0,n&&(this.l=this.getSegmentDuration()*this.g.LIVE_SEGMENT_LIST_START_INDEX_OFFSET),n){if(t&&r){var a=this.z(t,this.i);a>=0?this.h=a+i:this.H()}else this.H();var s=this.G();s?this.T(s):this.resolvePendingSegmentInfoRequests()}else this.resolvePendingSegmentInfoRequests()},e.prototype.E=function(e){var t={totalDuration:0,entries:[],SegmentURL:[],startNumber:0,init:null,maximumSegmentDuration:1,timescale:1};return this.o[e]=t,t},e.prototype.F=function(){var e=0,t=this.kb();return t&&(e=t._bandwidth),e},e.prototype.G=function(){var e;if(this.m.isHlsManifest()){var t=this.m.getRepresentationById(this.i);if(null===(e=null==t?void 0:t._hls)||void 0===e?void 0:e.loadFailureReason)return t._hls.loadFailureReason}return this.hasNext()||this.m.isLastPeriod(this.i.periodId)?null:v.SegmentInfoError.PERIOD_COMPLETE},e.prototype.H=function(){this.g.ENABLE_SEEK_FOR_LIVE?this.h=0:this.timeShift(0)},e.prototype.I=function(e,t){var n,i,r=this.m.getRepresentationById(e),o=this.m.getRepresentationById(t),a=(0,d.isNumber)(null===(n=null==o?void 0:o._hls)||void 0===n?void 0:n.mediaSequence)&&(0,d.isNumber)(null===(i=null==r?void 0:r._hls)||void 0===i?void 0:i.mediaSequence);if(r&&o&&a){var s=o._hls.mediaSequence-r._hls.mediaSequence,l=this.getSegmentListEntries(e),c=this.getSegmentListEntries(t);s>=l.length||(c[0].startTime=l[s].startTime,(0,u.forEachFromIndex)(c,1,(function(e,t){(0,d.isNumber)(e.startTime)&&(0,d.isNumber)(e.duration)&&(t.startTime=e.startTime+e.duration)})))}},e.prototype.setRepresentationId=function(e){var t=this.m.getRepresentationById(e),n=this.getSegmentListEntries(this.i)[this.h];if(t){var i=void 0===this.i,r=this.i;if(this.i=e,this.m.isLive()&&t._hls)if(this.g.HLS_SYNC_SEGMENT_PLAYBACK_TIME_VIA_MEDIA_SEQUENCE&&this.I(r,this.i),i)this.H();else if(this.g.HLS_SYNC_VIA_MEDIA_SEQUENCE){var o=this.m.getRepresentationById(r)._hls.mediaSequence+this.h;this.h=o-t._hls.mediaSequence,this.h=Math.max(this.h,0)}else if(null!=(null==n?void 0:n.startTime)&&!isNaN(n.startTime)){var a=this.ob(n.startTime);null===a||isNaN(a)||(this.h=this.J(a,n.startTime))}return!0}return!1},e.prototype.J=function(e,t){var n=this.getSegmentListEntries(this.i),i=[n[e],n[e+1]];if(e===n.length-1||i.some((function(e){return!e.startTime})))return e;var r=i.map((function(e){return Math.abs(e.startTime-t)})),o=Math.min.apply(this,r);return e+r.indexOf(o)},e.prototype.getInitSegmentInfo=function(){var e=this.lb(this.i);if(null==e?void 0:e.init)return e.init.presentationTimeOffset=this.getTimestampOffset(),e.init;var t=this.getSegmentListEntries(this.i);if(this.Q(t)&&this.h>-1){var n=i({},t[this.h]);if(n.init){var r=n.init;return r.isInitSegment=!0,r}}return null},e.prototype.K=function(e){var t;if(!(this.getSegmentListEntries(this.i).length<1||this.h<0)){var n=this.L(e);return n&&this.f.debug("".concat(null===(t=this.j)||void 0===t?void 0:t.adaptationSetId," given time ").concat(e," matches seek time, performing precise segment/part search"),e),(0,g.isPlayingLowLatencyHls)(this.d)&&this.M(e,n),this.N(e,n)}},e.prototype.L=function(e){var t;return e===(null===(t=this.p)||void 0===t?void 0:t.targetPlaybackTime)||!1},e.prototype.M=function(e,t){var n;if(0!==e){if(this.h=this.ob(e),!t){var i=this.getSegmentListEntries(this.i),r=i[this.h];if(!(r.parts&&r.parts.length>0)){var o=this.h;this.h=b(e,this.h,i),this.h!==o&&this.f.debug("Snapped segment index for time ".concat(e," to next segment boundary at ").concat(null===(n=i[this.h])||void 0===n?void 0:n.startTime))}}}else this.d.logger.debug("Ignoring target time of 0 for LL-HLS")},e.prototype.N=function(e,t){var n=this.getSegmentListEntries(this.i);if(this.Q(n)){var i=n[this.h];if(!(i.parts&&i.parts.length>0))return this.P();if(_(i))return R(i,e,t);var r=R(i,e,t);return r?i.parts.indexOf(r)>0?r:this.P():(this.h++,this.N(e,t))}},e.prototype.getNextSegmentInfo=function(e){var t=this.K(e);return t?(this.O(t),Promise.resolve(t)):this.S({time:e})},e.prototype.O=function(e){return e.presentationTimeOffset=this.getTimestampOffset(),e.startTime&&(e.wallClockTime=(0,c.toMilliSeconds)(e.startTime)),e},e.prototype.P=function(){return this.getSegmentListEntries(this.i)[this.h++]},e.prototype.getSegmentInfos=function(){var e=this,t={},n=this.m.getAdaptationSet(this.j);return n&&n.Representation.forEach((function(n){var i=e.getSegmentListEntries(n._internalId);t[n._id]=i.map((function(e){return{url:e.url,duration:e.duration,startTime:e.startTime}}))})),t},e.prototype.getSubtitleUrl=function(){return this.m.getAvailableSubtitles(this.j.periodId)[0].url},e.prototype.getStartNumber=function(){var e=this.lb(this.i);return e?e.startNumber:1},e.prototype.getSegmentDuration=function(){var e=this,t=this.lb(this.i),n=this.getSegmentListEntries(this.i);if(t)return n.length>0&&(0,d.isNumber)(t.totalDuration)?t.totalDuration/n.length:t.maximumSegmentDuration;if(this.m.getAdaptationSet(this.j)){var i=Object.keys(this.o).map((function(t){return e.o[t]})).find((function(e){return null!==e}));if(i)return i.maximumSegmentDuration}return 1},e.prototype.seekTo=function(e){e>-1&&(this.h=this.ob(e))},e.prototype.Q=function(e){return this.h<e.length},e.prototype.hasNext=function(){var e=this.getSegmentListEntries(this.i);return!this.i||!e.length||(this.m.isLive()?this.R(e):this.Q(e))},e.prototype.R=function(e){return!!this.m.isLastPeriod(this.i.periodId)||this.Q(e)},e.prototype.setTimestampOffset=function(e,t){void 0===t&&(t=1),this.n=e/t},e.prototype.getTimestampOffset=function(){if(!isNaN(this.n))return this.n;var e=this.Y(),t=0;if(this.i){var n=this.lb(this.i);n&&!isNaN(n.presentationTimeOffset)&&(t=n.presentationTimeOffset/n.timescale)}return e&&!this.m.isHlsManifest()&&(t-=e.start),t},e.prototype.getIndex=function(){return this.h},e.prototype.setIndex=function(e){if("number"==typeof e)return e<0?(this.f.debug("Tried to set index at MPDHandler to value smaller 0. Setting to 0."),void(this.h=0)):void(this.h=e);this.f.debug("Tried to set index at MPDHandler with parameter not being a number!")},e.prototype.S=function(e){var t,n=this;if(this.k)return Promise.reject("fail");var r=this.m.getRepresentationById(this.i);return(null===(t=null==r?void 0:r._hls)||void 0===t?void 0:t.loadFailureReason)?Promise.reject(r._hls.loadFailureReason):(this.f.debug("No segment info was found for the target time. Waiting for representation update."),new Promise((function(t,r){n.k=i(i({},e),{resolve:t,reject:r})})))},e.prototype.resolvePendingSegmentInfoRequests=function(){if(this.k){var e=this.K(this.k.time);e?(this.O(e),this.k.resolve(e),this.k=null):this.m.isLive()||this.hasNext()||this.k.reject(v.SegmentInfoError.END_OF_STREAM_REACHED)}},e.prototype.T=function(e){this.k&&(this.k.reject(e),this.k=null)},e.prototype.U=function(){var e=this.getSegmentListEntries(this.i);return e.length>0?e.length-1:0},e.prototype.V=function(e){for(var t,n=Math.abs(e),i=this.getSegmentDuration(),r=this.getSegmentListEntries(this.i),o=this.U(),a=0,s=r.length-1;s>=0&&!((a+=null!==(t=r[s].duration)&&void 0!==t?t:i)>=n);s--)o--;return Math.max(0,o)},e.prototype.timeShift=function(e,t,n){if(this.m.isLive()){var i=this.h;this.h=n&&this.W()?this.ob(n):this.V(e),this.f.debug("timeShift changes index from ".concat(i," to ").concat(this.h,", based on")+" offset ".concat(e," and target time ").concat(n))}},e.prototype.W=function(){var e,t=null===(e=this.getSegmentListEntries(this.i)[0])||void 0===e?void 0:e.startTime;return(0,d.isNumber)(t)&&t>=0},e.prototype.updateRepresentation=function(e){return Promise.resolve(e)},e.prototype.isSegmentInfoLoaded=function(e){if(void 0===e&&(e=this.i),!e)return!1;var t=this.getSegmentListEntries(e),n=this.m.getRepresentationById(e);return!(!t.length||!n)},e.prototype.X=function(e){this.f.debug("Rewinding segment list index by ".concat(e," segments")),this.h-=e,this.h<0&&(this.f.debug("List array index is smaller than 0, probably a discontinuity. Using 0."),this.h=0)},e.prototype.rewindOneSegment=function(){return this.h--,!(this.h<0&&(this.f.debug("List array index is smaller than 0, probably a discontinuity. Using 0."),this.h=0,1))},e.prototype.Y=function(){return this.m.getPeriod(this.i)},e.prototype.Z=function(e){var t=this.Y().start;return(this.m.hasSinglePeriod()?this.getSeekableRange().start:t)+this.getSegmentListEntries(this.i).slice(0,e).reduce((function(e,t){return e+t.duration}),0)},e.prototype.kb=function(){return this.m.getRepresentationById(this.i)},e.prototype.lb=function(e){if(e)return this.o[e.key()]},e.prototype.getSegmentListEntries=function(e){var t,n;return e?this.g.ENABLE_SEGMENT_INFO_PROVIDER_FROM_STORE&&this.m.isHlsManifest()?this.mb(e):null!==(n=null===(t=this.lb(e))||void 0===t?void 0:t.entries)&&void 0!==n?n:[]:[]},e.prototype.mb=function(e){var t,n=null===(t=this.y())||void 0===t?void 0:t.getState();return(0,h.getSegmentInfos)(n,e.key())},e.prototype.nb=function(e,t){var n,i;if(!this.j)return 0;for(var r=this.m.getPeriod(this.j),o=null!==(n=null==r?void 0:r.start)&&void 0!==n?n:0,a=this.getSegmentListEntries(this.i),s=0,u=o;u<=t&&s<a.length;s++)u+=null!==(i=a[s].duration)&&void 0!==i?i:0;return Math.max(s-1,0)},e.prototype.ob=function(e){var t=this.lb(this.i),n=this.getSegmentListEntries(this.i);if(!t||0===n.length||!(0,d.isNumber)(t.totalDuration))return 0;var i=this.pb(),r=Math.max(i,e),o=t.totalDuration/n.length,a=(0,E.findSegmentIndexForTime)(n,r,o);return null!==a?a:this.nb(t,r)},e.prototype.pb=function(e){void 0===e&&(e=this.i);var t=this.m.hasSinglePeriod()?this.getSeekableRange().start:this.m.getPeriod(e).start;return this.m.isFirstPeriod(e.periodId)&&(t+=this.l),t},e.prototype.getLiveEdgeTime=function(){var e,t=null===(e=this.m)||void 0===e?void 0:e.getLastPeriod();return t?t.start+l.DurationConverter.getDurationInSec(t._duration):1/0},e.prototype.getActualTimeShiftBufferDepth=function(){return this.m.getTimeShiftBufferDepthSeconds()},e.prototype.getSeekableRange=function(){var e={start:0,end:0},t=this.m.getTotalDuration();if(!this.m.isLive())return e.start=(0,a.getStartTimeOffset)(this.y().getState()),e.end=t,e;var n=this.m.getTimeShiftBufferDepthSeconds(),i=(0,c.toSeconds)(this.m.getRequestTimestamp()-this.m.getAvailabilityStartTime());if(e.start=Math.max(i+n,0),e.end=Math.max(i,0),f.ModuleManager.has(p.ModuleName.HLS)&&this.m.isHlsManifest()){var r=f.ModuleManager.get(p.ModuleName.HLS).selectors,o=r.getHlsState;"EVENT"===(0,r.getPlaylistType)(o(this.y().getState()))?(e.start=0,e.end=t):e.start+=this.l}return e.end-=this.m.getDesiredDistanceToLiveEdge(),e},e.prototype.getPendingSegmentInfoRequest=function(){return this.k},e.prototype.setPendingSegmentInfoRequest=function(e){this.k=e},e.prototype.canSwitchRepresentation=function(e){var t,n=this.getSegmentListEntries(this.i)[this.h];if(!n)return!0;var i=function(e,t,n){return void 0!==t.startTime&&void 0!==t.duration&&Math.abs(e-(t.startTime+t.duration))<n}(e,n,this.g.LL_HLS_SEGMENT_END_TIME_MATCHING_TOLERANCE);if(!_(n)&&i)return!0;var r=this.L(e);return!((null===(t=null==n?void 0:n.parts)||void 0===t?void 0:t.length)&&R(n,e,r)!==n.parts[0])},e.prototype.getLatestTimeForPossibleSwitch=function(e){var t,n=this.qb(e),i=n.isLoadingCurrentSegmentsParts,r=n.currentSegment;return r&&i&&null!==(t=r.startTime)&&void 0!==t?t:e},e.prototype.adjustTimeToNextSegmentStart=function(e){var t=this.qb(e),n=t.isLoadingCurrentSegmentsParts,i=t.currentSegment;return n&&(null==i?void 0:i.startTime)&&(null==i?void 0:i.duration)?i.startTime+i.duration:e},e.prototype.qb=function(e){var t,n=function(e,t){var n,i,r;if(t&&!(t.length<1)&&(null===(n=t[0])||void 0===n?void 0:n.duration)){var o=(0,E.findSegmentIndexForTime)(t,e,t[0].duration),a=null===o,s=e<(null!==(r=null===(i=t[0])||void 0===i?void 0:i.startTime)&&void 0!==r?r:1/0),u=t[t.length-1];if(void 0!==u.startTime&&void 0!==u.duration){var l=e>u.startTime+u.duration;if(!(a||s||l))return t[o]}}}(e,this.getSegmentListEntries(this.i)),i=null===(t=null==n?void 0:n.parts)||void 0===t?void 0:t[0],r=this.L(e),o=!1;if(i&&n){var a=R(n,e,r);o=void 0!==a&&a!==i}return{currentSegment:n,isLoadingCurrentSegmentsParts:o}},e.prototype.dispose=function(){this.g=null,this.m=null,this.j=null,this.i=null,this.m=null,this.k=null,this.o=null},e}();function m(e,t){var n=e[String(t)];return n&&n.startTime>0?n.startTime:(n=e[String(t-1)])&&n.endTime>0?n.endTime:null}function T(e,t,n){var i;e.length&&n.hasSegmentStartTimeForHlsRepresentation(t)&&(null!=e[0].startTime?i=(0,u.findIndexFromEnd)(e,(function(e){return null!=e.startTime}))+1:(e[0].startTime=n.getStartTimeForHlsSegment(t,e[0]),i=1),(0,u.forEachFromIndex)(e,i,(function(e,t){return t.startTime=e.startTime+e.duration})))}function _(e){return e.url.endsWith(t.PHANTOM_SEGMENT_URL)}function O(e,n){var i=n.duration-e.duration;return I(n,e,["url","mediaURL","duration","parts","init","key","discontinuitySequenceNumber","isDiscontinuityStart"]),!e.url.endsWith(t.PHANTOM_SEGMENT_URL)&&(e.url=(0,s.forceReallocation)(e.url)),i}function I(e,t,n){n.forEach((function(n){return t[n]=e[n]}))}function R(e,t,n){var i,r=null===(i=e.parts)||void 0===i?void 0:i.every(E.isSegmentTiming);if(e.parts&&r){var o=e.parts,a=o.reduce((function(e,t){return e+t.duration}),0)/o.length,s=(0,E.findSegmentIndexForTime)(o,t,a);if(null!=s)return n?e.parts[0]:(s=b(t,s,o),e.parts[s])}}function b(e,t,n){var i=n[t],r=i.startTime+i.duration;return Math.abs(e-i.startTime)<=Math.abs(e-r)?t:t+1}t.SegmentListMPDHandler=y},3068:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isBoolean=t.isNumber=void 0,t.isDefined=function(e){return null!=e},t.isVideoRepresentation=function(e){return null!=e._height&&null!=e._width},t.isNumber=function(e){return"number"==typeof e},t.isBoolean=function(e){return"boolean"==typeof e}},3336:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerError=void 0;var i=n(306),r=function(){return function(e,t,n,r){this.code=e,this.name=i.ErrorCode[e],this.sourceIdentifier=r,this.message=null!=n?n:"".concat(this.name),this.data=t,"captureStackTrace"in Error&&"function"==typeof Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error(this.message).stack}}();t.PlayerError=r},3577:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSegments=function(e,t,n,d){void 0===d&&(d={});for(var h,g=[],v=0,E=(0,c.generateSegmentEntrySkeleton)(),y=r([],t,!0),m=0,T=n.mediaSequence,_={keys:[],keyInUse:!1},O=function(e){!function(e,t,n,i,o,a,s){e.duration=t,e.uri=n,e.mediaSequence=s,i&&(e.init=i),a.length>0&&(e.customTags=a),o.keys.length>0&&(e.keys=r([],o.keys,!0),o.keyInUse=!0)}(E,m,e,h,_,y,T),g.push(E),v+=m,T++,function(){E=(0,c.generateSegmentEntrySkeleton)(),y=[],m=0}()},I=function(e){var t,s,f=(0,u.parseTag)(e);switch(f.name){case"EXTINF":m=parseFloat(f.value);break;case"EXT-X-BYTERANGE":E.byterange=(0,c.generateByteRangeTag)(f,g);break;case"EXT-X-DISCONTINUITY":E.discontinuity=!0;break;case"EXT-X-PROGRAM-DATE-TIME":!function(e,t){t.value&&(e.dateTime=new Date(t.value))}(E,f);break;case"EXT-X-KEY":if("NONE"===(null===(t=f.attributes)||void 0===t?void 0:t.METHOD)){_.keys=[{method:o.HlsEncryptionMethod.NONE}];break}!function(e,t){t.keyInUse&&(t.keys=[],t.keyInUse=!1);var n=(0,c.generateKeyTag)(e);void 0!==n&&t.keys.push(n)}(f,_);break;case"EXT-X-MAP":h=(0,c.generateMapTag)(f,_);break;case"EXT-X-DATERANGE":n.dateRange.push((0,c.generateDateRange)(f));break;case"EXT-X-CUE-OUT-CONT":E.cueTag=(0,c.generateCueTag)(f,"CUE-OUT-CONT");break;case"EXT-X-CUE-OUT":E.cueTag=(0,c.generateCueTag)(f,"CUE-OUT");break;case"EXT-X-CUE-IN":E.cueTag=(0,c.generateCueTag)(f,"CUE-IN");break;case"EXT-X-SCTE35":!function(e,t){var n;void 0===e.scte35&&(e.scte35=[]),e.scte35.push({type:a.MetadataType.SCTE,attributes:i({CUE:null===(n=t.attributes)||void 0===n?void 0:n.CUE},t.attributes)})}(E,f);break;case"EXT-X-PART":!function(e,t,n){var i;if(n.parsePartTags){t.parts=null!==(i=t.parts)&&void 0!==i?i:[];var r=t.parts[t.parts.length-1];t.parts.push((0,c.generatePartTag)(e.attributes,r))}}(f,E,d);break;case"EXT-X-PRELOAD-HINT":var p=function(e,t,n){return n.parsePartTags&&t?(0,c.generatePreloadHintTag)(e.attributes,t.targetDuration):{}}(f,n.partInfo,d);p.init&&(h=p.init,_.keys.length>0&&(h.keys=r([],_.keys,!0),_.keyInUse=!0)),p.part&&(E.parts=null!==(s=E.parts)&&void 0!==s?s:[],E.parts.push(p.part));break;case"EXT-X-SKIP":var S=(0,c.generateSkipTag)(f);n.skippedSegmentsCount=S.skippedSegments,T+=S.skippedSegments;break;case"EXT-X-ENDLIST":n.endList=!0;break;default:(0,l.resolvePlaylistTag)(n,f,y)}},R=0,b=e;R<b.length;R++){var N=p(b[R]);""!==N&&(N.startsWith("#")?S(N)?f(n,y,N):I(N):O(N))}E.parts&&E.parts.length>0&&(m=E.parts.reduce((function(e,t){return e+t.duration}),0),O(s.PHANTOM_SEGMENT_URL)),n.segments=g,n.totalDuration=v},t.addCustomTagToPlaylistTagList=d,t.handleCustomTag=f,t.removeTrailingWhitespaces=p,t.isCustomTag=S;var o=n(6790),a=n(3714),s=n(3066),u=n(1908),l=n(1945),c=n(5707);function d(e,t){void 0===e.tags&&(e.tags=[]),t&&e.tags.push(t)}function f(e,t,n){t.push({type:a.MetadataType.CUSTOM,attributes:n}),d(e,(0,c.generateCustomTag)(n))}function p(e){return e.replace(/^[ \\t]+/g,"")}function S(e){return/^#(?!EXT)/m.test(e)}},3714:function(e,t){var n,i,r,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.ContentLocationChangedReason=t.LatencyMode=t.AdInteractionType=t.AdQuartile=t.MetadataType=t.PlayerEvent=void 0,function(e){e.Ready="ready",e.Play="play",e.Playing="playing",e.Paused="paused",e.Seek="seek",e.Seeked="seeked",e.TimeShift="timeshift",e.TimeShifted="timeshifted",e.VolumeChanged="volumechanged",e.Muted="muted",e.Unmuted="unmuted",e.PlayerResized="playerresized",e.PlaybackFinished="playbackfinished",e.Error="error",e.Warning="warning",e.StallStarted="stallstarted",e.StallEnded="stallended",e.AudioChanged="audiochanged",e.AudioAdded="audioadded",e.AudioRemoved="audioremoved",e.VideoQualityChanged="videoqualitychanged",e.AudioQualityChanged="audioqualitychanged",e.VideoDownloadQualityChange="videodownloadqualitychange",e.AudioDownloadQualityChange="audiodownloadqualitychange",e.VideoDownloadQualityChanged="videodownloadqualitychanged",e.AudioDownloadQualityChanged="audiodownloadqualitychanged",e.VideoPlaybackQualityChanged="videoplaybackqualitychanged",e.AudioPlaybackQualityChanged="audioplaybackqualitychanged",e.TimeChanged="timechanged",e.CueParsed="cueparsed",e.CueEnter="cueenter",e.CueUpdate="cueupdate",e.CueExit="cueexit",e.SegmentPlayback="segmentplayback",e.Metadata="metadata",e.MetadataParsed="metadataparsed",e.MetadataChanged="metadatachanged",e.VideoAdaptation="videoadaptation",e.AudioAdaptation="audioadaptation",e.DownloadFinished="downloadfinished",e.SegmentRequestFinished="segmentrequestfinished",e.AdManifestLoaded="admanifestloaded",e.AdStarted="adstarted",e.OverlayAdStarted="overlayadstarted",e.AdQuartile="adquartile",e.AdSkipped="adskipped",e.AdClicked="adclicked",e.AdInteraction="adinteraction",e.AdLinearityChanged="adlinearitychanged",e.AdBreakStarted="adbreakstarted",e.AdBreakFinished="adbreakfinished",e.RestoringContent="restoringcontent",e.AdFinished="adfinished",e.AdError="aderror",e.VRViewingDirectionChange="vrviewingdirectionchange",e.VRViewingDirectionChanged="vrviewingdirectionchanged",e.VRStereoChanged="vrstereochanged",e.CastAvailable="castavailable",e.CastStopped="caststopped",e.CastStart="caststart",e.CastStarted="caststarted",e.CastWaitingForDevice="castwaitingfordevice",e.SourceLoaded="sourceloaded",e.SourceUnloaded="sourceunloaded",e.PeriodSwitch="periodswitch",e.PeriodSwitched="periodswitched",e.DVRWindowExceeded="dvrwindowexceeded",e.SubtitleAdded="subtitleadded",e.SubtitleRemoved="subtitleremoved",e.ShowAirplayTargetPicker="showairplaytargetpicker",e.AirplayAvailable="airplayavailable",e.AirplayChanged="airplaychanged",e.Destroy="destroy",e.PlaybackSpeedChanged="playbackspeedchanged",e.DurationChanged="durationchanged",e.ViewModeChanged="viewmodechanged",e.ModuleReady="moduleready",e.SubtitleEnable="subtitleenable",e.SubtitleEnabled="subtitleenabled",e.SubtitleDisable="subtitledisable",e.SubtitleDisabled="subtitledisabled",e.VideoQualityAdded="videoqualityadded",e.VideoQualityRemoved="videoqualityremoved",e.AudioQualityAdded="audioqualityadded",e.AudioQualityRemoved="audioqualityremoved",e.TargetLatencyChanged="targetlatencychanged",e.LatencyModeChanged="latencymodechanged",e.LicenseValidated="licensevalidated",e.DrmLicenseAdded="drmlicenseadded",e.AspectRatioChanged="aspectratiochanged",e.ContentLocationChanged="contentlocationchanged"}(n||(t.PlayerEvent=n={})),function(e){e.CUETAG="CUETAG",e.DATERANGE="DATERANGE",e.EVENT_STREAM="EVENT-STREAM",e.CUSTOM="CUSTOM",e.SCTE="SCTE",e.ID3="ID3",e.EMSG="EMSG",e.CAST="CAST"}(i||(t.MetadataType=i={})),function(e){e.FIRST_QUARTILE="firstQuartile",e.MIDPOINT="midpoint",e.THIRD_QUARTILE="thirdQuartile"}(r||(t.AdQuartile=r={})),function(e){e.Vpaid="vpaid"}(o||(t.AdInteractionType=o={})),function(e){e.Idle="idle",e.Catchup="catchup",e.Fallback="fallback",e.Suspended="suspended"}(a||(t.LatencyMode=a={})),function(e){e.Failover="failover",e.ContentSteering="contentsteering"}(s||(t.ContentLocationChangedReason=s={}))},3793:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StaticActionTypes=void 0,function(e){e.Default="default"}(n||(t.StaticActionTypes=n={})),t.default=function(e,t){return function(i,r){return void 0===i&&(i=e),t[r.type]?t[r.type](i,r):t[n.Default]?t[n.Default](i,r):i}}},3878:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringEndsWithPolyfill=void 0,t.StringEndsWithPolyfill=function(){return{polyfill:function(){String.prototype.endsWith=function(e,t){if(null==e)return!1;var n=this.length;return null!=t&&(n=Math.min(t,this.length)),this.substring(n-e.length,n)===e}}}}()},4053:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.SegmentInfoError=void 0,function(e){e.END_OF_STREAM_REACHED="END_OF_STREAM_REACHED",e.PERIOD_COMPLETE="PERIOD_COMPLETE",e.SEGMENT_EXCEEDING_PERIOD_DURATION="SEGMENT_EXCEEDING_PERIOD_DURATION"}(n||(t.SegmentInfoError=n={}))},4081:function(e,t){var n;function i(e){return"Math"in e&&e.Math===Math}Object.defineProperty(t,"__esModule",{value:!0});var r=null!==(n=function(){return"object"==typeof window&&window&&i(window)?window:void 0}())&&void 0!==n?n:function(){return"object"==typeof self&&self&&i(self)?self:void 0}();t.default=r},4205:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.StringIncludesPolyfill=void 0,t.StringIncludesPolyfill=function(){return{polyfill:function(){String.prototype.includes=function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}}}}()},4468:function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.TimeMode=t.SupportedTechnologyMode=t.ViewMode=t.PlayerAPINotAvailableError=t.LogLevel=t.BufferType=t.MediaType=t.StreamType=t.PlayerType=void 0;var r=n(306),o=n(3336),a=n(2886);Object.defineProperty(t,"PlayerType",{enumerable:!0,get:function(){return a.PlayerType}});var s,u,l,c=n(5623);Object.defineProperty(t,"StreamType",{enumerable:!0,get:function(){return c.StreamType}}),function(e){e.Audio="audio",e.Video="video",e.Subtitles="subtitles",e.Thumbnails="thumbnails"}(s||(t.MediaType=s={})),function(e){e.ForwardDuration="forwardduration",e.BackwardDuration="backwardduration"}(u||(t.BufferType=u={})),function(e){e.DEBUG="debug",e.LOG="log",e.WARN="warn",e.ERROR="error",e.OFF="off"}(l||(t.LogLevel=l={}));var d,f,p,S=function(e){function t(t){return e.call(this,r.ErrorCode.API_NOT_AVAILABLE,void 0,"Cannot use the `player.".concat(t,"` API: the player has already been destroyed."))||this}return i(t,e),t}(o.PlayerError);t.PlayerAPINotAvailableError=S,function(e){e.Inline="inline",e.Fullscreen="fullscreen",e.PictureInPicture="pictureinpicture"}(d||(t.ViewMode=d={})),function(e){e.Platform="platform",e.Modules="modules",e.PlatformAndModules="platformandmodules"}(f||(t.SupportedTechnologyMode=f={})),function(e){e.RelativeTime="relativetime",e.AbsoluteTime="absolutetime"}(p||(t.TimeMode=p={}))},4499:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayIncludesPolyfill=void 0,t.ArrayIncludesPolyfill=function(){return{polyfill:function(){Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError(\'"this" is null or not defined\');var n=Object(this),i=n.length>>>0;if(0===i)return!1;var r=0|t,o=Math.max(r>=0?r:i-Math.abs(r),0);function a(e,t){return e===t||"number"==typeof e&&"number"==typeof t&&isNaN(e)&&isNaN(t)}for(;o<i;){if(a(n[o],e))return!0;o++}return!1}})}}}()},4638:function(e,t,n){var i,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.CapabilityReducer=void 0;var o=n(3793),a=n(7387);t.CapabilityReducer=(0,o.default)({},((i={})[a.CapabilityActionType.InitCapabilities]=function(e,t){return function(e){return e}(t.payload)},i[a.CapabilityActionType.SetCapability]=function(e,t){return function(e,t){var n,i=t.key,o=t.value;return r(r({},e),((n={})[i]=o,n))}(e,t.payload)},i))},4685:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e},t.isContextAvailable=function(e){return void 0!==e&&!e.isDisposed}},4853:function(e,t,n){var i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.ArrayHelper=void 0,t.invert=function(e){return function(t,n,i){return!e(t,n,i)}},t.findIndexFromEnd=a,t.findIndexWithin=function(e,t,n,i){for(var r=t;r<n;r++)if(i(e[r]))return r;return-1},t.findFromEnd=function(e,t){return e[a(e,t)]},t.forEachFromIndex=function(e,t,n){for(;t<e.length;t++)n(e[t-1],e[t])},t.forceArray=function(e){return Array.isArray(e)?e:[e]},t.contains=function(e,t,n){return void 0===n&&(n=s),null!=e.find((function(e){return n(t,e)}))},t.shallowObjectMatcher=s,t.clearArray=function(e){e.splice(0,e.length)},t.removeEntriesFromStart=function(e,t){return t<1?[]:e.splice(0,t)};var r=n(233),o=function(){function e(){}return e.comparePrimitiveArrays=function(e,t){if(e.length!==t.length)return!1;for(var n=0;n<e.length;n++)if(e[n]!==t[n])return!1;return!0},e.stringToArrayWithoutEncoding=function(e){for(var t=new Uint8Array(e.length),n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t},e.convertBufferSourceToUTF8=function(t,n){return void 0===n&&(n="utf-8"),t instanceof ArrayBuffer?t=new Uint8Array(t):t instanceof DataView&&(t=new Uint8Array(t.buffer,t.byteOffset,t.byteLength)),e.convertUint8ArrayToUtf8(t,n)},e.convertUint8ArrayToUtf8=function(e,t){if("undefined"!=typeof TextDecoder)return new TextDecoder(t).decode(e);for(var n=0,i="";n<e.length;){var r=e[n++];if(r>127)if(r>191&&r<224){if(n>=e.length||64&e[n]){i+="";continue}r=(31&r)<<6|63&e[n++]}else if(r>223&&r<240){if(n+1>=e.length||64&e[n]||64&e[n+1]){i+="";continue}r=(15&r)<<12|(63&e[n++])<<6|63&e[n++]}else{if(!(r>239&&r<248)){i+="";continue}if(n+2>=e.length||64&e[n]||64&e[n+1]||64&e[n+2]){i+="";continue}r=(7&r)<<18|(63&e[n++])<<12|(63&e[n++])<<6|63&e[n++]}r<=65535?i+=String.fromCharCode(r):r<=1114111?(r-=65536,i+=String.fromCharCode(r>>10|55296),i+=String.fromCharCode(1023&r|56320)):i+=""}return i},e.sort=function(e,t,n){if("string"==typeof t&&"[object Array]"===Object.prototype.toString.call(e)){var i;if(n||(n="asc"),"asc"===n)i=-1;else{if("desc"!==n)return;i=1}return e.length<2?e:e.sort((function(e,n){return e[t]<n[t]?i:e[t]>n[t]?-1*i:0}))}},e.append=function(t,n){var i=e.getTypedArrayType(t),r=e.getTypedArrayType(n);if(!i&&!r||i!==r)return null;var o=new i((t.byteLength+n.byteLength)/i.BYTES_PER_ELEMENT);return o.set(new i(t),0),o.set(new i(n),t.byteLength/i.BYTES_PER_ELEMENT),o},e.concatBuffers=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(!(e=e.filter((function(e){return e}))).length)return null;var n=e.reduce((function(e,t){return e+t.byteLength}),0),i=new Uint8Array(n);return e.reduce((function(e,t){return i.set(new Uint8Array(t),e),e+t.byteLength}),0),i.buffer},e.getTypedArrayType=function(e){return e instanceof Uint8Array?Uint8Array:e instanceof Uint16Array?Uint16Array:e instanceof Uint32Array?Uint32Array:null},e.getArray=function(t){return e.getTypedArrayType(t)?[].slice.call(t):Array.isArray(t)?t:null},e.union=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[];return e.filter((function(e){return Boolean(e)})).forEach((function(e){return e.forEach((function(e){n.includes(e)||n.push(e)}))})),n},e.isArrayBuffer=function(e){return Boolean(e)&&e instanceof ArrayBuffer&&void 0!==e.byteLength},e.arrayBufferToAsciiString=function(t,n){return void 0===n&&(n=!0),e.sparseArrayBufferToAsciiString(t,1,0,n)},e.arrayBufferToBase64=function(e){for(var t="",n=new Uint8Array(e),i=0;i<n.length;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)},e.sparseArrayBufferToAsciiString=function(e,t,n,i){void 0===t&&(t=2),void 0===n&&(n=0),void 0===i&&(i=!0);for(var r="",o=i?new Uint8Array(e):new Uint16Array(e),a=n;a<o.length;a+=t)r+=String.fromCharCode(o[a]);return r},e.intersect=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i=[],r=t.filter((function(e){return Boolean(e)}));return e.union.apply(e,t).forEach((function(e){r.every((function(t){return t.includes(e)}))&&i.push(e)})),i},e.addAndMergeIntersects=function(t,n){var r=t.filter((function(t){return e.intersect(t,n).length>0})),o=t.filter((function(e){return!r.includes(e)}));return 0===r.length?i(i([],t,!0),[n],!1):i([e.union.apply(e,i(i([],r,!1),[n],!1))],o,!0)},e.extractAsciiString=function(e,t,n){for(var i=t+n,r="";t<i;t++)r+=String.fromCharCode(e.getUint8(t));return r},e.extractHexString=function(e,t,n){for(var i=t+n,o="";t<i;t++)o+=r.FormatHelper.intToHex(e.getUint8(t));return o},e.insertInSortedArray=function(e,t,n){var i=e.findIndex(n);return i<0?e.push(t):e.splice(i,0,t),e},e.removeUntilInSortedArray=function(e,t){var n=e.findIndex(t),i=-1===n?e.length:n;return 0===i?[]:e.splice(0,i)},e.toArray=function(e){try{if(!e||!e.length)return[];for(var t=new Array(e.length),n=0;n<e.length;n++)t[n]=e[n];return t}catch(e){return[]}},e}();function a(e,t){var n;for(n=e.length-1;n>=0&&!t(e[n]);n--);return n}function s(e,t){return Object.keys(e).length===Object.keys(t).length&&Object.keys(e).every((function(n){return e[n]===t[n]}))}t.ArrayHelper=o},5267:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.createAction=function(e,t){return{type:e,meta:{},payload:t}}},5434:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.MimeTypeHelper=t.MimeType=void 0,t.isMediaTypeContained=function(e,t){return Object.keys(e).map((function(e){return a.getMediaType(e)})).includes(a.getMediaType(t))};var i,r=n(5625),o=n(4468);!function(e){e.VideoMp4="video/mp4",e.VideoTs="video/mp2t",e.AudioMp4="audio/mp4",e.AudioTs="audio/mp2t"}(i||(t.MimeType=i={}));var a=function(){function e(){}return e.isSubtitle=function(e){return this.isApplication(e)||this.isText(e)},e.isText=function(e){return e.includes("text")},e.isTtmlXml=function(e){return e.includes("ttml+xml")},e.isApplication=function(e){return e.includes("application")},e.isAV=function(e){return this.isVideo(e)||this.isAudio(e)},e.isVideo=function(e){return e.includes("video")},e.isUnknown=function(e){return e.includes("unknown")},e.isAudio=function(e){return e.includes("audio")},e.isImage=function(e){return e.includes("image")},e.isDash=function(e){return e.includes(r.ManifestMimeType.Dash)},e.isHls=function(e){return e.includes(r.ManifestMimeType.Hls)||e.toLowerCase().includes("vnd.apple.mpegurl")},e.isMP4=function(e){return e.includes("mp4")},e.getMediaType=function(e){return this.isVideo(e)?o.MediaType.Video:this.isAudio(e)?o.MediaType.Audio:this.isSubtitle(e)?o.MediaType.Subtitles:this.isImage(e)?o.MediaType.Thumbnails:void 0},e.extractContentType=function(e){return e.split("/")[0]},e.extractContainerType=function(e){var t=e.split("/");return t.length>1?t[1]:null},e}();t.MimeTypeHelper=a},5439:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isSegmentTiming=function(e){return"startTime"in e&&(0,i.isNumber)(e.startTime)&&"duration"in e&&(0,i.isNumber)(e.duration)},t.findSegmentIndexForTime=function(e,t,n){var i=!e||!e.length,o=t<e[0].startTime+e[0].duration;if(i||o)return 0;var a=e.length-1;if(t>=e[a].startTime)return a;var s=Math.max(t-e[0].startTime,0),u=Math.min(Math.floor(s/n),e.length-1);return r(e[0])&&r(e[u])?function(e,t,n){for(;e[n]&&e[n].startTime>t;)n--;for(;e[n]&&e[n].startTime+e[n].duration<=t;)n++;return n=Math.max(n,0),n=Math.min(n,e.length-1)}(e,t,u):null},t.createInitSegmentInfoBase=function(e){var t=e._internalId;return{internalRepresentationId:t,representationId:t.representationId,periodId:t.periodId,mimeType:e._mimeType,isInitSegment:!0}},t.getSegmentInfoTimeRange=function(e){if((null==e?void 0:e.duration)&&void 0!==(null==e?void 0:e.startTime))return{start:e.startTime,end:e.startTime+e.duration}};var i=n(3068);function r(e){return e&&(0,i.isNumber)(e.startTime)}},5487:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.isIOS=t.isMobile=t.isWebOs2022OrNewer=t.isWebOs2020=t.isWebOs2017=t.isWebOs2016=t.isWebOs2019OrOlder=t.getWebOsChromiumVersion=t.isWebOS=t.isWpeWebKit=t.isVizio=t.getVidaaVersion=t.isVidaa=t.getTizenVersion=t.isTizen2020=t.isTizen2016=t.isTizen2017=t.isTizen2018=t.isTizen2019=t.isTizen=t.getEdgeVersion=t.isEdge=t.getSafariVersion=t.isSafari=t.isFirefoxIOS=t.isFirefox=t.isChromium=t.isChrome=t.WEBOS_2022_CHROMIUM_VERSION=t.WEBOS_2021_CHROMIUM_VERSION=t.WEBOS_2020_CHROMIUM_VERSION=t.WEBOS_2018_2019_CHROMIUM_VERSION=t.WEBOS_2016_2017_CHROMIUM_VERSION=t.TIZEN_2020_MINOR_VERSION=t.TIZEN_2020_MAJOR_VERSION=t.TIZEN_2019_MINOR_VERSION=t.TIZEN_2019_MAJOR_VERSION=t.TIZEN_2018_MINOR_VERSION=t.TIZEN_2018_MAJOR_VERSION=t.TIZEN_2017_MINOR_VERSION=t.TIZEN_2017_MAJOR_VERSION=t.TIZEN_2016_MINOR_VERSION=t.TIZEN_2016_MAJOR_VERSION=t.SAFARI_17_MAJOR_VERSION=t.SAFARI_15_MAJOR_VERSION=t.IOS_17=t.IOS_15=t.IOS_10=t.IOS_9=t.EDGE_CHROMIUM_FIRST_MAJOR_VERSION=void 0,t.resetPlatformDetectorCache=t.isSafari17orIOS17=t.isSafari15orIOS15=t.getIOSVersion=t.isSafariIOS=void 0,t.isLegacyEdge=r,t.isEdgeChromium=function(){return(0,t.isEdge)()&&(0,t.getEdgeVersion)().major>=t.EDGE_CHROMIUM_FIRST_MAJOR_VERSION},t.isPlayStation5=o,t.isPlayStation4=a,t.isReactNative=function(){return"ReactNative"===window.navigator.product};var i=n(7993);function r(){return(0,t.isEdge)()&&(0,t.getEdgeVersion)().major<t.EDGE_CHROMIUM_FIRST_MAJOR_VERSION}function o(){return/PlayStation 5/i.test(navigator.userAgent)}function a(){return/PlayStation 4/i.test(navigator.userAgent)}t.EDGE_CHROMIUM_FIRST_MAJOR_VERSION=79,t.IOS_9=9,t.IOS_10=10,t.IOS_15=15,t.IOS_17=17,t.SAFARI_15_MAJOR_VERSION=15,t.SAFARI_17_MAJOR_VERSION=17,t.TIZEN_2016_MAJOR_VERSION=2,t.TIZEN_2016_MINOR_VERSION=4,t.TIZEN_2017_MAJOR_VERSION=3,t.TIZEN_2017_MINOR_VERSION=0,t.TIZEN_2018_MAJOR_VERSION=4,t.TIZEN_2018_MINOR_VERSION=0,t.TIZEN_2019_MAJOR_VERSION=5,t.TIZEN_2019_MINOR_VERSION=0,t.TIZEN_2020_MAJOR_VERSION=5,t.TIZEN_2020_MINOR_VERSION=5,t.WEBOS_2016_2017_CHROMIUM_VERSION=38,t.WEBOS_2018_2019_CHROMIUM_VERSION=53,t.WEBOS_2020_CHROMIUM_VERSION=68,t.WEBOS_2021_CHROMIUM_VERSION=79,t.WEBOS_2022_CHROMIUM_VERSION=87,t.isChrome=function(){return navigator.userAgent.includes("Chrome")&&!(0,t.isEdge)()},t.isChromium=function(){return(0,t.isChrome)()||(0,t.isEdge)()&&!r()},t.isFirefox=function(){return navigator.userAgent.includes("Firefox")},t.isFirefoxIOS=function(){return navigator.userAgent.includes("FxiOS")&&(0,t.isIOS)()},t.isSafari=function(){return navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")&&!navigator.userAgent.includes("IEMobile")&&!navigator.userAgent.includes("Edge")&&!(0,t.isTizen)()&&!o()&&!a()&&!(0,t.isWpeWebKit)()||(0,i.isFairPlayDrmSupported)()},t.getSafariVersion=function(){var e=/Version\\/(\\d+)\\.?(\\d+)?\\.?(\\d+)?/.exec(navigator.userAgent)||null;if(!e)return{};var t=e[1],n=e[2],i=e[3],r=function(e){return parseInt(e)};return{major:r(t),minor:r(n),patch:r(i)}},t.isEdge=function(){return/Edge\\/\\d+/i.test(navigator.userAgent)||/Edg\\/\\d+/i.test(navigator.userAgent)},t.getEdgeVersion=function(){var e=/Edge\\/(\\d+)\\.?(\\d+)/.exec(navigator.userAgent)||/Edg\\/(\\d+)\\.?(\\d+)/.exec(navigator.userAgent);if(!e||0===e.length)return{major:0,minor:0};var t={};return e[1]&&(t.major=parseInt(e[1])),e[1]&&(t.minor=parseInt(e[2])),t};var s,u,l,c,d=function(e,n){var i=(0,t.getTizenVersion)();return i.major===e&&i.minor===n};t.isTizen=function(){return null!=s||(s=navigator.userAgent.includes("Tizen")),s},t.isTizen2019=function(){return d(t.TIZEN_2019_MAJOR_VERSION,t.TIZEN_2019_MINOR_VERSION)},t.isTizen2018=function(){return d(t.TIZEN_2018_MAJOR_VERSION,t.TIZEN_2018_MINOR_VERSION)},t.isTizen2017=function(){return d(t.TIZEN_2017_MAJOR_VERSION,t.TIZEN_2017_MINOR_VERSION)},t.isTizen2016=function(){return d(t.TIZEN_2016_MAJOR_VERSION,t.TIZEN_2016_MINOR_VERSION)},t.isTizen2020=function(){return d(t.TIZEN_2020_MAJOR_VERSION,t.TIZEN_2020_MINOR_VERSION)},t.getTizenVersion=function(){if(void 0===u){var e=/Tizen (\\d).(\\d)/.exec(navigator.userAgent);u=(null==e?void 0:e[1])?{major:Number(e[1]),minor:Number(e[2]||0)}:{}}return u},t.isVidaa=function(){return navigator.userAgent.includes("VIDAA")},t.getVidaaVersion=function(){var e=new RegExp(/VIDAA\\/(\\d+)\\.?(\\d+)/).exec(navigator.userAgent);return(null==e?void 0:e[1])?{major:Number(e[1]),minor:Number(e[2])}:{}},t.isVizio=function(){return navigator.userAgent.includes("VIZIO")},t.isWpeWebKit=function(){return navigator.userAgent.includes("WPE")},t.isWebOS=function(){return null!=l||(l=navigator.userAgent.includes("Web0S")||navigator.userAgent.includes("NetCast")),l},t.getWebOsChromiumVersion=function(){var e;if(void 0===c){var t=new RegExp(/Chrome\\/(\\d+)\\.?(\\d+)/).exec(navigator.userAgent);if(!(null==t?void 0:t[1]))return{};c={major:Number(t[1]),minor:Number(null!==(e=t[2])&&void 0!==e?e:0)}}return c},t.isWebOs2019OrOlder=function(){var e=(0,t.getWebOsChromiumVersion)();return(0,t.isWebOS)()&&void 0!==(null==e?void 0:e.major)&&e.major<=t.WEBOS_2018_2019_CHROMIUM_VERSION},t.isWebOs2016=function(){return(0,t.getWebOsChromiumVersion)().major===t.WEBOS_2016_2017_CHROMIUM_VERSION&&!("requestMediaKeySystemAccess"in navigator)},t.isWebOs2017=function(){return(0,t.getWebOsChromiumVersion)().major===t.WEBOS_2016_2017_CHROMIUM_VERSION&&"requestMediaKeySystemAccess"in navigator},t.isWebOs2020=function(){return(0,t.isWebOS)()&&(0,t.getWebOsChromiumVersion)().major===t.WEBOS_2020_CHROMIUM_VERSION},t.isWebOs2022OrNewer=function(){var e=(0,t.getWebOsChromiumVersion)();return(0,t.isWebOS)()&&void 0!==(null==e?void 0:e.major)&&e.major>=t.WEBOS_2022_CHROMIUM_VERSION},t.isMobile=function(){return/Android/i.test(navigator.userAgent)||/IEMobile/i.test(navigator.userAgent)||/Windows Phone 10.0/i.test(navigator.userAgent)||/Safari/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)},t.isIOS=function(){return/Safari/i.test(navigator.userAgent)&&/Mobile/i.test(navigator.userAgent)&&!/Android/i.test(navigator.userAgent)&&!/Windows Phone 10.0/i.test(navigator.userAgent)},t.isSafariIOS=function(){return/Safari/i.test(navigator.userAgent)&&/iP(hone|od|ad)/i.test(navigator.userAgent)},t.getIOSVersion=function(){var e=/OS (\\d+)(_\\d+)*/.exec(navigator.userAgent);return e&&e.length>0&&parseInt(e[1],10)||0},t.isSafari15orIOS15=function(){return function(){return(0,t.isSafari)()&&(0,t.getSafariVersion)().major===t.SAFARI_15_MAJOR_VERSION}()||function(){return(0,t.isIOS)()&&(0,t.getIOSVersion)()===t.IOS_15}()},t.isSafari17orIOS17=function(){return function(){return(0,t.isSafari)()&&(0,t.getSafariVersion)().major===t.SAFARI_17_MAJOR_VERSION}()||function(){return(0,t.isIOS)()&&(0,t.getIOSVersion)()===t.IOS_17}()},t.resetPlatformDetectorCache=function(){s=void 0,u=void 0,l=void 0,c=void 0}},5623:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StreamType=void 0,function(e){e.Progressive="progressive",e.Dash="dash",e.Hls="hls",e.Smooth="smooth",e.Whep="whep",e.Unknown="unknown"}(n||(t.StreamType=n={}))},5625:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.ManifestMimeType=void 0,function(e){e.Dash="application/dash+xml",e.Hls="application/x-mpegURL",e.Smooth="application/vnd.ms-sstr+xml"}(n||(t.ManifestMimeType=n={}))},5707:function(e,t,n){var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.generateRendition=function(e){var t,n,r;return{name:e.name,attributes:i(i({},e.attributes),{TYPE:null===(t=e.attributes)||void 0===t?void 0:t.TYPE,"GROUP-ID":null===(n=e.attributes)||void 0===n?void 0:n["GROUP-ID"],NAME:null===(r=e.attributes)||void 0===r?void 0:r.NAME})}},t.generateStartAttributes=function(e){var t,n;return(null===(t=e.attributes)||void 0===t?void 0:t.hasOwnProperty("TIME-OFFSET"))&&(n={timeOffset:Number(e.attributes["TIME-OFFSET"]),precise:"YES"===e.attributes.PRECISE}),e.attributes&&n&&n.hasOwnProperty("timeOffset")&&(e.attributes["TIME-OFFSET"]=n.timeOffset,e.attributes.PRECISE=n.precise),n},t.generatePartInfoTag=function(e){return{targetDuration:parseFloat(e["PART-TARGET"])}},t.generateServerControlTag=function(e){var t={canBlockReload:!1};return e.attributes?(e.attributes["CAN-SKIP-UNTIL"]&&(t.canSkipUntil=parseFloat(e.attributes["CAN-SKIP-UNTIL"])),void 0!==t.canSkipUntil&&e.attributes["CAN-SKIP-DATERANGES"]&&(t.canSkipDateRanges="YES"===e.attributes["CAN-SKIP-DATERANGES"]),e.attributes["HOLD-BACK"]&&(t.holdBack=parseFloat(e.attributes["HOLD-BACK"])),e.attributes["PART-HOLD-BACK"]&&(t.partHoldBack=parseFloat(e.attributes["PART-HOLD-BACK"])),e.attributes["CAN-BLOCK-RELOAD"]&&(t.canBlockReload="YES"===e.attributes["CAN-BLOCK-RELOAD"]),t):t},t.generateSkipTag=function(e){var t={skippedSegments:0,recentlyRemovedDateranges:[]};return e.attributes?(e.attributes["SKIPPED-SEGMENTS"]&&(t.skippedSegments=parseInt(e.attributes["SKIPPED-SEGMENTS"])),e.attributes["RECENTLY-REMOVED-DATERANGES"]&&(t.recentlyRemovedDateranges=e.attributes["RECENTLY-REMOVED-DATERANGES"].split("\\t")),t):t},t.generatePartTag=function(e,t){var n={uri:(0,s.forceReallocation)(e.URI),duration:parseFloat(e.DURATION)};if("YES"===e.INDEPENDENT&&(n.independent=!0),e.BYTERANGE){var i=e.BYTERANGE.split("@"),r=parseInt(i[0]),o=parseInt(i[1]);isNaN(o)&&(o=(null==t?void 0:t.byteRange)?t.byteRange.end+1:0),n.byteRange={start:o,end:o+r-1}}return"YES"===e.GAP&&(n.gap=!0),n},t.generatePreloadHintTag=function(e,t){if("PART"===e.TYPE){var n={uri:(0,s.forceReallocation)(e.URI),duration:t,isPreloadHint:!0};return(i=u(e))&&(n.byteRange=i),{part:n}}if("MAP"===e.TYPE){var i,r={url:(0,s.forceReallocation)(e.URI)};return(i=u(e))&&(r.byteRange=i),{init:r}}return{}},t.generateStreamInfTag=function(e,t){var n,r,o,a,s,u={name:e.name,uri:t,attributes:i(i({},e.attributes),{BANDWIDTH:null===(n=e.attributes)||void 0===n?void 0:n.BANDWIDTH})};return(null===(r=e.attributes)||void 0===r?void 0:r.RESOLUTION)&&(u.attributes.RESOLUTION=f(e)),(null===(o=e.attributes)||void 0===o?void 0:o.BANDWIDTH)&&(u.attributes.BANDWIDTH=parseInt(e.attributes.BANDWIDTH)),(null===(a=e.attributes)||void 0===a?void 0:a["AVERAGE-BANDWIDTH"])&&(u.attributes["AVERAGE-BANDWIDTH"]=parseInt(e.attributes["AVERAGE-BANDWIDTH"])),(null===(s=e.attributes)||void 0===s?void 0:s["PROGRAM-ID"])&&(u.attributes["PROGRAM-ID"]=parseInt(e.attributes["PROGRAM-ID"])),u.id=l(u.attributes),u},t.generateVariantPlaylistId=l,t.generateSessionKeyTag=function(e){d(e)},t.generateIFrameStreamInfTag=function(e){var t,n,i;(null===(t=e.attributes)||void 0===t?void 0:t.BANDWIDTH)&&(e.attributes.BANDWIDTH=parseInt(e.attributes.BANDWIDTH)),(null===(n=e.attributes)||void 0===n?void 0:n["AVERAGE-BANDWIDTH"])&&(e.attributes["AVERAGE-BANDWIDTH"]=parseInt(e.attributes["AVERAGE-BANDWIDTH"],10)),(null===(i=e.attributes)||void 0===i?void 0:i.RESOLUTION)&&(e.attributes.RESOLUTION=f(e))},t.generateSegmentEntrySkeleton=function(){return{uri:"",duration:0,mediaSequence:0}},t.generateCueTag=function(e,t){var n={type:t};if(e.attributes){var i=[];for(var r in e.attributes)if(e.attributes.hasOwnProperty(r)){var o=e.attributes[r]?"".concat(r,"=").concat(e.attributes[r]):r;i.push(o)}n.attributes=i}return n},t.generateDateRange=function(e){var t={type:a.MetadataType.DATERANGE};if(e.attributes){t.clientAttributes={};var n=e.attributes;for(var i in n)if(n.hasOwnProperty(i)){var r=c(i,n[i]);i.startsWith("X-")?t.clientAttributes[(0,s.kebabCaseToCamelCase)(i.substring(2))]=r:t[(0,s.kebabCaseToCamelCase)(i)]=r}}return t.duration&&(t.duration=Number(t.duration)),t.plannedDuration&&(t.plannedDuration=Number(t.plannedDuration)),t.endOnNext&&(t.endOnNext=!0),t},t.generateKeyTag=function(e){var t;if(d(e),e.attributes&&"NONE"!==e.attributes.METHOD&&e.attributes.URI){var n={method:null!==(t=o.HlsEncryptionMethods.find((function(t){return t===e.attributes.METHOD})))&&void 0!==t?t:o.HlsEncryptionMethod.AES_128,uri:(0,s.forceReallocation)(e.attributes.URI)};return void 0!==e.attributes.IV&&(n.iv=e.attributes.IV),e.attributes.KEYFORMAT&&(n.keyformat=(0,s.forceReallocation)(e.attributes.KEYFORMAT)),e.attributes.KEYFORMATVERSIONS&&(n.keyformatversions=(0,s.forceReallocation)(e.attributes.KEYFORMATVERSIONS)),e.attributes.KEYID&&(n.keyid=(0,s.forceReallocation)(e.attributes.KEYID)),n}},t.generateByteRangeTag=function(e,t){var n;if(e.value){var i=e.value.split("@"),r=i[0],o=i[1],a={length:parseInt(r||"0")};if(o)a.offset=parseInt(o);else{var s=t[t.length-1];(null==s?void 0:s.byterange)&&(a.offset=(null!==(n=s.byterange.offset)&&void 0!==n?n:0)+s.byterange.length)}return a}},t.generateMapTag=function(e,t){var n,i;if(null===(n=e.attributes)||void 0===n?void 0:n.URI){var o={url:(0,s.forceReallocation)(e.attributes.URI)};if(null===(i=e.attributes)||void 0===i?void 0:i.BYTERANGE){var a=e.attributes.BYTERANGE.split("@"),u=a[0],l=a[1];o.byteRange={start:parseInt(l),end:parseInt(l)+parseInt(u)-1}}return t.keys.length>0&&(o.keys=r([],t.keys,!0),t.keyInUse=!0),o}},t.generateCustomTag=function(e){try{e=(0,s.forceReallocation)(e);var t=/^#([^:=]*)([:=])?(.*)$/.exec(e);if(!(null==t?void 0:t[1]))return;var n={name:t[1]},i="";if("="===t[2]&&t[3])i=t[3];else if(":"===t[2]&&t[3]){var r=v.exec(t[3]);r&&"="===r[2]&&r[3]?n.attributes=function(e){for(var t=e.split(p),n=t.length,i={};n--;)if(""!==t[n]){var r=S.exec(t[n]);if(r){var o=r.slice(1),a=o[0],s=o[1];i[a.trim()]=s.trim().replace(h,"$1")}}return i}(t[3]):i=t[3]}return i&&(n.value=i.replace(g,"$1")),n}catch(e){return}};var o=n(6790),a=n(3714),s=n(649);function u(e){var t=parseInt(e["BYTERANGE-START"]),n=parseInt(e["BYTERANGE-END"]);if(!isNaN(t)||!isNaN(n))return{start:isNaN(t)?0:t,end:isNaN(n)?Math.pow(2,53)-1:n}}function l(e){var t="";return e.RESOLUTION&&(t+=e.RESOLUTION.height+"_"),t+e.BANDWIDTH}function c(e,t){var n=(0,s.forceReallocation)(t);return function(e){return["X-RESUME-OFFSET","X-PLAYOUT-LIMIT"].includes(e)}(e)?Number(n):function(e){return["X-SNAP","X-RESTRICT"].includes(e)}(e)?n.split(","):n}function d(e){var t;if(null===(t=e.attributes)||void 0===t?void 0:t.IV){var n=e.attributes.IV;(n.startsWith("0x")||n.startsWith("0X"))&&(e.attributes.IV=n.substring(2))}}function f(e){var t,n={width:0,height:0},i=null===(t=e.attributes)||void 0===t?void 0:t.RESOLUTION.split("x");return i[0]&&(n.width=parseInt(i[0])),i[1]&&(n.height=parseInt(i[1])),n}var p=/(?:^|,)((?:[^=]*)=(?:"[^"]*"|[^,]*))/,S=/([^=]*)=(.*)/,h=/^[\'"](.*)[\'"]$/,g=/^[\'"](.*)[\'"]$/g,v=/^([^:="]*)([:=])?(.*)$/},5880:function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerModuleMissingError=void 0;var r=n(306),o=function(e){function t(t,n){return n?e.call(this,r.ErrorCode.MODULE_DEPENDENCY_MISSING,{name:t,dependency:n},"The ".concat(t," module requires the ").concat(n," module to be included as well."))||this:e.call(this,r.ErrorCode.MODULE_MISSING,{name:t},"The ".concat(t," module is required to play this stream."))||this}return i(t,e),t}(n(3336).PlayerError);t.PlayerModuleMissingError=o},5934:function(e,t){var n;Object.defineProperty(t,"__esModule",{value:!0}),t.StartOptionsActionKey=void 0,function(e){e.InitStartTimeOffset="@instance/sources/@source/startOptions/initStartTimeOffset",e.SetStartTimeOffset="@instance/sources/@source/startOptions/setStartTimeOffset"}(n||(t.StartOptionsActionKey=n={}))},5971:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.getSourceStore=o,t.getSourceState=function(e){var t=o(e);return null==t?void 0:t.getState()};var i=n(813),r=n(4685);function o(e){var t,n;return(0,r.isContextAvailable)(e)?null===(t=e.serviceManager)||void 0===t?void 0:t.get(i.ServiceName.SourceStoreService,null===(n=e.sourceContext)||void 0===n?void 0:n.sourceIdentifier):void 0}},6110:function(e,t,n){var i=this&&this.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};return function(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.HlsParserWebworkerMessageHandler=void 0,t.getContext=function(){return s||u()};var r=n(6599),o=n(6741),a=n(7432),s=null;function u(){var e=new o.WebWorkerContext(l);return onmessage=e.onMessageCallback,e}var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.parseHlsPlaylist=function(e){var t=e.payload;try{var n=(0,a.parsePlaylist)(t.data,t.options);this.postMessageFunction({action:"parsedPlaylist",data:n})}catch(e){this.postMessageFunction({action:"error",data:e.message})}},t}(r.MessageHandler);t.HlsParserWebworkerMessageHandler=l,"undefined"==typeof window&&(s=u())},6599:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MessageHandler=void 0;var n=function(){return function(e,t){this.runsInWebWorker=e,this.postMessageFunction=t}}();t.MessageHandler=n},6741:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorkerContext=void 0;var i=n(8041),r=function(){return function(e){var t=this;this.b="undefined"==typeof window,this.onmessage=null,this.c=function(e,n){t.b?postMessage(e,n):"function"==typeof t.onmessage&&setTimeout((function(){t.onmessage({data:e})}),0)},this.postMessage=function(e){setTimeout((function(){t.onMessageCallback({data:e})}),0)},this.terminate=function(){},this.onMessageCallback=function(e){e.data.action&&e.data&&t.a[e.data.action]&&t.a[e.data.action](e.data)},this.b&&(0,i.installWorkerPolyfills)(),this.a=new e(this.b,this.c)}}();t.WebWorkerContext=r},6790:function(e,t){var n,i,r,o,a,s;Object.defineProperty(t,"__esModule",{value:!0}),t.DrmSetupError=t.TransmuxingRejectionReason=t.SegmentVerificationResult=t.HlsEncryptionMethods=t.HlsEncryptionMethod=t.SOURCE_BUFFER_APPEND_STATUS=t.RepresentationType=void 0,function(e){e[e.AUDIO=1]="AUDIO",e[e.VIDEO=2]="VIDEO",e[e.SUBTITLE=3]="SUBTITLE"}(n||(t.RepresentationType=n={})),function(e){e[e.FAILURE=0]="FAILURE",e[e.QUOTA_EXCEEDED=1]="QUOTA_EXCEEDED",e[e.SUSPENDED=2]="SUSPENDED"}(i||(t.SOURCE_BUFFER_APPEND_STATUS=i={})),function(e){e.NONE="NONE",e.AES_128="AES-128",e.SAMPLE_AES="SAMPLE-AES",e.SAMPLE_AES_CTR="SAMPLE-AES-CTR"}(r||(t.HlsEncryptionMethod=r={})),t.HlsEncryptionMethods=Object.keys(r).map((function(e){return r[e]})),function(e){e.Publish="publish",e.Drop="drop",e.Park="park"}(o||(t.SegmentVerificationResult=o={})),function(e){e.INVALID_TS_SEGMENT="Invalid TS segment, could not extract segment information",e.TRANSMUXING_ABORTED="Transmuxing was aborted as it is no longer needed"}(a||(t.TransmuxingRejectionReason=a={})),function(e){e.CANCELLED="Loading was cancelled for the DRM source",e.MISSING_CONFIGURATION="DRM is not configured"}(s||(t.DrmSetupError=s={}))},7179:function(e,t,n){var i,r=this&&this.__assign||function(){return r=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},r.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.StartOptionsReducer=void 0,t.getStartTimeOffset=function(e){return e.startOptions.startTimeOffset};var o=n(3793),a=n(12),s=n(5934),u=a.initialStartOptions,l=function(e,t){var n=t.payload;return r(r({},e),n)};t.StartOptionsReducer=(0,o.default)(u,((i={})[s.StartOptionsActionKey.InitStartTimeOffset]=l,i[s.StartOptionsActionKey.SetStartTimeOffset]=l,i))},7387:function(e,t){var n,i;Object.defineProperty(t,"__esModule",{value:!0}),t.CapabilityKey=t.CapabilityActionType=void 0,function(e){e.InitCapabilities="initcapabilities",e.SetCapability="setcapability"}(n||(t.CapabilityActionType=n={})),function(e){e.isPlayStation5="isPlayStation5",e.isPlayStation4="isPlayStation4",e.isMobile="isMobile",e.isTizen="isTizen",e.isSafari="isSafari",e.isChrome="isChrome",e.isChromium="isChromium",e.isFirefox="isFirefox",e.isFirefoxIOS="isFirefoxIOS",e.isWebOS="isWebOS",e.isVidaa="isVidaa",e.isVizio="isVizio",e.isIOS="isIOS",e.isSafariIOS="isSafariIOS",e.isEdge="isEdge",e.isLegacyEdge="isLegacyEdge",e.isEdgeChromium="isEdgeChromium",e.isReactNative="isReactNative",e.MSESafari="MSESafari",e.isLocalStorageAvailable="isLocalStorageAvailable",e.isInlinePlaybackRestricted="isInlinePlaybackRestricted",e.IOSVersion="IOSVersion",e.edgeVersion="edgeVersion",e.safariVersion="safariVersion",e.webOSChromiumVersion="webOSChromiumVersion",e.techSupportedByModules="techSupportedByModules",e.techSupportedByPlatform="techSupportedByPlatform",e.techSupportedByModulesOnPlatform="techSupportedByModulesOnPlatform"}(i||(t.CapabilityKey=i={}))},7432:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.parsePlaylist=function(e,t){void 0===t&&(t={});var n=-1===e.indexOf("#EXTINF")?i.Master:i.Media,d=e.replace(u,"\\n").trim().split(/\\n+/m),f=(0,r.removeTrailingWhitespaces)(d[0]);if(!l.test(f))throw new Error("Playlist parsing failed: missing #EXTM3U tag");if(n===i.Media)return(0,a.parseVariant)(d,t);for(var p,S=[],h=[],g=[],v=1,E=!0,y=!1,m=!0,T=0;T<d.length;T++){var _=(0,r.removeTrailingWhitespaces)(d[T]),O=d[T+1];if((0,r.isCustomTag)(_))c(S,_);else if(m)m=!1;else{var I=(0,o.parseTag)(_);switch(I.name){case"EXT-X-STREAM-INF":g.push((0,s.generateStreamInfTag)(I,(0,r.removeTrailingWhitespaces)(O))),m=!0;break;case"EXT-X-MEDIA":var R=(0,s.generateRendition)(I);h.push(R),S.push(R);break;case"EXT-X-VERSION":v=Number(I.value);break;case"EXT-X-START":p=(0,s.generateStartAttributes)(I),S.push(I);break;case"EXT-X-ALLOW-CACHE":E="YES"===I.value||void 0===I.value;break;case"EXT-X-INDEPENDENT-SEGMENTS":y=!0,S.push(I);break;case"EXT-X-I-FRAME-STREAM-INF":(0,s.generateIFrameStreamInfTag)(I),S.push(I);break;case"EXT-X-SESSION-DATA":default:S.push(I);break;case"EXT-X-SESSION-KEY":(0,s.generateSessionKeyTag)(I),S.push(I)}}}var b={version:v,allowCache:E,independentSegments:y,hasM3u:!0,media:h,playlists:g,tags:S=S.concat(g)};return p&&(b.start=p),b};var i,r=n(3577),o=n(1908),a=n(1945),s=n(5707),u=/\\r\\n|\\r(?=[^\\n]|$)/gm,l=/^#EXTM3U($|[ \\t\\n])/m;function c(e,t){var n=(0,s.generateCustomTag)(t);n&&e.push(n)}!function(e){e.Master="master",e.Media="media"}(i||(i={}))},7993:function(e,t,n){var i=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,o=t.length;r<o;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.MSESafari=t.getBestTech=t.getTechSupportedByModules=t.getTechSupportedByPlatform=t.getTechSupportedByModulesOnPlatform=t.isLocalStorageAvailable=t.isInlinePlaybackRestricted=t.isFairPlayDrmSupported=t.supports=t.checkPlatformSupports=t.hasMediaSourceSupport=t.FairplayKeySystems=void 0,t.isUsingFileProtocol=function(){return"file:"===l.default.location.protocol},t.isFetchSupported=function(){return"function"==typeof l.default.fetch&&"function"==typeof l.default.AbortController};var r,o=n(8052),a=n(2756),s=n(4468),u=n(1513),l=n(4081),c=n(5434),d=n(5487);!function(e){e.FPS_1="com.apple.fps.1_0",e.FPS_2="com.apple.fps.2_0"}(r||(t.FairplayKeySystems=r={}));var f=[{player:s.PlayerType.Html5,streaming:s.StreamType.Dash},{player:s.PlayerType.Html5,streaming:s.StreamType.Hls},{player:s.PlayerType.Html5,streaming:s.StreamType.Smooth},{player:s.PlayerType.WebRtc,streaming:s.StreamType.Whep},{player:s.PlayerType.Native,streaming:s.StreamType.Hls},{player:s.PlayerType.Native,streaming:s.StreamType.Progressive}],p=Boolean(l.default.ArrayBuffer&&l.default.Uint8Array&&l.default.Uint16Array);t.hasMediaSourceSupport=function(){var e,t,n,i="MediaSource"in l.default&&"function"==typeof(null===(e=l.default.MediaSource)||void 0===e?void 0:e.isTypeSupported),r="WebKitMediaSource"in l.default&&"function"==typeof(null===(t=l.default.WebKitMediaSource)||void 0===t?void 0:t.isTypeSupported),o="ManagedMediaSource"in l.default&&"function"==typeof(null===(n=l.default.ManagedMediaSource)||void 0===n?void 0:n.isTypeSupported);return i||r||o};t.checkPlatformSupports=function(){var e=[];if(p?e=f.filter((function(e){return(0,t.supports)(e.player,e.streaming)})):e.push({player:s.PlayerType.Native,streaming:s.StreamType.Progressive}),(0,d.isSafari)())for(var n=1;n<e.length;n++)if(e[n].player===s.PlayerType.Native&&e[n].streaming===s.StreamType.Hls){e=e.splice(n,1).concat(e);break}return e},t.supports=function(e,n){var i=(0,t.hasMediaSourceSupport)()?[s.StreamType.Dash,s.StreamType.Hls,s.StreamType.Smooth]:[],r=function(){var e=l.default.RTCPeerConnection,t=Boolean(e)&&"function"==typeof e.prototype.addTransceiver;return function(){var e,t,n,i,r;return Boolean(null!==(r=null!==(i=null!==(n=null!==(t=null===(e=navigator.mediaDevices)||void 0===e?void 0:e.getUserMedia)&&void 0!==t?t:navigator.getUserMedia)&&void 0!==n?n:navigator.webkitGetUserMedia)&&void 0!==i?i:navigator.mozGetUserMedia)&&void 0!==r?r:navigator.msGetUserMedia)}()&&t}()?[s.StreamType.Whep]:[],o=function(e){return e.some((function(e){return e===n}))};switch(e){case s.PlayerType.Html5:return o(i);case s.PlayerType.WebRtc:return o(r);case s.PlayerType.Native:return o(function(){var e=[];return function(){var e=document.createElement("video");return e&&"function"==typeof e.canPlayType&&("maybe"===e.canPlayType("application/vnd.apple.mpegURL")||"maybe"===e.canPlayType("application/x-mpegURL")||"maybe"===e.canPlayType("audio/mpegurl")||"maybe"===e.canPlayType("audio/x-mpegurl"))}()&&!(0,d.isEdge)()&&e.push(s.StreamType.Hls),function(){return"function"==typeof document.createElement("video").canPlayType}()&&e.push(s.StreamType.Progressive),e}());default:return!1}},t.isFairPlayDrmSupported=function(){return Object.values(r).some((function(e){var t;return null===(t=l.default.WebKitMediaKeys)||void 0===t?void 0:t.isTypeSupported(e,c.MimeType.VideoMp4)}))},t.isInlinePlaybackRestricted=function(){var e=(0,d.getIOSVersion)(),t=e<d.IOS_9&&/iPad/i.test(navigator.userAgent),n=e<d.IOS_10&&/iP(hone|od)/i.test(navigator.userAgent);return d.isSafariIOS&&(t||n)},t.isLocalStorageAvailable=function(){try{return l.default.localStorage&&"function"==typeof localStorage.getItem&&"function"==typeof localStorage.setItem}catch(e){return!1}},t.getTechSupportedByModulesOnPlatform=function(){var e=(0,t.getTechSupportedByModules)();return(0,t.getTechSupportedByPlatform)().filter((function(t){return e.filter((function(e){return function(e,t){return e.player===t.player&&e.streaming===t.streaming}(e,t)})).length>0}))},t.getTechSupportedByPlatform=function(){return(0,t.checkPlatformSupports)()},t.getTechSupportedByModules=function(){var e=o.ModuleManager.has(a.ModuleName.EngineBitmovin)?o.ModuleManager.get(a.ModuleName.EngineBitmovin).technologyChecker.getSupportedTechnologies():[],t=o.ModuleManager.has(a.ModuleName.EngineNative)?o.ModuleManager.get(a.ModuleName.EngineNative).technologyChecker.getSupportedTechnologies():[],n=o.ModuleManager.has(a.ModuleName.EngineWebRtc)?o.ModuleManager.get(a.ModuleName.EngineWebRtc).technologyChecker.getSupportedTechnologies():[];return i(i(i([],e,!0),t,!0),n,!0)},t.getBestTech=function(e,t,n){void 0===e&&(e=[]),void 0===t&&(t={});var r=(0,u.getCapabilities)(),o=function(e){var t=(0,u.getCapabilities)(),n=i([],t.techSupportedByPlatform,!0);if(!e||0===e.length)return n;var r=e.filter((function(e){return n.some((function(t,i){var r,o=e.player===t.player&&e.streaming===t.streaming,a=null!==(r=e.exclude)&&void 0!==r&&r;return o&&n.splice(i,1),o&&!a}))})).map((function(e){return{player:e.player,streaming:e.streaming}}));return i(i([],r,!0),n,!0)}(e),a=r.techSupportedByPlatform;return n&&(o=a.filter((function(e){return e.player===n.player&&e.streaming===n.streaming}))),(t.vr&&((0,d.isSafariIOS)()||(0,d.isSafari)())?o.filter((function(e){var t=e.streaming===s.StreamType.Progressive&&e.player===s.PlayerType.Native,n=e.streaming===s.StreamType.Hls&&e.player===s.PlayerType.Native;return t||n&&(!(0,d.isSafariIOS)()||(0,d.getIOSVersion)()>d.IOS_9)})):o).find((function(e){return Boolean(t[e.streaming])}))},t.MSESafari=function(){return(0,d.isSafari)()&&(0,t.hasMediaSourceSupport)()}},8041:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.installWorkerPolyfills=function(){Array.prototype.includes||i.ArrayIncludesPolyfill.polyfill(),String.prototype.includes||o.StringIncludesPolyfill.polyfill(),String.prototype.startsWith||a.StringStartsWithPolyfill.polyfill(),String.prototype.endsWith||r.StringEndsWithPolyfill.polyfill()};var i=n(4499),r=n(3878),o=n(4205),a=n(829)},8052:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ModuleManager=void 0;var i=n(306),r=n(3336),o=n(5880),a=function(){function e(){}return e.initialize=function(){this.modules||(this.modules={})},e.add=function(e){if(this.initialize(),!e)throw new r.PlayerError(i.ErrorCode.MODULE_INVALID_DEFINITION,void 0,"Cannot add the module: no module definition was provided to the API.");if(!e.name)throw new r.PlayerError(i.ErrorCode.MODULE_INVALID_DEFINITION,void 0,"Cannot add the module: no `name` property was provided to the module definition.");if(!e.module)throw new r.PlayerError(i.ErrorCode.MODULE_INVALID_DEFINITION,void 0,"Cannot add the module: no `module` property was provided to the module definition.");if(e.dependencies){for(var t=0,n=e.dependencies;t<n.length;t++){var a=n[t];if(!this.has(a))throw new o.PlayerModuleMissingError(e.name,a)}if("function"!=typeof e.module)throw new r.PlayerError(i.ErrorCode.MODULE_INVALID_DEFINITION_DEPENDENCY,{name:e.name},"Cannot add the module: modules with dependencies must pass a deferred loading function to the `ModuleDefinition.module` property.")}var s=e.module;"function"==typeof s&&(s=s()),this.modules[e.name]={moduleDefinition:e,module:s},e.hooks&&e.hooks.add&&e.hooks.add(e.module)},e.remove=function(e){var t;if(this.modules){if(!this.modules[e])throw new o.PlayerModuleMissingError(e);var n=this.modules[e].moduleDefinition;(null===(t=n.hooks)||void 0===t?void 0:t.remove)&&n.hooks.remove(n.module),delete this.modules[e]}},e.get=function(e,t){void 0===t&&(t=!0),this.initialize();var n=this.modules[e];if(n&&n.module)return n.module;if(t)throw new o.PlayerModuleMissingError(e)},e.has=function(e){return void 0!==this.get(e,!1)},e.getModuleNames=function(){return Object.getOwnPropertyNames(this.modules)},e.getModuleDefinitions=function(){var e=this;return this.getModuleNames().map((function(t){return e.modules[t]}))},e.callSetupHooks=function(e){this.getModuleDefinitions().filter((function(e){return e.moduleDefinition.hooks&&e.moduleDefinition.hooks.setup})).forEach((function(t){return t.moduleDefinition.hooks.setup(t.module,e)}))},e.callDestroyHooks=function(e){var t=this.getModuleDefinitions().filter((function(e){return e.moduleDefinition.hooks&&e.moduleDefinition.hooks.destroy})).map((function(t){return t.moduleDefinition.hooks.destroy(t.module,e)}));return Promise.all(t).then((function(){}))},e}();t.ModuleManager=a},8774:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.devToolsExtension=void 0;var i=n(4081);t.devToolsExtension=i.default.__REDUX_DEVTOOLS_EXTENSION__},9297:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.TextParser=void 0;var n=/[ \\t]+/gm,i=function(){function e(e){this.data=e,this.rb=0}return e.prototype.sb=function(){return this.rb===this.data.length},e.prototype.skipWhitespace=function(){this.readRegex(n)},e.prototype.readRegex=function(e){var t=this.tb(e);if(!this.sb()&&void 0!==t&&t.position===this.rb)return this.rb+=t.length,t.results},e.prototype.tb=function(e){e.lastIndex=this.rb;var t=e.exec(this.data);if(null!==t)return{position:t.index,length:t[0].length,results:t}},e}();t.TextParser=i},9541:function(e,t,n){Object.defineProperty(t,"__esModule",{value:!0}),t.ReducerTree=void 0,t.isReducer=o,t.isReducerTree=function(e){return Boolean(e)&&e instanceof r};var i=n(1829),r=function(){function e(){this.ub={}}return e.prototype.has=function(e){return Boolean(this.ub[e])},e.prototype.set=function(e,t){return this.ub[e]=t,this},e.prototype.get=function(e){return this.ub[e]},e.prototype.delete=function(e){delete this.ub[e]},e.prototype.keys=function(){return Object.keys(this.ub)},e.prototype.vb=function(e){var t=this,n={};return this.keys().forEach((function(i){var r=t.get(i),a=e.concat(String(i));n[i]=o(r)?r:r.vb(a)})),0===Object.keys(n).length?function(e){return{}}:(0,i.combineReducers)(n)},e.prototype.buildReducer=function(){return this.vb([])},e}();function o(e){return Boolean(e)&&"function"==typeof e}t.ReducerTree=r},9927:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.toSeconds=function(e){return e/n},t.toMilliSeconds=function(e){return e*n};var n=1e3}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={exports:{}};return e[i].call(o.exports,o,o.exports,n),o.exports}!function(){n.d=function(e,t){for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})}}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),n(6110)}();',n.p+"39203be7a65d613e61ad.worker.js")}},67113:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.M3u8DashManifest=void 0;var a=n(56481),o=n(32703),s=n(77179),u=n(74853),l=n(79721),c=n(89927),d=n(58313),f=n(70850),p=n(13422),g=n(96533),h=n(59707),v=n(62198),m=n(5671),S=n(80813),y=n(85434),T=n(52610),E=n(42594),_=n(57778),O=n(18146),I=n(47596),b=n(73315),R=n(61895),A=function(){function e(e,t){this.XO=-1/0,this.SO=e,this.TO=t,this.UO=new _.M3u8Translator(e,t),this.VO=1/0,this.WO=e.serviceManager.get(S.ServiceName.SourceStoreService,t.sourceIdentifier)}return e.prototype.updateBaseUrl=function(e){this.UO.updateBaseUrl(e)},e.prototype.getBaseUrl=function(){return this.UO.getBaseUrl()},e.prototype.YO=function(){return(0,R.getHlsState)(this.WO.getState())},e.prototype.findAdaptationSet=function(e){return this.getManifest().Period[0].AdaptationSet.find((function(t){var n;return t._internalId.adaptationSetId===e||(null===(n=t.ContentComponent)||void 0===n?void 0:n.some((function(t){return t._id===e})))}))},e.prototype.createDashManifestSkeleton=function(e){var t=this.UO.createDashManifestSkeleton(e);return t=(0,g.initializeInternalIds)(t),(0,p.orderAdaptationSetsByCodec)(t,(0,g.getCodecPriorities)(this.SO.config,this.TO.source))},e.prototype.extractBackupStreams=function(e){return this.UO.extractBackupStreams(e)},e.prototype.onMasterPlaylistAvailable=function(e){var t=this.createDashManifestSkeleton(e);this.WO.dispatch((0,h.setManifestAction)(t)),this.WO.dispatch((0,b.setDefaultLanguages)(e)),this.WO.dispatch((0,b.setCustomTags)(e)),this.WO.dispatch((0,b.setMasterPlaylistString)(e.rawString))},e.prototype.getManifest=function(){return(0,v.getManifest)(this.WO.getState())},e.prototype.getAllVariantRepresentions=function(){return this.getManifest().Period[0].AdaptationSet.filter((function(e){return y.MimeTypeHelper.isAV(e._mimeType)||y.MimeTypeHelper.isSubtitle(e._mimeType)||y.MimeTypeHelper.isImage(e._mimeType)})).flatMap((function(e){return e.Representation}))},e.prototype.onMediaLoaded=function(e,t,n){var i=this;this.WO.dispatch((0,b.setMasterPlaylistString)(e)),this.WO.dispatch((0,b.setEndlist)(Boolean(n.endList))),n.playlistType&&!(0,R.getPlaylistType)(this.YO())&&this.WO.dispatch((0,b.setPlaylistType)(n.playlistType)),void 0===(0,R.getIsLowLatencyPlaylist)(this.YO())&&this.WO.dispatch((0,b.setIsLowLatencyPlaylist)(void 0!==n.partInfo)),this.kO(n),this.lO(n);var r=this.getManifest().Period[0],a=this.gO(t.Uri,r).map((function(e){return i.hO(e,n)}));return y.MimeTypeHelper.isAV(t._mimeType)&&(this.eO(n,a),this.fO(n)),a.forEach((function(e){var t=i.cO(e,n);i.dO(r,t,!n.endList),i.ZO(e),i.SO.settings.ENABLE_SEGMENT_INFO_PROVIDER_FROM_STORE&&i.aO(n,e)})),this.SO.serviceManager.maybeCall(S.ServiceName.TimedMetadataService,(function(e){return(0,o.extractDateRangeMetadata)(n.dateRange,n.endList?n.programDateTime:void 0,(function(t){e.processDateRangeEvent(t,l.DEFAULT_PERIOD_ID)}))})),a.find((function(e){return e._id===t._id}))},e.prototype.ZO=function(e){var t,n=null===(t=e.ContentProtection)||void 0===t?void 0:t.map((function(e){return{_schemeIdUri:e._schemeIdUri,pssh:[],pro:[]}})),i=this.findAdaptationSet(e._internalId.adaptationSetId);if(i&&n){var a=n.some((function(e){var t;return!(null===(t=i.ContentProtection)||void 0===t?void 0:t.some((function(t){return t._schemeIdUri===e._schemeIdUri})))}));if(a){var o=i.ContentProtection?(0,f.removeDuplicates)(r(r([],i.ContentProtection,!0),n,!0)):n;this.WO.dispatch((0,h.updateAdaptationSetAction)(e._internalId,{ContentProtection:o}))}}},e.prototype.aO=function(e,t){var n,i,r=t._internalId.key(),a=null===(n=this.WO.getState())||void 0===n?void 0:n.segmentInfoMap[r];a&&(i=(0,E.updateMapEntry)(a,e,t))||(i=(0,E.createNewMapEntry)(e,t),this.bO(i,e)),this.WO.dispatch((0,m.setSegmentInfos)(r,i))},e.prototype.bO=function(e,t){var n=this.WO.getState();if(n){var i=(0,I.getStartTimeExtrapolationReferencePoint)(e,t,n);(0,I.extrapolateStartTime)(e.segmentInfos,i)}},e.prototype.cO=function(e,t){var n,i,r,a=null!==(r=null===(i=null===(n=e.SegmentList)||void 0===n?void 0:n[0])||void 0===i?void 0:i.SegmentURL)&&void 0!==r?r:[];return a.length>0&&null!=a[0]._playbackTime?(0,R.getFirstDiscoSequenceTiming)(this.YO()).startTime:t.startTime},e.prototype.dO=function(e,t,n){var i=0===e.duration?this.VO:Math.min(e.duration,this.VO),r=n?1/0:i,a={start:t,_start:"PT".concat(t,"S"),duration:r,_duration:"PT".concat(i,"S")};this.WO.dispatch((0,h.updatePeriodTimingAction)(l.DEFAULT_PERIOD_ID,a))},e.prototype.eO=function(e,t){var n,i,r,a,o,s=e.totalDuration,u=null!==(n=t.find((function(t){return t.Uri===e.uri})))&&void 0!==n?n:t[0],l=null===(r=null===(i=null==u?void 0:u.SegmentList)||void 0===i?void 0:i[0])||void 0===r?void 0:r.SegmentURL,c=(null!==(a=null==l?void 0:l.length)&&void 0!==a?a:0)>0&&void 0!==(null===(o=null==l?void 0:l[0])||void 0===o?void 0:o._playbackTime);if(l&&c){var d=(0,T.getTimingInfoFromSegmentList)(l);s=d.totalDuration,this.WO.dispatch((0,b.setDiscoTimings)(u._mimeType,d.discoTimings))}this.VO=e.endList?Math.min(this.VO,s):s},e.prototype.fO=function(e){var t,n=!e.endList,i=(0,v.getManifest)(this.WO.getState()),r={_requestTimestamp:e.requestTimestamp,_type:n?"dynamic":"static",_mediaPresentationDuration:n?1/0:"PT".concat(this.VO,"S"),_maxSegmentDuration:"PT".concat(e.targetDuration,"S"),_hasIndependentSegments:i._hasIndependentSegments||e.independentSegments};e.start&&(e.start.timeOffset=O.PlaylistUtils.getStartOffsetCloseToPlaylistEnd(e,this.XO),this.XO=e.start.timeOffset,r._startOffset=O.PlaylistUtils.getStartOffset(e)),n&&(r._minimumUpdatePeriod="PT".concat(e.targetDuration,"S"),r._timeShiftBufferDepth=-this.VO,r._availabilityStartTime=null!==(t=i._availabilityStartTime)&&void 0!==t?t:new Date(e.requestTimestamp-(0,c.toMilliSeconds)(this.VO)).toISOString()),this.WO.dispatch((0,h.updateManifestAction)(r))},e.prototype.gO=function(e,t){return t.AdaptationSet.flatMap((function(t){return t.Representation.filter((function(t){return d.URLHelper.isSubUrl(e,t.Uri)}))}))},e.prototype.hO=function(e,t){var n=i({},e);return n._requestTimestamp=t.requestTimestamp,n._updateInterval=(0,O.calculateUpdateIntervalInSeconds)(this.SO,t),n._hls=i(i({},n._hls),{requestTimestamp:t.requestTimestamp,mediaSequence:t.mediaSequence,serverControl:t.serverControl,loadFailureReason:null}),t.partInfo&&(n._hls.partTargetDuration=t.partInfo.targetDuration),n.SegmentList=[i({},n.SegmentList[0])],n.SegmentList[0].SegmentURL=r([],n.SegmentList[0].SegmentURL,!0),this.iO(n,t),this.WO.dispatch((0,h.updateRepresentationAction)(n)),n},e.prototype.iO=function(t,n){var i;if(0!==n.segments.length){if(t.SegmentList){this.SO.logger.debug("Updating segment list for playlist ".concat(t._id));var a=this.jO(t,n);if(a.contentProtectionInfos.length>0){var o=e.contentProtectionToXmlJson(a.contentProtectionInfos);if((0,O.isDeltaPlaylist)(n)){var s=null!==(i=t.ContentProtection)&&void 0!==i?i:[];t.ContentProtection=(0,f.removeDuplicates)(r(r([],s,!0),o,!0))}else t.ContentProtection=o}var l=t.SegmentList[0].SegmentURL,c=a.entries,d=(0,O.calcNumberOfSegmentsToDrop)(l,c,n.skippedSegmentsCount);(0,u.removeEntriesFromStart)(l,d),(0,O.addNewSegments)(l,c),t.SegmentList[0]._duration=n.targetDuration,t.SegmentList[0]._timescale=1}}else this.SO.logger.debug("No segments for representation ".concat(t._id," in loaded playlist"))},e.prototype.jO=function(e,t){if(t.endList){var n=this.SO.serviceManager.maybeCall(S.ServiceName.ManifestCachingService,(function(t){return t.getSegmentList(e.Uri)}),null,this.TO.sourceIdentifier);return n||(n=this.UO.translateSegmentList(e,t),this.SO.serviceManager.maybeCall(S.ServiceName.ManifestCachingService,(function(t){return t.cacheSegmentList(n,e.Uri)}),null,this.TO.sourceIdentifier)),n}return this.UO.translateSegmentList(e,t)},e.prototype.kO=function(e){var t=e.segments[0];(null==t?void 0:t.dateTime)&&(e.programDateTime=(0,c.toSeconds)(t.dateTime.getTime()))},e.prototype.lO=function(e){var t=e.segments[0];e.endList?(e.startTime=(0,s.getStartTimeOffset)(this.WO.getState()),e.segments[0].startTime=e.startTime):t&&t.dateTime?(e.startTime=(0,c.toSeconds)(t.dateTime.getTime()),e.segments[0].startTime=e.startTime):e.startTime=(0,c.toSeconds)(e.requestTimestamp)-e.totalDuration},e.contentProtectionToXmlJson=function(e){return e.map((function(e){var t={_schemeIdUri:e.schemeIdUri};return e.defaultKid&&(t["_cenc:default_KID"]=e.defaultKid),e.pssh&&(t.pssh=[{__text:e.pssh}]),t}))},e.prototype.dispose=function(){this.UO=(0,a.dispose)(this.UO)},e}();t.M3u8DashManifest=A},73315:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.setContentLocationId=t.setTimestampRolloverPositions=t.setPresentationTimeOffset=t.setDiscoTimings=t.setCustomTags=t.setDefaultLanguages=t.setEndlist=t.setIsLowLatencyPlaylist=t.setPlaylistType=t.setMasterPlaylistString=void 0;var i=n(35267),r=n(45861);t.setMasterPlaylistString=function(e){return(0,i.createAction)(r.HlsActionType.SetMasterPlaylistString,e)},t.setPlaylistType=function(e){return(0,i.createAction)(r.HlsActionType.SetPlaylistType,e)},t.setIsLowLatencyPlaylist=function(e){return(0,i.createAction)(r.HlsActionType.SetIsLowLatencyPlaylist,e)},t.setEndlist=function(e){return(0,i.createAction)(r.HlsActionType.SetEndlist,e)},t.setDefaultLanguages=function(e){return(0,i.createAction)(r.HlsActionType.SetDefaultLanguages,e)},t.setCustomTags=function(e){return(0,i.createAction)(r.HlsActionType.SetCustomTags,e)},t.setDiscoTimings=function(e,t){return(0,i.createAction)(r.HlsActionType.SetDiscoTimings,{mimeType:e,discoTimings:t})},t.setPresentationTimeOffset=function(e,t){return(0,i.createAction)(r.HlsActionType.SetPresentationTimeOffset,{discoSequenceNumber:e,presentationTimeOffset:t})},t.setTimestampRolloverPositions=function(e,t){return(0,i.createAction)(r.HlsActionType.SetTimestampRolloverPositions,{next:e,previous:t})},t.setContentLocationId=function(e){return(0,i.createAction)(r.HlsActionType.SetContentLocationId,{locationId:e})}},73577:function(e,t,n){"use strict";var i=this&&this.__assign||function(){return i=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++)for(var r in t=arguments[n])Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r]);return e},i.apply(this,arguments)},r=this&&this.__spreadArray||function(e,t,n){if(n||2===arguments.length)for(var i,r=0,a=t.length;r<a;r++)!i&&r in t||(i||(i=Array.prototype.slice.call(t,0,r)),i[r]=t[r]);return e.concat(i||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.parseSegments=function(e,t,n,d){void 0===d&&(d={});for(var h,v=[],m=0,S=(0,c.generateSegmentEntrySkeleton)(),y=r([],t,!0),T=0,E=n.mediaSequence,_={keys:[],keyInUse:!1},O=function(e){!function(e,t,n,i,a,o,s){e.duration=t,e.uri=n,e.mediaSequence=s,i&&(e.init=i),o.length>0&&(e.customTags=o),a.keys.length>0&&(e.keys=r([],a.keys,!0),a.keyInUse=!0)}(S,T,e,h,_,y,E),v.push(S),m+=T,E++,function(){S=(0,c.generateSegmentEntrySkeleton)(),y=[],T=0}()},I=function(e){var t,s,f=(0,u.parseTag)(e);switch(f.name){case"EXTINF":T=parseFloat(f.value);break;case"EXT-X-BYTERANGE":S.byterange=(0,c.generateByteRangeTag)(f,v);break;case"EXT-X-DISCONTINUITY":S.discontinuity=!0;break;case"EXT-X-PROGRAM-DATE-TIME":!function(e,t){t.value&&(e.dateTime=new Date(t.value))}(S,f);break;case"EXT-X-KEY":if("NONE"===(null===(t=f.attributes)||void 0===t?void 0:t.METHOD)){_.keys=[{method:a.HlsEncryptionMethod.NONE}];break}!function(e,t){t.keyInUse&&(t.keys=[],t.keyInUse=!1);var n=(0,c.generateKeyTag)(e);void 0!==n&&t.keys.push(n)}(f,_);break;case"EXT-X-MAP":h=(0,c.generateMapTag)(f,_);break;case"EXT-X-DATERANGE":n.dateRange.push((0,c.generateDateRange)(f));break;case"EXT-X-CUE-OUT-CONT":S.cueTag=(0,c.generateCueTag)(f,"CUE-OUT-CONT");break;case"EXT-X-CUE-OUT":S.cueTag=(0,c.generateCueTag)(f,"CUE-OUT");break;case"EXT-X-CUE-IN":S.cueTag=(0,c.generateCueTag)(f,"CUE-IN");break;case"EXT-X-SCTE35":!function(e,t){var n;void 0===e.scte35&&(e.scte35=[]),e.scte35.push({type:o.MetadataType.SCTE,attributes:i({CUE:null===(n=t.attributes)||void 0===n?void 0:n.CUE},t.attributes)})}(S,f);break;case"EXT-X-PART":!function(e,t,n){var i;if(n.parsePartTags){t.parts=null!==(i=t.parts)&&void 0!==i?i:[];var r=t.parts[t.parts.length-1];t.parts.push((0,c.generatePartTag)(e.attributes,r))}}(f,S,d);break;case"EXT-X-PRELOAD-HINT":var p=function(e,t,n){return n.parsePartTags&&t?(0,c.generatePreloadHintTag)(e.attributes,t.targetDuration):{}}(f,n.partInfo,d);p.init&&(h=p.init,_.keys.length>0&&(h.keys=r([],_.keys,!0),_.keyInUse=!0)),p.part&&(S.parts=null!==(s=S.parts)&&void 0!==s?s:[],S.parts.push(p.part));break;case"EXT-X-SKIP":var g=(0,c.generateSkipTag)(f);n.skippedSegmentsCount=g.skippedSegments,E+=g.skippedSegments;break;case"EXT-X-ENDLIST":n.endList=!0;break;default:(0,l.resolvePlaylistTag)(n,f,y)}},b=0,R=e;b<R.length;b++){var A=p(R[b]);""!==A&&(A.startsWith("#")?g(A)?f(n,y,A):I(A):O(A))}S.parts&&S.parts.length>0&&(T=S.parts.reduce((function(e,t){return e+t.duration}),0),O(s.PHANTOM_SEGMENT_URL)),n.segments=v,n.totalDuration=m},t.addCustomTagToPlaylistTagList=d,t.handleCustomTag=f,t.removeTrailingWhitespaces=p,t.isCustomTag=g;var a=n(66790),o=n(3714),s=n(63066),u=n(41908),l=n(1945),c=n(5707);function d(e,t){void 0===e.tags&&(e.tags=[]),t&&e.tags.push(t)}function f(e,t,n){t.push({type:o.MetadataType.CUSTOM,attributes:n}),d(e,(0,c.generateCustomTag)(n))}function p(e){return e.replace(/^[ \t]+/g,"")}function g(e){return/^#(?!EXT)/m.test(e)}},81232:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.HLSModuleDefinition=void 0;var i=n(62756),r=n(8251),a=n(56727),o=n(14447),s=n(37432),u=n(18146),l=n(73315),c=n(23512),d=n(61895),f={setPresentationTimeOffset:l.setPresentationTimeOffset,setTimestampRolloverPositions:l.setTimestampRolloverPositions},p={areDiscontinuitiesMisaligned:d.areDiscontinuitiesMisaligned,getPresentationTimeOffset:d.getPresentationTimeOffset,getHlsState:d.getHlsState,getPlaylistType:d.getPlaylistType,getIsLowLatencyPlaylist:d.getIsLowLatencyPlaylist,getEndlist:d.getEndlist,getDefaultLanguages:d.getDefaultLanguages,getCustomTags:d.getCustomTags,getDiscoSequenceTiming:d.getDiscoSequenceTiming,getDiscoSequenceTimings:d.getDiscoSequenceTimings,getFirstDiscoSequenceTiming:d.getFirstDiscoSequenceTiming,getMergedDiscontinuityTimings:d.getMergedDiscontinuityTimings};t.HLSModuleDefinition={name:i.ModuleName.HLS,module:function(){return{HlsTimelineTracker:a.HlsTimelineTracker,M3u8Loader:o.M3u8Loader,parsePlaylist:s.parsePlaylist,PlaylistUtils:u.PlaylistUtils,DiscontinuitySequenceNumberTracker:r.DiscontinuitySequenceNumberTracker,HlsReducer:c.HlsReducer,actions:f,selectors:p,canMakeBlockingPlaylistReload:u.canMakeBlockingPlaylistReload}},dependencies:[i.ModuleName.EngineBitmovin]},t.default=t.HLSModuleDefinition},93187:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.forceReallocateStringProps=function e(t){Object.keys(t).forEach((function(n){"string"==typeof t[n]&&(t[n]=(0,i.forceReallocation)(t[n])),"object"==typeof t[n]&&e(t[n])}))};var i=n(20649)},95212:function(e,t){"use strict";var n;Object.defineProperty(t,"__esModule",{value:!0}),t.M3u8Validator=t.M3u8ValidatorError=void 0,function(e){e.EmptyPlaylist="EmptyPlaylist"}(n||(t.M3u8ValidatorError=n={}));var i=function(){function e(){}return e.checkForError=function(t){for(var n=0,i=e.mediaPlaylistRules;n<i.length;n++){var r=i[n];if(!r.fn(t))return r.err}return null},e.mediaPlaylistRules=[{fn:function(e){var t;return(null===(t=e.segments)||void 0===t?void 0:t.length)>0},err:n.EmptyPlaylist}],e}();t.M3u8Validator=i},97123:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.WebWorkerParser=void 0;var i=function(){function e(e){var t=this;this.r5=!1,this.s5=[],this.t5=function(e){var n=e.data;if(["parsedPlaylist","error"].includes(n.action)&&0!==t.s5.length){var i=t.s5.shift();if("error"===n.action&&(null==i||i.rejectFn(n.data)),"parsedPlaylist"===n.action&&(null==i||i.resolveFn(n.data)),t.s5.length>0){var r=t.s5[0];t.q5.postMessage(r.message)}else t.r5=!1}};try{var i=n(62903);this.q5=new i,this.q5.onmessage=this.t5}catch(t){e.warn("WebWorkerParser: Could not create web worker",t)}}return e.prototype.parsePlaylist=function(e,t){var n=this;return new Promise((function(i,r){var a={action:"parseHlsPlaylist",payload:{data:e,options:t}};n.s5.push({resolveFn:i,rejectFn:r,message:a}),n.r5||(n.r5=!0,n.q5.postMessage(a))}))},e.getInstance=function(t){return e.instance||(e.instance=new e(t)),e.instance},e.instance=null,e}();t.WebWorkerParser=i}},function(e){return function(){return e(e.s=81232)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.subtitles=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player.subtitles=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[482],{606:function(t,e,n){var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.SubtitleService=void 0;var r=n(80813),o=n(56481),s=n(3714),a=n(91678),u=n(93204),l=n(34047),c=n(85434),d=n(70850),f=n(88052),p=n(62756),v=n(22374),h=n(37723),g=n(53396),y=n(39310),b=n(60672),m=n(88788),S=n(69363),M=n(74715),E=function(){function t(t){var e=this;this.context=t,this.getTransmuxer=function(){return e.Ds},this.Vs=function(){e.Us()},this.cs=function(t){var n;e.Us(),e.Is=t.position;var i=null!==(n=e.Is)&&void 0!==n?n:0,r=function(t){return function(t){return"seekTarget"in t}(t)?t.seekTarget:t.target}(t);Object.values(e.As).forEach((function(t){return t.onSeek(i,r)})),e.Gs.onSeek(i,r)},this.ds=function(){var t,n=null!==(t=e.Is)&&void 0!==t?t:0,i=e.context.internalPlayer.getCurrentTime();Object.values(e.As).forEach((function(t){return t.onSeeked(n,i)})),e.Gs.onSeeked(n,i)},this.hs=function(t,n){e.context.logger.debug("Switching periods in subtitleService");var i=e.Cs.findPeriod(t);i?(e.gs(t,n),e.setupControllersForNextPeriod(i),e.is()):e.context.logger.log("Can not find period with id = ".concat(t," in Manifest. Skipping period update"))},this.ks=function(){Object.keys(e.As).forEach((function(t){return e.As[t].dispose()})),e.As={},e.Bs&&(e.Bs.dispose(),e.Bs=void 0),e.Hs&&e.Hs.reset()},this.As={},this.Es=t.eventHandler,this.Cs=t.serviceManager.get(r.ServiceName.ManifestService,t.sourceContext.sourceIdentifier),this.Fs=new h.EnabledSubtitlesTracker,this.Gs=new g.ForcedSubtitleController,this.Es.on(s.PlayerEvent.Seek,this.cs),this.Es.on(s.PlayerEvent.TimeShift,this.cs),this.Es.on(s.PlayerEvent.Seeked,this.ds),this.Es.on(s.PlayerEvent.TimeShifted,this.ds),this.Es.on(s.PlayerEvent.SourceUnloaded,this.ks),this.Ks=f.ModuleManager.has(p.ModuleName.SubtitlesCEA608)?f.ModuleManager.get(p.ModuleName.SubtitlesCEA608):void 0,this.Ms()}return t.prototype.Ls=function(t,e){var n=t!==e,i=this.Cs.isHlsManifest()&&!(e||!t);return n||i},t.prototype.Ms=function(){var t=this,e=this.context.serviceManager.get(r.ServiceName.SourceStoreService,this.context.sourceContext.sourceIdentifier);this.Js=(0,u.subscribe)(e)(f.ModuleManager.get(p.ModuleName.EngineBitmovin).selectors.getPlayingPeriodId,this.hs,(function(e,n){return t.Ls(e,n)}))},t.prototype.setupControllersForNextPeriod=function(t){var e=this,n=f.ModuleManager.get(p.ModuleName.EngineBitmovin).getMimeTypeForAdaptationSet;t.AdaptationSet.forEach((function(t){var i=n(t);(0,M.isSubtitleTrack)(i,e.Cs.isHlsManifest())&&e.Ns(t,i)}))},t.prototype.Ns=function(t,e){if((0,M.isFragmentedAdaptationSet)(t))return this.context.store.dispatch((0,a.initializeMetricsForMimeType)(e,this.context.settings)),void this.Os(t,e);this.Ps(t,e)},t.prototype.Os=function(t,e){var n=this.context.sourceContext.sourceIdentifier,i=this.context.serviceManager.get(r.ServiceName.SourceStoreService,this.context.sourceContext.sourceIdentifier);if(i){var o={mimeType:e,codec:f.ModuleManager.get(p.ModuleName.EngineBitmovin).getCodecsFromAdaptationSet(t),isHls:this.Cs.isHlsManifest(),manifestLoader:this.context.serviceManager.get(r.ServiceName.ManifestLoadingService,n),periodId:t._internalId.periodId,sourceStore:i};this.addFragmentSubtitle(o,t)}},t.prototype.Ps=function(t,e){if(f.ModuleManager.has(p.ModuleName.DASH)){var n=new(f.ModuleManager.get(p.ModuleName.DASH).SegmentTemplateMPDHandler)(this.context),i=this.Cs.toSubtitleTrack(t,e);n.setAdaptationSetId(t._internalId),i.url=n.getSubtitleUrl().toString(),this.addExternalSubtitle(i,t)}},t.prototype.setTransmuxer=function(t){this.Ds=t},t.prototype.hasSubtitle=function(t){return Boolean(this.As[t])},t.prototype.enableSubtitle=function(t){var e=this,n=this.As[t];return n&&!n.isActive()?n.activate().then((function(){n.refresh(),e.Gs.deactivate()})).then((function(){return e.Fs.addSubtitle(n.getSubtitle()),!0})).catch((function(t){return e.context.logger.debug("Error during subtitle activation",t),!1})):Promise.resolve(!1)},t.prototype.addExternalSubtitle=function(t,e){if(void 0===e&&(e=null),t.id||(t.id=t.url),this.Qs(t,e))return t;var n=new b.ExternalFileSubtitleHandler(this.context,t,e);return this.Rs(n),t},t.prototype.Qs=function(t,e){var n,i,r=this.As[t.id],o=null!==(n=null==r?void 0:r.periodId)&&void 0!==n?n:null,s=null!==(i=null==e?void 0:e._internalId.periodId)&&void 0!==i?i:null;return r&&o===s?r:this.Gs.getForcedSubtitleHandler((function(e){var n,i=e.getSubtitle().id===t.id,r=(null!==(n=e.periodId)&&void 0!==n?n:null)===s;return i&&r}))},t.prototype.Rs=function(t){var e=t.getSubtitle(),n=this.context.config.playback.isForcedSubtitle;if("function"==typeof n?(0,d.safeUserCallback)((function(){return n(e)}),this.context.logger):e.forced)this.Gs.addSubtitleHandler(t);else{var i=!1,r=e.id;this.As[r]&&(i=this.As[r].isActive(),this.js(r)),this.Ss(t),i&&t.activate()}},t.prototype.Ss=function(t){var e=t.getSubtitle();this.Ts(e),this.As[e.id]=t,this.es(e)},t.prototype.Ts=function(t){var e,n,i=this.context.sourceContext.source.labeling,r=this.Cs.isHlsManifest()?null===(e=null==i?void 0:i.hls)||void 0===e?void 0:e.subtitles:null===(n=null==i?void 0:i.dash)||void 0===n?void 0:n.subtitles;"function"==typeof r&&(t.label=(0,d.safeUserCallback)((function(){return r(t)}),this.context.logger))},t.prototype.addFragmentSubtitle=function(t,e){if(!f.ModuleManager.has(p.ModuleName.EngineBitmovin))return this.context.logger.warn("Unable to add fragmented subtitles because MSE Module is missing"),null;var n=this.Cs.toSubtitleTrack(e,t.mimeType);n.isFragmented=!0,n.url=null;var i=new m.FragmentedSubtitleHandler(this.context,t,n,this.getTransmuxer);return this.Rs(i),n},t.prototype.setupCea608CaptionExtractor=function(t){var e;if(!this.Ks)return this.Es.dispatchEvent(s.PlayerEvent.Warning,new v.PlayerModuleMissingWarning(p.ModuleName.SubtitlesCEA608,"The ".concat(p.ModuleName.SubtitlesCEA608," module is required to parse CEA captions."))),this.context.logger.log("CEA Caption parsing is disabled, because the Cea680 module is not loaded"),null;if(!f.ModuleManager.has(p.ModuleName.ContainerMP4))return this.Es.dispatchEvent(s.PlayerEvent.Warning,new v.PlayerModuleMissingWarning(p.ModuleName.ContainerMP4,"The ".concat(p.ModuleName.ContainerMP4," module is required to parse CEA captions."))),this.context.logger.log("CEA Caption parsing is disabled, because the ContainerMP4 module is not loaded"),null;this.Bs&&this.Bs.dispose();var n=f.ModuleManager.get(p.ModuleName.ContainerMP4),i=this.Ks.Cea608Extractor;return this.Bs=new i(t,n,null===(e=this.context.config.tweaks)||void 0===e?void 0:e.parse_cea_708_caption),this.Bs},t.prototype.Us=function(){this.Bs&&(this.context.logger.debug("Resetting CEA caption extractor..."),this.Bs.reset())},t.prototype.Ws=function(){var t=f.ModuleManager.get(p.ModuleName.HLS);this.Hs=new t.DiscontinuitySequenceNumberTracker(c.MimeTypeHelper.isVideo),this.Hs.subscribe(this.Vs)},t.prototype.Xs=function(t){this.Hs||this.Ws(),this.Hs.trackSegment(t)},t.prototype.Ys=function(){return this.Cs.getManifest()&&this.Cs.isHlsManifest()&&f.ModuleManager.has(p.ModuleName.HLS)},t.prototype.handleClosedCaptions=function(t,e,n,i){var r;return!i&&c.MimeTypeHelper.isVideo(e.getMimeType())&&(null===(r=this.Ks)||void 0===r?void 0:r.CEA_EXTRACTOR_SUPPORTED_CODEC_TAGS.includes((0,l.getCodecTag)(e)))?this.Zs(e,t.getTimestampOffset()):(this.bs(n,e.getPeriodId()),Promise.resolve())},t.prototype.Zs=function(t,e){var n=this;return this.Bs?(this.Ys()&&this.Xs(t),this.Bs.extract(t).then((function(i){!function(t,e){t.forEach((function(t){t.start-=e,t.end-=e}))}(i,e),i.length>0&&(n.context.logger.insane("Extracted Closed Captions from fMP4: "+JSON.stringify(i)),n.bs(i,t.getPeriodId()))})).catch((function(t){var e;t instanceof v.PlayerModuleMissingWarning?(null===(e=n.Bs)||void 0===e||e.dispose(),n.Bs=void 0,n.Es.dispatchEvent(s.PlayerEvent.Warning,t)):n.context.logger.debug("Error parsing CEA-608 Captions from fMP4: "+t)}))):Promise.resolve()},t.prototype.bs=function(t,e){if(t&&Array.isArray(t)&&0!==t.length)for(var n=this.Cs.getClosedCaptionLabels(e),i=function(t){var i=t.channel;if(!r.As[i]){var o=n.find((function(t){return t.id===i}))||{id:i,kind:"captions",lang:"unknown",label:"Captions (".concat(t.channel,")")};r.Ss(new y.Cea608Handler(r.context,o))}r.As[i].addCaption(t,e)},r=this,o=0,s=t;o<s.length;o++)i(s[o])},t.prototype.es=function(t){this.Es.dispatchEvent(s.PlayerEvent.SubtitleAdded,{subtitle:i({},t)})},t.prototype.disableSubtitle=function(t){var e=this,n=this.As[t];return n?n.deactivate().then((function(){return e.Fs.removeSubtitle(t),0===e.getActiveSubtitles().length&&e.Gs.activate().catch((function(){})),!0})).catch((function(){return!1})):Promise.resolve(!1)},t.prototype.disableAllSubtitles=function(){var t=this;this.getActiveSubtitles().forEach((function(e){return t.disableSubtitle(e.id)}))},t.prototype.removeSubtitle=function(t){this.js(t),this.Fs.removeSubtitle(t)},t.prototype.getActiveSubtitles=function(){var t=this;return Object.keys(this.As).filter((function(e){return t.As[e].isActive()})).map((function(e){return t.As[e].getSubtitle()}))},t.prototype.hasSubtitles=function(){return Object.keys(this.As).length>0},t.prototype.getAvailableSubtitles=function(t){return Object.values(this.As).filter((function(e){var n=e.periodId;return!n||t===n})).map((function(t){return t.getSubtitle()}))},t.prototype.enableForcedSubtitle=function(t){this.Gs.activate(t).catch((function(){}))},t.prototype.fs=function(t,e,n){var i=t.getSubtitleType()===S.SubtitleType.FRAGMENTED&&t.periodId===n,r=t.getSubtitleType()===S.SubtitleType.EXTERNAL_FILE&&t.periodId&&t.periodId!==e;return i||r},t.prototype.gs=function(t,e){var n=this;Object.keys(this.As).forEach((function(i){var r=n.As[i];n.fs(r,t,e)&&n.js(i)}))},t.prototype.is=function(){var t=this;Object.keys(this.As).forEach((function(e){var n,i=t.As[e];if(!i.isActive()&&t.Fs.shouldEnableSubtitle(i.getSubtitle(),t.As)){var r={subtitle:i.getSubtitle()};null===(n=t.Es)||void 0===n||n.dispatchEvent(s.PlayerEvent.SubtitleEnable,r),i.activate().then((function(){var e;null===(e=t.Es)||void 0===e||e.dispatchEvent(s.PlayerEvent.SubtitleEnabled,r)}))}}))},t.prototype.js=function(t){if(this.As[t]){var e=this.As[t].getSubtitle();this.As[t].dispose(),delete this.As[t],this.Es&&this.Es.dispatchEvent(s.PlayerEvent.SubtitleRemoved,{subtitle:e})}},t.prototype.clearBuffersUntil=function(t){var e=this;Object.keys(this.As).forEach((function(n){return e.As[n].clearBuffersUntil(t)}))},t.prototype.dispose=function(){this.ks(),this.Fs=(0,o.dispose)(this.Fs),this.Gs=(0,o.dispose)(this.Gs),this.Hs=(0,o.dispose)(this.Hs),this.Ds=void 0,this.Cs=null,this.Es.off(s.PlayerEvent.Seek,this.cs),this.Es.off(s.PlayerEvent.TimeShift,this.cs),this.Es.off(s.PlayerEvent.Seeked,this.ds),this.Es.off(s.PlayerEvent.TimeShifted,this.ds),this.Es.off(s.PlayerEvent.SourceUnloaded,this.ks),this.Js(),this.As={},this.Es=null},t}();e.SubtitleService=E},15569:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.parsePlainTextSubtitles=function(t){var e,n,o=r.TextSegmentAnalyzer.detectEncoding(t.getData()),s=i.ArrayHelper.convertBufferSourceToUTF8(t.getData(),o),a=null!==(e=t.getPlaybackTime())&&void 0!==e?e:0;return[{start:a,end:a+(null!==(n=t.getDuration())&&void 0!==n?n:0),text:s}]};var i=n(74853),r=n(66502)},26438:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.SubtitleParserFactory=void 0;var i=n(3714),r=n(88052),o=n(62756),s=n(22374),a=function(){function t(){}return t.createInstance=function(t,e){var n;return e.indexOf("<?")>-1||e.indexOf("<tt")>-1?r.ModuleManager.has(o.ModuleName.SubtitlesTTML)?n=new(0,r.ModuleManager.get(o.ModuleName.SubtitlesTTML).TTMLParser)(t):t.eventHandler.dispatchEvent(i.PlayerEvent.Warning,new s.PlayerModuleMissingWarning(o.ModuleName.SubtitlesTTML,"The ".concat(o.ModuleName.SubtitlesTTML," module is required to parse TTML subtitles."))):r.ModuleManager.has(o.ModuleName.SubtitlesWebVTT)?n=new(r.ModuleManager.get(o.ModuleName.SubtitlesWebVTT).WebVttParser):t.eventHandler.dispatchEvent(i.PlayerEvent.Warning,new s.PlayerModuleMissingWarning(o.ModuleName.SubtitlesWebVTT,"The ".concat(o.ModuleName.SubtitlesWebVTT," module is required to parse WebVTT subtitles."))),n},t}();e.SubtitleParserFactory=a},37723:function(t,e){var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.EnabledSubtitlesTracker=void 0;var i=function(){function t(){this.KQ={},this.LQ=0}return t.prototype.addSubtitle=function(t){this.removeSubtitle(t.id),this.KQ[this.NQ()]=n({isFragmented:!1},t)},t.prototype.removeSubtitle=function(t){var e=this;Object.keys(this.KQ).forEach((function(n){e.KQ[n].id===t&&delete e.KQ[n]}))},t.prototype.shouldEnableSubtitle=function(t,e){var n=this,i=Object.keys(this.KQ).find((function(i){return n.MQ(n.KQ[i],e)===t.id}));return Boolean(i)},t.prototype.MQ=function(t,e){var n=t.id,i=t.kind,o=t.lang,s=t.isFragmented;return r({lang:o,kind:i,isFragmented:s,id:n},e)||r({lang:o,kind:i,isFragmented:s},e)||r({lang:o,kind:i},e)},t.prototype.NQ=function(){return this.LQ++,this.LQ},t.prototype.dispose=function(){this.KQ={},this.LQ=0},t}();function r(t,e){return Object.keys(e).find((function(n){var i=e[n].getSubtitle(),r=i.id,o=i.lang,s=i.isFragmented,a=i.kind,u=r===t.id,l=!t.isFragmented||s===t.isFragmented,c=o===t.lang;t.isPreferred&&t.lang&&(c=o.includes(t.lang)||t.lang.includes(o));var d=a===t.kind&&c&&l;return u||d}))}e.EnabledSubtitlesTracker=i},39310:function(t,e,n){var i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.Cea608Handler=void 0;var r=n(74437),o=n(69363),s=function(t){function e(e,n,i){return void 0===i&&(i=null),t.call(this,e,n,i)||this}return i(e,t),e.prototype.onSeek=function(){},e.prototype.onSeeked=function(t,e){var n=e<t,i=this.context.settings.CLEAR_BUFFERS_ON_SEEKING_BACKWARDS;n&&i&&this.clearBuffersUntil(this.context.renderer.getDuration())},e.prototype.addCaption=function(t,e){t&&(this.fireOnCueParsedEvents([t],e),this.timeline.addCues([t],0))},e.prototype.getSubtitleType=function(){return o.SubtitleType.IN_STREAM},e}(r.AbstractSubtitleHandler);e.Cea608Handler=s},42009:function(t,e){function n(t){return t.replace(/<[^>]*>?/g,"")}function i(t){return t.replace(/<br\s*\/?>/g,"\n")}Object.defineProperty(e,"__esModule",{value:!0}),e.htmlToText=function(t){return n(i(t))},e.stripHtmlTags=n,e.prepareHtml=function(t){return t.replace(/(\r\n|\r|\n)/g,"<br />")},e.replaceHtmlBreakPointsWithNewLine=i,e.stripAwayHtmlBreakPoints=function(t){return t.replace(/<br\s*\/?>/g,"")}},52112:function(t,e,n){var i=this&&this.__createBinding||(Object.create?function(t,e,n,i){void 0===i&&(i=n);var r=Object.getOwnPropertyDescriptor(e,n);r&&!("get"in r?!e.__esModule:r.writable||r.configurable)||(r={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,i,r)}:function(t,e,n,i){void 0===i&&(i=n),t[i]=e[n]}),r=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||i(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),e.SubtitleModuleDefinition=void 0;var o=n(62756),s=n(71340),a=n(42009),u=n(55552),l=n(78717),c=n(26438),d=n(606),f=n(85224);e.SubtitleModuleDefinition={name:o.ModuleName.Subtitles,module:function(){return{SubtitleService:d.SubtitleService,SubtitleParserFactory:c.SubtitleParserFactory,PlayerSubtitlesApiFactory:l.PlayerSubtitlesApiFactory,HtmlTransformer:a,LanguageComparer:u,hashCode:s.hashCode,createHtmlElement:f.createHtmlElement}},dependencies:[o.ModuleName.EngineBitmovin]},e.default=e.SubtitleModuleDefinition,r(n(82657),e)},53396:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.ForcedSubtitleController=void 0;var i=n(55552),r=function(){function t(){this.OQ={}}return t.prototype.addSubtitleHandler=function(t){this.OQ[t.getSubtitle().id]=t},t.prototype.deactivate=function(){return this.QQ()?Promise.all(Object.values(this.OQ).map((function(t){return t.deactivate()}))).then((function(){})):Promise.resolve()},t.prototype.activate=function(t){var e=this;return void 0===t&&(t=this.PQ),this.QQ()?(this.PQ=t,this.deactivate().then((function(){var t=Object.values(e.OQ).find((function(t){return(0,i.isEqualIsoLanguage)(t.getSubtitle().lang,e.PQ)}));if((t=null!=t?t:Object.values(e.OQ)[0])&&!t.isActive())return t.activate().catch((function(){}))}))):Promise.resolve()},t.prototype.onSeek=function(t,e){Object.values(this.OQ).forEach((function(n){return n.onSeek(t,e)}))},t.prototype.onSeeked=function(t,e){Object.values(this.OQ).forEach((function(n){return n.onSeeked(t,e)}))},t.prototype.dispose=function(){Object.values(this.OQ).forEach((function(t){return t.dispose()})),this.OQ=null},t.prototype.QQ=function(){return Object.keys(this.OQ).length>0},t.prototype.getForcedSubtitleHandler=function(t){if(this.OQ)return Object.values(this.OQ).find((function(e){return t(e)}))},t}();e.ForcedSubtitleController=r},55552:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.isEqualIsoLanguage=function(t,e){var n;if(void 0===e)return!1;if(null===(n=window.Intl)||void 0===n?void 0:n.DisplayNames){var i=new window.Intl.DisplayNames(["en"],{type:"language"});try{return i.of(t.split("-")[0])===i.of(e.split("-")[0])}catch(t){}}return t===e}},60672:function(t,e,n){var i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.ExternalFileSubtitleHandler=void 0;var r=n(25926),o=n(4224),s=n(56481),a=n(3714),u=n(4129),l=n(29669),c=n(26438),d=n(74437),f=n(69363),p=function(t){function e(n,i,r){var o=t.call(this,n,i,r&&r._internalId.periodId)||this;return o.VQ=function(t){if(o.timeline.removeCues(),null==t?void 0:t.body){o.UQ=!0;var e=o.WQ(t.body.trim()),n=o.applyVttOffset(e);o.fireOnCueParsedEvents(n,null),o.timeline.addCues(n)}},r&&(i.id=r.Representation[0]._id),i.url?(o.TQ=e.enforceHTTPSForSecureOrigins(i.url.trim()),o.UQ=!1,o.RQ=new u.DefaultContentLoader(o.context,{maxRetries:o.context.settings.MAX_RETRIES,retryDelay:o.context.settings.RETRY_DELAY,requestType:l.HttpRequestType.MEDIA_SUBTITLES})):(o.context.logger.log("No url was provided for an external subtitle, nothing will be loaded."),o.UQ=!0,o.SQ=Promise.resolve()),o}return i(e,t),e.prototype.activate=function(){var e=this;return this.context.logger.debug("loading "+this.TQ),t.prototype.activate.call(this).then((function(){return e.SQ?e.SQ:e.UQ?Promise.resolve():(e.SQ=e.RQ.load(e.TQ).then(e.VQ).catch((function(t){var n,i;if(e.SQ=void 0,!e.isActive())return Promise.resolve();throw e.context.eventHandler&&e.context.eventHandler.dispatchEvent(a.PlayerEvent.Warning,new r.PlayerWarning(o.WarningCode.NETWORK_COULD_NOT_LOAD_SUBTITLE)),e.context.logger.debug("Could not load subtitles/captions, got HTTP status code ".concat(null!==(i=null===(n=null==t?void 0:t.status)||void 0===n?void 0:n.toString())&&void 0!==i?i:""),t),e.deactivate(),"loading failed"})),e.SQ)}))},e.prototype.WQ=function(t){return c.SubtitleParserFactory.createInstance(this.context,t).parse(t)},e.enforceHTTPSForSecureOrigins=function(t){var e=new RegExp("^(?:[a-z]+:)?//","i");return"https:"===location.protocol?t.replace(e,"//"):t},e.prototype.getSubtitleType=function(){return f.SubtitleType.EXTERNAL_FILE},e.prototype.clearBuffersUntil=function(){},e.prototype.onSeek=function(){},e.prototype.onSeeked=function(){},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.RQ=(0,s.dispose)(this.RQ)},e}(d.AbstractSubtitleHandler);e.ExternalFileSubtitleHandler=p},69363:function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.SubtitleType=void 0,function(t){t[t.EXTERNAL_FILE=0]="EXTERNAL_FILE",t[t.FRAGMENTED=1]="FRAGMENTED",t[t.IN_STREAM=2]="IN_STREAM"}(n||(e.SubtitleType=n={}))},71340:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hashCode=function(t){var e=0;if(0===t.length)return e;for(var n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n),e|=0;return e}},74437:function(t,e,n){var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)},r=this&&this.__runInitializers||function(t,e,n){for(var i=arguments.length>2,r=0;r<e.length;r++)n=i?e[r].call(t,n):e[r].call(t);return i?n:void 0},o=this&&this.__esDecorate||function(t,e,n,i,r,o){function s(t){if(void 0!==t&&"function"!=typeof t)throw new TypeError("Function expected");return t}for(var a,u=i.kind,l="getter"===u?"get":"setter"===u?"set":"value",c=!e&&t?i.static?t:t.prototype:null,d=e||(c?Object.getOwnPropertyDescriptor(c,i.name):{}),f=!1,p=n.length-1;p>=0;p--){var v={};for(var h in i)v[h]="access"===h?{}:i[h];for(var h in i.access)v.access[h]=i.access[h];v.addInitializer=function(t){if(f)throw new TypeError("Cannot add initializers after decoration has completed");o.push(s(t||null))};var g=(0,n[p])("accessor"===u?{get:d.get,set:d.set}:d[l],v);if("accessor"===u){if(void 0===g)continue;if(null===g||"object"!=typeof g)throw new TypeError("Object expected");(a=s(g.get))&&(d.get=a),(a=s(g.set))&&(d.set=a),(a=s(g.init))&&r.unshift(a)}else(a=s(g))&&("field"===u?r.unshift(a):d[l]=a)}c&&Object.defineProperty(c,i.name,d),f=!0};Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractSubtitleHandler=void 0;var s=n(80813),a=n(3714),u=n(80438),l=n(69957),c=n(44468),d=n(88052),f=n(62756),p=function(){var t,e,n=[];return t=function(){function t(t,e,i){void 0===i&&(i=null);var o=this;this.timeline=r(this,n),this.onCueEnter=function(t){o.context.eventHandler.dispatchEvent(a.PlayerEvent.CueEnter,v(t,o.getSubtitle().id))},this.onCueExit=function(t){o.context.eventHandler&&o.context.eventHandler.dispatchEvent(a.PlayerEvent.CueExit,v(t,o.getSubtitle().id))},this.onCueUpdate=function(t){o.context.eventHandler.dispatchEvent(a.PlayerEvent.CueUpdate,v(t,o.getSubtitle().id))},this.context=t,this.U7=e,this.U7.enabled=this.U7.enabled||!1,this.timeline=new u.Timeline(t,{onCueEnter:this.onCueEnter,onCueExit:this.onCueExit,onCueUpdate:this.onCueUpdate}),this.timeline.stopListening(),this.periodId=i,this.V7=t.serviceManager.get(s.ServiceName.SourceStoreService,t.sourceContext.sourceIdentifier)}return t.prototype.fireOnCueParsedEvents=function(t,e){var n=this;t&&this.context.eventHandler&&t.forEach((function(t){n.context.eventHandler.dispatchEvent(a.PlayerEvent.CueParsed,i(i({subtitleId:n.getSubtitle().id},t),{periodId:e}))}))},t.prototype.isActive=function(){return this.U7.enabled},t.prototype.activate=function(){return this.U7.enabled=!0,this.timeline.startListening(),this.timeline.show(),Promise.resolve()},t.prototype.deactivate=function(){return this.U7.enabled=!1,this.timeline.stopListening(),this.timeline.hide(),Promise.resolve()},t.prototype.refresh=function(){this.timeline.show()},t.prototype.getSubtitle=function(){return this.U7},t.prototype.clearBuffersUntil=function(t){this.timeline.removeCuesUntil(t)},t.prototype.dispose=function(){this.V7=null,this.deactivate(),this.timeline.dispose()},t.prototype.isTsContainer=function(){var t,e=d.ModuleManager.get(f.ModuleName.EngineBitmovin),n=e.selectors,i=e.mseModuleTypes;return(null===(t=n.getContainerFormat(this.V7.getState(),c.MediaType.Video))||void 0===t?void 0:t.source)===i.containerFormat.TS},t.prototype.applyVttOffset=function(t){return this.isTsContainer()?t.map((function(t){return null!=t.offset?i(i({},t),{start:t.start+t.offset,end:t.end+t.offset,updates:t.updates.map((function(e){return i(i({},e),{updateTime:e.updateTime+t.offset})}))}):t})):t},t}(),function(){var i="function"==typeof Symbol&&Symbol.metadata?Object.create(null):void 0;e=[(0,l.trackPerformance)("SubtitleHandler.activate")],o(t,null,e,{kind:"method",name:"activate",static:!1,private:!1,access:{has:function(t){return"activate"in t},get:function(t){return t.activate}},metadata:i},null,n),i&&Object.defineProperty(t,Symbol.metadata,{enumerable:!0,configurable:!0,writable:!0,value:i})}(),t}();function v(t,e){return i({subtitleId:e,start:t.start,end:t.end},t.content)}e.AbstractSubtitleHandler=p},74715:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.isSubtitleTrack=function(t,e){return(i.MimeTypeHelper.isText(t)||i.MimeTypeHelper.isTtmlXml(t))&&!e||i.MimeTypeHelper.isApplication(t)},e.isFragmentedAdaptationSet=function(t){var e=[t];return t.Representation&&t.Representation.length>0&&e.push(t.Representation[0]),e.some((function(t){return t.SegmentList||t.SegmentTemplate||t.SegmentBase}))};var i=n(85434)},78717:function(t,e,n){var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.PlayerSubtitlesApiFactory=void 0;var r=n(3714),o=function(){function t(){}return t.build=function(t){return new(function(){function e(){}return e.prototype.add=function(e){t.addSubtitle(e)},e.prototype.remove=function(e){t.removeSubtitle(e)},e.prototype.list=function(){return t.listSubtitles()},e.prototype.enable=function(e,n){void 0===n&&(n=!0),t.enableSubtitle(e,n)},e.prototype.disable=function(e){t.disableSubtitle(e)},e.prototype.cueEnter=function(e){t.fireEvent(r.PlayerEvent.CueEnter,i(i({},e),{type:r.PlayerEvent.CueEnter}))},e.prototype.cueExit=function(e){t.fireEvent(r.PlayerEvent.CueExit,i(i({},e),{type:r.PlayerEvent.CueExit}))},e}())},t}();e.PlayerSubtitlesApiFactory=o},82657:function(t,e){Object.defineProperty(e,"__esModule",{value:!0})},85224:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.createHtmlElement=function(t){var e;if(function(){if(void 0===o){var t=(0,r.getCapabilities)().isReactNative,e=window&&window.document&&"function"==typeof window.document.createElement;o=!e||t}return o}()){var n=function(){return null!=i||(i=new DOMParser),i}().parseFromString("<".concat(t,"></").concat(t,">"),"text/html");return(null===(e=n.body)||void 0===e?void 0:e.firstChild)||n.firstChild}return document.createElement(t)};var i,r=n(21513),o=void 0},86058:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.parseMP4WrappedSubtitles=function(t,e){var n=t.getTimescale();if(void 0===n||!s.ModuleManager.has(a.ModuleName.ContainerMP4))return[];var o=s.ModuleManager.get(a.ModuleName.ContainerMP4);return function(t,e,n){var o=0,s=[],a=0;return t.forEach((function(t){var c=r.CodecStringHelper.extractCodec(e.getCodec()),d=t.duration/n,f=e.getPlaybackTime()+o,p=f+d;if(o+=d,"wvtt"===c||"vtt"===c){var v=function(t,e,n,r){for(var o=t.data.buffer,s=t.data.byteOffset,a=0,u=[],c="",d="";a<t.data.byteLength;){var f=t.data.getUint32(a),p=s+a,v=i.ArrayHelper.convertBufferSourceToUTF8(new Uint8Array(o,p+4,4));if("vttc"===v){if(c){var h=l(e,n,r,d,c);u.push(h),r+=1,c="",d=""}a+=8}else"payl"===v?(c=i.ArrayHelper.convertBufferSourceToUTF8(new Uint8Array(o,p+8,f-8)),a+=f):"sttg"===v?(d=i.ArrayHelper.convertBufferSourceToUTF8(new Uint8Array(o,p+8,f-8)),a+=f):a+=f}return c&&(h=l(e,n,r,d,c),u.push(h)),u}(t,f,p,a);a+=v.length,v.forEach((function(t){s.push({start:f,end:p,text:t})}))}else"stpp"===c&&s.push({start:f,end:p,text:u(t)})})),s}(o.getMp4Fragments(t).flatMap((function(n){return o.getTrackSamples(n.moof,n.mdat,t,e)})),t,n)};var i=n(74853),r=n(34047),o=n(66502),s=n(88052),a=n(62756);function u(t){var e=new Uint8Array(t.data.buffer,t.data.byteOffset,t.data.byteLength);return i.ArrayHelper.convertBufferSourceToUTF8(e,o.TextSegmentAnalyzer.detectEncoding(t.data))}function l(t,e,n,i,r){return["[EMBEDDEDWEBVTT]",t,e,n,i,r].join("\n")}},88788:function(t,e,n){var i=this&&this.__extends||function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},t(e,n)};return function(e,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}(),r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var r in e=arguments[n])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.FragmentedSubtitleHandler=void 0;var o=n(4524),s=n(80813),a=n(3714),u=n(44468),l=n(87827),c=n(86897),d=n(93204),f=n(34047),p=n(79721),v=n(85434),h=n(66502),g=n(23068),y=n(88052),b=n(62756),m=n(86058),S=n(15569),M=n(26438),E=n(74437),T=n(69363),P=function(t){function e(e,n,i,r){var o=t.call(this,e,i,n.periodId)||this;o.FR=function(t){var e,n=function(t){var e=null==t?void 0:t.getState();return void 0!==e&&void 0!==t?Promise.race(function(t){var e,n=null!==(e=t.activeTracks)&&void 0!==e?e:{};return Object.keys(n).flatMap((function(t){var e;return null!==(e=n[t].mediaTypes)&&void 0!==e?e:[]})).filter((function(t){return t===u.MediaType.Video||t===u.MediaType.Audio}))}(e).map((function(n){return function(t,e,n){var i=A(n,e);return void 0!==i?Promise.resolve(i):(0,d.waitForStateChangeThen)(t)((function(t){return A(n,t)}),(function(t){return void 0!==t}))}(t,e,n)}))):Promise.reject("SourceState unavailable")}(o.context.serviceManager.get(s.ServiceName.SourceStoreService,o.context.sourceContext.sourceIdentifier)),i=null===(e=t.getSegmentInfo())||void 0===e?void 0:e.discontinuitySequenceNumber;return void 0!==i&&(n=n.then((function(){return o.wR(i)})).then((function(){return o.xR(i)})).then((function(){return o.isActive()})).catch((function(){return!1}))),n.then((function(e){o.GR(t),e&&o.DR(t)}))},o.NR=function(t){var e;if(t&&void 0!==t.time){var n=t.time;o.clearBuffersUntil(n);var i=(null===(e=o.oR)||void 0===e?void 0:e.getTimeForNextSegment(o.XQ))||n,r=i-n,s=function(t){var e=[null==t?void 0:t.getAudioBufferLength(),null==t?void 0:t.getVideoBufferLength()].filter(g.isDefined);return Math.min.apply(Math,e)}(o.context.internalPlayer);isNaN(i)||r>=s||o.YQ.hasNext(i)&&(o.YQ.getMPDHandler().resolvePendingSegmentInfoRequests(),o.YQ.getNext(i))}},o.PR=function(){o.YQ.updateMpd()},o.eventHandler=e.eventHandler,o.cQ=n.sourceStore,o.oR=e.serviceManager.get(s.ServiceName.StreamTimeService),o.dQ=e.serviceManager.get(s.ServiceName.ManifestUpdateSchedulingService,e.sourceContext.sourceIdentifier),o.aQ=r,o.ZQ=n.isHls,o.bQ=e.bufferSettings;var a=y.ModuleManager.get(b.ModuleName.EngineBitmovin).SegmentController;return o.YQ=new a(e,o.FR,n.mimeType,n.codec,n.isHls,n.manifestLoader,n.periodId,n.sourceStore),o.YQ.setCurrentLangObj(i),o.XQ="".concat(n.mimeType,"/").concat(i.id),o.pR=y.ModuleManager.get(b.ModuleName.HLS,!1),o.rR(),o}return i(e,t),e.prototype.rR=function(){!this.qR&&this.cQ&&(this.qR=(0,d.subscribe)(this.cQ)((function(t){return null==t?void 0:t.manifest}),this.PR,(function(t,e){return Boolean((null==t?void 0:t.isInitialized)&&!(null==e?void 0:e.isInitialized))})))},e.prototype.sR=function(){this.qR&&(this.qR(),this.qR=void 0)},e.prototype.tR=function(t){return O(t)?(0,S.parsePlainTextSubtitles)(t):function(t){return v.MimeTypeHelper.isApplication(t.getMimeType())&&!C(t)}(t)?(0,m.parseMP4WrappedSubtitles)(t,this.context.logger):t.getMetadata().subtitles},e.prototype.uR=function(t){var e=t.getMetadata();e.subtitles=this.tR(t),t.setMetadata(e)},e.prototype.vR=function(t){var e,n=null!==(e=t.getPlaybackTime())&&void 0!==e?e:t.getSegmentInfo().startTime;t.setPlaybackTime(n)},e.prototype.wR=function(t){var e=this.aQ();return this.ZQ&&e?(void 0!==t&&this.CR()||(t=-1),e.waitForInitializationForDiscontinuity(t)):Promise.resolve()},e.prototype.xR=function(t){if(!this.CR())return Promise.resolve();if(void 0!==this.ER(t))return Promise.resolve();if(!this.pR)return Promise.reject(new Error("HLS Module missing"));var e=this.pR.selectors,n=e.getHlsState,i=e.getPresentationTimeOffset;return(0,d.waitForStateChangeThen)(this.cQ)((function(e){return i(n(e),String(t))}),(function(t){return void 0!==t})).then()},e.prototype.yR=function(t){var e,n,i=null===(e=this.context.serviceManager.get(s.ServiceName.SourceStoreService,t))||void 0===e?void 0:e.getState(),r=null===(n=this.YQ.getCurrentAdaptationSet())||void 0===n?void 0:n.Representation[0];return r&&i?(0,y.ModuleManager.get(b.ModuleName.EngineBitmovin).selectors.getSegmentInfos)(i,r._internalId.key()):[]},e.prototype.zR=function(t,e){var n,i,r,o,a=y.ModuleManager.get(b.ModuleName.EngineBitmovin).AdaptationSetId,u=this.context.serviceManager.get(s.ServiceName.ManifestService,t),l=new a(p.DEFAULT_PERIOD_ID,e),c=null==u?void 0:u.getAdaptationSet(l);return null!==(o=null===(r=null===(i=null===(n=null==c?void 0:c.Representation[0])||void 0===n?void 0:n.SegmentList)||void 0===i?void 0:i[0])||void 0===r?void 0:r.SegmentURL)&&void 0!==o?o:[]},e.prototype.AR=function(){var t=this.context.sourceContext.sourceIdentifier;return this.context.settings.ENABLE_SEGMENT_INFO_PROVIDER_FROM_STORE?this.yR(t):this.zR(t,this.getSubtitle().id)},e.prototype.BR=function(){var t=this.AR();if(t&&0!==t.length)return t.reduce((function(t,e){var n=_(e)?e.startTime:e._playbackTime,i=_(e)?e.discontinuitySequenceNumber:e._discontinuitySequenceNumber;return(0,g.isNumber)(n)&&(0,g.isNumber)(i)&&void 0===t[i]&&(t[i]=n),t}),{})},e.prototype.CR=function(){var t,e=y.ModuleManager.get(b.ModuleName.HLS,!1),n=null===(t=this.cQ)||void 0===t?void 0:t.getState();if(!e||!n)return!1;var i=e.selectors,r=i.getHlsState,o=i.getMergedDiscontinuityTimings,s=r(n);if(!s)return!1;var a=this.BR();if(!a)return!1;var u=o(s),l=Object.keys(a).find((function(t){return!u[t]||Math.abs(u[t].startTime-a[t])>1})),c=Object.keys(u).find((function(t){return null==a[t]}));return null==l&&null==c},e.prototype.DR=function(t){this.HR(t),this.uR(t),this.vR(t),this.JR(t),this.isActive()&&this.timeline.show()},e.prototype.ER=function(t){var e;if(this.pR){var n=this.pR.selectors,i=n.getHlsState,r=n.getPresentationTimeOffset,o=null===(e=this.cQ)||void 0===e?void 0:e.getState(),s=o?i(o):void 0;if(s)return r(s,String(t))}},e.prototype.GR=function(t){var e,n=t.getPlaybackTimeRange();if(n){var i=y.ModuleManager.get(b.ModuleName.EngineBitmovin),r=i.actions.removeStreamTimeRange,o=i.mseModuleTypes.streamTimeRangeType;null===(e=this.cQ)||void 0===e||e.dispatch(r(this.XQ,n,o.Loading))}},e.prototype.HR=function(t){var e,n=t.getPlaybackTimeRange();if(!t.isInit()&&n){var i=y.ModuleManager.get(b.ModuleName.EngineBitmovin).actions.addLoadedRange,o=r(r({},n),{bufferBlockId:-1});null===(e=this.cQ)||void 0===e||e.dispatch(i(this.XQ,o))}},e.prototype.IR=function(t){var e,n,i=-this.YQ.getMPDHandler().getTimestampOffset();if(this.ZQ){var r=t.getSegmentInfo().discontinuitySequenceNumber,o=this.ER(r);void 0!==o?i=-o:this.context.logger.warn("FragmentedSubtitleHandler: Failed to get PTO for disco sequence ".concat(r," from store, falling back to MPDHandler value of ").concat(-i),t.getSegmentInfo())}return i+(null!==(n=null===(e=this.aQ())||void 0===e?void 0:e.getTimestampMappingOffset(t))&&void 0!==n?n:0)},e.prototype.JR=function(t){var n=t.getMetadata().subtitles;if(Array.isArray(n)&&0!==n.length){var i=O(t),r=this.IR(t),o=i||function(t){return"stpp"===f.CodecStringHelper.extractCodec(t.getCodec())}(t)||function(t){return"application/mp4"===t.getMimeType()&&"wvtt"===t.getCodec()&&!C(t)}(t),s=o?this.KR(n,r):n,a=i?this.applyVttOffset(s):s,u=e.ensureCueInSegmentRange(a,t.getPlaybackTime(),t.getDuration(),r,this.isTsContainer());this.fireOnCueParsedEvents(u,this.periodId),this.timeline.addCues(u)}},e.prototype.KR=function(t,e){var n=this;return t.flatMap((function(t){return n.LR(t.text,e)}))},e.ensureCueInSegmentRange=function(t,e,n,i,o){if(void 0===o&&(o=!1),!e&&0!==e||e<0||!n)return t;if(t.length>0){var s=n+i;if(t.every((function(t){return t.end<=s})))return t.map((function(t){return o&&null!=t.offset?r(r({},t),{start:t.start+e-i-t.offset,end:t.end+e-i-t.offset}):r(r({},t),{start:t.start+e-i,end:t.end+e-i})}))}return t},e.prototype.LR=function(t,e){var n=M.SubtitleParserFactory.createInstance(this.context,t);return e?n.parse(t,e):n.parse(t)},e.prototype.activate=function(){var e=this;return t.prototype.activate.call(this),this.MR().then((function(){if(e.isActive()){var t=function(t,e){var n=(0,l.getPlayerState)(e.getState());return(0,l.getIsSeekingOrTimeshifting)(n)?n.targetPlaybackTime:t.getCurrentTime(!0)}(e.context.renderer,e.context.store);e.YQ.activateSubtitleSegmentController(t),e.YQ.getNext(t),e.eventHandler.on(a.PlayerEvent.TimeChanged,e.NR)}}))},e.prototype.MR=function(){var t=this.YQ.getCurrentAdaptationSet().Representation[0],e=t._internalId,n=t._mimeType,i=y.ModuleManager.get(b.ModuleName.EngineBitmovin).actions,r=i.setRepresentationIdAction,o=i.setMediaTypeAction;return this.cQ.dispatch(r(e)),this.cQ.dispatch(o(e,v.MimeTypeHelper.getMediaType(n))),this.dQ.waitForRepUpdate(e)},e.prototype.deactivate=function(){var e;this.timeline.removeCues();var n=y.ModuleManager.get(b.ModuleName.EngineBitmovin).actions,i=n.resetStreamTimeline,r=n.resetLoadedRanges;this.eventHandler.off(a.PlayerEvent.TimeChanged,this.NR),this.cQ.dispatch(i(this.XQ)),this.cQ.dispatch(r(this.XQ));var o=null===(e=this.YQ.getCurrentAdaptationSet())||void 0===e?void 0:e._internalId;return o&&this.cQ.dispatch(y.ModuleManager.get(b.ModuleName.EngineBitmovin).actions.removeActiveTrackAction(o)),t.prototype.deactivate.call(this)},e.prototype.getSubtitleType=function(){return T.SubtitleType.FRAGMENTED},e.prototype.clearBuffersUntil=function(e){t.prototype.clearBuffersUntil.call(this,e);var n=y.ModuleManager.get(b.ModuleName.EngineBitmovin).actions.removeLoadedRange;this.cQ.dispatch(n(this.XQ,{start:0,end:e,bufferBlockId:-1}))},e.prototype.OR=function(t){var e,n=null===(e=this.cQ)||void 0===e?void 0:e.getState(),i=(0,c.getBufferState)(n),r=i?(0,c.getLoadedRangesForMimeType)(i,this.XQ):[];return(0,o.isInTimeRanges)(r,t)},e.prototype.onSeek=function(t,e){this.isActive()&&(this.OR(e)||this.YQ.cancelLoading())},e.prototype.onSeeked=function(t,e){if(this.isActive()&&!this.OR(e)){this.timeline.removeCues();var n=y.ModuleManager.get(b.ModuleName.EngineBitmovin).actions.resetLoadedRanges;this.cQ.dispatch(n(this.XQ)),this.YQ.seekTo(e),this.YQ.getNext(e)}},e.prototype.dispose=function(){t.prototype.dispose.call(this),this.sR(),this.YQ.dispose()},e}(E.AbstractSubtitleHandler);function C(t){return h.TextSegmentAnalyzer.isPlainTextPayload(t.getData())}function O(t){var e=t.getCodec();return("wvtt"===e||"vtt"===e||""===e&&t.getMimeType().includes("vtt"))&&C(t)}function A(t,e){var n=y.ModuleManager.get(b.ModuleName.EngineBitmovin,!1);if(void 0!==e&&void 0!==n)return n.selectors.getContainerFormat(e,t)}function _(t){return"discontinuitySequenceNumber"in t}e.FragmentedSubtitleHandler=P}},function(t){return function(){return t(t.s=52112)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.crypto=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player.crypto=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[584],{1356:function(t,e,r){t.exports=function(){return r(90040)('!function(){var t={41:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.installWorkerPolyfills=function(){Array.prototype.includes||n.ArrayIncludesPolyfill.polyfill(),String.prototype.includes||o.StringIncludesPolyfill.polyfill(),String.prototype.startsWith||s.StringStartsWithPolyfill.polyfill(),String.prototype.endsWith||i.StringEndsWithPolyfill.polyfill()};var n=r(499),i=r(878),o=r(205),s=r(829)},81:function(t){!function(){t.exports=function(t){function e(){var t=Error.apply(this,arguments);this.message=t.message,this.stack=t.stack}function r(){var t=Error.apply(this,arguments);this.message=t.message,this.stack=t.stack}function n(){var t=Error.apply(this,arguments);this.message=t.message,this.stack=t.stack}function i(t,e){e=!!e;for(var r=t.length,n=new Uint8Array(e?4*r:r),i=0,o=0;i<r;i++){var s=t.charCodeAt(i);if(e&&55296<=s&&s<=56319){if(++i>=r)throw new Error("Malformed string, low surrogate expected at position "+i);s=(55296^s)<<10|65536|56320^t.charCodeAt(i)}else if(!e&&s>>>8)throw new Error("Wide characters are not allowed.");!e||s<=127?n[o++]=s:s<=2047?(n[o++]=192|s>>6,n[o++]=128|63&s):s<=65535?(n[o++]=224|s>>12,n[o++]=128|s>>6&63,n[o++]=128|63&s):(n[o++]=240|s>>18,n[o++]=128|s>>12&63,n[o++]=128|s>>6&63,n[o++]=128|63&s)}return n.subarray(0,o)}function o(t,e){e=!!e;for(var r=t.length,n=new Array(r),i=0,o=0;i<r;i++){var s=t[i];if(!e||s<128)n[o++]=s;else if(s>=192&&s<224&&i+1<r)n[o++]=(31&s)<<6|63&t[++i];else if(s>=224&&s<240&&i+2<r)n[o++]=(15&s)<<12|(63&t[++i])<<6|63&t[++i];else{if(!(s>=240&&s<248&&i+3<r))throw new Error("Malformed UTF8 character at byte offset "+i);var a=(7&s)<<18|(63&t[++i])<<12|(63&t[++i])<<6|63&t[++i];a<=65535?n[o++]=a:(a^=65536,n[o++]=55296|a>>10,n[o++]=56320|1023&a)}}var c="",u=16384;for(i=0;i<o;i+=u)c+=String.fromCharCode.apply(String,n.slice(i,i+u<=o?i+u:o));return c}function s(t){for(var e="",r=0;r<t.length;r++){var n=(255&t[r]).toString(16);n.length<2&&(e+="0"),e+=n}return e}function a(t){return btoa(o(t))}function c(t){return"string"==typeof t}function u(t){return t instanceof ArrayBuffer}function f(t){return t instanceof Uint8Array}function l(t,e){var r=e.heap,n=r?r.byteLength:e.heapSize||65536;if(4095&n||n<=0)throw new Error("heap size must be a positive integer and a multiple of 4096");return r||new t(new ArrayBuffer(n))}function h(t,e,r,n,i){var o=t.length-e,s=o<i?o:i;return t.set(r.subarray(n,n+s),e),s}e.prototype=Object.create(Error.prototype,{name:{value:"IllegalStateError"}}),r.prototype=Object.create(Error.prototype,{name:{value:"IllegalArgumentError"}}),n.prototype=Object.create(Error.prototype,{name:{value:"SecurityError"}}),t.string_to_bytes=i,t.hex_to_bytes=function(t){var e=t.length;1&e&&(t="0"+t,e++);for(var r=new Uint8Array(e>>1),n=0;n<e;n+=2)r[n>>1]=parseInt(t.substr(n,2),16);return r},t.base64_to_bytes=function(t){return i(atob(t))},t.bytes_to_string=o,t.bytes_to_hex=s,t.bytes_to_base64=a;var p=function(){"use strict";var t,e,r,n,i,o,s=!1;function a(r,n){var i=t[(e[r]+e[n])%255];return 0!==r&&0!==n||(i=0),i}var c=function(c,u){!function(){function c(r){var n,i,o;for(i=o=function(r){var n=t[255-e[r]];return 0===r&&(n=0),n}(r),n=0;n<4;n++)o^=i=255&(i<<1|i>>>7);return 99^o}s||function(){t=[],e=[];var r,n,i=1;for(r=0;r<255;r++)t[r]=i,n=128&i,i<<=1,i&=255,128===n&&(i^=27),i^=t[r],e[t[r]]=r;t[255]=t[0],e[0]=0,s=!0}(),r=[],n=[],i=[[],[],[],[]],o=[[],[],[],[]];for(var u=0;u<256;u++){var f=c(u);r[u]=f,n[f]=u,i[0][u]=a(2,f)<<24|f<<16|f<<8|a(3,f),o[0][f]=a(14,u)<<24|a(9,u)<<16|a(13,u)<<8|a(11,u);for(var l=1;l<4;l++)i[l][u]=i[l-1][u]>>>8|i[l-1][u]<<24,o[l][f]=o[l-1][f]>>>8|o[l-1][f]<<24}}();var f=new Uint32Array(u);f.set(r,512),f.set(n,768);for(var l=0;l<4;l++)f.set(i[l],4096+1024*l>>2),f.set(o[l],8192+1024*l>>2);var h=function(t,e){"use asm";var r=0,n=0,i=0,o=0,s=0,a=0,c=0,u=0,f=0,l=0,h=0,p=0,y=0,d=0,x=0,v=0,w=0,b=0,g=0,_=0,E=0;var m=new Uint32Array(e),A=new Uint8Array(e);function S(t,e,s,a,c,u,f,l){t=t|0;e=e|0;s=s|0;a=a|0;c=c|0;u=u|0;f=f|0;l=l|0;var h=0,p=0,y=0,d=0,x=0,v=0,w=0,b=0;h=s|0x400,p=s|0x800,y=s|0xc00;c=c^m[(t|0)>>2],u=u^m[(t|4)>>2],f=f^m[(t|8)>>2],l=l^m[(t|12)>>2];for(b=16;(b|0)<=a<<4;b=b+16|0){d=m[(s|c>>22&1020)>>2]^m[(h|u>>14&1020)>>2]^m[(p|f>>6&1020)>>2]^m[(y|l<<2&1020)>>2]^m[(t|b|0)>>2],x=m[(s|u>>22&1020)>>2]^m[(h|f>>14&1020)>>2]^m[(p|l>>6&1020)>>2]^m[(y|c<<2&1020)>>2]^m[(t|b|4)>>2],v=m[(s|f>>22&1020)>>2]^m[(h|l>>14&1020)>>2]^m[(p|c>>6&1020)>>2]^m[(y|u<<2&1020)>>2]^m[(t|b|8)>>2],w=m[(s|l>>22&1020)>>2]^m[(h|c>>14&1020)>>2]^m[(p|u>>6&1020)>>2]^m[(y|f<<2&1020)>>2]^m[(t|b|12)>>2];c=d,u=x,f=v,l=w}r=m[(e|c>>22&1020)>>2]<<24^m[(e|u>>14&1020)>>2]<<16^m[(e|f>>6&1020)>>2]<<8^m[(e|l<<2&1020)>>2]^m[(t|b|0)>>2],n=m[(e|u>>22&1020)>>2]<<24^m[(e|f>>14&1020)>>2]<<16^m[(e|l>>6&1020)>>2]<<8^m[(e|c<<2&1020)>>2]^m[(t|b|4)>>2],i=m[(e|f>>22&1020)>>2]<<24^m[(e|l>>14&1020)>>2]<<16^m[(e|c>>6&1020)>>2]<<8^m[(e|u<<2&1020)>>2]^m[(t|b|8)>>2],o=m[(e|l>>22&1020)>>2]<<24^m[(e|c>>14&1020)>>2]<<16^m[(e|u>>6&1020)>>2]<<8^m[(e|f<<2&1020)>>2]^m[(t|b|12)>>2]}function C(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;S(0x0000,0x0800,0x1000,E,t,e,r,n)}function k(t,e,r,i){t=t|0;e=e|0;r=r|0;i=i|0;var s=0;S(0x0400,0x0c00,0x2000,E,t,i,r,e);s=n,n=o,o=s}function U(t,e,f,l){t=t|0;e=e|0;f=f|0;l=l|0;S(0x0000,0x0800,0x1000,E,s^t,a^e,c^f,u^l);s=r,a=n,c=i,u=o}function P(t,e,f,l){t=t|0;e=e|0;f=f|0;l=l|0;var h=0;S(0x0400,0x0c00,0x2000,E,t,l,f,e);h=n,n=o,o=h;r=r^s,n=n^a,i=i^c,o=o^u;s=t,a=e,c=f,u=l}function O(t,e,f,l){t=t|0;e=e|0;f=f|0;l=l|0;S(0x0000,0x0800,0x1000,E,s,a,c,u);s=r=r^t,a=n=n^e,c=i=i^f,u=o=o^l}function M(t,e,f,l){t=t|0;e=e|0;f=f|0;l=l|0;S(0x0000,0x0800,0x1000,E,s,a,c,u);r=r^t,n=n^e,i=i^f,o=o^l;s=t,a=e,c=f,u=l}function T(t,e,f,l){t=t|0;e=e|0;f=f|0;l=l|0;S(0x0000,0x0800,0x1000,E,s,a,c,u);s=r,a=n,c=i,u=o;r=r^t,n=n^e,i=i^f,o=o^l}function B(t,e,s,a){t=t|0;e=e|0;s=s|0;a=a|0;S(0x0000,0x0800,0x1000,E,f,l,h,p);p=~v&p|v&p+1,h=~x&h|x&h+((p|0)==0),l=~d&l|d&l+((h|0)==0),f=~y&f|y&f+((l|0)==0);r=r^t,n=n^e,i=i^s,o=o^a}function W(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;var i=0,o=0,f=0,l=0,h=0,p=0,y=0,d=0,x=0,v=0;t=t^s,e=e^a,r=r^c,n=n^u;i=w|0,o=b|0,f=g|0,l=_|0;for(;(x|0)<128;x=x+1|0){if(i>>>31){h=h^t,p=p^e,y=y^r,d=d^n}i=i<<1|o>>>31,o=o<<1|f>>>31,f=f<<1|l>>>31,l=l<<1;v=n&1;n=n>>>1|r<<31,r=r>>>1|e<<31,e=e>>>1|t<<31,t=t>>>1;if(v)t=t^0xe1000000}s=h,a=p,c=y,u=d}function I(t){t=t|0;E=t}function H(t,e,s,a){t=t|0;e=e|0;s=s|0;a=a|0;r=t,n=e,i=s,o=a}function j(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;s=t,a=e,c=r,u=n}function D(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;f=t,l=e,h=r,p=n}function z(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;y=t,d=e,x=r,v=n}function Z(t,e,r,n){t=t|0;e=e|0;r=r|0;n=n|0;p=~v&p|v&n,h=~x&h|x&r,l=~d&l|d&e,f=~y&f|y&t}function q(t){t=t|0;if(t&15)return-1;A[t|0]=r>>>24,A[t|1]=r>>>16&255,A[t|2]=r>>>8&255,A[t|3]=r&255,A[t|4]=n>>>24,A[t|5]=n>>>16&255,A[t|6]=n>>>8&255,A[t|7]=n&255,A[t|8]=i>>>24,A[t|9]=i>>>16&255,A[t|10]=i>>>8&255,A[t|11]=i&255,A[t|12]=o>>>24,A[t|13]=o>>>16&255,A[t|14]=o>>>8&255,A[t|15]=o&255;return 16}function L(t){t=t|0;if(t&15)return-1;A[t|0]=s>>>24,A[t|1]=s>>>16&255,A[t|2]=s>>>8&255,A[t|3]=s&255,A[t|4]=a>>>24,A[t|5]=a>>>16&255,A[t|6]=a>>>8&255,A[t|7]=a&255,A[t|8]=c>>>24,A[t|9]=c>>>16&255,A[t|10]=c>>>8&255,A[t|11]=c&255,A[t|12]=u>>>24,A[t|13]=u>>>16&255,A[t|14]=u>>>8&255,A[t|15]=u&255;return 16}function R(){C(0,0,0,0);w=r,b=n,g=i,_=o}function F(t,e,s){t=t|0;e=e|0;s=s|0;var a=0;if(e&15)return-1;while((s|0)>=16){N[t&7](A[e|0]<<24|A[e|1]<<16|A[e|2]<<8|A[e|3],A[e|4]<<24|A[e|5]<<16|A[e|6]<<8|A[e|7],A[e|8]<<24|A[e|9]<<16|A[e|10]<<8|A[e|11],A[e|12]<<24|A[e|13]<<16|A[e|14]<<8|A[e|15]);A[e|0]=r>>>24,A[e|1]=r>>>16&255,A[e|2]=r>>>8&255,A[e|3]=r&255,A[e|4]=n>>>24,A[e|5]=n>>>16&255,A[e|6]=n>>>8&255,A[e|7]=n&255,A[e|8]=i>>>24,A[e|9]=i>>>16&255,A[e|10]=i>>>8&255,A[e|11]=i&255,A[e|12]=o>>>24,A[e|13]=o>>>16&255,A[e|14]=o>>>8&255,A[e|15]=o&255;a=a+16|0,e=e+16|0,s=s-16|0}return a|0}function K(t,e,r){t=t|0;e=e|0;r=r|0;var n=0;if(e&15)return-1;while((r|0)>=16){V[t&1](A[e|0]<<24|A[e|1]<<16|A[e|2]<<8|A[e|3],A[e|4]<<24|A[e|5]<<16|A[e|6]<<8|A[e|7],A[e|8]<<24|A[e|9]<<16|A[e|10]<<8|A[e|11],A[e|12]<<24|A[e|13]<<16|A[e|14]<<8|A[e|15]);n=n+16|0,e=e+16|0,r=r-16|0}return n|0}var N=[C,k,U,P,O,M,T,B];var V=[U,W];return{set_rounds:I,set_state:H,set_iv:j,set_nonce:D,set_mask:z,set_counter:Z,get_state:q,get_iv:L,gcm_init:R,cipher:F,mac:K}}(0,u);return h.set_key=function(t,e,n,i,s,a,c,u,l){var p=f.subarray(0,60),y=f.subarray(256,316);p.set([e,n,i,s,a,c,u,l]);for(var d=t,x=1;d<4*t+28;d++){var v=p[d-1];(d%t==0||8===t&&d%t==4)&&(v=r[v>>>24]<<24^r[v>>>16&255]<<16^r[v>>>8&255]<<8^r[255&v]),d%t==0&&(v=v<<8^v>>>24^x<<24,x=x<<1^(128&x?27:0)),p[d]=p[d-t]^v}for(var w=0;w<d;w+=4)for(var b=0;b<4;b++)v=p[d-(4+w)+(4-b)%4],y[w+b]=w<4||w>=d-4?v:o[0][r[v>>>24]]^o[1][r[v>>>16&255]]^o[2][r[v>>>8&255]]^o[3][r[255&v]];h.set_rounds(t+5)},h};return c.ENC={ECB:0,CBC:2,CFB:4,OFB:6,CTR:7},c.DEC={ECB:1,CBC:3,CFB:5,OFB:6,CTR:7},c.MAC={CBC:0,GCM:1},c.HEAP_DATA=16384,c}();function y(t){t=t||{},this.heap=l(Uint8Array,t).subarray(p.HEAP_DATA),this.asm=t.asm||p(null,this.heap.buffer),this.mode=null,this.key=null,this.reset(t)}function d(t){if(void 0!==t){if(u(t)||f(t))t=new Uint8Array(t);else{if(!c(t))throw new TypeError("unexpected key type");t=i(t)}var e=t.length;if(16!==e&&24!==e&&32!==e)throw new r("illegal key size");var n=new DataView(t.buffer,t.byteOffset,t.byteLength);this.asm.set_key(e>>2,n.getUint32(0),n.getUint32(4),n.getUint32(8),n.getUint32(12),e>16?n.getUint32(16):0,e>16?n.getUint32(20):0,e>24?n.getUint32(24):0,e>24?n.getUint32(28):0),this.key=t}else if(!this.key)throw new Error("key is required")}function x(t){if(void 0!==t){if(u(t)||f(t))t=new Uint8Array(t);else{if(!c(t))throw new TypeError("unexpected iv type");t=i(t)}if(16!==t.length)throw new r("illegal iv size");var e=new DataView(t.buffer,t.byteOffset,t.byteLength);this.iv=t,this.asm.set_iv(e.getUint32(0),e.getUint32(4),e.getUint32(8),e.getUint32(12))}else this.iv=null,this.asm.set_iv(0,0,0,0)}function v(t){this.padding=void 0===t||!!t}function w(t){return t=t||{},this.result=null,this.pos=0,this.len=0,d.call(this,t.key),this.hasOwnProperty("iv")&&x.call(this,t.iv),this.hasOwnProperty("padding")&&v.call(this,t.padding),this}function b(t){if(c(t)&&(t=i(t)),u(t)&&(t=new Uint8Array(t)),!f(t))throw new TypeError("data isn\'t of expected type");for(var e=this.asm,r=this.heap,n=p.ENC[this.mode],o=p.HEAP_DATA,s=this.pos,a=this.len,l=0,y=t.length||0,d=0,x=0,v=new Uint8Array(a+y&-16);y>0;)a+=x=h(r,s+a,t,l,y),l+=x,y-=x,(x=e.cipher(n,o+s,a))&&v.set(r.subarray(s,s+x),d),d+=x,x<a?(s+=x,a-=x):(s=0,a=0);return this.result=v,this.pos=s,this.len=a,this}function g(t){var e=null,n=0;void 0!==t&&(n=(e=b.call(this,t).result).length);var i=this.asm,o=this.heap,s=p.ENC[this.mode],a=p.HEAP_DATA,c=this.pos,u=this.len,f=16-u%16,l=u;if(this.hasOwnProperty("padding")){if(this.padding){for(var h=0;h<f;++h)o[c+u+h]=f;l=u+=f}else if(u%16)throw new r("data length must be a multiple of the block size")}else u+=f;var y=new Uint8Array(n+l);return n&&y.set(e),u&&i.cipher(s,a+c,u),l&&y.set(o.subarray(c,c+l),n),this.result=y,this.pos=0,this.len=0,this}function _(t){if(c(t)&&(t=i(t)),u(t)&&(t=new Uint8Array(t)),!f(t))throw new TypeError("data isn\'t of expected type");var e=this.asm,r=this.heap,n=p.DEC[this.mode],o=p.HEAP_DATA,s=this.pos,a=this.len,l=0,y=t.length||0,d=0,x=a+y&-16,v=0,w=0;this.hasOwnProperty("padding")&&this.padding&&(x-=v=a+y-x||16);for(var b=new Uint8Array(x);y>0;)a+=w=h(r,s+a,t,l,y),l+=w,y-=w,(w=e.cipher(n,o+s,a-(y?0:v)))&&b.set(r.subarray(s,s+w),d),d+=w,w<a?(s+=w,a-=w):(s=0,a=0);return this.result=b,this.pos=s,this.len=a,this}function E(t){var e=null,i=0;void 0!==t&&(i=(e=_.call(this,t).result).length);var o=this.asm,s=this.heap,a=p.DEC[this.mode],c=p.HEAP_DATA,u=this.pos,f=this.len,l=f;if(f>0){if(f%16){if(this.hasOwnProperty("padding"))throw new r("data length must be a multiple of the block size");f+=16-f%16}if(o.cipher(a,c+u,f),this.hasOwnProperty("padding")&&this.padding){var h=s[u+l-1];if(h<1||h>16||h>l)throw new n("bad padding");for(var y=0,d=h;d>1;d--)y|=h^s[u+l-d];if(y)throw new n("bad padding");l-=h}}var x=new Uint8Array(i+l);return i>0&&x.set(e),l>0&&x.set(s.subarray(u,u+l),i),this.result=x,this.pos=0,this.len=0,this}function m(t){this.padding=!0,this.iv=null,y.call(this,t),this.mode="CBC"}var A=m.prototype;function S(t){m.call(this,t)}A.BLOCK_SIZE=16,A.reset=w,A.encrypt=g,A.decrypt=E;var C=S.prototype;function k(t){m.call(this,t)}C.BLOCK_SIZE=16,C.reset=w,C.process=b,C.finish=g;var U=k.prototype;function P(t){this.nonce=null,this.counter=0,this.counterSize=0,y.call(this,t),this.mode="CTR"}function O(t){P.call(this,t)}function M(t,e,n){if(void 0!==n){if(n<8||n>48)throw new r("illegal counter size");this.counterSize=n;var o=Math.pow(2,n)-1;this.asm.set_mask(0,0,o/4294967296|0,0|o)}else this.counterSize=n=48,this.asm.set_mask(0,0,65535,4294967295);if(void 0===t)throw new Error("nonce is required");if(u(t)||f(t))t=new Uint8Array(t);else{if(!c(t))throw new TypeError("unexpected nonce type");t=i(t)}var s=t.length;if(!s||s>16)throw new r("illegal nonce size");this.nonce=t;var a=new DataView(new ArrayBuffer(16));if(new Uint8Array(a.buffer).set(t),this.asm.set_nonce(a.getUint32(0),a.getUint32(4),a.getUint32(8),a.getUint32(12)),void 0!==e){if(!function(t){return"number"==typeof t}(e))throw new TypeError("unexpected counter type");if(e<0||e>=Math.pow(2,n))throw new r("illegal counter value");this.counter=e,this.asm.set_counter(0,0,e/4294967296|0,0|e)}else this.counter=e=0}function T(t){return t=t||{},w.call(this,t),M.call(this,t.nonce,t.counter,t.counterSize),this}U.BLOCK_SIZE=16,U.reset=w,U.process=_,U.finish=E;var B=P.prototype;B.BLOCK_SIZE=16,B.reset=T,B.encrypt=g,B.decrypt=g;var W,I,H=O.prototype;function j(t,e,r){if(void 0===t)throw new SyntaxError("data required");if(void 0===e)throw new SyntaxError("key required");if(void 0===r)throw new SyntaxError("nonce required");return new P({heap:W,asm:I,key:e,nonce:r}).encrypt(t).result}function D(t){t=t||{},this.heap=l(Uint8Array,t),this.asm=t.asm||function(t,e){"use asm";var r=0,n=0,i=0,o=0,s=0,a=0,c=0,u=0,f=0,l=0,h=0,p=0,y=0,d=0,x=0,v=0,w=0,b=0,g=0,_=0,E=0,m=0,A=0,S=0,C=0,k=0,U=new Uint8Array(e);function P(t,e,f,l,h,p,y,d,x,v,w,b,g,_,E,m){t=t|0;e=e|0;f=f|0;l=l|0;h=h|0;p=p|0;y=y|0;d=d|0;x=x|0;v=v|0;w=w|0;b=b|0;g=g|0;_=_|0;E=E|0;m=m|0;var A=0,S=0,C=0,k=0,U=0,P=0,O=0,M=0,T=0;A=r;S=n;C=i;k=o;U=s;P=a;O=c;M=u;T=t+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x428a2f98|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=e+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x71374491|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=f+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xb5c0fbcf|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=l+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xe9b5dba5|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=h+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x3956c25b|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=p+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x59f111f1|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=y+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x923f82a4|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=d+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xab1c5ed5|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=x+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xd807aa98|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=v+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x12835b01|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=w+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x243185be|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=b+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x550c7dc3|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=g+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x72be5d74|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=_+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x80deb1fe|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=E+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x9bdc06a7|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;T=m+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xc19bf174|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=T=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+t+v|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xe49b69c1|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;e=T=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+e+w|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xefbe4786|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;f=T=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+f+b|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x0fc19dc6|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;l=T=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+l+g|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x240ca1cc|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;h=T=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+h+_|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x2de92c6f|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;p=T=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+p+E|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x4a7484aa|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;y=T=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+y+m|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x5cb0a9dc|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;d=T=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+d+t|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x76f988da|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;x=T=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+x+e|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x983e5152|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;v=T=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+v+f|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xa831c66d|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;w=T=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+w+l|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xb00327c8|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;b=T=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+b+h|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xbf597fc7|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=T=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+g+p|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xc6e00bf3|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;_=T=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+_+y|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xd5a79147|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;E=T=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+E+d|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x06ca6351|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;m=T=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+m+x|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x14292967|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=T=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+t+v|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x27b70a85|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;e=T=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+e+w|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x2e1b2138|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;f=T=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+f+b|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x4d2c6dfc|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;l=T=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+l+g|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x53380d13|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;h=T=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+h+_|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x650a7354|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;p=T=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+p+E|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x766a0abb|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;y=T=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+y+m|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x81c2c92e|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;d=T=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+d+t|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x92722c85|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;x=T=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+x+e|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xa2bfe8a1|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;v=T=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+v+f|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xa81a664b|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;w=T=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+w+l|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xc24b8b70|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;b=T=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+b+h|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xc76c51a3|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=T=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+g+p|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xd192e819|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;_=T=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+_+y|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xd6990624|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;E=T=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+E+d|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xf40e3585|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;m=T=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+m+x|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x106aa070|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;t=T=(e>>>7^e>>>18^e>>>3^e<<25^e<<14)+(E>>>17^E>>>19^E>>>10^E<<15^E<<13)+t+v|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x19a4c116|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;e=T=(f>>>7^f>>>18^f>>>3^f<<25^f<<14)+(m>>>17^m>>>19^m>>>10^m<<15^m<<13)+e+w|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x1e376c08|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;f=T=(l>>>7^l>>>18^l>>>3^l<<25^l<<14)+(t>>>17^t>>>19^t>>>10^t<<15^t<<13)+f+b|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x2748774c|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;l=T=(h>>>7^h>>>18^h>>>3^h<<25^h<<14)+(e>>>17^e>>>19^e>>>10^e<<15^e<<13)+l+g|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x34b0bcb5|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;h=T=(p>>>7^p>>>18^p>>>3^p<<25^p<<14)+(f>>>17^f>>>19^f>>>10^f<<15^f<<13)+h+_|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x391c0cb3|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;p=T=(y>>>7^y>>>18^y>>>3^y<<25^y<<14)+(l>>>17^l>>>19^l>>>10^l<<15^l<<13)+p+E|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x4ed8aa4a|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;y=T=(d>>>7^d>>>18^d>>>3^d<<25^d<<14)+(h>>>17^h>>>19^h>>>10^h<<15^h<<13)+y+m|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x5b9cca4f|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;d=T=(x>>>7^x>>>18^x>>>3^x<<25^x<<14)+(p>>>17^p>>>19^p>>>10^p<<15^p<<13)+d+t|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x682e6ff3|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;x=T=(v>>>7^v>>>18^v>>>3^v<<25^v<<14)+(y>>>17^y>>>19^y>>>10^y<<15^y<<13)+x+e|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x748f82ee|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;v=T=(w>>>7^w>>>18^w>>>3^w<<25^w<<14)+(d>>>17^d>>>19^d>>>10^d<<15^d<<13)+v+f|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x78a5636f|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;w=T=(b>>>7^b>>>18^b>>>3^b<<25^b<<14)+(x>>>17^x>>>19^x>>>10^x<<15^x<<13)+w+l|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x84c87814|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;b=T=(g>>>7^g>>>18^g>>>3^g<<25^g<<14)+(v>>>17^v>>>19^v>>>10^v<<15^v<<13)+b+h|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x8cc70208|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;g=T=(_>>>7^_>>>18^_>>>3^_<<25^_<<14)+(w>>>17^w>>>19^w>>>10^w<<15^w<<13)+g+p|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0x90befffa|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;_=T=(E>>>7^E>>>18^E>>>3^E<<25^E<<14)+(b>>>17^b>>>19^b>>>10^b<<15^b<<13)+_+y|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xa4506ceb|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;E=T=(m>>>7^m>>>18^m>>>3^m<<25^m<<14)+(g>>>17^g>>>19^g>>>10^g<<15^g<<13)+E+d|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xbef9a3f7|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;m=T=(t>>>7^t>>>18^t>>>3^t<<25^t<<14)+(_>>>17^_>>>19^_>>>10^_<<15^_<<13)+m+x|0;T=T+M+(U>>>6^U>>>11^U>>>25^U<<26^U<<21^U<<7)+(O^U&(P^O))+0xc67178f2|0;M=O;O=P;P=U;U=k+T|0;k=C;C=S;S=A;A=T+(S&C^k&(S^C))+(S>>>2^S>>>13^S>>>22^S<<30^S<<19^S<<10)|0;r=r+A|0;n=n+S|0;i=i+C|0;o=o+k|0;s=s+U|0;a=a+P|0;c=c+O|0;u=u+M|0}function O(t){t=t|0;P(U[t|0]<<24|U[t|1]<<16|U[t|2]<<8|U[t|3],U[t|4]<<24|U[t|5]<<16|U[t|6]<<8|U[t|7],U[t|8]<<24|U[t|9]<<16|U[t|10]<<8|U[t|11],U[t|12]<<24|U[t|13]<<16|U[t|14]<<8|U[t|15],U[t|16]<<24|U[t|17]<<16|U[t|18]<<8|U[t|19],U[t|20]<<24|U[t|21]<<16|U[t|22]<<8|U[t|23],U[t|24]<<24|U[t|25]<<16|U[t|26]<<8|U[t|27],U[t|28]<<24|U[t|29]<<16|U[t|30]<<8|U[t|31],U[t|32]<<24|U[t|33]<<16|U[t|34]<<8|U[t|35],U[t|36]<<24|U[t|37]<<16|U[t|38]<<8|U[t|39],U[t|40]<<24|U[t|41]<<16|U[t|42]<<8|U[t|43],U[t|44]<<24|U[t|45]<<16|U[t|46]<<8|U[t|47],U[t|48]<<24|U[t|49]<<16|U[t|50]<<8|U[t|51],U[t|52]<<24|U[t|53]<<16|U[t|54]<<8|U[t|55],U[t|56]<<24|U[t|57]<<16|U[t|58]<<8|U[t|59],U[t|60]<<24|U[t|61]<<16|U[t|62]<<8|U[t|63])}function M(t){t=t|0;U[t|0]=r>>>24;U[t|1]=r>>>16&255;U[t|2]=r>>>8&255;U[t|3]=r&255;U[t|4]=n>>>24;U[t|5]=n>>>16&255;U[t|6]=n>>>8&255;U[t|7]=n&255;U[t|8]=i>>>24;U[t|9]=i>>>16&255;U[t|10]=i>>>8&255;U[t|11]=i&255;U[t|12]=o>>>24;U[t|13]=o>>>16&255;U[t|14]=o>>>8&255;U[t|15]=o&255;U[t|16]=s>>>24;U[t|17]=s>>>16&255;U[t|18]=s>>>8&255;U[t|19]=s&255;U[t|20]=a>>>24;U[t|21]=a>>>16&255;U[t|22]=a>>>8&255;U[t|23]=a&255;U[t|24]=c>>>24;U[t|25]=c>>>16&255;U[t|26]=c>>>8&255;U[t|27]=c&255;U[t|28]=u>>>24;U[t|29]=u>>>16&255;U[t|30]=u>>>8&255;U[t|31]=u&255}function T(){r=0x6a09e667;n=0xbb67ae85;i=0x3c6ef372;o=0xa54ff53a;s=0x510e527f;a=0x9b05688c;c=0x1f83d9ab;u=0x5be0cd19;f=l=0}function B(t,e,h,p,y,d,x,v,w,b){t=t|0;e=e|0;h=h|0;p=p|0;y=y|0;d=d|0;x=x|0;v=v|0;w=w|0;b=b|0;r=t;n=e;i=h;o=p;s=y;a=d;c=x;u=v;f=w;l=b}function W(t,e){t=t|0;e=e|0;var r=0;if(t&63)return-1;while((e|0)>=64){O(t);t=t+64|0;e=e-64|0;r=r+64|0}f=f+r|0;if(f>>>0<r>>>0)l=l+1|0;return r|0}function I(t,e,r){t=t|0;e=e|0;r=r|0;var n=0,i=0;if(t&63)return-1;if(~r)if(r&31)return-1;if((e|0)>=64){n=W(t,e)|0;if((n|0)==-1)return-1;t=t+n|0;e=e-n|0}n=n+e|0;f=f+e|0;if(f>>>0<e>>>0)l=l+1|0;U[t|e]=0x80;if((e|0)>=56){for(i=e+1|0;(i|0)<64;i=i+1|0)U[t|i]=0x00;O(t);e=0;U[t|0]=0}for(i=e+1|0;(i|0)<59;i=i+1|0)U[t|i]=0;U[t|56]=l>>>21&255;U[t|57]=l>>>13&255;U[t|58]=l>>>5&255;U[t|59]=l<<3&255|f>>>29;U[t|60]=f>>>21&255;U[t|61]=f>>>13&255;U[t|62]=f>>>5&255;U[t|63]=f<<3&255;O(t);if(~r)M(r);return n|0}function H(){r=h;n=p;i=y;o=d;s=x;a=v;c=w;u=b;f=64;l=0}function j(){r=g;n=_;i=E;o=m;s=A;a=S;c=C;u=k;f=64;l=0}function D(t,e,U,O,M,B,W,I,H,j,D,z,Z,q,L,R){t=t|0;e=e|0;U=U|0;O=O|0;M=M|0;B=B|0;W=W|0;I=I|0;H=H|0;j=j|0;D=D|0;z=z|0;Z=Z|0;q=q|0;L=L|0;R=R|0;T();P(t^0x5c5c5c5c,e^0x5c5c5c5c,U^0x5c5c5c5c,O^0x5c5c5c5c,M^0x5c5c5c5c,B^0x5c5c5c5c,W^0x5c5c5c5c,I^0x5c5c5c5c,H^0x5c5c5c5c,j^0x5c5c5c5c,D^0x5c5c5c5c,z^0x5c5c5c5c,Z^0x5c5c5c5c,q^0x5c5c5c5c,L^0x5c5c5c5c,R^0x5c5c5c5c);g=r;_=n;E=i;m=o;A=s;S=a;C=c;k=u;T();P(t^0x36363636,e^0x36363636,U^0x36363636,O^0x36363636,M^0x36363636,B^0x36363636,W^0x36363636,I^0x36363636,H^0x36363636,j^0x36363636,D^0x36363636,z^0x36363636,Z^0x36363636,q^0x36363636,L^0x36363636,R^0x36363636);h=r;p=n;y=i;d=o;x=s;v=a;w=c;b=u;f=64;l=0}function z(t,e,f){t=t|0;e=e|0;f=f|0;var l=0,h=0,p=0,y=0,d=0,x=0,v=0,w=0,b=0;if(t&63)return-1;if(~f)if(f&31)return-1;b=I(t,e,-1)|0;l=r,h=n,p=i,y=o,d=s,x=a,v=c,w=u;j();P(l,h,p,y,d,x,v,w,0x80000000,0,0,0,0,0,0,768);if(~f)M(f);return b|0}function Z(t,e,f,l,h){t=t|0;e=e|0;f=f|0;l=l|0;h=h|0;var p=0,y=0,d=0,x=0,v=0,w=0,b=0,g=0,_=0,E=0,m=0,A=0,S=0,C=0,k=0,O=0;if(t&63)return-1;if(~h)if(h&31)return-1;U[t+e|0]=f>>>24;U[t+e+1|0]=f>>>16&255;U[t+e+2|0]=f>>>8&255;U[t+e+3|0]=f&255;z(t,e+4|0,-1)|0;p=_=r,y=E=n,d=m=i,x=A=o,v=S=s,w=C=a,b=k=c,g=O=u;l=l-1|0;while((l|0)>0){H();P(_,E,m,A,S,C,k,O,0x80000000,0,0,0,0,0,0,768);_=r,E=n,m=i,A=o,S=s,C=a,k=c,O=u;j();P(_,E,m,A,S,C,k,O,0x80000000,0,0,0,0,0,0,768);_=r,E=n,m=i,A=o,S=s,C=a,k=c,O=u;p=p^r;y=y^n;d=d^i;x=x^o;v=v^s;w=w^a;b=b^c;g=g^u;l=l-1|0}r=p;n=y;i=d;o=x;s=v;a=w;c=b;u=g;if(~h)M(h);return 0}return{reset:T,init:B,process:W,finish:I,hmac_reset:H,hmac_init:D,hmac_finish:z,pbkdf2_generate_block:Z}}(0,this.heap.buffer),this.BLOCK_SIZE=64,this.HASH_SIZE=32,this.reset()}H.BLOCK_SIZE=16,H.reset=T,H.process=b,H.finish=g,"function"==typeof Uint8Array&&(W=new Uint8Array(1048576),I=p(null,W.buffer)),t.AES_CBC=m,t.AES_CBC.encrypt=function(t,e,r,n){if(void 0===t)throw new SyntaxError("data required");if(void 0===e)throw new SyntaxError("key required");return new m({heap:W,asm:I,key:e,padding:r,iv:n}).encrypt(t).result},t.AES_CBC.decrypt=function(t,e,r,n){if(void 0===t)throw new SyntaxError("data required");if(void 0===e)throw new SyntaxError("key required");return new m({heap:W,asm:I,key:e,padding:r,iv:n}).decrypt(t).result},t.AES_CBC.Encrypt=S,t.AES_CBC.Decrypt=k,t.AES_CTR=P,t.AES_CTR.encrypt=j,t.AES_CTR.decrypt=j,t.AES_CTR.Encrypt=t.AES_CTR.Decrypt=O,D.BLOCK_SIZE=64,D.HASH_SIZE=32;var z=D.prototype;z.reset=function(){return this.result=null,this.pos=0,this.len=0,this.asm.reset(),this},z.process=function(t){if(null!==this.result)throw new e("state must be reset before processing new data");if(c(t)&&(t=i(t)),u(t)&&(t=new Uint8Array(t)),!f(t))throw new TypeError("data isn\'t of expected type");for(var r=this.asm,n=this.heap,o=this.pos,s=this.len,a=0,l=t.length,p=0;l>0;)s+=p=h(n,o+s,t,a,l),a+=p,l-=p,o+=p=r.process(o,s),(s-=p)||(o=0);return this.pos=o,this.len=s,this},z.finish=function(){if(null!==this.result)throw new e("state must be reset before processing new data");return this.asm.finish(this.pos,this.len,0),this.result=new Uint8Array(this.HASH_SIZE),this.result.set(this.heap.subarray(0,this.HASH_SIZE)),this.pos=0,this.len=0,this};var Z=null;function q(t){if(void 0===t)throw new SyntaxError("data required");return function(){return null===Z&&(Z=new D({heapSize:1048576})),Z}().reset().process(t).finish().result}return D.bytes=q,D.hex=function(t){return s(q(t))},D.base64=function(t){return a(q(t))},t.SHA256=D,t}({})}()},205:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringIncludesPolyfill=void 0,e.StringIncludesPolyfill=function(){return{polyfill:function(){String.prototype.includes=function(t,e){return"number"!=typeof e&&(e=0),!(e+t.length>this.length)&&-1!==this.indexOf(t,e)}}}}()},499:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ArrayIncludesPolyfill=void 0,e.ArrayIncludesPolyfill=function(){return{polyfill:function(){Object.defineProperty(Array.prototype,"includes",{value:function(t,e){if(null==this)throw new TypeError(\'"this" is null or not defined\');var r=Object(this),n=r.length>>>0;if(0===n)return!1;var i=0|e,o=Math.max(i>=0?i:n-Math.abs(i),0);function s(t,e){return t===e||"number"==typeof t&&"number"==typeof e&&isNaN(t)&&isNaN(e)}for(;o<n;){if(s(r[o],t))return!0;o++}return!1}})}}}()},507:function(t,e,r){"use strict";var n=this&&this.__extends||function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r])},t(e,r)};return function(e,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=e}t(e,r),e.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.CryptoWorkerMessageHandler=void 0,e.getContext=function(){return a||c()};var i=r(81),o=r(599),s=r(741),a=null;function c(){var t=new s.WebWorkerContext(u);return onmessage=t.onMessageCallback,t}var u=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.decrypt=function(t){if(i[t.method]&&t.payload){var e,r=t.method,n=t.payload;e="AES_CTR"===r?i.AES_CTR.decrypt(n.data,n.key,n.iv):i.AES_CBC.decrypt(n.data,n.key,n.padding,n.iv),this.postMessageFunction({action:"decrypted",data:e.buffer},[e.buffer])}},e}(o.MessageHandler);e.CryptoWorkerMessageHandler=u,"undefined"==typeof window&&(a=c())},599:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MessageHandler=void 0;var r=function(){return function(t,e){this.runsInWebWorker=t,this.postMessageFunction=e}}();e.MessageHandler=r},741:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebWorkerContext=void 0;var n=r(41),i=function(){return function(t){var e=this;this.b="undefined"==typeof window,this.onmessage=null,this.c=function(t,r){e.b?postMessage(t,r):"function"==typeof e.onmessage&&setTimeout((function(){e.onmessage({data:t})}),0)},this.postMessage=function(t){setTimeout((function(){e.onMessageCallback({data:t})}),0)},this.terminate=function(){},this.onMessageCallback=function(t){t.data.action&&t.data&&e.a[t.data.action]&&e.a[t.data.action](t.data)},this.b&&(0,n.installWorkerPolyfills)(),this.a=new t(this.b,this.c)}}();e.WebWorkerContext=i},829:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringStartsWithPolyfill=void 0,e.StringStartsWithPolyfill=function(){return{polyfill:function(){String.prototype.startsWith=function(t,e){var r=e>0?0|e:0;return this.substring(r,r+t.length)===t}}}}()},878:function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.StringEndsWithPolyfill=void 0,e.StringEndsWithPolyfill=function(){return{polyfill:function(){String.prototype.endsWith=function(t,e){if(null==t)return!1;var r=this.length;return null!=e&&(r=Math.min(e,this.length)),this.substring(r-t.length,r)===t}}}}()}},e={};!function r(n){var i=e[n];if(void 0!==i)return i.exports;var o=e[n]={exports:{}};return t[n].call(o.exports,o,o.exports,r),o.exports}(507)}();',r.p+"a1d8070370c0c5b66d14.worker.js")}},24896:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CryptoModuleDefinition=void 0;var n=r(62756),i=r(97030),o=r(55522),s=r(86797),S=r(42752);e.CryptoModuleDefinition={name:n.ModuleName.Crypto,module:{CryptoApi:o.CryptoApi,WebWorkerCrypto:S.WebWorkerCrypto,ClearKeyLoader:i.ClearKeyLoader,createDecrypter:s.createDecrypter}},e.default=e.CryptoModuleDefinition},42752:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.WebWorkerCrypto=void 0;var n=function(){function t(){var t=this;this.cm=!1,this.dm=[],this.em=function(e){var r=e.data;"decrypted"===r.action&&t.fm(r.data)},this.fm=function(e){if(t.dm.shift().resolveFn(e),t.dm.length>0){var r=t.dm[0];t.bm.postMessage(r.message,[r.message.payload.data])}else t.cm=!1};var e=r(1356);this.bm=new e,this.bm.onmessage=this.em}return t.prototype.decrypt=function(t,e,r,n,i,o){var s=this;return new Promise((function(t){var S={action:"decrypt",method:e,payload:{data:r.slice(0,r.byteLength),key:n.slice(0,n.byteLength),padding:i,iv:o.slice(0,o.byteLength)}};s.dm.push({resolveFn:t,message:S}),s.cm||(s.cm=!0,s.bm.postMessage(S,[S.payload.data]))}))},t.dispose=function(){for(var e in t.instances)t.instances.hasOwnProperty(e)&&(t.instances[e].bm.terminate(),delete t.instances[e])},t.getInstance=function(e){return t.instances[e]||(t.instances[e]=new t),t.instances[e]},t.instances={},t}();e.WebWorkerCrypto=n},55522:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.CryptoApi=void 0;var n=r(7387),i=r(21513),o=r(70233),s=r(15487),S=r(42752),a=function(){function t(t,e,r,n,i){if(this.Qm=t,this.Rm=i,"AES-CBC"!==e&&"AES-CTR"!==e)throw new Error("AES mode '"+e+"' not supported!");this.Sm="string"==typeof r?o.FormatHelper.hexToBytes(r).buffer:r,this.Tm="string"==typeof n?o.FormatHelper.hexToBytes(n).buffer:n,this.Vm=e,this.Um=new U(new Uint8Array(this.Tm)),this.Wm=t.settings.FORCE_SOFTWARE_DECRYPTION||this.Xm()}return t.prototype.Xm=function(){return!t.isWebCryptoSubtleSupported()||"AES-CTR"===this.Vm&&(0,i.getCapabilities)()[n.CapabilityKey.isWebOS]&&(0,i.getCapabilities)()[n.CapabilityKey.webOSChromiumVersion]===s.WEBOS_2016_2017_CHROMIUM_VERSION},t.prototype.decrypt=function(t){var e=this;return this.Wm?(this.Qm.logger.insane("Performing SW decryption"),this.Ym(t)):this.Zm(t).catch((function(r){if(e.Qm.logger.debug("WebCrypto decryption error: "+r),"NotSupportedError"===r.name&&r.message.indexOf("Only secure origins are allowed")>-1)return e.Ym(t)}))},t.prototype.Ym=function(t){if(!t||!this.Sm||!this.Um)return Promise.reject("Error decrypting AES-128 encrypted content");var e=this.Vm.replace("-","_");if("AES_CBC"===e)return S.WebWorkerCrypto.getInstance(this.Rm).decrypt(this.Qm,e,t,this.Sm,!0,this.Tm);if("AES_CTR"===e){var r=this.Um.getValue().buffer;return this.Um.increment(t.byteLength/16),S.WebWorkerCrypto.getInstance(this.Rm).decrypt(this.Qm,e,t,this.Sm,!1,r)}return Promise.reject("Error decrypting AES-128 encrypted content")},t.prototype.Zm=function(e){var r=this,n=t.getWebCryptoApi(),i={name:this.Vm};return"AES-CTR"===this.Vm&&(i.length=128),n.subtle.importKey("raw",this.Sm,i,!1,["decrypt"]).then((function(t){var i={name:r.Vm};return"AES-CBC"===r.Vm?i.iv=new DataView(r.Tm):"AES-CTR"===r.Vm&&(i.counter=r.Um.getValue(),i.length=128,r.Um.increment(e.byteLength/16)),n.subtle.decrypt(i,t,e)}))},t.getWebCryptoApi=function(){return window.crypto},t.isWebCryptoApiSupported=function(){return void 0!==t.getWebCryptoApi()},t.isWebCryptoSubtleSupported=function(){return!(!t.isWebCryptoApiSupported()||!t.getWebCryptoApi().subtle)},t}();e.CryptoApi=a;var U=function(){function t(t){this.am=new Uint8Array(16),"string"==typeof t?this.am.set(o.FormatHelper.hexToBytes(t)):t instanceof Uint8Array&&this.am.set(t)}return t.prototype.getValue=function(){return new Uint8Array(this.am.buffer.slice(0))},t.prototype.increment=function(t){t=t||1;for(var e=0,r=15;r>=0&&(0!==t||0!==e);r--){var n=this.am[r]+(255&t)+e;e=n>>>8,this.am[r]=255&n,t>>>=8}},t}()},86797:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.createDecrypter=function(t,e,r){return e.includes("mp4")?new(0,n.ModuleManager.get(i.ModuleName.ContainerMP4).MP4Decrypter)(t,r,e):e.includes("webm")?new(0,n.ModuleManager.get(i.ModuleName.ContainerWebM).WebMDecrypter)(t,r,e):null};var n=r(88052),i=r(62756)},97030:function(t,e,r){"use strict";var n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.ClearKeyLoader=void 0;var i=r(40306),o=r(3336),s=r(56481),S=r(4129),a=r(29669),U=r(70962),u=r(74853),c=r(70233),f=r(23068),l=function(){function t(t,e){this.Mm=t,this.Pm=t.sourceContext.sourceIdentifier,this.Om=n(n({},e),{licenseRequestRetryDelay:(0,f.isNumber)(e.licenseRequestRetryDelay)?Math.max(0,e.licenseRequestRetryDelay):U.DefaultSettings.DRM_RETRY_DELAY,maxLicenseRequestRetries:(0,f.isNumber)(e.maxLicenseRequestRetries)?Math.floor(Math.max(0,e.maxLicenseRequestRetries)):U.DefaultSettings.DRM_MAX_RETRIES,withCredentials:"boolean"==typeof e.withCredentials?e.withCredentials:U.DefaultSettings.DRM_WITH_CREDENTIALS}),this.Nm=new S.DefaultContentLoader(this.Mm,{requestType:a.HttpRequestType.DRM_LICENSE_CLEARKEY,maxRetries:this.Om.maxLicenseRequestRetries,retryDelay:this.Om.licenseRequestRetryDelay})}return t.prototype.load=function(t){var e,r,n=this,s={kids:t.map((function(t){return c.FormatHelper.base64UrlEncode(t)})),type:"temporary"},S=null!==(r=null===(e=this.Om)||void 0===e?void 0:e.headers)&&void 0!==r?r:void 0;return this.Nm.load(this.Om.LA_URL,a.HttpRequestMethod.POST,a.HttpResponseType.JSON,JSON.stringify(s),S,this.Om.withCredentials,"application/json").then((function(t){return t.body.keys.filter((function(t){return t.k})).map((function(t){return{key:h(t.k),kid:h(t.kid)}}))})).catch((function(t){return n.Mm.eventHandler.fireError(new o.PlayerError(i.ErrorCode.DRM_FAILED_LICENSE_REQUEST,{statusCode:t.status,statusText:t.statusText,serverResponse:t.body},"Failed to load the DRM clear keys: ".concat(t.status," ").concat(t.statusText,"."),n.Pm)),Promise.reject(t)}))},t.prototype.dispose=function(){this.Nm=(0,s.dispose)(this.Nm),this.Om=null},t}();function h(t){return c.FormatHelper.bytesToHex(u.ArrayHelper.stringToArrayWithoutEncoding(c.FormatHelper.base64UrlDecode(t)))}e.ClearKeyLoader=l}},function(t){return function(){return t(t.s=24896)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.lowlatency=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player.lowlatency=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[727],{3089:function(t,e){var n;Object.defineProperty(e,"__esModule",{value:!0}),e.LiveLatencyControlAction=void 0,function(t){t[t.None=0]="None",t[t.PlaybackRate=1]="PlaybackRate",t[t.Seek=2]="Seek"}(n||(e.LiveLatencyControlAction=n={}))},18734:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.LiveLatencyTracker=void 0;var i=n(80813),o=n(3714),a=n(89927),r=function(){function t(t){var e=this;this.AS=function(t){t.wallClockTime&&e.nR===1/0&&(e.nR=t.wallClockTime-(0,a.toMilliSeconds)(t.playbackTime))},this.kR=t,this.lR=t.renderer,this.mR=t.eventHandler,this.nR=1/0,this.mR.on(o.PlayerEvent.SegmentPlayback,this.AS),this.yS=t.serviceManager.get(i.ServiceName.SynchronizedTimeService,this.kR.sourceContext.sourceIdentifier)}return t.prototype.zS=function(){return Date.now()+this.yS.getTimeDifference()},t.prototype.getLatency=function(){if(this.nR===1/0)return 1/0;var t=this.lR.getCurrentTime(),e=(0,a.toMilliSeconds)(t)+this.nR,n=this.zS();return(0,a.toSeconds)(Math.round(n-e))},t.prototype.reset=function(){this.nR=1/0},t.prototype.dispose=function(){this.mR.off(o.PlayerEvent.SegmentPlayback,this.AS),this.reset()},t}();e.LiveLatencyTracker=r},34377:function(t,e,n){var i=this&&this.__assign||function(){return i=Object.assign||function(t){for(var e,n=1,i=arguments.length;n<i;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},i.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.LiveLatencyService=void 0,e.mergeLowLatencyConfigs=l;var o=n(3714),a=n(23068),r=n(3089),c=n(18734),u=function(){function t(t){var e,n,i,u;if(this.kv={mode:o.LatencyMode.Idle,requiredAction:r.LiveLatencyControlAction.PlaybackRate,actionParam:1},this.jv=t,this.lv=new c.LiveLatencyTracker(t),this.mv=t.settings.LOW_LATENCY_BUFFER_GUARD,(0,a.isDefined)(null===(e=t.config.live)||void 0===e?void 0:e.lowLatency)||(0,a.isDefined)(null===(n=t.sourceContext.source.live)||void 0===n?void 0:n.lowLatency)){var s=l(null===(i=t.config.live)||void 0===i?void 0:i.lowLatency,null===(u=t.sourceContext.source.live)||void 0===u?void 0:u.lowLatency);this.nv=l(this.pv(),s)}}return t.prototype.pv=function(){return{targetLatency:this.jv.settings.LOW_LATENCY_DEFAULT_TARGET_LATENCY,catchup:{playbackRate:this.jv.settings.LOW_LATENCY_DEFAULT_CATCHUP_PLAYBACK_RATE,playbackRateThreshold:1/0,seekThreshold:1/0},fallback:{playbackRate:this.jv.settings.LOW_LATENCY_DEFAULT_FALLBACK_PLAYBACK_RATE,playbackRateThreshold:1/0,seekThreshold:1/0}}},t.prototype.getLatency=function(){return this.lv.getLatency()},t.prototype.getTargetLatency=function(){var t;return null===(t=this.nv)||void 0===t?void 0:t.targetLatency},t.prototype.setTargetLatency=function(t){this.nv=this.nv||this.pv(),this.nv.targetLatency=t},t.prototype.setCatchupConfig=function(t){this.nv=this.nv||this.pv(),this.nv.catchup=i(i({},this.pv().catchup),t)},t.prototype.getCatchupConfig=function(){var t;return null===(t=this.nv)||void 0===t?void 0:t.catchup},t.prototype.setFallbackConfig=function(t){this.nv=this.nv||this.pv(),this.nv.fallback=i(i({},this.pv().fallback),t)},t.prototype.getFallbackConfig=function(){var t;return null===(t=this.nv)||void 0===t?void 0:t.fallback},t.prototype.getStatus=function(t,e){var n=this.lv.getLatency();return!this.isConfigured()||this.ov||n===1/0?{mode:o.LatencyMode.Suspended,requiredAction:r.LiveLatencyControlAction.None}:n<this.nv.targetLatency?this.qv(t,n):n>this.nv.targetLatency?this.rv(t,n,e):this.kv},t.prototype.qv=function(t,e){var n=this.nv.targetLatency,i=this.nv.fallback,a=e<n-i.seekThreshold,c=e<n-i.playbackRateThreshold;return a?{mode:o.LatencyMode.Fallback,requiredAction:r.LiveLatencyControlAction.Seek,actionParam:n}:t===o.LatencyMode.Fallback||c?{mode:o.LatencyMode.Fallback,requiredAction:r.LiveLatencyControlAction.PlaybackRate,actionParam:i.playbackRate}:this.kv},t.prototype.rv=function(t,e,n){var i=this.nv.targetLatency,a=this.nv.catchup,c=e>i+a.seekThreshold,u=e>i+a.playbackRateThreshold,l=n>this.mv;return c?{mode:o.LatencyMode.Catchup,requiredAction:r.LiveLatencyControlAction.Seek,actionParam:i}:l&&(t===o.LatencyMode.Catchup||u)?{mode:o.LatencyMode.Catchup,requiredAction:r.LiveLatencyControlAction.PlaybackRate,actionParam:a.playbackRate}:this.kv},t.prototype.reset=function(){this.lv.reset(),this.ov=!1},t.prototype.suspendControl=function(){this.ov=!0},t.prototype.resumeControl=function(){this.ov=!1},t.prototype.isConfigured=function(){return Boolean(this.nv)},t.prototype.dispose=function(){this.reset(),this.lv.dispose()},t}();function l(t,e){void 0===t&&(t={}),void 0===e&&(e={});var n=i({},t);return(0,a.isDefined)(e.targetLatency)&&(n.targetLatency=e.targetLatency),e.catchup&&(n.catchup=i(i({},t.catchup||{}),e.catchup)),e.fallback&&(n.fallback=i(i({},t.fallback||{}),e.fallback)),n}e.LiveLatencyService=u},61487:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.LowLatencyDefinition=void 0;var i=n(62756),o=n(3089),a=n(34377),r=n(89659),c=n(95940);e.LowLatencyDefinition={name:i.ModuleName.LowLatency,module:function(){return{LowLatencyApiFactory:c.LowLatencyApiFactory,LiveLatencyService:a.LiveLatencyService,LiveLatencyControlAction:o.LiveLatencyControlAction,verifyLlHlsSegment:r.verifyLlHlsSegment,applyUpdatedSegmentInfoProps:r.applyUpdatedSegmentInfoProps}}},e.default=e.LowLatencyDefinition},89659:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.verifyLlHlsSegment=function(t,e){var n,a,c,u=null===(a=null===(n=e.getRepresentationById(t.getRepresentationId()))||void 0===n?void 0:n.SegmentList)||void 0===a?void 0:a[0].SegmentURL;if(!u)return i.SegmentVerificationResult.Publish;var l=(0,o.findFromEnd)(u,(function(e){return e._mediaSequence===t.getSegmentInfo().mediaSequence}));if(!l)return i.SegmentVerificationResult.Publish;if(r(t,l))return i.SegmentVerificationResult.Publish;var s=(null!==(c=l._parts)&&void 0!==c?c:[]).find((function(e){return r(t,e)}));return s?s.isPreloadHint?i.SegmentVerificationResult.Park:i.SegmentVerificationResult.Publish:i.SegmentVerificationResult.Drop},e.applyUpdatedSegmentInfoProps=function(t,e){var n,i,a,c,u=null===(i=null===(n=e.getRepresentationById(t.getRepresentationId()))||void 0===n?void 0:n.SegmentList)||void 0===i?void 0:i[0].SegmentURL;if(u){var l=(0,o.findFromEnd)(u,(function(e){return e._mediaSequence===t.getSegmentInfo().mediaSequence})),s=(null!==(a=null==l?void 0:l._parts)&&void 0!==a?a:[]).find((function(e){return r(t,e)}));if(l&&s){var v=t.getSegmentInfo();v.discontinuitySequenceNumber=l._discontinuitySequenceNumber,l._discontinuity&&(v.isDiscontinuityStart=l._discontinuity),l._init&&(v.init=null!==(c=v.init)&&void 0!==c?c:{isInitSegment:!0,internalRepresentationId:t.getRepresentationId(),url:l._init.url},v.init.url=l._init.url,v.init.byteRange=l._init.byteRange,v.init.key=l._init.key),l._key?v.key=l._key:delete v.key,t.setDuration(s.duration)}}};var i=n(66790),o=n(74853),a=n(19541);function r(t,e){var n=function(t){return"uri"in t}(e),i=t.getUrl().includes(n?e.uri:e._media),o=(0,a.compareValues)(t.getSegmentInfo().byteRange,n?e.byteRange:e._byteRange);return i&&o}},95940:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.LowLatencyApiFactory=void 0;var n=function(){function t(){}return t.create=function(t){return new(function(){function e(){}return e.prototype.getLatency=function(){return t.getLatency()},e.prototype.setTargetLatency=function(e){t.setTargetLatency(e)},e.prototype.getTargetLatency=function(){return t.getTargetLatency()},e.prototype.setCatchupConfig=function(e){t.setCatchupConfig(e)},e.prototype.getCatchupConfig=function(){return t.getCatchupConfig()},e.prototype.setFallbackConfig=function(e){t.setFallbackConfig(e)},e.prototype.getFallbackConfig=function(){return t.getFallbackConfig()},e}())},t}();e.LowLatencyApiFactory=n}},function(t){return function(){return t(t.s=61487)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["advertising-core"]=t():(e.bitmovin=e.bitmovin||{},e.bitmovin.player=e.bitmovin.player||{},e.bitmovin.player["advertising-core"]=t())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[561],{1100:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Storage=void 0;var r=null,n={data:{},length:0,getItem:function(e){return this.data[e]},setItem:function(e,t){this.data[e]=t,this.length=Object.keys(this.data).length},removeItem:function(e){delete data[e],this.length=Object.keys(this.data).length},clear:function(){this.data={},this.length=0}},i=function(){function e(e){this.storage=this.initStorage(e)}return e.prototype.initStorage=function(e){if(r&&("undefined"==typeof window||null===window||Object.getPrototypeOf(r)!==window.Storage.prototype||e))return r;try{r="undefined"!=typeof window&&null!==window?window.localStorage||window.sessionStorage:null}catch(e){r=null}return r&&e&&!this.isStorageDisabled(r)||(r=n).clear(),r},e.prototype.isStorageDisabled=function(e){var t="__VASTStorage__";try{if(e.setItem(t,t),e.getItem(t)!==t)return e.removeItem(t),!0}catch(e){return!0}return e.removeItem(t),!1},e.prototype.getItem=function(e){return this.storage.getItem(e)},e.prototype.setItem=function(e,t){return this.storage.setItem(e,t)},e.prototype.removeItem=function(e){return this.storage.removeItem(e)},e.prototype.clear=function(){return this.storage.clear()},e}();t.Storage=i},2035:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCreativeLinear=function(e,t){var r,s=new n.CreativeLinear(t);s.duration=a.parserUtils.parseDuration(a.parserUtils.parseNodeText(a.parserUtils.childByName(e,"Duration")));var l=e.getAttribute("skipoffset");if(null==l)s.skipDelay=null;else if("%"===l.charAt(l.length-1)&&-1!==s.duration){var u=parseInt(l,10);s.skipDelay=s.duration*(u/100)}else s.skipDelay=a.parserUtils.parseDuration(l);var c=a.parserUtils.childByName(e,"VideoClicks");c&&(s.videoClickThroughURLTemplate=a.parserUtils.parseNodeText(a.parserUtils.childByName(c,"ClickThrough")),a.parserUtils.childrenByName(c,"ClickTracking").forEach((function(e){s.videoClickTrackingURLTemplates.push(a.parserUtils.parseNodeText(e))})),a.parserUtils.childrenByName(c,"CustomClick").forEach((function(e){s.videoCustomClickURLTemplates.push(a.parserUtils.parseNodeText(e))})));var d=a.parserUtils.childByName(e,"AdParameters");d&&(s.adParameters=a.parserUtils.parseNodeText(d)),a.parserUtils.childrenByName(e,"TrackingEvents").forEach((function(e){a.parserUtils.childrenByName(e,"Tracking").forEach((function(e){var t=e.getAttribute("event"),n=a.parserUtils.parseNodeText(e);if(t&&n){if("progress"===t){if(!(r=e.getAttribute("offset")))return;t="%"===r.charAt(r.length-1)?"progress-".concat(r):"progress-".concat(Math.round(a.parserUtils.parseDuration(r)))}null==s.trackingEvents[t]&&(s.trackingEvents[t]=[]),s.trackingEvents[t].push(n)}}))})),a.parserUtils.childrenByName(e,"MediaFiles").forEach((function(e){a.parserUtils.childrenByName(e,"MediaFile").forEach((function(e){var t=new o.MediaFile;t.id=e.getAttribute("id"),t.fileURL=a.parserUtils.parseNodeText(e),t.deliveryType=e.getAttribute("delivery"),t.codec=e.getAttribute("codec"),t.mimeType=e.getAttribute("type"),t.apiFramework=e.getAttribute("apiFramework"),t.bitrate=parseInt(e.getAttribute("bitrate")||0),t.minBitrate=parseInt(e.getAttribute("minBitrate")||0),t.maxBitrate=parseInt(e.getAttribute("maxBitrate")||0),t.width=parseInt(e.getAttribute("width")||0),t.height=parseInt(e.getAttribute("height")||0);var r=e.getAttribute("scalable");r&&"string"==typeof r&&("true"===(r=r.toLowerCase())?t.scalable=!0:"false"===r&&(t.scalable=!1));var n=e.getAttribute("maintainAspectRatio");n&&"string"==typeof n&&("true"===(n=n.toLowerCase())?t.maintainAspectRatio=!0:"false"===n&&(t.maintainAspectRatio=!1)),s.mediaFiles.push(t)}))}));var p=a.parserUtils.childByName(e,"Icons");return p&&a.parserUtils.childrenByName(p,"Icon").forEach((function(e){var t=new i.Icon;t.program=e.getAttribute("program"),t.height=parseInt(e.getAttribute("height")||0),t.width=parseInt(e.getAttribute("width")||0),t.xPosition=function(e){return-1!==["left","right"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("xPosition")),t.yPosition=function(e){return-1!==["top","bottom"].indexOf(e)?e:parseInt(e||0)}(e.getAttribute("yPosition")),t.apiFramework=e.getAttribute("apiFramework"),t.offset=a.parserUtils.parseDuration(e.getAttribute("offset")),t.duration=a.parserUtils.parseDuration(e.getAttribute("duration")),a.parserUtils.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=a.parserUtils.parseNodeText(e)})),a.parserUtils.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=a.parserUtils.parseNodeText(e)})),a.parserUtils.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=a.parserUtils.parseNodeText(e)}));var r=a.parserUtils.childByName(e,"IconClicks");r&&(t.iconClickThroughURLTemplate=a.parserUtils.parseNodeText(a.parserUtils.childByName(r,"IconClickThrough")),a.parserUtils.childrenByName(r,"IconClickTracking").forEach((function(e){t.iconClickTrackingURLTemplates.push(a.parserUtils.parseNodeText(e))}))),t.iconViewTrackingURLTemplate=a.parserUtils.parseNodeText(a.parserUtils.childByName(e,"IconViewTracking")),s.icons.push(t)})),s};var n=r(77615),i=r(50199),o=r(36629),a=r(75065)},2860:function(e,t){function r(){try{var e=new window.XMLHttpRequest;return"withCredentials"in e?e:null}catch(e){return console.log("Error in XHRURLHandler support check:",e),null}}Object.defineProperty(t,"__esModule",{value:!0}),t.XHRURLHandler=void 0,t.XHRURLHandler={get:function(e,t,n){if("https:"===window.location.protocol&&0===e.indexOf("http://"))return n(new Error("XHRURLHandler: Cannot go from HTTPS to HTTP."));try{var i=r();i.open("GET",e),i.timeout=t.timeout||0,i.withCredentials=t.withCredentials||!1,i.overrideMimeType&&i.overrideMimeType("text/xml"),i.onreadystatechange=function(){4===i.readyState&&(200===i.status?n(null,i.responseXML):n(new Error("XHRURLHandler: ".concat(i.statusText))))},i.send()}catch(e){n(new Error("XHRURLHandler: Unexpected error"))}},supported:function(){return!!r()}}},5838:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.VmapExtractor=void 0;var n=r(70850),i=r(88052),o=r(62756),a=r(45392),s=r(88457),l=r(23912),u=r(6365),c=r(47091),d=function(){function e(){}return e.xml2js=function(e){return(0,i.ModuleManager.get(o.ModuleName.XML).parseXML)(e,{decodeEntities:!1,useArrayRepresentationForChildren:!0})},e.js2xml=function(e){return(0,i.ModuleManager.get(o.ModuleName.XML).parseJSONtoXML)(e)},e.extractAdBreakConfigs=function(t){return e.getParsedManifest(t.tag.url).then((function(r){if(r.manifest.VMAP){var n=e.parseVmapAdBreaks(r.manifest,t);return Promise.resolve({adBreakConfigs:n,downloadTiming:r.downloadTiming})}return Promise.reject({code:s.AdvertisingModuleErrorCode.AD_TAG_TYPE_NOT_MATCHING})}))},e.getParsedManifest=function(t){return a.AdManifestHelper.downloadVmapManifest(t).catch((function(){return Promise.reject({code:s.AdvertisingModuleErrorCode.COULD_NOT_LOAD_AD_MANIFEST})})).then((function(t){if(!t.body)return Promise.reject({code:c.VastErrorCode.XML_PARSING_ERROR});try{var r=e.xml2js(t.body),n=r.success?r.parsed:{},i={downloadTime:t.elapsedTime,timeToFirstByte:t.timeToFirstByte};return Promise.resolve({manifest:n,downloadTiming:i})}catch(e){return Promise.reject({code:c.VastErrorCode.XML_PARSING_ERROR})}}))},e.parseVmapAdBreaks=function(t,r){return e.extractAdBreaks(t).map((function(e){var t,i={id:e.id||n.Util.generateUniqueId(),tag:{url:e.tag,type:l.AdTagType.VAST},position:e.offset,preloadOffset:null!==(t=r.preloadOffset)&&void 0!==t?t:u.DEFAULT_PRELOAD_OFFSET};r.hasOwnProperty("replaceContentDuration")&&(i.replaceContentDuration=r.replaceContentDuration),r.passthroughMode&&(i.passthroughMode=r.passthroughMode);var o={publicAdBreakConfig:i};return e.trackingEvents&&Object.keys(e.trackingEvents).length>0&&(o.trackingEvents=e.trackingEvents),o}))||[]},e.extractAdBreaks=function(t){return t.VMAP?t.VMAP.AdBreak.map((function(t){var r=t._breakId,n=t._timeOffset;switch(n){case"start":n="pre";break;case"end":n="post"}var i=e.getAdBreakUri(t),o=[];return t.TrackingEvents&&t.TrackingEvents[0]&&t.TrackingEvents[0].Tracking&&t.TrackingEvents[0].Tracking.forEach((function(e){var t=e._event.toLocaleLowerCase();o.push({type:t,url:e.toString()})})),{id:r,offset:n,tag:i,trackingEvents:o}})):[]},e.getAdBreakUri=function(t){var r=Boolean(t.AdSource&&t.AdSource[0]),n=Boolean(r&&t.AdSource[0].AdTagURI&&t.AdSource[0].AdTagURI[0]),i=Boolean(r&&t.AdSource[0].VASTAdData&&t.AdSource[0].VASTAdData[0]);return n||i?n&&t.AdSource[0].AdTagURI[0].toString?t.AdSource[0].AdTagURI[0].toString():i?a.AdManifestHelper.toDataUri(e.js2xml(t.AdSource[0].VASTAdData[0])):void 0:""},e}();t.VmapExtractor=d},6036:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.VASTClient=void 0;var n=r(1100),i=r(29902),o=function(){function e(e){e=e||{},this.cappingFreeLunch=e.cappingFreeLunch||0,this.cappingMinimumTimeInterval=e.cappingMinimumTimeInterval||0,this.defaultOptions={withCredentials:!1,timeout:0},this.vastParser=new i.VASTParser;var t=null==e.allowUsingBrowserStorageApi||e.allowUsingBrowserStorageApi;this.storage=e.customStorage||new n.Storage(t),void 0===this.lastSuccessfulAd&&(this.lastSuccessfulAd=0),void 0===this.totalCalls&&(this.totalCalls=0),void 0===this.totalCallsTimeout&&(this.totalCallsTimeout=0)}return e.prototype.getParser=function(){return this.vastParser},Object.defineProperty(e.prototype,"lastSuccessfulAd",{get:function(){return this.storage.getItem("vast-client-last-successful-ad")},set:function(e){this.storage.setItem("vast-client-last-successful-ad",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalCalls",{get:function(){return this.storage.getItem("vast-client-total-calls")},set:function(e){this.storage.setItem("vast-client-total-calls",e)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"totalCallsTimeout",{get:function(){return this.storage.getItem("vast-client-total-calls-timeout")},set:function(e){this.storage.setItem("vast-client-total-calls-timeout",e)},enumerable:!1,configurable:!0}),e.prototype.hasRemainingAds=function(){return this.vastParser.remainingAds.length>0},e.prototype.getNextAds=function(e){return this.vastParser.getRemainingAds(e)},e.prototype.get=function(e,t){var r=this;void 0===t&&(t={});var n=Date.now();return(t=Object.assign(this.defaultOptions,t)).hasOwnProperty("resolveAll")||(t.resolveAll=!1),this.totalCallsTimeout<n?(this.totalCalls=1,this.totalCallsTimeout=n+36e5):this.totalCalls++,new Promise((function(i,o){if(r.cappingFreeLunch>=r.totalCalls)return o(new Error("VAST call canceled  FreeLunch capping not reached yet ".concat(r.totalCalls,"/").concat(r.cappingFreeLunch)));var a=n-r.lastSuccessfulAd;if(a<0)r.lastSuccessfulAd=0;else if(a<r.cappingMinimumTimeInterval)return o(new Error("VAST call canceled  (".concat(r.cappingMinimumTimeInterval,")ms minimum interval reached")));r.vastParser.getAndParseVAST(e,t).then((function(e){return i(e)})).catch((function(e){return o(e)}))}))},e}();t.VASTClient=o},6365:function(e,t){var r,n;Object.defineProperty(t,"__esModule",{value:!0}),t.VastApiFramework=t.MediaFileDeliveryType=t.DEFAULT_OVERLAY_AD_BOTTOM_POSITION=t.DEFAULT_VIDEO_LOAD_TIMEOUT=t.NON_SKIPPABLE_IDENTIFIER=t.DEFAULT_PRELOAD_OFFSET=t.DEFAULT_AD_BREAK_POSITION=void 0,t.DEFAULT_AD_BREAK_POSITION="pre",t.DEFAULT_PRELOAD_OFFSET=0,t.NON_SKIPPABLE_IDENTIFIER=-1,t.DEFAULT_VIDEO_LOAD_TIMEOUT=8e3,t.DEFAULT_OVERLAY_AD_BOTTOM_POSITION="4.5em",function(e){e.Progressive="progressive",e.Streaming="streaming"}(r||(t.MediaFileDeliveryType=r={})),function(e){e.Vpaid="vpaid"}(n||(t.VastApiFramework=n={}))},7581:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.VastErrorCode=t.AdvertisingModuleErrorCode=t.AdTagType=t.AdvertisingCoreModuleDefinition=void 0;var n=r(62756),i=r(43255),o=r(90176),a=r(88457);Object.defineProperty(t,"AdvertisingModuleErrorCode",{enumerable:!0,get:function(){return a.AdvertisingModuleErrorCode}});var s=r(23912);Object.defineProperty(t,"AdTagType",{enumerable:!0,get:function(){return s.AdTagType}});var l=r(47091);Object.defineProperty(t,"VastErrorCode",{enumerable:!0,get:function(){return l.VastErrorCode}}),t.AdvertisingCoreModuleDefinition={name:n.ModuleName.AdvertisingCore,module:function(){return{AdvertisingController:o.AdvertisingController,AdPlayerDelegate:i.AdPlayerDelegate}},dependencies:[n.ModuleName.XML],exports:{AdTagType:s.AdTagType,AdvertisingModuleErrorCode:a.AdvertisingModuleErrorCode,VastErrorCode:l.VastErrorCode}},t.default=t.AdvertisingCoreModuleDefinition},11417:function(e,t){function r(e,t){void 0===t&&(t={});var r=[];t.ASSETURI&&(t.ASSETURI=n(t.ASSETURI)),t.CONTENTPLAYHEAD&&(t.CONTENTPLAYHEAD=n(t.CONTENTPLAYHEAD)),t.ERRORCODE&&!/^[0-9]{3}$/.test(t.ERRORCODE)&&(t.ERRORCODE=900),t.CACHEBUSTING=i(Math.round(1e8*Math.random()).toString()),t.TIMESTAMP=n((new Date).toISOString()),t.RANDOM=t.random=t.CACHEBUSTING;for(var o=0,a=e;o<a.length;o++){var s=a[o];if("string"==typeof s){for(var l in t){var u=t[l],c="[".concat(l,"]"),d="%%".concat(l,"%%");s=(s=s.replace(c,u)).replace(d,u)}r.push(s)}}return r}function n(e){return encodeURIComponent(e).replace(/[!'()*]/g,(function(e){return"%".concat(e.charCodeAt(0).toString(16))}))}function i(e){return e.length<8?o(0,8-e.length,!1).map((function(e){return"0"})).join("")+e:e}function o(e,t,r){for(var n=[],i=e<t,o=r?i?t+1:t-1:t,a=e;i?a<o:a>o;i?a++:a--)n.push(a);return n}Object.defineProperty(t,"__esModule",{value:!0}),t.util=void 0,t.util={track:function(e,t){r(e,t).forEach((function(e){"undefined"!=typeof window&&null!==window&&((new Image).src=e)}))},resolveURLTemplates:r,encodeURIComponentRFC3986:n,leftpad:i,range:o,isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},flatten:function e(t){return t.reduce((function(t,r){return t.concat(Array.isArray(r)?e(r):r)}),[])}}},13769:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.nodeURLHandler=void 0,t.nodeURLHandler={get:function(e,t,r){r(new Error("Please bundle the library for node to use the node urlHandler"))}}},19637:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AdExtension=void 0;var r=function(){function e(){this.name=null,this.value=null,this.attributes={},this.children=[]}return e.prototype.isEmpty=function(){return null===this.value&&0===Object.keys(this.attributes).length&&0===this.children.length},e}();t.AdExtension=r},23912:function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AdTagType=void 0,function(e){e.VAST="vast",e.VMAP="vmap",e.VPAID="vpaid"}(r||(t.AdTagType=r={}))},27294:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.urlHandler=void 0;var n=r(82664),i=r(13769),o=r(2860);t.urlHandler={get:function(e,t,r){return r||("function"==typeof t&&(r=t),t={}),"undefined"==typeof window||null===window?i.nodeURLHandler.get(e,t,r):o.XHRURLHandler.supported()?o.XHRURLHandler.get(e,t,r):n.flashURLHandler.supported()?n.flashURLHandler.get(e,t,r):r(new Error("Current context is not supported by any of the default URLHandlers. Please provide a custom URLHandler"))}}},28412:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.AdvertisingModule=void 0;var r=function(){return function(e,t){this.player=e,this.config=t}}();t.AdvertisingModule=r},28610:function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VmapTrackingEventType=void 0,function(e){e.BreakStart="breakstart",e.BreakEnd="breakend",e.Error="error"}(r||(t.VmapTrackingEventType=r={}))},29902:function(e,t,r){var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),i=this&&this.__spreadArray||function(e,t,r){if(r||2===arguments.length)for(var n,i=0,o=t.length;i<o;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))};Object.defineProperty(t,"__esModule",{value:!0}),t.VASTParser=void 0;var o=r(71119),a=r(37007),s=r(75065),l=r(27294),u=r(11417),c=r(71076),d={ERRORCODE:900,extensions:[]},p=function(e){function t(){var t=e.call(this)||this;return t.remainingAds=[],t.parentURLs=[],t.errorURLTemplates=[],t.rootErrorURLTemplates=[],t.maxWrapperDepth=null,t.URLTemplateFilters=[],t.fetchingOptions={},t.currentAdSequence=null,t}return n(t,e),t.prototype.addURLTemplateFilter=function(e){"function"==typeof e&&this.URLTemplateFilters.push(e)},t.prototype.removeURLTemplateFilter=function(){this.URLTemplateFilters.pop()},t.prototype.countURLTemplateFilters=function(){return this.URLTemplateFilters.length},t.prototype.clearURLTemplateFilters=function(){this.URLTemplateFilters=[]},t.prototype.trackVastError=function(e,t){for(var r=[],n=2;n<arguments.length;n++)r[n-2]=arguments[n];this.emit("VAST-error",Object.assign.apply(Object,i([d,t],r,!1))),u.util.track(e,t)},t.prototype.getErrorURLTemplates=function(){return this.rootErrorURLTemplates.concat(this.errorURLTemplates)},t.prototype.fetchVAST=function(e,t,r){var n=this;return new Promise((function(i,o){n.URLTemplateFilters.forEach((function(t){e=t(e)})),n.parentURLs.push(e),n.emit("VAST-resolving",{url:e,wrapperDepth:t,originalUrl:r}),n.urlHandler.get(e,n.fetchingOptions,(function(t,r){n.emit("VAST-resolved",{url:e,error:t}),t?o(t):i(r)}))}))},t.prototype.initParsingStatus=function(e){void 0===e&&(e={}),this.rootURL="",this.remainingAds=[],this.parentURLs=[],this.errorURLTemplates=[],this.rootErrorURLTemplates=[],this.maxWrapperDepth=e.wrapperLimit||10,this.fetchingOptions={timeout:e.timeout,withCredentials:e.withCredentials},this.urlHandler=e.urlhandler||l.urlHandler},t.prototype.getRemainingAds=function(e){var t=this;if(0===this.remainingAds.length)return Promise.reject(new Error("No more ads are available for the given VAST"));var r=e?u.util.flatten(this.remainingAds):this.remainingAds.shift();return this.errorURLTemplates=[],this.parentURLs=[],this.resolveAds(r,{wrapperDepth:0,originalUrl:this.rootURL}).then((function(e){return t.buildVASTResponse(e)}))},t.prototype.getAndParseVAST=function(e,t){var r=this;return void 0===t&&(t={}),this.initParsingStatus(t),this.rootURL=e,this.fetchVAST(e).then((function(n){return t.originalUrl=e,t.isRootVAST=!0,r.parse(n,t).then((function(e){return r.buildVASTResponse(e,t)}))}))},t.prototype.parseVAST=function(e,t){var r=this;return void 0===t&&(t={}),this.initParsingStatus(t),t.isRootVAST=!0,this.parse(e,t).then((function(e){return r.buildVASTResponse(e,t)}))},t.prototype.getPodAds=function(e){return e.filter((function(e){return null!=e.sequence}))},t.prototype.getStandaloneAds=function(e){return e.filter((function(e){return null==e.sequence}))},t.prototype.hasMediaFiles=function(e){return!(!e||null!=e.errorCode)&&(Array.isArray(e.creatives)?e.creatives:[]).some((function(e){return e.mediaFiles&&e.mediaFiles.length>0}))},t.prototype.replaceUnavailableAdPodAds=function(e){var t=this,r=this.getPodAds(e),n=this.getStandaloneAds(e).filter(this.hasMediaFiles);return 0===r.length||0===n.length?e:(r=r.map((function(e){return t.hasMediaFiles(e)?e:n.shift()})).filter(Boolean),n.forEach((function(e){return e.isFallback=!0})),r.concat(n))},t.prototype.markFallbackAds=function(e){return this.getPodAds(e).length>0&&this.getStandaloneAds(e).forEach((function(e){return e.isFallback=!0})),e},t.prototype.buildVASTResponse=function(e,t){void 0===t&&(t={});var r=new c.VASTResponse;return r.errorURLTemplates=this.getErrorURLTemplates(),e.forEach((function(e){return e.isFallback=!1})),r.ads=t.replaceUnavailableAdPodAds?this.replaceUnavailableAdPodAds(e):this.markFallbackAds(e),this.completeWrapperResolving(r),r},t.prototype.parse=function(e,t){var r=this,n=t.resolveAll,i=void 0===n||n,a=t.wrapperSequence,l=void 0===a?null:a,u=t.originalUrl,c=void 0===u?null:u,d=t.wrapperDepth,p=void 0===d?0:d,f=t.isRootVAST,h=void 0!==f&&f,v=t.parentAdSequence,E=void 0===v?null:v;if(!e||!e.documentElement||"VAST"!==e.documentElement.nodeName)return Promise.reject(new Error("Invalid VAST XMLDocument"));var m=[],g=e.documentElement.childNodes;for(var y in g){var A=g[y];if("Error"===A.nodeName){var T=s.parserUtils.parseNodeText(A);h?this.rootErrorURLTemplates.push(T):this.errorURLTemplates.push(T)}if("Ad"===A.nodeName){var R=(0,o.parseAd)(A);R?m.push(R):this.trackVastError(this.getErrorURLTemplates(),{ERRORCODE:101})}}var P=m.length,_=m[P-1];return 1===P&&null!=l&&_&&!_.sequence&&(_.sequence=l),m.forEach((function(e){return r.handleFallbackAdSequence(e,E)})),!1===i&&(this.remainingAds=s.parserUtils.splitVAST(m),m=this.remainingAds.shift()),this.resolveAds(m,{wrapperDepth:p,originalUrl:c})},t.prototype.handleFallbackAdSequence=function(e,t){null==e.sequence?e.fallbackAdSequence=t||this.currentAdSequence:this.currentAdSequence=e.sequence},t.prototype.resolveAds=function(e,t){var r=this;void 0===e&&(e=[]);var n=t.wrapperDepth,i=t.originalUrl,o=[];return e.forEach((function(e){var t=r.resolveWrappers(e,n,i);o.push(t)})),Promise.all(o).then((function(e){var t=u.util.flatten(e);if(!t&&r.remainingAds.length>0){var o=r.remainingAds.shift();return r.resolveAds(o,{wrapperDepth:n,originalUrl:i})}return t}))},t.prototype.resolveWrappers=function(e,t,r){var n=this;return new Promise((function(i){if(t++,!e.nextWrapperURL)return delete e.nextWrapperURL,i(e);if(t>=n.maxWrapperDepth||-1!==n.parentURLs.indexOf(e.nextWrapperURL))return e.errorCode=302,delete e.nextWrapperURL,i(e);e.nextWrapperURL=s.parserUtils.resolveVastAdTagURI(e.nextWrapperURL,r);var o=e.sequence;r=e.nextWrapperURL,n.fetchVAST(e.nextWrapperURL,t,r).then((function(a){return n.parse(a,{originalUrl:r,wrapperSequence:o,wrapperDepth:t,parentAdSequence:e.sequence||e.fallbackAdSequence}).then((function(t){if(delete e.nextWrapperURL,0===t.length)return e.creatives=[],i(e);t.forEach((function(t){t&&s.parserUtils.mergeWrapperAdData(t,e)})),i(t)}))})).catch((function(t){e.errorCode=301,e.errorMessage=t.message,i(e)}))}))},t.prototype.completeWrapperResolving=function(e){if(0===e.ads.length)this.trackVastError(e.errorURLTemplates,{ERRORCODE:303});else for(var t=e.ads.length-1;t>=0;t--){var r=e.ads[t];(r.errorCode||0===r.creatives.length)&&(this.trackVastError(r.errorURLTemplates.concat(e.errorURLTemplates),{ERRORCODE:r.errorCode||303},{ERRORMESSAGE:r.errorMessage||""},{extensions:r.extensions},{system:r.system}),e.ads.splice(t,1))}},t}(a.EventEmitter);t.VASTParser=p},31472:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.CompanionAd=void 0;var r=function(){return function(){this.id=null,this.width=0,this.height=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.altText=null,this.companionClickThroughURLTemplate=null,this.companionClickTrackingURLTemplates=[],this.trackingEvents={}}}();t.CompanionAd=r},35475:function(e,t,r){var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeNonLinear=void 0;var i=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;return r.type="nonlinear",r.variations=[],r}return n(t,e),t}(r(36828).Creative);t.CreativeNonLinear=i},36629:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.MediaFile=void 0;var r=function(){return function(){this.id=null,this.fileURL=null,this.deliveryType="progressive",this.mimeType=null,this.codec=null,this.bitrate=0,this.minBitrate=0,this.maxBitrate=0,this.width=0,this.height=0,this.apiFramework=null,this.scalable=null,this.maintainAspectRatio=null}}();t.MediaFile=r},36828:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Creative=void 0;var r=function(){return function(e){void 0===e&&(e={}),this.id=e.id||null,this.adId=e.adId||null,this.universalAdId=e.universalAdId||null,this.sequence=e.sequence||null,this.apiFramework=e.apiFramework||null,this.trackingEvents={}}}();t.Creative=r},43255:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.AdPlayerDelegate=void 0;var i=r(40306),o=r(80813),a=r(3714),s=r(51289),l=r(90408),u=r(20213),c=r(75375),d=r(18192),p=r(94685),f=r(41138),h=r(63524),v=r(65185),E=r(85939),m=r(47091),g=function(){function e(t){var r,p=t.internalPlayer,f=new E.PlayerStateStore(t.context,p),g=Promise.resolve(),y=!1,R=!1,P=!1,_={width:0,height:0},N=[],S=function(e){e.code===u.WarningCode.PLAYBACK_COULD_NOT_BE_STARTED&&(R=!0)};p.onInternal(a.PlayerEvent.PlayerResized,(function(e){var t=A(e.width),r=A(e.height);_={width:t,height:r}}));var U=function(){R=!1};this.getVideoElement=function(){return p.getVideoElement()},this.getVolume=function(){return p.isMuted()?0:p.getVolume()},this.parsePosition=function(t){var r;return r=f.hasStoredState()?f.getStoredState().contentDuration:p.getDuration(),e.parsePosition(t,r)},this.selectMediaFile=function(e){var r=e.every((function(e){return e.bitrate||e.minBitrate&&e.maxBitrate})),n=p.getDownloadedVideoData(),i=p.getDownloadedAudioData(),a=Boolean(i&&n&&n.bitrate>0),s=t.context.serviceManager.get(o.ServiceName.AdaptationService);return r&&(s||a)?b(e,[n,i],s):function(e,t,r){return r&&r.width>0?(0,v.findMediaFileByResolution)(r.width,r.height,e):(0,v.findMediaFileByResolution)(t.width,t.height,e)}(e,_,n)};var b=function(e,t,r){var n=t[0],i=t[1];return r?r.selectQualityBasedOnBitrateMeasurement(e):(0,v.findMediaFileByBitrate)(n.bitrate+i.bitrate,e)};this.metadataLoaded=function(e,t){var r={adBreak:null,downloadTiming:t};e.hasOwnProperty("scheduleTime")&&(r.adBreak=e),r.adConfig=e,p.fireEvent(a.PlayerEvent.AdManifestLoaded,r)};var O=function(){N.forEach((function(e){return p.fireEvent(a.PlayerEvent.Error,{type:a.PlayerEvent.Error,code:e.code,name:e.name,message:e.message,data:e.data,troubleShootLink:(0,s.generateTroubleshootUrl)(e.code)})}))},I=function(e){if(!f.hasStoredState())return Promise.resolve();var n=f.getStoredState().contentDuration,s=Promise.resolve();return y=!e,e&&(s=g=function(){return N.length?function(){return p.removeExternalEventFilter(L),f.clear(),p.off(a.PlayerEvent.Warning,S),p.off(a.PlayerEvent.Playing,U),p.unload().then(O)}():(p.fireEvent(a.PlayerEvent.RestoringContent),p.addExternalEventFilter(D),f.restore(c.ADVERTISING_RESTORE_ISSUER_NAME).then((function(e){if(p.removeExternalEventFilter(L),N.length&&O(),R)R=!1;else{if(e)return p.play(c.ADVERTISING_ISSUER_NAME).catch((function(e){P=!0,t.context.logger.debug("Unable to start playback after restoring the content after an ad break:",e)}));var r=t.context.serviceManager.get(o.ServiceName.PlayerStateService);null==r||r.transitionToStoppedState()}})).catch((function(){return p.fireEvent(a.PlayerEvent.Error,{code:i.ErrorCode.UNKNOWN})})).finally((function(){f.clear(),p.removeExternalEventFilter(D),p.off(a.PlayerEvent.Warning,S),p.off(a.PlayerEvent.Playing,U)})))}().then((function(){t.restoreContentDeferred&&t.restoreContentDeferred.resolve()}))),s.then((function(){var i=r?{adBreak:r}:void 0;p.fireEvent(a.PlayerEvent.AdBreakFinished,i),r=null,e&&(0,l.maybeFireDurationChangedEvent)(n,p.getDuration(),t.context.eventHandler),p.hasCurrentSourcePlayedOnce()||P||p.fireEvent(a.PlayerEvent.Playing,{time:p.getCurrentTime(),issuer:c.ADVERTISING_ISSUER_NAME}),P=!1}))},C=[a.PlayerEvent.Error,a.PlayerEvent.SourceLoaded,a.PlayerEvent.SourceUnloaded,a.PlayerEvent.PlaybackFinished,a.PlayerEvent.Ready],L=function(e,r){var n=function(){var e=t.context.store.getState();return(null==e?void 0:e.sources)&&Object.keys(e.sources).find((function(t){var r;return e.sources&&e.sources[t]&&(null===(r=e.sources[t].playback)||void 0===r?void 0:r.kind)===d.PlaybackKind.Background}))}();return T(e,r)&&n&&r.sourceIdentifier===n&&N.push(r),!C.includes(e)},k=[a.PlayerEvent.Play,a.PlayerEvent.Playing,a.PlayerEvent.Seek,a.PlayerEvent.Seeked,a.PlayerEvent.TimeShift,a.PlayerEvent.TimeShifted],D=function(e){return!k.includes(e)};this.requestAdPlayback=function(e){return r?Promise.reject("Ad break already in progress"):(r=e,g.then((function(){var t=y?Promise.resolve():M(e),r={adBreak:n(n({},JSON.parse(JSON.stringify(e))),{scheduleTime:e.scheduleTime})};return p.fireEvent(a.PlayerEvent.AdBreakStarted,r),p.onInternal(a.PlayerEvent.Warning,S),p.onInternal(a.PlayerEvent.Playing,U),t.then((function(){return p.unload(c.ADVERTISING_ISSUER_NAME)})).then((function(){return h.AdPlaybackFactory.create(p,I)}))})))};var M=function(r){var n=t.context,i=n.sourceContext.sourceIdentifier,a=n.adRestorationOptimizationService,s=n.serviceManager.get(o.ServiceName.ManifestService,i),l=a&&n.settings.OPTIMIZE_AD_RESTORATION,u=e.getAdBreakDuration(r),c=r.replaceContentDuration;return f.store(u,c),p.addExternalEventFilter(L),l&&s&&!s.isLive()?a.optimizeRestorationAfterUpcomingAdBreak():Promise.resolve()};this.overlayAdStarted=function(e){p.fireEvent(a.PlayerEvent.OverlayAdStarted,{ad:e})},this.adClicked=function(e){p.fireEvent(a.PlayerEvent.AdClicked,{clickThroughUrl:e})},this.adInteraction=function(e,t){p.fireEvent(a.PlayerEvent.AdInteraction,{interactionType:e,id:t})},this.onQuartile=function(e){p.fireEvent(a.PlayerEvent.AdQuartile,{quartile:e})},this.onError=function(e,t,r){var n={code:e||m.VastErrorCode.UNDEFINED_ERROR};t&&(n.message=t),r&&(n.adConfig=r),p.fireEvent(a.PlayerEvent.AdError,{code:i.ErrorCode.MODULE_ADVERTISING_ERROR,data:n,name:i.ErrorCode[i.ErrorCode.MODULE_ADVERTISING_ERROR],message:t,troubleShootLink:(0,s.generateTroubleshootUrl)(i.ErrorCode.MODULE_ADVERTISING_ERROR)})},this.onWarning=function(e,t,r){p.fireEvent(a.PlayerEvent.Warning,new u.PlayerWarning(e,t,r))},this.reset=function(){var t=p.getVideoElement();y=!1,R=!1,f.clear(),p.removeExternalEventFilter(L),p.removeExternalEventFilter(D),r=null,t instanceof HTMLVideoElement&&e.clearVideoElement(t)}}return e.getAdBreakDuration=function(e){var t;return(null===(t=e.ads)||void 0===t?void 0:t.reduce((function(e,t){return t.isLinear&&(e+=t.duration),e}),0))||0},e.parsePosition=function(e,t){var r=Number(e);return!isNaN(r)&&r<=0&&(e="pre"),e.includes("pre")||"0%"===e?0:e.includes("post")?1/0:this.parseNumericalPosition(e,t)},e.parseNumericalPosition=function(e,t){var r;if(/%/.test(e)){if(!t)return NaN;e=e.replace(/%/gi,""),r=parseFloat(e)/100*t}else if(e.indexOf(":")>-1){var n=e.split(":");r=3600*parseFloat(n[0])+60*parseFloat(n[1])+parseFloat(n[2])}else r=parseFloat(e);return r>=0?r:NaN},e.clearVideoElement=function(e){f.VideoElementUtil.removeSource(e),e.load()},e}();t.AdPlayerDelegate=g;var y=/(\d+)/;function A(e){return Number(e.match(y)?e.match(y)[0]:0)}var T=function(e,t){return e===a.PlayerEvent.Error&&(0,p.isObject)(t)&&t.type===a.PlayerEvent.Error}},45392:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AdManifestHelper=void 0,t.pingVmapTrackingUrls=function(e,t){void 0===e&&(e=[]),e.filter((function(e){return e.type===t})).forEach((function(e){return function(e){(new Image).src=e}(e.url)}))};var n=r(70850),i=r(88457),o=r(60326),a=r(47091),s=function(){function e(){}return e.setLoader=function(t){e.loader=t},e.setVideoLoadTimeout=function(t){e.videoLoadTimeout=t},e.setWithCredentials=function(t){e.withCredentials=t},e.setDisableStorage=function(t){e.disableStorage=t},e.downloadVastManifest=function(t){return e.domParser||(e.domParser=new DOMParser),e.loader.load(t,void 0,void 0,void 0,void 0,e.withCredentials).catch((function(){return Promise.reject({code:i.AdvertisingModuleErrorCode.COULD_NOT_LOAD_AD_MANIFEST})})).then((function(t){var r;if(!t.body)return Promise.reject({code:a.VastErrorCode.XML_PARSING_ERROR});var n=e.domParser.parseFromString(t.body,"text/xml"),o=null===(r=n.childNodes[0].childNodes[0])||void 0===r?void 0:r.nodeName.includes("Error"),s=void 0===o||o,l=n.childNodes[0].nodeName.includes("error");if(n.childNodes[0].nodeName.includes("VMAP"))return Promise.reject({code:i.AdvertisingModuleErrorCode.AD_TAG_TYPE_NOT_MATCHING});if(s)return Promise.reject({code:a.VastErrorCode.NO_ADS_VAST_RESPONSE});if(l)return Promise.reject({code:a.VastErrorCode.XML_PARSING_ERROR});var u={downloadTime:t.elapsedTime,timeToFirstByte:t.timeToFirstByte};return Promise.resolve({manifest:n,downloadTiming:u})}))},e.downloadVmapManifest=function(t){return e.loader.load(t,void 0,void 0,void 0,void 0,e.withCredentials)},e.parseAdVerifications=function(t){return e.vastClientWrapper||(e.vastClientWrapper=new o.VastClientWrapper(e.videoLoadTimeout,e.withCredentials,e.disableStorage)),e.vastClientWrapper.parseManifest(t,!1).then((function(e){if(e.ads.length<1)return Promise.resolve([]);var t=e.ads.map((function(e){return{id:e.id||"adVerification-"+n.Util.generateUniqueId(),verifications:e.verifications}}));return Promise.resolve(t)})).catch((function(e){return Promise.resolve([])}))},e.xmlToString=function(e){return(new XMLSerializer).serializeToString(e.documentElement)},e.toDataUri=function(e){return"data:text/xml,"+encodeURIComponent(e)},e}();t.AdManifestHelper=s},47091:function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.VastErrorCode=void 0,function(e){e[e.XML_PARSING_ERROR=100]="XML_PARSING_ERROR",e[e.VAST_SCHEMA_VALIDATION_ERROR=101]="VAST_SCHEMA_VALIDATION_ERROR",e[e.VERSION_NOT_SUPPORTED=102]="VERSION_NOT_SUPPORTED",e[e.TRAFFICKING_ERROR=200]="TRAFFICKING_ERROR",e[e.EXPECTING_DIFFERENT_LINEARITY=201]="EXPECTING_DIFFERENT_LINEARITY",e[e.EXPECTING_DIFFERENT_DURATION=202]="EXPECTING_DIFFERENT_DURATION",e[e.EXPECTING_DIFFERENT_SIZE=203]="EXPECTING_DIFFERENT_SIZE",e[e.GENERAL_WRAPPER_ERROR=300]="GENERAL_WRAPPER_ERROR",e[e.WRAPPER_VAST_URI_TIMEOUT=301]="WRAPPER_VAST_URI_TIMEOUT",e[e.WRAPPER_LIMIT_REACHED=302]="WRAPPER_LIMIT_REACHED",e[e.NO_ADS_VAST_RESPONSE=303]="NO_ADS_VAST_RESPONSE",e[e.GENERAL_LINEAR_ERROR=400]="GENERAL_LINEAR_ERROR",e[e.FILE_NOT_FOUND=401]="FILE_NOT_FOUND",e[e.MEDIAFILE_URI_TIMEOUT=402]="MEDIAFILE_URI_TIMEOUT",e[e.NO_SUPPORTED_MEDIAFILE=403]="NO_SUPPORTED_MEDIAFILE",e[e.PROBLEM_DISPLAYING_MEDIAFILE=405]="PROBLEM_DISPLAYING_MEDIAFILE",e[e.GENERAL_NONLINEARADS_ERROR=500]="GENERAL_NONLINEARADS_ERROR",e[e.NONLINEAR_AD_INVALID_DIMENSIONS=501]="NONLINEAR_AD_INVALID_DIMENSIONS",e[e.UNABLE_TO_FETCH_NONLINEAR_RESOURCE=502]="UNABLE_TO_FETCH_NONLINEAR_RESOURCE",e[e.NO_SUPPORTED_NONLINEAR_RESOURCE_TYPE=503]="NO_SUPPORTED_NONLINEAR_RESOURCE_TYPE",e[e.GENERAL_COMPANIONADS_ERROR=600]="GENERAL_COMPANIONADS_ERROR",e[e.COMPANION_AD_INVALID_DIMENSIONS=601]="COMPANION_AD_INVALID_DIMENSIONS",e[e.UNABLE_TO_DISPLAY_REQUIRED_COMPANION=602]="UNABLE_TO_DISPLAY_REQUIRED_COMPANION",e[e.UNABLE_TO_FETCH_COMPANION_RESOURCE=603]="UNABLE_TO_FETCH_COMPANION_RESOURCE",e[e.NO_SUPPORTED_COMPANION_RESOURCE_TYPE=604]="NO_SUPPORTED_COMPANION_RESOURCE_TYPE",e[e.UNDEFINED_ERROR=900]="UNDEFINED_ERROR",e[e.GENERAL_VPAID_ERROR=901]="GENERAL_VPAID_ERROR"}(r||(t.VastErrorCode=r={}))},50199:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Icon=void 0;var r=function(){return function(){this.program=null,this.height=0,this.width=0,this.xPosition=0,this.yPosition=0,this.apiFramework=null,this.offset=null,this.duration=0,this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.iconClickThroughURLTemplate=null,this.iconClickTrackingURLTemplates=[],this.iconViewTrackingURLTemplate=null}}();t.Icon=r},52448:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AdPlayerFactory=t.DEFAULT_AD_PLAYBACK_RATE=void 0;var n=r(40306),i=r(3714),o=r(75375),a=r(19483),s=r(85434),l=r(6365),u=r(7581);t.DEFAULT_AD_PLAYBACK_RATE=1;var c=function(){function e(){}return e.createAdPlayer=function(e,r){var c,d=new a.ArrayMap,p=!1,f=!1,h=[i.PlayerEvent.Play,i.PlayerEvent.Playing],v=function(){if(f)throw"AdPlayer is no longer usable. Request a new one."};return new(function(){function a(){this.adPlaybackStartEventFilter=function(t){return!e.hasCurrentSourcePlayedOnce()||!h.includes(t)}}return a.prototype.done=function(){v();var t=Promise.resolve();return p?t=e.unload(o.ADVERTISING_ISSUER_NAME):e.hasEnded()?function(e,t){e.fireEvent(i.PlayerEvent.AdFinished,{ad:t})}(e,c):function(e,t){e.fireEvent(i.PlayerEvent.AdSkipped,{ad:t})}(e,c),c=null,d.forAll((function(t,r){e.off(t,r)})),r(),f=!0,p=!1,t},a.prototype.on=function(t,r){v(),d.add(t,r),e.onInternal(t,r)},a.prototype.pause=function(){v(),e.pause(o.ADVERTISING_ISSUER_NAME)},a.prototype.play=function(){return v(),e.play(o.ADVERTISING_ISSUER_NAME)},a.prototype.load=function(r,a){var d=this;return v(),c=r,e.addExternalEventFilter(this.adPlaybackStartEventFilter),p=!0,e.load(function(e){return e.data.delivery===l.MediaFileDeliveryType.Streaming?s.MimeTypeHelper.isDash(e.data.mimeType)?{dash:e.mediaFileUrl}:{hls:e.mediaFileUrl}:{progressive:e.mediaFileUrl}}(r),void 0,null!=a?a:{seeking:!0},o.ADVERTISING_ISSUER_NAME).then((function(){return e.setPlaybackSpeed(t.DEFAULT_AD_PLAYBACK_RATE)})).then((function(){return e.play(o.ADVERTISING_ISSUER_NAME).catch((function(){}))})).then((function(){p&&e.fireEvent(i.PlayerEvent.AdStarted,{ad:r})})).catch((function(t){if(t&&t.code===n.ErrorCode.MODULE_MISSING)throw{code:u.AdvertisingModuleErrorCode.REQUIRED_PLAYER_MODULE_MISSING,message:t.data.name};throw e.getLogger().debug("Failed to load Ad due to error: ".concat(null==t?void 0:t.message),t),t})).finally((function(){e.removeExternalEventFilter(d.adPlaybackStartEventFilter),p=!1}))},Object.defineProperty(a.prototype,"duration",{get:function(){return v(),e.getDuration(o.ADVERTISING_ISSUER_NAME)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"currentTime",{get:function(){return v(),e.getCurrentTime(o.ADVERTISING_ISSUER_NAME)},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"volume",{get:function(){return v(),e.getVolume()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"muted",{get:function(){return v(),e.isMuted()},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"paused",{get:function(){v();var t=e.isContentPaused(),r=e.isContentPlaying();return!1===t&&!1===r||t},enumerable:!1,configurable:!0}),a}())},e}();t.AdPlayerFactory=c},57219:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.NonLinearAd=void 0;var r=function(){return function(){this.id=null,this.width=0,this.height=0,this.expandedWidth=0,this.expandedHeight=0,this.scalable=!0,this.maintainAspectRatio=!0,this.minSuggestedDuration=0,this.apiFramework="static",this.type=null,this.staticResource=null,this.htmlResource=null,this.iframeResource=null,this.nonlinearClickThroughURLTemplate=null,this.nonlinearClickTrackingURLTemplates=[],this.adParameters=null}}();t.NonLinearAd=r},60326:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.VastClientWrapper=void 0;var n=r(6036),i=r(6365),o=r(47091),a=function(){function e(e,t,r){this.FK=new n.VASTClient({allowUsingBrowserStorageApi:!r}),this.FK.vastParser.initParsingStatus(),this.GK=e||i.DEFAULT_VIDEO_LOAD_TIMEOUT,this.HK=t}return e.prototype.parseManifest=function(e,t){var r=this,n=[],i=function(e){n.push({code:e.ERRORCODE})};return this.FK.vastParser.addListener("VAST-error",i),this.FK.vastParser.parseVAST(e,{timeout:this.GK,withCredentials:this.HK,replaceUnavailableAdPodAds:!t}).catch((function(e){return r.FK.vastParser.removeListener("VAST-error",i),Promise.reject({code:e&&e.ERRORCODE||o.VastErrorCode.UNDEFINED_ERROR})})).then((function(e){var t;return r.FK.vastParser.removeListener("VAST-error",i),(null===(t=e.ads)||void 0===t?void 0:t.length)>0?e:n.length>0?Promise.reject(n[0]):Promise.reject({code:o.VastErrorCode.UNDEFINED_ERROR})}))},e}();t.VastClientWrapper=a},60937:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AdPlaybackReporter=void 0;var n=r(3714),i=r(75375),o=r(19483),a=function(){return function(e,t){var r=this,a=new o.ArrayMap;this.videoElement=e.getVideoElement();var s=!1,l=function(){if(s)throw"AdPlaybackReporter is no longer usable. Request a new one."},u=this.videoElement.addEventListener;this.videoElement.addEventListener=function(e,t,n){a.add(e,t),u.apply(r.videoElement,[e,t,n])},this.started=function(t){if(l(),r.S3)throw"Ad playback is already in progress. A new one can not be started.";r.S3=t,r.T3=!1,e.hasCurrentSourcePlayedOnce()||e.fireEvent(n.PlayerEvent.Playing,{time:e.getCurrentTime(),issuer:i.ADVERTISING_ISSUER_NAME}),e.fireEvent(n.PlayerEvent.AdStarted,{ad:t})},this.paused=function(t){l(),e.fireEvent(n.PlayerEvent.Paused,{time:t,issuer:i.ADVERTISING_ISSUER_NAME})},this.resumed=function(t){l(),e.fireEvent(n.PlayerEvent.Play,{time:t,issuer:i.ADVERTISING_ISSUER_NAME}),e.fireEvent(n.PlayerEvent.Playing,{time:t,issuer:i.ADVERTISING_ISSUER_NAME})},this.timeupdate=function(t){l(),e.fireEvent(n.PlayerEvent.TimeChanged,{time:t,issuer:i.ADVERTISING_ISSUER_NAME})},this.skipped=function(){r.T3||(l(),e.fireEvent(n.PlayerEvent.AdSkipped,{ad:r.S3}),r.T3=!0,r.S3=null)},this.done=function(){return l(),a.forAll((function(e,t){r.videoElement.removeEventListener(e,t),r.videoElement.addEventListener=u})),!r.T3&&r.S3&&e.fireEvent(n.PlayerEvent.AdFinished,{ad:r.S3}),r.S3=null,t(),s=!0,Promise.resolve()}}}();t.AdPlaybackReporter=a},63207:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.Ad=void 0;var r=function(){return function(){this.id=null,this.wrapperAdIds=[],this.sequence=null,this.system=null,this.title=null,this.description=null,this.advertiser=null,this.pricing=null,this.survey=null,this.errorURLTemplates=[],this.impressionURLTemplates=[],this.creatives=[],this.extensions=[],this.verifications=[]}}();t.Ad=r},63524:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AdPlaybackFactory=void 0;var n=r(60937),i=r(52448),o=function(){function e(){}return e.create=function(e,t){var r=!1,o=function(){r=!1},a=function(e){var t="The current ad playback has to be finished by calling ".concat(e,".done(), before a new one can be requested.");return Promise.reject(t)};return new(function(){function s(){}return s.prototype.requestPlayer=function(){return r?a("AdPlayerAPI"):(r=!0,Promise.resolve(i.AdPlayerFactory.createAdPlayer(e,o)))},s.prototype.requestReporter=function(){return r?a("AdPlaybackReportingAPI"):(r=!0,Promise.resolve(new n.AdPlaybackReporter(e,o)))},s.prototype.done=function(e){return void 0===e&&(e=!0),t(e)},s}())},e}();t.AdPlaybackFactory=o},64815:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCreativeNonLinear=function(e,t){var r=new n.CreativeNonLinear(t);return o.parserUtils.childrenByName(e,"TrackingEvents").forEach((function(e){var t,n;o.parserUtils.childrenByName(e,"Tracking").forEach((function(e){t=e.getAttribute("event"),n=o.parserUtils.parseNodeText(e),t&&n&&(null==r.trackingEvents[t]&&(r.trackingEvents[t]=[]),r.trackingEvents[t].push(n))}))})),o.parserUtils.childrenByName(e,"NonLinear").forEach((function(e){var t=new i.NonLinearAd;t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.expandedWidth=e.getAttribute("expandedWidth"),t.expandedHeight=e.getAttribute("expandedHeight"),t.scalable=o.parserUtils.parseBoolean(e.getAttribute("scalable")),t.maintainAspectRatio=o.parserUtils.parseBoolean(e.getAttribute("maintainAspectRatio")),t.minSuggestedDuration=o.parserUtils.parseDuration(e.getAttribute("minSuggestedDuration")),t.apiFramework=e.getAttribute("apiFramework"),o.parserUtils.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=o.parserUtils.parseNodeText(e)})),o.parserUtils.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=o.parserUtils.parseNodeText(e)})),o.parserUtils.childrenByName(e,"StaticResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.staticResource=o.parserUtils.parseNodeText(e)}));var n=o.parserUtils.childByName(e,"AdParameters");n&&(t.adParameters=o.parserUtils.parseNodeText(n)),t.nonlinearClickThroughURLTemplate=o.parserUtils.parseNodeText(o.parserUtils.childByName(e,"NonLinearClickThrough")),o.parserUtils.childrenByName(e,"NonLinearClickTracking").forEach((function(e){t.nonlinearClickTrackingURLTemplates.push(o.parserUtils.parseNodeText(e))})),r.variations.push(t)})),r};var n=r(35475),i=r(57219),o=r(75065)},65185:function(e,t){function r(e){return e.bitrate||(e.maxBitrate+e.minBitrate)/2}Object.defineProperty(t,"__esModule",{value:!0}),t.findMediaFileByResolution=function(e,t,r){return r.reduce((function(r,n){var i=Math.abs(e-r.width)+Math.abs(t-r.height);return Math.abs(e-n.width)+Math.abs(t-n.height)<i?n:r}))},t.findMediaFileByBitrate=function(e,t){return t.reduce((function(t,n){var i=r(t),o=r(n),a=Math.abs(i-e);return Math.abs(o-e)<a?n:t}))}},71076:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.VASTResponse=void 0;var r=function(){return function(){this.ads=[],this.errorURLTemplates=[]}}();t.VASTResponse=r},71119:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseAd=function(e){var t=e.childNodes;for(var r in t){var n=t[r];if(-1!==["Wrapper","InLine"].indexOf(n.nodeName)){if(l.parserUtils.copyNodeAttribute("id",e,n),l.parserUtils.copyNodeAttribute("sequence",e,n),"Wrapper"===n.nodeName)return c(n);if("InLine"===n.nodeName)return u(n)}}},t.parseExtensions=d;var n=r(63207),i=r(19637),o=r(93088),a=r(2035),s=r(64815),l=r(75065);function u(e){var t=e.childNodes,r=new n.Ad;for(var i in r.id=e.getAttribute("id")||null,r.sequence=e.getAttribute("sequence")||null,t){var u=t[i];switch(u.nodeName){case"Error":r.errorURLTemplates.push(l.parserUtils.parseNodeText(u));break;case"Impression":r.impressionURLTemplates.push(l.parserUtils.parseNodeText(u));break;case"Creatives":l.parserUtils.childrenByName(u,"Creative").forEach((function(e){var t={id:e.getAttribute("id")||null,adId:h(e),sequence:e.getAttribute("sequence")||null,apiFramework:e.getAttribute("apiFramework")||null};for(var n in e.childNodes){var i=e.childNodes[n];switch(i.nodeName){case"UniversalAdId":t.universalAdId=v(i);break;case"Linear":var l=(0,a.parseCreativeLinear)(i,t);l&&r.creatives.push(l);break;case"NonLinearAds":var u=(0,s.parseCreativeNonLinear)(i,t);u&&r.creatives.push(u);break;case"CompanionAds":var c=(0,o.parseCreativeCompanion)(i,t);c&&r.creatives.push(c)}}}));break;case"Extensions":r.extensions=d(l.parserUtils.childrenByName(u,"Extension"),r);break;case"AdSystem":r.system={value:l.parserUtils.parseNodeText(u),version:u.getAttribute("version")||null};break;case"AdTitle":r.title=l.parserUtils.parseNodeText(u);break;case"Description":r.description=l.parserUtils.parseNodeText(u);break;case"Advertiser":r.advertiser={name:l.parserUtils.parseNodeText(u),id:u.getAttribute("id")||null};break;case"Pricing":r.pricing={value:l.parserUtils.parseNodeText(u),model:u.getAttribute("model")||null,currency:u.getAttribute("currency")||null};break;case"Survey":r.survey={uri:l.parserUtils.parseNodeText(u),type:u.getAttribute("type")||null};break;case"AdVerifications":f(r.verifications,l.parserUtils.childrenByName(u,"Verification"))}}return r}function c(e){var t=u(e),r=l.parserUtils.childByName(e,"VASTAdTagURI");if(r?t.nextWrapperURL=l.parserUtils.parseNodeText(r):(r=l.parserUtils.childByName(e,"VASTAdTagURL"))&&(t.nextWrapperURL=l.parserUtils.parseNodeText(l.parserUtils.childByName(r,"URL"))),t.creatives.forEach((function(e){if(-1!==["linear","nonlinear"].indexOf(e.type)){if(e.trackingEvents){t.trackingEvents||(t.trackingEvents={}),t.trackingEvents[e.type]||(t.trackingEvents[e.type]={});var r=function(r){var n=e.trackingEvents[r];t.trackingEvents[e.type][r]||(t.trackingEvents[e.type][r]=[]),n.forEach((function(n){t.trackingEvents[e.type][r].push(n)}))};for(var n in e.trackingEvents)r(n)}e.videoClickTrackingURLTemplates&&(t.videoClickTrackingURLTemplates||(t.videoClickTrackingURLTemplates=[]),e.videoClickTrackingURLTemplates.forEach((function(e){t.videoClickTrackingURLTemplates.push(e)}))),e.videoClickThroughURLTemplate&&(t.videoClickThroughURLTemplate=e.videoClickThroughURLTemplate),e.videoCustomClickURLTemplates&&(t.videoCustomClickURLTemplates||(t.videoCustomClickURLTemplates=[]),e.videoCustomClickURLTemplates.forEach((function(e){t.videoCustomClickURLTemplates.push(e)})))}})),t.nextWrapperURL)return t}function d(e,t){var r=[];return e.forEach((function(e){var n=p(e,t);n&&r.push(n)})),r}function p(e,t){if("#comment"===e.nodeName)return null;var r=new i.AdExtension,n=e.attributes,o=e.childNodes;if(r.name=e.nodeName,e.attributes)for(var a in n)if(n.hasOwnProperty(a)){var s=n[a];s.nodeName&&s.nodeValue&&(r.attributes[s.nodeName]=s.nodeValue)}for(var u in o)if(o.hasOwnProperty(u)){if("AdVerifications"===o[u].nodeName){f(t.verifications,l.parserUtils.childrenByName(o[u],"Verification"));continue}var c=p(o[u],t);c&&r.children.push(c)}if(0===r.children.length||1===r.children.length&&["#cdata-section","#text"].indexOf(r.children[0].name)>=0){var d=l.parserUtils.parseNodeText(e);""!==d&&(r.value=d),r.children=[]}return r.isEmpty()?null:r}function f(e,t){var r=["Verification","JavaScriptResource","ExecutableResource","TrackingEvents","Tracking","VerificationParameters"],n=function(e){var t={},i=l.parserUtils.parseNodeText(e);return Object.keys(e.attributes).forEach((function(r){var n=e.attributes[r].nodeName,i=e.attributes[r].nodeValue;n&&i&&(t[n]=i)})),"#comment"!==e.nodeName&&""!==i&&(e.children&&e.children.length>0?e.childNodes.forEach((function(e){r.includes(e.nodeName)&&(t[e.nodeName]||(t[e.nodeName]=[]),t[e.nodeName].push(n(e)))})):t.content=i),t};t.forEach((function(t){var r=n(t);e.push(r)}))}function h(e){return e.getAttribute("AdID")||e.getAttribute("adID")||e.getAttribute("adId")||null}function v(e){return{idRegistry:e.getAttribute("idRegistry")||"unknown",value:l.parserUtils.parseNodeText(e)||"unknown"}}},75065:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parserUtils=void 0;var n=r(11417);t.parserUtils={childByName:function(e,t){var r=e.childNodes;for(var n in r){var i=r[n];if(i.nodeName===t)return i}},childrenByName:function(e,t){var r=[],n=e.childNodes;for(var i in n){var o=n[i];o.nodeName===t&&r.push(o)}return r},resolveVastAdTagURI:function(e,t){if(!t)return e;if(0===e.indexOf("//")){var r=location.protocol;return"".concat(r).concat(e)}if(-1===e.indexOf("://")){var n=t.slice(0,t.lastIndexOf("/"));return"".concat(n,"/").concat(e)}return e},parseBoolean:function(e){return-1!==["true","TRUE","1"].indexOf(e)},parseNodeText:function(e){return e&&(e.textContent||e.text||"").trim()},copyNodeAttribute:function(e,t,r){var n=t.getAttribute(e);n&&r.setAttribute(e,n)},parseDuration:function(e){if(null==e)return-1;if(n.util.isNumeric(e))return parseInt(e);var t=e.split(":");if(3!==t.length)return-1;var r=t[2].split("."),i=parseInt(r[0]);2===r.length&&(i+=parseFloat("0.".concat(r[1])));var o=parseInt(60*t[1]),a=parseInt(60*t[0]*60);return isNaN(a)||isNaN(o)||isNaN(i)||o>3600||i>60?-1:a+o+i},splitVAST:function(e){var t=[],r=null;return e.forEach((function(n,i){if(n.sequence&&(n.sequence=parseInt(n.sequence,10)),n.sequence>1){var o=e[i-1];if(o&&o.sequence===n.sequence-1)return void(r&&r.push(n));delete n.sequence}r=[n],t.push(r)})),t},mergeWrapperAdData:function(e,t){if(e.errorURLTemplates=t.errorURLTemplates.concat(e.errorURLTemplates),e.impressionURLTemplates=t.impressionURLTemplates.concat(e.impressionURLTemplates),e.extensions=t.extensions.concat(e.extensions),e.verifications=t.verifications.concat(e.verifications),e.wrapperAdIds.push(t.id),e.creatives.forEach((function(e){if(t.trackingEvents&&t.trackingEvents[e.type])for(var r in t.trackingEvents[e.type]){var n=t.trackingEvents[e.type][r];e.trackingEvents[r]||(e.trackingEvents[r]=[]),e.trackingEvents[r]=e.trackingEvents[r].concat(n)}})),t.videoClickTrackingURLTemplates&&t.videoClickTrackingURLTemplates.length&&e.creatives.forEach((function(e){"linear"===e.type&&(e.videoClickTrackingURLTemplates=e.videoClickTrackingURLTemplates.concat(t.videoClickTrackingURLTemplates))})),t.videoCustomClickURLTemplates&&t.videoCustomClickURLTemplates.length&&e.creatives.forEach((function(e){"linear"===e.type&&(e.videoCustomClickURLTemplates=e.videoCustomClickURLTemplates.concat(t.videoCustomClickURLTemplates))})),t.videoClickThroughURLTemplate&&e.creatives.forEach((function(e){"linear"===e.type&&null==e.videoClickThroughURLTemplate&&(e.videoClickThroughURLTemplate=t.videoClickThroughURLTemplate)})),e.fallbackAdSequence&&e.sequence!==e.fallbackAdSequence){if(!t.sequence&&!t.fallbackAdSequence)return;e.sequence=null,e.fallbackAdSequence=t.fallbackAdSequence||t.sequence}else if(t.fallbackAdSequence)e.sequence=null,e.fallbackAdSequence=t.fallbackAdSequence||t.sequence;else{if(!t.sequence&&!t.fallbackAdSequence)return;e.sequence=t.sequence}}}},77615:function(e,t,r){var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeLinear=void 0;var i=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;return r.type="linear",r.duration=0,r.skipDelay=null,r.mediaFiles=[],r.videoClickThroughURLTemplate=null,r.videoClickTrackingURLTemplates=[],r.videoCustomClickURLTemplates=[],r.adParameters=null,r.icons=[],r}return n(t,e),t}(r(36828).Creative);t.CreativeLinear=i},81214:function(e,t,r){var n=this&&this.__extends||function(){var e=function(t,r){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},e(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0}),t.CreativeCompanion=void 0;var i=function(e){function t(t){void 0===t&&(t={});var r=e.call(this,t)||this;return r.type="companion",r.variations=[],r}return n(t,e),t}(r(36828).Creative);t.CreativeCompanion=i},82664:function(e,t){Object.defineProperty(t,"__esModule",{value:!0}),t.flashURLHandler=void 0,t.flashURLHandler={get:function(e,t,r){var n="function"==typeof window.ActiveXObject?new window.ActiveXObject("Microsoft.XMLDOM"):void 0;if(!n)return r(new Error("FlashURLHandler: Microsoft.XMLDOM format not supported"));n.async=!1;var i=i();request.open("GET",e),request.timeout=t.timeout||0,request.withCredentials=t.withCredentials||!1,request.send(),request.onprogress=function(){},request.onload=function(){n.loadXML(request.responseText),r(null,n)}},supported:function(){return!!function(){var e;return window.XDomainRequest&&(e=new XDomainRequest),e}()}}},85939:function(e,t,r){var n=this&&this.__assign||function(){return n=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var i in t=arguments[r])Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},n.apply(this,arguments)};Object.defineProperty(t,"__esModule",{value:!0}),t.PlayerStateStore=void 0;var i=r(3714),o=r(75375),a=r(44468),s=r(15487),l=r(88844),u=r(19274),c=r(80813),d=r(46922),p=r(81524),f=r(18192),h=r(93531),v=function(){function e(e,t){var r=this;this.context=e,this.internalPlayer=t,this.pJ=function(e){var t=e.subtitle;Boolean(r.jJ.find((function(e){return e.id===t.id})))&&(r.internalPlayer.enableSubtitle(t.id),r.jJ=r.jJ.filter((function(e){return e.id!==t.id})))},this.qJ=function(){r.internalPlayer.off(i.PlayerEvent.SubtitleAdded,r.pJ),r.internalPlayer.off(i.PlayerEvent.SourceUnloaded,r.qJ),r.jJ=[]},this.iJ=null,this.jJ=[],t.on(i.PlayerEvent.SubtitleAdded,this.pJ),t.on(i.PlayerEvent.SourceUnloaded,this.qJ)}return e.prototype.store=function(e,t){var r,i=this.internalPlayer.isLive(),a=i&&!this.context.settings.ENABLE_SEEK_FOR_LIVE,s={adBreakDuration:e,isLive:i,replaceContentDuration:t,playbackPosition:a?this.internalPlayer.getTimeShift():this.internalPlayer.getCurrentTime(o.ADVERTISING_ISSUER_NAME),resumeLiveContentAtPreviousPosition:this.context.settings.RESUME_LIVE_CONTENT_AT_PREVIOUS_POSITION_AFTER_AD_BREAK},l=a?(0,h.calculateTimeshiftRestorationPosition)(s):(0,h.calculatePlaybackRestorationPosition)(s);this.context.logger.debug("Storing content playback position",l),this.mJ().dispatch((0,d.setBackgroundPlaybackState)({kind:f.PlaybackKind.Background,position:l})),this.iJ={contentDuration:this.internalPlayer.getDuration(),source:this.internalPlayer.getSource(),loadOptions:this.internalPlayer.getLoadOptions(),hasEnded:this.internalPlayer.hasEnded(),isStartup:!this.internalPlayer.hasCurrentSourcePlayedOnce(),playbackSpeed:this.internalPlayer.getPlaybackSpeed(),subtitles:this.internalPlayer.listSubtitles().map((function(e){return n({},e)})),audioTrackId:null===(r=this.internalPlayer.getAudio())||void 0===r?void 0:r.id,audioQualityId:this.internalPlayer.getAudioQuality().id,videoQualityId:this.internalPlayer.getVideoQuality().id}},e.prototype.getStoredState=function(){return this.iJ},e.prototype.hasStoredState=function(){return null!=this.iJ},e.prototype.kJ=function(){var e=this,t=this.iJ.audioTrackId;if(null!=t){var r=function(){return!!e.internalPlayer.getAvailableAudio().find((function(e){return e.id===t}))&&(e.internalPlayer.setAudio(t),!0)};r()||(this.context.logger.log("Delaying audio track restore",t),this.oJ(r,i.PlayerEvent.AudioAdded))}},e.prototype.lJ=function(){var e=this,t=this.iJ.subtitles.map((function(t){var r=e.internalPlayer.listSubtitles().find((function(e){return e.id===t.id}));return r?!r.enabled&&t.enabled?e.internalPlayer.enableSubtitle(t.id,!1,!1).then((function(){})):Promise.resolve():t.url?(e.internalPlayer.addSubtitle(t),Promise.resolve()):t.enabled?(e.context.logger.log("Delaying subtitle restoration as track is not available yet",t),e.jJ.push(t),Promise.resolve()):Promise.resolve()}));return Promise.all(t).then((function(){}))},e.prototype.mJ=function(){return this.context.serviceManager.get(c.ServiceName.SourceStoreService,this.context.sourceContext.sourceIdentifier)},e.prototype.nJ=function(e){var t,r=this;if(this.iJ.isStartup)return Promise.resolve(!0);var n=(0,p.getPlaybackPosition)(this.mJ().getState().playback);if(this.internalPlayer.isLive()&&!this.context.settings.ENABLE_SEEK_FOR_LIVE)return this.internalPlayer.timeShift(n,e),Promise.resolve(!0);var o=(null===(t=this.context.renderer)||void 0===t?void 0:t.getDuration())||this.context.videoElement.duration||this.iJ.contentDuration||n;return n>=o?Promise.resolve(!1):new Promise((function(t){var o,u=function(){(0,l.clearTimeoutIfDefined)(o),r.internalPlayer.off(i.PlayerEvent.Seeked,u),t(!0)};r.internalPlayer.onInternal(i.PlayerEvent.Seeked,u),r.internalPlayer.getPlayerType()===a.PlayerType.Native&&((0,s.isWebOS)()||(0,s.isPlayStation4)())&&(o=window.setTimeout(u,5e3)),r.internalPlayer.seek(n,e)||u()}))},e.prototype.restore=function(e){var t=this;return this.hasStoredState()?Promise.resolve().then((function(){return t.internalPlayer.load(t.iJ.source,t.iJ.loadOptions.forceTechnology,t.iJ.loadOptions.restrictions,e)})).then((function(){t.internalPlayer.setPlaybackSpeed(t.iJ.playbackSpeed),t.kJ(),t.internalPlayer.setAudioQuality(t.iJ.audioQualityId),t.internalPlayer.setVideoQuality(t.iJ.videoQualityId)})).then((function(){return t.nJ(e)})).then((function(e){return t.lJ(),t.mJ().dispatch((0,d.setMainContentPlaybackState)({kind:f.PlaybackKind.MainContent})),t.clear(),e})):Promise.reject("no stored state to restore")},e.prototype.clear=function(){this.iJ=null},e.prototype.oJ=function(e,t,r,n){var o,a,s=this;void 0===n&&(n=2e3);var c=function(){var e;(0,l.clearTimeoutIfDefined)(a),s.internalPlayer.off(t,d),s.internalPlayer.off(i.PlayerEvent.SourceUnloaded,c),r?s.internalPlayer.off(r,c):null===(e=s.context.videoElement)||void 0===e||e.removeEventListener(u.MediaElementEvent.canplay,c)},d=function(t){e(t)&&c()};r?this.internalPlayer.onInternal(r,c):null===(o=this.context.videoElement)||void 0===o||o.addEventListener(u.MediaElementEvent.canplay,c),this.internalPlayer.onInternal(t,d),this.internalPlayer.onInternal(i.PlayerEvent.SourceUnloaded,c),a=setTimeout(c,n)},e}();t.PlayerStateStore=v},88457:function(e,t){var r;Object.defineProperty(t,"__esModule",{value:!0}),t.AdvertisingModuleErrorCode=void 0,function(e){e[e.AD_TAG_TYPE_NOT_MATCHING=110]="AD_TAG_TYPE_NOT_MATCHING",e[e.COULD_NOT_LOAD_AD_MANIFEST=404]="COULD_NOT_LOAD_AD_MANIFEST",e[e.REQUIRED_PLAYER_MODULE_MISSING=2e3]="REQUIRED_PLAYER_MODULE_MISSING"}(r||(t.AdvertisingModuleErrorCode=r={}))},90176:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.AdvertisingController=t.adTagPlaceholderDefaults=void 0,t.applyModuleSpecificConfig=y,t.createPlayerAdvertisingApi=A;var n=r(4224),i=r(3714),o=r(4129),a=r(29669),s=r(44468),l=r(87827),u=r(93204),c=r(94685),d=r(34841),p=r(88844),f=r(70850),h=r(88052),v=r(62756),E=r(45392),m={videoLoadTimeout:r(6365).DEFAULT_VIDEO_LOAD_TIMEOUT,strategy:{shouldPlayAdBreak:function(){return!0},shouldPlaySkippedAdBreaks:function(e){var t=Math.max.apply(Math,e.map((function(e){return e.scheduleTime})));return[e.find((function(e){return e.scheduleTime===t}))]}}};t.adTagPlaceholderDefaults={playbackTime:["[CONTENTPLAYHEAD]"],height:["[HEIGHT]"],width:["[WIDTH]"],domain:["[DOMAIN]"],page:["[SITE]"],referrer:["[REFERRER]"],random:["[random]","[CACHEBUSTING]"],timestamp:["[TIMESTAMP]"]};var g=function(){function e(e,t){var r=this;this.context=t,this.If=function(e){r.yf.isCastingToCAF()||r.Ef.onTimeChanged(e.time)},this.Jf=function(e){return r.Ef.onSeek(e.position,e.seekTarget)},this.Kf=function(e){return r.Hf=e.position},this.Lf=function(){return r.Jf({position:r.Hf,seekTarget:r.yf.getCurrentTime()})},this.Mf=function(e){r.Df&&e.code===n.WarningCode.PLAYBACK_COULD_NOT_BE_STARTED&&(r.Df=!1)},this.onVolumeChanged=function(e){return r.Ef.onVolumeChanged(e)},this.Nf=function(){r.Af.length>0&&r.Pf(r.Af.splice(0,r.Af.length)),r.yf.off(i.PlayerEvent.SourceLoaded,r.Nf)},this.onPlayerResize=function(e,t){r.Ef.onResize(e,t,r.yf.getViewMode()===s.ViewMode.Fullscreen)};var l=e.getConfig(!0);this.zf=l.advertising||{},this.yf=e,this.Af=[],this.Bf=null,this.Cf=!0,this.Df=!1;var u=function(e,t){var r,n,i={},o={};return f.Util.deepCopy(o,e),delete o.adBreaks,f.Util.deepCopyMulti(i,m,o),i.hasOwnProperty("withCredentials")||(i.withCredentials=!0),i.hasOwnProperty("disableStorageApi")||(i.disableStorageApi=null!==(n=null===(r=t.storage)||void 0===r?void 0:r.disableStorageApi)&&void 0!==n&&n),i}(this.zf,l);!function(e,t){E.AdManifestHelper.setLoader(new o.DefaultContentLoader(t,{requestType:a.HttpRequestType.MANIFEST_ADS})),E.AdManifestHelper.setVideoLoadTimeout(e.videoLoadTimeout),E.AdManifestHelper.setWithCredentials(e.withCredentials),E.AdManifestHelper.setDisableStorage(e.disableStorageApi)}(u,t),y(l,u,t.logger),this.createAdvertisingModule(u),this.zf.adBreaks&&this.zf.adBreaks.length>0&&this.zf.adBreaks.splice(0).forEach((function(e){return r.scheduleAd(e).catch((function(e){return r.context.logger.warn(e)}))})),this.yf.on(i.PlayerEvent.TimeChanged,this.If),this.yf.on(i.PlayerEvent.Seek,this.Jf),this.yf.on(i.PlayerEvent.Warning,this.Mf),this.yf.on(i.PlayerEvent.TimeShift,this.Kf),this.yf.on(i.PlayerEvent.TimeShifted,this.Lf),this.playerAdvertisingApi=A(this,this.Ef)}return e.prototype.createAdvertisingModule=function(e){this.Gf={internalPlayer:this.yf,context:this.context,restoreContentDeferred:null};var t=h.ModuleManager.get(v.ModuleName.AdvertisingCore),r=h.ModuleManager.get(v.ModuleName.Advertising),n=new t.AdPlayerDelegate(this.Gf);this.Ef=new r(n,e),this.Ff=n},e.prototype.updatePlayerContext=function(e){this.context=e,this.Gf.context=e},e.prototype.scheduleAd=function(e){return T(e)&&(e.discardAfterPlayback=!1!==e.discardAfterPlayback,this.Of(e)&&!this.Rf())?(this.Af.push(e),this.Bf||(this.Bf=new d.Deferred,this.yf.on(i.PlayerEvent.SourceLoaded,this.Nf)),this.Bf.promise):this.Qf(e)},e.prototype.Of=function(e){return e.position.includes("%")&&"0%"!==e.position},e.prototype.Pf=function(e){var t=this,r=e.map((function(e){return t.Qf(e)}));this.Bf&&Promise.all(r).then((function(e){var r=[].concat.apply([],e);t.Bf.resolve(r),t.Bf=null})).catch((function(e){return t.context.logger.warn(e)}))},e.prototype.Qf=function(e){return T(e)&&this.yf.isLive()&&this.Of(e)?Promise.reject("percentage based ad break positions can not be used for live streams"):this.Ef.schedule(e)},e.prototype.playPreRollAds=function(){var e,t,r=this,n=Promise.resolve();return this.Df=!0,this.Cf&&(null===(t=null===(e=this.context)||void 0===e?void 0:e.videoElement)||void 0===t?void 0:t.prime)&&(n=this.context.videoElement.prime()),Promise.resolve(this.Ef.beforeContent()).catch((function(e){(0,c.isContextAvailable)(r.context)&&r.context.logger.debug("Failed to trigger preroll ad playback: ",e)})).then((function(){return n})).catch((function(e){(0,c.isContextAvailable)(r.context)&&r.context.logger.debug("Failed to prime video element: ",e)}))},e.prototype.playPostRollAds=function(){var e=this,t=!1,r=function(){t=!0,e.yf.off(i.PlayerEvent.AdBreakStarted,r)};return this.yf.on(i.PlayerEvent.AdBreakStarted,r),this.Gf.restoreContentDeferred=new d.Deferred,Promise.resolve(this.Ef.afterContent()).then((function(){return new Promise((function(r,n){if(t){var i,o=function(){e.Gf.restoreContentDeferred.promise.then(r).catch(n),a(),(0,p.clearTimeoutIfDefined)(i)},a=(0,u.subscribe)(e.context.store)((function(e){return(0,l.getIsStopped)((0,l.getPlayerState)(e))}),o,(function(e){return e}));i=window.setTimeout(o,1e3)}else r()}))})).then((function(){return e.Gf.restoreContentDeferred=null})).catch((function(t){e.Gf.restoreContentDeferred=null,e.context.logger.debug(t)}))},e.prototype.hasAlreadyRequestedPreRollAds=function(){return this.Df},e.prototype.play=function(){return this.Ef.resume(),Promise.resolve()},e.prototype.pause=function(){this.Ef.pause()},e.prototype.getCurrentTime=function(){var e,t=null===(e=this.Ef)||void 0===e?void 0:e.currentTime();return isNaN(t)?0:null!=t?t:0},e.prototype.getDuration=function(){return this.Ef.duration()},e.prototype.isLinearAdActive=function(){return this.Ef.isLinearAdActive()},e.prototype.isPlaying=function(){return this.Ef.isLinearAdActive(!0)},e.prototype.isPaused=function(){return this.isLinearAdActive()&&!this.isPlaying()},e.prototype.Rf=function(){return this.yf.getDuration()>0},e.prototype.reset=function(){return this.Af=[],this.Df=!1,this.Ff.reset(),this.Ef.reset()},e.prototype.dispose=function(){this.yf.off(i.PlayerEvent.TimeChanged,this.If),this.yf.off(i.PlayerEvent.Seek,this.Jf),this.yf.off(i.PlayerEvent.Warning,this.Mf),this.yf.off(i.PlayerEvent.TimeShift,this.Kf),this.yf.off(i.PlayerEvent.TimeShifted,this.Lf),this.yf=null,this.zf=null,this.Ef.dispose(),this.Ef=null,this.Ff=null},e}();function y(e,t,r){if(Boolean(h.ModuleManager.get(v.ModuleName.Advertising).bitmovinMarker))return r.debug("Using Bitmovin Advertising Module"),void function(e,t){var r=t;e.playback&&Array.isArray(e.playback.preferredTech)?r.preferredTechnology=e.playback.preferredTech:r.preferredTechnology=[]}(e,t);Boolean(h.ModuleManager.get(v.ModuleName.Advertising).imaMarker)&&(r.debug("Using IMA Advertising Module"),function(e,t){var r=t;r.sdkUrl||(r.sdkUrl=e.location.google_ima)}(e,t))}function A(e,t){return new(function(){function r(){}return r.prototype.schedule=function(t){return e.scheduleAd(t)},r.prototype.skip=function(){return t.skip()},r.prototype.list=function(){return t.list()},r.prototype.getActiveAdBreak=function(){return t.getActiveAdBreak()},r.prototype.getActiveAd=function(){return t.getActiveAd()},r.prototype.discardAdBreak=function(e){t.discardAdBreak(e)},r.prototype.isLinearAdActive=function(){return t.isLinearAdActive()},r.prototype.getModuleInfo=function(){return t.getModuleInfo()},r}())}function T(e){return Boolean(e.position)}t.AdvertisingController=g},93088:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.parseCreativeCompanion=function(e,t){var r=new i.CreativeCompanion(t);return o.parserUtils.childrenByName(e,"Companion").forEach((function(e){var t=new n.CompanionAd;t.id=e.getAttribute("id")||null,t.width=e.getAttribute("width"),t.height=e.getAttribute("height"),t.companionClickTrackingURLTemplates=[],o.parserUtils.childrenByName(e,"HTMLResource").forEach((function(e){t.type=e.getAttribute("creativeType")||"text/html",t.htmlResource=o.parserUtils.parseNodeText(e)})),o.parserUtils.childrenByName(e,"IFrameResource").forEach((function(e){t.type=e.getAttribute("creativeType")||0,t.iframeResource=o.parserUtils.parseNodeText(e)})),o.parserUtils.childrenByName(e,"StaticResource").forEach((function(r){t.type=r.getAttribute("creativeType")||0,o.parserUtils.childrenByName(e,"AltText").forEach((function(e){t.altText=o.parserUtils.parseNodeText(e)})),t.staticResource=o.parserUtils.parseNodeText(r)})),o.parserUtils.childrenByName(e,"TrackingEvents").forEach((function(e){o.parserUtils.childrenByName(e,"Tracking").forEach((function(e){var r=e.getAttribute("event"),n=o.parserUtils.parseNodeText(e);r&&n&&(null==t.trackingEvents[r]&&(t.trackingEvents[r]=[]),t.trackingEvents[r].push(n))}))})),o.parserUtils.childrenByName(e,"CompanionClickTracking").forEach((function(e){t.companionClickTrackingURLTemplates.push(o.parserUtils.parseNodeText(e))})),t.companionClickThroughURLTemplate=o.parserUtils.parseNodeText(o.parserUtils.childByName(e,"CompanionClickThrough")),t.companionClickTrackingURLTemplate=o.parserUtils.parseNodeText(o.parserUtils.childByName(e,"CompanionClickTracking")),r.variations.push(t)})),r};var n=r(31472),i=r(81214),o=r(75065)},93531:function(e,t,r){Object.defineProperty(t,"__esModule",{value:!0}),t.calculatePlaybackRestorationPosition=function(e){var t=e.adBreakDuration,r=e.isLive,n=e.playbackPosition,i=e.replaceContentDuration,o=e.resumeLiveContentAtPreviousPosition;return n+(null!=i?i:!r||o?0:t)},t.calculateTimeshiftRestorationPosition=function(e){var t=e.adBreakDuration,r=e.playbackPosition,i=e.replaceContentDuration,o=e.resumeLiveContentAtPreviousPosition?t:0,a=(0,n.isDefined)(i)?t-i:o;return Math.min(r-a,0)};var n=r(23068)}},function(e){return function(){return e(e.s=7581)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["advertising-bitmovin"]=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player["advertising-bitmovin"]=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[860],{6341:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.AbstractOverlayAdManager=void 0;var r=i(6365),n=function(){function t(t,e){this.adContainer=t,this.isCustomAdContainer=e}return t.prototype.adjustAdContainer=function(t,e){this.adContainer.style.display="block",this.isCustomAdContainer||(this.adContainer.style.width=t+"px",this.adContainer.style.height=e+"px",this.adContainer.style.top="",this.adContainer.style.bottom=r.DEFAULT_OVERLAY_AD_BOTTOM_POSITION,this.adContainer.style.left="0",this.adContainer.style.right="0",this.adContainer.style.marginLeft="auto",this.adContainer.style.marginRight="auto")},t}();e.AbstractOverlayAdManager=n},10332:function(t,e,i){var r=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.VpaidOverlayAdManager=void 0;var n=i(3714),o=i(34841),a=i(88844),s=i(7581),u=i(6341),c=i(25534),d=i(61411),l=i(41680),h=function(t){function e(e,i,r){var u=t.call(this,e,i)||this;return u.G4=function(){u.stop(),u.x4.reject(s.VastErrorCode.UNABLE_TO_FETCH_NONLINEAR_RESOURCE)},u.H4=function(){(0,a.clearTimeoutIfDefined)(u.y4),u.y4=void 0,(0,a.clearTimeoutIfDefined)(u.A4),u.A4=window.setTimeout(u.J4,u.z4),u.adjustAdContainer(u.t4.publicAd.width,u.t4.publicAd.height),u.u4.startAd()},u.J4=function(){u.u4.stopAd(),u.I4(),u.x4.reject(s.VastErrorCode.UNABLE_TO_FETCH_NONLINEAR_RESOURCE)},u.K4=function(){(0,a.clearTimeoutIfDefined)(u.A4),u.A4=void 0,u.x4.resolve()},u.Y5=function(){u.N4(),u.D4.resolve()},u.Z5=function(){u.E4=!0,(0,a.clearTimeoutIfDefined)(u.B4),u.B4=void 0,u.D4.resolve()},u.z4=r,u.w4=new Map,u.x4=new o.Deferred,u.C4=[],u.D4=new o.Deferred,u.E4=!1,u.F4=new l.VpaidEventHandler,u.w4.set(n.PlayerEvent.PlaybackFinished,c.VpaidEvent.AdStopped),u.w4.set(n.PlayerEvent.Error,c.VpaidEvent.AdError),u.w4.set(n.PlayerEvent.AdClicked,c.VpaidEvent.AdClickThru),u.M4(),u}return r(e,t),e.prototype.display=function(t,e){var i=this;return this.t4=t,this.v4=e,d.VpaidContextFactory.createVpaidContext(this.t4.publicAd.mediaFileUrl,this.adContainer,this.z4).then((function(e){var r=i.v4.isFullscreen?c.VpaidViewMode.Fullscreen:c.VpaidViewMode.Normal;(0,a.clearTimeoutIfDefined)(i.y4),i.y4=window.setTimeout(i.G4,i.z4),i.u4=e.api,i.F4.attach(i.u4),i.u4.initAd(i.v4.width,i.v4.height,r,1e5,{AdParameters:t.adParameters},{slot:e.container.contentDocument.body})})).catch((function(){i.stop(),i.x4.reject(s.VastErrorCode.UNABLE_TO_FETCH_NONLINEAR_RESOURCE)})),this.x4.promise},e.prototype.I4=function(){this.C4.forEach((function(t){return t()}))},e.prototype.L4=function(t,e){this.F4.on(t,e)},e.prototype.on=function(t,e){t===n.PlayerEvent.Error&&this.C4.push(e),this.F4.on(this.w4.get(t)||t,e)},e.prototype.off=function(t,e){this.F4.off(t,e)},e.prototype.M4=function(){this.L4(c.VpaidEvent.AdLoaded,this.H4),this.F4.on(c.VpaidEvent.AdStarted,this.K4),this.F4.on(c.VpaidEvent.AdStopped,this.Z5)},e.prototype.N4=function(){this.u4&&(this.F4.detach(this.u4),this.u4.done(),this.u4=null),this.adContainer.style.display="none"},e.prototype.a5=function(){this.E4||((0,a.clearTimeoutIfDefined)(this.B4),this.u4?(this.B4=window.setTimeout(this.Y5,this.z4),this.u4.stopAd()):(this.B4=void 0,this.D4.resolve()))},e.prototype.stop=function(){var t=this;this.D4.promise.then((function(){t.C4=[],t.N4(),t.b5()})),this.a5()},e.prototype.b5=function(){(0,a.clearTimeoutIfDefined)(this.y4),(0,a.clearTimeoutIfDefined)(this.A4),(0,a.clearTimeoutIfDefined)(this.B4),this.y4=void 0,this.A4=void 0,this.B4=void 0},e}(u.AbstractOverlayAdManager);e.VpaidOverlayAdManager=h},11144:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.VastAdTracker=e.AdTrackingEvent=void 0;var r,n=i(49075),o=i(3714);!function(t){t.FirstQuartile="firstQuartile",t.Midpoint="midpoint",t.ThirdQuartile="thirdQuartile"}(r||(e.AdTrackingEvent=r={}));var a=function(){function t(e,i){this.player=i,this.sL=[],this.rL=t.createVastTracker(e),this.uL(this.rL,i)}return t.createVastTracker=function(t){return new n.VASTTracker(null,t.originalVastAd,t.originalVastCreative)},t.prototype.setupWasSuccessful=function(){return null!=this.rL},t.prototype.setFullscreen=function(t){this.rL.setFullscreen(t)},t.prototype.volumeChanged=function(t){this.rL.setMuted(0===t)},t.prototype.setPaused=function(t){this.rL.setPaused(t)},t.prototype.skip=function(){this.tL(),this.rL.skip()},t.prototype.click=function(){this.rL.click()},t.prototype.complete=function(){this.tL(),this.vL(),this.rL.complete()},t.prototype.close=function(){this.rL.close()},t.prototype.progress=function(t){this.rL.setProgress(t)},t.prototype.setDuration=function(t){this.rL.setDuration(t)},t.prototype.trackImpression=function(){this.rL.trackImpression()},t.prototype.errorWithCode=function(t){this.rL.errorWithCode(t)},t.prototype.tL=function(){this.rL.removeAllListeners(o.AdQuartile.FIRST_QUARTILE),this.rL.removeAllListeners(o.AdQuartile.MIDPOINT),this.rL.removeAllListeners(o.AdQuartile.THIRD_QUARTILE)},t.prototype.uL=function(t,e){var i=this;t.on(r.FirstQuartile,(function(){e.onQuartile(o.AdQuartile.FIRST_QUARTILE),i.sL.push(o.AdQuartile.FIRST_QUARTILE)})),t.on(r.Midpoint,(function(){e.onQuartile(o.AdQuartile.MIDPOINT),i.sL.push(o.AdQuartile.MIDPOINT)})),t.on(r.ThirdQuartile,(function(){e.onQuartile(o.AdQuartile.THIRD_QUARTILE),i.sL.push(o.AdQuartile.THIRD_QUARTILE)}))},t.prototype.vL=function(){var t=this;[o.AdQuartile.FIRST_QUARTILE,o.AdQuartile.MIDPOINT,o.AdQuartile.THIRD_QUARTILE].forEach((function(e){t.sL.includes(e)||t.player.onQuartile(e)}))},t.prototype.dispose=function(){this.tL(),this.rL=null},t}();e.VastAdTracker=a},17614:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.BitmovinModuleErrorCode=e.AdvertisingBitmovinModuleDefinition=void 0;var r=i(62756),n=i(27319),o=i(92996);Object.defineProperty(e,"BitmovinModuleErrorCode",{enumerable:!0,get:function(){return o.BitmovinModuleErrorCode}}),e.AdvertisingBitmovinModuleDefinition={name:r.ModuleName.Advertising,module:function(){return n.BitmovinModule},dependencies:[r.ModuleName.AdvertisingCore],exports:{BitmovinModuleErrorCode:o.BitmovinModuleErrorCode}},e.default=e.AdvertisingBitmovinModuleDefinition},25534:function(t,e){var i,r;Object.defineProperty(e,"__esModule",{value:!0}),e.VpaidViewMode=e.VpaidEvent=void 0,function(t){t.AdError="AdError",t.AdLoaded="AdLoaded",t.AdPaused="AdPaused",t.AdPlaying="AdPlaying",t.AdSkipped="AdSkipped",t.AdStarted="AdStarted",t.AdStopped="AdStopped",t.AdClickThru="AdClickThru",t.AdInteraction="AdInteraction",t.AdImpression="AdImpression",t.AdVideoStart="AdVideoStart",t.AdVideoMidpoint="AdVideoMidpoint",t.AdVideoComplete="AdVideoComplete",t.AdVideoThirdQuartile="AdVideoThirdQuartile",t.AdVideoFirstQuartile="AdVideoFirstQuartile"}(i||(e.VpaidEvent=i={})),function(t){t.Normal="normal",t.Thumbnail="thumbnail",t.Fullscreen="fullscreen"}(r||(e.VpaidViewMode=r={}))},27319:function(t,e,i){var r=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}(),n=this&&this.__assign||function(){return n=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},n.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.BitmovinModule=void 0,e.getAdLoadingError=E;var o=i(4224),a=i(45202),s=i(3714),u=i(34841),c=i(65348),d=i(88052),l=i(62756),h=i(45392),p=i(28412),f=i(28610),v=i(60326),y=i(47091),m=i(77800),A=i(56528),g=i(11144),b=i(88944),k=i(59409),T=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.bh=[],r.qh=Promise.resolve(),r.Si=function(){r.bh.forEach((function(t){return t.complete()})),r.Ui()},r.Ui=function(){return r.qh.then((function(){return r.ch?(r.qh=r.ch.done().catch((function(t){})).finally((function(){return r.Ti()})),r.ch=null,r.qh):r.qh}))},r.Vi=function(){r.Wi({code:y.VastErrorCode.GENERAL_LINEAR_ERROR}),r.Ui()},r.Di(i,e),r.Xh=new m.AdBreakService(e,i,new v.VastClientWrapper(i.videoLoadTimeout,i.withCredentials,i.disableStorageApi)),r.ah=[],r.fh=!1,r.gh=!1,r.mh=!1,r.nh=!1,r.jh=-1/0,r.Ci(),r.oh=Promise.resolve([]),r}return r(e,t),e.prototype.Ci=function(){"function"==typeof this.config.adContainer&&(this.lh=this.config.adContainer(),this.lh instanceof HTMLElement?this.mh=!0:this.player.onError(y.VastErrorCode.UNDEFINED_ERROR,"AdvertisingConfig.adContainer was defined but did not provide a valid HTMLElement.")),this.mh||(this.lh=c.DOMHelper.createTag("div",{class:a.Environment.idPrefix+"overlay-container"},{height:"100%",width:"100%",display:"none",border:"none",overflow:"hidden",position:"absolute",top:"0"}),this.kh=this.player.getVideoElement().parentElement,this.kh.appendChild(this.lh))},e.prototype.Di=function(t,e){var i,r=d.ModuleManager.get(l.ModuleName.AdvertisingOmSdk,!1);if(null===(i=t.trackers)||void 0===i?void 0:i.omSdk){if(!r)return void e.onWarning(o.WarningCode.MODULE_ADVERTISING_OM_SDK_MODULE_MISSING);try{this.rh=new r.BitmovinOpenMeasurementAdVerification(e.getVideoElement(),e.onWarning,t.trackers.omSdk)}catch(t){e.onWarning(o.WarningCode.MODULE_ADVERTISING_OM_SDK_INIT_FAILURE,t.message,t)}}},e.prototype.afterContent=function(){var t=this;return this.Ei(1/0).then((function(){return t.Xh.resetPlayedAdBreaks(0)}))},e.prototype.beforeContent=function(){var t=this;return this.oh.then((function(){return t.Ei(0)}))},e.prototype.currentTime=function(){return this.ch.currentTime},e.prototype.duration=function(){return this.ch.duration},e.prototype.discardAdBreak=function(t){this.Xh.discardAdBreak(t),this.ph&&this.ph.done()},e.prototype.getActiveAdBreak=function(){return this.Yh&&this.Yh.publicAdBreak},e.prototype.getActiveAd=function(){return this.Zh},e.prototype.isLinearAdActive=function(t){return t?Boolean(this.eh&&!this.ch.paused):Boolean(this.eh)},e.prototype.list=function(){return this.Xh.list().map((function(t){return t.publicAdBreak}))},e.prototype.onResize=function(t,e,i){this.hh&&i!==this.hh.isFullscreen&&this.bh.forEach((function(t){return t.setFullscreen(i)})),this.hh={width:t,height:e,isFullscreen:i},this.ch&&(this.ch.playerResolution=this.hh)},e.prototype.onSeek=function(t,e){var i=this;this.Xh.resetPlayedAdBreaks(e),this.nh=!0,this.Xh.preloadAdBreaks(e).then((function(){var r=i.ah.concat(i.Xh.getPlayableAdBreaks(e)),n=r.map((function(t){return t.publicAdBreak})),o=i.config.strategy.shouldPlaySkippedAdBreaks(n,t,e);i.ah=r.filter((function(t){return o.find((function(e){return e===t.publicAdBreak}))}))})).finally((function(){i.nh=!1}))},e.prototype.onTimeChanged=function(t){var e=this;if(this.isLinearAdActive()){var i=this.ch.duration;return(!isFinite(this.jh)||i!==this.jh&&i>0)&&(this.jh=i,this.bh.forEach((function(t){return t.setDuration(e.jh)}))),void this.bh.forEach((function(e){return e.progress(t)}))}this.nh||this.Ei(t).then((function(){})).catch((function(){}))},e.prototype.Ei=function(t){var e=this;return this.Xh.setCurrentScheduleTime(t),this.nh=!0,this.Xh.preloadAdBreaks(t).then((function(){var i=e.Xh.getPlayableAdBreaks(t);return e.Gi(i)})).finally((function(){e.nh=!1}))},e.prototype.onVolumeChanged=function(t){this.bh.forEach((function(e){return e.volumeChanged(t)}))},e.prototype.pause=function(){this.ch&&!this.ch.paused&&(this.ch.pause(),this.bh.forEach((function(t){return t.setPaused(!0)})))},e.prototype.reset=function(){var t,e,i,r=this;this.gh=this.fh,this.ah=[],this.Xh.reset(),this.oh=Promise.resolve([]),this.bh.forEach((function(t){return t.dispose()})),this.bh=[];var n=null!==(e=null===(t=this.ch)||void 0===t?void 0:t.reset())&&void 0!==e?e:Promise.resolve();return null===(i=this.dh)||void 0===i||i.stop(),this.dh=null,this.eh=!1,this.Zh=null,this.Yh=null,this.jh=-1/0,n.then((function(){r.ch=null}))},e.prototype.resume=function(){var t=this;this.ch&&this.ch.paused&&this.ch.play().then((function(){return t.bh.forEach((function(t){return t.setPaused(!1)}))}))},e.prototype.schedule=function(t){return t.discardAfterPlayback=!1!==t.discardAfterPlayback,this.oh=this.Xh.schedule(t),this.oh.then((function(t){return t.map((function(t){return t.publicAdBreak}))}))},e.prototype.skip=function(){return this.ai(),this.isLinearAdActive()&&this.ch.skippable?(this.ch.skip(),this.Fi()):Promise.resolve()},e.prototype.Fi=function(){return this.bh.forEach((function(t){return t.skip()})),this.Ui()},e.prototype.Gi=function(t){var e=this;this.ah=this.ah.concat(t);var i=this.ah.shift();if(!i)return Promise.resolve();var r=(0,m.preprocessAdBreak)(i,(function(t){return e.Hi(t)}),{technology:this.config.preferredTechnology,resolution:this.Xh.getPlayerContainerResolution()});return this.Ii(r).then((function(){return e.Gi([])}))},e.prototype.Hi=function(t){var e=this.player.selectMediaFile(t),i=t.map((function(t){return n({},t)}));return(this.config.onSelectAdQuality?this.config.onSelectAdQuality(e,i):null)||e},e.prototype.Ii=function(t){var e=this;return(0,h.pingVmapTrackingUrls)(t.trackingEvents,f.VmapTrackingEventType.BreakStart),t.ads&&0!==t.ads.length?(this.ai(),this.Ji(t).then((function(){return e.Xi(t)})).then((function(){(0,h.pingVmapTrackingUrls)(t.trackingEvents,f.VmapTrackingEventType.BreakEnd),e.Yh=null}))):((0,h.pingVmapTrackingUrls)(t.trackingEvents,f.VmapTrackingEventType.BreakEnd),Promise.resolve())},e.prototype.Ji=function(t){var e=this,i=function(t){return t.filter(P)}(t.ads);return 0===i.length?Promise.resolve():(this.Yh=t,this.player.requestAdPlayback(t.publicAdBreak).then((function(t){e.ph||(e.ph=t);var r=(0,b.splitAdsBySequence)(i,e.config.freewheelVastFallbackHandling),n=Promise.resolve();r.mainAds.forEach((function(i){n=n.then((function(){return e.Mi(i,t,r.getBackupAds(i))}))}));var o=Boolean(e.ah.length>0&&e.ah[0].ads.find((function(t){return t.publicAd.isLinear})));return n.then((function(){return t.done(!o)}))})))},e.prototype.Ki=function(t){var e=this,i={width:this.kh.clientWidth,height:this.kh.clientHeight,isFullscreen:this.hh&&this.hh.isFullscreen};return this.fh=!0,this.ch.load(t,i).then((function(){return e.Ri(t.publicAd)})).catch((function(i){return e.gh||e.Wi(E(t,i)),e.Ui().finally((function(){return Promise.reject(i)}))})).finally((function(){e.fh=!1,e.gh=!1}))},e.prototype.Li=function(t,e){var i=this,r=new u.Deferred;return this.ih=r,A.AdPlayerWrapperFactory.create(e,t,this.lh,this.config.videoLoadTimeout).then((function(e){var r,n;if(i.ch=e,i.Ni(t),i.bh.push(new g.VastAdTracker(t,i.player)),i.rh){var o=null===(n=null===(r=i.Yh)||void 0===r?void 0:r.publicAdBreak)||void 0===n?void 0:n.scheduleTime,a=d.ModuleManager.get(l.ModuleName.AdvertisingOmSdk).OmSdkAdTracker;i.bh.push(new a(t,i.player,i.rh,o))}return i.bh=i.bh.filter((function(t){return t.setupWasSuccessful()})),t.publicAd.clickThroughUrlOpened=i.Oi(t),i.Ki(t)})).then((function(){return r.promise}))},e.prototype.Mi=function(t,e,i){var r=this;return this.Li(t,e).catch((function(){if(i.length)return r.Mi(i.shift(),e,i)}))},e.prototype.Ni=function(t){var e=this;this.ch.on(s.PlayerEvent.PlaybackFinished,this.Si),this.ch.on(s.PlayerEvent.Error,(function(){e.gh=e.fh,e.Qi().then(e.Ui)})),this.ch.on(s.PlayerEvent.AdSkipped,(function(){return e.Fi()})),this.ch.on(s.PlayerEvent.AdClicked,this.Oi(t)),this.ch.on(s.PlayerEvent.AdInteraction,(function(t){return e.Pi(t,s.AdInteractionType.Vpaid)}))},e.prototype.Oi=function(t){var e=this;return function(){e.bh.forEach((function(t){return t.click()})),e.player.adClicked(t.publicAd.clickThroughUrl)}},e.prototype.Pi=function(t,e){var i=t[0][0];this.player.adInteraction(e,i)},e.prototype.Qi=function(){return this.eh=!1,this.Wi({code:y.VastErrorCode.GENERAL_LINEAR_ERROR}),Promise.resolve()},e.prototype.Ri=function(t){this.ch.on(s.PlayerEvent.Error,this.Vi),this.bh.forEach((function(t){return t.trackImpression()})),this.eh=!0,this.Zh=t},e.prototype.Ti=function(){this.eh=!1,this.Zh=null,this.jh=-1/0,this.bh.forEach((function(t){return t.dispose()})),this.bh=[],this.ih&&(this.ih.resolve(),this.ih=null)},e.prototype.Wi=function(t,e){void 0===e&&(e=this.getActiveAdBreak()),this.player.onError(t.code,t.message,e),y.VastErrorCode[t.code]&&this.bh.forEach((function(e){return e.errorWithCode(String(t.code))}))},e.prototype.Xi=function(t){var e=this,i=t.ads.filter((function(t){return!t.publicAd.isLinear}));if(0===i.length)return Promise.resolve();var r=i[i.length-1];return this.Yi(r,t).catch((function(i){i&&e.Wi({code:i},t.publicAdBreak),e.dh=null,e.bh.forEach((function(t){return t.dispose()})),e.bh=[]}))},e.prototype.Yi=function(t,e){var i=this;this.dh=k.OverlayAdManagerFactory.create(t,this.lh,this.mh,this.config.videoLoadTimeout),this.bh.push(new g.VastAdTracker(t,this.player)),t.publicAd.clickThroughUrlOpened=function(){i.bh.forEach((function(t){return t.click()})),i.player.adClicked(t.publicAd.clickThroughUrl)},this.dh.on(s.PlayerEvent.AdClicked,this.Oi(t)),this.dh.on(s.PlayerEvent.Error,(function(){return i.Zi(e.publicAdBreak)}));var r={width:this.kh.clientWidth,height:this.kh.clientHeight,isFullscreen:this.hh&&this.hh.isFullscreen};return this.dh.display(t,r).then((function(){i.Zh=t.publicAd,i.player.overlayAdStarted(t.publicAd),i.bh.forEach((function(t){return t.trackImpression()}))}))},e.prototype.Zi=function(t){this.Wi({code:y.VastErrorCode.GENERAL_NONLINEARADS_ERROR},t),this.ai()},e.prototype.ai=function(){this.getActiveAd()&&!this.getActiveAd().isLinear&&(this.Zh=null,this.dh&&(this.dh.stop(),this.dh=null),this.bh.forEach((function(t){t.close(),t.dispose()})),this.bh=[])},e.prototype.dispose=function(){this.dh&&(this.dh.stop(),this.dh=null),this.bh.forEach((function(t){return t.dispose()})),this.bh=[],this.oh=null,this.Yh=null,this.Zh=null,this.ah=[],this.kh.removeChild(this.lh),this.lh=null},e.prototype.getModuleInfo=function(){return{name:e.MODULE_NAME,version:e.MODULE_VERSION}},e.bitmovinMarker=function(){},e.MODULE_NAME="advertising-bitmovin",e.MODULE_VERSION=a.Environment.VERSION_NUMBER,e}(p.AdvertisingModule);function E(t,e){return(null==e?void 0:e.code)?e:t.publicAd.isLinear?{code:y.VastErrorCode.MEDIAFILE_URI_TIMEOUT}:{code:y.VastErrorCode.UNABLE_TO_FETCH_NONLINEAR_RESOURCE}}function P(t){return t.publicAd.isLinear}e.BitmovinModule=T},36396:function(t,e,i){var r=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayAdManager=void 0;var n=i(65348),o=i(7581),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.prototype.display=function(t){return t.staticResource?(this.q3=this.r3(t),this.q3.onclick=t.publicAd.clickThroughUrlOpened,this.adjustAdContainer(t.publicAd.width,t.publicAd.height),this.adContainer.appendChild(this.q3),Promise.resolve()):Promise.reject(o.VastErrorCode.NO_SUPPORTED_NONLINEAR_RESOURCE_TYPE)},e.prototype.r3=function(t){var e=n.DOMHelper.createTag("a",{href:t.publicAd.clickThroughUrl,target:"_blank"},{width:t.publicAd.width+"px",height:t.publicAd.height+"px"}),i=n.DOMHelper.createTag("img",{src:t.publicAd.mediaFileUrl},{width:t.publicAd.width+"px",height:t.publicAd.height+"px"});return e.appendChild(i),e},e.prototype.on=function(){},e.prototype.stop=function(){this.adContainer.style.display="none",this.q3&&(this.adContainer.removeChild(this.q3),this.q3=null)},e}(i(6341).AbstractOverlayAdManager);e.OverlayAdManager=a},41680:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.VpaidEventHandler=void 0;var r=i(19483),n=i(25534),o=function(){function t(){this.pbb=new Map,this.obb=new r.ArrayMap}return t.prototype.qbb=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];(this.obb.get(t)||[]).slice().forEach((function(t){return t(e)}))},t.prototype.attach=function(t){var e=this,i=function(i){var n=function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return e.qbb(i,t)};t.subscribe(n,i),r.pbb.set(i,n)},r=this;for(var o in n.VpaidEvent)i(o)},t.prototype.detach=function(t){for(var e in n.VpaidEvent)t.unsubscribe(this.pbb.get(e),e)},t.isAlreadyRegistered=function(t,e,i){var r=t.get(e);return r&&r.includes(i)},t.prototype.on=function(e,i){t.isAlreadyRegistered(this.obb,e,i)||this.obb.add(e,i)},t.prototype.off=function(t,e){this.obb.deleteValue(t,e)},t.prototype.dispose=function(){this.pbb.clear(),this.obb.clear()},t}();e.VpaidEventHandler=o},45980:function(t,e,i){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AdTranslator=void 0,e.getSupportedMediaFiles=l,e.isStreamingMediaFile=h,e.isProgressiveMediaFile=function(t){return!h(t)},e.isVpaid=p,e.getAdDataForLinear=function(t){var e={};return t.mimeType&&(e.mimeType=t.mimeType),t.id&&(e.mediaFileId=t.id),t.deliveryType&&(e.delivery=t.deliveryType),t.codec&&(e.codec=t.codec),t.bitrate>0&&(e.bitrate=t.bitrate),t.minBitrate>0&&(e.minBitrate=t.minBitrate),t.maxBitrate>0&&(e.maxBitrate=t.maxBitrate),t.apiFramework&&(e.apiFramework=t.apiFramework),e},e.getAdDataForNonLinear=function(t){var e={};return t.minSuggestedDuration&&t.minSuggestedDuration!==c.NON_SKIPPABLE_IDENTIFIER&&(e.minSuggestedDuration=t.minSuggestedDuration),t.apiFramework&&(e.apiFramework=t.apiFramework),e};var n,o=i(85434),a=i(23068),s=i(58313),u=i(70850),c=i(6365);!function(t){t.Linear="linear",t.Companion="companion",t.NonLinear="nonlinear"}(n||(n={}));var d=function(){function t(){}return t.fromVastAd=function(t,e){var i=this.extractMainAds(t,e),r=this.extractCompanionAds(t);return r.length>0&&i.forEach((function(t){t.companionAds=r,t.publicAd.companionAds=r.map((function(t){return t.publicAd}))})),i},t.extractMainAds=function(t,e){var i=this;return this.sortCreatives(t),this.addCachebustingPlaceholder(t),t.creatives.filter((function(t){return t.type!==n.Companion})).map((function(r){return i.translateVastCreativeToAd(r,t,e)})).filter((function(t){return Boolean(null==t?void 0:t.publicAd)}))},t.sortCreatives=function(t){return t.creatives.sort((function(t,e){return Number(t.sequence||0)-Number(e.sequence||0)}))},t.translateVastCreativeToAd=function(t,e,i){var r,o,a=t.type===n.Linear?this.mapToLinearAd(e,t,i):this.mapToOverlayAd(e,t);return a&&(e.id&&(a.publicAd.id=e.id),(null===(r=e.verifications)||void 0===r?void 0:r.length)>0&&(a.publicAd.id=a.publicAd.id||"adVerification-"+u.Util.generateUniqueId(),a.publicAd.verifications=e.verifications),(null===(o=e.extensions)||void 0===o?void 0:o.length)>0&&(a.publicAd.extensions=e.extensions),a.originalVastAd=e,a.originalVastCreative=t),a},t.extractCompanionAds=function(t){var e=this;return t.creatives.filter((function(t){return t.type===n.Companion})).flatMap((function(t){return e.mapToCompanionAds(t)}))},t.mapToCompanionAds=function(t){return t.variations.map((function(t){return{publicAd:{width:Number(t.width),height:Number(t.height)},id:t.id,clickThroughUrl:t.companionClickThroughURLTemplate,type:t.type,htmlResource:t.htmlResource,iframeResource:t.iframeResource,staticResource:t.staticResource}}))},t.mapToLinearAd=function(t,e,i){var r=l(e.mediaFiles);if(!r.length)return null;var n=(0,a.isNumber)(i.skippableAfter)?i.skippableAfter:e.skipDelay,o=null!=n&&n!==c.NON_SKIPPABLE_IDENTIFIER,s={publicAd:{duration:e.duration,skippable:o,isLinear:!0,clickThroughUrl:e.videoClickThroughURLTemplate,width:0,height:0,data:this.collectVastAdData(t,e),uiConfig:this.getUiConfig(i)},adParameters:e.adParameters,supportedMediaFiles:r,fallback:Boolean(t.isFallback)};return o&&(s.publicAd.skippableAfter=n),s},t.getUiConfig=function(t){var e={};return t.linearAdUiConfig?(e.message=t.linearAdUiConfig.message,e.skippableMessage=t.linearAdUiConfig.skippableMessage,e.untilSkippableMessage=t.linearAdUiConfig.untilSkippableMessage,null!=t.linearAdUiConfig.requestsUi&&(e.requestsUi=t.linearAdUiConfig.requestsUi),e):e},t.mapToOverlayAd=function(t,e){var i=e.variations.map(f);return i.length?{publicAd:{isLinear:!1,width:0,height:0,data:this.collectVastAdData(t,e)},type:"",supportedVariations:i}:null},t.collectVastAdData=function(t,e){var i,r,n,o,a={adTitle:t.title,adDescription:t.description,wrapperAdIds:t.wrapperAdIds};return Object.keys(e).length&&(a.creative=function(t){var e,i={};return t.id&&(i.id=t.id),t.adId&&(i.adId=t.adId),(null===(e=t.universalAdId)||void 0===e?void 0:e.value)&&t.universalAdId.idRegistry&&(i.universalAdId={value:t.universalAdId.value,idRegistry:t.universalAdId.idRegistry}),i}(e)),(null===(i=t.system)||void 0===i?void 0:i.value)&&(a.adSystem=t.system.version?{name:t.system.value,version:t.system.version}:{name:t.system.value}),(null===(r=t.advertiser)||void 0===r?void 0:r.name)&&(a.advertiser=v(t.advertiser,["name","id"])),(null===(n=t.survey)||void 0===n?void 0:n.uri)&&(a.survey=v(t.survey,["uri","type"])),(null===(o=t.pricing)||void 0===o?void 0:o.value)&&t.pricing.model&&t.pricing.currency&&(a.pricing={value:Number(t.pricing.value),model:t.pricing.model,currency:t.pricing.currency}),a},t.addCachebustingPlaceholder=function(t){t.creatives.forEach((function(t){var e=t.trackingEvents;e&&Object.keys(e).forEach((function(t){var i=e[t];i.forEach((function(t,e){t.includes("CACHEBUSTING")||(i[e]=s.URLHelper.appendQueryParametersToUrl(t,{"[CACHEBUSTING]":null}))}))}))}))},t}();function l(t){var e=function(t){return t.filter((function(t){return t.deliveryType&&t.mimeType&&t.fileURL}))}(t),i=document.createElement("video");return e.filter((function(t){return h(t)?function(t){return o.MimeTypeHelper.isDash(t.mimeType)||o.MimeTypeHelper.isHls(t.mimeType)||p(t)}(t):function(t,e){return function(t,e){return["maybe","probably"].includes(e.canPlayType(t.mimeType))}(t,e)||p(t)}(t,i)}))}function h(t){return t.deliveryType===c.MediaFileDeliveryType.Streaming}function p(t){return t.apiFramework&&t.apiFramework.toLowerCase()===c.VastApiFramework.Vpaid}function f(t){return r(r({},t),{width:parseInt(t.width),height:parseInt(t.height),mimeType:t.type})}function v(t,e){var i={};return e.filter((function(e){return null!=t[e]})).forEach((function(e){return i[e]=t[e]})),i}e.AdTranslator=d},49075:function(t,e,i){var r=this&&this.__extends||function(){var t=function(e,i){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])},t(e,i)};return function(e,i){if("function"!=typeof i&&null!==i)throw new TypeError("Class extends value "+String(i)+" is not a constructor or null");function r(){this.constructor=e}t(e,i),e.prototype=null===i?Object.create(i):(r.prototype=i.prototype,new r)}}();Object.defineProperty(e,"__esModule",{value:!0}),e.VASTTracker=void 0;var n=i(31472),o=i(77615),a=i(37007),s=i(57219),u=i(11417),c=function(t){function e(e,i,r,n){void 0===n&&(n=null);var a=t.call(this)||this;for(var s in a.ad=i,a.creative=r,a.variation=n,a.muted=!1,a.impressed=!1,a.skippable=!1,a.trackingEvents={},a._alreadyTriggeredQuartiles={},a.emitAlwaysEvents=["creativeView","start","firstQuartile","midpoint","thirdQuartile","complete","resume","pause","rewind","skip","closeLinear","close"],a.creative.trackingEvents){var u=a.creative.trackingEvents[s];a.trackingEvents[s]=u.slice(0)}return a.creative instanceof o.CreativeLinear?a._initLinearTracking():a._initVariationTracking(),e&&a.on("start",(function(){e.lastSuccessfulAd=Date.now()})),a}return r(e,t),e.prototype._initLinearTracking=function(){this.linear=!0,this.skipDelay=this.creative.skipDelay,this.setDuration(this.creative.duration),this.clickThroughURLTemplate=this.creative.videoClickThroughURLTemplate,this.clickTrackingURLTemplates=this.creative.videoClickTrackingURLTemplates},e.prototype._initVariationTracking=function(){this.linear=!1,this.skipDelay=-1;var t=this.variation||this.creative&&this.creative.variations&&this.creative.variations[0]||null;if(t){for(var e in t.trackingEvents){var i=t.trackingEvents[e];this.trackingEvents[e]?this.trackingEvents[e]=this.trackingEvents[e].concat(i.slice(0)):this.trackingEvents[e]=i.slice(0)}t instanceof s.NonLinearAd?(this.clickThroughURLTemplate=t.nonlinearClickThroughURLTemplate,this.clickTrackingURLTemplates=t.nonlinearClickTrackingURLTemplates,this.setDuration(t.minSuggestedDuration)):t instanceof n.CompanionAd&&(this.clickThroughURLTemplate=t.companionClickThroughURLTemplate,this.clickTrackingURLTemplates=t.companionClickTrackingURLTemplates)}},e.prototype.setDuration=function(t){this.assetDuration=t,this.quartiles={firstQuartile:Math.round(25*this.assetDuration)/100,midpoint:Math.round(50*this.assetDuration)/100,thirdQuartile:Math.round(75*this.assetDuration)/100}},e.prototype.setProgress=function(t){var e=this,i=this.skipDelay||-1;if(-1===i||this.skippable||(i>t?this.emit("skip-countdown",i-t):(this.skippable=!0,this.emit("skip-countdown",0))),this.assetDuration>0){var r=[];if(t>0){var n=Math.round(t/this.assetDuration*100);for(var o in r.push("start"),r.push("progress-".concat(n,"%")),r.push("progress-".concat(Math.round(t))),this.quartiles)this.isQuartileReached(o,this.quartiles[o],t)&&(r.push(o),this._alreadyTriggeredQuartiles[o]=!0)}r.forEach((function(t){e.track(t,!0)})),t<this.progress&&this.track("rewind")}this.progress=t},e.prototype.isQuartileReached=function(t,e,i){var r=!1;return e<=i&&!this._alreadyTriggeredQuartiles[t]&&(r=!0),r},e.prototype.setMuted=function(t){this.muted!==t&&this.track(t?"mute":"unmute"),this.muted=t},e.prototype.setPaused=function(t){this.paused!==t&&this.track(t?"pause":"resume"),this.paused=t},e.prototype.setFullscreen=function(t){this.fullscreen!==t&&this.track(t?"fullscreen":"exitFullscreen"),this.fullscreen=t},e.prototype.setExpand=function(t){this.expanded!==t&&this.track(t?"expand":"collapse"),this.expanded=t},e.prototype.setSkipDelay=function(t){"number"==typeof t&&(this.skipDelay=t)},e.prototype.trackImpression=function(){this.impressed||(this.impressed=!0,this.trackURLs(this.ad.impressionURLTemplates),this.track("creativeView"))},e.prototype.errorWithCode=function(t){this.trackURLs(this.ad.errorURLTemplates,{ERRORCODE:t})},e.prototype.complete=function(){this.track("complete")},e.prototype.close=function(){this.track(this.linear?"closeLinear":"close")},e.prototype.skip=function(){this.track("skip"),this.trackingEvents=[]},e.prototype.click=function(t){void 0===t&&(t=null),this.clickTrackingURLTemplates&&this.clickTrackingURLTemplates.length&&this.trackURLs(this.clickTrackingURLTemplates);var e=this.clickThroughURLTemplate||t;if(e){var i=this.linear?{CONTENTPLAYHEAD:this.progressFormatted()}:{},r=u.util.resolveURLTemplates([e],i)[0];this.emit("clickthrough",r)}},e.prototype.track=function(t,e){void 0===e&&(e=!1),"closeLinear"===t&&!this.trackingEvents[t]&&this.trackingEvents.close&&(t="close");var i=this.trackingEvents[t],r=this.emitAlwaysEvents.indexOf(t)>-1;i?(this.emit(t,""),this.trackURLs(i)):r&&this.emit(t,""),e&&(delete this.trackingEvents[t],r&&this.emitAlwaysEvents.splice(this.emitAlwaysEvents.indexOf(t),1))},e.prototype.trackURLs=function(t,e){void 0===e&&(e={}),this.linear&&(this.creative&&this.creative.mediaFiles&&this.creative.mediaFiles[0]&&this.creative.mediaFiles[0].fileURL&&(e.ASSETURI=this.creative.mediaFiles[0].fileURL),e.CONTENTPLAYHEAD=this.progressFormatted()),u.util.track(t,e)},e.prototype.progressFormatted=function(){var t=parseInt(this.progress),e=t/3600;e.length<2&&(e="0".concat(e));var i=t/60%60;i.length<2&&(i="0".concat(i));var r=t%60;r.length<2&&(r="0".concat(i));var n=parseInt(100*(this.progress-t));return"".concat(e,":").concat(i,":").concat(r,".").concat(n)},e}(a.EventEmitter);e.VASTTracker=c},56528:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.AdPlayerWrapperFactory=void 0;var r=i(63589),n=i(72756),o=function(){function t(){}return t.create=function(t,e,i,o){return e.isVpaid?t.requestReporter().then((function(t){return new n.VpaidAdPlayer(t,i,o)})):t.requestPlayer().then((function(t){return new r.VideoAdPlayer(t,o)}))},t}();e.AdPlayerWrapperFactory=o},58656:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.adBreakPreloadComparator=e.adBreakScheduleComparator=void 0;var r=i(6365);e.adBreakScheduleComparator=function(t,e){if(t.publicAdBreak.scheduleTime>e.publicAdBreak.scheduleTime)return 1;if(e.publicAdBreak.scheduleTime>t.publicAdBreak.scheduleTime)return-1;var i=t.orderingIndex,r=e.orderingIndex;return i>r?1:i<r?-1:0},e.adBreakPreloadComparator=function(t,e){var i,n,o=t.publicAdBreak.scheduleTime-(null!==(i=t.publicAdBreak.preloadOffset)&&void 0!==i?i:r.DEFAULT_PRELOAD_OFFSET)-(e.publicAdBreak.scheduleTime-(null!==(n=e.publicAdBreak.preloadOffset)&&void 0!==n?n:r.DEFAULT_PRELOAD_OFFSET));return 0!==o?o:t.orderingIndex-e.orderingIndex}},59409:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayAdManagerFactory=void 0;var r=i(36396),n=i(10332),o=function(){function t(){}return t.create=function(t,e,i,o){return t.isVpaid?new n.VpaidOverlayAdManager(e,i,o):new r.OverlayAdManager(e,i)},t}();e.OverlayAdManagerFactory=o},60814:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.splitArray=function(t,e){var i=t.filter(e),r=t.filter((function(t){return!i.includes(t)}));return[i,r]}},61411:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.VpaidContextFactory=e.VpaidContextFactoryError=void 0;var r,n=i(34841),o=i(65348),a=i(88844);!function(t){t.Timeout="timeout",t.ScriptError="scripterror"}(r||(e.VpaidContextFactoryError=r={}));var s=function(){function t(){}return t.onContainerIframeLoaded=function(t,e,i,r,n){i.contentDocument.body.style.margin="0",i.contentDocument.body.style.padding="0",r.onerror=this.onVpaidScriptError.bind(this,t),r.onload=this.onVpaidScriptLoaded.bind(this,t,i,e,window.setTimeout(this.onScriptLoadTimeout.bind(this,t,r),n)),i.contentWindow.document.head.appendChild(r)},t.onScriptLoadTimeout=function(t,e){e.src="",e.parentElement.removeChild(e),t.reject(r.Timeout)},t.onVpaidScriptError=function(t){t.reject(r.ScriptError)},t.onVpaidScriptLoaded=function(t,e,i,r){var n=e.contentWindow.getVPAIDAd;if(n&&"function"==typeof n){var o=n();(0,a.clearTimeoutIfDefined)(r),o.done=i.removeChild.bind(i,e),t.resolve({api:o,container:e})}else t.reject()},t.createVpaidContext=function(t,e,i){var r=this,a=new n.Deferred,s=o.DOMHelper.createTag("iframe",{allow:"autoplay",src:"about:blank"},{width:"100%",height:"100%",border:"none"}),u=o.DOMHelper.createTag("script",{src:t});return s.onload=function(){return r.onContainerIframeLoaded(a,e,s,u,i)},e.appendChild(s),a.promise},t}();e.VpaidContextFactory=s},63589:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.VideoAdPlayer=void 0;var r=i(3714),n=i(19483),o=i(88844),a=i(6365),s=function(){function t(t,e){this.adPlayer=t,this.loadTimeout=e,this.p3=[r.PlayerEvent.AdSkipped,r.PlayerEvent.AdClicked,r.PlayerEvent.AdInteraction],this.o3=new n.ArrayMap}return t.prototype.done=function(){var t=this;return this.adPlayer?this.adPlayer.done().then((function(){return t.adPlayer=null})):Promise.resolve()},t.prototype.load=function(t){var e=this,i=window.setTimeout((function(){return e.done()}),this.loadTimeout);return this.n3=t,this.adPlayer.load(t.publicAd).finally((function(){return(0,o.clearTimeoutIfDefined)(i)}))},t.prototype.on=function(t,e){this.p3.includes(t)||(this.o3.add(t,e),this.adPlayer.on(t,e))},t.prototype.pause=function(){this.adPlayer.pause()},t.prototype.play=function(){return this.adPlayer.play()},t.prototype.skip=function(){},Object.defineProperty(t.prototype,"currentTime",{get:function(){return this.adPlayer.currentTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return this.adPlayer.paused},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.adPlayer.duration},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this.adPlayer.muted},set:function(t){this.adPlayer.muted=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.adPlayer.volume},set:function(t){this.adPlayer.volume=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playerResolution",{set:function(t){},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skippable",{get:function(){var t=this.n3.publicAd.skippableAfter!==a.NON_SKIPPABLE_IDENTIFIER,e=this.n3.publicAd.skippableAfter<=this.currentTime;return t&&e},enumerable:!1,configurable:!0}),t.prototype.reset=function(){return Promise.resolve()},t}();e.VideoAdPlayer=s},64092:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.isInternalLinearAd=function(t){return(0,r.isObject)(t)&&Boolean(t.supportedMediaFiles)},e.isInternalOverlayAd=function(t){return(0,r.isObject)(t)&&Boolean(t.supportedVariations)};var r=i(94685)},72756:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.VpaidAdPlayer=void 0;var r=i(3714),n=i(34841),o=i(88844),a=i(25534),s=i(61411),u=i(41680),c=function(){function t(t,e,i){var s=this;this.w3=new Map,this.Z4=function(){s.done().catch((function(){})),s.D3.reject()},this.a4=function(){(0,o.clearTimeoutIfDefined)(s.P4),s.P4=void 0,(0,o.clearTimeoutIfDefined)(s.R4),s.u3.style.display="block",s.x3.videoElement.style.setProperty("display","block","important"),s.R4=window.setTimeout(s.c4,s.Q4),s.t3.startAd()},this.c4=function(){s.t3.stopAd(),s.b4(),s.D3.reject()},this.d4=function(){(0,o.clearTimeoutIfDefined)(s.R4),s.R4=void 0,s.A3=!0,s.D3.resolve(),s.x3.started(s.s3.publicAd)},this.e4=function(){},this.f4=function(t){s.D3.reject(t),s.reset()},this.g4=function(){return s.A3=!1,s.C3&&(s.C3.reject(),s.C3=null),s.x3.paused(s.currentTime),s.t3&&s.duration>0&&s.t3.getAdLinear()&&0===s.t3.getAdRemainingTime()?s.done():Promise.resolve()},this.h4=function(){s.C3&&(s.C3.resolve(),s.C3=null),s.A3||(s.A3=!0,s.x3.resumed(s.currentTime))},this.i4=function(){s.Y4=!1,s.x3.skipped(),s.reset()},this.j4=function(t){var e=t[0],i=e[0],r=e[2],n=i||s.s3.publicAd.clickThroughUrl;r&&null!=n&&window.open(n)},this.k4=function(){s.duration<=0&&!isFinite(s.O4)&&(s.O4=4*s.currentTime)},this.l4=function(){if(s.t3){var t=s.t3.getAdRemainingTime();if(-1!==t&&-2!==t){var e=s.t3.getAdDuration()-t;if(isFinite(e)&&e>=0&&e!==s.z3){if(s.z3=e,!s.A3)return;s.x3.timeupdate(s.z3)}}}},this.p4=function(){s.o4(),s.b4(),s.U4.resolve()},this.q4=function(){s.V4=!0,(0,o.clearTimeoutIfDefined)(s.S4),s.R4=void 0,s.U4.resolve()},this.done=function(){return(0,o.clearIntervalIfDefined)(s.B3),s.B3=void 0,s.r4().then((function(){return s.U4.promise})).then((function(){return s.T4=[],s.o4(),s.s4(),s.x3.done()})).then((function(){s.Y4&&s.x3.skipped()}))},this.u3=e,this.x3=t,this.w3=new Map,this.z3=-1/0,this.A3=!1,this.D3=new n.Deferred,this.O4=-1/0,this.Q4=i,this.T4=[],this.U4=new n.Deferred,this.V4=!1,this.W4=new u.VpaidEventHandler,this.w3.set(r.PlayerEvent.PlaybackFinished,a.VpaidEvent.AdStopped),this.w3.set(r.PlayerEvent.Error,a.VpaidEvent.AdError),this.w3.set(r.PlayerEvent.AdClicked,a.VpaidEvent.AdClickThru),this.w3.set(r.PlayerEvent.AdSkipped,a.VpaidEvent.AdSkipped),this.w3.set(r.PlayerEvent.AdInteraction,a.VpaidEvent.AdInteraction),this.n4()}return t.prototype.load=function(t,e){var i=this,r=this.x3.videoElement;return this.s3=t,this.v3=e,this.X4={autoplay:r.autoplay,crossOrigin:r.crossOrigin,preload:r.preload,style:r.getAttribute("style")},s.VpaidContextFactory.createVpaidContext(this.s3.publicAd.mediaFileUrl,this.u3,this.Q4).then((function(e){var r,n=i.v3.isFullscreen?a.VpaidViewMode.Fullscreen:a.VpaidViewMode.Normal;(0,o.clearTimeoutIfDefined)(i.P4),i.P4=window.setTimeout(i.Z4,i.Q4),i.t3=e.api,i.W4.attach(i.t3),i.B3=window.setInterval(i.l4,250),i.t3.initAd(i.v3.width,i.v3.height,n,1e5,{AdParameters:t.adParameters},{videoSlotCanAutoPlay:!0,videoSlot:i.x3.videoElement,slot:null===(r=e.container.contentDocument)||void 0===r?void 0:r.body})})).catch((function(){return i.done().then((function(){i.D3.reject()}))})),this.D3.promise.catch((function(t){return i.U4.resolve(),Promise.reject(t)}))},t.prototype.b4=function(){this.T4.forEach((function(t){return t()}))},t.prototype.m4=function(t,e){this.W4.on(t,e)},t.prototype.on=function(t,e){t===r.PlayerEvent.Error&&this.T4.push(e),this.W4.on(this.w3.get(t)||t,e)},t.prototype.off=function(t,e){this.W4.off(t,e)},t.prototype.n4=function(){this.m4(a.VpaidEvent.AdLoaded,this.a4),this.W4.on(a.VpaidEvent.AdError,this.f4),this.W4.on(a.VpaidEvent.AdPaused,this.g4),this.W4.on(a.VpaidEvent.AdPlaying,this.h4),this.W4.on(a.VpaidEvent.AdStarted,this.d4),this.W4.on(a.VpaidEvent.AdStopped,this.q4),this.W4.on(a.VpaidEvent.AdSkipped,this.i4),this.W4.on(a.VpaidEvent.AdClickThru,this.j4),this.W4.on(a.VpaidEvent.AdImpression,this.e4),this.W4.on(a.VpaidEvent.AdVideoFirstQuartile,this.k4)},t.prototype.o4=function(){this.t3&&(this.W4.detach(this.t3),this.t3.done(),this.t3=null,this.X4&&(this.x3.videoElement.preload=this.X4.preload,this.x3.videoElement.autoplay=this.X4.autoplay,this.x3.videoElement.crossOrigin=this.X4.crossOrigin,this.X4.style&&this.x3.videoElement.setAttribute("style",this.X4.style),this.X4=null)),this.u3.style.setProperty("display","none")},t.prototype.r4=function(){return this.V4?Promise.resolve():((0,o.clearTimeoutIfDefined)(this.S4),this.R4=void 0,this.t3?(this.S4=window.setTimeout(this.p4,this.Q4),this.t3.stopAd()):this.U4.resolve(),this.U4.promise)},t.prototype.pause=function(){this.t3.pauseAd(),this.C3&&this.C3.reject()},t.prototype.play=function(){if(this.A3)return Promise.resolve();this.C3=this.C3||new n.Deferred;var t=this.C3.promise;return this.t3.resumeAd(),t},t.prototype.skip=function(){this.t3&&this.t3.skipAd(),this.Y4=!0},Object.defineProperty(t.prototype,"currentTime",{get:function(){return isFinite(this.z3)?this.z3:0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"paused",{get:function(){return!this.A3},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){var t=this.t3.getAdDuration();return t<=0&&isFinite(this.O4)?this.O4:t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return 0===this.t3.getAdVolume()},set:function(t){t&&this.t3.getAdVolume()>0?(this.y3=this.t3.getAdVolume(),this.t3.setAdVolume(0)):t||this.t3.setAdVolume(this.y3)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"volume",{get:function(){return this.t3.getAdVolume()},set:function(t){this.t3.setAdVolume(t)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"playerResolution",{set:function(t){t&&(this.v3=t),this.t3&&this.t3.resizeAd(this.v3.width,this.v3.height,this.v3.isFullscreen?a.VpaidViewMode.Fullscreen:a.VpaidViewMode.Normal)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"skippable",{get:function(){return!!this.t3&&this.t3.getAdSkippableState()},enumerable:!1,configurable:!0}),t.prototype.reset=function(){var t=this;return this.t3?(this.W4.detach(this.t3),this.r4().then((function(){t.o4()}))):(this.s4(),Promise.resolve())},t.prototype.s4=function(){(0,o.clearIntervalIfDefined)(this.B3),(0,o.clearTimeoutIfDefined)(this.P4),(0,o.clearTimeoutIfDefined)(this.R4),(0,o.clearTimeoutIfDefined)(this.S4),this.B3=void 0,this.P4=void 0,this.R4=void 0,this.S4=void 0},t}();e.VpaidAdPlayer=c},77800:function(t,e,i){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.AdBreakService=void 0,e.preprocessAdBreak=function(t,e,i){var n=[];return t.ads.forEach((function(t){if((0,h.isInternalLinearAd)(t)){var o=(0,p.selectLinearMediaFile)(t.supportedMediaFiles,i.technology);if(!o){var a=t.supportedMediaFiles.filter(l.isProgressiveMediaFile);o=e(a)}n.push(function(t,e){return t.publicAd.data=r(r({},t.publicAd.data),(0,l.getAdDataForLinear)(e)),t.publicAd.mediaFileUrl=e.fileURL,t.publicAd.height=e.height,t.publicAd.width=e.width,t.isVpaid=(0,l.isVpaid)(e),null==t.publicAd.uiConfig.requestsUi&&(t.publicAd.uiConfig.requestsUi=!t.isVpaid),t}(t,o))}else if((0,h.isInternalOverlayAd)(t)){var s=(0,p.selectNonLinearMediaFile)(t.supportedVariations,i.resolution);s&&n.push(function(t,e){var i=r(r({},t),{isVpaid:(0,l.isVpaid)(e),type:e.mimeType,htmlResource:e.htmlResource,iframeResource:e.iframeResource,staticResource:e.staticResource,adParameters:e.adParameters});return i.publicAd.data=r(r({},i.publicAd.data),(0,l.getAdDataForNonLinear)(e)),i.publicAd.mediaFileUrl=e.staticResource||e.htmlResource||e.iframeResource,i.publicAd.clickThroughUrl=e.nonlinearClickThroughURLTemplate,i.publicAd.height=e.height,i.publicAd.width=e.width,i}(t,s))}})),r(r({},t),{ads:n})};var n=i(45392),o=i(90176),a=i(28610),s=i(23912),u=i(6365),c=i(47091),d=i(5838),l=i(45980),h=i(64092),p=i(85320),f=i(58656),v=function(){function t(t,e,i){this.IK=t,this.LK=[],this.MK=[],this.NK=[],this.OK=[],this.JK=e,this.KK=e.strategy,this.PK=0,this.QK=0,this.RK=i,this.SK=this.IK.getVideoElement().parentElement,this.JK.placeholders=r(r({},o.adTagPlaceholderDefaults),this.JK.placeholders)}return t.prototype.schedule=function(t){var e=this.qL(t);return this.pL(e)?this.TK(e,this.UK()):Promise.reject("can not schedule invalid AdConfig")},t.prototype.TK=function(t,e){var i=this;return this.hL(t).then((function(r){return 0===r.length&&t.fallbackTags&&t.fallbackTags.length>0?(t.tag=t.fallbackTags.shift(),i.TK(t,e)):Promise.resolve(i.VK(r.map((function(r){return i.gL(t,r,e)}))))}))},t.prototype.UK=function(){return this.QK+=100,this.QK},t.prototype.VK=function(t){var e=this,i=[];t.forEach((function(t,r){var n=e.IK.parsePosition(t.publicAdBreak.position);t.orderingIndex=t.orderingIndex+r,isNaN(n)?e.MK.push(t):(t.publicAdBreak.scheduleTime=n,i.push(t))}));var r=i.filter((function(t){return t.publicAdBreak.persistent}));return this.LK=this.LK.concat(i),this.NK=this.NK.concat(r),this.LK.sort(f.adBreakPreloadComparator),this.NK.sort(f.adBreakPreloadComparator),i},t.prototype.gL=function(t,e,i){var n=r({},e.publicAdBreakConfig),o=r(r({publicAdBreak:n,orderingIndex:i},e),{isScheduled:!1,discardAfterPlayback:t.discardAfterPlayback});return delete o.publicAdBreakConfig,o},t.prototype.hL=function(t){var e=this;return new Promise((function(i){if(t.tag.type===s.AdTagType.VMAP){var r=t.tag.url;t.tag.url=e.lL(t.tag.url),d.VmapExtractor.extractAdBreakConfigs(t).then((function(n){var o=n.adBreakConfigs.filter((function(t){var i=e.IK.parsePosition(t.publicAdBreakConfig.position);return isNaN(i)||i>=e.PK}));t.tag.url=r,e.IK.metadataLoaded(t,n.downloadTiming),i(o)})).catch((function(n){t.tag.url=r,n?e.IK.onError(n.code,null,t):e.IK.onError(c.VastErrorCode.UNDEFINED_ERROR,null,t),i([])}))}else i([{publicAdBreakConfig:t}])}))},t.prototype.list=function(){return this.LK.concat(this.OK)},t.prototype.discardAdBreak=function(t){var e=function(e){return e.publicAdBreak.id!==t};this.LK=this.LK.filter(e),this.OK=this.OK.filter(e)},t.prototype.setCurrentScheduleTime=function(t){this.PK=t},t.prototype.resetPlayedAdBreaks=function(t){this.list().forEach((function(e){e.publicAdBreak.scheduleTime>=t&&(e.loading=!1,e.isScheduled=!1)}))},t.prototype.preloadAdBreaks=function(t){this.MK.length>0&&this.VK(this.MK.splice(0,this.MK.length));var e=this.LK[0];return!e||t<e.publicAdBreak.scheduleTime-e.publicAdBreak.preloadOffset?Promise.resolve():Promise.all(this.iL(t)).then((function(){}))},t.prototype.iL=function(t){var e=this;return this.LK.filter((function(e){return t>=e.publicAdBreak.scheduleTime-e.publicAdBreak.preloadOffset&&!e.isScheduled&&!e.loading})).map((function(t){return t.loading=!0,e.jL(t)}))},t.prototype.jL=function(t,e){var i=this,r=e&&e.url||t.publicAdBreak.tag.url;return r=this.lL(r),n.AdManifestHelper.downloadVastManifest(r).then((function(e){return i.IK.metadataLoaded(t.publicAdBreak,e.downloadTiming),i.oL(e.manifest,t.publicAdBreak).then((function(e){t.ads=e,t.publicAdBreak.ads=e.map((function(t){return t.publicAd})),t.discardAfterPlayback&&i.mL(t),t.isScheduled=!0,i.OK.push(t),i.OK.sort(f.adBreakScheduleComparator)}))})).catch((function(e){return i.kL(t).then((function(){delete t.currentFallbackIndex})).catch((function(){t.discardAfterPlayback&&i.mL(t),i.nL(t),delete t.currentFallbackIndex,i.IK.onError(e.code,null,t.publicAdBreak),(0,n.pingVmapTrackingUrls)(t.trackingEvents,a.VmapTrackingEventType.BreakStart),(0,n.pingVmapTrackingUrls)(t.trackingEvents,a.VmapTrackingEventType.Error),(0,n.pingVmapTrackingUrls)(t.trackingEvents,a.VmapTrackingEventType.BreakEnd)}))}))},t.prototype.kL=function(t){return"number"!=typeof t.currentFallbackIndex?t.currentFallbackIndex=0:t.currentFallbackIndex++,t.publicAdBreak.fallbackTags&&t.publicAdBreak.fallbackTags[t.currentFallbackIndex]?this.jL(t,t.publicAdBreak.fallbackTags[t.currentFallbackIndex]):Promise.reject()},t.prototype.lL=function(t){var e=this,i={playbackTime:this.PK,height:String(this.SK.clientHeight),width:String(this.SK.clientWidth),domain:encodeURIComponent(document.location.hostname),page:encodeURIComponent(document.location.href),referrer:encodeURIComponent(document.referrer),random:Math.floor(1e7+9e7*Math.random()).toString(),timestamp:String(Date.now())};return Object.keys(this.JK.placeholders).forEach((function(r){e.JK.placeholders[r].forEach((function(e){t=t.replace(e,i[r])}))})),t},t.prototype.mL=function(t){var e=this.LK.indexOf(t);e>=0&&this.LK.splice(e,1)},t.prototype.nL=function(t){var e=this.OK.indexOf(t);e>=0&&this.OK.splice(e,1)},t.prototype.oL=function(t,e){return this.RK.parseManifest(t,this.JK.freewheelVastFallbackHandling).then((function(t){return t.ads.flatMap((function(t){return l.AdTranslator.fromVastAd(t,e)}))}))},t.prototype.getPlayableAdBreaks=function(t){var e=this,i=this.OK[0];if(!i||t<i.publicAdBreak.scheduleTime)return[];var r=this.OK.filter((function(e){return t>=e.publicAdBreak.scheduleTime}));return this.OK=this.OK.filter((function(t){return!r.includes(t)})),r.filter((function(t){return e.KK.shouldPlayAdBreak(t.publicAdBreak)}))},t.prototype.pL=function(t){return[t.tag].concat(t.fallbackTags||[]).every((function(t){return t&&t.url&&Object.keys(s.AdTagType).some((function(e){return t.type===s.AdTagType[e]}))}))},t.prototype.reset=function(){this.LK=this.NK,this.OK=[],this.PK=0},t.prototype.qL=function(t){var e=r({},t);return e.position||(e.position=u.DEFAULT_AD_BREAK_POSITION),"number"!=typeof e.preloadOffset&&(e.preloadOffset=u.DEFAULT_PRELOAD_OFFSET),e},t.prototype.getPlayerContainerResolution=function(){return{width:this.SK.clientWidth,height:this.SK.clientHeight}},t}();e.AdBreakService=v},85320:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.selectLinearMediaFile=function(t,e){var i=function(t,e){return(0,n.getBestTech)(e,function(t){return t.reduce((function(t,e){return t[function(t){return o.MimeTypeHelper.isDash(t)?r.StreamType.Dash:o.MimeTypeHelper.isHls(t)?r.StreamType.Hls:r.StreamType.Progressive}(e.mimeType)]=e.fileURL,t}),{})}(t)).streaming}(t,e);return i===r.StreamType.Dash||i===r.StreamType.Hls?function(t,e){return e.find((function(e){return t===r.StreamType.Dash?o.MimeTypeHelper.isDash(e.mimeType):t===r.StreamType.Hls&&o.MimeTypeHelper.isHls(e.mimeType)}))}(i,t):null},e.selectNonLinearMediaFile=function(t,e){var i=t.filter((function(t){return t.width<=e.width&&t.height<=e.height}));return i.length?(0,a.findMediaFileByResolution)(e.width*s,e.height*u,i):null};var r=i(44468),n=i(47993),o=i(85434),a=i(65185),s=.85,u=.15},88944:function(t,e,i){Object.defineProperty(e,"__esModule",{value:!0}),e.splitAdsBySequence=function(t,e){return e?function(t){var e=function(t){var e={};return t.forEach((function(t){var i=function(t){return Number(t.originalVastAd&&(t.originalVastAd.sequence||t.originalVastAd.fallbackAdSequence))||1/0}(t);!function(t,e,i){i[t]?i[t].fallback.push(e):i[t]={main:e,fallback:[]}}(i,t,e)})),e}(t);return{mainAds:Object.keys(e).sort(n).map((function(t){return e[t].main})),getBackupAds:function(t){var i=Object.values(e).find((function(e){return e.main===t}));return null==i?[]:i.fallback}}}(t):function(t){var e=(0,r.splitArray)(t,(function(t){return!t.fallback})),i=e[0],n=e[1];return{mainAds:i,getBackupAds:function(t){return n}}}(t)};var r=i(60814);function n(t,e){return(Number(t)||999)-(Number(e)||999)}},92996:function(t,e){var i;Object.defineProperty(e,"__esModule",{value:!0}),e.BitmovinModuleErrorCode=void 0,i||(e.BitmovinModuleErrorCode=i={})}},function(t){return function(){return t(t.s=17614)}()}])}));
})();

/****************************************************************************
 * Bitmovin Proprietary Software
 * Copyright (c) 2025, Bitmovin GmbH. All rights reserved.
 *
 * This software is proprietary and confidential to Bitmovin GmbH.
 * It may not be copied, modified, or distributed without explicit
 * written permission from Bitmovin GmbH.
 *
 * This software includes open-source components. See THIRD_PARTY_NOTICES
 * in the distribution for details.
 *
 * Bitmovin Player Version 8.235.0
 *
 ****************************************************************************/

(function() {
"use strict";!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports["subtitles-vtt"]=e():(t.bitmovin=t.bitmovin||{},t.bitmovin.player=t.bitmovin.player||{},t.bitmovin.player["subtitles-vtt"]=e())}(self,(function(){return(self.webpackChunkbitmovin_player=self.webpackChunkbitmovin_player||[]).push([[831],{730:function(t,e,n){var r=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n);var i=Object.getOwnPropertyDescriptor(e,n);i&&!("get"in i?!e.__esModule:i.writable||i.configurable)||(i={enumerable:!0,get:function(){return e[n]}}),Object.defineProperty(t,r,i)}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__exportStar||function(t,e){for(var n in t)"default"===n||Object.prototype.hasOwnProperty.call(e,n)||r(e,t,n)};Object.defineProperty(e,"__esModule",{value:!0}),i(n(79347),e),i(n(39157),e),i(n(76171),e),i(n(69041),e),i(n(22649),e)},1757:function(t,e,n){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0}),e.WebVttParser=void 0;var i=n(730),u=function(){function t(){}return t.prototype.parse=function(t,e){return void 0===e&&(e=0),(t=t.replace(/\r\n/gm,"\n")).startsWith("[EMBEDDEDWEBVTT]")?this.ls(t):this.ms(t,e)},t.prototype.ls=function(t){var e,n,r=t.split("\n"),u=r[1],l=r[2],a=r[3],s=r[4],c=r.slice(5).join("\n"),f=o();f.start=Number(u),f.end=Number(l),f.i=Number(a);var p=i.parseContents(c,0,i.getPlaceholderVttStyleProperties());f.text=null!==(n=null!==(e=null==p?void 0:p.textContent)&&void 0!==e?e:null==p?void 0:p.innerText)&&void 0!==n?n:"";var v=i.stringifyCueHtml(p);if(f.html=v,s){var d=i.parseOptions(s,[]);f.vtt=d}return f.vtt.id=a,[f]},t.prototype.ms=function(t,e){var n=t.split(/\n{2,}|^[WEBVTT\n+]?X-TIMESTAMP-MAP=.*\n+|^WEBVTT\n+/m).filter((function(t){return null!=t&&""!==t})).map((function(t){return t.split("\n")})),r=this.ns(t),i=this.os(n),u={vtt:r,base:e};return this.vs(n,i,u)},t.prototype.ns=function(t){var e=/X-TIMESTAMP-MAP=(.*)\n/.exec(t);if(null==(null==e?void 0:e[1]))return 0;var n=e[0],r=/LOCAL:((?:(\d{1,}):)?(\d{2}):(\d{2})\.(\d{3}))/m.exec(n),u=/MPEGTS:(\d+)/m.exec(n),o=0;if(null==r?void 0:r[1]){var l=i.parseTime(r[1]);null!=l&&(o=l)}var a=0;return null!=u&&(a=Number(u[1])),a/9e4-o},t.prototype.os=function(t){for(var e=[],n=[],r=0,u=t;r<u.length;r++){var o=u[r],l=o[0];/^STYLE/.test(l.trim())&&n.push.apply(n,i.parseStyles(o)),/^region:?/i.test(l.trim())&&e.push.apply(e,i.parseRegions(o))}return{regions:e,styles:n}},t.prototype.ps=function(t){var e=/^NOTE/.test(t),n=/^STYLE/.test(t),r=/^region:?/i.test(t);return!e&&!n&&!r},t.prototype.qs=function(t){return null!=t&&""!==t&&!!t.includes("--\x3e")},t.prototype.rs=function(t){var e={},n=[];return t.forEach((function(t){null==t.identifier&&(e=r(r({},e),t.style));var i=n.findIndex((function(e){return e.identifier===t.identifier}));-1!==i?n[i]={identifier:t.identifier,style:r(r({},n[i].style),t.style)}:n.push(t)})),i.getPlaceholderVttStyleProperties().forEach((function(t){n.find((function(e){return e.identifier===t.identifier}))||n.push(t)})),{globalStyle:e,contentStyles:n}},t.prototype.ss=function(t,e){var n=i.stringifyCssProperties(e);n&&(t.html.setAttribute("style",n),t.subCues.forEach((function(t){t.html.setAttribute("style",n)})))},t.prototype.ts=function(t,e,n){var r=/(<\d+:\d{2}:\d{2}[.,]\d{3}>)/g,u=[],o=function(t){var e=t[0].split(/[ \t]+-->[ \t]+/);return{start:i.parseTime(e[0]),end:i.parseTime(e[1])}}(t),a=o.start,s=o.end;if(null!==a&&null!==s){for(var c=function(t){return t.slice(1).join("\n").trim()}(t),f=c.split(r),p="",v=c.replace(r,""),d=a;f.length>0;){var y=f.shift(),b=f.shift(),h=b?i.parseTime(b):s,m=null!=h?h:s;if(d!==m){var g=l(y,p,v=v.substring(y.length));p+=y;var P=i.parseContents(g,n,e);u.push({updateTime:d,html:P}),d=m}}var A=u.shift();if(A)return{start:a,end:s,html:A.html,subCues:u}}},t.prototype.us=function(t,e,n){var i={};return n&&(i=t.filter((function(t){return t.identifier==="#"+n})).reduce((function(t,e){return r(r({},t),e.style)}),{})),r(r({},e),i)},t.prototype.vs=function(t,e,n){var u=this,l=[],a=0,s=e.regions,c=e.styles,f=this.rs(c),p=f.globalStyle,v=f.contentStyles;return t.filter((function(t){return u.ps(t[0])})).forEach((function(t){var e=void 0;t[0].includes("--\x3e")||(e=t[0].trim(),t.splice(0,1));var c=u.ws(e,a);if(a=c,u.qs(t[0])){var f=i.parseOptions(t[0],s);f.id=e;var d=u.ts(t,v,n.base);if(void 0!==d){var y=u.us(v,p,e);u.ss(d,y);var b=function(t,e,n,u){var l,a,s=o();return s.i=e,s.start=t.start+n.base,s.end=t.end+n.base,s.text=(null===(l=t.html)||void 0===l?void 0:l.textContent)||(null===(a=t.html)||void 0===a?void 0:a.innerText)||"",s.html=i.stringifyCueHtml(t.html),s.vtt=r({},u),0!==n.vtt&&(s.offset=n.vtt),s.updates=t.subCues.map((function(t){return{updateTime:t.updateTime+n.base,html:i.stringifyCueHtml(t.html)}})),s}(d,c,n,f);l.push(b)}}})),l},t.prototype.ws=function(t,e){var n=Number(t);return null==t||isNaN(n)?e+1:n},t}();function o(){return{i:null,start:null,end:null,text:null,html:null,vtt:i.getDefaultVttProperties(),offset:null,updates:[]}}function l(t,e,n){return(e?a(e,"cue-past"):"")+t+(n?a(n,"cue-future"):"")}function a(t,e){return"<c.".concat(e,">").concat(t,"</c>")}e.WebVttParser=u,e.default=u},22649:function(t,e){Object.defineProperty(e,"__esModule",{value:!0}),e.parseStyles=function(t){var e=[],n=/::cue(\((.+)\))?(?= |{)/,r=/([a-zA-Z0-9-]+):(.+?(?=;|}|$))/g,i=n.exec(t[1]);if(!i)return e;for(var u=1;u<t.length;u++){for(var o=n.exec(t[u]),l=null!==o,a=(i=l?o:i)[2],s={},c=r.exec(t[u]);null!==c;){var f=c[1],p=c[2];s[f]=p.trim(),c=r.exec(t[u])}(l||Object.keys(s).length>0)&&e.push({identifier:a,style:s})}return e},e.getPlaceholderVttStyleProperties=function(){return[{identifier:":future",style:{visibility:"hidden"}}]}},39157:function(t,e,n){var r=this&&this.__assign||function(){return r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t},r.apply(this,arguments)},i=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,u=e.length;i<u;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.parseContents=function(t,e,n){var r=u.ModuleManager.get(o.ModuleName.Subtitles).createHtmlElement("span");return y({input:t,root:r,current:r,tagStack:[],offset:e,styles:n})};var u=n(88052),o=n(62756),l=n(99735),a=n(69041),s={"&amp;":"&","&lt;":"<","&gt;":">","&lrm;":"","&rlm;":"","&nbsp;":""},c={c:"span",i:"i",b:"b",u:"u",ruby:"ruby",rt:"rt",v:"span",lang:"span"},f={v:"title",lang:"lang"},p={rt:"ruby"},v={"cue-future":":future","cue-past":":past"},d=2;function y(t){var e=function(t){if(!t)return null;var e=/^([^<]*)(<[^>]+>?)?/.exec(t);if(!e)return null;var n=e[1],r=e[2];return n||r}(t.input);return null==e?t.root:(t.input=t.input.substring(e.length),function(t,e){if("<"!==t[0]){var n=e.current.ownerDocument.createTextNode(function(t){return Object.keys(s).forEach((function(e){t=t.replace(new RegExp(e,"g"),s[e])})),t}(t));return e.current.appendChild(n),y(e)}if("/"===t[1])return function(t,e){return e.length>0&&e[e.length-1]===t.substring(d).replace(">","")}(t,e.tagStack)&&(e.tagStack.pop(),e.current=e.current.parentNode),y(e);var u=(0,a.parseTime)(t.substring(1,t.length-1));if(null!=u){var o=e.current.ownerDocument.createComment("time: ".concat(u+e.offset));return e.current.appendChild(o),y(e)}var b=/^<([^.\s/0-9>]+)(\.[^\s\\>]+)?([^>\\]+)?(\\?)>?$/.exec(t);if(!b)return y(e);var h=b[0],m=b[1],g=b[2],P=b[3],A=function(t,e,n){var r=c[t];if(!r)return null;var i=n.createElement(r),u=f[t];return u&&e&&(i[u]=e.trim()),i}(m,P,e.current.ownerDocument);return A&&function(t,e){return!p[e.localName]||p[e.localName]===t.localName}(e.current,A)?(function(t,e,n){var u=function(t,e){var n,u,o,s,c;t=i(i([],t,!0),l.webVttDefaultClassStyles,!0);var f="",p="",d={};if(e.type&&"v"!==e.type&&(d=null!==(u=null===(n=t.find((function(t){return t.identifier===e.type})))||void 0===n?void 0:n.style)&&void 0!==u?u:d),e.contents){var y=e.contents.substring(1).split(".").map((function(t){return v[t]||".".concat(t)})),b=[];y.forEach((function(e){var n,r=null===(n=t.find((function(t){return t.identifier===e})))||void 0===n?void 0:n.style;r&&b.push(r)})),d=b.reduce((function(t,e){return r(r({},t),e)}),{}),f=e.contents.split(".").join(" ").trim()}return"v"===e.type&&e.annotation&&(p=e.annotation.substring(1),d=null!==(s=null===(o=t.find((function(t){return t.identifier==="".concat(e.type,'[voice="').concat(p,'"]')})))||void 0===o?void 0:o.style)&&void 0!==s?s:d),{className:f,title:p,styleString:null!==(c=(0,a.stringifyCssProperties)(d))&&void 0!==c?c:""}}(e,n),o=u.className,s=u.title,c=u.styleString;s&&(t.title=s),o&&(t.className=o),c&&t.setAttribute("style",c)}(A,e.styles,{type:m,contents:g,annotation:P}),e.tagStack.push(h[1]),e.current.appendChild(A),e.current=A,y(e)):y(e)}(e,t))}},48519:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.WebVttSubtitlesModuleDefinition=void 0;var r=n(62756),i=n(69041),u=n(1757);e.WebVttSubtitlesModuleDefinition={name:r.ModuleName.SubtitlesWebVTT,module:function(){return{WebVttParser:u.WebVttParser,extractVttProperties:i.extractVttProperties}},dependencies:[r.ModuleName.Subtitles]},e.default=e.WebVttSubtitlesModuleDefinition},69041:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.getDefaultVttProperties=l,e.extractVttProperties=function(t){var e=l(),n=a();return Object.keys(e).forEach((function(i){return(0,o.setOptionProperty)(function(t,e,n){var i=[t,e[t]?"".concat(e[t]):n[t]],u="line"===t;return("position"===t&&(0,r.isNumber)(e[t])||u&&!1===e.snapToLines)&&(i[1]+="%"),i}(i,t,e),[n],e)})),e},e.getDefaultVttRegionProperties=a,e.parseTime=function(t){var e=/(?:(\d{1,}):)?(\d{2}):(\d{2})[.,](\d{3})/g.exec(t);if(null==e)return null;var n=e[1],r=e[2],i=e[3],u=e[4];return Number(u)/1e3+Number(i)+60*Number(r)+3600*(Number(n)||0)},e.ensureArray=function(t){return Array.isArray(t)?t:[]},e.stringifyCssProperties=function(t){return t?Object.entries(t).map((function(t){return"".concat(t[0],":").concat(t[1],";")})).join(""):null},e.stringifyCueHtml=function(t){return(0,i.ModuleManager.get(u.ModuleName.Subtitles).HtmlTransformer.prepareHtml)((null==t?void 0:t.outerHTML)||"")};var r=n(23068),i=n(88052),u=n(62756),o=n(76171);function l(){return{vertical:"",align:"center",size:100,line:"auto",lineAlign:"start",position:"auto",positionAlign:"center",snapToLines:!1}}function a(){return{id:null,width:100,lines:3,regionAnchorX:0,regionAnchorY:100,viewportAnchorX:0,viewportAnchorY:100,scroll:""}}},76171:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.parseOptions=function(t,e){var n=t.split(/\s/),r=(0,i.getDefaultVttProperties)();return n.forEach((function(t){u(t.split(":"),e,r)})),function(t){var e=(0,i.getDefaultVttProperties)();null!=t.region&&(t.vertical!==e.vertical||t.size!==e.size||t.line!==e.line)&&delete t.region}(r),r},e.setOptionProperty=u;var r=n(23068),i=n(69041);function u(t,e,n){var u=t[0],l=t[1];switch(u){case"region":!function(t,e,n){var r=e.find((function(e){return e.id===t}));null!=r&&(n.region=r)}(l,e,n);break;case"vertical":!function(t,e){var n=(0,i.ensureArray)(/^(lr|rl)$/.exec(t))[1];null!=n&&(e.vertical=n)}(l,n);break;case"align":!function(t,e){var n=(0,i.ensureArray)(/^(start|middle|center|end|left|right)$/.exec(t))[1];null!=n&&(e.align=n),e.positionAlign=o(void 0,e)}(l,n);break;case"size":!function(t,e){var n=(0,i.ensureArray)(/^([\d.]+)%$/.exec(t))[1];null!=n&&(e.size=Number(n))}(l,n);break;case"position":!function(t,e){var n=(0,i.ensureArray)(/^([\d.]+|auto)%?(?:,(line-left|line-right|center))?$/.exec(t)),r=n[1],u=n[2];"auto"===r?e.position="auto":void 0!==r&&(e.position=Number(r)),e.positionAlign=o(u,e)}(l,n);break;case"line":!function(t,e){var n=(0,i.ensureArray)(/^(-?[\d.]+|auto)(%)?(?:,(start|end|center|auto))?$/.exec(t)),u=n[1],o=n[2],l=n[3],a="%"===o;"auto"===u?e.line="auto":a?e.line="".concat(u,"%"):null!=t&&(e.line=Number(u)),null!=l&&(e.lineAlign=l),e.snapToLines=(0,r.isNumber)(e.line)}(l,n)}}function o(t,e){if(null!=t)return t;switch(e.align){case"start":case"left":return"line-left";case"end":case"right":return"line-right";default:return"center"}}},79347:function(t,e,n){Object.defineProperty(e,"__esModule",{value:!0}),e.parseRegions=function(t){for(var e=[],n=0,r=t;n<r.length;n++){var o=r[n];if(o=o.trim(),/^REGION$/i.test(o)){e.push(i(t));break}/^Region:/i.test(o)&&e.push(u(o))}return e};var r=n(69041);function i(t){return o(t.slice(1),":")}function u(t){return o(t.split(/[ \t]+/).slice(1),"=")}function o(t,e){var n=(0,r.getDefaultVttRegionProperties)();return t.forEach((function(t){!function(t,e){var n=t[0],i=t[1];switch(n){case"id":!function(t,e){null!=t&&(e.id=t)}(i,e);break;case"width":!function(t,e){var n=(0,r.ensureArray)(/^(\d{1,2}|100)%$/.exec(t))[1];null!=n&&(e.width=Number(n))}(i,e);break;case"lines":!function(t,e){var n=(0,r.ensureArray)(/^(\d+)$/.exec(t))[1];null!=n&&(e.lines=Number(n))}(i,e);break;case"regionanchor":!function(t,e){var n=(0,r.ensureArray)(/^(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t)),i=n[1],u=n[2];null!=i&&(e.regionAnchorX=Number(i)),null!=u&&(e.regionAnchorY=Number(u))}(i,e);break;case"viewportanchor":!function(t,e){var n=(0,r.ensureArray)(/^(\d{1,2}|100)%,(\d{1,2}|100)%$/.exec(t)),i=n[1],u=n[2];null!=i&&(e.viewportAnchorX=Number(i)),null!=u&&(e.viewportAnchorY=Number(u))}(i,e);break;case"scroll":!function(t,e){var n=(0,r.ensureArray)(/^(up)$/.exec(t))[1];null!=n&&(e.scroll=n)}(i,e)}}(t.split(e),n)})),n}},99735:function(t,e){var n=this&&this.__spreadArray||function(t,e,n){if(n||2===arguments.length)for(var r,i=0,u=e.length;i<u;i++)!r&&i in e||(r||(r=Array.prototype.slice.call(e,0,i)),r[i]=e[i]);return t.concat(r||Array.prototype.slice.call(e))};Object.defineProperty(e,"__esModule",{value:!0}),e.webVttDefaultClassStyles=void 0;var r=["white","lime","cyan","red","yellow","magenta","blue","black"];e.webVttDefaultClassStyles=n(n([],r.map((function(t){return{identifier:".".concat(t),style:{color:t}}})),!0),r.map((function(t){return{identifier:".bg_".concat(t),style:{background:t}}})),!0)}},function(t){return function(){return t(t.s=48519)}()}])}));
})();
